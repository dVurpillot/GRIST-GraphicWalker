var y5e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var iTt=y5e((Lo,Ro)=>{function v5e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function wW(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _te={exports:{}},vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zw=Symbol.for("react.element"),x5e=Symbol.for("react.portal"),w5e=Symbol.for("react.fragment"),Z5e=Symbol.for("react.strict_mode"),S5e=Symbol.for("react.profiler"),k5e=Symbol.for("react.provider"),_5e=Symbol.for("react.context"),G5e=Symbol.for("react.forward_ref"),I5e=Symbol.for("react.suspense"),W5e=Symbol.for("react.memo"),E5e=Symbol.for("react.lazy"),gK=Symbol.iterator;function X5e(e){return e===null||typeof e!="object"?null:(e=gK&&e[gK]||e["@@iterator"],typeof e=="function"?e:null)}var Gte={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ite=Object.assign,Wte={};function Kg(e,t,n){this.props=e,this.context=t,this.refs=Wte,this.updater=n||Gte}Kg.prototype.isReactComponent={};Kg.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Kg.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ete(){}Ete.prototype=Kg.prototype;function cF(e,t,n){this.props=e,this.context=t,this.refs=Wte,this.updater=n||Gte}var dF=cF.prototype=new Ete;dF.constructor=cF;Ite(dF,Kg.prototype);dF.isPureReactComponent=!0;var bK=Array.isArray,Xte=Object.prototype.hasOwnProperty,fF={current:null},Lte={key:!0,ref:!0,__self:!0,__source:!0};function Rte(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)Xte.call(t,r)&&!Lte.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:zw,type:e,key:o,ref:a,props:i,_owner:fF.current}}function L5e(e,t){return{$$typeof:zw,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pF(e){return typeof e=="object"&&e!==null&&e.$$typeof===zw}function R5e(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var yK=/\/+/g;function LX(e,t){return typeof e=="object"&&e!==null&&e.key!=null?R5e(""+e.key):t.toString(36)}function Mk(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case zw:case x5e:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+LX(a,0):r,bK(i)?(n="",e!=null&&(n=e.replace(yK,"$&/")+"/"),Mk(i,t,n,"",function(u){return u})):i!=null&&(pF(i)&&(i=L5e(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(yK,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",bK(e))for(var s=0;s<e.length;s++){o=e[s];var l=r+LX(o,s);a+=Mk(o,t,n,l,i)}else if(l=X5e(e),typeof l=="function")for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=r+LX(o,s++),a+=Mk(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function AZ(e,t,n){if(e==null)return e;var r=[],i=0;return Mk(e,r,"","",function(o){return t.call(n,o,i++)}),r}function C5e(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ti={current:null},Ok={transition:null},V5e={ReactCurrentDispatcher:Ti,ReactCurrentBatchConfig:Ok,ReactCurrentOwner:fF};vt.Children={map:AZ,forEach:function(e,t,n){AZ(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return AZ(e,function(){t++}),t},toArray:function(e){return AZ(e,function(t){return t})||[]},only:function(e){if(!pF(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};vt.Component=Kg;vt.Fragment=w5e;vt.Profiler=S5e;vt.PureComponent=cF;vt.StrictMode=Z5e;vt.Suspense=I5e;vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V5e;vt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ite({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=fF.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)Xte.call(t,l)&&!Lte.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:zw,type:e.type,key:i,ref:o,props:r,_owner:a}};vt.createContext=function(e){return e={$$typeof:_5e,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:k5e,_context:e},e.Consumer=e};vt.createElement=Rte;vt.createFactory=function(e){var t=Rte.bind(null,e);return t.type=e,t};vt.createRef=function(){return{current:null}};vt.forwardRef=function(e){return{$$typeof:G5e,render:e}};vt.isValidElement=pF;vt.lazy=function(e){return{$$typeof:E5e,_payload:{_status:-1,_result:e},_init:C5e}};vt.memo=function(e,t){return{$$typeof:W5e,type:e,compare:t===void 0?null:t}};vt.startTransition=function(e){var t=Ok.transition;Ok.transition={};try{e()}finally{Ok.transition=t}};vt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};vt.useCallback=function(e,t){return Ti.current.useCallback(e,t)};vt.useContext=function(e){return Ti.current.useContext(e)};vt.useDebugValue=function(){};vt.useDeferredValue=function(e){return Ti.current.useDeferredValue(e)};vt.useEffect=function(e,t){return Ti.current.useEffect(e,t)};vt.useId=function(){return Ti.current.useId()};vt.useImperativeHandle=function(e,t,n){return Ti.current.useImperativeHandle(e,t,n)};vt.useInsertionEffect=function(e,t){return Ti.current.useInsertionEffect(e,t)};vt.useLayoutEffect=function(e,t){return Ti.current.useLayoutEffect(e,t)};vt.useMemo=function(e,t){return Ti.current.useMemo(e,t)};vt.useReducer=function(e,t,n){return Ti.current.useReducer(e,t,n)};vt.useRef=function(e){return Ti.current.useRef(e)};vt.useState=function(e){return Ti.current.useState(e)};vt.useSyncExternalStore=function(e,t,n){return Ti.current.useSyncExternalStore(e,t,n)};vt.useTransition=function(){return Ti.current.useTransition()};vt.version="18.2.0";_te.exports=vt;var G=_te.exports;const x=wW(G),Y5e=v5e({__proto__:null,default:x},[G]);var Cte={exports:{}},Ko={},Vte={exports:{}},Yte={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,j){var J=M.length;M.push(j);e:for(;0<J;){var q=J-1>>>1,K=M[q];if(0<i(K,j))M[q]=j,M[J]=K,J=q;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var j=M[0],J=M.pop();if(J!==j){M[0]=J;e:for(var q=0,K=M.length,D=K>>>1;q<D;){var $=2*(q+1)-1,Q=M[$],B=$+1,pe=M[B];if(0>i(Q,J))B<K&&0>i(pe,Q)?(M[q]=pe,M[B]=J,q=B):(M[q]=Q,M[$]=J,q=$);else if(B<K&&0>i(pe,J))M[q]=pe,M[B]=J,q=B;else break e}}return j}function i(M,j){var J=M.sortIndex-j.sortIndex;return J!==0?J:M.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],u=[],c=1,d=null,f=3,h=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(M){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=M)r(u),j.sortIndex=j.expirationTime,t(l,j);else break;j=n(u)}}function k(M){if(g=!1,Z(M),!m)if(n(l)!==null)m=!0,P(_);else{var j=n(u);j!==null&&H(k,j.startTime-M)}}function _(M,j){m=!1,g&&(g=!1,v(E),E=-1),h=!0;var J=f;try{for(Z(j),d=n(l);d!==null&&(!(d.expirationTime>j)||M&&!C());){var q=d.callback;if(typeof q=="function"){d.callback=null,f=d.priorityLevel;var K=q(d.expirationTime<=j);j=e.unstable_now(),typeof K=="function"?d.callback=K:d===n(l)&&r(l),Z(j)}else r(l);d=n(l)}if(d!==null)var D=!0;else{var $=n(u);$!==null&&H(k,$.startTime-j),D=!1}return D}finally{d=null,f=J,h=!1}}var R=!1,I=null,E=-1,X=5,Y=-1;function C(){return!(e.unstable_now()-Y<X)}function N(){if(I!==null){var M=e.unstable_now();Y=M;var j=!0;try{j=I(!0,M)}finally{j?V():(R=!1,I=null)}}else R=!1}var V;if(typeof w=="function")V=function(){w(N)};else if(typeof MessageChannel!="undefined"){var F=new MessageChannel,O=F.port2;F.port1.onmessage=N,V=function(){O.postMessage(null)}}else V=function(){y(N,0)};function P(M){I=M,R||(R=!0,V())}function H(M,j){E=y(function(){M(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,P(_))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(M){switch(f){case 1:case 2:case 3:var j=3;break;default:j=f}var J=f;f=j;try{return M()}finally{f=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,j){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var J=f;f=M;try{return j()}finally{f=J}},e.unstable_scheduleCallback=function(M,j,J){var q=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?q+J:q):J=q,M){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=J+K,M={id:c++,callback:j,priorityLevel:M,startTime:J,expirationTime:K,sortIndex:-1},J>q?(M.sortIndex=J,t(u,M),n(l)===null&&M===n(u)&&(g?(v(E),E=-1):g=!0,H(k,J-q))):(M.sortIndex=K,t(l,M),m||h||(m=!0,P(_))),M},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(M){var j=f;return function(){var J=f;f=j;try{return M.apply(this,arguments)}finally{f=J}}}})(Yte);Vte.exports=Yte;var T5e=Vte.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tte=G,Fo=T5e;function we(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nte=new Set,Zx={};function gh(e,t){T0(e,t),T0(e+"Capture",t)}function T0(e,t){for(Zx[e]=t,e=0;e<t.length;e++)Nte.add(t[e])}var Uu=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),OC=Object.prototype.hasOwnProperty,N5e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vK={},xK={};function F5e(e){return OC.call(xK,e)?!0:OC.call(vK,e)?!1:N5e.test(e)?xK[e]=!0:(vK[e]=!0,!1)}function M5e(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function O5e(e,t,n,r){if(t===null||typeof t=="undefined"||M5e(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ni(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){jr[e]=new Ni(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];jr[t]=new Ni(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){jr[e]=new Ni(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){jr[e]=new Ni(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){jr[e]=new Ni(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){jr[e]=new Ni(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){jr[e]=new Ni(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){jr[e]=new Ni(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){jr[e]=new Ni(e,5,!1,e.toLowerCase(),null,!1,!1)});var hF=/[\-:]([a-z])/g;function mF(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(hF,mF);jr[t]=new Ni(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(hF,mF);jr[t]=new Ni(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(hF,mF);jr[t]=new Ni(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){jr[e]=new Ni(e,1,!1,e.toLowerCase(),null,!1,!1)});jr.xlinkHref=new Ni("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){jr[e]=new Ni(e,1,!1,e.toLowerCase(),null,!0,!0)});function gF(e,t,n,r){var i=jr.hasOwnProperty(t)?jr[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(O5e(t,n,i,r)&&(n=null),r||i===null?F5e(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var lc=Tte.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,UZ=Symbol.for("react.element"),jm=Symbol.for("react.portal"),Hm=Symbol.for("react.fragment"),bF=Symbol.for("react.strict_mode"),zC=Symbol.for("react.profiler"),Fte=Symbol.for("react.provider"),Mte=Symbol.for("react.context"),yF=Symbol.for("react.forward_ref"),PC=Symbol.for("react.suspense"),jC=Symbol.for("react.suspense_list"),vF=Symbol.for("react.memo"),Nc=Symbol.for("react.lazy"),Ote=Symbol.for("react.offscreen"),wK=Symbol.iterator;function ly(e){return e===null||typeof e!="object"?null:(e=wK&&e[wK]||e["@@iterator"],typeof e=="function"?e:null)}var Cn=Object.assign,RX;function sv(e){if(RX===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);RX=t&&t[1]||""}return`
`+RX+e}var CX=!1;function VX(e,t){if(!e||CX)return"";CX=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s);break}}}finally{CX=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?sv(e):""}function z5e(e){switch(e.tag){case 5:return sv(e.type);case 16:return sv("Lazy");case 13:return sv("Suspense");case 19:return sv("SuspenseList");case 0:case 2:case 15:return e=VX(e.type,!1),e;case 11:return e=VX(e.type.render,!1),e;case 1:return e=VX(e.type,!0),e;default:return""}}function HC(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Hm:return"Fragment";case jm:return"Portal";case zC:return"Profiler";case bF:return"StrictMode";case PC:return"Suspense";case jC:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Mte:return(e.displayName||"Context")+".Consumer";case Fte:return(e._context.displayName||"Context")+".Provider";case yF:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vF:return t=e.displayName||null,t!==null?t:HC(e.type)||"Memo";case Nc:t=e._payload,e=e._init;try{return HC(e(t))}catch(n){}}return null}function P5e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return HC(t);case 8:return t===bF?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Xd(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zte(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function j5e(e){var t=zte(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $Z(e){e._valueTracker||(e._valueTracker=j5e(e))}function Pte(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=zte(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function b9(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function JC(e,t){var n=t.checked;return Cn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function ZK(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Xd(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jte(e,t){t=t.checked,t!=null&&gF(e,"checked",t,!1)}function BC(e,t){jte(e,t);var n=Xd(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?KC(e,t.type,n):t.hasOwnProperty("defaultValue")&&KC(e,t.type,Xd(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function SK(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function KC(e,t,n){(t!=="number"||b9(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var lv=Array.isArray;function m0(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Xd(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function DC(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(we(91));return Cn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function kK(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(we(92));if(lv(n)){if(1<n.length)throw Error(we(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Xd(n)}}function Hte(e,t){var n=Xd(t.value),r=Xd(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _K(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Jte(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function AC(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Jte(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var QZ,Bte=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(QZ=QZ||document.createElement("div"),QZ.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=QZ.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Sx(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Hv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},H5e=["Webkit","ms","Moz","O"];Object.keys(Hv).forEach(function(e){H5e.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hv[t]=Hv[e]})});function Kte(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Hv.hasOwnProperty(e)&&Hv[e]?(""+t).trim():t+"px"}function Dte(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Kte(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var J5e=Cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function UC(e,t){if(t){if(J5e[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(we(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(we(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(we(61))}if(t.style!=null&&typeof t.style!="object")throw Error(we(62))}}function $C(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var QC=null;function xF(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qC=null,g0=null,b0=null;function GK(e){if(e=Hw(e)){if(typeof qC!="function")throw Error(we(280));var t=e.stateNode;t&&(t=GW(t),qC(e.stateNode,e.type,t))}}function Ate(e){g0?b0?b0.push(e):b0=[e]:g0=e}function Ute(){if(g0){var e=g0,t=b0;if(b0=g0=null,GK(e),t)for(e=0;e<t.length;e++)GK(t[e])}}function $te(e,t){return e(t)}function Qte(){}var YX=!1;function qte(e,t,n){if(YX)return e(t,n);YX=!0;try{return $te(e,t,n)}finally{YX=!1,(g0!==null||b0!==null)&&(Qte(),Ute())}}function kx(e,t){var n=e.stateNode;if(n===null)return null;var r=GW(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(we(231,t,typeof n));return n}var eV=!1;if(Uu)try{var uy={};Object.defineProperty(uy,"passive",{get:function(){eV=!0}}),window.addEventListener("test",uy,uy),window.removeEventListener("test",uy,uy)}catch(e){eV=!1}function B5e(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Jv=!1,y9=null,v9=!1,tV=null,K5e={onError:function(e){Jv=!0,y9=e}};function D5e(e,t,n,r,i,o,a,s,l){Jv=!1,y9=null,B5e.apply(K5e,arguments)}function A5e(e,t,n,r,i,o,a,s,l){if(D5e.apply(this,arguments),Jv){if(Jv){var u=y9;Jv=!1,y9=null}else throw Error(we(198));v9||(v9=!0,tV=u)}}function bh(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ene(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function IK(e){if(bh(e)!==e)throw Error(we(188))}function U5e(e){var t=e.alternate;if(!t){if(t=bh(e),t===null)throw Error(we(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return IK(i),e;if(o===r)return IK(i),t;o=o.sibling}throw Error(we(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(we(189))}}if(n.alternate!==r)throw Error(we(190))}if(n.tag!==3)throw Error(we(188));return n.stateNode.current===n?e:t}function tne(e){return e=U5e(e),e!==null?nne(e):null}function nne(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nne(e);if(t!==null)return t;e=e.sibling}return null}var rne=Fo.unstable_scheduleCallback,WK=Fo.unstable_cancelCallback,$5e=Fo.unstable_shouldYield,Q5e=Fo.unstable_requestPaint,Jn=Fo.unstable_now,q5e=Fo.unstable_getCurrentPriorityLevel,wF=Fo.unstable_ImmediatePriority,ine=Fo.unstable_UserBlockingPriority,x9=Fo.unstable_NormalPriority,eZe=Fo.unstable_LowPriority,one=Fo.unstable_IdlePriority,ZW=null,vl=null;function tZe(e){if(vl&&typeof vl.onCommitFiberRoot=="function")try{vl.onCommitFiberRoot(ZW,e,void 0,(e.current.flags&128)===128)}catch(t){}}var fs=Math.clz32?Math.clz32:iZe,nZe=Math.log,rZe=Math.LN2;function iZe(e){return e>>>=0,e===0?32:31-(nZe(e)/rZe|0)|0}var qZ=64,eS=4194304;function uv(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function w9(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=uv(s):(o&=a,o!==0&&(r=uv(o)))}else a=n&~i,a!==0?r=uv(a):o!==0&&(r=uv(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-fs(t),i=1<<n,r|=e[n],t&=~i;return r}function oZe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aZe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-fs(o),s=1<<a,l=i[a];l===-1?(!(s&n)||s&r)&&(i[a]=oZe(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}function nV(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ane(){var e=qZ;return qZ<<=1,!(qZ&4194240)&&(qZ=64),e}function TX(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pw(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-fs(t),e[t]=n}function sZe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-fs(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function ZF(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fs(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ht=0;function sne(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var lne,SF,une,cne,dne,rV=!1,tS=[],sd=null,ld=null,ud=null,_x=new Map,Gx=new Map,Hc=[],lZe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function EK(e,t){switch(e){case"focusin":case"focusout":sd=null;break;case"dragenter":case"dragleave":ld=null;break;case"mouseover":case"mouseout":ud=null;break;case"pointerover":case"pointerout":_x.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gx.delete(t.pointerId)}}function cy(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Hw(t),t!==null&&SF(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function uZe(e,t,n,r,i){switch(t){case"focusin":return sd=cy(sd,e,t,n,r,i),!0;case"dragenter":return ld=cy(ld,e,t,n,r,i),!0;case"mouseover":return ud=cy(ud,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return _x.set(o,cy(_x.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Gx.set(o,cy(Gx.get(o)||null,e,t,n,r,i)),!0}return!1}function fne(e){var t=cp(e.target);if(t!==null){var n=bh(t);if(n!==null){if(t=n.tag,t===13){if(t=ene(n),t!==null){e.blockedOn=t,dne(e.priority,function(){une(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zk(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=iV(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);QC=r,n.target.dispatchEvent(r),QC=null}else return t=Hw(n),t!==null&&SF(t),e.blockedOn=n,!1;t.shift()}return!0}function XK(e,t,n){zk(e)&&n.delete(t)}function cZe(){rV=!1,sd!==null&&zk(sd)&&(sd=null),ld!==null&&zk(ld)&&(ld=null),ud!==null&&zk(ud)&&(ud=null),_x.forEach(XK),Gx.forEach(XK)}function dy(e,t){e.blockedOn===t&&(e.blockedOn=null,rV||(rV=!0,Fo.unstable_scheduleCallback(Fo.unstable_NormalPriority,cZe)))}function Ix(e){function t(i){return dy(i,e)}if(0<tS.length){dy(tS[0],e);for(var n=1;n<tS.length;n++){var r=tS[n];r.blockedOn===e&&(r.blockedOn=null)}}for(sd!==null&&dy(sd,e),ld!==null&&dy(ld,e),ud!==null&&dy(ud,e),_x.forEach(t),Gx.forEach(t),n=0;n<Hc.length;n++)r=Hc[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Hc.length&&(n=Hc[0],n.blockedOn===null);)fne(n),n.blockedOn===null&&Hc.shift()}var y0=lc.ReactCurrentBatchConfig,Z9=!0;function dZe(e,t,n,r){var i=Ht,o=y0.transition;y0.transition=null;try{Ht=1,kF(e,t,n,r)}finally{Ht=i,y0.transition=o}}function fZe(e,t,n,r){var i=Ht,o=y0.transition;y0.transition=null;try{Ht=4,kF(e,t,n,r)}finally{Ht=i,y0.transition=o}}function kF(e,t,n,r){if(Z9){var i=iV(e,t,n,r);if(i===null)BX(e,t,r,S9,n),EK(e,r);else if(uZe(i,e,t,n,r))r.stopPropagation();else if(EK(e,r),t&4&&-1<lZe.indexOf(e)){for(;i!==null;){var o=Hw(i);if(o!==null&&lne(o),o=iV(e,t,n,r),o===null&&BX(e,t,r,S9,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else BX(e,t,r,null,n)}}var S9=null;function iV(e,t,n,r){if(S9=null,e=xF(r),e=cp(e),e!==null)if(t=bh(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ene(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return S9=e,null}function pne(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(q5e()){case wF:return 1;case ine:return 4;case x9:case eZe:return 16;case one:return 536870912;default:return 16}default:return 16}}var Dc=null,_F=null,Pk=null;function hne(){if(Pk)return Pk;var e,t=_F,n=t.length,r,i="value"in Dc?Dc.value:Dc.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return Pk=i.slice(e,1<r?1-r:void 0)}function jk(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function nS(){return!0}function LK(){return!1}function Do(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?nS:LK,this.isPropagationStopped=LK,this}return Cn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nS)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nS)},persist:function(){},isPersistent:nS}),t}var Dg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},GF=Do(Dg),jw=Cn({},Dg,{view:0,detail:0}),pZe=Do(jw),NX,FX,fy,SW=Cn({},jw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:IF,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fy&&(fy&&e.type==="mousemove"?(NX=e.screenX-fy.screenX,FX=e.screenY-fy.screenY):FX=NX=0,fy=e),NX)},movementY:function(e){return"movementY"in e?e.movementY:FX}}),RK=Do(SW),hZe=Cn({},SW,{dataTransfer:0}),mZe=Do(hZe),gZe=Cn({},jw,{relatedTarget:0}),MX=Do(gZe),bZe=Cn({},Dg,{animationName:0,elapsedTime:0,pseudoElement:0}),yZe=Do(bZe),vZe=Cn({},Dg,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xZe=Do(vZe),wZe=Cn({},Dg,{data:0}),CK=Do(wZe),ZZe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SZe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kZe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _Ze(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=kZe[e])?!!t[e]:!1}function IF(){return _Ze}var GZe=Cn({},jw,{key:function(e){if(e.key){var t=ZZe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=jk(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?SZe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:IF,charCode:function(e){return e.type==="keypress"?jk(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?jk(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),IZe=Do(GZe),WZe=Cn({},SW,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),VK=Do(WZe),EZe=Cn({},jw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:IF}),XZe=Do(EZe),LZe=Cn({},Dg,{propertyName:0,elapsedTime:0,pseudoElement:0}),RZe=Do(LZe),CZe=Cn({},SW,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),VZe=Do(CZe),YZe=[9,13,27,32],WF=Uu&&"CompositionEvent"in window,Bv=null;Uu&&"documentMode"in document&&(Bv=document.documentMode);var TZe=Uu&&"TextEvent"in window&&!Bv,mne=Uu&&(!WF||Bv&&8<Bv&&11>=Bv),YK=" ",TK=!1;function gne(e,t){switch(e){case"keyup":return YZe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bne(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Jm=!1;function NZe(e,t){switch(e){case"compositionend":return bne(t);case"keypress":return t.which!==32?null:(TK=!0,YK);case"textInput":return e=t.data,e===YK&&TK?null:e;default:return null}}function FZe(e,t){if(Jm)return e==="compositionend"||!WF&&gne(e,t)?(e=hne(),Pk=_F=Dc=null,Jm=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mne&&t.locale!=="ko"?null:t.data;default:return null}}var MZe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function NK(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!MZe[e.type]:t==="textarea"}function yne(e,t,n,r){Ate(r),t=k9(t,"onChange"),0<t.length&&(n=new GF("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kv=null,Wx=null;function OZe(e){Ene(e,0)}function kW(e){var t=Dm(e);if(Pte(t))return e}function zZe(e,t){if(e==="change")return t}var vne=!1;if(Uu){var OX;if(Uu){var zX="oninput"in document;if(!zX){var FK=document.createElement("div");FK.setAttribute("oninput","return;"),zX=typeof FK.oninput=="function"}OX=zX}else OX=!1;vne=OX&&(!document.documentMode||9<document.documentMode)}function MK(){Kv&&(Kv.detachEvent("onpropertychange",xne),Wx=Kv=null)}function xne(e){if(e.propertyName==="value"&&kW(Wx)){var t=[];yne(t,Wx,e,xF(e)),qte(OZe,t)}}function PZe(e,t,n){e==="focusin"?(MK(),Kv=t,Wx=n,Kv.attachEvent("onpropertychange",xne)):e==="focusout"&&MK()}function jZe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return kW(Wx)}function HZe(e,t){if(e==="click")return kW(t)}function JZe(e,t){if(e==="input"||e==="change")return kW(t)}function BZe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ws=typeof Object.is=="function"?Object.is:BZe;function Ex(e,t){if(ws(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!OC.call(t,i)||!ws(e[i],t[i]))return!1}return!0}function OK(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zK(e,t){var n=OK(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=OK(n)}}function wne(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wne(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Zne(){for(var e=window,t=b9();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=b9(e.document)}return t}function EF(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function KZe(e){var t=Zne(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wne(n.ownerDocument.documentElement,n)){if(r!==null&&EF(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=zK(n,o);var a=zK(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var DZe=Uu&&"documentMode"in document&&11>=document.documentMode,Bm=null,oV=null,Dv=null,aV=!1;function PK(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;aV||Bm==null||Bm!==b9(r)||(r=Bm,"selectionStart"in r&&EF(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Dv&&Ex(Dv,r)||(Dv=r,r=k9(oV,"onSelect"),0<r.length&&(t=new GF("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Bm)))}function rS(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Km={animationend:rS("Animation","AnimationEnd"),animationiteration:rS("Animation","AnimationIteration"),animationstart:rS("Animation","AnimationStart"),transitionend:rS("Transition","TransitionEnd")},PX={},Sne={};Uu&&(Sne=document.createElement("div").style,"AnimationEvent"in window||(delete Km.animationend.animation,delete Km.animationiteration.animation,delete Km.animationstart.animation),"TransitionEvent"in window||delete Km.transitionend.transition);function _W(e){if(PX[e])return PX[e];if(!Km[e])return e;var t=Km[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Sne)return PX[e]=t[n];return e}var kne=_W("animationend"),_ne=_W("animationiteration"),Gne=_W("animationstart"),Ine=_W("transitionend"),Wne=new Map,jK="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rf(e,t){Wne.set(e,t),gh(t,[e])}for(var jX=0;jX<jK.length;jX++){var HX=jK[jX],AZe=HX.toLowerCase(),UZe=HX[0].toUpperCase()+HX.slice(1);rf(AZe,"on"+UZe)}rf(kne,"onAnimationEnd");rf(_ne,"onAnimationIteration");rf(Gne,"onAnimationStart");rf("dblclick","onDoubleClick");rf("focusin","onFocus");rf("focusout","onBlur");rf(Ine,"onTransitionEnd");T0("onMouseEnter",["mouseout","mouseover"]);T0("onMouseLeave",["mouseout","mouseover"]);T0("onPointerEnter",["pointerout","pointerover"]);T0("onPointerLeave",["pointerout","pointerover"]);gh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gh("onBeforeInput",["compositionend","keypress","textInput","paste"]);gh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$Ze=new Set("cancel close invalid load scroll toggle".split(" ").concat(cv));function HK(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,A5e(r,t,void 0,e),e.currentTarget=null}function Ene(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;HK(i,s,u),o=l}else for(a=0;a<r.length;a++){if(s=r[a],l=s.instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;HK(i,s,u),o=l}}}if(v9)throw e=tV,v9=!1,tV=null,e}function dn(e,t){var n=t[dV];n===void 0&&(n=t[dV]=new Set);var r=e+"__bubble";n.has(r)||(Xne(t,e,2,!1),n.add(r))}function JX(e,t,n){var r=0;t&&(r|=4),Xne(n,e,r,t)}var iS="_reactListening"+Math.random().toString(36).slice(2);function Xx(e){if(!e[iS]){e[iS]=!0,Nte.forEach(function(n){n!=="selectionchange"&&($Ze.has(n)||JX(n,!1,e),JX(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[iS]||(t[iS]=!0,JX("selectionchange",!1,t))}}function Xne(e,t,n,r){switch(pne(t)){case 1:var i=dZe;break;case 4:i=fZe;break;default:i=kF}n=i.bind(null,t,n,e),i=void 0,!eV||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function BX(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=cp(s),a===null)return;if(l=a.tag,l===5||l===6){r=o=a;continue e}s=s.parentNode}}r=r.return}qte(function(){var u=o,c=xF(n),d=[];e:{var f=Wne.get(e);if(f!==void 0){var h=GF,m=e;switch(e){case"keypress":if(jk(n)===0)break e;case"keydown":case"keyup":h=IZe;break;case"focusin":m="focus",h=MX;break;case"focusout":m="blur",h=MX;break;case"beforeblur":case"afterblur":h=MX;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=RK;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=mZe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=XZe;break;case kne:case _ne:case Gne:h=yZe;break;case Ine:h=RZe;break;case"scroll":h=pZe;break;case"wheel":h=VZe;break;case"copy":case"cut":case"paste":h=xZe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=VK}var g=(t&4)!==0,y=!g&&e==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var w=u,Z;w!==null;){Z=w;var k=Z.stateNode;if(Z.tag===5&&k!==null&&(Z=k,v!==null&&(k=kx(w,v),k!=null&&g.push(Lx(w,k,Z)))),y)break;w=w.return}0<g.length&&(f=new h(f,m,null,n,c),d.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==QC&&(m=n.relatedTarget||n.fromElement)&&(cp(m)||m[$u]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=u,m=m?cp(m):null,m!==null&&(y=bh(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=u),h!==m)){if(g=RK,k="onMouseLeave",v="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(g=VK,k="onPointerLeave",v="onPointerEnter",w="pointer"),y=h==null?f:Dm(h),Z=m==null?f:Dm(m),f=new g(k,w+"leave",h,n,c),f.target=y,f.relatedTarget=Z,k=null,cp(c)===u&&(g=new g(v,w+"enter",m,n,c),g.target=Z,g.relatedTarget=y,k=g),y=k,h&&m)t:{for(g=h,v=m,w=0,Z=g;Z;Z=tm(Z))w++;for(Z=0,k=v;k;k=tm(k))Z++;for(;0<w-Z;)g=tm(g),w--;for(;0<Z-w;)v=tm(v),Z--;for(;w--;){if(g===v||v!==null&&g===v.alternate)break t;g=tm(g),v=tm(v)}g=null}else g=null;h!==null&&JK(d,f,h,g,!1),m!==null&&y!==null&&JK(d,y,m,g,!0)}}e:{if(f=u?Dm(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var _=zZe;else if(NK(f))if(vne)_=JZe;else{_=jZe;var R=PZe}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=HZe);if(_&&(_=_(e,u))){yne(d,_,n,c);break e}R&&R(e,f,u),e==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&KC(f,"number",f.value)}switch(R=u?Dm(u):window,e){case"focusin":(NK(R)||R.contentEditable==="true")&&(Bm=R,oV=u,Dv=null);break;case"focusout":Dv=oV=Bm=null;break;case"mousedown":aV=!0;break;case"contextmenu":case"mouseup":case"dragend":aV=!1,PK(d,n,c);break;case"selectionchange":if(DZe)break;case"keydown":case"keyup":PK(d,n,c)}var I;if(WF)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Jm?gne(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(mne&&n.locale!=="ko"&&(Jm||E!=="onCompositionStart"?E==="onCompositionEnd"&&Jm&&(I=hne()):(Dc=c,_F="value"in Dc?Dc.value:Dc.textContent,Jm=!0)),R=k9(u,E),0<R.length&&(E=new CK(E,e,null,n,c),d.push({event:E,listeners:R}),I?E.data=I:(I=bne(n),I!==null&&(E.data=I)))),(I=TZe?NZe(e,n):FZe(e,n))&&(u=k9(u,"onBeforeInput"),0<u.length&&(c=new CK("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=I))}Ene(d,t)})}function Lx(e,t,n){return{instance:e,listener:t,currentTarget:n}}function k9(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=kx(e,n),o!=null&&r.unshift(Lx(e,o,i)),o=kx(e,t),o!=null&&r.push(Lx(e,o,i))),e=e.return}return r}function tm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function JK(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,i?(l=kx(n,o),l!=null&&a.unshift(Lx(n,l,s))):i||(l=kx(n,o),l!=null&&a.push(Lx(n,l,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var QZe=/\r\n?/g,qZe=/\u0000|\uFFFD/g;function BK(e){return(typeof e=="string"?e:""+e).replace(QZe,`
`).replace(qZe,"")}function oS(e,t,n){if(t=BK(t),BK(e)!==t&&n)throw Error(we(425))}function _9(){}var sV=null,lV=null;function uV(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cV=typeof setTimeout=="function"?setTimeout:void 0,eSe=typeof clearTimeout=="function"?clearTimeout:void 0,KK=typeof Promise=="function"?Promise:void 0,tSe=typeof queueMicrotask=="function"?queueMicrotask:typeof KK!="undefined"?function(e){return KK.resolve(null).then(e).catch(nSe)}:cV;function nSe(e){setTimeout(function(){throw e})}function KX(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Ix(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ix(t)}function cd(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function DK(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ag=Math.random().toString(36).slice(2),ll="__reactFiber$"+Ag,Rx="__reactProps$"+Ag,$u="__reactContainer$"+Ag,dV="__reactEvents$"+Ag,rSe="__reactListeners$"+Ag,iSe="__reactHandles$"+Ag;function cp(e){var t=e[ll];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$u]||n[ll]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=DK(e);e!==null;){if(n=e[ll])return n;e=DK(e)}return t}e=n,n=e.parentNode}return null}function Hw(e){return e=e[ll]||e[$u],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Dm(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(we(33))}function GW(e){return e[Rx]||null}var fV=[],Am=-1;function of(e){return{current:e}}function bn(e){0>Am||(e.current=fV[Am],fV[Am]=null,Am--)}function an(e,t){Am++,fV[Am]=e.current,e.current=t}var Ld={},fi=of(Ld),eo=of(!1),Vp=Ld;function N0(e,t){var n=e.type.contextTypes;if(!n)return Ld;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function to(e){return e=e.childContextTypes,e!=null}function G9(){bn(eo),bn(fi)}function AK(e,t,n){if(fi.current!==Ld)throw Error(we(168));an(fi,t),an(eo,n)}function Lne(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(we(108,P5e(e)||"Unknown",i));return Cn({},n,r)}function I9(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ld,Vp=fi.current,an(fi,e),an(eo,eo.current),!0}function UK(e,t,n){var r=e.stateNode;if(!r)throw Error(we(169));n?(e=Lne(e,t,Vp),r.__reactInternalMemoizedMergedChildContext=e,bn(eo),bn(fi),an(fi,e)):bn(eo),an(eo,n)}var ku=null,IW=!1,DX=!1;function Rne(e){ku===null?ku=[e]:ku.push(e)}function oSe(e){IW=!0,Rne(e)}function af(){if(!DX&&ku!==null){DX=!0;var e=0,t=Ht;try{var n=ku;for(Ht=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ku=null,IW=!1}catch(i){throw ku!==null&&(ku=ku.slice(e+1)),rne(wF,af),i}finally{Ht=t,DX=!1}}return null}var Um=[],$m=0,W9=null,E9=0,ra=[],ia=0,Yp=null,Xu=1,Lu="";function Df(e,t){Um[$m++]=E9,Um[$m++]=W9,W9=e,E9=t}function Cne(e,t,n){ra[ia++]=Xu,ra[ia++]=Lu,ra[ia++]=Yp,Yp=e;var r=Xu;e=Lu;var i=32-fs(r)-1;r&=~(1<<i),n+=1;var o=32-fs(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xu=1<<32-fs(t)+i|n<<i|r,Lu=o+e}else Xu=1<<o|n<<i|r,Lu=e}function XF(e){e.return!==null&&(Df(e,1),Cne(e,1,0))}function LF(e){for(;e===W9;)W9=Um[--$m],Um[$m]=null,E9=Um[--$m],Um[$m]=null;for(;e===Yp;)Yp=ra[--ia],ra[ia]=null,Lu=ra[--ia],ra[ia]=null,Xu=ra[--ia],ra[ia]=null}var Co=null,Io=null,Sn=!1,$a=null;function Vne(e,t){var n=ca(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function $K(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Co=e,Io=cd(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Co=e,Io=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Yp!==null?{id:Xu,overflow:Lu}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ca(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Co=e,Io=null,!0):!1;default:return!1}}function pV(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hV(e){if(Sn){var t=Io;if(t){var n=t;if(!$K(e,t)){if(pV(e))throw Error(we(418));t=cd(n.nextSibling);var r=Co;t&&$K(e,t)?Vne(r,n):(e.flags=e.flags&-4097|2,Sn=!1,Co=e)}}else{if(pV(e))throw Error(we(418));e.flags=e.flags&-4097|2,Sn=!1,Co=e}}}function QK(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Co=e}function aS(e){if(e!==Co)return!1;if(!Sn)return QK(e),Sn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!uV(e.type,e.memoizedProps)),t&&(t=Io)){if(pV(e))throw Yne(),Error(we(418));for(;t;)Vne(e,t),t=cd(t.nextSibling)}if(QK(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(we(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Io=cd(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Io=null}}else Io=Co?cd(e.stateNode.nextSibling):null;return!0}function Yne(){for(var e=Io;e;)e=cd(e.nextSibling)}function F0(){Io=Co=null,Sn=!1}function RF(e){$a===null?$a=[e]:$a.push(e)}var aSe=lc.ReactCurrentBatchConfig;function Da(e,t){if(e&&e.defaultProps){t=Cn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var X9=of(null),L9=null,Qm=null,CF=null;function VF(){CF=Qm=L9=null}function YF(e){var t=X9.current;bn(X9),e._currentValue=t}function mV(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function v0(e,t){L9=e,CF=Qm=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ui=!0),e.firstContext=null)}function xa(e){var t=e._currentValue;if(CF!==e)if(e={context:e,memoizedValue:t,next:null},Qm===null){if(L9===null)throw Error(we(308));Qm=e,L9.dependencies={lanes:0,firstContext:e}}else Qm=Qm.next=e;return t}var dp=null;function TF(e){dp===null?dp=[e]:dp.push(e)}function Tne(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,TF(t)):(n.next=i.next,i.next=n),t.interleaved=n,Qu(e,r)}function Qu(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Fc=!1;function NF(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nne(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dd(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Et&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Qu(e,n)}return i=r.interleaved,i===null?(t.next=t,TF(r)):(t.next=i.next,i.next=t),r.interleaved=t,Qu(e,n)}function Hk(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ZF(e,n)}}function qK(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function R9(e,t,n,r){var i=e.updateQueue;Fc=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,a===null?o=u:a.next=u,a=l;var c=e.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;a=0,c=u=l=null,s=o;do{var f=s.lane,h=s.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,g=s;switch(f=t,h=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(h,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(h,d,f):m,f==null)break e;d=Cn({},d,f);break e;case 2:Fc=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=h,l=d):c=c.next=h,a|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Np|=a,e.lanes=a,e.memoizedState=d}}function eD(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(we(191,i));i.call(r)}}}var Fne=new Tte.Component().refs;function gV(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Cn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var WW={isMounted:function(e){return(e=e._reactInternals)?bh(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Li(),i=pd(e),o=zu(r,i);o.payload=t,n!=null&&(o.callback=n),t=dd(e,o,i),t!==null&&(ps(t,e,i,r),Hk(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Li(),i=pd(e),o=zu(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=dd(e,o,i),t!==null&&(ps(t,e,i,r),Hk(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Li(),r=pd(e),i=zu(n,r);i.tag=2,t!=null&&(i.callback=t),t=dd(e,i,r),t!==null&&(ps(t,e,r,n),Hk(t,e,r))}};function tD(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Ex(n,r)||!Ex(i,o):!0}function Mne(e,t,n){var r=!1,i=Ld,o=t.contextType;return typeof o=="object"&&o!==null?o=xa(o):(i=to(t)?Vp:fi.current,r=t.contextTypes,o=(r=r!=null)?N0(e,i):Ld),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=WW,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function nD(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&WW.enqueueReplaceState(t,t.state,null)}function bV(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Fne,NF(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=xa(o):(o=to(t)?Vp:fi.current,i.context=N0(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(gV(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&WW.enqueueReplaceState(i,i.state,null),R9(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function py(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(we(309));var r=n.stateNode}if(!r)throw Error(we(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;s===Fne&&(s=i.refs={}),a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(we(284));if(!n._owner)throw Error(we(290,e))}return e}function sS(e,t){throw e=Object.prototype.toString.call(t),Error(we(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rD(e){var t=e._init;return t(e._payload)}function One(e){function t(v,w){if(e){var Z=v.deletions;Z===null?(v.deletions=[w],v.flags|=16):Z.push(w)}}function n(v,w){if(!e)return null;for(;w!==null;)t(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function i(v,w){return v=hd(v,w),v.index=0,v.sibling=null,v}function o(v,w,Z){return v.index=Z,e?(Z=v.alternate,Z!==null?(Z=Z.index,Z<w?(v.flags|=2,w):Z):(v.flags|=2,w)):(v.flags|=1048576,w)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function s(v,w,Z,k){return w===null||w.tag!==6?(w=tL(Z,v.mode,k),w.return=v,w):(w=i(w,Z),w.return=v,w)}function l(v,w,Z,k){var _=Z.type;return _===Hm?c(v,w,Z.props.children,k,Z.key):w!==null&&(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Nc&&rD(_)===w.type)?(k=i(w,Z.props),k.ref=py(v,w,Z),k.return=v,k):(k=Uk(Z.type,Z.key,Z.props,null,v.mode,k),k.ref=py(v,w,Z),k.return=v,k)}function u(v,w,Z,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==Z.containerInfo||w.stateNode.implementation!==Z.implementation?(w=nL(Z,v.mode,k),w.return=v,w):(w=i(w,Z.children||[]),w.return=v,w)}function c(v,w,Z,k,_){return w===null||w.tag!==7?(w=wp(Z,v.mode,k,_),w.return=v,w):(w=i(w,Z),w.return=v,w)}function d(v,w,Z){if(typeof w=="string"&&w!==""||typeof w=="number")return w=tL(""+w,v.mode,Z),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case UZ:return Z=Uk(w.type,w.key,w.props,null,v.mode,Z),Z.ref=py(v,null,w),Z.return=v,Z;case jm:return w=nL(w,v.mode,Z),w.return=v,w;case Nc:var k=w._init;return d(v,k(w._payload),Z)}if(lv(w)||ly(w))return w=wp(w,v.mode,Z,null),w.return=v,w;sS(v,w)}return null}function f(v,w,Z,k){var _=w!==null?w.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return _!==null?null:s(v,w,""+Z,k);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case UZ:return Z.key===_?l(v,w,Z,k):null;case jm:return Z.key===_?u(v,w,Z,k):null;case Nc:return _=Z._init,f(v,w,_(Z._payload),k)}if(lv(Z)||ly(Z))return _!==null?null:c(v,w,Z,k,null);sS(v,Z)}return null}function h(v,w,Z,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(Z)||null,s(w,v,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case UZ:return v=v.get(k.key===null?Z:k.key)||null,l(w,v,k,_);case jm:return v=v.get(k.key===null?Z:k.key)||null,u(w,v,k,_);case Nc:var R=k._init;return h(v,w,Z,R(k._payload),_)}if(lv(k)||ly(k))return v=v.get(Z)||null,c(w,v,k,_,null);sS(w,k)}return null}function m(v,w,Z,k){for(var _=null,R=null,I=w,E=w=0,X=null;I!==null&&E<Z.length;E++){I.index>E?(X=I,I=null):X=I.sibling;var Y=f(v,I,Z[E],k);if(Y===null){I===null&&(I=X);break}e&&I&&Y.alternate===null&&t(v,I),w=o(Y,w,E),R===null?_=Y:R.sibling=Y,R=Y,I=X}if(E===Z.length)return n(v,I),Sn&&Df(v,E),_;if(I===null){for(;E<Z.length;E++)I=d(v,Z[E],k),I!==null&&(w=o(I,w,E),R===null?_=I:R.sibling=I,R=I);return Sn&&Df(v,E),_}for(I=r(v,I);E<Z.length;E++)X=h(I,v,E,Z[E],k),X!==null&&(e&&X.alternate!==null&&I.delete(X.key===null?E:X.key),w=o(X,w,E),R===null?_=X:R.sibling=X,R=X);return e&&I.forEach(function(C){return t(v,C)}),Sn&&Df(v,E),_}function g(v,w,Z,k){var _=ly(Z);if(typeof _!="function")throw Error(we(150));if(Z=_.call(Z),Z==null)throw Error(we(151));for(var R=_=null,I=w,E=w=0,X=null,Y=Z.next();I!==null&&!Y.done;E++,Y=Z.next()){I.index>E?(X=I,I=null):X=I.sibling;var C=f(v,I,Y.value,k);if(C===null){I===null&&(I=X);break}e&&I&&C.alternate===null&&t(v,I),w=o(C,w,E),R===null?_=C:R.sibling=C,R=C,I=X}if(Y.done)return n(v,I),Sn&&Df(v,E),_;if(I===null){for(;!Y.done;E++,Y=Z.next())Y=d(v,Y.value,k),Y!==null&&(w=o(Y,w,E),R===null?_=Y:R.sibling=Y,R=Y);return Sn&&Df(v,E),_}for(I=r(v,I);!Y.done;E++,Y=Z.next())Y=h(I,v,E,Y.value,k),Y!==null&&(e&&Y.alternate!==null&&I.delete(Y.key===null?E:Y.key),w=o(Y,w,E),R===null?_=Y:R.sibling=Y,R=Y);return e&&I.forEach(function(N){return t(v,N)}),Sn&&Df(v,E),_}function y(v,w,Z,k){if(typeof Z=="object"&&Z!==null&&Z.type===Hm&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case UZ:e:{for(var _=Z.key,R=w;R!==null;){if(R.key===_){if(_=Z.type,_===Hm){if(R.tag===7){n(v,R.sibling),w=i(R,Z.props.children),w.return=v,v=w;break e}}else if(R.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Nc&&rD(_)===R.type){n(v,R.sibling),w=i(R,Z.props),w.ref=py(v,R,Z),w.return=v,v=w;break e}n(v,R);break}else t(v,R);R=R.sibling}Z.type===Hm?(w=wp(Z.props.children,v.mode,k,Z.key),w.return=v,v=w):(k=Uk(Z.type,Z.key,Z.props,null,v.mode,k),k.ref=py(v,w,Z),k.return=v,v=k)}return a(v);case jm:e:{for(R=Z.key;w!==null;){if(w.key===R)if(w.tag===4&&w.stateNode.containerInfo===Z.containerInfo&&w.stateNode.implementation===Z.implementation){n(v,w.sibling),w=i(w,Z.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else t(v,w);w=w.sibling}w=nL(Z,v.mode,k),w.return=v,v=w}return a(v);case Nc:return R=Z._init,y(v,w,R(Z._payload),k)}if(lv(Z))return m(v,w,Z,k);if(ly(Z))return g(v,w,Z,k);sS(v,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,w!==null&&w.tag===6?(n(v,w.sibling),w=i(w,Z),w.return=v,v=w):(n(v,w),w=tL(Z,v.mode,k),w.return=v,v=w),a(v)):n(v,w)}return y}var M0=One(!0),zne=One(!1),Jw={},xl=of(Jw),Cx=of(Jw),Vx=of(Jw);function fp(e){if(e===Jw)throw Error(we(174));return e}function FF(e,t){switch(an(Vx,t),an(Cx,e),an(xl,Jw),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:AC(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=AC(t,e)}bn(xl),an(xl,t)}function O0(){bn(xl),bn(Cx),bn(Vx)}function Pne(e){fp(Vx.current);var t=fp(xl.current),n=AC(t,e.type);t!==n&&(an(Cx,e),an(xl,n))}function MF(e){Cx.current===e&&(bn(xl),bn(Cx))}var Xn=of(0);function C9(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var AX=[];function OF(){for(var e=0;e<AX.length;e++)AX[e]._workInProgressVersionPrimary=null;AX.length=0}var Jk=lc.ReactCurrentDispatcher,UX=lc.ReactCurrentBatchConfig,Tp=0,Rn=null,ir=null,br=null,V9=!1,Av=!1,Yx=0,sSe=0;function Dr(){throw Error(we(321))}function zF(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ws(e[n],t[n]))return!1;return!0}function PF(e,t,n,r,i,o){if(Tp=o,Rn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Jk.current=e===null||e.memoizedState===null?dSe:fSe,e=n(r,i),Av){o=0;do{if(Av=!1,Yx=0,25<=o)throw Error(we(301));o+=1,br=ir=null,t.updateQueue=null,Jk.current=pSe,e=n(r,i)}while(Av)}if(Jk.current=Y9,t=ir!==null&&ir.next!==null,Tp=0,br=ir=Rn=null,V9=!1,t)throw Error(we(300));return e}function jF(){var e=Yx!==0;return Yx=0,e}function tl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return br===null?Rn.memoizedState=br=e:br=br.next=e,br}function wa(){if(ir===null){var e=Rn.alternate;e=e!==null?e.memoizedState:null}else e=ir.next;var t=br===null?Rn.memoizedState:br.next;if(t!==null)br=t,ir=e;else{if(e===null)throw Error(we(310));ir=e,e={memoizedState:ir.memoizedState,baseState:ir.baseState,baseQueue:ir.baseQueue,queue:ir.queue,next:null},br===null?Rn.memoizedState=br=e:br=br.next=e}return br}function Tx(e,t){return typeof t=="function"?t(e):t}function $X(e){var t=wa(),n=t.queue;if(n===null)throw Error(we(311));n.lastRenderedReducer=e;var r=ir,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,l=null,u=o;do{var c=u.lane;if((Tp&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,a=r):l=l.next=d,Rn.lanes|=c,Np|=c}u=u.next}while(u!==null&&u!==o);l===null?a=r:l.next=s,ws(r,t.memoizedState)||(Ui=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Rn.lanes|=o,Np|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function QX(e){var t=wa(),n=t.queue;if(n===null)throw Error(we(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);ws(o,t.memoizedState)||(Ui=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function jne(){}function Hne(e,t){var n=Rn,r=wa(),i=t(),o=!ws(r.memoizedState,i);if(o&&(r.memoizedState=i,Ui=!0),r=r.queue,HF(Kne.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||br!==null&&br.memoizedState.tag&1){if(n.flags|=2048,Nx(9,Bne.bind(null,n,r,i,t),void 0,null),Gr===null)throw Error(we(349));Tp&30||Jne(n,t,i)}return i}function Jne(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Rn.updateQueue,t===null?(t={lastEffect:null,stores:null},Rn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Bne(e,t,n,r){t.value=n,t.getSnapshot=r,Dne(t)&&Ane(e)}function Kne(e,t,n){return n(function(){Dne(t)&&Ane(e)})}function Dne(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ws(e,n)}catch(r){return!0}}function Ane(e){var t=Qu(e,1);t!==null&&ps(t,e,1,-1)}function iD(e){var t=tl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tx,lastRenderedState:e},t.queue=e,e=e.dispatch=cSe.bind(null,Rn,e),[t.memoizedState,e]}function Nx(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Rn.updateQueue,t===null?(t={lastEffect:null,stores:null},Rn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Une(){return wa().memoizedState}function Bk(e,t,n,r){var i=tl();Rn.flags|=e,i.memoizedState=Nx(1|t,n,void 0,r===void 0?null:r)}function EW(e,t,n,r){var i=wa();r=r===void 0?null:r;var o=void 0;if(ir!==null){var a=ir.memoizedState;if(o=a.destroy,r!==null&&zF(r,a.deps)){i.memoizedState=Nx(t,n,o,r);return}}Rn.flags|=e,i.memoizedState=Nx(1|t,n,o,r)}function oD(e,t){return Bk(8390656,8,e,t)}function HF(e,t){return EW(2048,8,e,t)}function $ne(e,t){return EW(4,2,e,t)}function Qne(e,t){return EW(4,4,e,t)}function qne(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ere(e,t,n){return n=n!=null?n.concat([e]):null,EW(4,4,qne.bind(null,t,e),n)}function JF(){}function tre(e,t){var n=wa();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zF(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function nre(e,t){var n=wa();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zF(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function rre(e,t,n){return Tp&21?(ws(n,t)||(n=ane(),Rn.lanes|=n,Np|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ui=!0),e.memoizedState=n)}function lSe(e,t){var n=Ht;Ht=n!==0&&4>n?n:4,e(!0);var r=UX.transition;UX.transition={};try{e(!1),t()}finally{Ht=n,UX.transition=r}}function ire(){return wa().memoizedState}function uSe(e,t,n){var r=pd(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ore(e))are(t,n);else if(n=Tne(e,t,n,r),n!==null){var i=Li();ps(n,e,r,i),sre(n,t,r)}}function cSe(e,t,n){var r=pd(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ore(e))are(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,ws(s,a)){var l=t.interleaved;l===null?(i.next=i,TF(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch(u){}finally{}n=Tne(e,t,i,r),n!==null&&(i=Li(),ps(n,e,r,i),sre(n,t,r))}}function ore(e){var t=e.alternate;return e===Rn||t!==null&&t===Rn}function are(e,t){Av=V9=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sre(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ZF(e,n)}}var Y9={readContext:xa,useCallback:Dr,useContext:Dr,useEffect:Dr,useImperativeHandle:Dr,useInsertionEffect:Dr,useLayoutEffect:Dr,useMemo:Dr,useReducer:Dr,useRef:Dr,useState:Dr,useDebugValue:Dr,useDeferredValue:Dr,useTransition:Dr,useMutableSource:Dr,useSyncExternalStore:Dr,useId:Dr,unstable_isNewReconciler:!1},dSe={readContext:xa,useCallback:function(e,t){return tl().memoizedState=[e,t===void 0?null:t],e},useContext:xa,useEffect:oD,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Bk(4194308,4,qne.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bk(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bk(4,2,e,t)},useMemo:function(e,t){var n=tl();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=tl();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=uSe.bind(null,Rn,e),[r.memoizedState,e]},useRef:function(e){var t=tl();return e={current:e},t.memoizedState=e},useState:iD,useDebugValue:JF,useDeferredValue:function(e){return tl().memoizedState=e},useTransition:function(){var e=iD(!1),t=e[0];return e=lSe.bind(null,e[1]),tl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Rn,i=tl();if(Sn){if(n===void 0)throw Error(we(407));n=n()}else{if(n=t(),Gr===null)throw Error(we(349));Tp&30||Jne(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,oD(Kne.bind(null,r,o,e),[e]),r.flags|=2048,Nx(9,Bne.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=tl(),t=Gr.identifierPrefix;if(Sn){var n=Lu,r=Xu;n=(r&~(1<<32-fs(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Yx++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=sSe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fSe={readContext:xa,useCallback:tre,useContext:xa,useEffect:HF,useImperativeHandle:ere,useInsertionEffect:$ne,useLayoutEffect:Qne,useMemo:nre,useReducer:$X,useRef:Une,useState:function(){return $X(Tx)},useDebugValue:JF,useDeferredValue:function(e){var t=wa();return rre(t,ir.memoizedState,e)},useTransition:function(){var e=$X(Tx)[0],t=wa().memoizedState;return[e,t]},useMutableSource:jne,useSyncExternalStore:Hne,useId:ire,unstable_isNewReconciler:!1},pSe={readContext:xa,useCallback:tre,useContext:xa,useEffect:HF,useImperativeHandle:ere,useInsertionEffect:$ne,useLayoutEffect:Qne,useMemo:nre,useReducer:QX,useRef:Une,useState:function(){return QX(Tx)},useDebugValue:JF,useDeferredValue:function(e){var t=wa();return ir===null?t.memoizedState=e:rre(t,ir.memoizedState,e)},useTransition:function(){var e=QX(Tx)[0],t=wa().memoizedState;return[e,t]},useMutableSource:jne,useSyncExternalStore:Hne,useId:ire,unstable_isNewReconciler:!1};function z0(e,t){try{var n="",r=t;do n+=z5e(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function qX(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function yV(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hSe=typeof WeakMap=="function"?WeakMap:Map;function lre(e,t,n){n=zu(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){N9||(N9=!0,WV=r),yV(e,t)},n}function ure(e,t,n){n=zu(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){yV(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){yV(e,t),typeof r!="function"&&(fd===null?fd=new Set([this]):fd.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function aD(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new hSe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=WSe.bind(null,e,t,n),t.then(e,e))}function sD(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function lD(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=zu(-1,1),t.tag=2,dd(n,t,1))),n.lanes|=1),e)}var mSe=lc.ReactCurrentOwner,Ui=!1;function Si(e,t,n,r){t.child=e===null?zne(t,null,n,r):M0(t,e.child,n,r)}function uD(e,t,n,r,i){n=n.render;var o=t.ref;return v0(t,i),r=PF(e,t,n,r,o,i),n=jF(),e!==null&&!Ui?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qu(e,t,i)):(Sn&&n&&XF(t),t.flags|=1,Si(e,t,r,i),t.child)}function cD(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!qF(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,cre(e,t,o,r,i)):(e=Uk(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ex,n(a,r)&&e.ref===t.ref)return qu(e,t,i)}return t.flags|=1,e=hd(o,r),e.ref=t.ref,e.return=t,t.child=e}function cre(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Ex(o,r)&&e.ref===t.ref)if(Ui=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Ui=!0);else return t.lanes=e.lanes,qu(e,t,i)}return vV(e,t,n,r,i)}function dre(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},an(e0,So),So|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,an(e0,So),So|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,an(e0,So),So|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,an(e0,So),So|=r;return Si(e,t,i,n),t.child}function fre(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function vV(e,t,n,r,i){var o=to(n)?Vp:fi.current;return o=N0(t,o),v0(t,i),n=PF(e,t,n,r,o,i),r=jF(),e!==null&&!Ui?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qu(e,t,i)):(Sn&&r&&XF(t),t.flags|=1,Si(e,t,n,i),t.child)}function dD(e,t,n,r,i){if(to(n)){var o=!0;I9(t)}else o=!1;if(v0(t,i),t.stateNode===null)Kk(e,t),Mne(t,n,r),bV(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=xa(u):(u=to(n)?Vp:fi.current,u=N0(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||l!==u)&&nD(t,a,r,u),Fc=!1;var f=t.memoizedState;a.state=f,R9(t,r,a,i),l=t.memoizedState,s!==r||f!==l||eo.current||Fc?(typeof c=="function"&&(gV(t,n,c,r),l=t.memoizedState),(s=Fc||tD(t,n,s,r,f,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Nne(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Da(t.type,s),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=xa(l):(l=to(n)?Vp:fi.current,l=N0(t,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||f!==l)&&nD(t,a,r,l),Fc=!1,f=t.memoizedState,a.state=f,R9(t,r,a,i);var m=t.memoizedState;s!==d||f!==m||eo.current||Fc?(typeof h=="function"&&(gV(t,n,h,r),m=t.memoizedState),(u=Fc||tD(t,n,u,r,f,m,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,m,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return xV(e,t,n,r,o,i)}function xV(e,t,n,r,i,o){fre(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&UK(t,n,!1),qu(e,t,o);r=t.stateNode,mSe.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=M0(t,e.child,null,o),t.child=M0(t,null,s,o)):Si(e,t,s,o),t.memoizedState=r.state,i&&UK(t,n,!0),t.child}function pre(e){var t=e.stateNode;t.pendingContext?AK(e,t.pendingContext,t.pendingContext!==t.context):t.context&&AK(e,t.context,!1),FF(e,t.containerInfo)}function fD(e,t,n,r,i){return F0(),RF(i),t.flags|=256,Si(e,t,n,r),t.child}var wV={dehydrated:null,treeContext:null,retryLane:0};function ZV(e){return{baseLanes:e,cachePool:null,transitions:null}}function hre(e,t,n){var r=t.pendingProps,i=Xn.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),an(Xn,i&1),e===null)return hV(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=RW(a,r,0,null),e=wp(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=ZV(n),t.memoizedState=wV,e):BF(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return gSe(e,t,a,r,s,i,n);if(o){o=r.fallback,a=t.mode,i=e.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=hd(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=hd(s,o):(o=wp(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?ZV(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=wV,r}return o=e.child,e=o.sibling,r=hd(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function BF(e,t){return t=RW({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function lS(e,t,n,r){return r!==null&&RF(r),M0(t,e.child,null,n),e=BF(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function gSe(e,t,n,r,i,o,a){if(n)return t.flags&256?(t.flags&=-257,r=qX(Error(we(422))),lS(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=RW({mode:"visible",children:r.children},i,0,null),o=wp(o,i,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&M0(t,e.child,null,a),t.child.memoizedState=ZV(a),t.memoizedState=wV,o);if(!(t.mode&1))return lS(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(we(419)),r=qX(o,r,void 0),lS(e,t,a,r)}if(s=(a&e.childLanes)!==0,Ui||s){if(r=Gr,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Qu(e,i),ps(r,e,i,-1))}return QF(),r=qX(Error(we(421))),lS(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=ESe.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Io=cd(i.nextSibling),Co=t,Sn=!0,$a=null,e!==null&&(ra[ia++]=Xu,ra[ia++]=Lu,ra[ia++]=Yp,Xu=e.id,Lu=e.overflow,Yp=t),t=BF(t,r.children),t.flags|=4096,t)}function pD(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),mV(e.return,t,n)}function eL(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function mre(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Si(e,t,r.children,n),r=Xn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pD(e,n,t);else if(e.tag===19)pD(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(an(Xn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&C9(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),eL(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&C9(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}eL(t,!0,n,null,o);break;case"together":eL(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Kk(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qu(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Np|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(we(153));if(t.child!==null){for(e=t.child,n=hd(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=hd(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function bSe(e,t,n){switch(t.tag){case 3:pre(t),F0();break;case 5:Pne(t);break;case 1:to(t.type)&&I9(t);break;case 4:FF(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;an(X9,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(an(Xn,Xn.current&1),t.flags|=128,null):n&t.child.childLanes?hre(e,t,n):(an(Xn,Xn.current&1),e=qu(e,t,n),e!==null?e.sibling:null);an(Xn,Xn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return mre(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),an(Xn,Xn.current),r)break;return null;case 22:case 23:return t.lanes=0,dre(e,t,n)}return qu(e,t,n)}var gre,SV,bre,yre;gre=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};SV=function(){};bre=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,fp(xl.current);var o=null;switch(n){case"input":i=JC(e,i),r=JC(e,r),o=[];break;case"select":i=Cn({},i,{value:void 0}),r=Cn({},r,{value:void 0}),o=[];break;case"textarea":i=DC(e,i),r=DC(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=_9)}UC(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Zx.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(s=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Zx.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&dn("scroll",e),o||s===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};yre=function(e,t,n,r){n!==r&&(t.flags|=4)};function hy(e,t){if(!Sn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ar(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ySe(e,t,n){var r=t.pendingProps;switch(LF(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ar(t),null;case 1:return to(t.type)&&G9(),Ar(t),null;case 3:return r=t.stateNode,O0(),bn(eo),bn(fi),OF(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(aS(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$a!==null&&(LV($a),$a=null))),SV(e,t),Ar(t),null;case 5:MF(t);var i=fp(Vx.current);if(n=t.type,e!==null&&t.stateNode!=null)bre(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(we(166));return Ar(t),null}if(e=fp(xl.current),aS(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ll]=t,r[Rx]=o,e=(t.mode&1)!==0,n){case"dialog":dn("cancel",r),dn("close",r);break;case"iframe":case"object":case"embed":dn("load",r);break;case"video":case"audio":for(i=0;i<cv.length;i++)dn(cv[i],r);break;case"source":dn("error",r);break;case"img":case"image":case"link":dn("error",r),dn("load",r);break;case"details":dn("toggle",r);break;case"input":ZK(r,o),dn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},dn("invalid",r);break;case"textarea":kK(r,o),dn("invalid",r)}UC(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&oS(r.textContent,s,e),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&oS(r.textContent,s,e),i=["children",""+s]):Zx.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&dn("scroll",r)}switch(n){case"input":$Z(r),SK(r,o,!0);break;case"textarea":$Z(r),_K(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=_9)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Jte(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[ll]=t,e[Rx]=r,gre(e,t,!1,!1),t.stateNode=e;e:{switch(a=$C(n,r),n){case"dialog":dn("cancel",e),dn("close",e),i=r;break;case"iframe":case"object":case"embed":dn("load",e),i=r;break;case"video":case"audio":for(i=0;i<cv.length;i++)dn(cv[i],e);i=r;break;case"source":dn("error",e),i=r;break;case"img":case"image":case"link":dn("error",e),dn("load",e),i=r;break;case"details":dn("toggle",e),i=r;break;case"input":ZK(e,r),i=JC(e,r),dn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Cn({},r,{value:void 0}),dn("invalid",e);break;case"textarea":kK(e,r),i=DC(e,r),dn("invalid",e);break;default:i=r}UC(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?Dte(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Bte(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Sx(e,l):typeof l=="number"&&Sx(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Zx.hasOwnProperty(o)?l!=null&&o==="onScroll"&&dn("scroll",e):l!=null&&gF(e,o,l,a))}switch(n){case"input":$Z(e),SK(e,r,!1);break;case"textarea":$Z(e),_K(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Xd(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?m0(e,!!r.multiple,o,!1):r.defaultValue!=null&&m0(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=_9)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ar(t),null;case 6:if(e&&t.stateNode!=null)yre(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(we(166));if(n=fp(Vx.current),fp(xl.current),aS(t)){if(r=t.stateNode,n=t.memoizedProps,r[ll]=t,(o=r.nodeValue!==n)&&(e=Co,e!==null))switch(e.tag){case 3:oS(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&oS(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ll]=t,t.stateNode=r}return Ar(t),null;case 13:if(bn(Xn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Sn&&Io!==null&&t.mode&1&&!(t.flags&128))Yne(),F0(),t.flags|=98560,o=!1;else if(o=aS(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(we(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(we(317));o[ll]=t}else F0(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ar(t),o=!1}else $a!==null&&(LV($a),$a=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Xn.current&1?ar===0&&(ar=3):QF())),t.updateQueue!==null&&(t.flags|=4),Ar(t),null);case 4:return O0(),SV(e,t),e===null&&Xx(t.stateNode.containerInfo),Ar(t),null;case 10:return YF(t.type._context),Ar(t),null;case 17:return to(t.type)&&G9(),Ar(t),null;case 19:if(bn(Xn),o=t.memoizedState,o===null)return Ar(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)hy(o,!1);else{if(ar!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=C9(e),a!==null){for(t.flags|=128,hy(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return an(Xn,Xn.current&1|2),t.child}e=e.sibling}o.tail!==null&&Jn()>P0&&(t.flags|=128,r=!0,hy(o,!1),t.lanes=4194304)}else{if(!r)if(e=C9(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),hy(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Sn)return Ar(t),null}else 2*Jn()-o.renderingStartTime>P0&&n!==1073741824&&(t.flags|=128,r=!0,hy(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Jn(),t.sibling=null,n=Xn.current,an(Xn,r?n&1|2:n&1),t):(Ar(t),null);case 22:case 23:return $F(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?So&1073741824&&(Ar(t),t.subtreeFlags&6&&(t.flags|=8192)):Ar(t),null;case 24:return null;case 25:return null}throw Error(we(156,t.tag))}function vSe(e,t){switch(LF(t),t.tag){case 1:return to(t.type)&&G9(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return O0(),bn(eo),bn(fi),OF(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return MF(t),null;case 13:if(bn(Xn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(we(340));F0()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return bn(Xn),null;case 4:return O0(),null;case 10:return YF(t.type._context),null;case 22:case 23:return $F(),null;case 24:return null;default:return null}}var uS=!1,ti=!1,xSe=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function qm(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Nn(e,t,r)}else n.current=null}function kV(e,t,n){try{n()}catch(r){Nn(e,t,r)}}var hD=!1;function wSe(e,t){if(sV=Z9,e=Zne(),EF(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(k){n=null;break e}var a=0,s=-1,l=-1,u=0,c=0,d=e,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(s=a+i),d!==o||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++u===i&&(s=a),f===o&&++c===r&&(l=a),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(lV={focusedElem:e,selectionRange:n},Z9=!1,Ye=t;Ye!==null;)if(t=Ye,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ye=e;else for(;Ye!==null;){t=Ye;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Da(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var Z=t.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(k){Nn(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,Ye=e;break}Ye=t.return}return m=hD,hD=!1,m}function Uv(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&kV(t,n,o)}i=i.next}while(i!==r)}}function XW(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function _V(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function vre(e){var t=e.alternate;t!==null&&(e.alternate=null,vre(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ll],delete t[Rx],delete t[dV],delete t[rSe],delete t[iSe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xre(e){return e.tag===5||e.tag===3||e.tag===4}function mD(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xre(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function GV(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=_9));else if(r!==4&&(e=e.child,e!==null))for(GV(e,t,n),e=e.sibling;e!==null;)GV(e,t,n),e=e.sibling}function IV(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(IV(e,t,n),e=e.sibling;e!==null;)IV(e,t,n),e=e.sibling}var Tr=null,Aa=!1;function Xc(e,t,n){for(n=n.child;n!==null;)wre(e,t,n),n=n.sibling}function wre(e,t,n){if(vl&&typeof vl.onCommitFiberUnmount=="function")try{vl.onCommitFiberUnmount(ZW,n)}catch(s){}switch(n.tag){case 5:ti||qm(n,t);case 6:var r=Tr,i=Aa;Tr=null,Xc(e,t,n),Tr=r,Aa=i,Tr!==null&&(Aa?(e=Tr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Tr.removeChild(n.stateNode));break;case 18:Tr!==null&&(Aa?(e=Tr,n=n.stateNode,e.nodeType===8?KX(e.parentNode,n):e.nodeType===1&&KX(e,n),Ix(e)):KX(Tr,n.stateNode));break;case 4:r=Tr,i=Aa,Tr=n.stateNode.containerInfo,Aa=!0,Xc(e,t,n),Tr=r,Aa=i;break;case 0:case 11:case 14:case 15:if(!ti&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&kV(n,t,a),i=i.next}while(i!==r)}Xc(e,t,n);break;case 1:if(!ti&&(qm(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Nn(n,t,s)}Xc(e,t,n);break;case 21:Xc(e,t,n);break;case 22:n.mode&1?(ti=(r=ti)||n.memoizedState!==null,Xc(e,t,n),ti=r):Xc(e,t,n);break;default:Xc(e,t,n)}}function gD(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new xSe),t.forEach(function(r){var i=XSe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ma(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Tr=s.stateNode,Aa=!1;break e;case 3:Tr=s.stateNode.containerInfo,Aa=!0;break e;case 4:Tr=s.stateNode.containerInfo,Aa=!0;break e}s=s.return}if(Tr===null)throw Error(we(160));wre(o,a,i),Tr=null,Aa=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Nn(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Zre(t,e),t=t.sibling}function Zre(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ma(t,e),Ds(e),r&4){try{Uv(3,e,e.return),XW(3,e)}catch(g){Nn(e,e.return,g)}try{Uv(5,e,e.return)}catch(g){Nn(e,e.return,g)}}break;case 1:Ma(t,e),Ds(e),r&512&&n!==null&&qm(n,n.return);break;case 5:if(Ma(t,e),Ds(e),r&512&&n!==null&&qm(n,n.return),e.flags&32){var i=e.stateNode;try{Sx(i,"")}catch(g){Nn(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&jte(i,o),$C(s,a);var u=$C(s,o);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];c==="style"?Dte(i,d):c==="dangerouslySetInnerHTML"?Bte(i,d):c==="children"?Sx(i,d):gF(i,c,d,u)}switch(s){case"input":BC(i,o);break;case"textarea":Hte(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?m0(i,!!o.multiple,h,!1):f!==!!o.multiple&&(o.defaultValue!=null?m0(i,!!o.multiple,o.defaultValue,!0):m0(i,!!o.multiple,o.multiple?[]:"",!1))}i[Rx]=o}catch(g){Nn(e,e.return,g)}}break;case 6:if(Ma(t,e),Ds(e),r&4){if(e.stateNode===null)throw Error(we(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Nn(e,e.return,g)}}break;case 3:if(Ma(t,e),Ds(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ix(t.containerInfo)}catch(g){Nn(e,e.return,g)}break;case 4:Ma(t,e),Ds(e);break;case 13:Ma(t,e),Ds(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(AF=Jn())),r&4&&gD(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ti=(u=ti)||c,Ma(t,e),ti=u):Ma(t,e),Ds(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(Ye=e,c=e.child;c!==null;){for(d=Ye=c;Ye!==null;){switch(f=Ye,h=f.child,f.tag){case 0:case 11:case 14:case 15:Uv(4,f,f.return);break;case 1:qm(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Nn(r,n,g)}}break;case 5:qm(f,f.return);break;case 22:if(f.memoizedState!==null){yD(d);continue}}h!==null?(h.return=f,Ye=h):yD(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=Kte("display",a))}catch(g){Nn(e,e.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Nn(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ma(t,e),Ds(e),r&4&&gD(e);break;case 21:break;default:Ma(t,e),Ds(e)}}function Ds(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(xre(n)){var r=n;break e}n=n.return}throw Error(we(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Sx(i,""),r.flags&=-33);var o=mD(e);IV(e,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=mD(e);GV(e,s,a);break;default:throw Error(we(161))}}catch(l){Nn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ZSe(e,t,n){Ye=e,Sre(e)}function Sre(e,t,n){for(var r=(e.mode&1)!==0;Ye!==null;){var i=Ye,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||uS;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||ti;s=uS;var u=ti;if(uS=a,(ti=l)&&!u)for(Ye=i;Ye!==null;)a=Ye,l=a.child,a.tag===22&&a.memoizedState!==null?vD(i):l!==null?(l.return=a,Ye=l):vD(i);for(;o!==null;)Ye=o,Sre(o),o=o.sibling;Ye=i,uS=s,ti=u}bD(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Ye=o):bD(e)}}function bD(e){for(;Ye!==null;){var t=Ye;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ti||XW(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ti)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Da(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&eD(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}eD(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Ix(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(we(163))}ti||t.flags&512&&_V(t)}catch(f){Nn(t,t.return,f)}}if(t===e){Ye=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ye=n;break}Ye=t.return}}function yD(e){for(;Ye!==null;){var t=Ye;if(t===e){Ye=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ye=n;break}Ye=t.return}}function vD(e){for(;Ye!==null;){var t=Ye;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{XW(4,t)}catch(l){Nn(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Nn(t,i,l)}}var o=t.return;try{_V(t)}catch(l){Nn(t,o,l)}break;case 5:var a=t.return;try{_V(t)}catch(l){Nn(t,a,l)}}}catch(l){Nn(t,t.return,l)}if(t===e){Ye=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Ye=s;break}Ye=t.return}}var SSe=Math.ceil,T9=lc.ReactCurrentDispatcher,KF=lc.ReactCurrentOwner,ga=lc.ReactCurrentBatchConfig,Et=0,Gr=null,Qn=null,zr=0,So=0,e0=of(0),ar=0,Fx=null,Np=0,LW=0,DF=0,$v=null,Ji=null,AF=0,P0=1/0,wu=null,N9=!1,WV=null,fd=null,cS=!1,Ac=null,F9=0,Qv=0,EV=null,Dk=-1,Ak=0;function Li(){return Et&6?Jn():Dk!==-1?Dk:Dk=Jn()}function pd(e){return e.mode&1?Et&2&&zr!==0?zr&-zr:aSe.transition!==null?(Ak===0&&(Ak=ane()),Ak):(e=Ht,e!==0||(e=window.event,e=e===void 0?16:pne(e.type)),e):1}function ps(e,t,n,r){if(50<Qv)throw Qv=0,EV=null,Error(we(185));Pw(e,n,r),(!(Et&2)||e!==Gr)&&(e===Gr&&(!(Et&2)&&(LW|=n),ar===4&&Jc(e,zr)),no(e,r),n===1&&Et===0&&!(t.mode&1)&&(P0=Jn()+500,IW&&af()))}function no(e,t){var n=e.callbackNode;aZe(e,t);var r=w9(e,e===Gr?zr:0);if(r===0)n!==null&&WK(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&WK(n),t===1)e.tag===0?oSe(xD.bind(null,e)):Rne(xD.bind(null,e)),tSe(function(){!(Et&6)&&af()}),n=null;else{switch(sne(r)){case 1:n=wF;break;case 4:n=ine;break;case 16:n=x9;break;case 536870912:n=one;break;default:n=x9}n=Lre(n,kre.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function kre(e,t){if(Dk=-1,Ak=0,Et&6)throw Error(we(327));var n=e.callbackNode;if(x0()&&e.callbackNode!==n)return null;var r=w9(e,e===Gr?zr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=M9(e,r);else{t=r;var i=Et;Et|=2;var o=Gre();(Gr!==e||zr!==t)&&(wu=null,P0=Jn()+500,xp(e,t));do try{GSe();break}catch(s){_re(e,s)}while(!0);VF(),T9.current=o,Et=i,Qn!==null?t=0:(Gr=null,zr=0,t=ar)}if(t!==0){if(t===2&&(i=nV(e),i!==0&&(r=i,t=XV(e,i))),t===1)throw n=Fx,xp(e,0),Jc(e,r),no(e,Jn()),n;if(t===6)Jc(e,r);else{if(i=e.current.alternate,!(r&30)&&!kSe(i)&&(t=M9(e,r),t===2&&(o=nV(e),o!==0&&(r=o,t=XV(e,o))),t===1))throw n=Fx,xp(e,0),Jc(e,r),no(e,Jn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(we(345));case 2:Af(e,Ji,wu);break;case 3:if(Jc(e,r),(r&130023424)===r&&(t=AF+500-Jn(),10<t)){if(w9(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Li(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=cV(Af.bind(null,e,Ji,wu),t);break}Af(e,Ji,wu);break;case 4:if(Jc(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-fs(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=Jn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*SSe(r/1960))-r,10<r){e.timeoutHandle=cV(Af.bind(null,e,Ji,wu),r);break}Af(e,Ji,wu);break;case 5:Af(e,Ji,wu);break;default:throw Error(we(329))}}}return no(e,Jn()),e.callbackNode===n?kre.bind(null,e):null}function XV(e,t){var n=$v;return e.current.memoizedState.isDehydrated&&(xp(e,t).flags|=256),e=M9(e,t),e!==2&&(t=Ji,Ji=n,t!==null&&LV(t)),e}function LV(e){Ji===null?Ji=e:Ji.push.apply(Ji,e)}function kSe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ws(o(),i))return!1}catch(a){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jc(e,t){for(t&=~DF,t&=~LW,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-fs(t),r=1<<n;e[n]=-1,t&=~r}}function xD(e){if(Et&6)throw Error(we(327));x0();var t=w9(e,0);if(!(t&1))return no(e,Jn()),null;var n=M9(e,t);if(e.tag!==0&&n===2){var r=nV(e);r!==0&&(t=r,n=XV(e,r))}if(n===1)throw n=Fx,xp(e,0),Jc(e,t),no(e,Jn()),n;if(n===6)throw Error(we(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Af(e,Ji,wu),no(e,Jn()),null}function UF(e,t){var n=Et;Et|=1;try{return e(t)}finally{Et=n,Et===0&&(P0=Jn()+500,IW&&af())}}function Fp(e){Ac!==null&&Ac.tag===0&&!(Et&6)&&x0();var t=Et;Et|=1;var n=ga.transition,r=Ht;try{if(ga.transition=null,Ht=1,e)return e()}finally{Ht=r,ga.transition=n,Et=t,!(Et&6)&&af()}}function $F(){So=e0.current,bn(e0)}function xp(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,eSe(n)),Qn!==null)for(n=Qn.return;n!==null;){var r=n;switch(LF(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&G9();break;case 3:O0(),bn(eo),bn(fi),OF();break;case 5:MF(r);break;case 4:O0();break;case 13:bn(Xn);break;case 19:bn(Xn);break;case 10:YF(r.type._context);break;case 22:case 23:$F()}n=n.return}if(Gr=e,Qn=e=hd(e.current,null),zr=So=t,ar=0,Fx=null,DF=LW=Np=0,Ji=$v=null,dp!==null){for(t=0;t<dp.length;t++)if(n=dp[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}dp=null}return e}function _re(e,t){do{var n=Qn;try{if(VF(),Jk.current=Y9,V9){for(var r=Rn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}V9=!1}if(Tp=0,br=ir=Rn=null,Av=!1,Yx=0,KF.current=null,n===null||n.return===null){ar=1,Fx=t,Qn=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=zr,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=sD(a);if(h!==null){h.flags&=-257,lD(h,a,s,o,t),h.mode&1&&aD(o,u,t),t=h,l=u;var m=t.updateQueue;if(m===null){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}else{if(!(t&1)){aD(o,u,t),QF();break e}l=Error(we(426))}}else if(Sn&&s.mode&1){var y=sD(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),lD(y,a,s,o,t),RF(z0(l,s));break e}}o=l=z0(l,s),ar!==4&&(ar=2),$v===null?$v=[o]:$v.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=lre(o,l,t);qK(o,v);break e;case 1:s=l;var w=o.type,Z=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(fd===null||!fd.has(Z)))){o.flags|=65536,t&=-t,o.lanes|=t;var k=ure(o,s,t);qK(o,k);break e}}o=o.return}while(o!==null)}Wre(n)}catch(_){t=_,Qn===n&&n!==null&&(Qn=n=n.return);continue}break}while(!0)}function Gre(){var e=T9.current;return T9.current=Y9,e===null?Y9:e}function QF(){(ar===0||ar===3||ar===2)&&(ar=4),Gr===null||!(Np&268435455)&&!(LW&268435455)||Jc(Gr,zr)}function M9(e,t){var n=Et;Et|=2;var r=Gre();(Gr!==e||zr!==t)&&(wu=null,xp(e,t));do try{_Se();break}catch(i){_re(e,i)}while(!0);if(VF(),Et=n,T9.current=r,Qn!==null)throw Error(we(261));return Gr=null,zr=0,ar}function _Se(){for(;Qn!==null;)Ire(Qn)}function GSe(){for(;Qn!==null&&!$5e();)Ire(Qn)}function Ire(e){var t=Xre(e.alternate,e,So);e.memoizedProps=e.pendingProps,t===null?Wre(e):Qn=t,KF.current=null}function Wre(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=vSe(n,t),n!==null){n.flags&=32767,Qn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ar=6,Qn=null;return}}else if(n=ySe(n,t,So),n!==null){Qn=n;return}if(t=t.sibling,t!==null){Qn=t;return}Qn=t=e}while(t!==null);ar===0&&(ar=5)}function Af(e,t,n){var r=Ht,i=ga.transition;try{ga.transition=null,Ht=1,ISe(e,t,n,r)}finally{ga.transition=i,Ht=r}return null}function ISe(e,t,n,r){do x0();while(Ac!==null);if(Et&6)throw Error(we(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(we(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(sZe(e,o),e===Gr&&(Qn=Gr=null,zr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cS||(cS=!0,Lre(x9,function(){return x0(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ga.transition,ga.transition=null;var a=Ht;Ht=1;var s=Et;Et|=4,KF.current=null,wSe(e,n),Zre(n,e),KZe(lV),Z9=!!sV,lV=sV=null,e.current=n,ZSe(n),Q5e(),Et=s,Ht=a,ga.transition=o}else e.current=n;if(cS&&(cS=!1,Ac=e,F9=i),o=e.pendingLanes,o===0&&(fd=null),tZe(n.stateNode),no(e,Jn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(N9)throw N9=!1,e=WV,WV=null,e;return F9&1&&e.tag!==0&&x0(),o=e.pendingLanes,o&1?e===EV?Qv++:(Qv=0,EV=e):Qv=0,af(),null}function x0(){if(Ac!==null){var e=sne(F9),t=ga.transition,n=Ht;try{if(ga.transition=null,Ht=16>e?16:e,Ac===null)var r=!1;else{if(e=Ac,Ac=null,F9=0,Et&6)throw Error(we(331));var i=Et;for(Et|=4,Ye=e.current;Ye!==null;){var o=Ye,a=o.child;if(Ye.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Ye=u;Ye!==null;){var c=Ye;switch(c.tag){case 0:case 11:case 15:Uv(8,c,o)}var d=c.child;if(d!==null)d.return=c,Ye=d;else for(;Ye!==null;){c=Ye;var f=c.sibling,h=c.return;if(vre(c),c===u){Ye=null;break}if(f!==null){f.return=h,Ye=f;break}Ye=h}}}var m=o.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Ye=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Ye=a;else e:for(;Ye!==null;){if(o=Ye,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Uv(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,Ye=v;break e}Ye=o.return}}var w=e.current;for(Ye=w;Ye!==null;){a=Ye;var Z=a.child;if(a.subtreeFlags&2064&&Z!==null)Z.return=a,Ye=Z;else e:for(a=w;Ye!==null;){if(s=Ye,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:XW(9,s)}}catch(_){Nn(s,s.return,_)}if(s===a){Ye=null;break e}var k=s.sibling;if(k!==null){k.return=s.return,Ye=k;break e}Ye=s.return}}if(Et=i,af(),vl&&typeof vl.onPostCommitFiberRoot=="function")try{vl.onPostCommitFiberRoot(ZW,e)}catch(_){}r=!0}return r}finally{Ht=n,ga.transition=t}}return!1}function wD(e,t,n){t=z0(n,t),t=lre(e,t,1),e=dd(e,t,1),t=Li(),e!==null&&(Pw(e,1,t),no(e,t))}function Nn(e,t,n){if(e.tag===3)wD(e,e,n);else for(;t!==null;){if(t.tag===3){wD(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fd===null||!fd.has(r))){e=z0(n,e),e=ure(t,e,1),t=dd(t,e,1),e=Li(),t!==null&&(Pw(t,1,e),no(t,e));break}}t=t.return}}function WSe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Li(),e.pingedLanes|=e.suspendedLanes&n,Gr===e&&(zr&n)===n&&(ar===4||ar===3&&(zr&130023424)===zr&&500>Jn()-AF?xp(e,0):DF|=n),no(e,t)}function Ere(e,t){t===0&&(e.mode&1?(t=eS,eS<<=1,!(eS&130023424)&&(eS=4194304)):t=1);var n=Li();e=Qu(e,t),e!==null&&(Pw(e,t,n),no(e,n))}function ESe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ere(e,n)}function XSe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(we(314))}r!==null&&r.delete(t),Ere(e,n)}var Xre;Xre=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||eo.current)Ui=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ui=!1,bSe(e,t,n);Ui=!!(e.flags&131072)}else Ui=!1,Sn&&t.flags&1048576&&Cne(t,E9,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Kk(e,t),e=t.pendingProps;var i=N0(t,fi.current);v0(t,n),i=PF(null,t,r,e,i,n);var o=jF();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,to(r)?(o=!0,I9(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,NF(t),i.updater=WW,t.stateNode=i,i._reactInternals=t,bV(t,r,e,n),t=xV(null,t,r,!0,o,n)):(t.tag=0,Sn&&o&&XF(t),Si(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Kk(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=RSe(r),e=Da(r,e),i){case 0:t=vV(null,t,r,e,n);break e;case 1:t=dD(null,t,r,e,n);break e;case 11:t=uD(null,t,r,e,n);break e;case 14:t=cD(null,t,r,Da(r.type,e),n);break e}throw Error(we(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Da(r,i),vV(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Da(r,i),dD(e,t,r,i,n);case 3:e:{if(pre(t),e===null)throw Error(we(387));r=t.pendingProps,o=t.memoizedState,i=o.element,Nne(e,t),R9(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=z0(Error(we(423)),t),t=fD(e,t,r,n,i);break e}else if(r!==i){i=z0(Error(we(424)),t),t=fD(e,t,r,n,i);break e}else for(Io=cd(t.stateNode.containerInfo.firstChild),Co=t,Sn=!0,$a=null,n=zne(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(F0(),r===i){t=qu(e,t,n);break e}Si(e,t,r,n)}t=t.child}return t;case 5:return Pne(t),e===null&&hV(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,uV(r,i)?a=null:o!==null&&uV(r,o)&&(t.flags|=32),fre(e,t),Si(e,t,a,n),t.child;case 6:return e===null&&hV(t),null;case 13:return hre(e,t,n);case 4:return FF(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=M0(t,null,r,n):Si(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Da(r,i),uD(e,t,r,i,n);case 7:return Si(e,t,t.pendingProps,n),t.child;case 8:return Si(e,t,t.pendingProps.children,n),t.child;case 12:return Si(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,an(X9,r._currentValue),r._currentValue=a,o!==null)if(ws(o.value,a)){if(o.children===i.children&&!eo.current){t=qu(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=zu(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),mV(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(we(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),mV(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Si(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,v0(t,n),i=xa(i),r=r(i),t.flags|=1,Si(e,t,r,n),t.child;case 14:return r=t.type,i=Da(r,t.pendingProps),i=Da(r.type,i),cD(e,t,r,i,n);case 15:return cre(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Da(r,i),Kk(e,t),t.tag=1,to(r)?(e=!0,I9(t)):e=!1,v0(t,n),Mne(t,r,i),bV(t,r,i,n),xV(null,t,r,!0,e,n);case 19:return mre(e,t,n);case 22:return dre(e,t,n)}throw Error(we(156,t.tag))};function Lre(e,t){return rne(e,t)}function LSe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ca(e,t,n,r){return new LSe(e,t,n,r)}function qF(e){return e=e.prototype,!(!e||!e.isReactComponent)}function RSe(e){if(typeof e=="function")return qF(e)?1:0;if(e!=null){if(e=e.$$typeof,e===yF)return 11;if(e===vF)return 14}return 2}function hd(e,t){var n=e.alternate;return n===null?(n=ca(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Uk(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")qF(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Hm:return wp(n.children,i,o,t);case bF:a=8,i|=8;break;case zC:return e=ca(12,n,t,i|2),e.elementType=zC,e.lanes=o,e;case PC:return e=ca(13,n,t,i),e.elementType=PC,e.lanes=o,e;case jC:return e=ca(19,n,t,i),e.elementType=jC,e.lanes=o,e;case Ote:return RW(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Fte:a=10;break e;case Mte:a=9;break e;case yF:a=11;break e;case vF:a=14;break e;case Nc:a=16,r=null;break e}throw Error(we(130,e==null?e:typeof e,""))}return t=ca(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function wp(e,t,n,r){return e=ca(7,e,r,t),e.lanes=n,e}function RW(e,t,n,r){return e=ca(22,e,r,t),e.elementType=Ote,e.lanes=n,e.stateNode={isHidden:!1},e}function tL(e,t,n){return e=ca(6,e,null,t),e.lanes=n,e}function nL(e,t,n){return t=ca(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function CSe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=TX(0),this.expirationTimes=TX(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=TX(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function eM(e,t,n,r,i,o,a,s,l){return e=new CSe(e,t,n,s,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ca(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},NF(o),e}function VSe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jm,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Rre(e){if(!e)return Ld;e=e._reactInternals;e:{if(bh(e)!==e||e.tag!==1)throw Error(we(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(to(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(we(171))}if(e.tag===1){var n=e.type;if(to(n))return Lne(e,n,t)}return t}function Cre(e,t,n,r,i,o,a,s,l){return e=eM(n,r,!0,e,i,o,a,s,l),e.context=Rre(null),n=e.current,r=Li(),i=pd(n),o=zu(r,i),o.callback=t!=null?t:null,dd(n,o,i),e.current.lanes=i,Pw(e,i,r),no(e,r),e}function CW(e,t,n,r){var i=t.current,o=Li(),a=pd(i);return n=Rre(n),t.context===null?t.context=n:t.pendingContext=n,t=zu(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=dd(i,t,a),e!==null&&(ps(e,i,a,o),Hk(e,i,a)),a}function O9(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ZD(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function tM(e,t){ZD(e,t),(e=e.alternate)&&ZD(e,t)}function YSe(){return null}var Vre=typeof reportError=="function"?reportError:function(e){console.error(e)};function nM(e){this._internalRoot=e}VW.prototype.render=nM.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(we(409));CW(e,t,null,null)};VW.prototype.unmount=nM.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fp(function(){CW(null,e,null,null)}),t[$u]=null}};function VW(e){this._internalRoot=e}VW.prototype.unstable_scheduleHydration=function(e){if(e){var t=cne();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Hc.length&&t!==0&&t<Hc[n].priority;n++);Hc.splice(n,0,e),n===0&&fne(e)}};function rM(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function YW(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function SD(){}function TSe(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=O9(a);o.call(u)}}var a=Cre(t,r,e,0,null,!1,!1,"",SD);return e._reactRootContainer=a,e[$u]=a.current,Xx(e.nodeType===8?e.parentNode:e),Fp(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var u=O9(l);s.call(u)}}var l=eM(e,0,!1,null,null,!1,!1,"",SD);return e._reactRootContainer=l,e[$u]=l.current,Xx(e.nodeType===8?e.parentNode:e),Fp(function(){CW(t,l,n,r)}),l}function TW(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=O9(a);s.call(l)}}CW(t,a,e,i)}else a=TSe(n,t,e,i,r);return O9(a)}lne=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=uv(t.pendingLanes);n!==0&&(ZF(t,n|1),no(t,Jn()),!(Et&6)&&(P0=Jn()+500,af()))}break;case 13:Fp(function(){var r=Qu(e,1);if(r!==null){var i=Li();ps(r,e,1,i)}}),tM(e,1)}};SF=function(e){if(e.tag===13){var t=Qu(e,134217728);if(t!==null){var n=Li();ps(t,e,134217728,n)}tM(e,134217728)}};une=function(e){if(e.tag===13){var t=pd(e),n=Qu(e,t);if(n!==null){var r=Li();ps(n,e,t,r)}tM(e,t)}};cne=function(){return Ht};dne=function(e,t){var n=Ht;try{return Ht=e,t()}finally{Ht=n}};qC=function(e,t,n){switch(t){case"input":if(BC(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=GW(r);if(!i)throw Error(we(90));Pte(r),BC(r,i)}}}break;case"textarea":Hte(e,n);break;case"select":t=n.value,t!=null&&m0(e,!!n.multiple,t,!1)}};$te=UF;Qte=Fp;var NSe={usingClientEntryPoint:!1,Events:[Hw,Dm,GW,Ate,Ute,UF]},my={findFiberByHostInstance:cp,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},FSe={bundleType:my.bundleType,version:my.version,rendererPackageName:my.rendererPackageName,rendererConfig:my.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=tne(e),e===null?null:e.stateNode},findFiberByHostInstance:my.findFiberByHostInstance||YSe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var dS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dS.isDisabled&&dS.supportsFiber)try{ZW=dS.inject(FSe),vl=dS}catch(e){}}Ko.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NSe;Ko.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rM(t))throw Error(we(200));return VSe(e,t,null,n)};Ko.createRoot=function(e,t){if(!rM(e))throw Error(we(299));var n=!1,r="",i=Vre;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=eM(e,1,!1,null,null,n,!1,r,i),e[$u]=t.current,Xx(e.nodeType===8?e.parentNode:e),new nM(t)};Ko.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(we(188)):(e=Object.keys(e).join(","),Error(we(268,e)));return e=tne(t),e=e===null?null:e.stateNode,e};Ko.flushSync=function(e){return Fp(e)};Ko.hydrate=function(e,t,n){if(!YW(t))throw Error(we(200));return TW(null,e,t,!0,n)};Ko.hydrateRoot=function(e,t,n){if(!rM(e))throw Error(we(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=Vre;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Cre(t,null,e,1,n!=null?n:null,i,!1,o,a),e[$u]=t.current,Xx(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new VW(t)};Ko.render=function(e,t,n){if(!YW(t))throw Error(we(200));return TW(null,e,t,!1,n)};Ko.unmountComponentAtNode=function(e){if(!YW(e))throw Error(we(40));return e._reactRootContainer?(Fp(function(){TW(null,null,e,!1,function(){e._reactRootContainer=null,e[$u]=null})}),!0):!1};Ko.unstable_batchedUpdates=UF;Ko.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!YW(n))throw Error(we(200));if(e==null||e._reactInternals===void 0)throw Error(we(38));return TW(e,t,n,!1,r)};Ko.version="18.2.0-next-9e3b772b8-20220608";function Yre(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yre)}catch(e){console.error(e)}}Yre(),Cte.exports=Ko;var qn=Cte.exports;const MSe=wW(qn);var Tre,kD=qn;Tre=kD.createRoot,kD.hydrateRoot;var Nre={exports:{}},en={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iM=Symbol.for("react.transitional.element"),oM=Symbol.for("react.portal"),NW=Symbol.for("react.fragment"),FW=Symbol.for("react.strict_mode"),MW=Symbol.for("react.profiler"),OW=Symbol.for("react.consumer"),zW=Symbol.for("react.context"),PW=Symbol.for("react.forward_ref"),jW=Symbol.for("react.suspense"),HW=Symbol.for("react.suspense_list"),JW=Symbol.for("react.memo"),BW=Symbol.for("react.lazy"),OSe=Symbol.for("react.view_transition"),zSe=Symbol.for("react.client.reference");function La(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case iM:switch(e=e.type,e){case NW:case MW:case FW:case jW:case HW:case OSe:return e;default:switch(e=e&&e.$$typeof,e){case zW:case PW:case BW:case JW:return e;case OW:return e;default:return t}}case oM:return t}}}en.ContextConsumer=OW;en.ContextProvider=zW;en.Element=iM;en.ForwardRef=PW;en.Fragment=NW;en.Lazy=BW;en.Memo=JW;en.Portal=oM;en.Profiler=MW;en.StrictMode=FW;en.Suspense=jW;en.SuspenseList=HW;en.isContextConsumer=function(e){return La(e)===OW};en.isContextProvider=function(e){return La(e)===zW};en.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===iM};en.isForwardRef=function(e){return La(e)===PW};en.isFragment=function(e){return La(e)===NW};en.isLazy=function(e){return La(e)===BW};en.isMemo=function(e){return La(e)===JW};en.isPortal=function(e){return La(e)===oM};en.isProfiler=function(e){return La(e)===MW};en.isStrictMode=function(e){return La(e)===FW};en.isSuspense=function(e){return La(e)===jW};en.isSuspenseList=function(e){return La(e)===HW};en.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===NW||e===MW||e===FW||e===jW||e===HW||typeof e=="object"&&e!==null&&(e.$$typeof===BW||e.$$typeof===JW||e.$$typeof===zW||e.$$typeof===OW||e.$$typeof===PW||e.$$typeof===zSe||e.getModuleId!==void 0)};en.typeOf=La;Nre.exports=en;var Fre=Nre.exports,PSe=function(t,n,r,i){var o=r?r.call(i,t,n):void 0;if(o!==void 0)return!!o;if(t===n)return!0;if(typeof t!="object"||!t||typeof n!="object"||!n)return!1;var a=Object.keys(t),s=Object.keys(n);if(a.length!==s.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),u=0;u<a.length;u++){var c=a[u];if(!l(c))return!1;var d=t[c],f=n[c];if(o=r?r.call(i,d,f,c):void 0,o===!1||o===void 0&&d!==f)return!1}return!0};const jSe=wW(PSe);function HSe(e){function t(K,D,$,Q,B){for(var pe=0,re=0,ee=0,oe=0,ue,U,de=0,be=0,xe,me=xe=ue=0,Ce=0,Xe=0,Fe=0,Ue=0,at=$.length,Qe=at-1,Me,ne="",ye="",nt="",lt="",bt;Ce<at;){if(U=$.charCodeAt(Ce),Ce===Qe&&re+oe+ee+pe!==0&&(re!==0&&(U=re===47?10:47),oe=ee=pe=0,at++,Qe++),re+oe+ee+pe===0){if(Ce===Qe&&(0<Xe&&(ne=ne.replace(f,"")),0<ne.trim().length)){switch(U){case 32:case 9:case 59:case 13:case 10:break;default:ne+=$.charAt(Ce)}U=59}switch(U){case 123:for(ne=ne.trim(),ue=ne.charCodeAt(0),xe=1,Ue=++Ce;Ce<at;){switch(U=$.charCodeAt(Ce)){case 123:xe++;break;case 125:xe--;break;case 47:switch(U=$.charCodeAt(Ce+1)){case 42:case 47:e:{for(me=Ce+1;me<Qe;++me)switch($.charCodeAt(me)){case 47:if(U===42&&$.charCodeAt(me-1)===42&&Ce+2!==me){Ce=me+1;break e}break;case 10:if(U===47){Ce=me+1;break e}}Ce=me}}break;case 91:U++;case 40:U++;case 34:case 39:for(;Ce++<Qe&&$.charCodeAt(Ce)!==U;);}if(xe===0)break;Ce++}switch(xe=$.substring(Ue,Ce),ue===0&&(ue=(ne=ne.replace(d,"").trim()).charCodeAt(0)),ue){case 64:switch(0<Xe&&(ne=ne.replace(f,"")),U=ne.charCodeAt(1),U){case 100:case 109:case 115:case 45:Xe=D;break;default:Xe=P}if(xe=t(D,Xe,xe,U,B+1),Ue=xe.length,0<M&&(Xe=n(P,ne,Fe),bt=s(3,xe,Xe,D,V,N,Ue,U,B,Q),ne=Xe.join(""),bt!==void 0&&(Ue=(xe=bt.trim()).length)===0&&(U=0,xe="")),0<Ue)switch(U){case 115:ne=ne.replace(R,a);case 100:case 109:case 45:xe=ne+"{"+xe+"}";break;case 107:ne=ne.replace(w,"$1 $2"),xe=ne+"{"+xe+"}",xe=O===1||O===2&&o("@"+xe,3)?"@-webkit-"+xe+"@"+xe:"@"+xe;break;default:xe=ne+xe,Q===112&&(xe=(ye+=xe,""))}else xe="";break;default:xe=t(D,n(D,ne,Fe),xe,Q,B+1)}nt+=xe,xe=Fe=Xe=me=ue=0,ne="",U=$.charCodeAt(++Ce);break;case 125:case 59:if(ne=(0<Xe?ne.replace(f,""):ne).trim(),1<(Ue=ne.length))switch(me===0&&(ue=ne.charCodeAt(0),ue===45||96<ue&&123>ue)&&(Ue=(ne=ne.replace(" ",":")).length),0<M&&(bt=s(1,ne,D,K,V,N,ye.length,Q,B,Q))!==void 0&&(Ue=(ne=bt.trim()).length)===0&&(ne="\0\0"),ue=ne.charCodeAt(0),U=ne.charCodeAt(1),ue){case 0:break;case 64:if(U===105||U===99){lt+=ne+$.charAt(Ce);break}default:ne.charCodeAt(Ue-1)!==58&&(ye+=i(ne,ue,U,ne.charCodeAt(2)))}Fe=Xe=me=ue=0,ne="",U=$.charCodeAt(++Ce)}}switch(U){case 13:case 10:re===47?re=0:1+ue===0&&Q!==107&&0<ne.length&&(Xe=1,ne+="\0"),0<M*J&&s(0,ne,D,K,V,N,ye.length,Q,B,Q),N=1,V++;break;case 59:case 125:if(re+oe+ee+pe===0){N++;break}default:switch(N++,Me=$.charAt(Ce),U){case 9:case 32:if(oe+pe+re===0)switch(de){case 44:case 58:case 9:case 32:Me="";break;default:U!==32&&(Me=" ")}break;case 0:Me="\\0";break;case 12:Me="\\f";break;case 11:Me="\\v";break;case 38:oe+re+pe===0&&(Xe=Fe=1,Me="\f"+Me);break;case 108:if(oe+re+pe+F===0&&0<me)switch(Ce-me){case 2:de===112&&$.charCodeAt(Ce-3)===58&&(F=de);case 8:be===111&&(F=be)}break;case 58:oe+re+pe===0&&(me=Ce);break;case 44:re+ee+oe+pe===0&&(Xe=1,Me+="\r");break;case 34:case 39:re===0&&(oe=oe===U?0:oe===0?U:oe);break;case 91:oe+re+ee===0&&pe++;break;case 93:oe+re+ee===0&&pe--;break;case 41:oe+re+pe===0&&ee--;break;case 40:if(oe+re+pe===0){if(ue===0)switch(2*de+3*be){case 533:break;default:ue=1}ee++}break;case 64:re+ee+oe+pe+me+xe===0&&(xe=1);break;case 42:case 47:if(!(0<oe+pe+ee))switch(re){case 0:switch(2*U+3*$.charCodeAt(Ce+1)){case 235:re=47;break;case 220:Ue=Ce,re=42}break;case 42:U===47&&de===42&&Ue+2!==Ce&&($.charCodeAt(Ue+2)===33&&(ye+=$.substring(Ue,Ce+1)),Me="",re=0)}}re===0&&(ne+=Me)}be=de,de=U,Ce++}if(Ue=ye.length,0<Ue){if(Xe=D,0<M&&(bt=s(2,ye,Xe,K,V,N,Ue,Q,B,Q),bt!==void 0&&(ye=bt).length===0))return lt+ye+nt;if(ye=Xe.join(",")+"{"+ye+"}",O*F!==0){switch(O!==2||o(ye,2)||(F=0),F){case 111:ye=ye.replace(k,":-moz-$1")+ye;break;case 112:ye=ye.replace(Z,"::-webkit-input-$1")+ye.replace(Z,"::-moz-$1")+ye.replace(Z,":-ms-input-$1")+ye}F=0}}return lt+ye+nt}function n(K,D,$){var Q=D.trim().split(y);D=Q;var B=Q.length,pe=K.length;switch(pe){case 0:case 1:var re=0;for(K=pe===0?"":K[0]+" ";re<B;++re)D[re]=r(K,D[re],$).trim();break;default:var ee=re=0;for(D=[];re<B;++re)for(var oe=0;oe<pe;++oe)D[ee++]=r(K[oe]+" ",Q[re],$).trim()}return D}function r(K,D,$){var Q=D.charCodeAt(0);switch(33>Q&&(Q=(D=D.trim()).charCodeAt(0)),Q){case 38:return D.replace(v,"$1"+K.trim());case 58:return K.trim()+D.replace(v,"$1"+K.trim());default:if(0<1*$&&0<D.indexOf("\f"))return D.replace(v,(K.charCodeAt(0)===58?"":"$1")+K.trim())}return K+D}function i(K,D,$,Q){var B=K+";",pe=2*D+3*$+4*Q;if(pe===944){K=B.indexOf(":",9)+1;var re=B.substring(K,B.length-1).trim();return re=B.substring(0,K).trim()+re+";",O===1||O===2&&o(re,1)?"-webkit-"+re+re:re}if(O===0||O===2&&!o(B,1))return B;switch(pe){case 1015:return B.charCodeAt(10)===97?"-webkit-"+B+B:B;case 951:return B.charCodeAt(3)===116?"-webkit-"+B+B:B;case 963:return B.charCodeAt(5)===110?"-webkit-"+B+B:B;case 1009:if(B.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+B+B;case 978:return"-webkit-"+B+"-moz-"+B+B;case 1019:case 983:return"-webkit-"+B+"-moz-"+B+"-ms-"+B+B;case 883:if(B.charCodeAt(8)===45)return"-webkit-"+B+B;if(0<B.indexOf("image-set(",11))return B.replace(C,"$1-webkit-$2")+B;break;case 932:if(B.charCodeAt(4)===45)switch(B.charCodeAt(5)){case 103:return"-webkit-box-"+B.replace("-grow","")+"-webkit-"+B+"-ms-"+B.replace("grow","positive")+B;case 115:return"-webkit-"+B+"-ms-"+B.replace("shrink","negative")+B;case 98:return"-webkit-"+B+"-ms-"+B.replace("basis","preferred-size")+B}return"-webkit-"+B+"-ms-"+B+B;case 964:return"-webkit-"+B+"-ms-flex-"+B+B;case 1023:if(B.charCodeAt(8)!==99)break;return re=B.substring(B.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+re+"-webkit-"+B+"-ms-flex-pack"+re+B;case 1005:return m.test(B)?B.replace(h,":-webkit-")+B.replace(h,":-moz-")+B:B;case 1e3:switch(re=B.substring(13).trim(),D=re.indexOf("-")+1,re.charCodeAt(0)+re.charCodeAt(D)){case 226:re=B.replace(_,"tb");break;case 232:re=B.replace(_,"tb-rl");break;case 220:re=B.replace(_,"lr");break;default:return B}return"-webkit-"+B+"-ms-"+re+B;case 1017:if(B.indexOf("sticky",9)===-1)break;case 975:switch(D=(B=K).length-10,re=(B.charCodeAt(D)===33?B.substring(0,D):B).substring(K.indexOf(":",7)+1).trim(),pe=re.charCodeAt(0)+(re.charCodeAt(7)|0)){case 203:if(111>re.charCodeAt(8))break;case 115:B=B.replace(re,"-webkit-"+re)+";"+B;break;case 207:case 102:B=B.replace(re,"-webkit-"+(102<pe?"inline-":"")+"box")+";"+B.replace(re,"-webkit-"+re)+";"+B.replace(re,"-ms-"+re+"box")+";"+B}return B+";";case 938:if(B.charCodeAt(5)===45)switch(B.charCodeAt(6)){case 105:return re=B.replace("-items",""),"-webkit-"+B+"-webkit-box-"+re+"-ms-flex-"+re+B;case 115:return"-webkit-"+B+"-ms-flex-item-"+B.replace(E,"")+B;default:return"-webkit-"+B+"-ms-flex-line-pack"+B.replace("align-content","").replace(E,"")+B}break;case 973:case 989:if(B.charCodeAt(3)!==45||B.charCodeAt(4)===122)break;case 931:case 953:if(Y.test(K)===!0)return(re=K.substring(K.indexOf(":")+1)).charCodeAt(0)===115?i(K.replace("stretch","fill-available"),D,$,Q).replace(":fill-available",":stretch"):B.replace(re,"-webkit-"+re)+B.replace(re,"-moz-"+re.replace("fill-",""))+B;break;case 962:if(B="-webkit-"+B+(B.charCodeAt(5)===102?"-ms-"+B:"")+B,$+Q===211&&B.charCodeAt(13)===105&&0<B.indexOf("transform",10))return B.substring(0,B.indexOf(";",27)+1).replace(g,"$1-webkit-$2")+B}return B}function o(K,D){var $=K.indexOf(D===1?":":"{"),Q=K.substring(0,D!==3?$:10);return $=K.substring($+1,K.length-1),j(D!==2?Q:Q.replace(X,"$1"),$,D)}function a(K,D){var $=i(D,D.charCodeAt(0),D.charCodeAt(1),D.charCodeAt(2));return $!==D+";"?$.replace(I," or ($1)").substring(4):"("+D+")"}function s(K,D,$,Q,B,pe,re,ee,oe,ue){for(var U=0,de=D,be;U<M;++U)switch(be=H[U].call(c,K,de,$,Q,B,pe,re,ee,oe,ue)){case void 0:case!1:case!0:case null:break;default:de=be}if(de!==D)return de}function l(K){switch(K){case void 0:case null:M=H.length=0;break;default:if(typeof K=="function")H[M++]=K;else if(typeof K=="object")for(var D=0,$=K.length;D<$;++D)l(K[D]);else J=!!K|0}return l}function u(K){return K=K.prefix,K!==void 0&&(j=null,K?typeof K!="function"?O=1:(O=2,j=K):O=0),u}function c(K,D){var $=K;if(33>$.charCodeAt(0)&&($=$.trim()),q=$,$=[q],0<M){var Q=s(-1,D,$,$,V,N,0,0,0,0);Q!==void 0&&typeof Q=="string"&&(D=Q)}var B=t(P,$,D,0,0);return 0<M&&(Q=s(-2,B,$,$,V,N,B.length,0,0,0),Q!==void 0&&(B=Q)),q="",F=0,N=V=1,B}var d=/^\0+/g,f=/[\0\r\f]/g,h=/: */g,m=/zoo|gra/,g=/([,: ])(transform)/g,y=/,\r+?/g,v=/([\t\r\n ])*\f?&/g,w=/@(k\w+)\s*(\S*)\s*/,Z=/::(place)/g,k=/:(read-only)/g,_=/[svh]\w+-[tblr]{2}/,R=/\(\s*(.*)\s*\)/g,I=/([\s\S]*?);/g,E=/-self|flex-/g,X=/[^]*?(:[rp][el]a[\w-]+)[^]*/,Y=/stretch|:\s*\w+\-(?:conte|avail)/,C=/([^-])(image-set\()/,N=1,V=1,F=0,O=1,P=[],H=[],M=0,j=null,J=0,q="";return c.use=l,c.set=u,e!==void 0&&u(e),c}var JSe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function BSe(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var KSe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,_D=BSe(function(e){return KSe.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Mre={exports:{}},Jt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cr=typeof Symbol=="function"&&Symbol.for,aM=Cr?Symbol.for("react.element"):60103,sM=Cr?Symbol.for("react.portal"):60106,KW=Cr?Symbol.for("react.fragment"):60107,DW=Cr?Symbol.for("react.strict_mode"):60108,AW=Cr?Symbol.for("react.profiler"):60114,UW=Cr?Symbol.for("react.provider"):60109,$W=Cr?Symbol.for("react.context"):60110,lM=Cr?Symbol.for("react.async_mode"):60111,QW=Cr?Symbol.for("react.concurrent_mode"):60111,qW=Cr?Symbol.for("react.forward_ref"):60112,e3=Cr?Symbol.for("react.suspense"):60113,DSe=Cr?Symbol.for("react.suspense_list"):60120,t3=Cr?Symbol.for("react.memo"):60115,n3=Cr?Symbol.for("react.lazy"):60116,ASe=Cr?Symbol.for("react.block"):60121,USe=Cr?Symbol.for("react.fundamental"):60117,$Se=Cr?Symbol.for("react.responder"):60118,QSe=Cr?Symbol.for("react.scope"):60119;function Ao(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case aM:switch(e=e.type,e){case lM:case QW:case KW:case AW:case DW:case e3:return e;default:switch(e=e&&e.$$typeof,e){case $W:case qW:case n3:case t3:case UW:return e;default:return t}}case sM:return t}}}function Ore(e){return Ao(e)===QW}Jt.AsyncMode=lM;Jt.ConcurrentMode=QW;Jt.ContextConsumer=$W;Jt.ContextProvider=UW;Jt.Element=aM;Jt.ForwardRef=qW;Jt.Fragment=KW;Jt.Lazy=n3;Jt.Memo=t3;Jt.Portal=sM;Jt.Profiler=AW;Jt.StrictMode=DW;Jt.Suspense=e3;Jt.isAsyncMode=function(e){return Ore(e)||Ao(e)===lM};Jt.isConcurrentMode=Ore;Jt.isContextConsumer=function(e){return Ao(e)===$W};Jt.isContextProvider=function(e){return Ao(e)===UW};Jt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===aM};Jt.isForwardRef=function(e){return Ao(e)===qW};Jt.isFragment=function(e){return Ao(e)===KW};Jt.isLazy=function(e){return Ao(e)===n3};Jt.isMemo=function(e){return Ao(e)===t3};Jt.isPortal=function(e){return Ao(e)===sM};Jt.isProfiler=function(e){return Ao(e)===AW};Jt.isStrictMode=function(e){return Ao(e)===DW};Jt.isSuspense=function(e){return Ao(e)===e3};Jt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===KW||e===QW||e===AW||e===DW||e===e3||e===DSe||typeof e=="object"&&e!==null&&(e.$$typeof===n3||e.$$typeof===t3||e.$$typeof===UW||e.$$typeof===$W||e.$$typeof===qW||e.$$typeof===USe||e.$$typeof===$Se||e.$$typeof===QSe||e.$$typeof===ASe)};Jt.typeOf=Ao;Mre.exports=Jt;var qSe=Mre.exports,uM=qSe,eke={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},tke={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},nke={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},zre={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},cM={};cM[uM.ForwardRef]=nke;cM[uM.Memo]=zre;function GD(e){return uM.isMemo(e)?zre:cM[e.$$typeof]||eke}var rke=Object.defineProperty,ike=Object.getOwnPropertyNames,ID=Object.getOwnPropertySymbols,oke=Object.getOwnPropertyDescriptor,ake=Object.getPrototypeOf,WD=Object.prototype;function Pre(e,t,n){if(typeof t!="string"){if(WD){var r=ake(t);r&&r!==WD&&Pre(e,r,n)}var i=ike(t);ID&&(i=i.concat(ID(t)));for(var o=GD(e),a=GD(t),s=0;s<i.length;++s){var l=i[s];if(!tke[l]&&!(n&&n[l])&&!(a&&a[l])&&!(o&&o[l])){var u=oke(t,l);try{rke(e,l,u)}catch(c){}}}}return e}var ske=Pre;const lke=wW(ske);var na={};function Ru(){return(Ru=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ED=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},RV=function(e){return e!==null&&typeof e=="object"&&(e.toString?e.toString():Object.prototype.toString.call(e))==="[object Object]"&&!Fre.typeOf(e)},z9=Object.freeze([]),md=Object.freeze({});function Mx(e){return typeof e=="function"}function XD(e){return e.displayName||e.name||"Component"}function dM(e){return e&&typeof e.styledComponentId=="string"}var j0=typeof process!="undefined"&&na!==void 0&&(na.REACT_APP_SC_ATTR||na.SC_ATTR)||"data-styled",fM=typeof window!="undefined"&&"HTMLElement"in window,uke=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process!="undefined"&&na!==void 0&&(na.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&na.REACT_APP_SC_DISABLE_SPEEDY!==""?na.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&na.REACT_APP_SC_DISABLE_SPEEDY:na.SC_DISABLE_SPEEDY!==void 0&&na.SC_DISABLE_SPEEDY!==""&&na.SC_DISABLE_SPEEDY!=="false"&&na.SC_DISABLE_SPEEDY));function Bw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var cke=function(){function e(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}var t=e.prototype;return t.indexOfGroup=function(n){for(var r=0,i=0;i<n;i++)r+=this.groupSizes[i];return r},t.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var i=this.groupSizes,o=i.length,a=o;n>=a;)(a<<=1)<0&&Bw(16,""+n);this.groupSizes=new Uint32Array(a),this.groupSizes.set(i),this.length=a;for(var s=o;s<a;s++)this.groupSizes[s]=0}for(var l=this.indexOfGroup(n+1),u=0,c=r.length;u<c;u++)this.tag.insertRule(l,r[u])&&(this.groupSizes[n]++,l++)},t.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],i=this.indexOfGroup(n),o=i+r;this.groupSizes[n]=0;for(var a=i;a<o;a++)this.tag.deleteRule(i)}},t.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var i=this.groupSizes[n],o=this.indexOfGroup(n),a=o+i,s=o;s<a;s++)r+=this.tag.getRule(s)+`/*!sc*/
`;return r},e}(),$k=new Map,P9=new Map,qv=1,fS=function(e){if($k.has(e))return $k.get(e);for(;P9.has(qv);)qv++;var t=qv++;return $k.set(e,t),P9.set(t,e),t},dke=function(e){return P9.get(e)},fke=function(e,t){t>=qv&&(qv=t+1),$k.set(e,t),P9.set(t,e)},pke="style["+j0+'][data-styled-version="5.3.11"]',hke=new RegExp("^"+j0+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),mke=function(e,t,n){for(var r,i=n.split(","),o=0,a=i.length;o<a;o++)(r=i[o])&&e.registerName(t,r)},gke=function(e,t){for(var n=(t.textContent||"").split(`/*!sc*/
`),r=[],i=0,o=n.length;i<o;i++){var a=n[i].trim();if(a){var s=a.match(hke);if(s){var l=0|parseInt(s[1],10),u=s[2];l!==0&&(fke(u,l),mke(e,u,s[3]),e.getTag().insertRules(l,r)),r.length=0}else r.push(a)}}},bke=function(){return typeof __webpack_nonce__!="undefined"?__webpack_nonce__:null},jre=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(s){for(var l=s.childNodes,u=l.length;u>=0;u--){var c=l[u];if(c&&c.nodeType===1&&c.hasAttribute(j0))return c}}(n),o=i!==void 0?i.nextSibling:null;r.setAttribute(j0,"active"),r.setAttribute("data-styled-version","5.3.11");var a=bke();return a&&r.setAttribute("nonce",a),n.insertBefore(r,o),r},yke=function(){function e(n){var r=this.element=jre(n);r.appendChild(document.createTextNode("")),this.sheet=function(i){if(i.sheet)return i.sheet;for(var o=document.styleSheets,a=0,s=o.length;a<s;a++){var l=o[a];if(l.ownerNode===i)return l}Bw(17)}(r),this.length=0}var t=e.prototype;return t.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch(i){return!1}},t.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},t.getRule=function(n){var r=this.sheet.cssRules[n];return r!==void 0&&typeof r.cssText=="string"?r.cssText:""},e}(),vke=function(){function e(n){var r=this.element=jre(n);this.nodes=r.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(n,r){if(n<=this.length&&n>=0){var i=document.createTextNode(r),o=this.nodes[n];return this.element.insertBefore(i,o||null),this.length++,!0}return!1},t.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},t.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},e}(),xke=function(){function e(n){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},t.deleteRule=function(n){this.rules.splice(n,1),this.length--},t.getRule=function(n){return n<this.length?this.rules[n]:""},e}(),LD=fM,wke={isServer:!fM,useCSSOMInjection:!uke},Hre=function(){function e(n,r,i){n===void 0&&(n=md),r===void 0&&(r={}),this.options=Ru({},wke,{},n),this.gs=r,this.names=new Map(i),this.server=!!n.isServer,!this.server&&fM&&LD&&(LD=!1,function(o){for(var a=document.querySelectorAll(pke),s=0,l=a.length;s<l;s++){var u=a[s];u&&u.getAttribute(j0)!=="active"&&(gke(o,u),u.parentNode&&u.parentNode.removeChild(u))}}(this))}e.registerId=function(n){return fS(n)};var t=e.prototype;return t.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new e(Ru({},this.options,{},n),this.gs,r&&this.names||void 0)},t.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},t.getTag=function(){return this.tag||(this.tag=(i=(r=this.options).isServer,o=r.useCSSOMInjection,a=r.target,n=i?new xke(a):o?new yke(a):new vke(a),new cke(n)));var n,r,i,o,a},t.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},t.registerName=function(n,r){if(fS(n),this.names.has(n))this.names.get(n).add(r);else{var i=new Set;i.add(r),this.names.set(n,i)}},t.insertRules=function(n,r,i){this.registerName(n,r),this.getTag().insertRules(fS(n),i)},t.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},t.clearRules=function(n){this.getTag().clearGroup(fS(n)),this.clearNames(n)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(n){for(var r=n.getTag(),i=r.length,o="",a=0;a<i;a++){var s=dke(a);if(s!==void 0){var l=n.names.get(s),u=r.getGroup(a);if(l&&u&&l.size){var c=j0+".g"+a+'[id="'+s+'"]',d="";l!==void 0&&l.forEach(function(f){f.length>0&&(d+=f+",")}),o+=""+u+c+'{content:"'+d+`"}/*!sc*/
`}}}return o}(this)},e}(),Zke=/(a)(d)/gi,RD=function(e){return String.fromCharCode(e+(e>25?39:97))};function CV(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=RD(t%52)+n;return(RD(t%52)+n).replace(Zke,"$1-$2")}var t0=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Jre=function(e){return t0(5381,e)};function Ske(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Mx(n)&&!dM(n))return!1}return!0}var kke=Jre("5.3.11"),_ke=function(){function e(t,n,r){this.rules=t,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&Ske(t),this.componentId=n,this.baseHash=t0(kke,n),this.baseStyle=r,Hre.registerId(n)}return e.prototype.generateAndInjectStyles=function(t,n,r){var i=this.componentId,o=[];if(this.baseStyle&&o.push(this.baseStyle.generateAndInjectStyles(t,n,r)),this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(i,this.staticRulesId))o.push(this.staticRulesId);else{var a=H0(this.rules,t,n,r).join(""),s=CV(t0(this.baseHash,a)>>>0);if(!n.hasNameForId(i,s)){var l=r(a,"."+s,void 0,i);n.insertRules(i,s,l)}o.push(s),this.staticRulesId=s}else{for(var u=this.rules.length,c=t0(this.baseHash,r.hash),d="",f=0;f<u;f++){var h=this.rules[f];if(typeof h=="string")d+=h;else if(h){var m=H0(h,t,n,r),g=Array.isArray(m)?m.join(""):m;c=t0(c,g+f),d+=g}}if(d){var y=CV(c>>>0);if(!n.hasNameForId(i,y)){var v=r(d,"."+y,void 0,i);n.insertRules(i,y,v)}o.push(y)}}return o.join(" ")},e}(),Gke=/^\s*\/\/.*$/gm,Ike=[":","[",".","#"];function Bre(e){var t,n,r,i,o=e===void 0?md:e,a=o.options,s=a===void 0?md:a,l=o.plugins,u=l===void 0?z9:l,c=new HSe(s),d=[],f=function(g){function y(v){if(v)try{g(v+"}")}catch(w){}}return function(v,w,Z,k,_,R,I,E,X,Y){switch(v){case 1:if(X===0&&w.charCodeAt(0)===64)return g(w+";"),"";break;case 2:if(E===0)return w+"/*|*/";break;case 3:switch(E){case 102:case 112:return g(Z[0]+w),"";default:return w+(Y===0?"/*|*/":"")}case-2:w.split("/*|*/}").forEach(y)}}}(function(g){d.push(g)}),h=function(g,y,v){return y===0&&Ike.indexOf(v[n.length])!==-1||v.match(i)?g:"."+t};function m(g,y,v,w){w===void 0&&(w="&");var Z=g.replace(Gke,""),k=y&&v?v+" "+y+" { "+Z+" }":Z;return t=w,n=y,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),c(v||!y?"":y,k)}return c.use([].concat(u,[function(g,y,v){g===2&&v.length&&v[0].lastIndexOf(n)>0&&(v[0]=v[0].replace(r,h))},f,function(g){if(g===-2){var y=d;return d=[],y}}])),m.hash=u.length?u.reduce(function(g,y){return y.name||Bw(15),t0(g,y.name)},5381).toString():"",m}var pM=x.createContext();pM.Consumer;var hM=x.createContext(),Wke=(hM.Consumer,new Hre),VV=Bre();function Kre(){return G.useContext(pM)||Wke}function Eke(){return G.useContext(hM)||VV}function Xke(e){var t=G.useState(e.stylisPlugins),n=t[0],r=t[1],i=Kre(),o=G.useMemo(function(){var s=i;return e.sheet?s=e.sheet:e.target&&(s=s.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(s=s.reconstructWithOptions({useCSSOMInjection:!1})),s},[e.disableCSSOMInjection,e.sheet,e.target]),a=G.useMemo(function(){return Bre({options:{prefix:!e.disableVendorPrefixes},plugins:n})},[e.disableVendorPrefixes,n]);return G.useEffect(function(){jSe(n,e.stylisPlugins)||r(e.stylisPlugins)},[e.stylisPlugins]),x.createElement(pM.Provider,{value:o},x.createElement(hM.Provider,{value:a},e.children))}var Lke=function(){function e(t,n){var r=this;this.inject=function(i,o){o===void 0&&(o=VV);var a=r.name+o.hash;i.hasNameForId(r.id,a)||i.insertRules(r.id,a,o(r.rules,a,"@keyframes"))},this.toString=function(){return Bw(12,String(r.name))},this.name=t,this.id="sc-keyframes-"+t,this.rules=n}return e.prototype.getName=function(t){return t===void 0&&(t=VV),this.name+t.hash},e}(),Rke=/([A-Z])/,Cke=/([A-Z])/g,Vke=/^ms-/,Yke=function(e){return"-"+e.toLowerCase()};function CD(e){return Rke.test(e)?e.replace(Cke,Yke).replace(Vke,"-ms-"):e}var VD=function(e){return e==null||e===!1||e===""};function H0(e,t,n,r){if(Array.isArray(e)){for(var i,o=[],a=0,s=e.length;a<s;a+=1)(i=H0(e[a],t,n,r))!==""&&(Array.isArray(i)?o.push.apply(o,i):o.push(i));return o}if(VD(e))return"";if(dM(e))return"."+e.styledComponentId;if(Mx(e)){if(typeof(u=e)!="function"||u.prototype&&u.prototype.isReactComponent||!t)return e;var l=e(t);return H0(l,t,n,r)}var u;return e instanceof Lke?n?(e.inject(n,r),e.getName(r)):e:RV(e)?function c(d,f){var h,m,g=[];for(var y in d)d.hasOwnProperty(y)&&!VD(d[y])&&(Array.isArray(d[y])&&d[y].isCss||Mx(d[y])?g.push(CD(y)+":",d[y],";"):RV(d[y])?g.push.apply(g,c(d[y],y)):g.push(CD(y)+": "+(h=y,(m=d[y])==null||typeof m=="boolean"||m===""?"":typeof m!="number"||m===0||h in JSe||h.startsWith("--")?String(m).trim():m+"px")+";"));return f?[f+" {"].concat(g,["}"]):g}(e):e.toString()}var YD=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function Tke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Mx(e)||RV(e)?YD(H0(ED(z9,[e].concat(n)))):n.length===0&&e.length===1&&typeof e[0]=="string"?e:YD(H0(ED(e,n)))}var Nke=function(e,t,n){return n===void 0&&(n=md),e.theme!==n.theme&&e.theme||t||n.theme},Fke=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Mke=/(^-|-$)/g;function rL(e){return e.replace(Fke,"-").replace(Mke,"")}var Oke=function(e){return CV(Jre(e)>>>0)};function pS(e){return typeof e=="string"&&!0}var YV=function(e){return typeof e=="function"||typeof e=="object"&&e!==null&&!Array.isArray(e)},zke=function(e){return e!=="__proto__"&&e!=="constructor"&&e!=="prototype"};function Pke(e,t,n){var r=e[n];YV(t)&&YV(r)?Dre(r,t):e[n]=t}function Dre(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];if(YV(a))for(var s in a)zke(s)&&Pke(e,a[s],s)}return e}var Are=x.createContext();Are.Consumer;var iL={};function Ure(e,t,n){var r=dM(e),i=!pS(e),o=t.attrs,a=o===void 0?z9:o,s=t.componentId,l=s===void 0?function(w,Z){var k=typeof w!="string"?"sc":rL(w);iL[k]=(iL[k]||0)+1;var _=k+"-"+Oke("5.3.11"+k+iL[k]);return Z?Z+"-"+_:_}(t.displayName,t.parentComponentId):s,u=t.displayName,c=u===void 0?function(w){return pS(w)?"styled."+w:"Styled("+XD(w)+")"}(e):u,d=t.displayName&&t.componentId?rL(t.displayName)+"-"+t.componentId:t.componentId||l,f=r&&e.attrs?Array.prototype.concat(e.attrs,a).filter(Boolean):a,h=t.shouldForwardProp;r&&e.shouldForwardProp&&(h=t.shouldForwardProp?function(w,Z,k){return e.shouldForwardProp(w,Z,k)&&t.shouldForwardProp(w,Z,k)}:e.shouldForwardProp);var m,g=new _ke(n,d,r?e.componentStyle:void 0),y=g.isStatic&&a.length===0,v=function(w,Z){return function(k,_,R,I){var E=k.attrs,X=k.componentStyle,Y=k.defaultProps,C=k.foldedComponentIds,N=k.shouldForwardProp,V=k.styledComponentId,F=k.target,O=function(Q,B,pe){Q===void 0&&(Q=md);var re=Ru({},B,{theme:Q}),ee={};return pe.forEach(function(oe){var ue,U,de,be=oe;for(ue in Mx(be)&&(be=be(re)),be)re[ue]=ee[ue]=ue==="className"?(U=ee[ue],de=be[ue],U&&de?U+" "+de:U||de):be[ue]}),[re,ee]}(Nke(_,G.useContext(Are),Y)||md,_,E),P=O[0],H=O[1],M=function(Q,B,pe,re){var ee=Kre(),oe=Eke(),ue=B?Q.generateAndInjectStyles(md,ee,oe):Q.generateAndInjectStyles(pe,ee,oe);return ue}(X,I,P),j=R,J=H.$as||_.$as||H.as||_.as||F,q=pS(J),K=H!==_?Ru({},_,{},H):_,D={};for(var $ in K)$[0]!=="$"&&$!=="as"&&($==="forwardedAs"?D.as=K[$]:(N?N($,_D,J):!q||_D($))&&(D[$]=K[$]));return _.style&&H.style!==_.style&&(D.style=Ru({},_.style,{},H.style)),D.className=Array.prototype.concat(C,V,M!==V?M:null,_.className,H.className).filter(Boolean).join(" "),D.ref=j,G.createElement(J,D)}(m,w,Z,y)};return v.displayName=c,(m=x.forwardRef(v)).attrs=f,m.componentStyle=g,m.displayName=c,m.shouldForwardProp=h,m.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):z9,m.styledComponentId=d,m.target=r?e.target:e,m.withComponent=function(w){var Z=t.componentId,k=function(R,I){if(R==null)return{};var E,X,Y={},C=Object.keys(R);for(X=0;X<C.length;X++)E=C[X],I.indexOf(E)>=0||(Y[E]=R[E]);return Y}(t,["componentId"]),_=Z&&Z+"-"+(pS(w)?w:rL(XD(w)));return Ure(w,Ru({},k,{attrs:f,componentId:_}),n)},Object.defineProperty(m,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(w){this._foldedDefaultProps=r?Dre({},e.defaultProps,w):w}}),Object.defineProperty(m,"toString",{value:function(){return"."+m.styledComponentId}}),i&&lke(m,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),m}var Ae=function(e){return function t(n,r,i){if(i===void 0&&(i=md),!Fre.isValidElementType(r))return Bw(1,String(r));var o=function(){return n(r,i,Tke.apply(void 0,arguments))};return o.withConfig=function(a){return t(n,r,Ru({},i,{},a))},o.attrs=function(a){return t(n,r,Ru({},i,{attrs:Array.prototype.concat(i.attrs,a).filter(Boolean)}))},o}(Ure,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(e){Ae[e]=Ae(e)});var oL={},jke=Object.defineProperty,Hke=(e,t,n)=>t in e?jke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_t=(e,t,n)=>(Hke(e,typeof t!="symbol"?t+"":t,n),n);function j9(e,t){return j9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},j9(e,t)}function $re(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,j9(e,t)}function $e(){return $e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$e.apply(this,arguments)}function hs(e){return hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hs(e)}function Jke(e,t){if(hs(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(hs(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qre(e){var t=Jke(e,"string");return hs(t)==="symbol"?t:String(t)}function Ws(e,t,n){return t=Qre(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ND(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TD(Object(n),!0).forEach(function(r){Ws(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TD(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zi(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var FD=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),MD=function(){return Math.random().toString(36).substring(7).split("").join(".")},OD={INIT:"@@redux/INIT"+MD(),REPLACE:"@@redux/REPLACE"+MD()};function Bke(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function qre(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(zi(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(zi(1));return n(qre)(e,t)}if(typeof e!="function")throw new Error(zi(2));var i=e,o=t,a=[],s=a,l=!1;function u(){s===a&&(s=a.slice())}function c(){if(l)throw new Error(zi(3));return o}function d(g){if(typeof g!="function")throw new Error(zi(4));if(l)throw new Error(zi(5));var y=!0;return u(),s.push(g),function(){if(y){if(l)throw new Error(zi(6));y=!1,u();var v=s.indexOf(g);s.splice(v,1),a=null}}}function f(g){if(!Bke(g))throw new Error(zi(7));if(typeof g.type>"u")throw new Error(zi(8));if(l)throw new Error(zi(9));try{l=!0,o=i(o,g)}finally{l=!1}for(var y=a=s,v=0;v<y.length;v++){var w=y[v];w()}return g}function h(g){if(typeof g!="function")throw new Error(zi(10));i=g,f({type:OD.REPLACE})}function m(){var g,y=d;return g={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(zi(11));function w(){v.next&&v.next(c())}w();var Z=y(w);return{unsubscribe:Z}}},g[FD]=function(){return this},g}return f({type:OD.INIT}),r={dispatch:f,subscribe:d,getState:c,replaceReducer:h},r[FD]=m,r}function zD(e,t){return function(){return t(e.apply(this,arguments))}}function PD(e,t){if(typeof e=="function")return zD(e,t);if(typeof e!="object"||e===null)throw new Error(zi(16));var n={};for(var r in e){var i=e[r];typeof i=="function"&&(n[r]=zD(i,t))}return n}function eie(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Kke(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),o=function(){throw new Error(zi(15))},a={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},s=t.map(function(l){return l(a)});return o=eie.apply(void 0,s)(i.dispatch),ND(ND({},i),{},{dispatch:o})}}}var n0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fe={},Dke={get exports(){return fe},set exports(e){fe=e}},TV={},Ake={get exports(){return TV},set exports(e){TV=e}},Ft={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jD;function Uke(){if(jD)return Ft;jD=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,c=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,f=e?Symbol.for("react.suspense_list"):60120,h=e?Symbol.for("react.memo"):60115,m=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,y=e?Symbol.for("react.fundamental"):60117,v=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function Z(_){if(typeof _=="object"&&_!==null){var R=_.$$typeof;switch(R){case t:switch(_=_.type,_){case l:case u:case r:case o:case i:case d:return _;default:switch(_=_&&_.$$typeof,_){case s:case c:case m:case h:case a:return _;default:return R}}case n:return R}}}function k(_){return Z(_)===u}return Ft.AsyncMode=l,Ft.ConcurrentMode=u,Ft.ContextConsumer=s,Ft.ContextProvider=a,Ft.Element=t,Ft.ForwardRef=c,Ft.Fragment=r,Ft.Lazy=m,Ft.Memo=h,Ft.Portal=n,Ft.Profiler=o,Ft.StrictMode=i,Ft.Suspense=d,Ft.isAsyncMode=function(_){return k(_)||Z(_)===l},Ft.isConcurrentMode=k,Ft.isContextConsumer=function(_){return Z(_)===s},Ft.isContextProvider=function(_){return Z(_)===a},Ft.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===t},Ft.isForwardRef=function(_){return Z(_)===c},Ft.isFragment=function(_){return Z(_)===r},Ft.isLazy=function(_){return Z(_)===m},Ft.isMemo=function(_){return Z(_)===h},Ft.isPortal=function(_){return Z(_)===n},Ft.isProfiler=function(_){return Z(_)===o},Ft.isStrictMode=function(_){return Z(_)===i},Ft.isSuspense=function(_){return Z(_)===d},Ft.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===r||_===u||_===o||_===i||_===d||_===f||typeof _=="object"&&_!==null&&(_.$$typeof===m||_.$$typeof===h||_.$$typeof===a||_.$$typeof===s||_.$$typeof===c||_.$$typeof===y||_.$$typeof===v||_.$$typeof===w||_.$$typeof===g)},Ft.typeOf=Z,Ft}var HD;function $ke(){return HD||(HD=1,function(e){e.exports=Uke()}(Ake)),TV}var aL,JD;function Qke(){if(JD)return aL;JD=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return aL=e,aL}var sL,BD;function qke(){if(BD)return sL;BD=1;var e=Qke();function t(){}function n(){}return n.resetWarningCache=t,sL=function(){function r(a,s,l,u,c,d){if(d!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return o.PropTypes=o,o},sL}Dke.exports=qke()();var tie=x.createContext(null);function e_e(e){e()}var nie=e_e,t_e=function(e){return nie=e},n_e=function(){return nie};function r_e(){var e=n_e(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e(function(){for(var r=t;r;)r.callback(),r=r.next})},get:function(){for(var r=[],i=t;i;)r.push(i),i=i.next;return r},subscribe:function(r){var i=!0,o=n={callback:r,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){!i||t===null||(i=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var KD={notify:function(){},get:function(){return[]}};function rie(e,t){var n,r=KD;function i(d){return l(),r.subscribe(d)}function o(){r.notify()}function a(){c.onStateChange&&c.onStateChange()}function s(){return!!n}function l(){n||(n=t?t.addNestedSub(a):e.subscribe(a),r=r_e())}function u(){n&&(n(),n=void 0,r.clear(),r=KD)}var c={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:a,isSubscribed:s,trySubscribe:l,tryUnsubscribe:u,getListeners:function(){return r}};return c}var iie=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?G.useLayoutEffect:G.useEffect;function i_e(e){var t=e.store,n=e.context,r=e.children,i=G.useMemo(function(){var s=rie(t);return{store:t,subscription:s}},[t]),o=G.useMemo(function(){return t.getState()},[t]);iie(function(){var s=i.subscription;return s.onStateChange=s.notifyNestedSubs,s.trySubscribe(),o!==t.getState()&&s.notifyNestedSubs(),function(){s.tryUnsubscribe(),s.onStateChange=null}},[i,o]);var a=n||tie;return x.createElement(a.Provider,{value:i},r)}function H9(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var mM=$ke(),o_e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a_e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s_e={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},oie={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},gM={};gM[mM.ForwardRef]=s_e;gM[mM.Memo]=oie;function DD(e){return mM.isMemo(e)?oie:gM[e.$$typeof]||o_e}var l_e=Object.defineProperty,u_e=Object.getOwnPropertyNames,AD=Object.getOwnPropertySymbols,c_e=Object.getOwnPropertyDescriptor,d_e=Object.getPrototypeOf,UD=Object.prototype;function aie(e,t,n){if(typeof t!="string"){if(UD){var r=d_e(t);r&&r!==UD&&aie(e,r,n)}var i=u_e(t);AD&&(i=i.concat(AD(t)));for(var o=DD(e),a=DD(t),s=0;s<i.length;++s){var l=i[s];if(!a_e[l]&&!(n&&n[l])&&!(a&&a[l])&&!(o&&o[l])){var u=c_e(t,l);try{l_e(e,l,u)}catch(c){}}}}return e}var $D=aie,NV={},f_e={get exports(){return NV},set exports(e){NV=e}},Bt={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QD;function p_e(){if(QD)return Bt;QD=1;var e=60103,t=60106,n=60107,r=60108,i=60114,o=60109,a=60110,s=60112,l=60113,u=60120,c=60115,d=60116,f=60121,h=60122,m=60117,g=60129,y=60131;if(typeof Symbol=="function"&&Symbol.for){var v=Symbol.for;e=v("react.element"),t=v("react.portal"),n=v("react.fragment"),r=v("react.strict_mode"),i=v("react.profiler"),o=v("react.provider"),a=v("react.context"),s=v("react.forward_ref"),l=v("react.suspense"),u=v("react.suspense_list"),c=v("react.memo"),d=v("react.lazy"),f=v("react.block"),h=v("react.server.block"),m=v("react.fundamental"),g=v("react.debug_trace_mode"),y=v("react.legacy_hidden")}function w(V){if(typeof V=="object"&&V!==null){var F=V.$$typeof;switch(F){case e:switch(V=V.type,V){case n:case i:case r:case l:case u:return V;default:switch(V=V&&V.$$typeof,V){case a:case s:case d:case c:case o:return V;default:return F}}case t:return F}}}var Z=o,k=e,_=s,R=n,I=d,E=c,X=t,Y=i,C=r,N=l;return Bt.ContextConsumer=a,Bt.ContextProvider=Z,Bt.Element=k,Bt.ForwardRef=_,Bt.Fragment=R,Bt.Lazy=I,Bt.Memo=E,Bt.Portal=X,Bt.Profiler=Y,Bt.StrictMode=C,Bt.Suspense=N,Bt.isAsyncMode=function(){return!1},Bt.isConcurrentMode=function(){return!1},Bt.isContextConsumer=function(V){return w(V)===a},Bt.isContextProvider=function(V){return w(V)===o},Bt.isElement=function(V){return typeof V=="object"&&V!==null&&V.$$typeof===e},Bt.isForwardRef=function(V){return w(V)===s},Bt.isFragment=function(V){return w(V)===n},Bt.isLazy=function(V){return w(V)===d},Bt.isMemo=function(V){return w(V)===c},Bt.isPortal=function(V){return w(V)===t},Bt.isProfiler=function(V){return w(V)===i},Bt.isStrictMode=function(V){return w(V)===r},Bt.isSuspense=function(V){return w(V)===l},Bt.isValidElementType=function(V){return typeof V=="string"||typeof V=="function"||V===n||V===i||V===g||V===r||V===l||V===u||V===y||typeof V=="object"&&V!==null&&(V.$$typeof===d||V.$$typeof===c||V.$$typeof===o||V.$$typeof===a||V.$$typeof===s||V.$$typeof===m||V.$$typeof===f||V[0]===h)},Bt.typeOf=w,Bt}(function(e){e.exports=p_e()})(f_e);var h_e=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],m_e=["reactReduxForwardedRef"],g_e=[],b_e=[null,null];function y_e(e,t){var n=e[1];return[t.payload,n+1]}function qD(e,t,n){iie(function(){return e.apply(void 0,t)},n)}function v_e(e,t,n,r,i,o,a){e.current=r,t.current=i,n.current=!1,o.current&&(o.current=null,a())}function x_e(e,t,n,r,i,o,a,s,l,u){if(e){var c=!1,d=null,f=function(){if(!c){var m=t.getState(),g,y;try{g=r(m,i.current)}catch(v){y=v,d=v}y||(d=null),g===o.current?a.current||l():(o.current=g,s.current=g,a.current=!0,u({type:"STORE_UPDATED",payload:{error:y}}))}};n.onStateChange=f,n.trySubscribe(),f();var h=function(){if(c=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d};return h}}var w_e=function(){return[null,0]};function Z_e(e,t){t===void 0&&(t={});var n=t,r=n.getDisplayName,i=r===void 0?function(Z){return"ConnectAdvanced("+Z+")"}:r,o=n.methodName,a=o===void 0?"connectAdvanced":o,s=n.renderCountProp,l=s===void 0?void 0:s,u=n.shouldHandleStateChanges,c=u===void 0?!0:u,d=n.storeKey,f=d===void 0?"store":d;n.withRef;var h=n.forwardRef,m=h===void 0?!1:h,g=n.context,y=g===void 0?tie:g,v=H9(n,h_e),w=y;return function(Z){var k=Z.displayName||Z.name||"Component",_=i(k),R=$e({},v,{getDisplayName:i,methodName:a,renderCountProp:l,shouldHandleStateChanges:c,storeKey:f,displayName:_,wrappedComponentName:k,WrappedComponent:Z}),I=v.pure;function E(V){return e(V.dispatch,R)}var X=I?G.useMemo:function(V){return V()};function Y(V){var F=G.useMemo(function(){var Xe=V.reactReduxForwardedRef,Fe=H9(V,m_e);return[V.context,Xe,Fe]},[V]),O=F[0],P=F[1],H=F[2],M=G.useMemo(function(){return O&&O.Consumer&&NV.isContextConsumer(x.createElement(O.Consumer,null))?O:w},[O,w]),j=G.useContext(M),J=!!V.store&&!!V.store.getState&&!!V.store.dispatch;j&&j.store;var q=J?V.store:j.store,K=G.useMemo(function(){return E(q)},[q]),D=G.useMemo(function(){if(!c)return b_e;var Xe=rie(q,J?null:j.subscription),Fe=Xe.notifyNestedSubs.bind(Xe);return[Xe,Fe]},[q,J,j]),$=D[0],Q=D[1],B=G.useMemo(function(){return J?j:$e({},j,{subscription:$})},[J,j,$]),pe=G.useReducer(y_e,g_e,w_e),re=pe[0],ee=re[0],oe=pe[1];if(ee&&ee.error)throw ee.error;var ue=G.useRef(),U=G.useRef(H),de=G.useRef(),be=G.useRef(!1),xe=X(function(){return de.current&&H===U.current?de.current:K(q.getState(),H)},[q,ee,H]);qD(v_e,[U,ue,be,H,xe,de,Q]),qD(x_e,[c,q,$,K,U,ue,be,de,Q,oe],[q,$,K]);var me=G.useMemo(function(){return x.createElement(Z,$e({},xe,{ref:P}))},[P,Z,xe]),Ce=G.useMemo(function(){return c?x.createElement(M.Provider,{value:B},me):me},[M,me,B]);return Ce}var C=I?x.memo(Y):Y;if(C.WrappedComponent=Z,C.displayName=Y.displayName=_,m){var N=x.forwardRef(function(V,F){return x.createElement(C,$e({},V,{reactReduxForwardedRef:F}))});return N.displayName=_,N.WrappedComponent=Z,$D(N,Z)}return $D(C,Z)}}function eA(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function lL(e,t){if(eA(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!eA(e[n[i]],t[n[i]]))return!1;return!0}function S_e(e,t){var n={},r=function(o){var a=e[o];typeof a=="function"&&(n[o]=function(){return t(a.apply(void 0,arguments))})};for(var i in e)r(i);return n}function bM(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function tA(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function sie(e,t){return function(n,r){r.displayName;var i=function(o,a){return i.dependsOnOwnProps?i.mapToProps(o,a):i.mapToProps(o)};return i.dependsOnOwnProps=!0,i.mapToProps=function(o,a){i.mapToProps=e,i.dependsOnOwnProps=tA(e);var s=i(o,a);return typeof s=="function"&&(i.mapToProps=s,i.dependsOnOwnProps=tA(s),s=i(o,a)),s},i}}function k_e(e){return typeof e=="function"?sie(e):void 0}function __e(e){return e?void 0:bM(function(t){return{dispatch:t}})}function G_e(e){return e&&typeof e=="object"?bM(function(t){return S_e(e,t)}):void 0}const I_e=[k_e,__e,G_e];function W_e(e){return typeof e=="function"?sie(e):void 0}function E_e(e){return e?void 0:bM(function(){return{}})}const X_e=[W_e,E_e];function L_e(e,t,n){return $e({},n,e,t)}function R_e(e){return function(t,n){n.displayName;var r=n.pure,i=n.areMergedPropsEqual,o=!1,a;return function(s,l,u){var c=e(s,l,u);return o?(!r||!i(c,a))&&(a=c):(o=!0,a=c),a}}}function C_e(e){return typeof e=="function"?R_e(e):void 0}function V_e(e){return e?void 0:function(){return L_e}}const Y_e=[C_e,V_e];var T_e=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function N_e(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function F_e(e,t,n,r,i){var o=i.areStatesEqual,a=i.areOwnPropsEqual,s=i.areStatePropsEqual,l=!1,u,c,d,f,h;function m(Z,k){return u=Z,c=k,d=e(u,c),f=t(r,c),h=n(d,f,c),l=!0,h}function g(){return d=e(u,c),t.dependsOnOwnProps&&(f=t(r,c)),h=n(d,f,c),h}function y(){return e.dependsOnOwnProps&&(d=e(u,c)),t.dependsOnOwnProps&&(f=t(r,c)),h=n(d,f,c),h}function v(){var Z=e(u,c),k=!s(Z,d);return d=Z,k&&(h=n(d,f,c)),h}function w(Z,k){var _=!a(k,c),R=!o(Z,u,k,c);return u=Z,c=k,_&&R?g():_?y():R?v():h}return function(Z,k){return l?w(Z,k):m(Z,k)}}function M_e(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=H9(t,T_e),a=n(e,o),s=r(e,o),l=i(e,o),u=o.pure?F_e:N_e;return u(a,s,l,e,o)}var O_e=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function uL(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(o,a){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+a.wrappedComponentName+".")}}function z_e(e,t){return e===t}function P_e(e){var t={},n=t.connectHOC,r=n===void 0?Z_e:n,i=t.mapStateToPropsFactories,o=i===void 0?X_e:i,a=t.mapDispatchToPropsFactories,s=a===void 0?I_e:a,l=t.mergePropsFactories,u=l===void 0?Y_e:l,c=t.selectorFactory,d=c===void 0?M_e:c;return function(f,h,m,g){g===void 0&&(g={});var y=g,v=y.pure,w=v===void 0?!0:v,Z=y.areStatesEqual,k=Z===void 0?z_e:Z,_=y.areOwnPropsEqual,R=_===void 0?lL:_,I=y.areStatePropsEqual,E=I===void 0?lL:I,X=y.areMergedPropsEqual,Y=X===void 0?lL:X,C=H9(y,O_e),N=uL(f,o,"mapStateToProps"),V=uL(h,s,"mapDispatchToProps"),F=uL(m,u,"mergeProps");return r(d,$e({methodName:"connect",getDisplayName:function(O){return"Connect("+O+")"},shouldHandleStateChanges:!!f,initMapStateToProps:N,initMapDispatchToProps:V,initMergeProps:F,pure:w,areStatesEqual:k,areOwnPropsEqual:R,areStatePropsEqual:E,areMergedPropsEqual:Y},C))}}const lie=P_e();t_e(qn.unstable_batchedUpdates);function j_e(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function uie(e,t){var n=G.useState(function(){return{inputs:t,result:e()}})[0],r=G.useRef(!0),i=G.useRef(n),o=r.current||!!(t&&i.current.inputs&&j_e(t,i.current.inputs)),a=o?i.current:{inputs:t,result:e()};return G.useEffect(function(){r.current=!1,i.current=a},[a]),a.result}function H_e(e,t){return uie(function(){return e},t)}var Wt=uie,Je=H_e,J_e="Invariant failed";function B_e(e,t){throw new Error(J_e)}var as=function(e){var t=e.top,n=e.right,r=e.bottom,i=e.left,o=n-i,a=r-t,s={top:t,right:n,bottom:r,left:i,width:o,height:a,x:i,y:t,center:{x:(n+i)/2,y:(r+t)/2}};return s},yM=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},nA=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},K_e=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},cL={top:0,right:0,bottom:0,left:0},vM=function(e){var t=e.borderBox,n=e.margin,r=n===void 0?cL:n,i=e.border,o=i===void 0?cL:i,a=e.padding,s=a===void 0?cL:a,l=as(yM(t,r)),u=as(nA(t,o)),c=as(nA(u,s));return{marginBox:l,borderBox:as(t),paddingBox:u,contentBox:c,margin:r,border:o,padding:s}},qo=function(e){var t=e.slice(0,-2),n=e.slice(-2);if(n!=="px")return 0;var r=Number(t);return isNaN(r)&&B_e(),r},D_e=function(){return{x:window.pageXOffset,y:window.pageYOffset}},J9=function(e,t){var n=e.borderBox,r=e.border,i=e.margin,o=e.padding,a=K_e(n,t);return vM({borderBox:a,border:r,margin:i,padding:o})},B9=function(e,t){return t===void 0&&(t=D_e()),J9(e,t)},cie=function(e,t){var n={top:qo(t.marginTop),right:qo(t.marginRight),bottom:qo(t.marginBottom),left:qo(t.marginLeft)},r={top:qo(t.paddingTop),right:qo(t.paddingRight),bottom:qo(t.paddingBottom),left:qo(t.paddingLeft)},i={top:qo(t.borderTopWidth),right:qo(t.borderRightWidth),bottom:qo(t.borderBottomWidth),left:qo(t.borderLeftWidth)};return vM({borderBox:e,margin:n,padding:r,border:i})},die=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return cie(t,n)},rA=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function A_e(e,t){return!!(e===t||rA(e)&&rA(t))}function U_e(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!A_e(e[n],t[n]))return!1;return!0}function Ir(e,t){t===void 0&&(t=U_e);var n,r=[],i,o=!1;function a(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return o&&n===this&&t(s,r)||(i=e.apply(this,s),o=!0,n=this,r=s),i}return a}var $_e=function(e){var t=[],n=null,r=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];t=o,!n&&(n=requestAnimationFrame(function(){n=null,e.apply(void 0,t)}))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r};const Ox=$_e;var fie=G.createContext({head:document.head,body:document.body}),Es=function(){return G.useContext(fie)},xM=fie.Provider;function pie(e,t){}pie.bind(null,"warn");pie.bind(null,"error");function gd(){}function Q_e(e,t){return $e({},e,{},t)}function da(e,t,n){var r=t.map(function(i){var o=Q_e(n,i.options);return e.addEventListener(i.eventName,i.fn,o),function(){e.removeEventListener(i.eventName,i.fn,o)}});return function(){r.forEach(function(i){i()})}}var q_e="Invariant failed";function K9(e){this.message=e}K9.prototype.toString=function(){return this.message};function Ge(e,t){throw new K9(q_e)}var e9e=function(e){$re(t,e);function t(){for(var r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o))||this,r.callbacks=null,r.unbind=gd,r.onWindowError=function(s){var l=r.getCallbacks();l.isDragging()&&l.tryAbort();var u=s.error;u instanceof K9&&s.preventDefault()},r.getCallbacks=function(){if(!r.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return r.callbacks},r.setCallbacks=function(s){r.callbacks=s},r}var n=t.prototype;return n.componentDidMount=function(){this.unbind=da(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(r){if(r instanceof K9){this.setState({});return}throw r},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(x.Component),t9e=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,D9=function(e){return e+1},n9e=function(e){return`
  You have lifted an item in position `+D9(e.source.index)+`
`},hie=function(e,t){var n=e.droppableId===t.droppableId,r=D9(e.index),i=D9(t.index);return n?`
      You have moved the item from position `+r+`
      to position `+i+`
    `:`
    You have moved the item from position `+r+`
    in list `+e.droppableId+`
    to list `+t.droppableId+`
    in position `+i+`
  `},mie=function(e,t,n){var r=t.droppableId===n.droppableId;return r?`
      The item `+e+`
      has been combined with `+n.draggableId:`
      The item `+e+`
      in list `+t.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},r9e=function(e){var t=e.destination;if(t)return hie(e.source,t);var n=e.combine;return n?mie(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},iA=function(e){return`
  The item has returned to its starting position
  of `+D9(e.index)+`
`},i9e=function(e){if(e.reason==="CANCEL")return`
      Movement cancelled.
      `+iA(e.source)+`
    `;var t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      `+hie(e.source,t)+`
    `:n?`
      You have dropped the item.
      `+mie(e.draggableId,e.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+iA(e.source)+`
  `},Qk={dragHandleUsageInstructions:t9e,onDragStart:n9e,onDragUpdate:r9e,onDragEnd:i9e},Er={x:0,y:0},Fr=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},Wo=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},bd=function(e,t){return e.x===t.x&&e.y===t.y},Ug=function(e){return{x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}},Mp=function(e,t,n){var r;return n===void 0&&(n=0),r={},r[e]=t,r[e==="x"?"y":"x"]=n,r},zx=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},oA=function(e,t){return Math.min.apply(Math,t.map(function(n){return zx(e,n)}))},gie=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},o9e=function(e,t){var n=as({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n},Kw=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},aA=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},a9e={top:0,right:0,bottom:0,left:0},s9e=function(e,t){return t?Kw(e,t.scroll.diff.displacement):e},l9e=function(e,t,n){if(n&&n.increasedBy){var r;return $e({},e,(r={},r[t.end]=e[t.end]+n.increasedBy[t.line],r))}return e},u9e=function(e,t){return t&&t.shouldClipSubject?o9e(t.pageMarginBox,e):as(e)},J0=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,i=e.frame,o=s9e(t.marginBox,i),a=l9e(o,r,n),s=u9e(a,i);return{page:t,withPlaceholder:n,active:s}},wM=function(e,t){e.frame||Ge();var n=e.frame,r=Wo(t,n.scroll.initial),i=Ug(r),o=$e({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}}),a=J0({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o}),s=$e({},e,{frame:o,subject:a});return s};function A9(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function ZM(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function sf(e,t){if(e.find)return e.find(t);var n=ZM(e,t);if(n!==-1)return e[n]}function bie(e){return Array.prototype.slice.call(e)}var yie=Ir(function(e){return e.reduce(function(t,n){return t[n.descriptor.id]=n,t},{})}),vie=Ir(function(e){return e.reduce(function(t,n){return t[n.descriptor.id]=n,t},{})}),r3=Ir(function(e){return A9(e)}),c9e=Ir(function(e){return A9(e)}),$g=Ir(function(e,t){var n=c9e(t).filter(function(r){return e===r.descriptor.droppableId}).sort(function(r,i){return r.descriptor.index-i.descriptor.index});return n});function SM(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function i3(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var o3=Ir(function(e,t){return t.filter(function(n){return n.descriptor.id!==e.descriptor.id})}),d9e=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.insideDestination,o=e.previousImpact;if(!r.isCombineEnabled)return null;var a=SM(o);if(!a)return null;function s(g){var y={type:"COMBINE",combine:{draggableId:g,droppableId:r.descriptor.id}};return $e({},o,{at:y})}var l=o.displaced.all,u=l.length?l[0]:null;if(t)return u?s(u):null;var c=o3(n,i);if(!u){if(!c.length)return null;var d=c[c.length-1];return s(d.descriptor.id)}var f=ZM(c,function(g){return g.descriptor.id===u});f===-1&&Ge();var h=f-1;if(h<0)return null;var m=c[h];return s(m.descriptor.id)},Qg=function(e,t){return e.descriptor.droppableId===t.descriptor.id},xie={point:Er,value:0},Px={invisible:{},visible:{},all:[]},f9e={displaced:Px,displacedBy:xie,at:null},ba=function(e,t){return function(n){return e<=n&&n<=t}},wie=function(e){var t=ba(e.top,e.bottom),n=ba(e.left,e.right);return function(r){var i=t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right);if(i)return!0;var o=t(r.top)||t(r.bottom),a=n(r.left)||n(r.right),s=o&&a;if(s)return!0;var l=r.top<e.top&&r.bottom>e.bottom,u=r.left<e.left&&r.right>e.right,c=l&&u;if(c)return!0;var d=l&&a||u&&o;return d}},p9e=function(e){var t=ba(e.top,e.bottom),n=ba(e.left,e.right);return function(r){var i=t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right);return i}},kM={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Zie={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},h9e=function(e){return function(t){var n=ba(t.top,t.bottom),r=ba(t.left,t.right);return function(i){return e===kM?n(i.top)&&n(i.bottom):r(i.left)&&r(i.right)}}},m9e=function(e,t){var n=t.frame?t.frame.scroll.diff.displacement:Er;return Kw(e,n)},g9e=function(e,t,n){return t.subject.active?n(t.subject.active)(e):!1},b9e=function(e,t,n){return n(t)(e)},_M=function(e){var t=e.target,n=e.destination,r=e.viewport,i=e.withDroppableDisplacement,o=e.isVisibleThroughFrameFn,a=i?m9e(t,n):t;return g9e(a,n,o)&&b9e(a,r,o)},y9e=function(e){return _M($e({},e,{isVisibleThroughFrameFn:wie}))},Sie=function(e){return _M($e({},e,{isVisibleThroughFrameFn:p9e}))},v9e=function(e){return _M($e({},e,{isVisibleThroughFrameFn:h9e(e.destination.axis)}))},x9e=function(e,t,n){if(typeof n=="boolean")return n;if(!t)return!0;var r=t.invisible,i=t.visible;if(r[e])return!1;var o=i[e];return o?o.shouldAnimate:!0};function w9e(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return as(yM(n,r))}function jx(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,i=e.viewport,o=e.forceShouldAnimate,a=e.last;return t.reduce(function(s,l){var u=w9e(l,r),c=l.descriptor.id;s.all.push(c);var d=y9e({target:u,destination:n,viewport:i,withDroppableDisplacement:!0});if(!d)return s.invisible[l.descriptor.id]=!0,s;var f=x9e(c,a,o),h={draggableId:c,shouldAnimate:f};return s.visible[c]=h,s},{all:[],visible:{},invisible:{}})}function Z9e(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function sA(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,i=e.destination,o=Z9e(t,{inHomeList:n});return{displaced:Px,displacedBy:r,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:o}}}}function U9(e){var t=e.draggable,n=e.insideDestination,r=e.destination,i=e.viewport,o=e.displacedBy,a=e.last,s=e.index,l=e.forceShouldAnimate,u=Qg(t,r);if(s==null)return sA({insideDestination:n,inHomeList:u,displacedBy:o,destination:r});var c=sf(n,function(g){return g.descriptor.index===s});if(!c)return sA({insideDestination:n,inHomeList:u,displacedBy:o,destination:r});var d=o3(t,n),f=n.indexOf(c),h=d.slice(f),m=jx({afterDragging:h,destination:r,displacedBy:o,last:a,viewport:i.frame,forceShouldAnimate:l});return{displaced:m,displacedBy:o,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function Rd(e,t){return!!t.effected[e]}var S9e=function(e){var t=e.isMovingForward,n=e.destination,r=e.draggables,i=e.combine,o=e.afterCritical;if(!n.isCombineEnabled)return null;var a=i.draggableId,s=r[a],l=s.descriptor.index,u=Rd(a,o);return u?t?l:l-1:t?l+1:l},k9e=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,i=e.location;if(!r.length)return null;var o=i.index,a=t?o+1:o-1,s=r[0].descriptor.index,l=r[r.length-1].descriptor.index,u=n?l:l+1;return a<s||a>u?null:a},_9e=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,i=e.draggables,o=e.destination,a=e.insideDestination,s=e.previousImpact,l=e.viewport,u=e.afterCritical,c=s.at;if(c||Ge(),c.type==="REORDER"){var d=k9e({isMovingForward:t,isInHomeList:n,location:c.destination,insideDestination:a});return d==null?null:U9({draggable:r,insideDestination:a,destination:o,viewport:l,last:s.displaced,displacedBy:s.displacedBy,index:d})}var f=S9e({isMovingForward:t,destination:o,displaced:s.displaced,draggables:i,combine:c.combine,afterCritical:u});return f==null?null:U9({draggable:r,insideDestination:a,destination:o,viewport:l,last:s.displaced,displacedBy:s.displacedBy,index:f})},G9e=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,i=e.displacedBy,o=!!(t.visible[r]||t.invisible[r]);return Rd(r,n)?o?Er:Ug(i.point):o?i.point:Er},I9e=function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,i=i3(n);i||Ge();var o=i.draggableId,a=r[o].page.borderBox.center,s=G9e({displaced:n.displaced,afterCritical:t,combineWith:o,displacedBy:n.displacedBy});return Fr(a,s)},kie=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},W9e=function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2},GM=function(e,t,n){return t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},lA=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return Mp(t.line,n.marginBox[t.end]+kie(t,r),GM(t,n.marginBox,r))},uA=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return Mp(t.line,n.marginBox[t.start]-W9e(t,r),GM(t,n.marginBox,r))},E9e=function(e){var t=e.axis,n=e.moveInto,r=e.isMoving;return Mp(t.line,n.contentBox[t.start]+kie(t,r),GM(t,n.contentBox,r))},X9e=function(e){var t=e.impact,n=e.draggable,r=e.draggables,i=e.droppable,o=e.afterCritical,a=$g(i.descriptor.id,r),s=n.page,l=i.axis;if(!a.length)return E9e({axis:l,moveInto:i.page,isMoving:s});var u=t.displaced,c=t.displacedBy,d=u.all[0];if(d){var f=r[d];if(Rd(d,o))return uA({axis:l,moveRelativeTo:f.page,isMoving:s});var h=J9(f.page,c.point);return uA({axis:l,moveRelativeTo:h,isMoving:s})}var m=a[a.length-1];if(m.descriptor.id===n.descriptor.id)return s.borderBox.center;if(Rd(m.descriptor.id,o)){var g=J9(m.page,Ug(o.displacedBy.point));return lA({axis:l,moveRelativeTo:g,isMoving:s})}return lA({axis:l,moveRelativeTo:m.page,isMoving:s})},FV=function(e,t){var n=e.frame;return n?Fr(t,n.scroll.diff.displacement):t},L9e=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,o=e.afterCritical,a=n.page.borderBox.center,s=t.at;return!r||!s?a:s.type==="REORDER"?X9e({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:o}):I9e({impact:t,draggables:i,afterCritical:o})},a3=function(e){var t=L9e(e),n=e.droppable,r=n?FV(n,t):t;return r},_ie=function(e,t){var n=Wo(t,e.scroll.initial),r=Ug(n),i=as({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),o={frame:i,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}};return o};function cA(e,t){return e.map(function(n){return t[n]})}function R9e(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}var C9e=function(e){var t=e.impact,n=e.viewport,r=e.destination,i=e.draggables,o=e.maxScrollChange,a=_ie(n,Fr(n.scroll.current,o)),s=r.frame?wM(r,Fr(r.frame.scroll.current,o)):r,l=t.displaced,u=jx({afterDragging:cA(l.all,i),destination:r,displacedBy:t.displacedBy,viewport:a.frame,last:l,forceShouldAnimate:!1}),c=jx({afterDragging:cA(l.all,i),destination:s,displacedBy:t.displacedBy,viewport:n.frame,last:l,forceShouldAnimate:!1}),d={},f={},h=[l,u,c];l.all.forEach(function(g){var y=R9e(g,h);if(y){f[g]=y;return}d[g]=!0});var m=$e({},t,{displaced:{all:l.all,invisible:d,visible:f}});return m},V9e=function(e,t){return Fr(e.scroll.diff.displacement,t)},IM=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=e.viewport,i=V9e(r,t),o=Wo(i,n.page.borderBox.center);return Fr(n.client.borderBox.center,o)},Gie=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,i=e.viewport,o=e.withDroppableDisplacement,a=e.onlyOnMainAxis,s=a===void 0?!1:a,l=Wo(r,t.page.borderBox.center),u=Kw(t.page.borderBox,l),c={target:u,destination:n,withDroppableDisplacement:o,viewport:i};return s?v9e(c):Sie(c)},Y9e=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.draggables,o=e.previousImpact,a=e.viewport,s=e.previousPageBorderBoxCenter,l=e.previousClientSelection,u=e.afterCritical;if(!r.isEnabled)return null;var c=$g(r.descriptor.id,i),d=Qg(n,r),f=d9e({isMovingForward:t,draggable:n,destination:r,insideDestination:c,previousImpact:o})||_9e({isMovingForward:t,isInHomeList:d,draggable:n,draggables:i,destination:r,insideDestination:c,previousImpact:o,viewport:a,afterCritical:u});if(!f)return null;var h=a3({impact:f,draggable:n,droppable:r,draggables:i,afterCritical:u}),m=Gie({draggable:n,destination:r,newPageBorderBoxCenter:h,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(m){var g=IM({pageBorderBoxCenter:h,draggable:n,viewport:a});return{clientSelection:g,impact:f,scrollJumpRequest:null}}var y=Wo(h,s),v=C9e({impact:f,viewport:a,destination:r,draggables:i,maxScrollChange:y});return{clientSelection:l,impact:v,scrollJumpRequest:y}},yi=function(e){var t=e.subject.active;return t||Ge(),t},T9e=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,i=e.droppables,o=e.viewport,a=r.subject.active;if(!a)return null;var s=r.axis,l=ba(a[s.start],a[s.end]),u=r3(i).filter(function(d){return d!==r}).filter(function(d){return d.isEnabled}).filter(function(d){return!!d.subject.active}).filter(function(d){return wie(o.frame)(yi(d))}).filter(function(d){var f=yi(d);return t?a[s.crossAxisEnd]<f[s.crossAxisEnd]:f[s.crossAxisStart]<a[s.crossAxisStart]}).filter(function(d){var f=yi(d),h=ba(f[s.start],f[s.end]);return l(f[s.start])||l(f[s.end])||h(a[s.start])||h(a[s.end])}).sort(function(d,f){var h=yi(d)[s.crossAxisStart],m=yi(f)[s.crossAxisStart];return t?h-m:m-h}).filter(function(d,f,h){return yi(d)[s.crossAxisStart]===yi(h[0])[s.crossAxisStart]});if(!u.length)return null;if(u.length===1)return u[0];var c=u.filter(function(d){var f=ba(yi(d)[s.start],yi(d)[s.end]);return f(n[s.line])});return c.length===1?c[0]:c.length>1?c.sort(function(d,f){return yi(d)[s.start]-yi(f)[s.start]})[0]:u.sort(function(d,f){var h=oA(n,aA(yi(d))),m=oA(n,aA(yi(f)));return h!==m?h-m:yi(d)[s.start]-yi(f)[s.start]})[0]},dA=function(e,t){var n=e.page.borderBox.center;return Rd(e.descriptor.id,t)?Wo(n,t.displacedBy.point):n},N9e=function(e,t){var n=e.page.borderBox;return Rd(e.descriptor.id,t)?Kw(n,Ug(t.displacedBy.point)):n},F9e=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,i=e.insideDestination,o=e.afterCritical,a=i.filter(function(s){return Sie({target:N9e(s,o),destination:r,viewport:n.frame,withDroppableDisplacement:!0})}).sort(function(s,l){var u=zx(t,FV(r,dA(s,o))),c=zx(t,FV(r,dA(l,o)));return u<c?-1:c<u?1:s.descriptor.index-l.descriptor.index});return a[0]||null},Dw=Ir(function(e,t){var n=t[e.line];return{value:n,point:Mp(e.line,n)}}),M9e=function(e,t,n){var r=e.axis;if(e.descriptor.mode==="virtual")return Mp(r.line,t[r.line]);var i=e.subject.page.contentBox[r.size],o=$g(e.descriptor.id,n),a=o.reduce(function(u,c){return u+c.client.marginBox[r.size]},0),s=a+t[r.line],l=s-i;return l<=0?null:Mp(r.line,l)},Iie=function(e,t){return $e({},e,{scroll:$e({},e.scroll,{max:t})})},Wie=function(e,t,n){var r=e.frame;Qg(t,e)&&Ge(),e.subject.withPlaceholder&&Ge();var i=Dw(e.axis,t.displaceBy).point,o=M9e(e,i,n),a={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){var s=J0({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame});return $e({},e,{subject:s})}var l=o?Fr(r.scroll.max,o):r.scroll.max,u=Iie(r,l),c=J0({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:u});return $e({},e,{subject:c,frame:u})},O9e=function(e){var t=e.subject.withPlaceholder;t||Ge();var n=e.frame;if(!n){var r=J0({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return $e({},e,{subject:r})}var i=t.oldFrameMaxScroll;i||Ge();var o=Iie(n,i),a=J0({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return $e({},e,{subject:a,frame:o})},z9e=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,i=e.draggable,o=e.draggables,a=e.destination,s=e.viewport,l=e.afterCritical;if(!n){if(r.length)return null;var u={displaced:Px,displacedBy:xie,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},c=a3({impact:u,draggable:i,droppable:a,draggables:o,afterCritical:l}),d=Qg(i,a)?a:Wie(a,i,o),f=Gie({draggable:i,destination:d,newPageBorderBoxCenter:c,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return f?u:null}var h=t[a.axis.line]<=n.page.borderBox.center[a.axis.line],m=function(){var y=n.descriptor.index;return n.descriptor.id===i.descriptor.id||h?y:y+1}(),g=Dw(a.axis,i.displaceBy);return U9({draggable:i,insideDestination:r,destination:a,viewport:s,displacedBy:g,last:Px,index:m})},P9e=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,i=e.isOver,o=e.draggables,a=e.droppables,s=e.viewport,l=e.afterCritical,u=T9e({isMovingForward:t,pageBorderBoxCenter:n,source:i,droppables:a,viewport:s});if(!u)return null;var c=$g(u.descriptor.id,o),d=F9e({pageBorderBoxCenter:n,viewport:s,destination:u,insideDestination:c,afterCritical:l}),f=z9e({previousPageBorderBoxCenter:n,destination:u,draggable:r,draggables:o,moveRelativeTo:d,insideDestination:c,viewport:s,afterCritical:l});if(!f)return null;var h=a3({impact:f,draggable:r,droppable:u,draggables:o,afterCritical:l}),m=IM({pageBorderBoxCenter:h,draggable:r,viewport:s});return{clientSelection:m,impact:f,scrollJumpRequest:null}},Vo=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},j9e=function(e,t){var n=Vo(e);return n?t[n]:null},H9e=function(e){var t=e.state,n=e.type,r=j9e(t.impact,t.dimensions.droppables),i=!!r,o=t.dimensions.droppables[t.critical.droppable.id],a=r||o,s=a.axis.direction,l=s==="vertical"&&(n==="MOVE_UP"||n==="MOVE_DOWN")||s==="horizontal"&&(n==="MOVE_LEFT"||n==="MOVE_RIGHT");if(l&&!i)return null;var u=n==="MOVE_DOWN"||n==="MOVE_RIGHT",c=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,f=t.dimensions,h=f.draggables,m=f.droppables;return l?Y9e({isMovingForward:u,previousPageBorderBoxCenter:d,draggable:c,destination:a,draggables:h,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):P9e({isMovingForward:u,previousPageBorderBoxCenter:d,draggable:c,isOver:a,draggables:h,droppables:m,viewport:t.viewport,afterCritical:t.afterCritical})};function Uf(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Eie(e){var t=ba(e.top,e.bottom),n=ba(e.left,e.right);return function(r){return t(r.y)&&n(r.x)}}function J9e(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function B9e(e){var t=e.pageBorderBox,n=e.draggable,r=e.candidates,i=n.page.borderBox.center,o=r.map(function(a){var s=a.axis,l=Mp(a.axis.line,t.center[s.line],a.page.borderBox.center[s.crossAxisLine]);return{id:a.descriptor.id,distance:zx(i,l)}}).sort(function(a,s){return s.distance-a.distance});return o[0]?o[0].id:null}function K9e(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,i=r3(r).filter(function(o){if(!o.isEnabled)return!1;var a=o.subject.active;if(!a||!J9e(t,a))return!1;if(Eie(a)(t.center))return!0;var s=o.axis,l=a.center[s.crossAxisLine],u=t[s.crossAxisStart],c=t[s.crossAxisEnd],d=ba(a[s.crossAxisStart],a[s.crossAxisEnd]),f=d(u),h=d(c);return!f&&!h?!0:f?u<l:c>l});return i.length?i.length===1?i[0].descriptor.id:B9e({pageBorderBox:t,draggable:n,candidates:i}):null}var Xie=function(e,t){return as(Kw(e,t))},D9e=function(e,t){var n=e.frame;return n?Xie(t,n.scroll.diff.value):t};function Lie(e){var t=e.displaced,n=e.id;return!!(t.visible[n]||t.invisible[n])}function A9e(e){var t=e.draggable,n=e.closest,r=e.inHomeList;return n?r&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}var U9e=function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,i=e.insideDestination,o=e.last,a=e.viewport,s=e.afterCritical,l=r.axis,u=Dw(r.axis,n.displaceBy),c=u.value,d=t[l.start],f=t[l.end],h=o3(n,i),m=sf(h,function(y){var v=y.descriptor.id,w=y.page.borderBox.center[l.line],Z=Rd(v,s),k=Lie({displaced:o,id:v});return Z?k?f<=w:d<w-c:k?f<=w+c:d<w}),g=A9e({draggable:n,closest:m,inHomeList:Qg(n,r)});return U9({draggable:n,insideDestination:i,destination:r,viewport:a,last:o,displacedBy:u,index:g})},$9e=4,Q9e=function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,i=e.destination,o=e.insideDestination,a=e.afterCritical;if(!i.isCombineEnabled)return null;var s=i.axis,l=Dw(i.axis,t.displaceBy),u=l.value,c=n[s.start],d=n[s.end],f=o3(t,o),h=sf(f,function(g){var y=g.descriptor.id,v=g.page.borderBox,w=v[s.size],Z=w/$9e,k=Rd(y,a),_=Lie({displaced:r.displaced,id:y});return k?_?d>v[s.start]+Z&&d<v[s.end]-Z:c>v[s.start]-u+Z&&c<v[s.end]-u-Z:_?d>v[s.start]+u+Z&&d<v[s.end]+u-Z:c>v[s.start]+Z&&c<v[s.end]-Z});if(!h)return null;var m={displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:i.descriptor.id}}};return m},Rie=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,i=e.droppables,o=e.previousImpact,a=e.viewport,s=e.afterCritical,l=Xie(n.page.borderBox,t),u=K9e({pageBorderBox:l,draggable:n,droppables:i});if(!u)return f9e;var c=i[u],d=$g(c.descriptor.id,r),f=D9e(c,l);return Q9e({pageBorderBoxWithDroppableScroll:f,draggable:n,previousImpact:o,destination:c,insideDestination:d,afterCritical:s})||U9e({pageBorderBoxWithDroppableScroll:f,draggable:n,destination:c,insideDestination:d,last:o.displaced,viewport:a,afterCritical:s})},WM=function(e,t){var n;return $e({},e,(n={},n[t.descriptor.id]=t,n))},q9e=function(e){var t=e.previousImpact,n=e.impact,r=e.droppables,i=Vo(t),o=Vo(n);if(!i||i===o)return r;var a=r[i];if(!a.subject.withPlaceholder)return r;var s=O9e(a);return WM(r,s)},eGe=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,i=e.previousImpact,o=e.impact,a=q9e({previousImpact:i,impact:o,droppables:r}),s=Vo(o);if(!s)return a;var l=r[s];if(Qg(t,l)||l.subject.withPlaceholder)return a;var u=Wie(l,t,n);return WM(a,u)},ex=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,i=e.viewport,o=e.impact,a=e.scrollJumpRequest,s=i||t.viewport,l=r||t.dimensions,u=n||t.current.client.selection,c=Wo(u,t.initial.client.selection),d={offset:c,selection:u,borderBoxCenter:Fr(t.initial.client.borderBoxCenter,c)},f={selection:Fr(d.selection,s.scroll.current),borderBoxCenter:Fr(d.borderBoxCenter,s.scroll.current),offset:Fr(d.offset,s.scroll.diff.value)},h={client:d,page:f};if(t.phase==="COLLECTING")return $e({phase:"COLLECTING"},t,{dimensions:l,viewport:s,current:h});var m=l.draggables[t.critical.draggable.id],g=o||Rie({pageOffset:f.offset,draggable:m,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),y=eGe({draggable:m,impact:g,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables}),v=$e({},t,{current:h,dimensions:{draggables:l.draggables,droppables:y},impact:g,viewport:s,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null});return v};function tGe(e,t){return e.map(function(n){return t[n]})}var Cie=function(e){var t=e.impact,n=e.viewport,r=e.draggables,i=e.destination,o=e.forceShouldAnimate,a=t.displaced,s=tGe(a.all,r),l=jx({afterDragging:s,destination:i,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:o,last:a});return $e({},t,{displaced:l})},Vie=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,o=e.viewport,a=e.afterCritical,s=a3({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:a});return IM({pageBorderBoxCenter:s,draggable:n,viewport:o})},Yie=function(e){var t=e.state,n=e.dimensions,r=e.viewport;t.movementMode!=="SNAP"&&Ge();var i=t.impact,o=r||t.viewport,a=n||t.dimensions,s=a.draggables,l=a.droppables,u=s[t.critical.draggable.id],c=Vo(i);c||Ge();var d=l[c],f=Cie({impact:i,viewport:o,destination:d,draggables:s}),h=Vie({impact:f,draggable:u,droppable:d,draggables:s,viewport:o,afterCritical:t.afterCritical});return ex({impact:f,clientSelection:h,state:t,dimensions:a,viewport:o})},nGe=function(e){return{index:e.index,droppableId:e.droppableId}},Tie=function(e){var t=e.draggable,n=e.home,r=e.draggables,i=e.viewport,o=Dw(n.axis,t.displaceBy),a=$g(n.descriptor.id,r),s=a.indexOf(t);s===-1&&Ge();var l=a.slice(s+1),u=l.reduce(function(h,m){return h[m.descriptor.id]=!0,h},{}),c={inVirtualList:n.descriptor.mode==="virtual",displacedBy:o,effected:u},d=jx({afterDragging:l,destination:n,displacedBy:o,last:null,viewport:i.frame,forceShouldAnimate:!1}),f={displaced:d,displacedBy:o,at:{type:"REORDER",destination:nGe(t.descriptor)}};return{impact:f,afterCritical:c}},rGe=function(e,t){return{draggables:e.draggables,droppables:WM(e.droppables,t)}},iGe=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,i=J9(t.client,n),o=B9(i,r),a=$e({},t,{placeholder:$e({},t.placeholder,{client:i}),client:i,page:o});return a},oGe=function(e){var t=e.frame;return t||Ge(),t},aGe=function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,i=r.scroll.diff.value;return t.map(function(o){var a=o.descriptor.droppableId,s=n[a],l=oGe(s),u=l.scroll.diff.value,c=Fr(i,u),d=iGe({draggable:o,offset:c,initialWindowScroll:r.scroll.initial});return d})},sGe=function(e){var t=e.state,n=e.published,r=n.modified.map(function(Z){var k=t.dimensions.droppables[Z.droppableId],_=wM(k,Z.scroll);return _}),i=$e({},t.dimensions.droppables,{},yie(r)),o=vie(aGe({additions:n.additions,updatedDroppables:i,viewport:t.viewport})),a=$e({},t.dimensions.draggables,{},o);n.removals.forEach(function(Z){delete a[Z]});var s={droppables:i,draggables:a},l=Vo(t.impact),u=l?s.droppables[l]:null,c=s.draggables[t.critical.draggable.id],d=s.droppables[t.critical.droppable.id],f=Tie({draggable:c,home:d,draggables:a,viewport:t.viewport}),h=f.impact,m=f.afterCritical,g=u&&u.isCombineEnabled?t.impact:h,y=Rie({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:g,viewport:t.viewport,afterCritical:m}),v=$e({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:y,onLiftImpact:h,dimensions:s,afterCritical:m,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return v;var w=$e({phase:"DROP_PENDING"},v,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return w},MV=function(e){return e.movementMode==="SNAP"},dL=function(e,t,n){var r=rGe(e.dimensions,t);return!MV(e)||n?ex({state:e,dimensions:r}):Yie({state:e,dimensions:r})};function fA(e){return e.isDragging&&e.movementMode==="SNAP"?$e({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var pA={phase:"IDLE",completed:null,shouldFlush:!1},lGe=function(e,t){if(e===void 0&&(e=pA),t.type==="FLUSH")return $e({},pA,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Ge();var n=t.payload,r=n.critical,i=n.clientSelection,o=n.viewport,a=n.dimensions,s=n.movementMode,l=a.draggables[r.draggable.id],u=a.droppables[r.droppable.id],c={selection:i,borderBoxCenter:l.client.borderBox.center,offset:Er},d={client:c,page:{selection:Fr(c.selection,o.scroll.initial),borderBoxCenter:Fr(c.selection,o.scroll.initial),offset:Fr(c.selection,o.scroll.diff.value)}},f=r3(a.droppables).every(function(ue){return!ue.isFixedOnPage}),h=Tie({draggable:l,home:u,draggables:a.draggables,viewport:o}),m=h.impact,g=h.afterCritical,y={phase:"DRAGGING",isDragging:!0,critical:r,movementMode:s,dimensions:a,initial:d,current:d,isWindowScrollAllowed:f,impact:m,afterCritical:g,onLiftImpact:m,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null};return y}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Ge();var v=$e({phase:"COLLECTING"},e,{phase:"COLLECTING"});return v}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Ge(),sGe({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Uf(e)||Ge();var w=t.payload.client;return bd(w,e.current.client.selection)?e:ex({state:e,clientSelection:w,impact:MV(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return fA(e);Uf(e)||Ge();var Z=t.payload,k=Z.id,_=Z.newScroll,R=e.dimensions.droppables[k];if(!R)return e;var I=wM(R,_);return dL(e,I,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Uf(e)||Ge();var E=t.payload,X=E.id,Y=E.isEnabled,C=e.dimensions.droppables[X];C||Ge(),C.isEnabled===Y&&Ge();var N=$e({},C,{isEnabled:Y});return dL(e,N,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Uf(e)||Ge();var V=t.payload,F=V.id,O=V.isCombineEnabled,P=e.dimensions.droppables[F];P||Ge(),P.isCombineEnabled===O&&Ge();var H=$e({},P,{isCombineEnabled:O});return dL(e,H,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Uf(e)||Ge(),e.isWindowScrollAllowed||Ge();var M=t.payload.newScroll;if(bd(e.viewport.scroll.current,M))return fA(e);var j=_ie(e.viewport,M);return MV(e)?Yie({state:e,viewport:j}):ex({state:e,viewport:j})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Uf(e))return e;var J=t.payload.maxScroll;if(bd(J,e.viewport.scroll.max))return e;var q=$e({},e.viewport,{scroll:$e({},e.viewport.scroll,{max:J})});return $e({phase:"DRAGGING"},e,{viewport:q})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Ge();var K=H9e({state:e,type:t.type});return K?ex({state:e,impact:K.impact,clientSelection:K.clientSelection,scrollJumpRequest:K.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var D=t.payload.reason;e.phase!=="COLLECTING"&&Ge();var $=$e({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:D});return $}if(t.type==="DROP_ANIMATE"){var Q=t.payload,B=Q.completed,pe=Q.dropDuration,re=Q.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Ge();var ee={phase:"DROP_ANIMATING",completed:B,dropDuration:pe,newHomeClientOffset:re,dimensions:e.dimensions};return ee}if(t.type==="DROP_COMPLETE"){var oe=t.payload.completed;return{phase:"IDLE",completed:oe,shouldFlush:!1}}return e},uGe=function(e){return{type:"BEFORE_INITIAL_CAPTURE",payload:e}},cGe=function(e){return{type:"LIFT",payload:e}},dGe=function(e){return{type:"INITIAL_PUBLISH",payload:e}},fGe=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},pGe=function(){return{type:"COLLECTION_STARTING",payload:null}},hGe=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},mGe=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},gGe=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},Nie=function(e){return{type:"MOVE",payload:e}},bGe=function(e){return{type:"MOVE_BY_WINDOW_SCROLL",payload:e}},yGe=function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}},vGe=function(){return{type:"MOVE_UP",payload:null}},xGe=function(){return{type:"MOVE_DOWN",payload:null}},wGe=function(){return{type:"MOVE_RIGHT",payload:null}},ZGe=function(){return{type:"MOVE_LEFT",payload:null}},EM=function(){return{type:"FLUSH",payload:null}},SGe=function(e){return{type:"DROP_ANIMATE",payload:e}},XM=function(e){return{type:"DROP_COMPLETE",payload:e}},Fie=function(e){return{type:"DROP",payload:e}},kGe=function(e){return{type:"DROP_PENDING",payload:e}},Mie=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},_Ge=function(e){return function(t){var n=t.getState,r=t.dispatch;return function(i){return function(o){if(o.type!=="LIFT"){i(o);return}var a=o.payload,s=a.id,l=a.clientSelection,u=a.movementMode,c=n();c.phase==="DROP_ANIMATING"&&r(XM({completed:c.completed})),n().phase!=="IDLE"&&Ge(),r(EM()),r(uGe({draggableId:s,movementMode:u}));var d={shouldPublishImmediately:u==="SNAP"},f={draggableId:s,scrollOptions:d},h=e.startPublishing(f),m=h.critical,g=h.dimensions,y=h.viewport;r(dGe({critical:m,dimensions:g,clientSelection:l,movementMode:u,viewport:y}))}}}},GGe=function(e){return function(){return function(t){return function(n){n.type==="INITIAL_PUBLISH"&&e.dragging(),n.type==="DROP_ANIMATE"&&e.dropping(n.payload.completed.result.reason),(n.type==="FLUSH"||n.type==="DROP_COMPLETE")&&e.resting(),t(n)}}}},LM={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Hx={opacity:{drop:0,combining:.7},scale:{drop:.75}},RM={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Vf=RM.outOfTheWay+"s "+LM.outOfTheWay,tx={fluid:"opacity "+Vf,snap:"transform "+Vf+", opacity "+Vf,drop:function(e){var t=e+"s "+LM.drop;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+Vf,placeholder:"height "+Vf+", width "+Vf+", margin "+Vf},hA=function(e){return bd(e,Er)?null:"translate("+e.x+"px, "+e.y+"px)"},OV={moveTo:hA,drop:function(e,t){var n=hA(e);return n?t?n+" scale("+Hx.scale.drop+")":n:null}},zV=RM.minDropTime,Oie=RM.maxDropTime,IGe=Oie-zV,mA=1500,WGe=.6,EGe=function(e){var t=e.current,n=e.destination,r=e.reason,i=zx(t,n);if(i<=0)return zV;if(i>=mA)return Oie;var o=i/mA,a=zV+IGe*o,s=r==="CANCEL"?a*WGe:a;return Number(s.toFixed(2))},XGe=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,i=e.viewport,o=e.afterCritical,a=r.draggables,s=r.droppables,l=Vo(t),u=l?s[l]:null,c=s[n.descriptor.droppableId],d=Vie({impact:t,draggable:n,draggables:a,afterCritical:o,droppable:u||c,viewport:i}),f=Wo(d,n.client.borderBox.center);return f},LGe=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,i=e.home,o=e.viewport,a=e.onLiftImpact;if(!r.at||n!=="DROP"){var s=Cie({draggables:t,impact:a,destination:i,viewport:o,forceShouldAnimate:!0});return{impact:s,didDropInsideDroppable:!1}}if(r.at.type==="REORDER")return{impact:r,didDropInsideDroppable:!0};var l=$e({},r,{displaced:Px});return{impact:l,didDropInsideDroppable:!0}},RGe=function(e){var t=e.getState,n=e.dispatch;return function(r){return function(i){if(i.type!=="DROP"){r(i);return}var o=t(),a=i.payload.reason;if(o.phase==="COLLECTING"){n(kGe({reason:a}));return}if(o.phase!=="IDLE"){var s=o.phase==="DROP_PENDING"&&o.isWaiting;s&&Ge(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||Ge();var l=o.critical,u=o.dimensions,c=u.draggables[o.critical.draggable.id],d=LGe({reason:a,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),f=d.impact,h=d.didDropInsideDroppable,m=h?SM(f):null,g=h?i3(f):null,y={index:l.draggable.index,droppableId:l.droppable.id},v={draggableId:c.descriptor.id,type:c.descriptor.type,source:y,reason:a,mode:o.movementMode,destination:m,combine:g},w=XGe({impact:f,draggable:c,dimensions:u,viewport:o.viewport,afterCritical:o.afterCritical}),Z={critical:o.critical,afterCritical:o.afterCritical,result:v,impact:f},k=!bd(o.current.client.offset,w)||!!v.combine;if(!k){n(XM({completed:Z}));return}var _=EGe({current:o.current.client.offset,destination:w,reason:a}),R={newHomeClientOffset:w,dropDuration:_,completed:Z};n(SGe(R))}}}},zie=function(){return window["__react-beautiful-dnd-disable-scroll-hack"]?{x:0,y:0}:{x:window.pageXOffset,y:window.pageYOffset}};function CGe(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}function VGe(e){var t=e.onWindowScroll;function n(){t(zie())}var r=Ox(n),i=CGe(r),o=gd;function a(){return o!==gd}function s(){a()&&Ge(),o=da(window,[i])}function l(){a()||Ge(),r.cancel(),o(),o=gd}return{start:s,stop:l,isActive:a}}var YGe=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},TGe=function(e){var t=VGe({onWindowScroll:function(n){e.dispatch(bGe({newScroll:n}))}});return function(n){return function(r){!t.isActive()&&r.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&YGe(r)&&t.stop(),n(r)}}},NGe=function(e){var t=!1,n=!1,r=setTimeout(function(){n=!0}),i=function(o){t||n||(t=!0,e(o),clearTimeout(r))};return i.wasCalled=function(){return t},i},FGe=function(){var e=[],t=function(i){var o=ZM(e,function(l){return l.timerId===i});o===-1&&Ge();var a=e.splice(o,1),s=a[0];s.callback()},n=function(i){var o=setTimeout(function(){return t(o)}),a={timerId:o,callback:i};e.push(a)},r=function(){if(e.length){var i=[].concat(e);e.length=0,i.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:n,flush:r}},MGe=function(e,t){return e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index},OGe=function(e,t){return e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId},zGe=function(e,t){if(e===t)return!0;var n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},gy=function(e,t){t()},hS=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},fL=function(e,t,n,r){if(!e){n(r(t));return}var i=NGe(n),o={announce:i};e(t,o),i.wasCalled()||n(r(t))},PGe=function(e,t){var n=FGe(),r=null,i=function(d,f){r&&Ge(),gy("onBeforeCapture",function(){var h=e().onBeforeCapture;if(h){var m={draggableId:d,mode:f};h(m)}})},o=function(d,f){r&&Ge(),gy("onBeforeDragStart",function(){var h=e().onBeforeDragStart;h&&h(hS(d,f))})},a=function(d,f){r&&Ge();var h=hS(d,f);r={mode:f,lastCritical:d,lastLocation:h.source,lastCombine:null},n.add(function(){gy("onDragStart",function(){return fL(e().onDragStart,h,t,Qk.onDragStart)})})},s=function(d,f){var h=SM(f),m=i3(f);r||Ge();var g=!zGe(d,r.lastCritical);g&&(r.lastCritical=d);var y=!MGe(r.lastLocation,h);y&&(r.lastLocation=h);var v=!OGe(r.lastCombine,m);if(v&&(r.lastCombine=m),!(!g&&!y&&!v)){var w=$e({},hS(d,r.mode),{combine:m,destination:h});n.add(function(){gy("onDragUpdate",function(){return fL(e().onDragUpdate,w,t,Qk.onDragUpdate)})})}},l=function(){r||Ge(),n.flush()},u=function(d){r||Ge(),r=null,gy("onDragEnd",function(){return fL(e().onDragEnd,d,t,Qk.onDragEnd)})},c=function(){if(r){var d=$e({},hS(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});u(d)}};return{beforeCapture:i,beforeStart:o,start:a,update:s,flush:l,drop:u,abort:c}},jGe=function(e,t){var n=PGe(e,t);return function(r){return function(i){return function(o){if(o.type==="BEFORE_INITIAL_CAPTURE"){n.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(o.type==="INITIAL_PUBLISH"){var a=o.payload.critical;n.beforeStart(a,o.payload.movementMode),i(o),n.start(a,o.payload.movementMode);return}if(o.type==="DROP_COMPLETE"){var s=o.payload.completed.result;n.flush(),i(o),n.drop(s);return}if(i(o),o.type==="FLUSH"){n.abort();return}var l=r.getState();l.phase==="DRAGGING"&&n.update(l.critical,l.impact)}}}},HGe=function(e){return function(t){return function(n){if(n.type!=="DROP_ANIMATION_FINISHED"){t(n);return}var r=e.getState();r.phase!=="DROP_ANIMATING"&&Ge(),e.dispatch(XM({completed:r.completed}))}}},JGe=function(e){var t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return function(i){return function(o){if((o.type==="FLUSH"||o.type==="DROP_COMPLETE"||o.type==="DROP_ANIMATION_FINISHED")&&r(),i(o),o.type==="DROP_ANIMATE"){var a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var s=e.getState();s.phase==="DROP_ANIMATING"&&e.dispatch(Mie())}};n=requestAnimationFrame(function(){n=null,t=da(window,[a])})}}}},BGe=function(e){return function(){return function(t){return function(n){(n.type==="DROP_COMPLETE"||n.type==="FLUSH"||n.type==="DROP_ANIMATE")&&e.stopPublishing(),t(n)}}}},KGe=function(e){var t=!1;return function(){return function(n){return function(r){if(r.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(r.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(r.type==="DROP_COMPLETE"){t=!1;var i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},DGe=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},AGe=function(e){return function(t){return function(n){return function(r){if(DGe(r)){e.stop(),n(r);return}if(r.type==="INITIAL_PUBLISH"){n(r);var i=t.getState();i.phase!=="DRAGGING"&&Ge(),e.start(i);return}n(r),e.scroll(t.getState())}}}},UGe=function(e){return function(t){return function(n){if(t(n),n.type==="PUBLISH_WHILE_DRAGGING"){var r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(Fie({reason:r.reason})))}}}},$Ge=eie,QGe=function(e){var t=e.dimensionMarshal,n=e.focusMarshal,r=e.styleMarshal,i=e.getResponders,o=e.announce,a=e.autoScroller;return qre(lGe,$Ge(Kke(GGe(r),BGe(t),_Ge(t),RGe,HGe,JGe,UGe,AGe(a),TGe,KGe(n),jGe(i,o))))},pL=function(){return{additions:{},removals:{},modified:{}}};function qGe(e){var t=e.registry,n=e.callbacks,r=pL(),i=null,o=function(){i||(n.collectionStarting(),i=requestAnimationFrame(function(){i=null;var u=r,c=u.additions,d=u.removals,f=u.modified,h=Object.keys(c).map(function(y){return t.draggable.getById(y).getDimension(Er)}).sort(function(y,v){return y.descriptor.index-v.descriptor.index}),m=Object.keys(f).map(function(y){var v=t.droppable.getById(y),w=v.callbacks.getScrollWhileDragging();return{droppableId:y,scroll:w}}),g={additions:h,removals:Object.keys(d),modified:m};r=pL(),n.publish(g)}))},a=function(u){var c=u.descriptor.id;r.additions[c]=u,r.modified[u.descriptor.droppableId]=!0,r.removals[c]&&delete r.removals[c],o()},s=function(u){var c=u.descriptor;r.removals[c.id]=!0,r.modified[c.droppableId]=!0,r.additions[c.id]&&delete r.additions[c.id],o()},l=function(){i&&(cancelAnimationFrame(i),i=null,r=pL())};return{add:a,remove:s,stop:l}}var Pie=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,i=e.width,o=Wo({x:n,y:t},{x:i,y:r}),a={x:Math.max(0,o.x),y:Math.max(0,o.y)};return a},jie=function(){var e=document.documentElement;return e||Ge(),e},Hie=function(){var e=jie(),t=Pie({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},eIe=function(){var e=zie(),t=Hie(),n=e.y,r=e.x,i=jie(),o=i.clientWidth,a=i.clientHeight,s=r+o,l=n+a,u=as({top:n,left:r,right:s,bottom:l}),c={frame:u,scroll:{initial:e,current:e,max:t,diff:{value:Er,displacement:Er}}};return c},tIe=function(e){var t=e.critical,n=e.scrollOptions,r=e.registry,i=eIe(),o=i.scroll.current,a=t.droppable,s=r.droppable.getAllByType(a.type).map(function(d){return d.callbacks.getDimensionAndWatchScroll(o,n)}),l=r.draggable.getAllByType(t.draggable.type).map(function(d){return d.getDimension(o)}),u={draggables:vie(l),droppables:yie(s)},c={dimensions:u,critical:t,viewport:i};return c};function gA(e,t,n){if(n.descriptor.id===t.id||n.descriptor.type!==t.type)return!1;var r=e.droppable.getById(n.descriptor.droppableId);return r.descriptor.mode==="virtual"}var nIe=function(e,t){var n=null,r=qGe({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(f,h){e.droppable.exists(f)||Ge(),n&&t.updateDroppableIsEnabled({id:f,isEnabled:h})},o=function(f,h){n&&(e.droppable.exists(f)||Ge(),t.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:h}))},a=function(f,h){n&&(e.droppable.exists(f)||Ge(),t.updateDroppableScroll({id:f,newScroll:h}))},s=function(f,h){n&&e.droppable.getById(f).callbacks.scroll(h)},l=function(){if(n){r.stop();var f=n.critical.droppable;e.droppable.getAllByType(f.type).forEach(function(h){return h.callbacks.dragStopped()}),n.unsubscribe(),n=null}},u=function(f){n||Ge();var h=n.critical.draggable;f.type==="ADDITION"&&gA(e,h,f.value)&&r.add(f.value),f.type==="REMOVAL"&&gA(e,h,f.value)&&r.remove(f.value)},c=function(f){n&&Ge();var h=e.draggable.getById(f.draggableId),m=e.droppable.getById(h.descriptor.droppableId),g={draggable:h.descriptor,droppable:m.descriptor},y=e.subscribe(u);return n={critical:g,unsubscribe:y},tIe({critical:g,registry:e,scrollOptions:f.scrollOptions})},d={updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:o,scrollDroppable:s,updateDroppableScroll:a,startPublishing:c,stopPublishing:l};return d},Jie=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},rIe=function(e){window.scrollBy(e.x,e.y)},iIe=Ir(function(e){return r3(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),oIe=function(e,t){var n=sf(iIe(t),function(r){return r.frame||Ge(),Eie(r.frame.pageMarginBox)(e)});return n},aIe=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var i=r[n];return i.frame?i:null}var o=oIe(t,r);return o},yd={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(e){return Math.pow(e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},sIe=function(e,t){var n=e[t.size]*yd.startFromPercentage,r=e[t.size]*yd.maxScrollAtPercentage,i={startScrollingFrom:n,maxScrollValueAt:r};return i},Bie=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,i=n-t;if(i===0)return 0;var o=r-t,a=o/i;return a},CM=1,lIe=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return yd.maxPixelScroll;if(e===t.startScrollingFrom)return CM;var n=Bie({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=1-n,i=yd.maxPixelScroll*yd.ease(r);return Math.ceil(i)},bA=yd.durationDampening.accelerateAt,yA=yd.durationDampening.stopDampeningAt,uIe=function(e,t){var n=t,r=yA,i=Date.now(),o=i-n;if(o>=yA)return e;if(o<bA)return CM;var a=Bie({startOfRange:bA,endOfRange:r,current:o}),s=e*yd.ease(a);return Math.ceil(s)},vA=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,i=e.shouldUseTimeDampening,o=lIe(t,n);return o===0?0:i?Math.max(uIe(o,r),CM):o},xA=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,i=e.axis,o=e.shouldUseTimeDampening,a=sIe(t,i),s=n[i.end]<n[i.start];return s?vA({distanceToEdge:n[i.end],thresholds:a,dragStartTime:r,shouldUseTimeDampening:o}):-1*vA({distanceToEdge:n[i.start],thresholds:a,dragStartTime:r,shouldUseTimeDampening:o})},cIe=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,i=n.height>t.height,o=n.width>t.width;return!o&&!i?r:o&&i?null:{x:o?0:r.x,y:i?0:r.y}},dIe=gie(function(e){return e===0?0:e}),Kie=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,i=e.center,o=e.shouldUseTimeDampening,a={top:i.y-n.top,right:n.right-i.x,bottom:n.bottom-i.y,left:i.x-n.left},s=xA({container:n,distanceToEdges:a,dragStartTime:t,axis:kM,shouldUseTimeDampening:o}),l=xA({container:n,distanceToEdges:a,dragStartTime:t,axis:Zie,shouldUseTimeDampening:o}),u=dIe({x:l,y:s});if(bd(u,Er))return null;var c=cIe({container:n,subject:r,proposedScroll:u});return c?bd(c,Er)?null:c:null},fIe=gie(function(e){return e===0?0:e>0?1:-1}),VM=function(){var e=function(t,n){return t<0?t:t>n?t-n:0};return function(t){var n=t.current,r=t.max,i=t.change,o=Fr(n,i),a={x:e(o.x,r.x),y:e(o.y,r.y)};return bd(a,Er)?null:a}}(),Die=function(e){var t=e.max,n=e.current,r=e.change,i={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},o=fIe(r),a=VM({max:i,current:n,change:o});return!a||o.x!==0&&a.x===0||o.y!==0&&a.y===0},YM=function(e,t){return Die({current:e.scroll.current,max:e.scroll.max,change:t})},pIe=function(e,t){if(!YM(e,t))return null;var n=e.scroll.max,r=e.scroll.current;return VM({current:r,max:n,change:t})},TM=function(e,t){var n=e.frame;return n?Die({current:n.scroll.current,max:n.scroll.max,change:t}):!1},hIe=function(e,t){var n=e.frame;return!n||!TM(e,t)?null:VM({current:n.scroll.current,max:n.scroll.max,change:t})},mIe=function(e){var t=e.viewport,n=e.subject,r=e.center,i=e.dragStartTime,o=e.shouldUseTimeDampening,a=Kie({dragStartTime:i,container:t.frame,subject:n,center:r,shouldUseTimeDampening:o});return a&&YM(t,a)?a:null},gIe=function(e){var t=e.droppable,n=e.subject,r=e.center,i=e.dragStartTime,o=e.shouldUseTimeDampening,a=t.frame;if(!a)return null;var s=Kie({dragStartTime:i,container:a.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:o});return s&&TM(t,s)?s:null},wA=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,i=e.scrollWindow,o=e.scrollDroppable,a=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id],l=s.page.marginBox;if(t.isWindowScrollAllowed){var u=t.viewport,c=mIe({dragStartTime:n,viewport:u,subject:l,center:a,shouldUseTimeDampening:r});if(c){i(c);return}}var d=aIe({center:a,destination:Vo(t.impact),droppables:t.dimensions.droppables});if(d){var f=gIe({dragStartTime:n,droppable:d,subject:l,center:a,shouldUseTimeDampening:r});f&&o(d.descriptor.id,f)}},bIe=function(e){var t=e.scrollWindow,n=e.scrollDroppable,r=Ox(t),i=Ox(n),o=null,a=function(u){o||Ge();var c=o,d=c.shouldUseTimeDampening,f=c.dragStartTime;wA({state:u,scrollWindow:r,scrollDroppable:i,dragStartTime:f,shouldUseTimeDampening:d})},s=function(u){o&&Ge();var c=Date.now(),d=!1,f=function(){d=!0};wA({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f}),o={dragStartTime:c,shouldUseTimeDampening:d},d&&a(u)},l=function(){o&&(r.cancel(),i.cancel(),o=null)};return{start:s,stop:l,scroll:a}},yIe=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow,i=function(l,u){var c=Fr(l.current.client.selection,u);t({client:c})},o=function(l,u){if(!TM(l,u))return u;var c=hIe(l,u);if(!c)return n(l.descriptor.id,u),null;var d=Wo(u,c);n(l.descriptor.id,d);var f=Wo(u,d);return f},a=function(l,u,c){if(!l||!YM(u,c))return c;var d=pIe(u,c);if(!d)return r(c),null;var f=Wo(c,d);r(f);var h=Wo(c,f);return h},s=function(l){var u=l.scrollJumpRequest;if(u){var c=Vo(l.impact);c||Ge();var d=o(l.dimensions.droppables[c],u);if(d){var f=l.viewport,h=a(l.isWindowScrollAllowed,f,d);h&&i(l,h)}}};return s},vIe=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,i=bIe({scrollWindow:n,scrollDroppable:t}),o=yIe({move:r,scrollWindow:n,scrollDroppable:t}),a=function(l){if(l.phase==="DRAGGING"){if(l.movementMode==="FLUID"){i.scroll(l);return}l.scrollJumpRequest&&o(l)}},s={scroll:a,start:i.start,stop:i.stop};return s},B0="data-rbd",K0=function(){var e=B0+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),PV=function(){var e=B0+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),xIe=function(){var e=B0+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),ZA={contextId:B0+"-scroll-container-context-id"},wIe=function(e){return function(t){return"["+t+'="'+e+'"]'}},by=function(e,t){return e.map(function(n){var r=n.styles[t];return r?n.selector+" { "+r+" }":""}).join(" ")},ZIe="pointer-events: none;",SIe=function(e){var t=wIe(e),n=function(){var s=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(K0.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:s,dragging:ZIe,dropAnimating:s}}}(),r=function(){var s=`
      transition: `+tx.outOfTheWay+`;
    `;return{selector:t(PV.contextId),styles:{dragging:s,dropAnimating:s,userCancel:s}}}(),i={selector:t(xIe.contextId),styles:{always:"overflow-anchor: none;"}},o={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},a=[r,n,i,o];return{always:by(a,"always"),resting:by(a,"resting"),dragging:by(a,"dragging"),dropAnimating:by(a,"dropAnimating"),userCancel:by(a,"userCancel")}},Yo=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?G.useLayoutEffect:G.useEffect,SA=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function kIe(e,t){var n=Wt(function(){return SIe(e)},[e]),r=G.useRef(null),i=G.useRef(null),o=Es(),a=Je(Ir(function(f){var h=i.current;h||Ge(),h.textContent=f}),[]),s=Je(function(f){var h=r.current;h||Ge(),h.textContent=f},[]);Yo(function(){!r.current&&!i.current||Ge();var f=SA(t),h=SA(t);return r.current=f,i.current=h,f.setAttribute(B0+"-always",e),h.setAttribute(B0+"-dynamic",e),o.head.appendChild(f),o.head.appendChild(h),s(n.always),a(n.resting),function(){var m=function(g){var y=g.current;y||Ge(),o.head.removeChild(y),g.current=null};m(r),m(i)}},[t,s,a,n.always,n.resting,e]);var l=Je(function(){return a(n.dragging)},[a,n.dragging]),u=Je(function(f){if(f==="DROP"){a(n.dropAnimating);return}a(n.userCancel)},[a,n.dropAnimating,n.userCancel]),c=Je(function(){i.current&&a(n.resting)},[a,n.resting]),d=Wt(function(){return{dragging:l,dropping:u,resting:c}},[l,u,c]);return d}var Aie=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function s3(e){return e instanceof Aie(e).HTMLElement}function _Ie(e,t,n){var r="["+K0.contextId+'="'+t+'"]',i=bie(e.querySelectorAll(r));if(!i.length)return null;var o=sf(i,function(a){return a.getAttribute(K0.draggableId)===n});return o&&s3(o)?o:null}function GIe(e){var t=G.useRef({}),n=G.useRef(null),r=G.useRef(null),i=G.useRef(!1),o=Je(function(f,h){var m={id:f,focus:h};return t.current[f]=m,function(){var g=t.current,y=g[f];y!==m&&delete g[f]}},[]),a=Es(),s=Je(function(f){var h=_Ie(a.body,e,f);h&&h!==document.activeElement&&h.focus()},[e]),l=Je(function(f,h){n.current===f&&(n.current=h)},[]),u=Je(function(){r.current||i.current&&(r.current=requestAnimationFrame(function(){r.current=null;var f=n.current;f&&s(f)}))},[s]),c=Je(function(f){n.current=null;var h=document.activeElement;h&&h.getAttribute(K0.draggableId)===f&&(n.current=f)},[]);Yo(function(){return i.current=!0,function(){i.current=!1;var f=r.current;f&&cancelAnimationFrame(f)}},[]);var d=Wt(function(){return{register:o,tryRecordFocus:c,tryRestoreFocusRecorded:u,tryShiftRecord:l}},[o,c,u,l]);return d}function IIe(){var e={draggables:{},droppables:{}},t=[];function n(d){return t.push(d),function(){var f=t.indexOf(d);f!==-1&&t.splice(f,1)}}function r(d){t.length&&t.forEach(function(f){return f(d)})}function i(d){return e.draggables[d]||null}function o(d){var f=i(d);return f||Ge(),f}var a={register:function(d){e.draggables[d.descriptor.id]=d,r({type:"ADDITION",value:d})},update:function(d,f){var h=e.draggables[f.descriptor.id];h&&h.uniqueId===d.uniqueId&&(delete e.draggables[f.descriptor.id],e.draggables[d.descriptor.id]=d)},unregister:function(d){var f=d.descriptor.id,h=i(f);h&&d.uniqueId===h.uniqueId&&(delete e.draggables[f],r({type:"REMOVAL",value:d}))},getById:o,findById:i,exists:function(d){return!!i(d)},getAllByType:function(d){return A9(e.draggables).filter(function(f){return f.descriptor.type===d})}};function s(d){return e.droppables[d]||null}function l(d){var f=s(d);return f||Ge(),f}var u={register:function(d){e.droppables[d.descriptor.id]=d},unregister:function(d){var f=s(d.descriptor.id);f&&d.uniqueId===f.uniqueId&&delete e.droppables[d.descriptor.id]},getById:l,findById:s,exists:function(d){return!!s(d)},getAllByType:function(d){return A9(e.droppables).filter(function(f){return f.descriptor.type===d})}};function c(){e.draggables={},e.droppables={},t.length=0}return{draggable:a,droppable:u,subscribe:n,clean:c}}function WIe(){var e=Wt(IIe,[]);return G.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var NM=x.createContext(null),EIe={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},XIe=function(e){return"rbd-announcement-"+e};function LIe(e){var t=Wt(function(){return XIe(e)},[e]),n=G.useRef(null),r=Es();G.useEffect(function(){var o=document.createElement("div");return n.current=o,o.id=t,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),$e(o.style,EIe),r.body.appendChild(o),function(){setTimeout(function(){var a=r.body;a.contains(o)&&a.removeChild(o),o===n.current&&(n.current=null)})}},[t]);var i=Je(function(o){var a=n.current;if(a){a.textContent=o;return}},[]);return i}var RIe=0,CIe={separator:"::"};function FM(e,t){return t===void 0&&(t=CIe),Wt(function(){return""+e+t.separator+RIe++},[t.separator,e])}function VIe(e){var t=e.contextId,n=e.uniqueId;return"rbd-hidden-text-"+t+"-"+n}function YIe(e){var t=e.contextId,n=e.text,r=FM("hidden-text",{separator:"-"}),i=Wt(function(){return VIe({contextId:t,uniqueId:r})},[r,t]),o=Es();return G.useEffect(function(){var a=document.createElement("div");return a.id=i,a.textContent=n,a.style.display="none",o.body.appendChild(a),function(){var s=o.body;s.contains(a)&&s.removeChild(a)}},[i,n]),i}var l3=x.createContext(null);function Uie(e){var t=G.useRef(e);return G.useEffect(function(){t.current=e}),t}function TIe(){var e=null;function t(){return!!e}function n(a){return a===e}function r(a){e&&Ge();var s={abandon:a};return e=s,s}function i(){e||Ge(),e=null}function o(){e&&(e.abandon(),i())}return{isClaimed:t,isActive:n,claim:r,release:i,tryAbandon:o}}var NIe=9,FIe=13,MM=27,$ie=32,MIe=33,OIe=34,zIe=35,PIe=36,jIe=37,HIe=38,JIe=39,BIe=40,mS,KIe=(mS={},mS[FIe]=!0,mS[NIe]=!0,mS),Qie=function(e){KIe[e.keyCode]&&e.preventDefault()},u3=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],n=sf(t,function(r){return"on"+r in document});return n||e}(),qie=0,kA=5;function DIe(e,t){return Math.abs(t.x-e.x)>=kA||Math.abs(t.y-e.y)>=kA}var _A={type:"IDLE"};function AIe(e){var t=e.cancel,n=e.completed,r=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(o){var a=o.button,s=o.clientX,l=o.clientY;if(a===qie){var u={x:s,y:l},c=r();if(c.type==="DRAGGING"){o.preventDefault(),c.actions.move(u);return}c.type!=="PENDING"&&Ge();var d=c.point;if(DIe(d,u)){o.preventDefault();var f=c.actions.fluidLift(u);i({type:"DRAGGING",actions:f})}}}},{eventName:"mouseup",fn:function(o){var a=r();if(a.type!=="DRAGGING"){t();return}o.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"mousedown",fn:function(o){r().type==="DRAGGING"&&o.preventDefault(),t()}},{eventName:"keydown",fn:function(o){var a=r();if(a.type==="PENDING"){t();return}if(o.keyCode===MM){o.preventDefault(),t();return}Qie(o)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){r().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(o){var a=r();if(a.type==="IDLE"&&Ge(),a.actions.shouldRespectForcePress()){t();return}o.preventDefault()}},{eventName:u3,fn:t}]}function eoe(e){var t=G.useRef(_A),n=G.useRef(gd),r=Es(),i=Wt(function(){return{eventName:"mousedown",fn:function(d){if(!d.defaultPrevented&&d.button===qie&&!(d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)){var f=e.findClosestDraggableId(d);if(f){var h=e.tryGetLock(f,s,{sourceEvent:d});if(h){d.preventDefault();var m={x:d.clientX,y:d.clientY};n.current(),c(h,m)}}}}}},[e]),o=Wt(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(d){if(!d.defaultPrevented){var f=e.findClosestDraggableId(d);if(f){var h=e.findOptionsForDraggable(f);h&&(h.shouldRespectForcePress||e.canGetLock(f)&&d.preventDefault())}}}}},[e]),a=Je(function(){var d={passive:!1,capture:!0};n.current=da(r.body,[o,i],d)},[o,i]),s=Je(function(){var d=t.current;d.type!=="IDLE"&&(t.current=_A,n.current(),a())},[a]),l=Je(function(){var d=t.current;s(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[s]),u=Je(function(){var d={capture:!0,passive:!1},f=AIe({cancel:l,completed:s,getPhase:function(){return t.current},setPhase:function(h){t.current=h}});n.current=da(r.body,f,d)},[l,s]),c=Je(function(d,f){t.current.type!=="IDLE"&&Ge(),t.current={type:"PENDING",point:f,actions:d},u()},[u]);Yo(function(){return a(),function(){n.current()}},[a])}var nm;function UIe(){}var $Ie=(nm={},nm[OIe]=!0,nm[MIe]=!0,nm[PIe]=!0,nm[zIe]=!0,nm);function QIe(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===MM){i.preventDefault(),n();return}if(i.keyCode===$ie){i.preventDefault(),r();return}if(i.keyCode===BIe){i.preventDefault(),e.moveDown();return}if(i.keyCode===HIe){i.preventDefault(),e.moveUp();return}if(i.keyCode===JIe){i.preventDefault(),e.moveRight();return}if(i.keyCode===jIe){i.preventDefault(),e.moveLeft();return}if($Ie[i.keyCode]){i.preventDefault();return}Qie(i)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:u3,fn:n}]}function toe(e){var t=G.useRef(UIe),n=Es(),r=Wt(function(){return{eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==$ie)return;var a=e.findClosestDraggableId(o);if(!a)return;var s=e.tryGetLock(a,c,{sourceEvent:o});if(!s)return;o.preventDefault();var l=!0,u=s.snapLift();t.current();function c(){l||Ge(),l=!1,t.current(),i()}t.current=da(n.body,QIe(u,c),{capture:!0,passive:!1})}}},[e]),i=Je(function(){var o={passive:!1,capture:!0};t.current=da(n.body,[r],o)},[r]);Yo(function(){return i(),function(){t.current()}},[i])}var hL={type:"IDLE"},qIe=120,eWe=.15;function tWe(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(r){r.preventDefault()}},{eventName:"keydown",fn:function(r){if(n().type!=="DRAGGING"){t();return}r.keyCode===MM&&r.preventDefault(),t()}},{eventName:u3,fn:t}]}function nWe(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var o=r();if(o.type!=="DRAGGING"){t();return}o.hasMoved=!0;var a=i.touches[0],s=a.clientX,l=a.clientY,u={x:s,y:l};i.preventDefault(),o.actions.move(u)}},{eventName:"touchend",fn:function(i){var o=r();if(o.type!=="DRAGGING"){t();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"touchcancel",fn:function(i){if(r().type!=="DRAGGING"){t();return}i.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(i){var o=r();o.type==="IDLE"&&Ge();var a=i.touches[0];if(a){var s=a.force>=eWe;if(s){var l=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){l&&t();return}if(l){if(o.hasMoved){i.preventDefault();return}t();return}i.preventDefault()}}}},{eventName:u3,fn:t}]}function noe(e){var t=G.useRef(hL),n=G.useRef(gd),r=Es(),i=Je(function(){return t.current},[]),o=Je(function(h){t.current=h},[]),a=Wt(function(){return{eventName:"touchstart",fn:function(h){if(!h.defaultPrevented){var m=e.findClosestDraggableId(h);if(m){var g=e.tryGetLock(m,l,{sourceEvent:h});if(g){var y=h.touches[0],v=y.clientX,w=y.clientY,Z={x:v,y:w};n.current(),f(g,Z)}}}}}},[e]),s=Je(function(){var h={capture:!0,passive:!1};n.current=da(r.body,[a],h)},[a]),l=Je(function(){var h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),o(hL),n.current(),s())},[s,o]),u=Je(function(){var h=t.current;l(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[l]),c=Je(function(){var h={capture:!0,passive:!1},m={cancel:u,completed:l,getPhase:i},g=da(r.body,nWe(m),h),y=da(r.body,tWe(m),h);n.current=function(){g(),y()}},[u,i,l]),d=Je(function(){var h=i();h.type!=="PENDING"&&Ge();var m=h.actions.fluidLift(h.point);o({type:"DRAGGING",actions:m,hasMoved:!1})},[i,o]),f=Je(function(h,m){i().type!=="IDLE"&&Ge();var g=setTimeout(d,qIe);o({type:"PENDING",point:m,actions:h,longPressTimerId:g}),c()},[c,i,o,d]);Yo(function(){return s(),function(){n.current();var h=i();h.type==="PENDING"&&(clearTimeout(h.longPressTimerId),o(hL))}},[i,s,o]),Yo(function(){var h=da(r.body,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return h},[])}var rWe={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function roe(e,t){if(t==null)return!1;var n=!!rWe[t.tagName.toLowerCase()];if(n)return!0;var r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:roe(e,t.parentElement)}function iWe(e,t){var n=t.target;return s3(n)?roe(e,n):!1}var oWe=function(e){return as(e.getBoundingClientRect()).center};function aWe(e){return e instanceof Aie(e).Element}var sWe=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],n=sf(t,function(r){return r in Element.prototype});return n||e}();function ioe(e,t){return e==null?null:e[sWe](t)?e:ioe(e.parentElement,t)}function lWe(e,t){return e.closest?e.closest(t):ioe(e,t)}function uWe(e){return"["+K0.contextId+'="'+e+'"]'}function cWe(e,t){var n=t.target;if(!aWe(n))return null;var r=uWe(e),i=lWe(n,r);return i&&s3(i)?i:null}function dWe(e,t){var n=cWe(e,t);return n?n.getAttribute(K0.draggableId):null}function fWe(e,t,n){var r="["+PV.contextId+'="'+t+'"]',i=bie(e.querySelectorAll(r)),o=sf(i,function(a){return a.getAttribute(PV.id)===n});return o&&s3(o)?o:null}function pWe(e){e.preventDefault()}function gS(e){var t=e.expected,n=e.phase,r=e.isLockActive;return e.shouldWarn,r()?t===n:!1}function ooe(e){var t=e.lockAPI,n=e.store,r=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var o=r.draggable.findById(i);return o?!(!o.options.isEnabled||!Jie(n.getState(),i)):!1}function hWe(e){var t=e.body,n=e.lockAPI,r=e.contextId,i=e.store,o=e.registry,a=e.draggableId,s=e.forceSensorStop,l=e.sourceEvent,u=ooe({lockAPI:n,store:i,registry:o,draggableId:a});if(!u)return null;var c=o.draggable.getById(a),d=fWe(t,r,c.descriptor.id);if(!d||l&&!c.options.canDragInteractiveElements&&iWe(d,l))return null;var f=n.claim(s||gd),h="PRE_DRAG";function m(){return c.options.shouldRespectForcePress}function g(){return n.isActive(f)}function y(I,E){gS({expected:I,phase:h,isLockActive:g,shouldWarn:!0})&&i.dispatch(E())}var v=y.bind(null,"DRAGGING");function w(I){function E(){n.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(E(),h!=="PRE_DRAG"&&Ge()),i.dispatch(cGe(I.liftActionArgs)),h="DRAGGING";function X(Y,C){if(C===void 0&&(C={shouldBlockNextClick:!1}),I.cleanup(),C.shouldBlockNextClick){var N=da(window,[{eventName:"click",fn:pWe,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(N)}E(),i.dispatch(Fie({reason:Y}))}return $e({isActive:function(){return gS({expected:"DRAGGING",phase:h,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:m,drop:function(Y){return X("DROP",Y)},cancel:function(Y){return X("CANCEL",Y)}},I.actions)}function Z(I){var E=Ox(function(Y){v(function(){return Nie({client:Y})})}),X=w({liftActionArgs:{id:a,clientSelection:I,movementMode:"FLUID"},cleanup:function(){return E.cancel()},actions:{move:E}});return $e({},X,{move:E})}function k(){var I={moveUp:function(){return v(vGe)},moveRight:function(){return v(wGe)},moveDown:function(){return v(xGe)},moveLeft:function(){return v(ZGe)}};return w({liftActionArgs:{id:a,clientSelection:oWe(d),movementMode:"SNAP"},cleanup:gd,actions:I})}function _(){var I=gS({expected:"PRE_DRAG",phase:h,isLockActive:g,shouldWarn:!0});I&&n.release()}var R={isActive:function(){return gS({expected:"PRE_DRAG",phase:h,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:m,fluidLift:Z,snapLift:k,abort:_};return R}var mWe=[eoe,toe,noe];function gWe(e){var t=e.contextId,n=e.store,r=e.registry,i=e.customSensors,o=e.enableDefaultSensors,a=[].concat(o?mWe:[],i||[]),s=G.useState(function(){return TIe()})[0],l=Je(function(w,Z){w.isDragging&&!Z.isDragging&&s.tryAbandon()},[s]);Yo(function(){var w=n.getState(),Z=n.subscribe(function(){var k=n.getState();l(w,k),w=k});return Z},[s,n,l]),Yo(function(){return s.tryAbandon},[s.tryAbandon]);for(var u=Es(),c=Je(function(w){return ooe({lockAPI:s,registry:r,store:n,draggableId:w})},[s,r,n]),d=Je(function(w,Z,k){return hWe({body:u.body,lockAPI:s,registry:r,contextId:t,store:n,draggableId:w,forceSensorStop:Z,sourceEvent:k&&k.sourceEvent?k.sourceEvent:null})},[t,s,r,n,u]),f=Je(function(w){return dWe(t,w)},[t]),h=Je(function(w){var Z=r.draggable.findById(w);return Z?Z.options:null},[r.draggable]),m=Je(function(){s.isClaimed()&&(s.tryAbandon(),n.getState().phase!=="IDLE"&&n.dispatch(EM()))},[s,n]),g=Je(s.isClaimed,[s]),y=Wt(function(){return{canGetLock:c,tryGetLock:d,findClosestDraggableId:f,findOptionsForDraggable:h,tryReleaseLock:m,isLockClaimed:g}},[c,d,f,h,m,g]),v=0;v<a.length;v++)a[v](y)}var bWe=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function yy(e){return e.current||Ge(),e.current}function yWe(e){var t=e.contextId,n=e.setCallbacks,r=e.sensors,i=e.nonce,o=e.dragHandleUsageInstructions,a=G.useRef(null),s=Uie(e),l=Je(function(){return bWe(s.current)},[s]),u=LIe(t),c=YIe({contextId:t,text:o}),d=kIe(t,i),f=Je(function(X){yy(a).dispatch(X)},[]),h=Wt(function(){return PD({publishWhileDragging:fGe,updateDroppableScroll:hGe,updateDroppableIsEnabled:mGe,updateDroppableIsCombineEnabled:gGe,collectionStarting:pGe},f)},[f]),m=WIe(),g=Wt(function(){return nIe(m,h)},[m,h]),y=Wt(function(){return vIe($e({scrollWindow:rIe,scrollDroppable:g.scrollDroppable},PD({move:Nie},f)))},[g.scrollDroppable,f]),v=GIe(t),w=Wt(function(){return QGe({announce:u,autoScroller:y,dimensionMarshal:g,focusMarshal:v,getResponders:l,styleMarshal:d})},[u,y,g,v,l,d]);a.current=w;var Z=Je(function(){var X=yy(a),Y=X.getState();Y.phase!=="IDLE"&&X.dispatch(EM())},[]),k=Je(function(){var X=yy(a).getState();return X.isDragging||X.phase==="DROP_ANIMATING"},[]),_=Wt(function(){return{isDragging:k,tryAbort:Z}},[k,Z]);n(_);var R=Je(function(X){return Jie(yy(a).getState(),X)},[]),I=Je(function(){return Uf(yy(a).getState())},[]),E=Wt(function(){return{marshal:g,focus:v,contextId:t,canLift:R,isMovementAllowed:I,dragHandleUsageInstructionsId:c,registry:m}},[t,g,c,v,R,I,m]);return gWe({contextId:t,store:w,registry:m,customSensors:r,enableDefaultSensors:e.enableDefaultSensors!==!1}),G.useEffect(function(){return Z},[Z]),x.createElement(l3.Provider,{value:E},x.createElement(i_e,{context:NM,store:w},e.children))}var vWe=0;function xWe(){return Wt(function(){return""+vWe++},[])}function wWe(e){var t=xWe(),n=e.dragHandleUsageInstructions||Qk.dragHandleUsageInstructions;return x.createElement(e9e,null,function(r){return x.createElement(yWe,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var aoe=function(e){return function(t){return e===t}},ZWe=aoe("scroll"),SWe=aoe("auto"),GA=function(e,t){return t(e.overflowX)||t(e.overflowY)},kWe=function(e){var t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return GA(n,ZWe)||GA(n,SWe)},_We=function(e){return!1},GWe=function e(t,n){return n==null?null:n===document.body?_We()?n:null:n===document.documentElement?null:kWe(n)?n:e(t,n.parentElement)},jV=function(e){return{x:e.scrollLeft,y:e.scrollTop}},IWe=function e(t){if(!t)return!1;var n=window.getComputedStyle(t);return n.position==="fixed"?!0:e(t.parentElement)},WWe=function(e,t){var n=GWe(e,t),r=IWe(t);return{closestScrollable:n,isFixedOnPage:r}},EWe=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,i=e.isFixedOnPage,o=e.direction,a=e.client,s=e.page,l=e.closest,u=function(){if(!l)return null;var h=l.scrollSize,m=l.client,g=Pie({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:m,scrollSize:h,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:g,diff:{value:Er,displacement:Er}}}}(),c=o==="vertical"?kM:Zie,d=J0({page:s,withPlaceholder:null,axis:c,frame:u}),f={descriptor:t,isCombineEnabled:r,isFixedOnPage:i,axis:c,isEnabled:n,client:a,page:s,frame:u,subject:d};return f},XWe=function(e,t){var n=die(e);if(!t||e!==t)return n;var r=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,o=r+t.scrollHeight,a=i+t.scrollWidth,s={top:r,right:a,bottom:o,left:i},l=yM(s,n.border),u=vM({borderBox:l,margin:n.margin,border:n.border,padding:n.padding});return u},LWe=function(e){var t=e.ref,n=e.descriptor,r=e.env,i=e.windowScroll,o=e.direction,a=e.isDropDisabled,s=e.isCombineEnabled,l=e.shouldClipSubject,u=r.closestScrollable,c=XWe(t,u),d=B9(c,i),f=function(){if(!u)return null;var m=die(u),g={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:m,page:B9(m,i),scroll:jV(u),scrollSize:g,shouldClipSubject:l}}(),h=EWe({descriptor:n,isEnabled:!a,isCombineEnabled:s,isFixedOnPage:r.isFixedOnPage,direction:o,client:c,page:d,closest:f});return h},RWe={passive:!1},CWe={passive:!0},IA=function(e){return e.shouldPublishImmediately?RWe:CWe};function $9(e){var t=G.useContext(e);return t||Ge(),t}var bS=function(e){return e&&e.env.closestScrollable||null};function VWe(e){var t=G.useRef(null),n=$9(l3),r=FM("droppable"),i=n.registry,o=n.marshal,a=Uie(e),s=Wt(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),l=G.useRef(s),u=Wt(function(){return Ir(function(_,R){t.current||Ge();var I={x:_,y:R};o.updateDroppableScroll(s.id,I)})},[s.id,o]),c=Je(function(){var _=t.current;return!_||!_.env.closestScrollable?Er:jV(_.env.closestScrollable)},[]),d=Je(function(){var _=c();u(_.x,_.y)},[c,u]),f=Wt(function(){return Ox(d)},[d]),h=Je(function(){var _=t.current,R=bS(_);_&&R||Ge();var I=_.scrollOptions;if(I.shouldPublishImmediately){d();return}f()},[f,d]),m=Es(),g=Je(function(_,R){t.current&&Ge();var I=a.current,E=I.getDroppableRef();E||Ge();var X=WWe(m.body,E),Y={ref:E,descriptor:s,env:X,scrollOptions:R};t.current=Y;var C=LWe({ref:E,descriptor:s,env:X,windowScroll:_,direction:I.direction,isDropDisabled:I.isDropDisabled,isCombineEnabled:I.isCombineEnabled,shouldClipSubject:!I.ignoreContainerClipping}),N=X.closestScrollable;return N&&(N.setAttribute(ZA.contextId,n.contextId),N.addEventListener("scroll",h,IA(Y.scrollOptions))),C},[n.contextId,s,h,a,m]),y=Je(function(){var _=t.current,R=bS(_);return _&&R||Ge(),jV(R)},[]),v=Je(function(){var _=t.current;_||Ge();var R=bS(_);t.current=null,R&&(f.cancel(),R.removeAttribute(ZA.contextId),R.removeEventListener("scroll",h,IA(_.scrollOptions)))},[h,f]),w=Je(function(_){var R=t.current;R||Ge();var I=bS(R);I||Ge(),I.scrollTop+=_.y,I.scrollLeft+=_.x},[]),Z=Wt(function(){return{getDimensionAndWatchScroll:g,getScrollWhileDragging:y,dragStopped:v,scroll:w}},[v,g,y,w]),k=Wt(function(){return{uniqueId:r,descriptor:s,callbacks:Z}},[Z,s,r]);Yo(function(){return l.current=k.descriptor,i.droppable.register(k),function(){t.current&&v(),i.droppable.unregister(k)}},[Z,s,v,k,o,i.droppable]),Yo(function(){t.current&&o.updateDroppableIsEnabled(l.current.id,!e.isDropDisabled)},[e.isDropDisabled,o]),Yo(function(){t.current&&o.updateDroppableIsCombineEnabled(l.current.id,e.isCombineEnabled)},[e.isCombineEnabled,o])}function mL(){}var YWe={width:0,height:0,margin:a9e},TWe=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate;return t||r==="close"?YWe:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},NWe=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate,i=TWe({isAnimatingOpenOnMount:t,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?tx.placeholder:null}};function FWe(e){var t=G.useRef(null),n=Je(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),r=e.animate,i=e.onTransitionEnd,o=e.onClose,a=e.contextId,s=G.useState(e.animate==="open"),l=s[0],u=s[1];G.useEffect(function(){return l?r!=="open"?(n(),u(!1),mL):t.current?mL:(t.current=setTimeout(function(){t.current=null,u(!1)}),n):mL},[r,l,n]);var c=Je(function(f){f.propertyName==="height"&&(i(),r==="close"&&o())},[r,o,i]),d=NWe({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return x.createElement(e.placeholder.tagName,{style:d,"data-rbd-placeholder-context-id":a,onTransitionEnd:c,ref:e.innerRef})}var MWe=x.memo(FWe),OM=x.createContext(null),OWe=function(e){$re(t,e);function t(){for(var r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o))||this,r.state={isVisible:!!r.props.on,data:r.props.on,animate:r.props.shouldAnimate&&r.props.on?"open":"none"},r.onClose=function(){r.state.animate==="close"&&r.setState({isVisible:!1})},r}t.getDerivedStateFromProps=function(r,i){return r.shouldAnimate?r.on?{isVisible:!0,data:r.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!r.on,data:r.on,animate:"none"}};var n=t.prototype;return n.render=function(){if(!this.state.isVisible)return null;var r={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(r)},t}(x.PureComponent),WA={dragging:5e3,dropAnimating:4500},zWe=function(e,t){return t?tx.drop(t.duration):e?tx.snap:tx.fluid},PWe=function(e,t){return e?t?Hx.opacity.drop:Hx.opacity.combining:null},jWe=function(e){return e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP"};function HWe(e){var t=e.dimension,n=t.client,r=e.offset,i=e.combineWith,o=e.dropping,a=!!i,s=jWe(e),l=!!o,u=l?OV.drop(r,a):OV.moveTo(r),c={position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:zWe(s,o),transform:u,opacity:PWe(a,l),zIndex:l?WA.dropAnimating:WA.dragging,pointerEvents:"none"};return c}function JWe(e){return{transform:OV.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function BWe(e){return e.type==="DRAGGING"?HWe(e):JWe(e)}function KWe(e,t,n){n===void 0&&(n=Er);var r=window.getComputedStyle(t),i=t.getBoundingClientRect(),o=cie(i,r),a=B9(o,n),s={client:o,tagName:t.tagName.toLowerCase(),display:r.display},l={x:o.marginBox.width,y:o.marginBox.height},u={descriptor:e,placeholder:s,displaceBy:l,client:o,page:a};return u}function DWe(e){var t=FM("draggable"),n=e.descriptor,r=e.registry,i=e.getDraggableRef,o=e.canDragInteractiveElements,a=e.shouldRespectForcePress,s=e.isEnabled,l=Wt(function(){return{canDragInteractiveElements:o,shouldRespectForcePress:a,isEnabled:s}},[o,s,a]),u=Je(function(h){var m=i();return m||Ge(),KWe(n,m,h)},[n,i]),c=Wt(function(){return{uniqueId:t,descriptor:n,options:l,getDimension:u}},[n,u,l,t]),d=G.useRef(c),f=G.useRef(!0);Yo(function(){return r.draggable.register(d.current),function(){return r.draggable.unregister(d.current)}},[r.draggable]),Yo(function(){if(f.current){f.current=!1;return}var h=d.current;d.current=c,r.draggable.update(c,h)},[c,r.draggable])}function AWe(e,t,n){Es()}function UWe(e){e.preventDefault()}function $We(e){var t=G.useRef(null),n=Je(function(X){t.current=X},[]),r=Je(function(){return t.current},[]),i=$9(l3),o=i.contextId,a=i.dragHandleUsageInstructionsId,s=i.registry,l=$9(OM),u=l.type,c=l.droppableId,d=Wt(function(){return{id:e.draggableId,index:e.index,type:u,droppableId:c}},[e.draggableId,e.index,u,c]),f=e.children,h=e.draggableId,m=e.isEnabled,g=e.shouldRespectForcePress,y=e.canDragInteractiveElements,v=e.isClone,w=e.mapped,Z=e.dropAnimationFinished;if(AWe(),!v){var k=Wt(function(){return{descriptor:d,registry:s,getDraggableRef:r,canDragInteractiveElements:y,shouldRespectForcePress:g,isEnabled:m}},[d,s,r,y,g,m]);DWe(k)}var _=Wt(function(){return m?{tabIndex:0,role:"button","aria-describedby":a,"data-rbd-drag-handle-draggable-id":h,"data-rbd-drag-handle-context-id":o,draggable:!1,onDragStart:UWe}:null},[o,a,h,m]),R=Je(function(X){w.type==="DRAGGING"&&w.dropping&&X.propertyName==="transform"&&Z()},[Z,w]),I=Wt(function(){var X=BWe(w),Y=w.type==="DRAGGING"&&w.dropping?R:null,C={innerRef:n,draggableProps:{"data-rbd-draggable-context-id":o,"data-rbd-draggable-id":h,style:X,onTransitionEnd:Y},dragHandleProps:_};return C},[o,_,h,w,R,n]),E=Wt(function(){return{draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}},[d.droppableId,d.id,d.index,d.type]);return f(I,w.snapshot,E)}var soe=function(e,t){return e===t},loe=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null},QWe=function(e){return e.combine?e.combine.draggableId:null},qWe=function(e){return e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null};function e3e(){var e=Ir(function(i,o){return{x:i,y:o}}),t=Ir(function(i,o,a,s,l){return{isDragging:!0,isClone:o,isDropAnimating:!!l,dropAnimation:l,mode:i,draggingOver:a,combineWith:s,combineTargetFor:null}}),n=Ir(function(i,o,a,s,l,u,c){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:u,mode:o,offset:i,dimension:a,forceShouldAnimate:c,snapshot:t(o,s,l,u,null)}}}),r=function(i,o){if(i.isDragging){if(i.critical.draggable.id!==o.draggableId)return null;var a=i.current.client.offset,s=i.dimensions.draggables[o.draggableId],l=Vo(i.impact),u=qWe(i.impact),c=i.forceShouldAnimate;return n(e(a.x,a.y),i.movementMode,s,o.isClone,l,u,c)}if(i.phase==="DROP_ANIMATING"){var d=i.completed;if(d.result.draggableId!==o.draggableId)return null;var f=o.isClone,h=i.dimensions.draggables[o.draggableId],m=d.result,g=m.mode,y=loe(m),v=QWe(m),w=i.dropDuration,Z={duration:w,curve:LM.drop,moveTo:i.newHomeClientOffset,opacity:v?Hx.opacity.drop:null,scale:v?Hx.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:h,dropping:Z,draggingOver:y,combineWith:v,mode:g,forceShouldAnimate:null,snapshot:t(g,f,y,v,Z)}}}return null};return r}function uoe(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var t3e={mapped:{type:"SECONDARY",offset:Er,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:uoe(null)}};function n3e(){var e=Ir(function(a,s){return{x:a,y:s}}),t=Ir(uoe),n=Ir(function(a,s,l){return s===void 0&&(s=null),{mapped:{type:"SECONDARY",offset:a,combineTargetFor:s,shouldAnimateDisplacement:l,snapshot:t(s)}}}),r=function(a){return a?n(Er,a,!0):null},i=function(a,s,l,u){var c=l.displaced.visible[a],d=!!(u.inVirtualList&&u.effected[a]),f=i3(l),h=f&&f.draggableId===a?s:null;if(!c){if(!d)return r(h);if(l.displaced.invisible[a])return null;var m=Ug(u.displacedBy.point),g=e(m.x,m.y);return n(g,h,!0)}if(d)return r(h);var y=l.displacedBy.point,v=e(y.x,y.y);return n(v,h,c.shouldAnimate)},o=function(a,s){if(a.isDragging)return a.critical.draggable.id===s.draggableId?null:i(s.draggableId,a.critical.draggable.id,a.impact,a.afterCritical);if(a.phase==="DROP_ANIMATING"){var l=a.completed;return l.result.draggableId===s.draggableId?null:i(s.draggableId,l.result.draggableId,l.impact,l.afterCritical)}return null};return o}var r3e=function(){var e=e3e(),t=n3e(),n=function(r,i){return e(r,i)||t(r,i)||t3e};return n},i3e={dropAnimationFinished:Mie},o3e=lie(r3e,i3e,null,{context:NM,pure:!0,areStatePropsEqual:soe})($We);function coe(e){var t=$9(OM),n=t.isUsingCloneFor;return n===e.draggableId&&!e.isClone?null:x.createElement(o3e,e)}function Aw(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return x.createElement(coe,$e({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}function a3e(e){var t=G.useContext(l3);t||Ge();var n=t.contextId,r=t.isMovementAllowed,i=G.useRef(null),o=G.useRef(null),a=e.children,s=e.droppableId,l=e.type,u=e.mode,c=e.direction,d=e.ignoreContainerClipping,f=e.isDropDisabled,h=e.isCombineEnabled,m=e.snapshot,g=e.useClone,y=e.updateViewportMaxScroll,v=e.getContainerForClone,w=Je(function(){return i.current},[]),Z=Je(function(N){i.current=N},[]);Je(function(){return o.current},[]);var k=Je(function(N){o.current=N},[]),_=Je(function(){r()&&y({maxScroll:Hie()})},[r,y]);VWe({droppableId:s,type:l,mode:u,direction:c,isDropDisabled:f,isCombineEnabled:h,ignoreContainerClipping:d,getDroppableRef:w});var R=x.createElement(OWe,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(N){var V=N.onClose,F=N.data,O=N.animate;return x.createElement(MWe,{placeholder:F,onClose:V,innerRef:k,animate:O,contextId:n,onTransitionEnd:_})}),I=Wt(function(){return{innerRef:Z,placeholder:R,droppableProps:{"data-rbd-droppable-id":s,"data-rbd-droppable-context-id":n}}},[n,s,R,Z]),E=g?g.dragging.draggableId:null,X=Wt(function(){return{droppableId:s,type:l,isUsingCloneFor:E}},[s,E,l]),Y=Es();function C(){if(!g)return null;var N=g.dragging,V=g.render,F=x.createElement(coe,{draggableId:N.draggableId,index:N.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(O,P){return V(O,P,N)});return MSe.createPortal(F,v?v():Y.body)}return x.createElement(OM.Provider,{value:X},a(I,m),C())}var gL=function(e,t){return e===t.droppable.type},EA=function(e,t){return t.draggables[e.draggable.id]},s3e=function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=$e({},e,{shouldAnimatePlaceholder:!1}),n=Ir(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),r=Ir(function(o,a,s,l,u,c){var d=u.descriptor.id,f=u.descriptor.droppableId===o;if(f){var h=c?{render:c,dragging:n(u.descriptor)}:null,m={isDraggingOver:s,draggingOverWith:s?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:m,useClone:h}}if(!a)return t;if(!l)return e;var g={isDraggingOver:s,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:g,useClone:null}}),i=function(o,a){var s=a.droppableId,l=a.type,u=!a.isDropDisabled,c=a.renderClone;if(o.isDragging){var d=o.critical;if(!gL(l,d))return t;var f=EA(d,o.dimensions),h=Vo(o.impact)===s;return r(s,u,h,h,f,c)}if(o.phase==="DROP_ANIMATING"){var m=o.completed;if(!gL(l,m.critical))return t;var g=EA(m.critical,o.dimensions);return r(s,u,loe(m.result)===s,Vo(m.impact)===s,g,c)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){var y=o.completed;if(!gL(l,y.critical))return t;var v=Vo(y.impact)===s,w=!!(y.impact.at&&y.impact.at.type==="COMBINE"),Z=y.critical.droppable.id===s;return v?w?e:t:Z?e:t}return t};return i},l3e={updateViewportMaxScroll:yGe},u3e={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:null},D0=lie(s3e,l3e,null,{context:NM,pure:!0,areStatePropsEqual:soe})(a3e);D0.defaultProps=u3e;function It(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var c3e={};function zM(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:c3e}var doe=Object.assign,Q9=Object.getOwnPropertyDescriptor,wl=Object.defineProperty,Uw=Object.prototype,HV=[];Object.freeze(HV);var foe={};Object.freeze(foe);var d3e=typeof Proxy<"u",f3e=Object.toString();function poe(){d3e||It("Proxy not available")}function hoe(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var r0=function(){};function Zs(e){return typeof e=="function"}function Op(e){var t=typeof e;switch(t){case"string":case"symbol":case"number":return!0}return!1}function c3(e){return e!==null&&typeof e=="object"}function ec(e){if(!c3(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n.toString()===f3e}function moe(e){var t=e==null?void 0:e.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function $w(e,t,n){wl(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function goe(e,t,n){wl(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function lf(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(r){return c3(r)&&r[n]===!0}}function qg(e){return e instanceof Map}function Qw(e){return e instanceof Set}var boe=typeof Object.getOwnPropertySymbols<"u";function p3e(e){var t=Object.keys(e);if(!boe)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter(function(r){return Uw.propertyIsEnumerable.call(e,r)})):t}var A0=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:boe?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function yoe(e){return e===null?null:typeof e=="object"?""+e:e}function Pu(e,t){return Uw.hasOwnProperty.call(e,t)}var h3e=Object.getOwnPropertyDescriptors||function(e){var t={};return A0(e).forEach(function(n){t[n]=Q9(e,n)}),t};function m3e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y3e(r.key),r)}}function PM(e,t,n){return t&&m3e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function U0(){return U0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U0.apply(this,arguments)}function voe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,JV(e,t)}function JV(e,t){return JV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},JV(e,t)}function bL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g3e(e,t){if(e){if(typeof e=="string")return XA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XA(e,t)}}function XA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i0(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=g3e(e))||t){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b3e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function y3e(e){var t=b3e(e,"string");return typeof t=="symbol"?t:String(t)}var pl=Symbol("mobx-stored-annotations");function Zl(e){function t(n,r){qw(n,r,e)}return Object.assign(t,e)}function qw(e,t,n){Pu(e,pl)||$w(e,pl,U0({},e[pl])),_3e(n)||(e[pl][t]=n)}function v3e(e){return Pu(e,pl)||$w(e,pl,U0({},e[pl])),e[pl]}var it=Symbol("mobx administration"),e5=function(){function e(n){n===void 0&&(n="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Lt.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=n}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},t.reportObserved=function(){return Ooe(this)},t.reportChanged=function(){$i(),zoe(this),Qi()},t.toString=function(){return this.name_},e}(),jM=lf("Atom",e5);function xoe(e,t,n){t===void 0&&(t=r0),n===void 0&&(n=r0);var r=new e5(e);return t!==r0&&k1e(r,t),n!==r0&&Uoe(r,n),r}function x3e(e,t){return fae(e,t)}function w3e(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e===1/t:e!==e&&t!==t}var q9={structural:x3e,default:w3e};function t5(e,t,n){return KM(e)?e:Array.isArray(e)?Bn.array(e,{name:n}):ec(e)?Bn.object(e,void 0,{name:n}):qg(e)?Bn.map(e,{name:n}):Qw(e)?Bn.set(e,{name:n}):typeof e=="function"&&!BM(e)&&!rG(e)?moe(e)?Dx(e):Kx(n,e):e}function Z3e(e,t,n){if(e==null||Q0(e)||l5(e)||cf(e)||yh(e))return e;if(Array.isArray(e))return Bn.array(e,{name:n,deep:!1});if(ec(e))return Bn.object(e,void 0,{name:n,deep:!1});if(qg(e))return Bn.map(e,{name:n,deep:!1});if(Qw(e))return Bn.set(e,{name:n,deep:!1})}function d3(e){return e}function S3e(e,t){return fae(e,t)?t:e}var k3e="override";function _3e(e){return e.annotationType_===k3e}function n5(e,t){return{annotationType_:e,options_:t,make_:G3e,extend_:I3e}}function G3e(e,t,n,r){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(e,t,n,!1)===null?0:1;if(r===e.target_)return this.extend_(e,t,n,!1)===null?0:2;if(BM(n.value))return 1;var o=woe(e,this,t,n,!1);return wl(r,t,o),2}function I3e(e,t,n,r){var i=woe(e,this,t,n);return e.defineProperty_(t,i,r)}function W3e(e,t,n,r){t.annotationType_,r.value}function woe(e,t,n,r,i){var o,a,s,l,u,c,d;i===void 0&&(i=Ie.safeDescriptors),W3e(e,t,n,r);var f=r.value;if((o=t.options_)!=null&&o.bound){var h;f=f.bind((h=e.proxy_)!=null?h:e.target_)}return{value:$0((a=(s=t.options_)==null?void 0:s.name)!=null?a:n.toString(),f,(l=(u=t.options_)==null?void 0:u.autoAction)!=null?l:!1,(c=t.options_)!=null&&c.bound?(d=e.proxy_)!=null?d:e.target_:void 0),configurable:i?e.isPlainObject_:!0,enumerable:!1,writable:!i}}function Zoe(e,t){return{annotationType_:e,options_:t,make_:E3e,extend_:X3e}}function E3e(e,t,n,r){var i;if(r===e.target_)return this.extend_(e,t,n,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!Pu(e.target_,t)||!rG(e.target_[t]))&&this.extend_(e,t,n,!1)===null)return 0;if(rG(n.value))return 1;var o=Soe(e,this,t,n,!1,!1);return wl(r,t,o),2}function X3e(e,t,n,r){var i,o=Soe(e,this,t,n,(i=this.options_)==null?void 0:i.bound);return e.defineProperty_(t,o,r)}function L3e(e,t,n,r){t.annotationType_,r.value}function Soe(e,t,n,r,i,o){o===void 0&&(o=Ie.safeDescriptors),L3e(e,t,n,r);var a=r.value;if(rG(a)||(a=Dx(a)),i){var s;a=a.bind((s=e.proxy_)!=null?s:e.target_),a.isMobXFlow=!0}return{value:a,configurable:o?e.isPlainObject_:!0,enumerable:!1,writable:!o}}function HM(e,t){return{annotationType_:e,options_:t,make_:R3e,extend_:C3e}}function R3e(e,t,n){return this.extend_(e,t,n,!1)===null?0:1}function C3e(e,t,n,r){return V3e(e,this,t,n),e.defineComputedProperty_(t,U0({},this.options_,{get:n.get,set:n.set}),r)}function V3e(e,t,n,r){t.annotationType_,r.get}function f3(e,t){return{annotationType_:e,options_:t,make_:Y3e,extend_:T3e}}function Y3e(e,t,n){return this.extend_(e,t,n,!1)===null?0:1}function T3e(e,t,n,r){var i,o;return N3e(e,this),e.defineObservableProperty_(t,n.value,(i=(o=this.options_)==null?void 0:o.enhancer)!=null?i:t5,r)}function N3e(e,t,n,r){t.annotationType_}var F3e="true",M3e=koe();function koe(e){return{annotationType_:F3e,options_:e,make_:O3e,extend_:z3e}}function O3e(e,t,n,r){var i,o;if(n.get)return eb.make_(e,t,n,r);if(n.set){var a=$0(t.toString(),n.set);return r===e.target_?e.defineProperty_(t,{configurable:Ie.safeDescriptors?e.isPlainObject_:!0,set:a})===null?0:2:(wl(r,t,{configurable:!0,set:a}),2)}if(r!==e.target_&&typeof n.value=="function"){var s;if(moe(n.value)){var l,u=(l=this.options_)!=null&&l.autoBind?Dx.bound:Dx;return u.make_(e,t,n,r)}var c=(s=this.options_)!=null&&s.autoBind?Kx.bound:Kx;return c.make_(e,t,n,r)}var d=((i=this.options_)==null?void 0:i.deep)===!1?Bn.ref:Bn;if(typeof n.value=="function"&&(o=this.options_)!=null&&o.autoBind){var f;n.value=n.value.bind((f=e.proxy_)!=null?f:e.target_)}return d.make_(e,t,n,r)}function z3e(e,t,n,r){var i,o;if(n.get)return eb.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:Ie.safeDescriptors?e.isPlainObject_:!0,set:$0(t.toString(),n.set)},r);if(typeof n.value=="function"&&(i=this.options_)!=null&&i.autoBind){var a;n.value=n.value.bind((a=e.proxy_)!=null?a:e.target_)}var s=((o=this.options_)==null?void 0:o.deep)===!1?Bn.ref:Bn;return s.extend_(e,t,n,r)}var P3e="observable",j3e="observable.ref",H3e="observable.shallow",J3e="observable.struct",_oe={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(_oe);function yS(e){return e||_oe}var Goe=f3(P3e),B3e=f3(j3e,{enhancer:d3}),K3e=f3(H3e,{enhancer:Z3e}),D3e=f3(J3e,{enhancer:S3e}),Ioe=Zl(Goe);function vS(e){return e.deep===!0?t5:e.deep===!1?d3:U3e(e.defaultDecorator)}function A3e(e){var t;return e?(t=e.defaultDecorator)!=null?t:koe(e):void 0}function U3e(e){var t,n;return e&&(t=(n=e.options_)==null?void 0:n.enhancer)!=null?t:t5}function Woe(e,t,n){if(Op(t)){qw(e,t,Goe);return}return KM(e)?e:ec(e)?Bn.object(e,t,n):Array.isArray(e)?Bn.array(e,t):qg(e)?Bn.map(e,t):Qw(e)?Bn.set(e,t):typeof e=="object"&&e!==null?e:Bn.box(e,t)}doe(Woe,Ioe);var $3e={box:function(e,t){var n=yS(t);return new Zp(e,vS(n),n.name,!0,n.equals)},array:function(e,t){var n=yS(t);return(Ie.useProxies===!1||n.proxy===!1?U1e:z1e)(e,vS(n),n.name)},map:function(e,t){var n=yS(t);return new iae(e,vS(n),n.name)},set:function(e,t){var n=yS(t);return new sae(e,vS(n),n.name)},object:function(e,t,n){return Qoe(Ie.useProxies===!1||(n==null?void 0:n.proxy)===!1?u5({},n):N1e({},n),e,t)},ref:Zl(B3e),shallow:Zl(K3e),deep:Ioe,struct:Zl(D3e)},Bn=doe(Woe,$3e),Eoe="computed",Q3e="computed.struct",Xoe=HM(Eoe),q3e=HM(Q3e,{equals:q9.structural}),eb=function(e,t){if(Op(t))return qw(e,t,Xoe);if(ec(e))return Zl(HM(Eoe,e));var n=ec(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new Jx(n)};Object.assign(eb,Xoe);eb.struct=Zl(q3e);var LA,RA,eG=0,e1e=1,t1e=(LA=(RA=Q9(function(){},"name"))==null?void 0:RA.configurable)!=null?LA:!1,CA={value:"action",configurable:!0,writable:!1,enumerable:!1};function $0(e,t,n,r){n===void 0&&(n=!1);function i(){return Loe(e,n,t,r||this,arguments)}return i.isMobxAction=!0,t1e&&(CA.value=e,wl(i,"name",CA)),i}function Loe(e,t,n,r,i){var o=n1e(e,t);try{return n.apply(r,i)}catch(a){throw o.error_=a,a}finally{r1e(o)}}function n1e(e,t,n,r){var i=!1,o=0,a=Ie.trackingDerivation,s=!t||!a;$i();var l=Ie.allowStateChanges;s&&(tb(),l=r5(!0));var u=JM(!0),c={runAsAction_:s,prevDerivation_:a,prevAllowStateChanges_:l,prevAllowStateReads_:u,notifySpy_:i,startTime_:o,actionId_:e1e++,parentActionId_:eG};return eG=c.actionId_,c}function r1e(e){eG!==e.actionId_&&It(30),eG=e.parentActionId_,e.error_!==void 0&&(Ie.suppressReactionErrors=!0),i5(e.prevAllowStateChanges_),nx(e.prevAllowStateReads_),Qi(),e.runAsAction_&&vd(e.prevDerivation_),Ie.suppressReactionErrors=!1}function i1e(e,t){var n=r5(e);try{return t()}finally{i5(n)}}function r5(e){var t=Ie.allowStateChanges;return Ie.allowStateChanges=e,t}function i5(e){Ie.allowStateChanges=e}var Roe;Roe=Symbol.toPrimitive;var Zp=function(e){voe(t,e);function t(r,i,o,a,s){var l;return o===void 0&&(o="ObservableValue"),s===void 0&&(s=q9.default),l=e.call(this,o)||this,l.enhancer=void 0,l.name_=void 0,l.equals=void 0,l.hasUnreportedChange_=!1,l.interceptors_=void 0,l.changeListeners_=void 0,l.value_=void 0,l.dehancer=void 0,l.enhancer=i,l.name_=o,l.equals=s,l.value_=i(r,void 0,o),l}var n=t.prototype;return n.dehanceValue=function(r){return this.dehancer!==void 0?this.dehancer(r):r},n.set=function(r){this.value_,r=this.prepareNewValue_(r),r!==Ie.UNCHANGED&&this.setNewValue_(r)},n.prepareNewValue_=function(r){if(aa(this)){var i=sa(this,{object:this,type:Sl,newValue:r});if(!i)return Ie.UNCHANGED;r=i.newValue}return r=this.enhancer(r,this.value_,this.name_),this.equals(this.value_,r)?Ie.UNCHANGED:r},n.setNewValue_=function(r){var i=this.value_;this.value_=r,this.reportChanged(),ms(this)&&gs(this,{type:Sl,object:this,newValue:r,oldValue:i})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(r){return a5(this,r)},n.observe_=function(r,i){return i&&r({observableKind:"value",debugObjectName:this.name_,object:this,type:Sl,newValue:this.value_,oldValue:void 0}),s5(this,r)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return yoe(this.get())},n[Roe]=function(){return this.valueOf()},t}(e5),o1e=lf("ObservableValue",Zp),Coe;Coe=Symbol.toPrimitive;var Jx=function(){function e(n){this.dependenciesState_=Lt.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Lt.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new tG(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Sp.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,n.get||It(31),this.derivation=n.get,this.name_=n.name||"ComputedValue",n.set&&(this.setter_=$0("ComputedValue-setter",n.set)),this.equals_=n.equals||(n.compareStructural||n.struct?q9.structural:q9.default),this.scope_=n.context,this.requiresReaction_=n.requiresReaction,this.keepAlive_=!!n.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){c1e(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},t.get=function(){if(this.isComputing_&&It(32,this.name_,this.derivation),Ie.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)BV(this)&&(this.warnAboutUntrackedRead_(),$i(),this.value_=this.computeValue_(!1),Qi());else if(Ooe(this),BV(this)){var n=Ie.trackingContext;this.keepAlive_&&!n&&(Ie.trackingContext=this),this.trackAndCompute()&&u1e(this),Ie.trackingContext=n}var r=this.value_;if(qk(r))throw r.cause;return r},t.set=function(n){if(this.setter_){this.isRunningSetter_&&It(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else It(34,this.name_)},t.trackAndCompute=function(){var n=this.value_,r=this.dependenciesState_===Lt.NOT_TRACKING_,i=this.computeValue_(!0),o=r||qk(n)||qk(i)||!this.equals_(n,i);return o&&(this.value_=i),o},t.computeValue_=function(n){this.isComputing_=!0;var r=r5(!1),i;if(n)i=Voe(this,this.derivation,this.scope_);else if(Ie.disableErrorBoundaries===!0)i=this.derivation.call(this.scope_);else try{i=this.derivation.call(this.scope_)}catch(o){i=new tG(o)}return i5(r),this.isComputing_=!1,i},t.suspend_=function(){this.keepAlive_||(KV(this),this.value_=void 0)},t.observe_=function(n,r){var i=this,o=!0,a=void 0;return v1e(function(){var s=i.get();if(!o||r){var l=tb();n({observableKind:"computed",debugObjectName:i.name_,type:Sl,object:i,newValue:s,oldValue:a}),vd(l)}o=!1,a=s})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return yoe(this.get())},t[Coe]=function(){return this.valueOf()},e}(),o5=lf("ComputedValue",Jx),Lt;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(Lt||(Lt={}));var Sp;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(Sp||(Sp={}));var tG=function(e){this.cause=void 0,this.cause=e};function qk(e){return e instanceof tG}function BV(e){switch(e.dependenciesState_){case Lt.UP_TO_DATE_:return!1;case Lt.NOT_TRACKING_:case Lt.STALE_:return!0;case Lt.POSSIBLY_STALE_:{for(var t=JM(!0),n=tb(),r=e.observing_,i=r.length,o=0;o<i;o++){var a=r[o];if(o5(a)){if(Ie.disableErrorBoundaries)a.get();else try{a.get()}catch(s){return vd(n),nx(t),!0}if(e.dependenciesState_===Lt.STALE_)return vd(n),nx(t),!0}}return Toe(e),vd(n),nx(t),!1}}}function Voe(e,t,n){var r=JM(!0);Toe(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++Ie.runId;var i=Ie.trackingDerivation;Ie.trackingDerivation=e,Ie.inBatch++;var o;if(Ie.disableErrorBoundaries===!0)o=t.call(n);else try{o=t.call(n)}catch(a){o=new tG(a)}return Ie.inBatch--,Ie.trackingDerivation=i,a1e(e),nx(r),o}function a1e(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=Lt.UP_TO_DATE_,i=0,o=e.unboundDepsCount_,a=0;a<o;a++){var s=n[a];s.diffValue_===0&&(s.diffValue_=1,i!==a&&(n[i]=s),i++),s.dependenciesState_>r&&(r=s.dependenciesState_)}for(n.length=i,e.newObserving_=null,o=t.length;o--;){var l=t[o];l.diffValue_===0&&Foe(l,e),l.diffValue_=0}for(;i--;){var u=n[i];u.diffValue_===1&&(u.diffValue_=0,l1e(u,e))}r!==Lt.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}function KV(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)Foe(t[n],e);e.dependenciesState_=Lt.NOT_TRACKING_}function Yoe(e){var t=tb();try{return e()}finally{vd(t)}}function tb(){var e=Ie.trackingDerivation;return Ie.trackingDerivation=null,e}function vd(e){Ie.trackingDerivation=e}function JM(e){var t=Ie.allowStateReads;return Ie.allowStateReads=e,t}function nx(e){Ie.allowStateReads=e}function Toe(e){if(e.dependenciesState_!==Lt.UP_TO_DATE_){e.dependenciesState_=Lt.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=Lt.UP_TO_DATE_}}var e_=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},t_=!0,Noe=!1,Ie=function(){var e=zM();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(t_=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new e_().version&&(t_=!1),t_?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new e_):(setTimeout(function(){Noe||It(35)},1),new e_)}();function s1e(){if((Ie.pendingReactions.length||Ie.inBatch||Ie.isRunningReactions)&&It(36),Noe=!0,t_){var e=zM();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),Ie=new e_}}function l1e(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function Foe(e,t){e.observers_.delete(t),e.observers_.size===0&&Moe(e)}function Moe(e){e.isPendingUnobservation_===!1&&(e.isPendingUnobservation_=!0,Ie.pendingUnobservations.push(e))}function $i(){Ie.inBatch++}function Qi(){if(--Ie.inBatch===0){Poe();for(var e=Ie.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,n.observers_.size===0&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof Jx&&n.suspend_())}Ie.pendingUnobservations=[]}}function Ooe(e){var t=Ie.trackingDerivation;return t!==null?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&Ie.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(e.observers_.size===0&&Ie.inBatch>0&&Moe(e),!1)}function zoe(e){e.lowestObserverState_!==Lt.STALE_&&(e.lowestObserverState_=Lt.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===Lt.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=Lt.STALE_}))}function u1e(e){e.lowestObserverState_!==Lt.STALE_&&(e.lowestObserverState_=Lt.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===Lt.POSSIBLY_STALE_?t.dependenciesState_=Lt.STALE_:t.dependenciesState_===Lt.UP_TO_DATE_&&(e.lowestObserverState_=Lt.UP_TO_DATE_)}))}function c1e(e){e.lowestObserverState_===Lt.UP_TO_DATE_&&(e.lowestObserverState_=Lt.POSSIBLY_STALE_,e.observers_.forEach(function(t){t.dependenciesState_===Lt.UP_TO_DATE_&&(t.dependenciesState_=Lt.POSSIBLY_STALE_,t.onBecomeStale_())}))}var Bx=function(){function e(n,r,i,o){n===void 0&&(n="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Lt.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Sp.NONE,this.name_=n,this.onInvalidate_=r,this.errorHandler_=i,this.requiresObservable_=o}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Ie.pendingReactions.push(this),Poe())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){$i(),this.isScheduled_=!1;var n=Ie.trackingContext;if(Ie.trackingContext=this,BV(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(r){this.reportExceptionInDerivation_(r)}}Ie.trackingContext=n,Qi()}},t.track=function(n){if(!this.isDisposed_){$i(),this.isRunning_=!0;var r=Ie.trackingContext;Ie.trackingContext=this;var i=Voe(this,n,void 0);Ie.trackingContext=r,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&KV(this),qk(i)&&this.reportExceptionInDerivation_(i.cause),Qi()}},t.reportExceptionInDerivation_=function(n){var r=this;if(this.errorHandler_){this.errorHandler_(n,this);return}if(Ie.disableErrorBoundaries)throw n;var i="[mobx] uncaught error in '"+this+"'";Ie.suppressReactionErrors||console.error(i,n),Ie.globalReactionErrorHandlers.forEach(function(o){return o(n,r)})},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||($i(),KV(this),Qi()))},t.getDisposer_=function(){var n=this.dispose.bind(this);return n[it]=this,n},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(n){n===void 0&&(n=!1),V1e(this,n)},e}(),d1e=100,DV=function(e){return e()};function Poe(){Ie.inBatch>0||Ie.isRunningReactions||DV(f1e)}function f1e(){Ie.isRunningReactions=!0;for(var e=Ie.pendingReactions,t=0;e.length>0;){++t===d1e&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}Ie.isRunningReactions=!1}var nG=lf("Reaction",Bx);function p1e(e){var t=DV;DV=function(n){return e(function(){return t(n)})}}function rx(){return!1}function h1e(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var joe="action",m1e="action.bound",Hoe="autoAction",g1e="autoAction.bound",Joe="<unnamed action>",Boe=n5(joe),b1e=n5(m1e,{bound:!0}),Koe=n5(Hoe,{autoAction:!0}),y1e=n5(g1e,{autoAction:!0,bound:!0});function Doe(e){var t=function(n,r){if(Zs(n))return $0(n.name||Joe,n,e);if(Zs(r))return $0(n,r,e);if(Op(r))return qw(n,r,e?Koe:Boe);if(Op(n))return Zl(n5(e?Hoe:joe,{name:n,autoAction:e}))};return t}var o0=Doe(!1);Object.assign(o0,Boe);var Kx=Doe(!0);Object.assign(Kx,Koe);o0.bound=Zl(b1e);Kx.bound=Zl(y1e);function Aoe(e){return Loe(e.name||Joe,!1,e,this,void 0)}function BM(e){return Zs(e)&&e.isMobxAction===!0}function v1e(e,t){var n,r;t===void 0&&(t=foe);var i=(n=(r=t)==null?void 0:r.name)!=null?n:"Autorun",o=!t.scheduler&&!t.delay,a;if(o)a=new Bx(i,function(){this.track(u)},t.onError,t.requiresObservable);else{var s=w1e(t),l=!1;a=new Bx(i,function(){l||(l=!0,s(function(){l=!1,a.isDisposed_||a.track(u)}))},t.onError,t.requiresObservable)}function u(){e(a)}return a.schedule_(),a.getDisposer_()}var x1e=function(e){return e()};function w1e(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:x1e}var Z1e="onBO",S1e="onBUO";function k1e(e,t,n){return $oe(Z1e,e,t,n)}function Uoe(e,t,n){return $oe(S1e,e,t,n)}function $oe(e,t,n,r){var i=q0(t),o=Zs(r)?r:n,a=e+"L";return i[a]?i[a].add(o):i[a]=new Set([o]),function(){var s=i[a];s&&(s.delete(o),s.size===0&&delete i[a])}}var _1e="never",xS="always",G1e="observed";function I1e(e){e.isolateGlobalState===!0&&s1e();var t=e.useProxies,n=e.enforceActions;if(t!==void 0&&(Ie.useProxies=t===xS?!0:t===_1e?!1:typeof Proxy<"u"),t==="ifavailable"&&(Ie.verifyProxies=!0),n!==void 0){var r=n===xS?xS:n===G1e;Ie.enforceActions=r,Ie.allowStateChanges=!(r===!0||r===xS)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(i){i in e&&(Ie[i]=!!e[i])}),Ie.allowStateReads=!Ie.observableRequiresReaction,e.reactionScheduler&&p1e(e.reactionScheduler)}function Qoe(e,t,n,r){var i=h3e(t),o=u5(e,r)[it];$i();try{A0(i).forEach(function(a){o.extend_(a,i[a],n&&a in n?n[a]:!0)})}finally{Qi()}return e}function W1e(e,t){return qoe(q0(e,t))}function qoe(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=E1e(e.observing_).map(qoe)),t}function E1e(e){return Array.from(new Set(e))}var X1e=0;function eae(){this.message="FLOW_CANCELLED"}eae.prototype=Object.create(Error.prototype);var VA=Zoe("flow"),L1e=Zoe("flow.bound",{bound:!0}),Dx=Object.assign(function(e,t){if(Op(t))return qw(e,t,VA);var n=e,r=n.name||"<unnamed flow>",i=function(){var o=this,a=arguments,s=++X1e,l=o0(r+" - runid: "+s+" - init",n).apply(o,a),u,c=void 0,d=new Promise(function(f,h){var m=0;u=h;function g(w){c=void 0;var Z;try{Z=o0(r+" - runid: "+s+" - yield "+m++,l.next).call(l,w)}catch(k){return h(k)}v(Z)}function y(w){c=void 0;var Z;try{Z=o0(r+" - runid: "+s+" - yield "+m++,l.throw).call(l,w)}catch(k){return h(k)}v(Z)}function v(w){if(Zs(w==null?void 0:w.then)){w.then(v,h);return}return w.done?f(w.value):(c=Promise.resolve(w.value),c.then(g,y))}g(void 0)});return d.cancel=o0(r+" - runid: "+s+" - cancel",function(){try{c&&YA(c);var f=l.return(void 0),h=Promise.resolve(f.value);h.then(r0,r0),YA(h),u(new eae)}catch(m){u(m)}}),d};return i.isMobXFlow=!0,i},VA);Dx.bound=Zl(L1e);function YA(e){Zs(e.cancel)&&e.cancel()}function rG(e){return(e==null?void 0:e.isMobXFlow)===!0}function R1e(e,t){return e?t!==void 0?Q0(e)?e[it].values_.has(t):!1:Q0(e)||!!e[it]||jM(e)||nG(e)||o5(e):!1}function KM(e){return R1e(e)}function C1e(e){if(Q0(e))return e[it].ownKeys_();It(38)}function wS(e,t,n){return e.set(t,n),n}function Sm(e,t){if(e==null||typeof e!="object"||e instanceof Date||!KM(e))return e;if(o1e(e)||o5(e))return Sm(e.get(),t);if(t.has(e))return t.get(e);if(l5(e)){var n=wS(t,e,new Array(e.length));return e.forEach(function(a,s){n[s]=Sm(a,t)}),n}if(yh(e)){var r=wS(t,e,new Set);return e.forEach(function(a){r.add(Sm(a,t))}),r}if(cf(e)){var i=wS(t,e,new Map);return e.forEach(function(a,s){i.set(s,Sm(a,t))}),i}else{var o=wS(t,e,{});return C1e(e).forEach(function(a){Uw.propertyIsEnumerable.call(e,a)&&(o[a]=Sm(e[a],t))}),o}}function w0(e,t){return Sm(e,new Map)}function V1e(){It("trace() is not available in production builds");for(var e=!1,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];typeof n[n.length-1]=="boolean"&&(e=n.pop());var i=Y1e(n);if(!i)return It("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");i.isTracing_===Sp.NONE&&console.log("[mobx.trace] '"+i.name_+"' tracing enabled"),i.isTracing_=e?Sp.BREAK:Sp.LOG}function Y1e(e){switch(e.length){case 0:return Ie.trackingDerivation;case 1:return q0(e[0]);case 2:return q0(e[0],e[1])}}function Wu(e,t){t===void 0&&(t=void 0),$i();try{return e.apply(t)}finally{Qi()}}function rm(e){return e[it]}var T1e={has:function(e,t){return rm(e).has_(t)},get:function(e,t){return rm(e).get_(t)},set:function(e,t,n){var r;return Op(t)?(r=rm(e).set_(t,n,!0))!=null?r:!0:!1},deleteProperty:function(e,t){var n;return Op(t)?(n=rm(e).delete_(t,!0))!=null?n:!0:!1},defineProperty:function(e,t,n){var r;return(r=rm(e).defineProperty_(t,n))!=null?r:!0},ownKeys:function(e){return rm(e).ownKeys_()},preventExtensions:function(e){It(13)}};function N1e(e,t){var n,r;return poe(),e=u5(e,t),(r=(n=e[it]).proxy_)!=null?r:n.proxy_=new Proxy(e,T1e)}function aa(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function a5(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),hoe(function(){var r=n.indexOf(t);r!==-1&&n.splice(r,1)})}function sa(e,t){var n=tb();try{for(var r=[].concat(e.interceptors_||[]),i=0,o=r.length;i<o&&(t=r[i](t),t&&!t.type&&It(14),!!t);i++);return t}finally{vd(n)}}function ms(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function s5(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),hoe(function(){var r=n.indexOf(t);r!==-1&&n.splice(r,1)})}function gs(e,t){var n=tb(),r=e.changeListeners_;if(r){r=r.slice();for(var i=0,o=r.length;i<o;i++)r[i](t);vd(n)}}function F1e(e,t,n){var r=u5(e,n)[it];$i();try{var i;(i=t)!=null||(t=v3e(e)),A0(t).forEach(function(o){return r.make_(o,t[o])})}finally{Qi()}return e}var yL=Symbol("mobx-keys");function DM(e,t,n){if(ec(e))return Qoe(e,e,t,n);var r=u5(e,n)[it];if(!e[yL]){var i=Object.getPrototypeOf(e),o=new Set([].concat(A0(e),A0(i)));o.delete("constructor"),o.delete(it),$w(i,yL,o)}$i();try{e[yL].forEach(function(a){return r.make_(a,t&&a in t?t[a]:!0)})}finally{Qi()}return e}var TA="splice",Sl="update",M1e=1e4,O1e={get:function(e,t){var n=e[it];return t===it?n:t==="length"?n.getArrayLength_():typeof t=="string"&&!isNaN(t)?n.get_(parseInt(t)):Pu(iG,t)?iG[t]:e[t]},set:function(e,t,n){var r=e[it];return t==="length"&&r.setArrayLength_(n),typeof t=="symbol"||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){It(15)}},AM=function(){function e(n,r,i,o){n===void 0&&(n="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=o,this.atom_=new e5(n),this.enhancer_=function(a,s){return r(a,s,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.dehanceValues_=function(n){return this.dehancer!==void 0&&n.length>0?n.map(this.dehancer):n},t.intercept_=function(n){return a5(this,n)},t.observe_=function(n,r){return r===void 0&&(r=!1),r&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),s5(this,n)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(n){(typeof n!="number"||isNaN(n)||n<0)&&It("Out of range: "+n);var r=this.values_.length;if(n!==r)if(n>r){for(var i=new Array(n-r),o=0;o<n-r;o++)i[o]=void 0;this.spliceWithArray_(r,0,i)}else this.spliceWithArray_(n,r-n)},t.updateArrayLength_=function(n,r){n!==this.lastKnownLength_&&It(16),this.lastKnownLength_+=r,this.legacyMode_&&r>0&&dae(n+r+1)},t.spliceWithArray_=function(n,r,i){var o=this;this.atom_;var a=this.values_.length;if(n===void 0?n=0:n>a?n=a:n<0&&(n=Math.max(0,a+n)),arguments.length===1?r=a-n:r==null?r=0:r=Math.max(0,Math.min(r,a-n)),i===void 0&&(i=HV),aa(this)){var s=sa(this,{object:this.proxy_,type:TA,index:n,removedCount:r,added:i});if(!s)return HV;r=s.removedCount,i=s.added}if(i=i.length===0?i:i.map(function(c){return o.enhancer_(c,void 0)}),this.legacyMode_||!1){var l=i.length-r;this.updateArrayLength_(a,l)}var u=this.spliceItemsIntoValues_(n,r,i);return(r!==0||i.length!==0)&&this.notifyArraySplice_(n,i,u),this.dehanceValues_(u)},t.spliceItemsIntoValues_=function(n,r,i){if(i.length<M1e){var o;return(o=this.values_).splice.apply(o,[n,r].concat(i))}else{var a=this.values_.slice(n,n+r),s=this.values_.slice(n+r);this.values_.length+=i.length-r;for(var l=0;l<i.length;l++)this.values_[n+l]=i[l];for(var u=0;u<s.length;u++)this.values_[n+i.length+u]=s[u];return a}},t.notifyArrayChildUpdate_=function(n,r,i){var o=!this.owned_&&rx(),a=ms(this),s=a||o?{observableKind:"array",object:this.proxy_,type:Sl,debugObjectName:this.atom_.name_,index:n,newValue:r,oldValue:i}:null;this.atom_.reportChanged(),a&&gs(this,s)},t.notifyArraySplice_=function(n,r,i){var o=!this.owned_&&rx(),a=ms(this),s=a||o?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:TA,index:n,removed:i,added:r,removedCount:i.length,addedCount:r.length}:null;this.atom_.reportChanged(),a&&gs(this,s)},t.get_=function(n){if(this.legacyMode_&&n>=this.values_.length){console.warn("[mobx] Out of bounds read: "+n);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])},t.set_=function(n,r){var i=this.values_;if(this.legacyMode_&&n>i.length&&It(17,n,i.length),n<i.length){this.atom_;var o=i[n];if(aa(this)){var a=sa(this,{type:Sl,object:this.proxy_,index:n,newValue:r});if(!a)return;r=a.newValue}r=this.enhancer_(r,o);var s=r!==o;s&&(i[n]=r,this.notifyArrayChildUpdate_(n,r,o))}else{for(var l=new Array(n+1-i.length),u=0;u<l.length-1;u++)l[u]=void 0;l[l.length-1]=r,this.spliceWithArray_(i.length,0,l)}},e}();function z1e(e,t,n,r){n===void 0&&(n="ObservableArray"),r===void 0&&(r=!1),poe();var i=new AM(n,t,r,!1);goe(i.values_,it,i);var o=new Proxy(i.values_,O1e);if(i.proxy_=o,e&&e.length){var a=r5(!0);i.spliceWithArray_(0,0,e),i5(a)}return o}var iG={clear:function(){return this.splice(0)},replace:function(e){var t=this[it];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=this[it];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(e);case 2:return o.spliceWithArray_(e,t)}return o.spliceWithArray_(e,t,r)},spliceWithArray:function(e,t,n){return this[it].spliceWithArray_(e,t,n)},push:function(){for(var e=this[it],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[it].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[it],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return Ie.trackingDerivation&&It(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){Ie.trackingDerivation&&It(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[it],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1?(this.splice(n,1),!0):!1}};dr("concat",uc);dr("flat",uc);dr("includes",uc);dr("indexOf",uc);dr("join",uc);dr("lastIndexOf",uc);dr("slice",uc);dr("toString",uc);dr("toLocaleString",uc);dr("every",uf);dr("filter",uf);dr("find",uf);dr("findIndex",uf);dr("flatMap",uf);dr("forEach",uf);dr("map",uf);dr("some",uf);dr("reduce",tae);dr("reduceRight",tae);function dr(e,t){typeof Array.prototype[e]=="function"&&(iG[e]=t(e))}function uc(e){return function(){var t=this[it];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function uf(e){return function(t,n){var r=this,i=this[it];i.atom_.reportObserved();var o=i.dehanceValues_(i.values_);return o[e](function(a,s){return t.call(n,a,s,r)})}}function tae(e){return function(){var t=this,n=this[it];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(o,a,s){return i(o,a,s,t)},r[e].apply(r,arguments)}}var P1e=lf("ObservableArrayAdministration",AM);function l5(e){return c3(e)&&P1e(e[it])}var nae,rae,j1e={},Uc="add",oG="delete";nae=Symbol.iterator;rae=Symbol.toStringTag;var iae=function(){function e(n,r,i){var o=this;r===void 0&&(r=t5),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[it]=j1e,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=r,this.name_=i,Zs(Map)||It(18),this.keysAtom_=xoe("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,i1e(!0,function(){o.merge(n)})}var t=e.prototype;return t.has_=function(n){return this.data_.has(n)},t.has=function(n){var r=this;if(!Ie.trackingDerivation)return this.has_(n);var i=this.hasMap_.get(n);if(!i){var o=i=new Zp(this.has_(n),d3,"ObservableMap.key?",!1);this.hasMap_.set(n,o),Uoe(o,function(){return r.hasMap_.delete(n)})}return i.get()},t.set=function(n,r){var i=this.has_(n);if(aa(this)){var o=sa(this,{type:i?Sl:Uc,object:this,newValue:r,name:n});if(!o)return this;r=o.newValue}return i?this.updateValue_(n,r):this.addValue_(n,r),this},t.delete=function(n){var r=this;if(this.keysAtom_,aa(this)){var i=sa(this,{type:oG,object:this,name:n});if(!i)return!1}if(this.has_(n)){var o=rx(),a=ms(this),s=a||o?{observableKind:"map",debugObjectName:this.name_,type:oG,object:this,oldValue:this.data_.get(n).value_,name:n}:null;return Wu(function(){var l;r.keysAtom_.reportChanged(),(l=r.hasMap_.get(n))==null||l.setNewValue_(!1);var u=r.data_.get(n);u.setNewValue_(void 0),r.data_.delete(n)}),a&&gs(this,s),!0}return!1},t.updateValue_=function(n,r){var i=this.data_.get(n);if(r=i.prepareNewValue_(r),r!==Ie.UNCHANGED){var o=rx(),a=ms(this),s=a||o?{observableKind:"map",debugObjectName:this.name_,type:Sl,object:this,oldValue:i.value_,name:n,newValue:r}:null;i.setNewValue_(r),a&&gs(this,s)}},t.addValue_=function(n,r){var i=this;this.keysAtom_,Wu(function(){var l,u=new Zp(r,i.enhancer_,"ObservableMap.key",!1);i.data_.set(n,u),r=u.value_,(l=i.hasMap_.get(n))==null||l.setNewValue_(!0),i.keysAtom_.reportChanged()});var o=rx(),a=ms(this),s=a||o?{observableKind:"map",debugObjectName:this.name_,type:Uc,object:this,name:n,newValue:r}:null;a&&gs(this,s)},t.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var n=this,r=this.keys();return Ax({next:function(){var i=r.next(),o=i.done,a=i.value;return{done:o,value:o?void 0:n.get(a)}}})},t.entries=function(){var n=this,r=this.keys();return Ax({next:function(){var i=r.next(),o=i.done,a=i.value;return{done:o,value:o?void 0:[a,n.get(a)]}}})},t[nae]=function(){return this.entries()},t.forEach=function(n,r){for(var i=i0(this),o;!(o=i()).done;){var a=o.value,s=a[0],l=a[1];n.call(r,l,s,this)}},t.merge=function(n){var r=this;return cf(n)&&(n=new Map(n)),Wu(function(){ec(n)?p3e(n).forEach(function(i){return r.set(i,n[i])}):Array.isArray(n)?n.forEach(function(i){var o=i[0],a=i[1];return r.set(o,a)}):qg(n)?(n.constructor!==Map&&It(19,n),n.forEach(function(i,o){return r.set(o,i)})):n!=null&&It(20,n)}),this},t.clear=function(){var n=this;Wu(function(){Yoe(function(){for(var r=i0(n.keys()),i;!(i=r()).done;){var o=i.value;n.delete(o)}})})},t.replace=function(n){var r=this;return Wu(function(){for(var i=H1e(n),o=new Map,a=!1,s=i0(r.data_.keys()),l;!(l=s()).done;){var u=l.value;if(!i.has(u)){var c=r.delete(u);if(c)a=!0;else{var d=r.data_.get(u);o.set(u,d)}}}for(var f=i0(i.entries()),h;!(h=f()).done;){var m=h.value,g=m[0],y=m[1],v=r.data_.has(g);if(r.set(g,y),r.data_.has(g)){var w=r.data_.get(g);o.set(g,w),v||(a=!0)}}if(!a)if(r.data_.size!==o.size)r.keysAtom_.reportChanged();else for(var Z=r.data_.keys(),k=o.keys(),_=Z.next(),R=k.next();!_.done;){if(_.value!==R.value){r.keysAtom_.reportChanged();break}_=Z.next(),R=k.next()}r.data_=o}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(n,r){return s5(this,n)},t.intercept_=function(n){return a5(this,n)},PM(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:rae,get:function(){return"Map"}}]),e}(),cf=lf("ObservableMap",iae);function H1e(e){if(qg(e)||cf(e))return e;if(Array.isArray(e))return new Map(e);if(ec(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}else return It(21,e)}var oae,aae,J1e={};oae=Symbol.iterator;aae=Symbol.toStringTag;var sae=function(){function e(n,r,i){r===void 0&&(r=t5),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[it]=J1e,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,Zs(Set)||It(22),this.atom_=xoe(this.name_),this.enhancer_=function(o,a){return r(o,a,i)},n&&this.replace(n)}var t=e.prototype;return t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.clear=function(){var n=this;Wu(function(){Yoe(function(){for(var r=i0(n.data_.values()),i;!(i=r()).done;){var o=i.value;n.delete(o)}})})},t.forEach=function(n,r){for(var i=i0(this),o;!(o=i()).done;){var a=o.value;n.call(r,a,a,this)}},t.add=function(n){var r=this;if(this.atom_,aa(this)){var i=sa(this,{type:Uc,object:this,newValue:n});if(!i)return this}if(!this.has(n)){Wu(function(){r.data_.add(r.enhancer_(n,void 0)),r.atom_.reportChanged()});var o=!1,a=ms(this),s=a||o?{observableKind:"set",debugObjectName:this.name_,type:Uc,object:this,newValue:n}:null;a&&gs(this,s)}return this},t.delete=function(n){var r=this;if(aa(this)){var i=sa(this,{type:oG,object:this,oldValue:n});if(!i)return!1}if(this.has(n)){var o=!1,a=ms(this),s=a||o?{observableKind:"set",debugObjectName:this.name_,type:oG,object:this,oldValue:n}:null;return Wu(function(){r.atom_.reportChanged(),r.data_.delete(n)}),a&&gs(this,s),!0}return!1},t.has=function(n){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(n))},t.entries=function(){var n=0,r=Array.from(this.keys()),i=Array.from(this.values());return Ax({next:function(){var o=n;return n+=1,o<i.length?{value:[r[o],i[o]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var n=this,r=0,i=Array.from(this.data_.values());return Ax({next:function(){return r<i.length?{value:n.dehanceValue_(i[r++]),done:!1}:{done:!0}}})},t.replace=function(n){var r=this;return yh(n)&&(n=new Set(n)),Wu(function(){Array.isArray(n)?(r.clear(),n.forEach(function(i){return r.add(i)})):Qw(n)?(r.clear(),n.forEach(function(i){return r.add(i)})):n!=null&&It("Cannot initialize set from "+n)}),this},t.observe_=function(n,r){return s5(this,n)},t.intercept_=function(n){return a5(this,n)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[oae]=function(){return this.values()},PM(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:aae,get:function(){return"Set"}}]),e}(),yh=lf("ObservableSet",sae),NA=Object.create(null),FA="remove",lae=function(){function e(n,r,i,o){r===void 0&&(r=new Map),o===void 0&&(o=M3e),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=n,this.values_=r,this.name_=i,this.defaultAnnotation_=o,this.keysAtom_=new e5("ObservableObject.keys"),this.isPlainObject_=ec(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(n){return this.values_.get(n).get()},t.setObservablePropValue_=function(n,r){var i=this.values_.get(n);if(i instanceof Jx)return i.set(r),!0;if(aa(this)){var o=sa(this,{type:Sl,object:this.proxy_||this.target_,name:n,newValue:r});if(!o)return null;r=o.newValue}if(r=i.prepareNewValue_(r),r!==Ie.UNCHANGED){var a=ms(this),s=!1,l=a||s?{type:Sl,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:i.value_,name:n,newValue:r}:null;i.setNewValue_(r),a&&gs(this,l)}return!0},t.get_=function(n){return Ie.trackingDerivation&&!Pu(this.target_,n)&&this.has_(n),this.target_[n]},t.set_=function(n,r,i){return i===void 0&&(i=!1),Pu(this.target_,n)?this.values_.has(n)?this.setObservablePropValue_(n,r):i?Reflect.set(this.target_,n,r):(this.target_[n]=r,!0):this.extend_(n,{value:r,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,i)},t.has_=function(n){if(!Ie.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var r=this.pendingKeys_.get(n);return r||(r=new Zp(n in this.target_,d3,"ObservableObject.key?",!1),this.pendingKeys_.set(n,r)),r.get()},t.make_=function(n,r){if(r===!0&&(r=this.defaultAnnotation_),r!==!1){if(!(n in this.target_)){var i;if((i=this.target_[pl])!=null&&i[n])return;It(1,r.annotationType_,this.name_+"."+n.toString())}for(var o=this.target_;o&&o!==Uw;){var a=Q9(o,n);if(a){var s=r.make_(this,n,a,o);if(s===0)return;if(s===1)break}o=Object.getPrototypeOf(o)}OA(this,r,n)}},t.extend_=function(n,r,i,o){if(o===void 0&&(o=!1),i===!0&&(i=this.defaultAnnotation_),i===!1)return this.defineProperty_(n,r,o);var a=i.extend_(this,n,r,o);return a&&OA(this,i,n),a},t.defineProperty_=function(n,r,i){i===void 0&&(i=!1);try{$i();var o=this.delete_(n);if(!o)return o;if(aa(this)){var a=sa(this,{object:this.proxy_||this.target_,name:n,type:Uc,newValue:r.value});if(!a)return null;var s=a.newValue;r.value!==s&&(r=U0({},r,{value:s}))}if(i){if(!Reflect.defineProperty(this.target_,n,r))return!1}else wl(this.target_,n,r);this.notifyPropertyAddition_(n,r.value)}finally{Qi()}return!0},t.defineObservableProperty_=function(n,r,i,o){o===void 0&&(o=!1);try{$i();var a=this.delete_(n);if(!a)return a;if(aa(this)){var s=sa(this,{object:this.proxy_||this.target_,name:n,type:Uc,newValue:r});if(!s)return null;r=s.newValue}var l=MA(n),u={configurable:Ie.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:l.get,set:l.set};if(o){if(!Reflect.defineProperty(this.target_,n,u))return!1}else wl(this.target_,n,u);var c=new Zp(r,i,"ObservableObject.key",!1);this.values_.set(n,c),this.notifyPropertyAddition_(n,c.value_)}finally{Qi()}return!0},t.defineComputedProperty_=function(n,r,i){i===void 0&&(i=!1);try{$i();var o=this.delete_(n);if(!o)return o;if(aa(this)){var a=sa(this,{object:this.proxy_||this.target_,name:n,type:Uc,newValue:void 0});if(!a)return null}r.name||(r.name="ObservableObject.key"),r.context=this.proxy_||this.target_;var s=MA(n),l={configurable:Ie.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:s.get,set:s.set};if(i){if(!Reflect.defineProperty(this.target_,n,l))return!1}else wl(this.target_,n,l);this.values_.set(n,new Jx(r)),this.notifyPropertyAddition_(n,void 0)}finally{Qi()}return!0},t.delete_=function(n,r){if(r===void 0&&(r=!1),!Pu(this.target_,n))return!0;if(aa(this)){var i=sa(this,{object:this.proxy_||this.target_,name:n,type:FA});if(!i)return null}try{var o,a;$i();var s=ms(this),l=!1,u=this.values_.get(n),c=void 0;if(!u&&(s||l)){var d;c=(d=Q9(this.target_,n))==null?void 0:d.value}if(r){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];if(u&&(this.values_.delete(n),u instanceof Zp&&(c=u.value_),zoe(u)),this.keysAtom_.reportChanged(),(o=this.pendingKeys_)==null||(a=o.get(n))==null||a.set(n in this.target_),s||l){var f={type:FA,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:c,name:n};s&&gs(this,f)}}finally{Qi()}return!0},t.observe_=function(n,r){return s5(this,n)},t.intercept_=function(n){return a5(this,n)},t.notifyPropertyAddition_=function(n,r){var i,o,a=ms(this),s=!1;if(a||s){var l=a||s?{type:Uc,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:r}:null;a&&gs(this,l)}(i=this.pendingKeys_)==null||(o=i.get(n))==null||o.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),A0(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function u5(e,t){var n;if(Pu(e,it))return e;var r=(n=t==null?void 0:t.name)!=null?n:"ObservableObject",i=new lae(e,new Map,String(r),A3e(t));return $w(e,it,i),e}var B1e=lf("ObservableObjectAdministration",lae);function MA(e){return NA[e]||(NA[e]={get:function(){return this[it].getObservablePropValue_(e)},set:function(t){return this[it].setObservablePropValue_(e,t)}})}function Q0(e){return c3(e)?B1e(e[it]):!1}function OA(e,t,n){var r;(r=e.target_[pl])==null||delete r[n]}var K1e=cae(0),vL=0,uae=function(){};function D1e(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__!==void 0?e.prototype.__proto__=t:e.prototype=t}D1e(uae,Array.prototype);var UM=function(e,t,n){voe(r,e);function r(o,a,s,l){var u;s===void 0&&(s="ObservableArray"),l===void 0&&(l=!1),u=e.call(this)||this;var c=new AM(s,a,l,!0);if(c.proxy_=bL(u),goe(bL(u),it,c),o&&o.length){var d=r5(!0);u.spliceWithArray(0,0,o),i5(d)}return Object.defineProperty(bL(u),"0",K1e),u}var i=r.prototype;return i.concat=function(){this[it].atom_.reportObserved();for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return Array.prototype.concat.apply(this.slice(),a.map(function(l){return l5(l)?l.slice():l}))},i[n]=function(){var o=this,a=0;return Ax({next:function(){return a<o.length?{value:o[a++],done:!1}:{done:!0,value:void 0}}})},PM(r,[{key:"length",get:function(){return this[it].getArrayLength_()},set:function(o){this[it].setArrayLength_(o)}},{key:t,get:function(){return"Array"}}]),r}(uae,Symbol.toStringTag,Symbol.iterator);Object.entries(iG).forEach(function(e){var t=e[0],n=e[1];t!=="concat"&&$w(UM.prototype,t,n)});function cae(e){return{enumerable:!1,configurable:!0,get:function(){return this[it].get_(e)},set:function(t){this[it].set_(e,t)}}}function A1e(e){wl(UM.prototype,""+e,cae(e))}function dae(e){if(e>vL){for(var t=vL;t<e+100;t++)A1e(t);vL=e}}dae(1e3);function U1e(e,t,n){return new UM(e,t,n)}function q0(e,t){if(typeof e=="object"&&e!==null){if(l5(e))return t!==void 0&&It(23),e[it].atom_;if(yh(e))return e.atom_;if(cf(e)){if(t===void 0)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||It(25,t,AV(e)),n}if(Q0(e)){if(!t)return It(26);var r=e[it].values_.get(t);return r||It(27,t,AV(e)),r}if(jM(e)||o5(e)||nG(e))return e}else if(Zs(e)&&nG(e[it]))return e[it];It(28)}function $1e(e,t){if(e||It(29),jM(e)||o5(e)||nG(e)||cf(e)||yh(e))return e;if(e[it])return e[it];It(24,e)}function AV(e,t){var n;if(t!==void 0)n=q0(e,t);else{if(BM(e))return e.name;Q0(e)||cf(e)||yh(e)?n=$1e(e):n=q0(e)}return n.name_}var zA=Uw.toString;function fae(e,t,n){return n===void 0&&(n=-1),UV(e,t,n)}function UV(e,t,n,r,i){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var o=typeof e;if(o!=="function"&&o!=="object"&&typeof t!="object")return!1;var a=zA.call(e);if(a!==zA.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++;break}e=PA(e),t=PA(t);var s=a==="[object Array]";if(!s){if(typeof e!="object"||typeof t!="object")return!1;var l=e.constructor,u=t.constructor;if(l!==u&&!(Zs(l)&&l instanceof l&&Zs(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(n===0)return!1;n<0&&(n=-1),r=r||[],i=i||[];for(var c=r.length;c--;)if(r[c]===e)return i[c]===t;if(r.push(e),i.push(t),s){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!UV(e[c],t[c],n-1,r,i))return!1}else{var d=Object.keys(e),f;if(c=d.length,Object.keys(t).length!==c)return!1;for(;c--;)if(f=d[c],!(Pu(t,f)&&UV(e[f],t[f],n-1,r,i)))return!1}return r.pop(),i.pop(),!0}function PA(e){return l5(e)?e.slice():qg(e)||cf(e)||Qw(e)||yh(e)?Array.from(e.entries()):e}function Ax(e){return e[Symbol.iterator]=Q1e,e}function Q1e(){return this}["Symbol","Map","Set"].forEach(function(e){var t=zM();typeof t[e]>"u"&&It("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:h1e,extras:{getDebugName:AV},$mobx:it});if(!G.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!F1e)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function q1e(e){e()}function eEe(e){e||(e=q1e),I1e({reactionScheduler:e})}function tEe(e){return W1e(e)}var jA=typeof FinalizationRegistry>"u"?void 0:FinalizationRegistry;function pae(e){var t={reaction:e,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+nEe};return t}var nEe=1e4,rEe=1e4;function iEe(e){var t=new Map,n=1,r=new e(function(i){var o=t.get(i);o&&(o.reaction.dispose(),t.delete(i))});return{addReactionToTrack:function(i,o,a){var s=n++;return r.register(a,s,i),i.current=pae(o),i.current.finalizationRegistryCleanupToken=s,t.set(s,i.current),i.current},recordReactionAsCommitted:function(i){r.unregister(i),i.current&&i.current.finalizationRegistryCleanupToken&&t.delete(i.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}var oEe=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function aEe(){var e=new Set,t;function n(){t&&(clearTimeout(t),s())}function r(){var l,u;if(e.size>0){try{for(var c=oEe(e),d=c.next();!d.done;d=c.next()){var f=d.value,h=f.current;h&&(h.reaction.dispose(),f.current=null)}}catch(m){l={error:m}}finally{try{d&&!d.done&&(u=c.return)&&u.call(c)}finally{if(l)throw l.error}}e.clear()}t&&(clearTimeout(t),t=void 0)}function i(){t===void 0&&(t=setTimeout(s,rEe))}function o(l){e.add(l),i()}function a(l){e.delete(l)}function s(){t=void 0;var l=Date.now();e.forEach(function(u){var c=u.current;c&&l>=c.cleanAt&&(c.reaction.dispose(),u.current=null,e.delete(u))}),e.size>0&&i()}return{addReactionToTrack:function(l,u,c){return l.current=pae(u),o(l),l.current},recordReactionAsCommitted:a,forceCleanupTimerToRunNowForTests:n,resetCleanupScheduleForTests:r}}var hae=jA?iEe(jA):aEe(),sEe=hae.addReactionToTrack,lEe=hae.recordReactionAsCommitted,HA=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function JA(e){return"observer".concat(e)}var uEe=function(){function e(){}return e}();function cEe(){return new uEe}function dEe(e,t){t===void 0&&(t="observed");var n=HA(x.useState(cEe),1),r=n[0],i=HA(x.useState(),2),o=i[1],a=function(){return o([])},s=x.useRef(null);if(!s.current)var l=new Bx(JA(t),function(){u.mounted?a():u.changedBeforeMount=!0}),u=sEe(s,l,r);var c=s.current.reaction;x.useDebugValue(c,tEe),x.useEffect(function(){return lEe(s),s.current?(s.current.mounted=!0,s.current.changedBeforeMount&&(s.current.changedBeforeMount=!1,a())):(s.current={reaction:new Bx(JA(t),function(){a()}),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},a()),function(){s.current.reaction.dispose(),s.current=null}},[]);var d,f;if(c.track(function(){try{d=e()}catch(h){f=h}}),f)throw f;return d}var mae=typeof Symbol=="function"&&Symbol.for,BA=mae?Symbol.for("react.forward_ref"):typeof G.forwardRef=="function"&&G.forwardRef(function(e){return null}).$$typeof,KA=mae?Symbol.for("react.memo"):typeof G.memo=="function"&&G.memo(function(e){return null}).$$typeof;function ft(e,t){var n;if(KA&&e.$$typeof===KA)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var r=(n=void 0)!==null&&n!==void 0?n:!1,i=e,o=e.displayName||e.name;if(BA&&e.$$typeof===BA&&(r=!0,i=e.render,typeof i!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var a=function(s,l){return dEe(function(){return i(s,l)},o)};return o!==""&&(a.displayName=o),e.contextTypes&&(a.contextTypes=e.contextTypes),r&&(a=G.forwardRef(a)),a=G.memo(a),pEe(e,a),a}var fEe={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function pEe(e,t){Object.keys(e).forEach(function(n){fEe[n]||Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}eEe(qn.unstable_batchedUpdates);function Ra(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qre(r.key),r)}}function Ca(e,t,n){return t&&DA(e.prototype,t),n&&DA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var hEe=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,mEe={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},gEe=function(e){return mEe[e]},bEe=function(e){return e.replace(hEe,gEe)};function AA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function UA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AA(Object(n),!0).forEach(function(r){Ws(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var $V={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:bEe},gae,yEe=G.createContext();function vEe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$V=UA(UA({},$V),e)}function xEe(){return $V}var wEe=function(){function e(){Ra(this,e),this.usedNamespaces={}}return Ca(e,[{key:"addUsedNamespaces",value:function(t){var n=this;t.forEach(function(r){n.usedNamespaces[r]||(n.usedNamespaces[r]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e}();function ZEe(e){gae=e}function SEe(){return gae}var kEe={type:"3rdParty",init:function(e){vEe(e.options.react),ZEe(e)}};function _Ee(){if(console&&console.warn){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];typeof n[0]=="string"&&(n[0]="react-i18next:: ".concat(n[0])),(e=console).warn.apply(e,n)}}var $A={};function QV(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];typeof t[0]=="string"&&$A[t[0]]||(typeof t[0]=="string"&&($A[t[0]]=new Date),_Ee.apply(void 0,t))}function QA(e,t,n){e.loadNamespaces(t,function(){if(e.isInitialized)n();else{var r=function i(){setTimeout(function(){e.off("initialized",i)},0),n()};e.on("initialized",r)}})}function GEe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=t.languages[0],i=t.options?t.options.fallbackLng:!1,o=t.languages[t.languages.length-1];if(r.toLowerCase()==="cimode")return!0;var a=function(s,l){var u=t.services.backendConnector.state["".concat(s,"|").concat(l)];return u===-1||u===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!a(t.isLanguageChangingTo,e)?!1:!!(t.hasResourceBundle(r,e)||!t.services.backendConnector.backend||t.options.resources&&!t.options.partialBundledLanguages||a(r,e)&&(!i||a(o,e)))}function IEe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t.languages||!t.languages.length)return QV("i18n.languages were undefined or empty",t.languages),!0;var r=t.options.ignoreJSONStructure!==void 0;return r?t.hasLoadedNamespace(e,{precheck:function(i,o){if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!o(i.isLanguageChangingTo,e))return!1}}):GEe(e,t,n)}function bae(e){if(Array.isArray(e))return e}function WEe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,t!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function qA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yae(e,t){if(e){if(typeof e=="string")return qA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qA(e,t)}}function vae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EEe(e,t){return bae(e)||WEe(e,t)||yae(e,t)||vae()}function e7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e7(Object(n),!0).forEach(function(r){Ws(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e7(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var XEe=function(e,t){var n=G.useRef();return G.useEffect(function(){n.current=e},[e,t]),n.current};function ot(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.i18n,r=G.useContext(yEe)||{},i=r.i18n,o=r.defaultNS,a=n||i||SEe();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new wEe),!a){QV("You will need to pass in an i18next instance by using initReactI18next");var s=function(E){return Array.isArray(E)?E[E.length-1]:E},l=[s,{},!1];return l.t=s,l.i18n={},l.ready=!1,l}a.options.react&&a.options.react.wait!==void 0&&QV("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var u=xL(xL(xL({},xEe()),a.options.react),t),c=u.useSuspense,d=u.keyPrefix,f=e||o||a.options&&a.options.defaultNS;f=typeof f=="string"?[f]:f||["translation"],a.reportNamespaces.addUsedNamespaces&&a.reportNamespaces.addUsedNamespaces(f);var h=(a.isInitialized||a.initializedStoreOnce)&&f.every(function(E){return IEe(E,a,u)});function m(){return a.getFixedT(null,u.nsMode==="fallback"?f:f[0],d)}var g=G.useState(m),y=EEe(g,2),v=y[0],w=y[1],Z=f.join(),k=XEe(Z),_=G.useRef(!0);G.useEffect(function(){var E=u.bindI18n,X=u.bindI18nStore;_.current=!0,!h&&!c&&QA(a,f,function(){_.current&&w(m)}),h&&k&&k!==Z&&_.current&&w(m);function Y(){_.current&&w(m)}return E&&a&&a.on(E,Y),X&&a&&a.store.on(X,Y),function(){_.current=!1,E&&a&&E.split(" ").forEach(function(C){return a.off(C,Y)}),X&&a&&X.split(" ").forEach(function(C){return a.store.off(C,Y)})}},[a,Z]);var R=G.useRef(!0);G.useEffect(function(){_.current&&!R.current&&w(m),R.current=!1},[a,d]);var I=[v,a,h];if(I.t=v,I.i18n=a,I.ready=h,h||!h&&!c)return I;throw new Promise(function(E){QA(a,f,function(){E()})})}var xd;(function(e){e.vis="vis",e.data="data"})(xd||(xd={}));function vy(e){return Object.fromEntries(e.map(t=>[t,t]))}vy(["accent","category10","category20","category20b","category20c","dark2","paired","pastel1","pastel2","set1","set2","set3","tableau10","tableau20"]),vy(["blues","tealblues","teals","greens","browns","oranges","reds","purples","warmgreys","greys"]),vy(["viridis","magma","inferno","plasma","cividis","turbo","bluegreen","bluepurple","goldgreen","goldorange","goldred","greenblue","orangered","purplebluegreen","purpleblue","purplered","redpurple","yellowgreenblue","yellowgreen","yelloworangebrown","yelloworangered","darkblue","darkgold","darkgreen","darkmulti","darkred","lightgreyred","lightgreyteal","lightmulti","lightorange","lighttealblue"]),vy(["blueorange","brownbluegreen","purplegreen","pinkyellowgreen","purpleorange","redblue","redgrey","redyellowblue","redyellowgreen","spectral"]),vy(["rainbow","sinebow"]);const n_=x;function LEe({title:e,titleId:t,...n},r){return n_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?n_.createElement("title",{id:t},e):null,n_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const REe=n_.forwardRef(LEe);var CEe=REe;const r_=x;function VEe({title:e,titleId:t,...n},r){return r_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?r_.createElement("title",{id:t},e):null,r_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"}))}const YEe=r_.forwardRef(VEe);var TEe=YEe;const i_=x;function NEe({title:e,titleId:t,...n},r){return i_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?i_.createElement("title",{id:t},e):null,i_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 15l6-6m0 0l-6-6m6 6H9a6 6 0 000 12h3"}))}const FEe=i_.forwardRef(NEe);var MEe=FEe;const o_=x;function OEe({title:e,titleId:t,...n},r){return o_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?o_.createElement("title",{id:t},e):null,o_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"}))}const zEe=o_.forwardRef(OEe);var PEe=zEe;const a_=x;function jEe({title:e,titleId:t,...n},r){return a_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?a_.createElement("title",{id:t},e):null,a_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5L7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"}))}const HEe=a_.forwardRef(jEe);var JEe=HEe;const s_=x;function BEe({title:e,titleId:t,...n},r){return s_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?s_.createElement("title",{id:t},e):null,s_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0l-3.75-3.75M17.25 21L21 17.25"}))}const KEe=s_.forwardRef(BEe);var DEe=KEe;const l_=x;function AEe({title:e,titleId:t,...n},r){return l_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?l_.createElement("title",{id:t},e):null,l_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"}))}const UEe=l_.forwardRef(AEe);var $Ee=UEe;const u_=x;function QEe({title:e,titleId:t,...n},r){return u_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?u_.createElement("title",{id:t},e):null,u_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"}))}const qEe=u_.forwardRef(QEe);var eXe=qEe;const dv=x;function tXe({title:e,titleId:t,...n},r){return dv.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?dv.createElement("title",{id:t},e):null,dv.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z"}),dv.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z"}))}const nXe=dv.forwardRef(tXe);var rXe=nXe;const c_=x;function iXe({title:e,titleId:t,...n},r){return c_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?c_.createElement("title",{id:t},e):null,c_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"}))}const oXe=c_.forwardRef(iXe);var aXe=oXe;const d_=x;function sXe({title:e,titleId:t,...n},r){return d_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?d_.createElement("title",{id:t},e):null,d_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l7.5-7.5 7.5 7.5m-15 6l7.5-7.5 7.5 7.5"}))}const lXe=d_.forwardRef(sXe);var uXe=lXe;const f_=x;function cXe({title:e,titleId:t,...n},r){return f_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?f_.createElement("title",{id:t},e):null,f_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))}const dXe=f_.forwardRef(cXe);var fXe=dXe;const p_=x;function pXe({title:e,titleId:t,...n},r){return p_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?p_.createElement("title",{id:t},e):null,p_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))}const hXe=p_.forwardRef(pXe);var mXe=hXe;const h_=x;function gXe({title:e,titleId:t,...n},r){return h_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?h_.createElement("title",{id:t},e):null,h_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 15L12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"}))}const bXe=h_.forwardRef(gXe);var yXe=bXe;const m_=x;function vXe({title:e,titleId:t,...n},r){return m_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?m_.createElement("title",{id:t},e):null,m_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"}))}const xXe=m_.forwardRef(vXe);var wXe=xXe;const g_=x;function ZXe({title:e,titleId:t,...n},r){return g_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?g_.createElement("title",{id:t},e):null,g_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"}))}const SXe=g_.forwardRef(ZXe);var kXe=SXe;const b_=x;function _Xe({title:e,titleId:t,...n},r){return b_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?b_.createElement("title",{id:t},e):null,b_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9.75L16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25z"}))}const GXe=b_.forwardRef(_Xe);var IXe=GXe;const fv=x;function WXe({title:e,titleId:t,...n},r){return fv.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?fv.createElement("title",{id:t},e):null,fv.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),fv.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const EXe=fv.forwardRef(WXe);var XXe=EXe;const y_=x;function LXe({title:e,titleId:t,...n},r){return y_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?y_.createElement("title",{id:t},e):null,y_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const RXe=y_.forwardRef(LXe);var CXe=RXe;const v_=x;function VXe({title:e,titleId:t,...n},r){return v_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?v_.createElement("title",{id:t},e):null,v_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const YXe=v_.forwardRef(VXe);var TXe=YXe;const x_=x;function NXe({title:e,titleId:t,...n},r){return x_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?x_.createElement("title",{id:t},e):null,x_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"}))}const FXe=x_.forwardRef(NXe);var MXe=FXe;const w_=x;function OXe({title:e,titleId:t,...n},r){return w_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?w_.createElement("title",{id:t},e):null,w_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z"}))}const zXe=w_.forwardRef(OXe);var PXe=zXe;const Z_=x;function jXe({title:e,titleId:t,...n},r){return Z_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?Z_.createElement("title",{id:t},e):null,Z_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418"}))}const HXe=Z_.forwardRef(jXe);var JXe=HXe;const S_=x;function BXe({title:e,titleId:t,...n},r){return S_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?S_.createElement("title",{id:t},e):null,S_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.115 5.19l.319 1.913A6 6 0 008.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 002.288-4.042 1.087 1.087 0 00-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 01-.98-.314l-.295-.295a1.125 1.125 0 010-1.591l.13-.132a1.125 1.125 0 011.3-.21l.603.302a.809.809 0 001.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 001.528-1.732l.146-.292M6.115 5.19A9 9 0 1017.18 4.64M6.115 5.19A8.965 8.965 0 0112 3c1.929 0 3.716.607 5.18 1.64"}))}const KXe=S_.forwardRef(BXe);var DXe=KXe;const k_=x;function AXe({title:e,titleId:t,...n},r){return k_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?k_.createElement("title",{id:t},e):null,k_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5l-3.9 19.5m-2.1-19.5l-3.9 19.5"}))}const UXe=k_.forwardRef(AXe);var $Xe=UXe;const __=x;function QXe({title:e,titleId:t,...n},r){return __.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?__.createElement("title",{id:t},e):null,__.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.383a14.406 14.406 0 01-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 10-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"}))}const qXe=__.forwardRef(QXe);var eLe=qXe;const G_=x;function tLe({title:e,titleId:t,...n},r){return G_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?G_.createElement("title",{id:t},e):null,G_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"}))}const nLe=G_.forwardRef(tLe);var rLe=nLe;const I_=x;function iLe({title:e,titleId:t,...n},r){return I_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?I_.createElement("title",{id:t},e):null,I_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5V6.75a4.5 4.5 0 119 0v3.75M3.75 21.75h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H3.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"}))}const oLe=I_.forwardRef(iLe);var aLe=oLe;const pv=x;function sLe({title:e,titleId:t,...n},r){return pv.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?pv.createElement("title",{id:t},e):null,pv.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),pv.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"}))}const lLe=pv.forwardRef(sLe);var uLe=lLe;const W_=x;function cLe({title:e,titleId:t,...n},r){return W_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?W_.createElement("title",{id:t},e):null,W_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const dLe=W_.forwardRef(cLe);var fLe=dLe;const E_=x;function pLe({title:e,titleId:t,...n},r){return E_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?E_.createElement("title",{id:t},e):null,E_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))}const hLe=E_.forwardRef(pLe);var mLe=hLe;const X_=x;function gLe({title:e,titleId:t,...n},r){return X_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?X_.createElement("title",{id:t},e):null,X_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"}))}const bLe=X_.forwardRef(gLe);var yLe=bLe;const L_=x;function vLe({title:e,titleId:t,...n},r){return L_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?L_.createElement("title",{id:t},e):null,L_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const xLe=L_.forwardRef(vLe);var wLe=xLe;const R_=x;function ZLe({title:e,titleId:t,...n},r){return R_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?R_.createElement("title",{id:t},e):null,R_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 7.125C2.25 6.504 2.754 6 3.375 6h6c.621 0 1.125.504 1.125 1.125v3.75c0 .621-.504 1.125-1.125 1.125h-6a1.125 1.125 0 01-1.125-1.125v-3.75zM14.25 8.625c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v8.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 01-1.125-1.125v-8.25zM3.75 16.125c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 01-1.125-1.125v-2.25z"}))}const SLe=R_.forwardRef(ZLe);var kLe=SLe;const C_=x;function _Le({title:e,titleId:t,...n},r){return C_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?C_.createElement("title",{id:t},e):null,C_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.429 9.75L2.25 12l4.179 2.25m0-4.5l5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0l4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0l-5.571 3-5.571-3"}))}const GLe=C_.forwardRef(_Le);var ILe=GLe;const V_=x;function WLe({title:e,titleId:t,...n},r){return V_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?V_.createElement("title",{id:t},e):null,V_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"}))}const ELe=V_.forwardRef(WLe);var XLe=ELe;const Y_=x;function LLe({title:e,titleId:t,...n},r){return Y_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?Y_.createElement("title",{id:t},e):null,Y_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0112 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"}))}const RLe=Y_.forwardRef(LLe);var CLe=RLe;const T_=x;function VLe({title:e,titleId:t,...n},r){return T_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?T_.createElement("title",{id:t},e):null,T_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}const YLe=T_.forwardRef(VLe);var TLe=YLe;const hv=x;function NLe({title:e,titleId:t,...n},r){return hv.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?hv.createElement("title",{id:t},e):null,hv.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75a4.5 4.5 0 01-4.884 4.484c-1.076-.091-2.264.071-2.95.904l-7.152 8.684a2.548 2.548 0 11-3.586-3.586l8.684-7.152c.833-.686.995-1.874.904-2.95a4.5 4.5 0 016.336-4.486l-3.276 3.276a3.004 3.004 0 002.25 2.25l3.276-3.276c.256.565.398 1.192.398 1.852z"}),hv.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.867 19.125h.008v.008h-.008v-.008z"}))}const FLe=hv.forwardRef(NLe);var MLe=FLe;const N_=x;function OLe({title:e,titleId:t,...n},r){return N_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?N_.createElement("title",{id:t},e):null,N_.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}const zLe=N_.forwardRef(OLe);var PLe=zLe,jLe=CEe,HLe=TEe,JLe=MEe,BLe=PEe,KLe=JEe,$M=DEe,QM=$Ee,DLe=eXe,ALe=rXe,xae=aXe,ULe=uXe,$Le=fXe,QLe=mXe,Ux=yXe,qLe=wXe,eRe=kXe,tRe=IXe,wae=XXe,nRe=CXe,rRe=TXe,$x=MXe,iRe=PXe,oRe=JXe,aRe=DXe,Zae=$Xe,Sae=eLe,sRe=rLe,lRe=aLe,uRe=uLe,kae=fLe,cRe=mLe,dRe=yLe,_ae=wLe,fRe=kLe,pRe=ILe,t7=XLe,n7=CLe,hRe=TLe,mRe=MLe,qM=PLe;function gRe(e,t=200){const[n,r]=G.useState(e);return G.useEffect(()=>{const i=setTimeout(()=>r(e),t);return()=>clearTimeout(i)},[e]),n}function qV(e,t,n=200){const[r,i]=G.useState(e),o=gRe(r,n),a=G.useRef(!0);return G.useEffect(()=>i(e),[e]),G.useEffect(()=>{a.current?a.current=!1:t(o)},[o]),[r,i]}function bRe(e){const[t,n]=x.useState(e),r=x.useRef(t);r.current=t;const i=x.useRef(e),o=x.useRef(!1);i.current!==e&&(i.current=e,o.current=!1);const a=x.useCallback(s=>{o.current?n(s):(o.current=!0,n(typeof s=="function"?s(i.current):s))},[]);return[o.current?t:e,a]}const yRe=e=>{const{onWidthChange:t,onHeightChange:n,width:r,height:i,children:o}=e,{t:a}=ot("translation",{keyPrefix:"main.tabpanel.settings.size_setting"}),[s,l]=qV(r,t),[u,c]=qV(i,n);return x.createElement("div",{className:"text-zinc-400"},o,x.createElement("div",{className:"mt-4 w-60"},x.createElement("input",{className:"w-full h-2 bg-blue-100 appearance-none",style:{cursor:"ew-resize"},type:"range",name:"width",value:Math.sqrt(s/1e3),min:"0",max:"1",step:"0.01",onChange:d=>{l(Math.round(Number(d.target.value)**2*1e3))}}),x.createElement("output",{className:"text-sm ml-1",htmlFor:"width"},`${a("width")}: ${s}`)),x.createElement("div",{className:" mt-2"},x.createElement("input",{className:"w-full h-2 bg-blue-100 appearance-none",style:{cursor:"ew-resize"},type:"range",name:"height",value:Math.sqrt(u/1e3),min:"0",max:"1",step:"0.01",onChange:d=>{c(Math.round(Number(d.target.value)**2*1e3))}}),x.createElement("output",{className:"text-sm ml-1",htmlFor:"height"},`${a("height")}: ${u}`)))},vRe={generic:["auto","bar","line","area","trail","point","circle","tick","rect","arc","text","boxplot","table"],geographic:["poi","choropleth"]},xRe=["generic","geographic"],wRe=["none","stack","normalize","center"],ZRe=["auto","fixed"],SRe={black:"#141414",white:"#fafafa"},kRe={rows:1/0,columns:1/0,color:1,opacity:1,size:1,shape:1,theta:1,radius:1,details:1/0,text:1},_Re=["dimensions","measures"],GRe=["x","y"],IRe=["color","opacity","shape","size"],WRe=["sum","mean","median","count","min","max","variance","stdev"],ERe=["data_interpretation","data_view"],Kt={AGGREGATOR_LIST:WRe,CHART_LAYOUT_TYPE:ZRe,COLORS:SRe,COORD_TYPES:xRe,GEOM_TYPES:vRe,STACK_MODE:wRe,META_FIELD_KEYS:_Re,CHANNEL_LIMIT:kRe,POSITION_CHANNEL_CONFIG_LIST:GRe,NON_POSITION_CHANNEL_CONFIG_LIST:IRe,EMBEDED_MENU_LIST:ERe};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function r7(e){return Object.prototype.toString.call(e)==="[object Object]"}function XRe(e){var t,n;return r7(e)===!1?!1:(t=e.constructor,t===void 0?!0:(n=t.prototype,!(r7(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}function LRe(e,t){return e.map(n=>{const r={};for(let i in t){const{from:o,to:a}=t[i];r[a]=eY(n,o)}return r})}function RRe(e){return e.map((t,n)=>{const r=`gwc_${n}`;return{...t,key:r,fid:r}})}function eO(e,t){const n=RRe(t),r=n.map((i,o)=>{var a;return{from:(a=t[o].path)!=null?a:[t[o].fid],to:i.fid}});return{safeData:LRe(e,r),safeMetas:n}}function Gae(e,t=[]){return Object.keys(e).flatMap(n=>XRe(e[n])?Gae(e[n],t.concat(n)):[t.concat(n)])}function eY(e,t){let n=e;for(let r of t)n=n[r];return n}const Iae=[/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/,/^(0[1-9]|1[0-2])\/(0[1-9]|[12][0-9]|3[01])\/\d{4}$/,/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[0-2])\/\d{4}$/,/^\d{4}\/(0[1-9]|1[0-2])\/(0[1-9]|[12][0-9]|3[01])$/,/^\d{4}\.(0[1-9]|1[0-2])\.(0[1-9]|[12][0-9]|3[01])$/,/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])\s\d{2}:\d{2}:\d{2}$/,/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T\d{2}:\d{2}:\d{2}$/,/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T\d{2}:\d{2}:\d{2}.\d{3}Z$/],CRe=["%Y-%m-%d","%m/%d/%Y","%d/%m/%Y","%Y/%m/%d","%Y.%m.%d","%Y-%m-%d %H:%M:%S","%Y-%m-%dT%H:%M:%S","%Y-%m-%dT%H:%M:%S.%gZ"];function tY(e){if(typeof e=="number")return"timestamp";const t=Iae.findIndex(n=>n.test(e));return t>=0?CRe[t]:""}function VRe(e){let t=!0;for(let n of e){let r=!1;for(let i of Iae)if(i.test(n)){r=!0;break}if(!r){t=!1;break}}return t}function YRe(e){return e.every(t=>{if(typeof t=="number")return!0;const n=Number(t);return!isNaN(n)&&isFinite(t)})}function TRe(e){switch(e){case"quantitative":return"measure";default:return"dimension"}}function NRe(e,t){const n=e.map(i=>eY(i,t));let r=YRe(n)?"quantitative":"nominal";return r==="nominal"&&VRe(e.map(i=>`${eY(i,t)}`))&&(r="temporal"),r}function FRe(e){const{dataSource:t,fields:n}=e,r=[];for(let i of n){let o=i.semanticType==="?"?NRe(t,i.path):i.semanticType,a=TRe(o);r.push({fid:i.fid,key:i.key?i.key:i.fid,name:i.name?i.name:i.fid,analyticType:a,semanticType:o,basename:i.basename||i.name||i.fid,path:i.path})}return r}function MRe(e){if(e.length===0)return{dataSource:[],fields:[]};const t=e[0],n=Gae(t),r=FRe({dataSource:e,fields:n.map(s=>({fid:s[s.length-1],key:s[s.length-1],analyticType:"?",semanticType:"?",path:s,basename:s[s.length-1],name:s.join(".")}))}),{safeData:i,safeMetas:o}=eO(e,r),a=[];for(let s of i){const l={};for(let u of o)u.semanticType==="quantitative"?l[u.fid]=Number(s[u.fid]):l[u.fid]=s[u.fid];a.push(l)}return{dataSource:a,fields:o}}function wd(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j9(e,t)}function c5(e,t){if(t&&(hs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wd(e)}function Vl(e){return Vl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vl(e)}function ORe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function zRe(e){return bae(e)||ORe(e)||yae(e)||vae()}function i7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function o7(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i7(Object(n),!0).forEach(function(r){Ws(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i7(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var PRe={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},jRe=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ra(this,e),this.init(t,n)}return Ca(e,[{key:"init",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||PRe,this.options=n,this.debug=n.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,n,r,i){return i&&!this.debug?null:(typeof t[0]=="string"&&(t[0]="".concat(r).concat(this.prefix," ").concat(t[0])),this.logger[n](t))}},{key:"create",value:function(t){return new e(this.logger,o7(o7({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new e(this.logger,t)}}]),e}(),hl=new jRe,Cd=function(){function e(){Ra(this,e),this.observers={}}return Ca(e,[{key:"on",value:function(t,n){var r=this;return t.split(" ").forEach(function(i){r.observers[i]=r.observers[i]||[],r.observers[i].push(n)}),this}},{key:"off",value:function(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(function(r){return r!==n})}}},{key:"emit",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.observers[t]){var o=[].concat(this.observers[t]);o.forEach(function(s){s.apply(void 0,r)})}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach(function(s){s.apply(s,[t].concat(r))})}}}]),e}();function xy(){var e,t,n=new Promise(function(r,i){e=r,t=i});return n.resolve=e,n.reject=t,n}function a7(e){return e==null?"":""+e}function HRe(e,t,n){e.forEach(function(r){t[r]&&(n[r]=t[r])})}function tO(e,t,n){function r(s){return s&&s.indexOf("###")>-1?s.replace(/###/g,"."):s}function i(){return!e||typeof e=="string"}for(var o=typeof t!="string"?[].concat(t):t.split(".");o.length>1;){if(i())return{};var a=r(o.shift());!e[a]&&n&&(e[a]=new n),Object.prototype.hasOwnProperty.call(e,a)?e=e[a]:e={}}return i()?{}:{obj:e,k:r(o.shift())}}function s7(e,t,n){var r=tO(e,t,Object),i=r.obj,o=r.k;i[o]=n}function JRe(e,t,n,r){var i=tO(e,t,Object),o=i.obj,a=i.k;o[a]=o[a]||[],o[a].push(n)}function aG(e,t){var n=tO(e,t),r=n.obj,i=n.k;if(r)return r[i]}function l7(e,t,n){var r=aG(e,n);return r!==void 0?r:aG(t,n)}function Wae(e,t,n){for(var r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?typeof e[r]=="string"||e[r]instanceof String||typeof t[r]=="string"||t[r]instanceof String?n&&(e[r]=t[r]):Wae(e[r],t[r],n):e[r]=t[r]);return e}function im(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var BRe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function KRe(e){return typeof e=="string"?e.replace(/[&<>"'\/]/g,function(t){return BRe[t]}):e}var h3=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,DRe=[" ",",","?","!",";"];function ARe(e,t,n){t=t||"",n=n||"";var r=DRe.filter(function(s){return t.indexOf(s)<0&&n.indexOf(s)<0});if(r.length===0)return!0;var i=new RegExp("(".concat(r.map(function(s){return s==="?"?"\\?":s}).join("|"),")")),o=!i.test(e);if(!o){var a=e.indexOf(n);a>0&&!i.test(e.substring(0,a))&&(o=!0)}return o}function u7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ZS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u7(Object(n),!0).forEach(function(r){Ws(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u7(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function URe(e){var t=$Re();return function(){var n=Vl(e),r;if(t){var i=Vl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c5(this,r)}}function $Re(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Eae(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),i=e,o=0;o<r.length;++o){if(!i||typeof i[r[o]]=="string"&&o+1<r.length)return;if(i[r[o]]===void 0){for(var a=2,s=r.slice(o,o+a).join(n),l=i[s];l===void 0&&r.length>o+a;)a++,s=r.slice(o,o+a).join(n),l=i[s];if(l===void 0)return;if(l===null)return null;if(t.endsWith(s)){if(typeof l=="string")return l;if(s&&typeof l[s]=="string")return l[s]}var u=r.slice(o+a).join(n);return u?Eae(l,u,n):void 0}i=i[r[o]]}return i}}var QRe=function(e){p3(n,e);var t=URe(n);function n(r){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Ra(this,n),i=t.call(this),h3&&Cd.call(wd(i)),i.data=r||{},i.options=o,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.options.ignoreJSONStructure===void 0&&(i.options.ignoreJSONStructure=!0),i}return Ca(n,[{key:"addNamespaces",value:function(r){this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}},{key:"removeNamespaces",value:function(r){var i=this.options.ns.indexOf(r);i>-1&&this.options.ns.splice(i,1)}},{key:"getResource",value:function(r,i,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,l=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure,u=[r,i];o&&typeof o!="string"&&(u=u.concat(o)),o&&typeof o=="string"&&(u=u.concat(s?o.split(s):o)),r.indexOf(".")>-1&&(u=r.split("."));var c=aG(this.data,u);return c||!l||typeof o!="string"?c:Eae(this.data&&this.data[r]&&this.data[r][i],o,s)}},{key:"addResource",value:function(r,i,o,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},l=this.options.keySeparator;l===void 0&&(l=".");var u=[r,i];o&&(u=u.concat(l?o.split(l):o)),r.indexOf(".")>-1&&(u=r.split("."),a=i,i=u[1]),this.addNamespaces(i),s7(this.data,u,a),s.silent||this.emit("added",r,i,o,a)}},{key:"addResources",value:function(r,i,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var s in o)(typeof o[s]=="string"||Object.prototype.toString.apply(o[s])==="[object Array]")&&this.addResource(r,i,s,o[s],{silent:!0});a.silent||this.emit("added",r,i,o)}},{key:"addResourceBundle",value:function(r,i,o,a,s){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},u=[r,i];r.indexOf(".")>-1&&(u=r.split("."),a=o,o=i,i=u[1]),this.addNamespaces(i);var c=aG(this.data,u)||{};a?Wae(c,o,s):c=ZS(ZS({},c),o),s7(this.data,u,c),l.silent||this.emit("added",r,i,o)}},{key:"removeResourceBundle",value:function(r,i){this.hasResourceBundle(r,i)&&delete this.data[r][i],this.removeNamespaces(i),this.emit("removed",r,i)}},{key:"hasResourceBundle",value:function(r,i){return this.getResource(r,i)!==void 0}},{key:"getResourceBundle",value:function(r,i){return i||(i=this.options.defaultNS),this.options.compatibilityAPI==="v1"?ZS(ZS({},{}),this.getResource(r,i)):this.getResource(r,i)}},{key:"getDataByLanguage",value:function(r){return this.data[r]}},{key:"hasLanguageSomeTranslations",value:function(r){var i=this.getDataByLanguage(r),o=i&&Object.keys(i)||[];return!!o.find(function(a){return i[a]&&Object.keys(i[a]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),n}(Cd),Xae={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var o=this;return e.forEach(function(a){o.processors[a]&&(t=o.processors[a].process(t,n,r,i))}),t}};function c7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c7(Object(n),!0).forEach(function(r){Ws(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c7(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qRe(e){var t=eCe();return function(){var n=Vl(e),r;if(t){var i=Vl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c5(this,r)}}function eCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var d7={},f7=function(e){p3(n,e);var t=qRe(n);function n(r){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ra(this,n),i=t.call(this),h3&&Cd.call(wd(i)),HRe(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],r,wd(i)),i.options=o,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.logger=hl.create("translator"),i}return Ca(n,[{key:"changeLanguage",value:function(r){r&&(this.language=r)}},{key:"exists",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(r==null)return!1;var o=this.resolve(r,i);return o&&o.res!==void 0}},{key:"extractFromKey",value:function(r,i){var o=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");var a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,s=i.ns||this.options.defaultNS||[],l=o&&r.indexOf(o)>-1,u=!this.options.userDefinedKeySeparator&&!i.keySeparator&&!this.options.userDefinedNsSeparator&&!i.nsSeparator&&!ARe(r,o,a);if(l&&!u){var c=r.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:r,namespaces:s};var d=r.split(o);(o!==a||o===a&&this.options.ns.indexOf(d[0])>-1)&&(s=d.shift()),r=d.join(a)}return typeof s=="string"&&(s=[s]),{key:r,namespaces:s}}},{key:"translate",value:function(r,i,o){var a=this;if(hs(i)!=="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),i||(i={}),r==null)return"";Array.isArray(r)||(r=[String(r)]);var s=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,u=this.extractFromKey(r[r.length-1],i),c=u.key,d=u.namespaces,f=d[d.length-1],h=i.lng||this.language,m=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h&&h.toLowerCase()==="cimode"){if(m){var g=i.nsSeparator||this.options.nsSeparator;return s?(y.res="".concat(f).concat(g).concat(c),y):"".concat(f).concat(g).concat(c)}return s?(y.res=c,y):c}var y=this.resolve(r,i),v=y&&y.res,w=y&&y.usedKey||c,Z=y&&y.exactUsedKey||c,k=Object.prototype.toString.apply(v),_=["[object Number]","[object Function]","[object RegExp]"],R=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,I=!this.i18nFormat||this.i18nFormat.handleAsObject,E=typeof v!="string"&&typeof v!="boolean"&&typeof v!="number";if(I&&v&&E&&_.indexOf(k)<0&&!(typeof R=="string"&&k==="[object Array]")){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var X=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,v,vi(vi({},i),{},{ns:d})):"key '".concat(c," (").concat(this.language,")' returned an object instead of string.");return s?(y.res=X,y):X}if(l){var Y=k==="[object Array]",C=Y?[]:{},N=Y?Z:w;for(var V in v)if(Object.prototype.hasOwnProperty.call(v,V)){var F="".concat(N).concat(l).concat(V);C[V]=this.translate(F,vi(vi({},i),{joinArrays:!1,ns:d})),C[V]===F&&(C[V]=v[V])}v=C}}else if(I&&typeof R=="string"&&k==="[object Array]")v=v.join(R),v&&(v=this.extendTranslation(v,r,i,o));else{var O=!1,P=!1,H=i.count!==void 0&&typeof i.count!="string",M=n.hasDefaultValue(i),j=H?this.pluralResolver.getSuffix(h,i.count,i):"",J=i["defaultValue".concat(j)]||i.defaultValue;!this.isValidLookup(v)&&M&&(O=!0,v=J),this.isValidLookup(v)||(P=!0,v=c);var q=i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,K=q&&P?void 0:v,D=M&&J!==v&&this.options.updateMissing;if(P||O||D){if(this.logger.log(D?"updateKey":"missingKey",h,f,c,D?J:v),l){var $=this.resolve(c,vi(vi({},i),{},{keySeparator:!1}));$&&$.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var Q=[],B=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&B&&B[0])for(var pe=0;pe<B.length;pe++)Q.push(B[pe]);else this.options.saveMissingTo==="all"?Q=this.languageUtils.toResolveHierarchy(i.lng||this.language):Q.push(i.lng||this.language);var re=function(ee,oe,ue){var U=M&&ue!==v?ue:K;a.options.missingKeyHandler?a.options.missingKeyHandler(ee,f,oe,U,D,i):a.backendConnector&&a.backendConnector.saveMissing&&a.backendConnector.saveMissing(ee,f,oe,U,D,i),a.emit("missingKey",ee,f,oe,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&H?Q.forEach(function(ee){a.pluralResolver.getSuffixes(ee,i).forEach(function(oe){re([ee],c+oe,i["defaultValue".concat(oe)]||J)})}):re(Q,c,J))}v=this.extendTranslation(v,r,i,y,o),P&&v===c&&this.options.appendNamespaceToMissingKey&&(v="".concat(f,":").concat(c)),(P||O)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(f,":").concat(c):c,O?v:void 0):v=this.options.parseMissingKeyHandler(v))}return s?(y.res=v,y):v}},{key:"extendTranslation",value:function(r,i,o,a,s){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)r=this.i18nFormat.parse(r,vi(vi({},this.options.interpolation.defaultVariables),o),a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(vi(vi({},o),{interpolation:vi(vi({},this.options.interpolation),o.interpolation)}));var u=typeof r=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),c;if(u){var d=r.match(this.interpolator.nestingRegexp);c=d&&d.length}var f=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(f=vi(vi({},this.options.interpolation.defaultVariables),f)),r=this.interpolator.interpolate(r,f,o.lng||this.language,o),u){var h=r.match(this.interpolator.nestingRegexp),m=h&&h.length;c<m&&(o.nest=!1)}o.nest!==!1&&(r=this.interpolator.nest(r,function(){for(var v=arguments.length,w=new Array(v),Z=0;Z<v;Z++)w[Z]=arguments[Z];return s&&s[0]===w[0]&&!o.context?(l.logger.warn("It seems you are nesting recursively key: ".concat(w[0]," in key: ").concat(i[0])),null):l.translate.apply(l,w.concat([i]))},o)),o.interpolation&&this.interpolator.reset()}var g=o.postProcess||this.options.postProcess,y=typeof g=="string"?[g]:g;return r!=null&&y&&y.length&&o.applyPostProcessor!==!1&&(r=Xae.handle(y,r,i,this.options&&this.options.postProcessPassResolved?vi({i18nResolved:a},o):o,this)),r}},{key:"resolve",value:function(r){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a,s,l,u,c;return typeof r=="string"&&(r=[r]),r.forEach(function(d){if(!i.isValidLookup(a)){var f=i.extractFromKey(d,o),h=f.key;s=h;var m=f.namespaces;i.options.fallbackNS&&(m=m.concat(i.options.fallbackNS));var g=o.count!==void 0&&typeof o.count!="string",y=g&&!o.ordinal&&o.count===0&&i.pluralResolver.shouldUseIntlApi(),v=o.context!==void 0&&(typeof o.context=="string"||typeof o.context=="number")&&o.context!=="",w=o.lngs?o.lngs:i.languageUtils.toResolveHierarchy(o.lng||i.language,o.fallbackLng);m.forEach(function(Z){i.isValidLookup(a)||(c=Z,!d7["".concat(w[0],"-").concat(Z)]&&i.utils&&i.utils.hasLoadedNamespace&&!i.utils.hasLoadedNamespace(c)&&(d7["".concat(w[0],"-").concat(Z)]=!0,i.logger.warn('key "'.concat(s,'" for languages "').concat(w.join(", "),`" won't get resolved as namespace "`).concat(c,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(function(k){if(!i.isValidLookup(a)){u=k;var _=[h];if(i.i18nFormat&&i.i18nFormat.addLookupKeys)i.i18nFormat.addLookupKeys(_,h,k,Z,o);else{var R;g&&(R=i.pluralResolver.getSuffix(k,o.count,o));var I="".concat(i.options.pluralSeparator,"zero");if(g&&(_.push(h+R),y&&_.push(h+I)),v){var E="".concat(h).concat(i.options.contextSeparator).concat(o.context);_.push(E),g&&(_.push(E+R),y&&_.push(E+I))}}for(var X;X=_.pop();)i.isValidLookup(a)||(l=X,a=i.getResource(k,Z,X,o))}}))})}}),{res:a,usedKey:s,exactUsedKey:l,usedLng:u,usedNS:c}}},{key:"isValidLookup",value:function(r){return r!==void 0&&!(!this.options.returnNull&&r===null)&&!(!this.options.returnEmptyString&&r==="")}},{key:"getResource",value:function(r,i,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(r,i,o,a):this.resourceStore.getResource(r,i,o,a)}}],[{key:"hasDefaultValue",value:function(r){var i="defaultValue";for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)&&i===o.substring(0,i.length)&&r[o]!==void 0)return!0;return!1}}]),n}(Cd);function wL(e){return e.charAt(0).toUpperCase()+e.slice(1)}var tCe=function(){function e(t){Ra(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=hl.create("languageUtils")}return Ca(e,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var n=t.split("-");return this.formatLanguageCode(n[0])}},{key:"formatLanguageCode",value:function(t){if(typeof t=="string"&&t.indexOf("-")>-1){var n=["hans","hant","latn","cyrl","cans","mong","arab"],r=t.split("-");return this.options.lowerCaseLng?r=r.map(function(i){return i.toLowerCase()}):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=wL(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=wL(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=wL(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var n=this;if(!t)return null;var r;return t.forEach(function(i){if(!r){var o=n.formatLanguageCode(i);(!n.options.supportedLngs||n.isSupportedCode(o))&&(r=o)}}),!r&&this.options.supportedLngs&&t.forEach(function(i){if(!r){var o=n.getLanguagePartFromCode(i);if(n.isSupportedCode(o))return r=o;r=n.options.supportedLngs.find(function(a){if(a.indexOf(o)===0)return a})}}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}},{key:"getFallbackCodes",value:function(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!n)return t.default||[];var r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}},{key:"toResolveHierarchy",value:function(t,n){var r=this,i=this.getFallbackCodes(n||this.options.fallbackLng||[],t),o=[],a=function(s){s&&(r.isSupportedCode(s)?o.push(s):r.logger.warn("rejecting language code not found in supportedLngs: ".concat(s)))};return typeof t=="string"&&t.indexOf("-")>-1?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(t))):typeof t=="string"&&a(this.formatLanguageCode(t)),i.forEach(function(s){o.indexOf(s)<0&&a(r.formatLanguageCode(s))}),o}}]),e}(),nCe=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],rCe={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}},iCe=["v1","v2","v3"],p7={zero:0,one:1,two:2,few:3,many:4,other:5};function oCe(){var e={};return nCe.forEach(function(t){t.lngs.forEach(function(n){e[n]={numbers:t.nr,plurals:rCe[t.fc]}})}),e}var aCe=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ra(this,e),this.languageUtils=t,this.options=n,this.logger=hl.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=oCe()}return Ca(e,[{key:"addRule",value:function(t,n){this.rules[t]=n}},{key:"getRule",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:n.ordinal?"ordinal":"cardinal"})}catch(r){return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(function(i){return"".concat(n).concat(i)})}},{key:"getSuffixes",value:function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(t,r);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort(function(o,a){return p7[o]-p7[a]}).map(function(o){return"".concat(n.options.prepend).concat(o)}):i.numbers.map(function(o){return n.getSuffix(t,o,r)}):[]}},{key:"getSuffix",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=this.getRule(t,r);return i?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(i.select(n)):this.getSuffixRetroCompatible(i,n):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,n){var r=this,i=t.noAbs?t.plurals(n):t.plurals(Math.abs(n)),o=t.numbers[i];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));var a=function(){return r.options.prepend&&o.toString()?r.options.prepend+o.toString():o.toString()};return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?a():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}},{key:"shouldUseIntlApi",value:function(){return!iCe.includes(this.options.compatibilityJSON)}}]),e}();function h7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Oa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h7(Object(n),!0).forEach(function(r){Ws(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h7(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var sCe=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ra(this,e),this.logger=hl.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(n){return n},this.init(t)}return Ca(e,[{key:"init",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var n=t.interpolation;this.escape=n.escape!==void 0?n.escape:KRe,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?im(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?im(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?im(n.nestingPrefix):n.nestingPrefixEscaped||im("$t("),this.nestingSuffix=n.nestingSuffix?im(n.nestingSuffix):n.nestingSuffixEscaped||im(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var n="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(n,"g");var r="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(r,"g")}},{key:"interpolate",value:function(t,n,r,i){var o=this,a,s,l,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(g){return g.replace(/\$/g,"$$$$")}var d=function(g){if(g.indexOf(o.formatSeparator)<0){var y=l7(n,u,g);return o.alwaysFormat?o.format(y,void 0,r,Oa(Oa(Oa({},i),n),{},{interpolationkey:g})):y}var v=g.split(o.formatSeparator),w=v.shift().trim(),Z=v.join(o.formatSeparator).trim();return o.format(l7(n,u,w),Z,r,Oa(Oa(Oa({},i),n),{},{interpolationkey:w}))};this.resetRegExp();var f=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,m=[{regex:this.regexpUnescape,safeValue:function(g){return c(g)}},{regex:this.regexp,safeValue:function(g){return o.escapeValue?c(o.escape(g)):c(g)}}];return m.forEach(function(g){for(l=0;a=g.regex.exec(t);){var y=a[1].trim();if(s=d(y),s===void 0)if(typeof f=="function"){var v=f(t,a,i);s=typeof v=="string"?v:""}else if(i&&i.hasOwnProperty(y))s="";else if(h){s=a[0];continue}else o.logger.warn("missed to pass in variable ".concat(y," for interpolating ").concat(t)),s="";else typeof s!="string"&&!o.useRawValueToEscape&&(s=a7(s));var w=g.safeValue(s);if(t=t.replace(a[0],w),h?(g.regex.lastIndex+=s.length,g.regex.lastIndex-=a[0].length):g.regex.lastIndex=0,l++,l>=o.maxReplaces)break}}),t}},{key:"nest",value:function(t,n){var r=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,a,s=Oa({},i);s.applyPostProcessor=!1,delete s.defaultValue;function l(f,h){var m=this.nestingOptionsSeparator;if(f.indexOf(m)<0)return f;var g=f.split(new RegExp("".concat(m,"[ ]*{"))),y="{".concat(g[1]);f=g[0],y=this.interpolate(y,s);var v=y.match(/'/g),w=y.match(/"/g);(v&&v.length%2===0&&!w||w.length%2!==0)&&(y=y.replace(/'/g,'"'));try{s=JSON.parse(y),h&&(s=Oa(Oa({},h),s))}catch(Z){return this.logger.warn("failed parsing options string in nesting for key ".concat(f),Z),"".concat(f).concat(m).concat(y)}return delete s.defaultValue,f}for(;o=this.nestingRegexp.exec(t);){var u=[],c=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){var d=o[1].split(this.formatSeparator).map(function(f){return f.trim()});o[1]=d.shift(),u=d,c=!0}if(a=n(l.call(this,o[1].trim(),s),s),a&&o[0]===t&&typeof a!="string")return a;typeof a!="string"&&(a=a7(a)),a||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(t)),a=""),c&&(a=u.reduce(function(f,h){return r.format(f,h,i.lng,Oa(Oa({},i),{},{interpolationkey:o[1].trim()}))},a.trim())),t=t.replace(o[0],a),this.regexp.lastIndex=0}return t}}]),e}();function m7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Lc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m7(Object(n),!0).forEach(function(r){Ws(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m7(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lCe(e){var t=e.toLowerCase().trim(),n={};if(e.indexOf("(")>-1){var r=e.split("(");t=r[0].toLowerCase().trim();var i=r[1].substring(0,r[1].length-1);if(t==="currency"&&i.indexOf(":")<0)n.currency||(n.currency=i.trim());else if(t==="relativetime"&&i.indexOf(":")<0)n.range||(n.range=i.trim());else{var o=i.split(";");o.forEach(function(a){if(a){var s=a.split(":"),l=zRe(s),u=l[0],c=l.slice(1),d=c.join(":").trim().replace(/^'+|'+$/g,"");n[u.trim()]||(n[u.trim()]=d),d==="false"&&(n[u.trim()]=!1),d==="true"&&(n[u.trim()]=!0),isNaN(d)||(n[u.trim()]=parseInt(d,10))}})}}return{formatName:t,formatOptions:n}}function om(e){var t={};return function(n,r,i){var o=r+JSON.stringify(i),a=t[o];return a||(a=e(r,i),t[o]=a),a(n)}}var uCe=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ra(this,e),this.logger=hl.create("formatter"),this.options=t,this.formats={number:om(function(n,r){var i=new Intl.NumberFormat(n,r);return function(o){return i.format(o)}}),currency:om(function(n,r){var i=new Intl.NumberFormat(n,Lc(Lc({},r),{},{style:"currency"}));return function(o){return i.format(o)}}),datetime:om(function(n,r){var i=new Intl.DateTimeFormat(n,Lc({},r));return function(o){return i.format(o)}}),relativetime:om(function(n,r){var i=new Intl.RelativeTimeFormat(n,Lc({},r));return function(o){return i.format(o,r.range||"day")}}),list:om(function(n,r){var i=new Intl.ListFormat(n,Lc({},r));return function(o){return i.format(o)}})},this.init(t)}return Ca(e,[{key:"init",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},r=n.interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}},{key:"add",value:function(t,n){this.formats[t.toLowerCase().trim()]=n}},{key:"addCached",value:function(t,n){this.formats[t.toLowerCase().trim()]=om(n)}},{key:"format",value:function(t,n,r,i){var o=this,a=n.split(this.formatSeparator),s=a.reduce(function(l,u){var c=lCe(u),d=c.formatName,f=c.formatOptions;if(o.formats[d]){var h=l;try{var m=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},g=m.locale||m.lng||i.locale||i.lng||r;h=o.formats[d](l,g,Lc(Lc(Lc({},f),i),m))}catch(y){o.logger.warn(y)}return h}else o.logger.warn("there was no format function for ".concat(d));return l},t);return s}}]),e}();function g7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function b7(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g7(Object(n),!0).forEach(function(r){Ws(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g7(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cCe(e){var t=dCe();return function(){var n=Vl(e),r;if(t){var i=Vl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c5(this,r)}}function dCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function fCe(e,t){e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)}var pCe=function(e){p3(n,e);var t=cCe(n);function n(r,i,o){var a,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Ra(this,n),a=t.call(this),h3&&Cd.call(wd(a)),a.backend=r,a.store=i,a.services=o,a.languageUtils=o.languageUtils,a.options=s,a.logger=hl.create("backendConnector"),a.waitingReads=[],a.maxParallelReads=s.maxParallelReads||10,a.readingCalls=0,a.maxRetries=s.maxRetries>=0?s.maxRetries:5,a.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(o,s.backend,s),a}return Ca(n,[{key:"queueLoad",value:function(r,i,o,a){var s=this,l={},u={},c={},d={};return r.forEach(function(f){var h=!0;i.forEach(function(m){var g="".concat(f,"|").concat(m);!o.reload&&s.store.hasResourceBundle(f,m)?s.state[g]=2:s.state[g]<0||(s.state[g]===1?u[g]===void 0&&(u[g]=!0):(s.state[g]=1,h=!1,u[g]===void 0&&(u[g]=!0),l[g]===void 0&&(l[g]=!0),d[m]===void 0&&(d[m]=!0)))}),h||(c[f]=!0)}),(Object.keys(l).length||Object.keys(u).length)&&this.queue.push({pending:u,pendingCount:Object.keys(u).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(l),pending:Object.keys(u),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(d)}}},{key:"loaded",value:function(r,i,o){var a=r.split("|"),s=a[0],l=a[1];i&&this.emit("failedLoading",s,l,i),o&&this.store.addResourceBundle(s,l,o),this.state[r]=i?-1:2;var u={};this.queue.forEach(function(c){JRe(c.loaded,[s],l),fCe(c,r),i&&c.errors.push(i),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(function(d){u[d]||(u[d]={});var f=c.loaded[d];f.length&&f.forEach(function(h){u[d][h]===void 0&&(u[d][h]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(function(c){return!c.done})}},{key:"read",value:function(r,i,o){var a=this,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,u=arguments.length>5?arguments[5]:void 0;if(!r.length)return u(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:r,ns:i,fcName:o,tried:s,wait:l,callback:u});return}return this.readingCalls++,this.backend[o](r,i,function(c,d){if(a.readingCalls--,a.waitingReads.length>0){var f=a.waitingReads.shift();a.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(c&&d&&s<a.maxRetries){setTimeout(function(){a.read.call(a,r,i,o,s+1,l*2,u)},l);return}u(c,d)})}},{key:"prepareLoading",value:function(r,i){var o=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();typeof r=="string"&&(r=this.languageUtils.toResolveHierarchy(r)),typeof i=="string"&&(i=[i]);var l=this.queueLoad(r,i,a,s);if(!l.toLoad.length)return l.pending.length||s(),null;l.toLoad.forEach(function(u){o.loadOne(u)})}},{key:"load",value:function(r,i,o){this.prepareLoading(r,i,{},o)}},{key:"reload",value:function(r,i,o){this.prepareLoading(r,i,{reload:!0},o)}},{key:"loadOne",value:function(r){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=r.split("|"),s=a[0],l=a[1];this.read(s,l,"read",void 0,void 0,function(u,c){u&&i.logger.warn("".concat(o,"loading namespace ").concat(l," for language ").concat(s," failed"),u),!u&&c&&i.logger.log("".concat(o,"loaded namespace ").concat(l," for language ").concat(s),c),i.loaded(r,u,c)})}},{key:"saveMissing",value:function(r,i,o,a,s){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(i)){this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}o==null||o===""||(this.backend&&this.backend.create&&this.backend.create(r,i,o,a,null,b7(b7({},l),{},{isUpdate:s})),!(!r||!r[0])&&this.store.addResource(r[0],i,o,a))}}]),n}(Cd);function hCe(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if(hs(e[1])==="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),hs(e[2])==="object"||hs(e[3])==="object"){var n=e[3]||e[2];Object.keys(n).forEach(function(r){t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function y7(e){return typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function v7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function As(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?v7(Object(n),!0).forEach(function(r){Ws(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v7(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mCe(e){var t=gCe();return function(){var n=Vl(e),r;if(t){var i=Vl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c5(this,r)}}function gCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function SS(){}function bCe(e){var t=Object.getOwnPropertyNames(Object.getPrototypeOf(e));t.forEach(function(n){typeof e[n]=="function"&&(e[n]=e[n].bind(e))})}var sG=function(e){p3(n,e);var t=mCe(n);function n(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if(Ra(this,n),r=t.call(this),h3&&Cd.call(wd(r)),r.options=y7(i),r.services={},r.logger=hl,r.modules={external:[]},bCe(wd(r)),o&&!r.isInitialized&&!i.isClone){if(!r.options.initImmediate)return r.init(i,o),c5(r,wd(r));setTimeout(function(){r.init(i,o)},0)}return r}return Ca(n,[{key:"init",value:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;typeof i=="function"&&(o=i,i={}),!i.defaultNS&&i.defaultNS!==!1&&i.ns&&(typeof i.ns=="string"?i.defaultNS=i.ns:i.ns.indexOf("translation")<0&&(i.defaultNS=i.ns[0]));var a=hCe();this.options=As(As(As({},a),this.options),y7(i)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=As(As({},a.interpolation),this.options.interpolation)),i.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=i.keySeparator),i.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=i.nsSeparator);function s(y){return y?typeof y=="function"?new y:y:null}if(!this.options.isClone){this.modules.logger?hl.init(s(this.modules.logger),this.options):hl.init(null,this.options);var l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=uCe);var u=new tCe(this.options);this.store=new QRe(this.options.resources,this.options);var c=this.services;c.logger=hl,c.resourceStore=this.store,c.languageUtils=u,c.pluralResolver=new aCe(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(c.formatter=s(l),c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new sCe(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new pCe(s(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",function(y){for(var v=arguments.length,w=new Array(v>1?v-1:0),Z=1;Z<v;Z++)w[Z-1]=arguments[Z];r.emit.apply(r,[y].concat(w))}),this.modules.languageDetector&&(c.languageDetector=s(this.modules.languageDetector),c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=s(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new f7(this.services,this.options),this.translator.on("*",function(y){for(var v=arguments.length,w=new Array(v>1?v-1:0),Z=1;Z<v;Z++)w[Z-1]=arguments[Z];r.emit.apply(r,[y].concat(w))}),this.modules.external.forEach(function(y){y.init&&y.init(r)})}if(this.format=this.options.interpolation.format,o||(o=SS),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var f=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];f.forEach(function(y){r[y]=function(){var v;return(v=r.store)[y].apply(v,arguments)}});var h=["addResource","addResources","addResourceBundle","removeResourceBundle"];h.forEach(function(y){r[y]=function(){var v;return(v=r.store)[y].apply(v,arguments),r}});var m=xy(),g=function(){var y=function(v,w){r.isInitialized&&!r.initializedStoreOnce&&r.logger.warn("init: i18next is already initialized. You should call init just once!"),r.isInitialized=!0,r.options.isClone||r.logger.log("initialized",r.options),r.emit("initialized",r.options),m.resolve(w),o(v,w)};if(r.languages&&r.options.compatibilityAPI!=="v1"&&!r.isInitialized)return y(null,r.t.bind(r));r.changeLanguage(r.options.lng,y)};return this.options.resources||!this.options.initImmediate?g():setTimeout(g,0),m}},{key:"loadResources",value:function(r){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:SS,a=o,s=typeof r=="string"?r:this.language;if(typeof r=="function"&&(a=r),!this.options.resources||this.options.partialBundledLanguages){if(s&&s.toLowerCase()==="cimode")return a();var l=[],u=function(d){if(d){var f=i.services.languageUtils.toResolveHierarchy(d);f.forEach(function(h){l.indexOf(h)<0&&l.push(h)})}};if(s)u(s);else{var c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.forEach(function(d){return u(d)})}this.options.preload&&this.options.preload.forEach(function(d){return u(d)}),this.services.backendConnector.load(l,this.options.ns,function(d){!d&&!i.resolvedLanguage&&i.language&&i.setResolvedLanguage(i.language),a(d)})}else a(null)}},{key:"reloadResources",value:function(r,i,o){var a=xy();return r||(r=this.languages),i||(i=this.options.ns),o||(o=SS),this.services.backendConnector.reload(r,i,function(s){a.resolve(),o(s)}),a}},{key:"use",value:function(r){if(!r)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!r.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return r.type==="backend"&&(this.modules.backend=r),(r.type==="logger"||r.log&&r.warn&&r.error)&&(this.modules.logger=r),r.type==="languageDetector"&&(this.modules.languageDetector=r),r.type==="i18nFormat"&&(this.modules.i18nFormat=r),r.type==="postProcessor"&&Xae.addPostProcessor(r),r.type==="formatter"&&(this.modules.formatter=r),r.type==="3rdParty"&&this.modules.external.push(r),this}},{key:"setResolvedLanguage",value:function(r){if(!(!r||!this.languages)&&!(["cimode","dev"].indexOf(r)>-1))for(var i=0;i<this.languages.length;i++){var o=this.languages[i];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}},{key:"changeLanguage",value:function(r,i){var o=this;this.isLanguageChangingTo=r;var a=xy();this.emit("languageChanging",r);var s=function(c){o.language=c,o.languages=o.services.languageUtils.toResolveHierarchy(c),o.resolvedLanguage=void 0,o.setResolvedLanguage(c)},l=function(c,d){d?(s(d),o.translator.changeLanguage(d),o.isLanguageChangingTo=void 0,o.emit("languageChanged",d),o.logger.log("languageChanged",d)):o.isLanguageChangingTo=void 0,a.resolve(function(){return o.t.apply(o,arguments)}),i&&i(c,function(){return o.t.apply(o,arguments)})},u=function(c){!r&&!c&&o.services.languageDetector&&(c=[]);var d=typeof c=="string"?c:o.services.languageUtils.getBestMatchFromCodes(c);d&&(o.language||s(d),o.translator.language||o.translator.changeLanguage(d),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage(d)),o.loadResources(d,function(f){l(f,d)})};return!r&&this.services.languageDetector&&!this.services.languageDetector.async?u(this.services.languageDetector.detect()):!r&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(u):u(r),a}},{key:"getFixedT",value:function(r,i,o){var a=this,s=function l(u,c){var d;if(hs(c)!=="object"){for(var f=arguments.length,h=new Array(f>2?f-2:0),m=2;m<f;m++)h[m-2]=arguments[m];d=a.options.overloadTranslationOptionHandler([u,c].concat(h))}else d=As({},c);d.lng=d.lng||l.lng,d.lngs=d.lngs||l.lngs,d.ns=d.ns||l.ns,d.keyPrefix=d.keyPrefix||o||l.keyPrefix;var g=a.options.keySeparator||".",y=d.keyPrefix?"".concat(d.keyPrefix).concat(g).concat(u):u;return a.t(y,d)};return typeof r=="string"?s.lng=r:s.lngs=r,s.ns=i,s.keyPrefix=o,s}},{key:"t",value:function(){var r;return this.translator&&(r=this.translator).translate.apply(r,arguments)}},{key:"exists",value:function(){var r;return this.translator&&(r=this.translator).exists.apply(r,arguments)}},{key:"setDefaultNamespace",value:function(r){this.options.defaultNS=r}},{key:"hasLoadedNamespace",value:function(r){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var a=this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;var u=function(d,f){var h=i.services.backendConnector.state["".concat(d,"|").concat(f)];return h===-1||h===2};if(o.precheck){var c=o.precheck(this,u);if(c!==void 0)return c}return!!(this.hasResourceBundle(a,r)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||u(a,r)&&(!s||u(l,r)))}},{key:"loadNamespaces",value:function(r,i){var o=this,a=xy();return this.options.ns?(typeof r=="string"&&(r=[r]),r.forEach(function(s){o.options.ns.indexOf(s)<0&&o.options.ns.push(s)}),this.loadResources(function(s){a.resolve(),i&&i(s)}),a):(i&&i(),Promise.resolve())}},{key:"loadLanguages",value:function(r,i){var o=xy();typeof r=="string"&&(r=[r]);var a=this.options.preload||[],s=r.filter(function(l){return a.indexOf(l)<0});return s.length?(this.options.preload=a.concat(s),this.loadResources(function(l){o.resolve(),i&&i(l)}),o):(i&&i(),Promise.resolve())}},{key:"dir",value:function(r){if(r||(r=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!r)return"rtl";var i=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"];return i.indexOf(this.services.languageUtils.getLanguagePartFromCode(r))>-1||r.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:SS,a=As(As(As({},this.options),i),{isClone:!0}),s=new n(a);(i.debug!==void 0||i.prefix!==void 0)&&(s.logger=s.logger.clone(i));var l=["store","services","language"];return l.forEach(function(u){s[u]=r[u]}),s.services=As({},this.services),s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s.translator=new f7(s.services,s.options),s.translator.on("*",function(u){for(var c=arguments.length,d=new Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];s.emit.apply(s,[u].concat(d))}),s.init(a,o),s.translator.options=s.options,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),n}(Cd);Ws(sG,"createInstance",function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new sG(e,t)});var er=sG.createInstance();er.createInstance=sG.createInstance;er.createInstance;er.init;er.loadResources;er.reloadResources;er.use;er.changeLanguage;er.getFixedT;er.t;er.exists;er.setDefaultNamespace;er.hasLoadedNamespace;er.loadNamespaces;er.loadLanguages;const ai="gw_count_fid",yCe=["year","quarter","month","week","day","hour","minute","second"],vCe=["year","quarter","month","week","weekday","day","hour","minute","second"],vr="gw_mea_key_fid",xr="gw_mea_val_fid";function xCe(e,t){return e.filter(n=>t.every(r=>r.type==="continuous"?n[r.key]>=r.range[0]&&n[r.key]<=r.range[1]:r.range.has(n[r.key])))}function wCe(){return{dragId:ai,fid:ai,name:er.t("constant.row_count"),analyticType:"measure",semanticType:"quantitative",aggName:"sum",computed:!0,expression:{op:"one",params:[],as:ai}}}function ZCe(){return[{dragId:vr,fid:vr,name:er.t("constant.mea_key"),analyticType:"dimension",semanticType:"nominal"},{dragId:xr,fid:xr,name:er.t("constant.mea_val"),analyticType:"measure",semanticType:"quantitative",aggName:"sum"}]}function SCe(...e){return e.filter(Boolean).join(" ")}function cr(e,t){return t?`${e}_${t}`:e}function nO(e){return e.enableAgg&&e.aggName?cr(e.fid,e.aggName):e.fid}function rO({rows:e,columns:t}){return e.length&&!e.find(n=>n.analyticType==="measure")?e[e.length-1].sort||"none":t.length&&!t.find(n=>n.analyticType==="measure")&&t[t.length-1].sort||"none"}function Lae({rows:e,columns:t}){return e.length&&!e.find(n=>n.analyticType==="measure")?"row":t.length&&!t.find(n=>n.analyticType==="measure")?"column":"none"}function Rae(e){return e instanceof Error?e.message:typeof e=="string"?e:String(e)}const kCe=e=>{const t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),i=e.getHours(),o=e.getMinutes(),a=e.getSeconds(),s=l=>`${l}`.padStart(2,"0");return`${t}-${s(n)}-${s(r)} ${s(i)}:${s(o)}:${s(a)}`};function lG(e){return e?e.type==="one of"||e.type==="not in"?{...e,value:[...e.value]}:e:null}function Cae(e){return e?e.type==="one of"||e.type==="not in"?{...e,value:new Set(e.value)}:e:null}function _Ce(){return{dimensions:[],measures:[],rows:[],columns:[],color:[],opacity:[],size:[],shape:[],radius:[],theta:[],longitude:[],latitude:[],geoId:[],details:[],filters:[],text:[]}}function GCe(){const[e]=Kt.GEOM_TYPES.generic;return{defaultAggregated:!0,geoms:[e],showTableSummary:!1,coordSystem:"generic",stack:"stack",showActions:!1,interactiveScale:!1,sorted:"none",zeroScale:!0,scaleIncludeUnmatchedChoropleth:!1,background:void 0,size:{mode:"auto",width:320,height:200},format:{numberFormat:void 0,timeFormat:void 0,normalizedNumberFormat:void 0},geoKey:"name",resolve:{x:!1,y:!1,color:!1,opacity:!1,shape:!1,size:!1},limit:-1}}const ICe={showActions:!1,showTableSummary:!1,stack:"stack",interactiveScale:!1,zeroScale:!0,background:void 0,size:{mode:"auto",width:320,height:200},format:{numberFormat:void 0,timeFormat:void 0,normalizedNumberFormat:void 0},geoKey:"name",resolve:{x:!1,y:!1,color:!1,opacity:!1,shape:!1,size:!1}},Vae={defaultAggregated:!0,geoms:[Kt.GEOM_TYPES.generic[0]],coordSystem:"generic",limit:-1},iO={dimensions:[],measures:[],rows:[],columns:[],color:[],opacity:[],size:[],shape:[],radius:[],theta:[],longitude:[],latitude:[],geoId:[],details:[],filters:[],text:[]};function x7(e){const t=e.encodings.filters.map(n=>{var r;return((r=n.rule)==null?void 0:r.type)==="one of"&&Array.isArray(n.rule.value)?{...n,rule:{...n.rule,value:new Set(n.rule.value)}}:n});return{...e,encodings:{..._Ce(),...e.encodings,filters:t}}}const w7=e=>({...e,config:{...GCe(),...e.config}}),Z7="https://graphic-walker.kanaries.net/stoinfo_v2.json";function Yae(e,t,n){var r=new Blob([e],{type:n});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(r,t);else{var i=document.createElement("a"),o=URL.createObjectURL(r);i.href=o,i.download=t,document.body.appendChild(i),i.click(),setTimeout(function(){document.body.removeChild(i),window.URL.revokeObjectURL(o)},0)}}let WCe=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function ji(){return"gw_"+WCe(4)}const ZL=(e,t,n)=>n===e.length?e.concat([t]):e.flatMap((r,i)=>i===n?[t,r]:[r]),S7=(e,t)=>e.filter((n,r)=>r!==t),Yf=(e,t,n)=>e.map((r,i)=>i===t?n(r):r);function fn(e,t,n){const r=(i,o,a)=>{const[s,...l]=o;return l.length===0?{...i,[s]:a(i[s])}:{...i,[s]:r(i[s],l,a)}};return r(e,t.split("."),n)}const oO=e=>Math.floor(Math.sqrt(2*e));function ECe(e){return(t,n)=>{const{base:r,cache:i,cursor:o,now:a,timeline:s}=t;return{base:r,now:e(a,n),cursor:o+1,cache:o-i.cursor>oO(o)?{value:e(i.value,s[i.cursor]),cursor:i.cursor+1}:i,timeline:s.slice(0,o).concat([n])}}}function XCe(e){return t=>{const{base:n,cache:r,cursor:i,timeline:o}=t,a=i-1;if(a<0)return t;const s=a<r.cursor,l=s?Math.max(0,a-oO(a)):r.cursor,u=s?o.slice(0,l).reduce(e,n):r.value;return{base:n,now:o.slice(l,a).reduce(e,u),cache:s?{value:u,cursor:l}:r,cursor:a,timeline:o}}}function LCe(e){return t=>{const{base:n,cache:r,cursor:i,now:o,timeline:a}=t;return i===a.length?t:{base:n,now:e(o,a[i]),cursor:i+1,cache:i-r.cursor>oO(i)?{value:e(r.value,a[r.cursor]),cursor:r.cursor+1}:r,timeline:a}}}function RCe(e){return(t,n)=>n>t.cursor?t.now:n>t.cache.cursor?t.timeline.slice(t.cache.cursor,n).reduce(e,t.cache.value):t.timeline.slice(0,n).reduce(e,t.base)}function Tae(e){return{base:e,cursor:0,cache:{value:e,cursor:0},now:e,timeline:[]}}const za={measureAfterDimension(e){return e.filter(t=>t.analyticType==="dimension").concat(e.filter(t=>t.analyticType==="measure"))},crossLimit(e){return function(t){let n=0;return t.reduce((r,i)=>(i.analyticType==="dimension"&&n<e&&(r.push(i),n++),i.analyticType==="measure"&&r.push(i),r),[])}},forceAnalyticType(e){return function(t){return t.map(n=>({...n,analyticType:e}))}},forceSemanticType(e){return function(t){return t.map(n=>({...n,semanticType:e}))}}};function kS(e,t){return t.reduce((n,r)=>r(n),e)}function _S(e){return Array.isArray(e)?za.measureAfterDimension(e):"rows"in e&&"columns"in e&&(e.rows.length>0||e.columns.length>0)?{...e,rows:kS(e.rows,[za.measureAfterDimension,za.crossLimit(2)]),columns:kS(e.columns,[za.measureAfterDimension,za.crossLimit(2)])}:"latitude"in e&&"longitude"in e&&(e.latitude.length>0||e.longitude.length>0)?{...e,latitude:kS(e.latitude,[za.forceAnalyticType("dimension"),za.forceSemanticType("quantitative"),za.crossLimit(1)]),longitude:kS(e.longitude,[za.forceAnalyticType("dimension"),za.forceSemanticType("quantitative"),za.crossLimit(1)])}:e}var xn;(function(e){e[e.setConfig=0]="setConfig",e[e.removeField=1]="removeField",e[e.reorderField=2]="reorderField",e[e.moveField=3]="moveField",e[e.cloneField=4]="cloneField",e[e.createBinlogField=5]="createBinlogField",e[e.appendFilter=6]="appendFilter",e[e.modFilter=7]="modFilter",e[e.writeFilter=8]="writeFilter",e[e.setName=9]="setName",e[e.applySort=10]="applySort",e[e.transpose=11]="transpose",e[e.setLayout=12]="setLayout",e[e.setFieldAggregator=13]="setFieldAggregator",e[e.setGeoData=14]="setGeoData",e[e.setCoordSystem=15]="setCoordSystem",e[e.createDateDrillField=16]="createDateDrillField",e[e.createDateFeatureField=17]="createDateFeatureField",e[e.changeSemanticType=18]="changeSemanticType",e[e.setFilterAggregator=19]="setFilterAggregator"})(xn||(xn={}));const CCe={[xn.setConfig]:(e,t,n)=>fn(e,"config",r=>({...r,[t]:n})),[xn.removeField]:(e,t,n)=>fn(e,`encodings.${t}`,r=>S7(r,n)),[xn.reorderField]:(e,t,n,r)=>fn(e,`encodings.${t}`,i=>_S(i.map((o,a,s)=>a===n?s[r]:a===r?s[n]:o))),[xn.moveField]:(e,t,n,r,i,o)=>{const a=e.encodings[t][n],s=r==="dimensions"?fn(a,"analyticType",()=>"dimension"):r==="measures"?fn(a,"analyticType",()=>"measure"):a;return fn(e,"encodings",l=>_S({...l,[t]:S7(e.encodings[t],n),[r]:ZL(e.encodings[r],s,i).slice(0,o!=null?o:1/0)}))},[xn.cloneField]:(e,t,n,r,i,o,a)=>{const s={...e.encodings[t][n],dragId:o};return fn(e,"encodings",l=>_S({...l,[r]:ZL(e.encodings[r],s,i).slice(0,a!=null?a:1/0)}))},[xn.createBinlogField]:(e,t,n,r,i,o)=>{const a=e.encodings[t][n],s=r.startsWith("bin"),l=s?"dimensions":t,u=s?`${r}${o}`:`log${o}`,c={fid:i,dragId:i,name:`${u}(${a.name})`,semanticType:s?"ordinal":"quantitative",analyticType:s?"dimension":a.analyticType,computed:!0,expression:{op:r,as:i,params:[{type:"field",value:a.fid}],num:o}};return s||(c.aggName="sum"),fn(e,`encodings.${l}`,d=>d.concat(c))},[xn.appendFilter]:(e,t,n,r,i)=>{const o=e.encodings[n][r];return fn(e,"encodings.filters",a=>ZL(a,{...o,rule:null,dragId:i},t))},[xn.modFilter]:(e,t,n,r)=>fn(e,"encodings.filters",i=>{const o=e.encodings[n][r];return Yf(i,t,a=>({...o,rule:null,dragId:a.dragId}))}),[xn.writeFilter]:(e,t,n)=>fn(e,"encodings.filters",r=>Yf(r,t,i=>({...i,rule:Cae(n)}))),[xn.setName]:(e,t)=>({...e,name:t}),[xn.applySort]:(e,t)=>{const{rows:n,columns:r}=e.encodings,i=n.length>0?n[n.length-1]:null,o=r.length>0?r[r.length-1]:null;return o!==null&&o.analyticType==="dimension"&&i!==null&&i.analyticType==="measure"?fn(e,"encodings.columns",a=>Yf(a,a.length-1,s=>({...s,sort:t}))):o!==null&&o.analyticType==="measure"&&i!==null&&i.analyticType==="dimension"?fn(e,"encodings.rows",a=>Yf(a,a.length-1,s=>({...s,sort:t}))):e},[xn.transpose]:e=>fn(e,"encodings",t=>_S({...t,columns:t.rows,rows:t.columns})),[xn.setLayout]:(e,t)=>fn(e,"layout",n=>Object.assign({},n,Object.fromEntries(t))),[xn.setFieldAggregator]:(e,t,n,r)=>fn(e,`encodings.${t}`,i=>Yf(i,n,o=>({...o,aggName:r}))),[xn.setGeoData]:(e,t,n,r)=>fn(e,"layout",i=>({...i,geojson:t,geoKey:n,geoUrl:r})),[xn.setCoordSystem]:(e,t)=>fn(e,"config",n=>({...n,coordSystem:t,geoms:[Kt.GEOM_TYPES[t][0]]})),[xn.createDateDrillField]:(e,t,n,r,i,o,a)=>{const s=e.encodings[t][n],l={fid:i,dragId:i,name:o,semanticType:"temporal",analyticType:s.analyticType,aggName:"sum",computed:!0,timeUnit:r,expression:{op:"dateTimeDrill",as:i,params:[{type:"field",value:s.fid},{type:"value",value:r},...a?[{type:"format",value:a}]:[]]}};return fn(e,`encodings.${t}`,u=>u.concat(l))},[xn.createDateFeatureField]:(e,t,n,r,i,o,a)=>{const s=e.encodings[t][n],l={fid:i,dragId:i,name:o,semanticType:"ordinal",analyticType:s.analyticType,aggName:"sum",computed:!0,expression:{op:"dateTimeFeature",as:i,params:[{type:"field",value:s.fid},{type:"value",value:r},...a?[{type:"format",value:a}]:[]]}};return fn(e,`encodings.${t}`,u=>u.concat(l))},[xn.changeSemanticType]:(e,t,n,r)=>fn(e,`encodings.${t}`,i=>Yf(i,n,o=>({...o,semanticType:r}))),[xn.setFilterAggregator]:(e,t,n)=>fn(e,"encodings.filters",r=>Yf(r,t,i=>({...i,aggName:n||"sum",enableAgg:!!n,rule:null})))};function m3(e,t){const[n,...r]=t;return CCe[n](e,...r)}const Nae=ECe(m3),VCe=XCe(m3),YCe=LCe(m3),TCe=RCe(m3),cn=Object.fromEntries(Object.keys(xn).map(e=>[e,(t,...n)=>Nae(t,[xn[e],...n])]));function Fae(e){return fn(e,"encodings.filters",t=>t.map(n=>({...n,rule:lG(n.rule)})))}function Mae(e){return fn(e,"encodings",t=>{var n;const r=(n=t==null?void 0:t.filters)==null?void 0:n.map(i=>({...i,rule:Cae(i.rule)}));return{...t,filters:r}})}function uG(e,t){return{config:Vae,encodings:iO,layout:ICe,visId:e,name:t}}function Oae(e,t,n){if(e.length===0)return uG(n||ji(),t);const r=[...ZCe(),wCe()],i=r.filter(a=>a.analyticType==="dimension"),o=r.filter(a=>a.analyticType==="measure");return fn(uG(n||ji(),t),"encodings",a=>({...a,dimensions:e.filter(s=>s.analyticType==="dimension").map(s=>({dragId:ji(),fid:s.fid,name:s.name||s.fid,basename:s.basename||s.name||s.fid,semanticType:s.semanticType,analyticType:s.analyticType})).concat(i),measures:e.filter(s=>s.analyticType==="measure").map(s=>({dragId:ji(),fid:s.fid,name:s.name||s.fid,basename:s.basename||s.name||s.fid,analyticType:s.analyticType,semanticType:s.semanticType,aggName:"sum"})).concat(o)}))}function NCe(e){var t;const n=uG(e.visId||ji(),e.name||"Chart");return n.config={...n.config,...e.config},n.encodings={...n.encodings,...e.encodings},n.layout={...n.layout,...e.layout,size:{...n.layout.size,...(t=e.layout)==null?void 0:t.size}},n}function a0(e){return Tae(NCe(e))}function SL(e,t){return Tae(Oae(e,t))}function k7(e,t=30){const n={base:Fae(e.cursor>t?TCe(e,e.cursor-t):e.base),timeline:e.timeline.slice(Math.max(0,e.cursor-t))};return JSON.stringify(n)}function FCe(e){return Fae(e.now)}function MCe(e){return a0(Mae(e))}function _7(e){const t=JSON.parse(e),n=a0(Mae(t.base));return t.timeline.reduce(Nae,n)}function G7(e){var Z,k,_,R,I,E,X,Y,C,N,V,F,O,P,H,M,j;var t,n,r,i,o,a,s,l,u,c,d,f,h,m,g,y,v;const w=uG(e.visId,e.name||"Chart");return w.config={...w.config,defaultAggregated:e.config.defaultAggregated,geoms:(Z=(t=e.config.geoms)==null?void 0:t.slice())!=null?Z:[],limit:e.config.limit,coordSystem:e.config.coordSystem,folds:e.config.folds},w.encodings={...w.encodings,dimensions:(k=(n=e.encodings.dimensions)==null?void 0:n.slice())!=null?k:[],measures:(_=(r=e.encodings.measures)==null?void 0:r.slice())!=null?_:[],rows:(R=(i=e.encodings.rows)==null?void 0:i.slice())!=null?R:[],columns:(I=(o=e.encodings.columns)==null?void 0:o.slice())!=null?I:[],color:(E=(a=e.encodings.color)==null?void 0:a.slice())!=null?E:[],opacity:(X=(s=e.encodings.opacity)==null?void 0:s.slice())!=null?X:[],size:(Y=(l=e.encodings.size)==null?void 0:l.slice())!=null?Y:[],shape:(C=(u=e.encodings.shape)==null?void 0:u.slice())!=null?C:[],theta:(N=(c=e.encodings.theta)==null?void 0:c.slice())!=null?N:[],radius:(V=(d=e.encodings.radius)==null?void 0:d.slice())!=null?V:[],longitude:(F=(f=e.encodings.longitude)==null?void 0:f.slice())!=null?F:[],latitude:(O=(h=e.encodings.latitude)==null?void 0:h.slice())!=null?O:[],geoId:(P=(m=e.encodings.geoId)==null?void 0:m.slice())!=null?P:[],details:(H=(g=e.encodings.details)==null?void 0:g.slice())!=null?H:[],filters:(M=(y=e.encodings.filters)==null?void 0:y.slice())!=null?M:[],text:(j=(v=e.encodings.text)==null?void 0:v.slice())!=null?j:[]},w.layout={...w.layout,background:e.config.background,format:e.config.format,interactiveScale:e.config.interactiveScale,resolve:e.config.resolve,showActions:e.config.showActions,stack:e.config.stack,zeroScale:e.config.zeroScale,size:{...w.layout.size,...e.config.size},colorPalette:e.config.colorPalette,geojson:e.config.geojson,geoKey:e.config.geoKey,geoUrl:e.config.geoUrl,primaryColor:e.config.primaryColor,scale:e.config.scale,scaleIncludeUnmatchedChoropleth:e.config.scaleIncludeUnmatchedChoropleth,showTableSummary:e.config.showTableSummary,useSvg:e.config.useSvg},w}function OCe(e){return e}function zCe(e){if(e==null)return OCe;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(s,l){l||(t=n=0);var u=2,c=s.length,d=new Array(c);for(d[0]=(t+=s[0])*r+o,d[1]=(n+=s[1])*i+a;u<c;)d[u]=s[u],++u;return d}}function PCe(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function g3(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return I7(e,n)})}:I7(e,t)}function I7(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=zae(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function zae(e,t){var n=zCe(e.transform),r=e.arcs;function i(c,d){d.length&&d.pop();for(var f=r[c<0?~c:c],h=0,m=f.length;h<m;++h)d.push(n(f[h],h));c<0&&PCe(d,m)}function o(c){return n(c)}function a(c){for(var d=[],f=0,h=c.length;f<h;++f)i(c[f],d);return d.length<2&&d.push(d[0]),d}function s(c){for(var d=a(c);d.length<4;)d.push(d[0]);return d}function l(c){return c.map(s)}function u(c){var d=c.type,f;switch(d){case"GeometryCollection":return{type:d,geometries:c.geometries.map(u)};case"Point":f=o(c.coordinates);break;case"MultiPoint":f=c.coordinates.map(o);break;case"LineString":f=a(c.arcs);break;case"MultiLineString":f=c.arcs.map(a);break;case"Polygon":f=l(c.arcs);break;case"MultiPolygon":f=c.arcs.map(l);break;default:return null}return{type:d,coordinates:f}}return u(t)}function jCe(e,t){var n={},r={},i={},o=[],a=-1;t.forEach(function(u,c){var d=e.arcs[u<0?~u:u],f;d.length<3&&!d[1][0]&&!d[1][1]&&(f=t[++a],t[a]=u,t[c]=f)}),t.forEach(function(u){var c=s(u),d=c[0],f=c[1],h,m;if(h=i[d])if(delete i[h.end],h.push(u),h.end=f,m=r[f]){delete r[m.start];var g=m===h?h:h.concat(m);r[g.start=h.start]=i[g.end=m.end]=g}else r[h.start]=i[h.end]=h;else if(h=r[f])if(delete r[h.start],h.unshift(u),h.start=d,m=i[d]){delete i[m.end];var y=m===h?h:m.concat(h);r[y.start=m.start]=i[y.end=h.end]=y}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=d]=i[h.end=f]=h});function s(u){var c=e.arcs[u<0?~u:u],d=c[0],f;return e.transform?(f=[0,0],c.forEach(function(h){f[0]+=h[0],f[1]+=h[1]})):f=c[c.length-1],u<0?[f,d]:[d,f]}function l(u,c){for(var d in u){var f=u[d];delete c[f.start],delete f.start,delete f.end,f.forEach(function(h){n[h<0?~h:h]=1}),o.push(f)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function HCe(e){return zae(e,JCe.apply(this,arguments))}function JCe(e,t,n){var r,i,o;if(arguments.length>1)r=BCe(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:jCe(e,r)}}function BCe(e,t,n){var r=[],i=[],o;function a(d){var f=d<0?~d:d;(i[f]||(i[f]=[])).push({i:d,g:o})}function s(d){d.forEach(a)}function l(d){d.forEach(s)}function u(d){d.forEach(l)}function c(d){switch(o=d,d.type){case"GeometryCollection":d.geometries.forEach(c);break;case"LineString":s(d.arcs);break;case"MultiLineString":case"Polygon":l(d.arcs);break;case"MultiPolygon":u(d.arcs);break}}return c(t),i.forEach(n==null?function(d){r.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&r.push(d[0].i)}),r}const Pae=(e,t)=>{for(const n of e.params)n.type==="field"?t(n.value):n.type==="expression"&&Pae(n.value,t)},KCe=(e,t)=>{const n=new Set(t),r=e.filter(a=>n.has(a.key));let i=r.slice(),o=e.filter(a=>!n.has(a.key));for(;i.length&&o.length;){const a=new Set;for(const s of i)Pae(s.expression,l=>a.add(l));i=o.filter(s=>a.has(s.key)),o=o.filter(s=>!a.has(s.key))}return r},eg=(e,t,n,r,i,o,a=[],s)=>{const l=n.find(X=>X.fid===vr)&&r.find(X=>X.fid===xr),u=n.filter(X=>X.fid!==vr),c=r.filter(X=>X.fid!==xr);if(l){const X=r.find(C=>C.fid===xr).aggName,Y=a.map(C=>t.find(N=>N.fid===C)).map(C=>({...C,aggName:X})).filter(Boolean);u.push(...Y.filter(C=>(C==null?void 0:C.analyticType)==="dimension")),c.push(...Y.filter(C=>(C==null?void 0:C.analyticType)==="measure"))}const d=new Set([...u,...c,...e].map(X=>X.fid));let f=null,h=null,m=null,g=null,y=null,v=null;const w=X=>{const Y=nO(X);d.add(Y);const C=X.rule;if(C.type==="one of")return{fid:Y,rule:{type:"one of",value:[...C.value]}};if(C.type==="temporal range"){const N=[new Date(C.value[0]).getTime(),new Date(C.value[1]).getTime()];return{fid:Y,rule:{type:"temporal range",value:N}}}else{if(C.type==="not in")return{fid:Y,rule:{type:"not in",value:[...C.value]}};if(C.type==="range"){const N=[Number(C.value[0]),Number(C.value[1])];return{fid:Y,rule:{type:"range",value:N}}}else return console.error("unknown rule",C),{fid:Y,rule:C}}},Z=e.filter(X=>!X.computed&&X.rule&&!X.enableAgg).map(w);Z.length&&(f={type:"filter",filters:Z});const k=KCe(t.filter(X=>X.computed&&X.expression).map(X=>({key:X.fid,expression:X.expression})),[...d]);k.length&&(h={type:"transform",transform:k});const _=e.filter(X=>X.computed&&X.rule&&!X.enableAgg).map(w);_.length&&(m={type:"filter",filters:_});const R=e.filter(X=>X.enableAgg&&X.aggName&&X.rule),I=c.filter(X=>X.aggName).map(X=>[X.fid,X.aggName]).concat(R.map(X=>[X.fid,X.aggName])),E=i&&(I.length||c.length===0&&u.length>0);return E?g={type:"view",query:[{op:"aggregate",groupBy:u.map(X=>X.fid),measures:c.concat(R).map(X=>({field:X.fid,agg:X.aggName,asFieldKey:cr(X.fid,X.aggName)}))}]}:g={type:"view",query:[{op:"raw",fields:[...new Set([...u,...c])].map(X=>X.fid)}]},E&&u.length>0&&R.length>0&&(v={type:"filter",filters:R.map(w)}),o!=="none"&&s&&(y={type:"sort",by:c.map(X=>E?cr(X.fid,X.aggName):X.fid),sort:o}),[f,h,m,g,v,y].filter(Boolean)},DCe=(e,t)=>{if(t.length===0)return e;const n=e.workflow.findIndex(r=>r.type==="transform");return n>-1?{...e,workflow:e.workflow.map((r,i)=>{if(r.type==="transform"&&i===n){const o=new Set(r.transform.map(a=>a.key));return{type:"transform",transform:r.transform.concat(t.filter(a=>!o.has(a.key)))}}return r})}:{...e,workflow:[{type:"transform",transform:t},...e.workflow]}},ACe=(e,t)=>{if(t.length===0)return e;const n=e.workflow.findIndex(r=>r.type==="filter");return n>-1?{...e,workflow:e.workflow.map((r,i)=>r.type==="filter"&&i===n?{type:"filter",filters:t.concat(r.filters)}:r)}:{...e,workflow:[{type:"filter",filters:t},...e.workflow]}},UCe=Object.keys(iO).filter(e=>!Kt.META_FIELD_KEYS.includes(e)),W7=e=>{switch(e){case"choropleth":return["geoId","color","opacity","text","details"];case"poi":return["longitude","latitude","color","opacity","size","details"];case"arc":return["radius","theta","color","opacity","size","details","text"];case"bar":case"tick":case"line":case"area":case"boxplot":return["columns","rows","color","opacity","size","details","text"];case"text":return["columns","rows","color","opacity","size","text"];case"table":return["columns","rows"];default:return["columns","rows","color","opacity","size","details","shape"]}};class ix{constructor(t,n){_t(this,"visList"),_t(this,"visIndex",0),_t(this,"createdVis",0),_t(this,"editingFilterIdx",null),_t(this,"meta"),_t(this,"segmentKey",xd.vis),_t(this,"showInsightBoard",!1),_t(this,"showDataBoard",!1),_t(this,"vizEmbededMenu",{show:!1,position:[0,0]}),_t(this,"showDataConfig",!1),_t(this,"showCodeExportPanel",!1),_t(this,"showVisualConfigPanel",!1),_t(this,"showGeoJSONConfigPanel",!1),_t(this,"removeConfirmIdx",null),_t(this,"filters",{}),_t(this,"tableCollapsedHeaderMap",new Map),_t(this,"selectedMarkObject",{}),_t(this,"showLogSettingPanel",!1),_t(this,"showBinSettingPanel",!1),_t(this,"createField"),_t(this,"localGeoJSON"),_t(this,"showErrorResolutionPanel",0),_t(this,"lastErrorMessage",""),_t(this,"onMetaChange"),this.meta=t,this.visList=n!=null&&n.empty?[]:[SL(t,"Chart 1")],this.createdVis=this.visList.length,this.onMetaChange=n==null?void 0:n.onMetaChange,DM(this,{visList:Bn.shallow,allEncodings:eb.struct,filters:Bn.ref,tableCollapsedHeaderMap:Bn.ref})}get visLength(){return this.visList.length}get vizList(){return this.visList.map(t=>t.now)}get currentVis(){return this.visList[this.visIndex].now}get currentEncodings(){return this.currentVis.encodings}get viewFilters(){return this.currentEncodings.filters}get dimensions(){return this.currentEncodings.dimensions}get measures(){return this.currentEncodings.measures}get rows(){return this.currentEncodings.rows}get columns(){return this.currentEncodings.columns}get sort(){return rO({columns:this.columns,rows:this.rows})}get sortedEncoding(){return Lae({columns:this.columns,rows:this.rows})}get allFields(){return[...this.dimensions,...this.measures]}get config(){return this.currentVis.config}get layout(){return{...this.currentVis.layout,...this.localGeoJSON?{geoJson:this.localGeoJSON}:{}}}get allEncodings(){const t={};return UCe.forEach(n=>{t[n]=this.currentEncodings[n]}),t}get viewEncodings(){const t={};return W7(this.config.geoms[0]).forEach(n=>{t[n]=this.currentEncodings[n]}),t}get viewEncodingFields(){return W7(this.config.geoms[0]).flatMap(t=>this.viewEncodings[t])}get viewDimensions(){return this.viewEncodingFields.filter(t=>t.analyticType==="dimension")}get viewMeasures(){return this.viewEncodingFields.filter(t=>t.analyticType==="measure")}get workflow(){return eg(this.viewFilters,this.allFields,this.viewDimensions,this.viewMeasures,this.config.defaultAggregated,this.sort,this.config.folds,this.config.limit)}get limit(){return this.config.limit}get canUndo(){return this.visList[this.visIndex].cursor>0}get canRedo(){const t=this.visList[this.visIndex];return t.cursor!==t.timeline.length}appendFilter(t,n,r){const i=this.currentEncodings[n][r];i.fid===vr||i.fid===xr||i.fid===ai||(this.visList[this.visIndex]=cn.appendFilter(this.visList[this.visIndex],t,n,r,ji()),this.editingFilterIdx=t)}undo(){this.visList[this.visIndex]=VCe(this.visList[this.visIndex])}redo(){this.visList[this.visIndex]=YCe(this.visList[this.visIndex])}setVisName(t,n){this.visList[t]=cn.setName(this.visList[t],n)}setMeta(t){this.meta=t}resetVisualization(t="Chart 1"){this.visList=[SL(this.meta,t)],this.createdVis=1}addVisualization(t){const n=t?typeof t=="function"?t(this.createdVis+1):t:"Chart "+(this.createdVis+1);this.visList.push(SL(this.meta,n)),this.createdVis+=1,this.visIndex=this.visList.length-1}removeVisualization(t){this.visLength!==1&&(this.visIndex>=t&&this.visIndex>0&&(this.visIndex-=1),this.visList.splice(t,1))}duplicateVisualization(t){this.visList.push(a0({...this.visList[t].now,name:this.visList[t].now.name+" Copy",visId:ji()})),this.createdVis+=1,this.visIndex=this.visList.length-1}setFilterEditing(t){this.editingFilterIdx=t}closeFilterEditing(){this.editingFilterIdx=null}setSegmentKey(t){this.segmentKey=t}setVisualConfig(...t){this.visList[this.visIndex]=cn.setConfig(this.visList[this.visIndex],...t)}setCoordSystem(t){this.visList[this.visIndex]=cn.setCoordSystem(this.visList[this.visIndex],t)}setVisualLayout(...t){typeof t[0]=="string"?this.visList[this.visIndex]=cn.setLayout(this.visList[this.visIndex],[t]):this.visList[this.visIndex]=cn.setLayout(this.visList[this.visIndex],t)}reorderField(t,n,r){Kt.META_FIELD_KEYS.includes(t)||n!==r&&(this.visList[this.visIndex]=cn.reorderField(this.visList[this.visIndex],t,n,r))}moveField(t,n,r,i){var u;if(t==="filters")return this.removeField(t,n);if(r==="filters")return this.appendFilter(i,t,n);const o=this.currentEncodings[t][n],a=Kt.META_FIELD_KEYS.includes(t),s=Kt.META_FIELD_KEYS.includes(r);if(s&&(o.fid===vr||o.fid===xr||o.fid===ai))return;const l=(u=Kt.CHANNEL_LIMIT[r])!=null?u:1/0;s===a?this.visList[this.visIndex]=cn.moveField(this.visList[this.visIndex],t,n,r,i,l):s?this.visList[this.visIndex]=cn.removeField(this.visList[this.visIndex],t,n):this.visList[this.visIndex]=cn.cloneField(this.visList[this.visIndex],t,n,r,i,ji(),l)}modFilter(t,n,r){this.visList[this.visIndex]=cn.modFilter(this.visList[this.visIndex],t,n,r)}removeField(t,n){Kt.META_FIELD_KEYS.includes(t)||(this.visList[this.visIndex]=cn.removeField(this.visList[this.visIndex],t,n))}writeFilter(t,n){this.visList[this.visIndex]=cn.writeFilter(this.visList[this.visIndex],t,lG(n))}transpose(){this.visList[this.visIndex]=cn.transpose(this.visList[this.visIndex])}createBinField(t,n,r,i=10){const o=ji(),a=this.currentEncodings,s=a.dimensions.find(l=>l.computed&&l.expression&&l.expression.op===r&&l.expression.params[0].value===a[t][n].fid&&l.expression.num===i);return s?s.fid:(this.visList[this.visIndex]=cn.createBinlogField(this.visList[this.visIndex],t,n,r,o,i),o)}createLogField(t,n,r,i=10){this.visList[this.visIndex]=cn.createBinlogField(this.visList[this.visIndex],t,n,r,ji(),i)}createDateTimeDrilledField(t,n,r,i,o){this.visList[this.visIndex]=cn.createDateDrillField(this.visList[this.visIndex],t,n,r,ji(),i,o)}createDateFeatureField(t,n,r,i,o){this.visList[this.visIndex]=cn.createDateFeatureField(this.visList[this.visIndex],t,n,r,ji(),i,o)}setFieldAggregator(t,n,r){this.visList[this.visIndex]=cn.setFieldAggregator(this.visList[this.visIndex],t,n,r)}setFilterAggregator(t,n){this.visList[this.visIndex]=cn.setFilterAggregator(this.visList[this.visIndex],t,n)}applyDefaultSort(t="ascending"){this.visList[this.visIndex]=cn.applySort(this.visList[this.visIndex],t)}exportCurrentChart(){return k7(this.visList[this.visIndex])}exportAllCharts(){return this.visList.map(t=>k7(t))}exportCode(){return this.visList.map(t=>FCe(t))}importCode(t){this.visList=t.map(n=>"layout"in n?MCe(n):a0(G7(x7(w7(n))))),this.createdVis=this.visList.length,this.visIndex=0}appendRaw(t){const n=_7(t);this.visList.push(n),this.createdVis+=1,this.visIndex=this.visList.length-1}importRaw(t){this.visList=t.map(_7),this.createdVis=this.visList.length,this.visIndex=0}appendFromOld(t){const n=a0(G7(x7(w7(t))));this.visList.push(n),this.createdVis+=1,this.visIndex=this.visList.length-1}replaceNow(t){this.visList[this.visIndex]=a0(t)}selectVisualization(t){this.visIndex=t}setShowDataConfig(t){this.showDataConfig=t}setShowInsightBoard(t){this.showInsightBoard=t}setShowDataBoard(t){this.showDataBoard=t}showEmbededMenu(t){this.vizEmbededMenu.show=!0,this.vizEmbededMenu.position=t}setShowCodeExportPanel(t){this.showCodeExportPanel=t}setShowVisualConfigPanel(t){this.showVisualConfigPanel=t}closeEmbededMenu(){this.vizEmbededMenu.show=!1}setFilters(t){this.filters=t}updateCurrentDatasetMetas(t,n){var r;const i=this.meta.find(o=>o.fid===t);if(i)for(let o in n)i[o]=n[o];(r=this.onMetaChange)==null||r.call(this,t,n)}openRemoveConfirmModal(t){this.removeConfirmIdx=t}closeRemoveConfirmModal(){this.removeConfirmIdx=null}setGeographicData(t,n,r){const i=t.type==="GeoJSON"?t.data:g3(t.data,t.objectKey||Object.keys(t.data.objects)[0]);if(!("features"in i)){console.error("Invalid GeoJSON: GeoJSON must be a FeatureCollection, but got",i);return}this.localGeoJSON=i,r?this.visList[this.visIndex]=cn.setGeoData(this.visList[this.visIndex],void 0,n,r):this.visList[this.visIndex]=cn.setGeoData(this.visList[this.visIndex],i,n,void 0)}clearGeographicData(){this.visList[this.visIndex]=cn.setGeoData(this.visList[this.visIndex],void 0,void 0,void 0)}changeSemanticType(t,n,r){this.visList[this.visIndex]=cn.changeSemanticType(this.visList[this.visIndex],t,n,r)}updateGeoKey(t){this.setVisualLayout("geoKey",t)}updateTableCollapsedHeader(t){const{uniqueKey:n,height:r}=t;if(r<1)return;const i=new Map(this.tableCollapsedHeaderMap);i.forEach((o,a)=>{a.startsWith(n)&&a.length>n.length&&i.delete(a)}),i.has(n)?i.delete(n):i.set(n,t.path),this.tableCollapsedHeaderMap=i}resetTableCollapsedHeader(){const t=new Map;this.tableCollapsedHeaderMap=t}setShowGeoJSONConfigPanel(t){this.showGeoJSONConfigPanel=t}setShowBinSettingPanel(t){this.showBinSettingPanel=t}setShowLogSettingPanel(t){this.showLogSettingPanel=t}setCreateField(t){this.createField=t}updateSelectedMarkObject(t){this.selectedMarkObject=t}updateShowErrorResolutionPanel(t,n=""){this.showErrorResolutionPanel=t,this.lastErrorMessage=n}}function $Ce(e,t,n,r){var u,c,d;var i,o,a;const s=Oae(t,n,r),l=s.encodings.dimensions.concat(s.encodings.measures);if(s.config.defaultAggregated=!!e.aggregate,((u=(i=e.geomType)==null?void 0:i.length)!=null?u:0)>0&&(s.config.geoms=(c=(o=e.geomType)==null?void 0:o.map(f=>QCe(f)))!=null?c:["tick"]),((d=(a=e.facets)==null?void 0:a.length)!=null?d:0)>0){const f=(e.facets||[]).concat(e.highFacets||[]);for(let h of f){const m=l.find(g=>g.fid===h);m&&s.encodings.rows.push(m)}}if(e.position){const[f,h]=e.position;if(f){const m=l.find(g=>g.fid===f);m&&s.encodings.columns.push(m)}if(h){const m=l.find(g=>g.fid===h);m&&s.encodings.rows.push(m)}}if(e.color&&e.color.length>0){const f=e.color[0],h=l.find(m=>m.fid===f);h&&s.encodings.color.push(h)}if(e.size&&e.size.length>0){const f=e.size[0],h=l.find(m=>m.fid===f);h&&s.encodings.size.push(h)}if(e.opacity&&e.opacity.length>0){const f=e.opacity[0],h=l.find(m=>m.fid===f);h&&s.encodings.opacity.push(h)}return s}function QCe(e){switch(e){case"interval":case"bar":return"bar";case"line":return"line";case"boxplot":return"boxplot";case"area":return"area";case"point":return"point";case"arc":return"arc";case"circle":return"circle";case"heatmap":return"circle";case"rect":return"rect";case"tick":default:return"tick"}}const jae="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NvbnN0IGw9KHMsbik9PnMuZmlsdGVyKHI9Pntmb3IoY29uc3R7cnVsZTplLGZpZDp0fW9mIG4paWYoZSlzd2l0Y2goZS50eXBlKXtjYXNlIm9uZSBvZiI6e2lmKGUudmFsdWUuaGFzKHJbdF0pKWJyZWFrO3JldHVybiExfWNhc2Uibm90IGluIjppZighZS52YWx1ZS5oYXMoclt0XSkpYnJlYWs7Y2FzZSJyYW5nZSI6e2lmKGUudmFsdWVbMF08PXJbdF0mJnJbdF08PWUudmFsdWVbMV0pYnJlYWs7cmV0dXJuITF9Y2FzZSJ0ZW1wb3JhbCByYW5nZSI6dHJ5e2NvbnN0IGE9bmV3IERhdGUoclt0XSkuZ2V0VGltZSgpO2lmKGUudmFsdWVbMF08PWEmJmE8PWUudmFsdWVbMV0pYnJlYWs7cmV0dXJuITF9Y2F0Y2goYSl7cmV0dXJuIGNvbnNvbGUuZXJyb3IoYSksITF9ZGVmYXVsdDp7Y29uc29sZS53YXJuKCJVbnJlc29sdmFibGUgZmlsdGVyIHJ1bGUiLGUpO2NvbnRpbnVlfX1yZXR1cm4hMH0pLG89cz0+e2NvbnN0e2RhdGFTb3VyY2U6bixmaWx0ZXJzOnJ9PXMuZGF0YSxlPWwobixyKTtzZWxmLnBvc3RNZXNzYWdlKGUpfTtzZWxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLG8sITEpfSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmlsdGVyLndvcmtlci05OTY4ZTdhOS5qcy5tYXAK",E7=typeof window<"u"&&window.Blob&&new Blob([atob(jae)],{type:"text/javascript;charset=utf-8"});function qCe(){const e=E7&&(window.URL||window.webkitURL).createObjectURL(E7);try{return e?new Worker(e):new Worker("data:application/javascript;base64,"+jae)}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}const Hae="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIFAoaSl7cmV0dXJuIFA9dHlwZW9mIFN5bWJvbD09ImZ1bmN0aW9uIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09InN5bWJvbCI/ZnVuY3Rpb24ocil7cmV0dXJuIHR5cGVvZiByfTpmdW5jdGlvbihyKXtyZXR1cm4gciYmdHlwZW9mIFN5bWJvbD09ImZ1bmN0aW9uIiYmci5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmciE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHJ9LFAoaSl9ZnVuY3Rpb24gayhpLHIpe2lmKCEoaSBpbnN0YW5jZW9mIHIpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIEtlKGkscil7aWYoUChpKSE9PSJvYmplY3QifHxpPT09bnVsbClyZXR1cm4gaTt2YXIgdD1pW1N5bWJvbC50b1ByaW1pdGl2ZV07aWYodCE9PXZvaWQgMCl7dmFyIG49dC5jYWxsKGkscnx8ImRlZmF1bHQiKTtpZihQKG4pIT09Im9iamVjdCIpcmV0dXJuIG47dGhyb3cgbmV3IFR5cGVFcnJvcigiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS4iKX1yZXR1cm4ocj09PSJzdHJpbmciP1N0cmluZzpOdW1iZXIpKGkpfWZ1bmN0aW9uIGRlKGkpe3ZhciByPUtlKGksInN0cmluZyIpO3JldHVybiBQKHIpPT09InN5bWJvbCI/cjpTdHJpbmcocil9ZnVuY3Rpb24gaGUoaSxyKXtmb3IodmFyIHQ9MDt0PHIubGVuZ3RoO3QrKyl7dmFyIG49clt0XTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLGRlKG4ua2V5KSxuKX19ZnVuY3Rpb24gUihpLHIsdCl7cmV0dXJuIHImJmhlKGkucHJvdG90eXBlLHIpLHQmJmhlKGksdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGksInByb3RvdHlwZSIse3dyaXRhYmxlOiExfSksaX1mdW5jdGlvbiBFKGkpe2lmKGk9PT12b2lkIDApdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4gaX1mdW5jdGlvbiBvZShpLHIpe3JldHVybiBvZT1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mLmJpbmQoKTpmdW5jdGlvbihuLGUpe3JldHVybiBuLl9fcHJvdG9fXz1lLG59LG9lKGkscil9ZnVuY3Rpb24gcShpLHIpe2lmKHR5cGVvZiByIT0iZnVuY3Rpb24iJiZyIT09bnVsbCl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpO2kucHJvdG90eXBlPU9iamVjdC5jcmVhdGUociYmci5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTppLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaSwicHJvdG90eXBlIix7d3JpdGFibGU6ITF9KSxyJiZvZShpLHIpfWZ1bmN0aW9uIEIoaSxyKXtpZihyJiYoUChyKT09PSJvYmplY3QifHx0eXBlb2Ygcj09ImZ1bmN0aW9uIikpcmV0dXJuIHI7aWYociE9PXZvaWQgMCl0aHJvdyBuZXcgVHlwZUVycm9yKCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZCIpO3JldHVybiBFKGkpfWZ1bmN0aW9uIGooaSl7cmV0dXJuIGo9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCk6ZnVuY3Rpb24odCl7cmV0dXJuIHQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YodCl9LGooaSl9ZnVuY3Rpb24gRihpLHIsdCl7cmV0dXJuIHI9ZGUociksciBpbiBpP09iamVjdC5kZWZpbmVQcm9wZXJ0eShpLHIse3ZhbHVlOnQsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTppW3JdPXQsaX1mdW5jdGlvbiBZZShpKXtpZihBcnJheS5pc0FycmF5KGkpKXJldHVybiBpfWZ1bmN0aW9uIEplKGkpe2lmKHR5cGVvZiBTeW1ib2w8InUiJiZpW1N5bWJvbC5pdGVyYXRvcl0hPW51bGx8fGlbIkBAaXRlcmF0b3IiXSE9bnVsbClyZXR1cm4gQXJyYXkuZnJvbShpKX1mdW5jdGlvbiB2ZShpLHIpeyhyPT1udWxsfHxyPmkubGVuZ3RoKSYmKHI9aS5sZW5ndGgpO2Zvcih2YXIgdD0wLG49bmV3IEFycmF5KHIpO3Q8cjt0Kyspblt0XT1pW3RdO3JldHVybiBufWZ1bmN0aW9uIHplKGkscil7aWYoaSl7aWYodHlwZW9mIGk9PSJzdHJpbmciKXJldHVybiB2ZShpLHIpO3ZhciB0PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpKS5zbGljZSg4LC0xKTtpZih0PT09Ik9iamVjdCImJmkuY29uc3RydWN0b3ImJih0PWkuY29uc3RydWN0b3IubmFtZSksdD09PSJNYXAifHx0PT09IlNldCIpcmV0dXJuIEFycmF5LmZyb20oaSk7aWYodD09PSJBcmd1bWVudHMifHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdCh0KSlyZXR1cm4gdmUoaSxyKX19ZnVuY3Rpb24gV2UoKXt0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLgpJbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuYCl9ZnVuY3Rpb24gUWUoaSl7cmV0dXJuIFllKGkpfHxKZShpKXx8emUoaSl8fFdlKCl9ZnVuY3Rpb24gbWUoaSxyKXt2YXIgdD1PYmplY3Qua2V5cyhpKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGkpO3ImJihuPW4uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGksZSkuZW51bWVyYWJsZX0pKSx0LnB1c2guYXBwbHkodCxuKX1yZXR1cm4gdH1mdW5jdGlvbiB5ZShpKXtmb3IodmFyIHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXt2YXIgdD1hcmd1bWVudHNbcl0hPW51bGw/YXJndW1lbnRzW3JdOnt9O3IlMj9tZShPYmplY3QodCksITApLmZvckVhY2goZnVuY3Rpb24obil7RihpLG4sdFtuXSl9KTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyhpLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKTptZShPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24obil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGksbixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbikpfSl9cmV0dXJuIGl9dmFyIEdlPXt0eXBlOiJsb2dnZXIiLGxvZzpmdW5jdGlvbihyKXt0aGlzLm91dHB1dCgibG9nIixyKX0sd2FybjpmdW5jdGlvbihyKXt0aGlzLm91dHB1dCgid2FybiIscil9LGVycm9yOmZ1bmN0aW9uKHIpe3RoaXMub3V0cHV0KCJlcnJvciIscil9LG91dHB1dDpmdW5jdGlvbihyLHQpe2NvbnNvbGUmJmNvbnNvbGVbcl0mJmNvbnNvbGVbcl0uYXBwbHkoY29uc29sZSx0KX19LHFlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gaShyKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06e307ayh0aGlzLGkpLHRoaXMuaW5pdChyLHQpfXJldHVybiBSKGksW3trZXk6ImluaXQiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7fTt0aGlzLnByZWZpeD1uLnByZWZpeHx8ImkxOG5leHQ6Iix0aGlzLmxvZ2dlcj10fHxHZSx0aGlzLm9wdGlvbnM9bix0aGlzLmRlYnVnPW4uZGVidWd9fSx7a2V5OiJzZXREZWJ1ZyIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5kZWJ1Zz10fX0se2tleToibG9nIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLG49bmV3IEFycmF5KHQpLGU9MDtlPHQ7ZSsrKW5bZV09YXJndW1lbnRzW2VdO3JldHVybiB0aGlzLmZvcndhcmQobiwibG9nIiwiIiwhMCl9fSx7a2V5OiJ3YXJuIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLG49bmV3IEFycmF5KHQpLGU9MDtlPHQ7ZSsrKW5bZV09YXJndW1lbnRzW2VdO3JldHVybiB0aGlzLmZvcndhcmQobiwid2FybiIsIiIsITApfX0se2tleToiZXJyb3IiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsbj1uZXcgQXJyYXkodCksZT0wO2U8dDtlKyspbltlXT1hcmd1bWVudHNbZV07cmV0dXJuIHRoaXMuZm9yd2FyZChuLCJlcnJvciIsIiIpfX0se2tleToiZGVwcmVjYXRlIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLG49bmV3IEFycmF5KHQpLGU9MDtlPHQ7ZSsrKW5bZV09YXJndW1lbnRzW2VdO3JldHVybiB0aGlzLmZvcndhcmQobiwid2FybiIsIldBUk5JTkcgREVQUkVDQVRFRDogIiwhMCl9fSx7a2V5OiJmb3J3YXJkIix2YWx1ZTpmdW5jdGlvbih0LG4sZSxhKXtyZXR1cm4gYSYmIXRoaXMuZGVidWc/bnVsbDoodHlwZW9mIHRbMF09PSJzdHJpbmciJiYodFswXT0iIi5jb25jYXQoZSkuY29uY2F0KHRoaXMucHJlZml4LCIgIikuY29uY2F0KHRbMF0pKSx0aGlzLmxvZ2dlcltuXSh0KSl9fSx7a2V5OiJjcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgaSh0aGlzLmxvZ2dlcix5ZSh5ZSh7fSx7cHJlZml4OiIiLmNvbmNhdCh0aGlzLnByZWZpeCwiOiIpLmNvbmNhdCh0LCI6Iil9KSx0aGlzLm9wdGlvbnMpKX19LHtrZXk6ImNsb25lIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdD10fHx0aGlzLm9wdGlvbnMsdC5wcmVmaXg9dC5wcmVmaXh8fHRoaXMucHJlZml4LG5ldyBpKHRoaXMubG9nZ2VyLHQpfX1dKSxpfSgpLE49bmV3IHFlLF89ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKCl7ayh0aGlzLGkpLHRoaXMub2JzZXJ2ZXJzPXt9fXJldHVybiBSKGksW3trZXk6Im9uIix2YWx1ZTpmdW5jdGlvbih0LG4pe3ZhciBlPXRoaXM7cmV0dXJuIHQuc3BsaXQoIiAiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Uub2JzZXJ2ZXJzW2FdPWUub2JzZXJ2ZXJzW2FdfHxbXSxlLm9ic2VydmVyc1thXS5wdXNoKG4pfSksdGhpc319LHtrZXk6Im9mZiIsdmFsdWU6ZnVuY3Rpb24odCxuKXtpZih0aGlzLm9ic2VydmVyc1t0XSl7aWYoIW4pe2RlbGV0ZSB0aGlzLm9ic2VydmVyc1t0XTtyZXR1cm59dGhpcy5vYnNlcnZlcnNbdF09dGhpcy5vYnNlcnZlcnNbdF0uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlIT09bn0pfX19LHtrZXk6ImVtaXQiLHZhbHVlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgbj1hcmd1bWVudHMubGVuZ3RoLGU9bmV3IEFycmF5KG4+MT9uLTE6MCksYT0xO2E8bjthKyspZVthLTFdPWFyZ3VtZW50c1thXTtpZih0aGlzLm9ic2VydmVyc1t0XSl7dmFyIG89W10uY29uY2F0KHRoaXMub2JzZXJ2ZXJzW3RdKTtvLmZvckVhY2goZnVuY3Rpb24ocyl7cy5hcHBseSh2b2lkIDAsZSl9KX1pZih0aGlzLm9ic2VydmVyc1siKiJdKXt2YXIgdT1bXS5jb25jYXQodGhpcy5vYnNlcnZlcnNbIioiXSk7dS5mb3JFYWNoKGZ1bmN0aW9uKHMpe3MuYXBwbHkocyxbdF0uY29uY2F0KGUpKX0pfX19XSksaX0oKTtmdW5jdGlvbiBLKCl7dmFyIGkscix0PW5ldyBQcm9taXNlKGZ1bmN0aW9uKG4sZSl7aT1uLHI9ZX0pO3JldHVybiB0LnJlc29sdmU9aSx0LnJlamVjdD1yLHR9ZnVuY3Rpb24gYmUoaSl7cmV0dXJuIGk9PW51bGw/IiI6IiIraX1mdW5jdGlvbiBYZShpLHIsdCl7aS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3Jbbl0mJih0W25dPXJbbl0pfSl9ZnVuY3Rpb24gc2UoaSxyLHQpe2Z1bmN0aW9uIG4odSl7cmV0dXJuIHUmJnUuaW5kZXhPZigiIyMjIik+LTE/dS5yZXBsYWNlKC8jIyMvZywiLiIpOnV9ZnVuY3Rpb24gZSgpe3JldHVybiFpfHx0eXBlb2YgaT09InN0cmluZyJ9Zm9yKHZhciBhPXR5cGVvZiByIT0ic3RyaW5nIj9bXS5jb25jYXQocik6ci5zcGxpdCgiLiIpO2EubGVuZ3RoPjE7KXtpZihlKCkpcmV0dXJue307dmFyIG89bihhLnNoaWZ0KCkpOyFpW29dJiZ0JiYoaVtvXT1uZXcgdCksT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGksbyk/aT1pW29dOmk9e319cmV0dXJuIGUoKT97fTp7b2JqOmksazpuKGEuc2hpZnQoKSl9fWZ1bmN0aW9uIE9lKGkscix0KXt2YXIgbj1zZShpLHIsT2JqZWN0KSxlPW4ub2JqLGE9bi5rO2VbYV09dH1mdW5jdGlvbiBaZShpLHIsdCxuKXt2YXIgZT1zZShpLHIsT2JqZWN0KSxhPWUub2JqLG89ZS5rO2Fbb109YVtvXXx8W10sbiYmKGFbb109YVtvXS5jb25jYXQodCkpLG58fGFbb10ucHVzaCh0KX1mdW5jdGlvbiBYKGkscil7dmFyIHQ9c2UoaSxyKSxuPXQub2JqLGU9dC5rO2lmKG4pcmV0dXJuIG5bZV19ZnVuY3Rpb24gd2UoaSxyLHQpe3ZhciBuPVgoaSx0KTtyZXR1cm4gbiE9PXZvaWQgMD9uOlgocix0KX1mdW5jdGlvbiBTZShpLHIsdCl7Zm9yKHZhciBuIGluIHIpbiE9PSJfX3Byb3RvX18iJiZuIT09ImNvbnN0cnVjdG9yIiYmKG4gaW4gaT90eXBlb2YgaVtuXT09InN0cmluZyJ8fGlbbl1pbnN0YW5jZW9mIFN0cmluZ3x8dHlwZW9mIHJbbl09PSJzdHJpbmcifHxyW25daW5zdGFuY2VvZiBTdHJpbmc/dCYmKGlbbl09cltuXSk6U2UoaVtuXSxyW25dLHQpOmlbbl09cltuXSk7cmV0dXJuIGl9ZnVuY3Rpb24gQShpKXtyZXR1cm4gaS5yZXBsYWNlKC9bXC1cW1xdXC9ce1x9XChcKVwqXCtcP1wuXFxcXlwkXHxdL2csIlxcJCYiKX12YXIgZXQ9eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImIzM5OyIsIi8iOiImI3gyRjsifTtmdW5jdGlvbiB0dChpKXtyZXR1cm4gdHlwZW9mIGk9PSJzdHJpbmciP2kucmVwbGFjZSgvWyY8PiInXC9dL2csZnVuY3Rpb24ocil7cmV0dXJuIGV0W3JdfSk6aX12YXIgWj10eXBlb2Ygd2luZG93PCJ1IiYmd2luZG93Lm5hdmlnYXRvciYmdHlwZW9mIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50RGF0YT4idSImJndpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50JiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIik+LTEsbnQ9WyIgIiwiLCIsIj8iLCIhIiwiOyJdO2Z1bmN0aW9uIHJ0KGkscix0KXtyPXJ8fCIiLHQ9dHx8IiI7dmFyIG49bnQuZmlsdGVyKGZ1bmN0aW9uKHUpe3JldHVybiByLmluZGV4T2YodSk8MCYmdC5pbmRleE9mKHUpPDB9KTtpZihuLmxlbmd0aD09PTApcmV0dXJuITA7dmFyIGU9bmV3IFJlZ0V4cCgiKCIuY29uY2F0KG4ubWFwKGZ1bmN0aW9uKHUpe3JldHVybiB1PT09Ij8iPyJcXD8iOnV9KS5qb2luKCJ8IiksIikiKSksYT0hZS50ZXN0KGkpO2lmKCFhKXt2YXIgbz1pLmluZGV4T2YodCk7bz4wJiYhZS50ZXN0KGkuc3Vic3RyaW5nKDAsbykpJiYoYT0hMCl9cmV0dXJuIGF9ZnVuY3Rpb24geGUoaSxyKXt2YXIgdD1PYmplY3Qua2V5cyhpKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGkpO3ImJihuPW4uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGksZSkuZW51bWVyYWJsZX0pKSx0LnB1c2guYXBwbHkodCxuKX1yZXR1cm4gdH1mdW5jdGlvbiBlZShpKXtmb3IodmFyIHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXt2YXIgdD1hcmd1bWVudHNbcl0hPW51bGw/YXJndW1lbnRzW3JdOnt9O3IlMj94ZShPYmplY3QodCksITApLmZvckVhY2goZnVuY3Rpb24obil7RihpLG4sdFtuXSl9KTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyhpLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKTp4ZShPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24obil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGksbixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbikpfSl9cmV0dXJuIGl9ZnVuY3Rpb24gYXQoaSl7dmFyIHI9aXQoKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbj1qKGkpLGU7aWYocil7dmFyIGE9aih0aGlzKS5jb25zdHJ1Y3RvcjtlPVJlZmxlY3QuY29uc3RydWN0KG4sYXJndW1lbnRzLGEpfWVsc2UgZT1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gQih0aGlzLGUpfX1mdW5jdGlvbiBpdCgpe2lmKHR5cGVvZiBSZWZsZWN0PiJ1Inx8IVJlZmxlY3QuY29uc3RydWN0fHxSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKXJldHVybiExO2lmKHR5cGVvZiBQcm94eT09ImZ1bmN0aW9uIilyZXR1cm4hMDt0cnl7cmV0dXJuIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLGZ1bmN0aW9uKCl7fSkpLCEwfWNhdGNoe3JldHVybiExfX1mdW5jdGlvbiBQZShpLHIpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MiYmYXJndW1lbnRzWzJdIT09dm9pZCAwP2FyZ3VtZW50c1syXToiLiI7aWYoaSl7aWYoaVtyXSlyZXR1cm4gaVtyXTtmb3IodmFyIG49ci5zcGxpdCh0KSxlPWksYT0wO2E8bi5sZW5ndGg7KythKXtpZighZXx8dHlwZW9mIGVbblthXV09PSJzdHJpbmciJiZhKzE8bi5sZW5ndGgpcmV0dXJuO2lmKGVbblthXV09PT12b2lkIDApe2Zvcih2YXIgbz0yLHU9bi5zbGljZShhLGErbykuam9pbih0KSxzPWVbdV07cz09PXZvaWQgMCYmbi5sZW5ndGg+YStvOylvKyssdT1uLnNsaWNlKGEsYStvKS5qb2luKHQpLHM9ZVt1XTtpZihzPT09dm9pZCAwKXJldHVybjtpZihzPT09bnVsbClyZXR1cm4gbnVsbDtpZihyLmVuZHNXaXRoKHUpKXtpZih0eXBlb2Ygcz09InN0cmluZyIpcmV0dXJuIHM7aWYodSYmdHlwZW9mIHNbdV09PSJzdHJpbmciKXJldHVybiBzW3VdfXZhciBsPW4uc2xpY2UoYStvKS5qb2luKHQpO3JldHVybiBsP1BlKHMsbCx0KTp2b2lkIDB9ZT1lW25bYV1dfXJldHVybiBlfX12YXIgb3Q9ZnVuY3Rpb24oaSl7cSh0LGkpO3ZhciByPWF0KHQpO2Z1bmN0aW9uIHQobil7dmFyIGUsYT1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06e25zOlsidHJhbnNsYXRpb24iXSxkZWZhdWx0TlM6InRyYW5zbGF0aW9uIn07cmV0dXJuIGsodGhpcyx0KSxlPXIuY2FsbCh0aGlzKSxaJiZfLmNhbGwoRShlKSksZS5kYXRhPW58fHt9LGUub3B0aW9ucz1hLGUub3B0aW9ucy5rZXlTZXBhcmF0b3I9PT12b2lkIDAmJihlLm9wdGlvbnMua2V5U2VwYXJhdG9yPSIuIiksZS5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmU9PT12b2lkIDAmJihlLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZT0hMCksZX1yZXR1cm4gUih0LFt7a2V5OiJhZGROYW1lc3BhY2VzIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMubnMuaW5kZXhPZihlKTwwJiZ0aGlzLm9wdGlvbnMubnMucHVzaChlKX19LHtrZXk6InJlbW92ZU5hbWVzcGFjZXMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBhPXRoaXMub3B0aW9ucy5ucy5pbmRleE9mKGUpO2E+LTEmJnRoaXMub3B0aW9ucy5ucy5zcGxpY2UoYSwxKX19LHtrZXk6ImdldFJlc291cmNlIix2YWx1ZTpmdW5jdGlvbihlLGEsbyl7dmFyIHU9YXJndW1lbnRzLmxlbmd0aD4zJiZhcmd1bWVudHNbM10hPT12b2lkIDA/YXJndW1lbnRzWzNdOnt9LHM9dS5rZXlTZXBhcmF0b3IhPT12b2lkIDA/dS5rZXlTZXBhcmF0b3I6dGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcixsPXUuaWdub3JlSlNPTlN0cnVjdHVyZSE9PXZvaWQgMD91Lmlnbm9yZUpTT05TdHJ1Y3R1cmU6dGhpcy5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmUsZj1bZSxhXTtvJiZ0eXBlb2YgbyE9InN0cmluZyImJihmPWYuY29uY2F0KG8pKSxvJiZ0eXBlb2Ygbz09InN0cmluZyImJihmPWYuY29uY2F0KHM/by5zcGxpdChzKTpvKSksZS5pbmRleE9mKCIuIik+LTEmJihmPWUuc3BsaXQoIi4iKSk7dmFyIGM9WCh0aGlzLmRhdGEsZik7cmV0dXJuIGN8fCFsfHx0eXBlb2YgbyE9InN0cmluZyI/YzpQZSh0aGlzLmRhdGEmJnRoaXMuZGF0YVtlXSYmdGhpcy5kYXRhW2VdW2FdLG8scyl9fSx7a2V5OiJhZGRSZXNvdXJjZSIsdmFsdWU6ZnVuY3Rpb24oZSxhLG8sdSl7dmFyIHM9YXJndW1lbnRzLmxlbmd0aD40JiZhcmd1bWVudHNbNF0hPT12b2lkIDA/YXJndW1lbnRzWzRdOntzaWxlbnQ6ITF9LGw9dGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcjtsPT09dm9pZCAwJiYobD0iLiIpO3ZhciBmPVtlLGFdO28mJihmPWYuY29uY2F0KGw/by5zcGxpdChsKTpvKSksZS5pbmRleE9mKCIuIik+LTEmJihmPWUuc3BsaXQoIi4iKSx1PWEsYT1mWzFdKSx0aGlzLmFkZE5hbWVzcGFjZXMoYSksT2UodGhpcy5kYXRhLGYsdSkscy5zaWxlbnR8fHRoaXMuZW1pdCgiYWRkZWQiLGUsYSxvLHUpfX0se2tleToiYWRkUmVzb3VyY2VzIix2YWx1ZTpmdW5jdGlvbihlLGEsbyl7dmFyIHU9YXJndW1lbnRzLmxlbmd0aD4zJiZhcmd1bWVudHNbM10hPT12b2lkIDA/YXJndW1lbnRzWzNdOntzaWxlbnQ6ITF9O2Zvcih2YXIgcyBpbiBvKSh0eXBlb2Ygb1tzXT09InN0cmluZyJ8fE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkob1tzXSk9PT0iW29iamVjdCBBcnJheV0iKSYmdGhpcy5hZGRSZXNvdXJjZShlLGEscyxvW3NdLHtzaWxlbnQ6ITB9KTt1LnNpbGVudHx8dGhpcy5lbWl0KCJhZGRlZCIsZSxhLG8pfX0se2tleToiYWRkUmVzb3VyY2VCdW5kbGUiLHZhbHVlOmZ1bmN0aW9uKGUsYSxvLHUscyl7dmFyIGw9YXJndW1lbnRzLmxlbmd0aD41JiZhcmd1bWVudHNbNV0hPT12b2lkIDA/YXJndW1lbnRzWzVdOntzaWxlbnQ6ITF9LGY9W2UsYV07ZS5pbmRleE9mKCIuIik+LTEmJihmPWUuc3BsaXQoIi4iKSx1PW8sbz1hLGE9ZlsxXSksdGhpcy5hZGROYW1lc3BhY2VzKGEpO3ZhciBjPVgodGhpcy5kYXRhLGYpfHx7fTt1P1NlKGMsbyxzKTpjPWVlKGVlKHt9LGMpLG8pLE9lKHRoaXMuZGF0YSxmLGMpLGwuc2lsZW50fHx0aGlzLmVtaXQoImFkZGVkIixlLGEsbyl9fSx7a2V5OiJyZW1vdmVSZXNvdXJjZUJ1bmRsZSIsdmFsdWU6ZnVuY3Rpb24oZSxhKXt0aGlzLmhhc1Jlc291cmNlQnVuZGxlKGUsYSkmJmRlbGV0ZSB0aGlzLmRhdGFbZV1bYV0sdGhpcy5yZW1vdmVOYW1lc3BhY2VzKGEpLHRoaXMuZW1pdCgicmVtb3ZlZCIsZSxhKX19LHtrZXk6Imhhc1Jlc291cmNlQnVuZGxlIix2YWx1ZTpmdW5jdGlvbihlLGEpe3JldHVybiB0aGlzLmdldFJlc291cmNlKGUsYSkhPT12b2lkIDB9fSx7a2V5OiJnZXRSZXNvdXJjZUJ1bmRsZSIsdmFsdWU6ZnVuY3Rpb24oZSxhKXtyZXR1cm4gYXx8KGE9dGhpcy5vcHRpb25zLmRlZmF1bHROUyksdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEk9PT0idjEiP2VlKGVlKHt9LHt9KSx0aGlzLmdldFJlc291cmNlKGUsYSkpOnRoaXMuZ2V0UmVzb3VyY2UoZSxhKX19LHtrZXk6ImdldERhdGFCeUxhbmd1YWdlIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kYXRhW2VdfX0se2tleToiaGFzTGFuZ3VhZ2VTb21lVHJhbnNsYXRpb25zIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgYT10aGlzLmdldERhdGFCeUxhbmd1YWdlKGUpLG89YSYmT2JqZWN0LmtleXMoYSl8fFtdO3JldHVybiEhby5maW5kKGZ1bmN0aW9uKHUpe3JldHVybiBhW3VdJiZPYmplY3Qua2V5cyhhW3VdKS5sZW5ndGg+MH0pfX0se2tleToidG9KU09OIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGF9fV0pLHR9KF8pLExlPXtwcm9jZXNzb3JzOnt9LGFkZFBvc3RQcm9jZXNzb3I6ZnVuY3Rpb24ocil7dGhpcy5wcm9jZXNzb3JzW3IubmFtZV09cn0saGFuZGxlOmZ1bmN0aW9uKHIsdCxuLGUsYSl7dmFyIG89dGhpcztyZXR1cm4gci5mb3JFYWNoKGZ1bmN0aW9uKHUpe28ucHJvY2Vzc29yc1t1XSYmKHQ9by5wcm9jZXNzb3JzW3VdLnByb2Nlc3ModCxuLGUsYSkpfSksdH19O2Z1bmN0aW9uIGtlKGkscil7dmFyIHQ9T2JqZWN0LmtleXMoaSk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIG49T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhpKTtyJiYobj1uLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihpLGUpLmVudW1lcmFibGV9KSksdC5wdXNoLmFwcGx5KHQsbil9cmV0dXJuIHR9ZnVuY3Rpb24gdyhpKXtmb3IodmFyIHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXt2YXIgdD1hcmd1bWVudHNbcl0hPW51bGw/YXJndW1lbnRzW3JdOnt9O3IlMj9rZShPYmplY3QodCksITApLmZvckVhY2goZnVuY3Rpb24obil7RihpLG4sdFtuXSl9KTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyhpLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKTprZShPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24obil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGksbixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbikpfSl9cmV0dXJuIGl9ZnVuY3Rpb24gc3QoaSl7dmFyIHI9dXQoKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbj1qKGkpLGU7aWYocil7dmFyIGE9aih0aGlzKS5jb25zdHJ1Y3RvcjtlPVJlZmxlY3QuY29uc3RydWN0KG4sYXJndW1lbnRzLGEpfWVsc2UgZT1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gQih0aGlzLGUpfX1mdW5jdGlvbiB1dCgpe2lmKHR5cGVvZiBSZWZsZWN0PiJ1Inx8IVJlZmxlY3QuY29uc3RydWN0fHxSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKXJldHVybiExO2lmKHR5cGVvZiBQcm94eT09ImZ1bmN0aW9uIilyZXR1cm4hMDt0cnl7cmV0dXJuIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLGZ1bmN0aW9uKCl7fSkpLCEwfWNhdGNoe3JldHVybiExfX12YXIgUmU9e30samU9ZnVuY3Rpb24oaSl7cSh0LGkpO3ZhciByPXN0KHQpO2Z1bmN0aW9uIHQobil7dmFyIGUsYT1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06e307cmV0dXJuIGsodGhpcyx0KSxlPXIuY2FsbCh0aGlzKSxaJiZfLmNhbGwoRShlKSksWGUoWyJyZXNvdXJjZVN0b3JlIiwibGFuZ3VhZ2VVdGlscyIsInBsdXJhbFJlc29sdmVyIiwiaW50ZXJwb2xhdG9yIiwiYmFja2VuZENvbm5lY3RvciIsImkxOG5Gb3JtYXQiLCJ1dGlscyJdLG4sRShlKSksZS5vcHRpb25zPWEsZS5vcHRpb25zLmtleVNlcGFyYXRvcj09PXZvaWQgMCYmKGUub3B0aW9ucy5rZXlTZXBhcmF0b3I9Ii4iKSxlLmxvZ2dlcj1OLmNyZWF0ZSgidHJhbnNsYXRvciIpLGV9cmV0dXJuIFIodCxbe2tleToiY2hhbmdlTGFuZ3VhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe2UmJih0aGlzLmxhbmd1YWdlPWUpfX0se2tleToiZXhpc3RzIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgYT1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06e2ludGVycG9sYXRpb246e319O2lmKGU9PW51bGwpcmV0dXJuITE7dmFyIG89dGhpcy5yZXNvbHZlKGUsYSk7cmV0dXJuIG8mJm8ucmVzIT09dm9pZCAwfX0se2tleToiZXh0cmFjdEZyb21LZXkiLHZhbHVlOmZ1bmN0aW9uKGUsYSl7dmFyIG89YS5uc1NlcGFyYXRvciE9PXZvaWQgMD9hLm5zU2VwYXJhdG9yOnRoaXMub3B0aW9ucy5uc1NlcGFyYXRvcjtvPT09dm9pZCAwJiYobz0iOiIpO3ZhciB1PWEua2V5U2VwYXJhdG9yIT09dm9pZCAwP2Eua2V5U2VwYXJhdG9yOnRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3Iscz1hLm5zfHx0aGlzLm9wdGlvbnMuZGVmYXVsdE5TfHxbXSxsPW8mJmUuaW5kZXhPZihvKT4tMSxmPSF0aGlzLm9wdGlvbnMudXNlckRlZmluZWRLZXlTZXBhcmF0b3ImJiFhLmtleVNlcGFyYXRvciYmIXRoaXMub3B0aW9ucy51c2VyRGVmaW5lZE5zU2VwYXJhdG9yJiYhYS5uc1NlcGFyYXRvciYmIXJ0KGUsbyx1KTtpZihsJiYhZil7dmFyIGM9ZS5tYXRjaCh0aGlzLmludGVycG9sYXRvci5uZXN0aW5nUmVnZXhwKTtpZihjJiZjLmxlbmd0aD4wKXJldHVybntrZXk6ZSxuYW1lc3BhY2VzOnN9O3ZhciBnPWUuc3BsaXQobyk7KG8hPT11fHxvPT09dSYmdGhpcy5vcHRpb25zLm5zLmluZGV4T2YoZ1swXSk+LTEpJiYocz1nLnNoaWZ0KCkpLGU9Zy5qb2luKHUpfXJldHVybiB0eXBlb2Ygcz09InN0cmluZyImJihzPVtzXSkse2tleTplLG5hbWVzcGFjZXM6c319fSx7a2V5OiJ0cmFuc2xhdGUiLHZhbHVlOmZ1bmN0aW9uKGUsYSxvKXt2YXIgdT10aGlzO2lmKFAoYSkhPT0ib2JqZWN0IiYmdGhpcy5vcHRpb25zLm92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyJiYoYT10aGlzLm9wdGlvbnMub3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXIoYXJndW1lbnRzKSksYXx8KGE9e30pLGU9PW51bGwpcmV0dXJuIiI7QXJyYXkuaXNBcnJheShlKXx8KGU9W1N0cmluZyhlKV0pO3ZhciBzPWEucmV0dXJuRGV0YWlscyE9PXZvaWQgMD9hLnJldHVybkRldGFpbHM6dGhpcy5vcHRpb25zLnJldHVybkRldGFpbHMsbD1hLmtleVNlcGFyYXRvciE9PXZvaWQgMD9hLmtleVNlcGFyYXRvcjp0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yLGY9dGhpcy5leHRyYWN0RnJvbUtleShlW2UubGVuZ3RoLTFdLGEpLGM9Zi5rZXksZz1mLm5hbWVzcGFjZXMscD1nW2cubGVuZ3RoLTFdLHY9YS5sbmd8fHRoaXMubGFuZ3VhZ2UseT1hLmFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlfHx0aGlzLm9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGU7aWYodiYmdi50b0xvd2VyQ2FzZSgpPT09ImNpbW9kZSIpe2lmKHkpe3ZhciBtPWEubnNTZXBhcmF0b3J8fHRoaXMub3B0aW9ucy5uc1NlcGFyYXRvcjtyZXR1cm4gcz8oZC5yZXM9IiIuY29uY2F0KHApLmNvbmNhdChtKS5jb25jYXQoYyksZCk6IiIuY29uY2F0KHApLmNvbmNhdChtKS5jb25jYXQoYyl9cmV0dXJuIHM/KGQucmVzPWMsZCk6Y312YXIgZD10aGlzLnJlc29sdmUoZSxhKSxoPWQmJmQucmVzLE89ZCYmZC51c2VkS2V5fHxjLGI9ZCYmZC5leGFjdFVzZWRLZXl8fGMseD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KGgpLEM9WyJbb2JqZWN0IE51bWJlcl0iLCJbb2JqZWN0IEZ1bmN0aW9uXSIsIltvYmplY3QgUmVnRXhwXSJdLE09YS5qb2luQXJyYXlzIT09dm9pZCAwP2Euam9pbkFycmF5czp0aGlzLm9wdGlvbnMuam9pbkFycmF5cyxZPSF0aGlzLmkxOG5Gb3JtYXR8fHRoaXMuaTE4bkZvcm1hdC5oYW5kbGVBc09iamVjdCxKPXR5cGVvZiBoIT0ic3RyaW5nIiYmdHlwZW9mIGghPSJib29sZWFuIiYmdHlwZW9mIGghPSJudW1iZXIiO2lmKFkmJmgmJkomJkMuaW5kZXhPZih4KTwwJiYhKHR5cGVvZiBNPT0ic3RyaW5nIiYmeD09PSJbb2JqZWN0IEFycmF5XSIpKXtpZighYS5yZXR1cm5PYmplY3RzJiYhdGhpcy5vcHRpb25zLnJldHVybk9iamVjdHMpe3RoaXMub3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXJ8fHRoaXMubG9nZ2VyLndhcm4oImFjY2Vzc2luZyBhbiBvYmplY3QgLSBidXQgcmV0dXJuT2JqZWN0cyBvcHRpb25zIGlzIG5vdCBlbmFibGVkISIpO3ZhciAkPXRoaXMub3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXI/dGhpcy5vcHRpb25zLnJldHVybmVkT2JqZWN0SGFuZGxlcihPLGgsdyh3KHt9LGEpLHt9LHtuczpnfSkpOiJrZXkgJyIuY29uY2F0KGMsIiAoIikuY29uY2F0KHRoaXMubGFuZ3VhZ2UsIiknIHJldHVybmVkIGFuIG9iamVjdCBpbnN0ZWFkIG9mIHN0cmluZy4iKTtyZXR1cm4gcz8oZC5yZXM9JCxkKTokfWlmKGwpe3ZhciBNZT14PT09IltvYmplY3QgQXJyYXldIixyZT1NZT9bXTp7fSxJdD1NZT9iOk87Zm9yKHZhciBVIGluIGgpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGgsVSkpe3ZhciBBZT0iIi5jb25jYXQoSXQpLmNvbmNhdChsKS5jb25jYXQoVSk7cmVbVV09dGhpcy50cmFuc2xhdGUoQWUsdyh3KHt9LGEpLHtqb2luQXJyYXlzOiExLG5zOmd9KSkscmVbVV09PT1BZSYmKHJlW1VdPWhbVV0pfWg9cmV9fWVsc2UgaWYoWSYmdHlwZW9mIE09PSJzdHJpbmciJiZ4PT09IltvYmplY3QgQXJyYXldIiloPWguam9pbihNKSxoJiYoaD10aGlzLmV4dGVuZFRyYW5zbGF0aW9uKGgsZSxhLG8pKTtlbHNle3ZhciBhZT0hMSx6PSExLFZlPWEuY291bnQhPT12b2lkIDAmJnR5cGVvZiBhLmNvdW50IT0ic3RyaW5nIixsZT10Lmhhc0RlZmF1bHRWYWx1ZShhKSxUdD1WZT90aGlzLnBsdXJhbFJlc29sdmVyLmdldFN1ZmZpeCh2LGEuY291bnQsYSk6IiIsVz1hWyJkZWZhdWx0VmFsdWUiLmNvbmNhdChUdCldfHxhLmRlZmF1bHRWYWx1ZTshdGhpcy5pc1ZhbGlkTG9va3VwKGgpJiZsZSYmKGFlPSEwLGg9VyksdGhpcy5pc1ZhbGlkTG9va3VwKGgpfHwoej0hMCxoPWMpO3ZhciBNdD1hLm1pc3NpbmdLZXlOb1ZhbHVlRmFsbGJhY2tUb0tleXx8dGhpcy5vcHRpb25zLm1pc3NpbmdLZXlOb1ZhbHVlRmFsbGJhY2tUb0tleSxBdD1NdCYmej92b2lkIDA6aCxRPWxlJiZXIT09aCYmdGhpcy5vcHRpb25zLnVwZGF0ZU1pc3Npbmc7aWYoenx8YWV8fFEpe2lmKHRoaXMubG9nZ2VyLmxvZyhRPyJ1cGRhdGVLZXkiOiJtaXNzaW5nS2V5Iix2LHAsYyxRP1c6aCksbCl7dmFyICRlPXRoaXMucmVzb2x2ZShjLHcodyh7fSxhKSx7fSx7a2V5U2VwYXJhdG9yOiExfSkpOyRlJiYkZS5yZXMmJnRoaXMubG9nZ2VyLndhcm4oIlNlZW1zIHRoZSBsb2FkZWQgdHJhbnNsYXRpb25zIHdlcmUgaW4gZmxhdCBKU09OIGZvcm1hdCBpbnN0ZWFkIG9mIG5lc3RlZC4gRWl0aGVyIHNldCBrZXlTZXBhcmF0b3I6IGZhbHNlIG9uIGluaXQgb3IgbWFrZSBzdXJlIHlvdXIgdHJhbnNsYXRpb25zIGFyZSBwdWJsaXNoZWQgaW4gbmVzdGVkIGZvcm1hdC4iKX12YXIgRz1bXSxpZT10aGlzLmxhbmd1YWdlVXRpbHMuZ2V0RmFsbGJhY2tDb2Rlcyh0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcsYS5sbmd8fHRoaXMubGFuZ3VhZ2UpO2lmKHRoaXMub3B0aW9ucy5zYXZlTWlzc2luZ1RvPT09ImZhbGxiYWNrIiYmaWUmJmllWzBdKWZvcih2YXIgY2U9MDtjZTxpZS5sZW5ndGg7Y2UrKylHLnB1c2goaWVbY2VdKTtlbHNlIHRoaXMub3B0aW9ucy5zYXZlTWlzc2luZ1RvPT09ImFsbCI/Rz10aGlzLmxhbmd1YWdlVXRpbHMudG9SZXNvbHZlSGllcmFyY2h5KGEubG5nfHx0aGlzLmxhbmd1YWdlKTpHLnB1c2goYS5sbmd8fHRoaXMubGFuZ3VhZ2UpO3ZhciBVZT1mdW5jdGlvbihILHBlLEhlKXt2YXIgQmU9bGUmJkhlIT09aD9IZTpBdDt1Lm9wdGlvbnMubWlzc2luZ0tleUhhbmRsZXI/dS5vcHRpb25zLm1pc3NpbmdLZXlIYW5kbGVyKEgscCxwZSxCZSxRLGEpOnUuYmFja2VuZENvbm5lY3RvciYmdS5iYWNrZW5kQ29ubmVjdG9yLnNhdmVNaXNzaW5nJiZ1LmJhY2tlbmRDb25uZWN0b3Iuc2F2ZU1pc3NpbmcoSCxwLHBlLEJlLFEsYSksdS5lbWl0KCJtaXNzaW5nS2V5IixILHAscGUsaCl9O3RoaXMub3B0aW9ucy5zYXZlTWlzc2luZyYmKHRoaXMub3B0aW9ucy5zYXZlTWlzc2luZ1BsdXJhbHMmJlZlP0cuZm9yRWFjaChmdW5jdGlvbihnZSl7dS5wbHVyYWxSZXNvbHZlci5nZXRTdWZmaXhlcyhnZSxhKS5mb3JFYWNoKGZ1bmN0aW9uKEgpe1VlKFtnZV0sYytILGFbImRlZmF1bHRWYWx1ZSIuY29uY2F0KEgpXXx8Vyl9KX0pOlVlKEcsYyxXKSl9aD10aGlzLmV4dGVuZFRyYW5zbGF0aW9uKGgsZSxhLGQsbykseiYmaD09PWMmJnRoaXMub3B0aW9ucy5hcHBlbmROYW1lc3BhY2VUb01pc3NpbmdLZXkmJihoPSIiLmNvbmNhdChwLCI6IikuY29uY2F0KGMpKSwoenx8YWUpJiZ0aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlciYmKHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5QVBJIT09InYxIj9oPXRoaXMub3B0aW9ucy5wYXJzZU1pc3NpbmdLZXlIYW5kbGVyKHRoaXMub3B0aW9ucy5hcHBlbmROYW1lc3BhY2VUb01pc3NpbmdLZXk/IiIuY29uY2F0KHAsIjoiKS5jb25jYXQoYyk6YyxhZT9oOnZvaWQgMCk6aD10aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlcihoKSl9cmV0dXJuIHM/KGQucmVzPWgsZCk6aH19LHtrZXk6ImV4dGVuZFRyYW5zbGF0aW9uIix2YWx1ZTpmdW5jdGlvbihlLGEsbyx1LHMpe3ZhciBsPXRoaXM7aWYodGhpcy5pMThuRm9ybWF0JiZ0aGlzLmkxOG5Gb3JtYXQucGFyc2UpZT10aGlzLmkxOG5Gb3JtYXQucGFyc2UoZSx3KHcoe30sdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcyksbyksdS51c2VkTG5nLHUudXNlZE5TLHUudXNlZEtleSx7cmVzb2x2ZWQ6dX0pO2Vsc2UgaWYoIW8uc2tpcEludGVycG9sYXRpb24pe28uaW50ZXJwb2xhdGlvbiYmdGhpcy5pbnRlcnBvbGF0b3IuaW5pdCh3KHcoe30sbykse2ludGVycG9sYXRpb246dyh3KHt9LHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uKSxvLmludGVycG9sYXRpb24pfSkpO3ZhciBmPXR5cGVvZiBlPT0ic3RyaW5nIiYmKG8mJm8uaW50ZXJwb2xhdGlvbiYmby5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlcyE9PXZvaWQgMD9vLmludGVycG9sYXRpb24uc2tpcE9uVmFyaWFibGVzOnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlcyksYztpZihmKXt2YXIgZz1lLm1hdGNoKHRoaXMuaW50ZXJwb2xhdG9yLm5lc3RpbmdSZWdleHApO2M9ZyYmZy5sZW5ndGh9dmFyIHA9by5yZXBsYWNlJiZ0eXBlb2Ygby5yZXBsYWNlIT0ic3RyaW5nIj9vLnJlcGxhY2U6bztpZih0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzJiYocD13KHcoe30sdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcykscCkpLGU9dGhpcy5pbnRlcnBvbGF0b3IuaW50ZXJwb2xhdGUoZSxwLG8ubG5nfHx0aGlzLmxhbmd1YWdlLG8pLGYpe3ZhciB2PWUubWF0Y2godGhpcy5pbnRlcnBvbGF0b3IubmVzdGluZ1JlZ2V4cCkseT12JiZ2Lmxlbmd0aDtjPHkmJihvLm5lc3Q9ITEpfW8ubmVzdCE9PSExJiYoZT10aGlzLmludGVycG9sYXRvci5uZXN0KGUsZnVuY3Rpb24oKXtmb3IodmFyIGg9YXJndW1lbnRzLmxlbmd0aCxPPW5ldyBBcnJheShoKSxiPTA7YjxoO2IrKylPW2JdPWFyZ3VtZW50c1tiXTtyZXR1cm4gcyYmc1swXT09PU9bMF0mJiFvLmNvbnRleHQ/KGwubG9nZ2VyLndhcm4oIkl0IHNlZW1zIHlvdSBhcmUgbmVzdGluZyByZWN1cnNpdmVseSBrZXk6ICIuY29uY2F0KE9bMF0sIiBpbiBrZXk6ICIpLmNvbmNhdChhWzBdKSksbnVsbCk6bC50cmFuc2xhdGUuYXBwbHkobCxPLmNvbmNhdChbYV0pKX0sbykpLG8uaW50ZXJwb2xhdGlvbiYmdGhpcy5pbnRlcnBvbGF0b3IucmVzZXQoKX12YXIgbT1vLnBvc3RQcm9jZXNzfHx0aGlzLm9wdGlvbnMucG9zdFByb2Nlc3MsZD10eXBlb2YgbT09InN0cmluZyI/W21dOm07cmV0dXJuIGUhPW51bGwmJmQmJmQubGVuZ3RoJiZvLmFwcGx5UG9zdFByb2Nlc3NvciE9PSExJiYoZT1MZS5oYW5kbGUoZCxlLGEsdGhpcy5vcHRpb25zJiZ0aGlzLm9wdGlvbnMucG9zdFByb2Nlc3NQYXNzUmVzb2x2ZWQ/dyh7aTE4blJlc29sdmVkOnV9LG8pOm8sdGhpcykpLGV9fSx7a2V5OiJyZXNvbHZlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgYT10aGlzLG89YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9LHUscyxsLGYsYztyZXR1cm4gdHlwZW9mIGU9PSJzdHJpbmciJiYoZT1bZV0pLGUuZm9yRWFjaChmdW5jdGlvbihnKXtpZighYS5pc1ZhbGlkTG9va3VwKHUpKXt2YXIgcD1hLmV4dHJhY3RGcm9tS2V5KGcsbyksdj1wLmtleTtzPXY7dmFyIHk9cC5uYW1lc3BhY2VzO2Eub3B0aW9ucy5mYWxsYmFja05TJiYoeT15LmNvbmNhdChhLm9wdGlvbnMuZmFsbGJhY2tOUykpO3ZhciBtPW8uY291bnQhPT12b2lkIDAmJnR5cGVvZiBvLmNvdW50IT0ic3RyaW5nIixkPW0mJiFvLm9yZGluYWwmJm8uY291bnQ9PT0wJiZhLnBsdXJhbFJlc29sdmVyLnNob3VsZFVzZUludGxBcGkoKSxoPW8uY29udGV4dCE9PXZvaWQgMCYmKHR5cGVvZiBvLmNvbnRleHQ9PSJzdHJpbmcifHx0eXBlb2Ygby5jb250ZXh0PT0ibnVtYmVyIikmJm8uY29udGV4dCE9PSIiLE89by5sbmdzP28ubG5nczphLmxhbmd1YWdlVXRpbHMudG9SZXNvbHZlSGllcmFyY2h5KG8ubG5nfHxhLmxhbmd1YWdlLG8uZmFsbGJhY2tMbmcpO3kuZm9yRWFjaChmdW5jdGlvbihiKXthLmlzVmFsaWRMb29rdXAodSl8fChjPWIsIVJlWyIiLmNvbmNhdChPWzBdLCItIikuY29uY2F0KGIpXSYmYS51dGlscyYmYS51dGlscy5oYXNMb2FkZWROYW1lc3BhY2UmJiFhLnV0aWxzLmhhc0xvYWRlZE5hbWVzcGFjZShjKSYmKFJlWyIiLmNvbmNhdChPWzBdLCItIikuY29uY2F0KGIpXT0hMCxhLmxvZ2dlci53YXJuKCdrZXkgIicuY29uY2F0KHMsJyIgZm9yIGxhbmd1YWdlcyAiJykuY29uY2F0KE8uam9pbigiLCAiKSxgIiB3b24ndCBnZXQgcmVzb2x2ZWQgYXMgbmFtZXNwYWNlICJgKS5jb25jYXQoYywnIiB3YXMgbm90IHlldCBsb2FkZWQnKSwiVGhpcyBtZWFucyBzb21ldGhpbmcgSVMgV1JPTkcgaW4geW91ciBzZXR1cC4gWW91IGFjY2VzcyB0aGUgdCBmdW5jdGlvbiBiZWZvcmUgaTE4bmV4dC5pbml0IC8gaTE4bmV4dC5sb2FkTmFtZXNwYWNlIC8gaTE4bmV4dC5jaGFuZ2VMYW5ndWFnZSB3YXMgZG9uZS4gV2FpdCBmb3IgdGhlIGNhbGxiYWNrIG9yIFByb21pc2UgdG8gcmVzb2x2ZSBiZWZvcmUgYWNjZXNzaW5nIGl0ISEhIikpLE8uZm9yRWFjaChmdW5jdGlvbih4KXtpZighYS5pc1ZhbGlkTG9va3VwKHUpKXtmPXg7dmFyIEM9W3ZdO2lmKGEuaTE4bkZvcm1hdCYmYS5pMThuRm9ybWF0LmFkZExvb2t1cEtleXMpYS5pMThuRm9ybWF0LmFkZExvb2t1cEtleXMoQyx2LHgsYixvKTtlbHNle3ZhciBNO20mJihNPWEucGx1cmFsUmVzb2x2ZXIuZ2V0U3VmZml4KHgsby5jb3VudCxvKSk7dmFyIFk9IiIuY29uY2F0KGEub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3IsInplcm8iKTtpZihtJiYoQy5wdXNoKHYrTSksZCYmQy5wdXNoKHYrWSkpLGgpe3ZhciBKPSIiLmNvbmNhdCh2KS5jb25jYXQoYS5vcHRpb25zLmNvbnRleHRTZXBhcmF0b3IpLmNvbmNhdChvLmNvbnRleHQpO0MucHVzaChKKSxtJiYoQy5wdXNoKEorTSksZCYmQy5wdXNoKEorWSkpfX1mb3IodmFyICQ7JD1DLnBvcCgpOylhLmlzVmFsaWRMb29rdXAodSl8fChsPSQsdT1hLmdldFJlc291cmNlKHgsYiwkLG8pKX19KSl9KX19KSx7cmVzOnUsdXNlZEtleTpzLGV4YWN0VXNlZEtleTpsLHVzZWRMbmc6Zix1c2VkTlM6Y319fSx7a2V5OiJpc1ZhbGlkTG9va3VwIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZSE9PXZvaWQgMCYmISghdGhpcy5vcHRpb25zLnJldHVybk51bGwmJmU9PT1udWxsKSYmISghdGhpcy5vcHRpb25zLnJldHVybkVtcHR5U3RyaW5nJiZlPT09IiIpfX0se2tleToiZ2V0UmVzb3VyY2UiLHZhbHVlOmZ1bmN0aW9uKGUsYSxvKXt2YXIgdT1hcmd1bWVudHMubGVuZ3RoPjMmJmFyZ3VtZW50c1szXSE9PXZvaWQgMD9hcmd1bWVudHNbM106e307cmV0dXJuIHRoaXMuaTE4bkZvcm1hdCYmdGhpcy5pMThuRm9ybWF0LmdldFJlc291cmNlP3RoaXMuaTE4bkZvcm1hdC5nZXRSZXNvdXJjZShlLGEsbyx1KTp0aGlzLnJlc291cmNlU3RvcmUuZ2V0UmVzb3VyY2UoZSxhLG8sdSl9fV0sW3trZXk6Imhhc0RlZmF1bHRWYWx1ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIGE9ImRlZmF1bHRWYWx1ZSI7Zm9yKHZhciBvIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsbykmJmE9PT1vLnN1YnN0cmluZygwLGEubGVuZ3RoKSYmZVtvXSE9PXZvaWQgMClyZXR1cm4hMDtyZXR1cm4hMX19XSksdH0oXyk7ZnVuY3Rpb24gdWUoaSl7cmV0dXJuIGkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkraS5zbGljZSgxKX12YXIgZnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKHIpe2sodGhpcyxpKSx0aGlzLm9wdGlvbnM9cix0aGlzLnN1cHBvcnRlZExuZ3M9dGhpcy5vcHRpb25zLnN1cHBvcnRlZExuZ3N8fCExLHRoaXMubG9nZ2VyPU4uY3JlYXRlKCJsYW5ndWFnZVV0aWxzIil9cmV0dXJuIFIoaSxbe2tleToiZ2V0U2NyaXB0UGFydEZyb21Db2RlIix2YWx1ZTpmdW5jdGlvbih0KXtpZighdHx8dC5pbmRleE9mKCItIik8MClyZXR1cm4gbnVsbDt2YXIgbj10LnNwbGl0KCItIik7cmV0dXJuIG4ubGVuZ3RoPT09Mnx8KG4ucG9wKCksbltuLmxlbmd0aC0xXS50b0xvd2VyQ2FzZSgpPT09IngiKT9udWxsOnRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKG4uam9pbigiLSIpKX19LHtrZXk6ImdldExhbmd1YWdlUGFydEZyb21Db2RlIix2YWx1ZTpmdW5jdGlvbih0KXtpZighdHx8dC5pbmRleE9mKCItIik8MClyZXR1cm4gdDt2YXIgbj10LnNwbGl0KCItIik7cmV0dXJuIHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKG5bMF0pfX0se2tleToiZm9ybWF0TGFuZ3VhZ2VDb2RlIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0eXBlb2YgdD09InN0cmluZyImJnQuaW5kZXhPZigiLSIpPi0xKXt2YXIgbj1bImhhbnMiLCJoYW50IiwibGF0biIsImN5cmwiLCJjYW5zIiwibW9uZyIsImFyYWIiXSxlPXQuc3BsaXQoIi0iKTtyZXR1cm4gdGhpcy5vcHRpb25zLmxvd2VyQ2FzZUxuZz9lPWUubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnRvTG93ZXJDYXNlKCl9KTplLmxlbmd0aD09PTI/KGVbMF09ZVswXS50b0xvd2VyQ2FzZSgpLGVbMV09ZVsxXS50b1VwcGVyQ2FzZSgpLG4uaW5kZXhPZihlWzFdLnRvTG93ZXJDYXNlKCkpPi0xJiYoZVsxXT11ZShlWzFdLnRvTG93ZXJDYXNlKCkpKSk6ZS5sZW5ndGg9PT0zJiYoZVswXT1lWzBdLnRvTG93ZXJDYXNlKCksZVsxXS5sZW5ndGg9PT0yJiYoZVsxXT1lWzFdLnRvVXBwZXJDYXNlKCkpLGVbMF0hPT0ic2duIiYmZVsyXS5sZW5ndGg9PT0yJiYoZVsyXT1lWzJdLnRvVXBwZXJDYXNlKCkpLG4uaW5kZXhPZihlWzFdLnRvTG93ZXJDYXNlKCkpPi0xJiYoZVsxXT11ZShlWzFdLnRvTG93ZXJDYXNlKCkpKSxuLmluZGV4T2YoZVsyXS50b0xvd2VyQ2FzZSgpKT4tMSYmKGVbMl09dWUoZVsyXS50b0xvd2VyQ2FzZSgpKSkpLGUuam9pbigiLSIpfXJldHVybiB0aGlzLm9wdGlvbnMuY2xlYW5Db2RlfHx0aGlzLm9wdGlvbnMubG93ZXJDYXNlTG5nP3QudG9Mb3dlckNhc2UoKTp0fX0se2tleToiaXNTdXBwb3J0ZWRDb2RlIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4odGhpcy5vcHRpb25zLmxvYWQ9PT0ibGFuZ3VhZ2VPbmx5Inx8dGhpcy5vcHRpb25zLm5vbkV4cGxpY2l0U3VwcG9ydGVkTG5ncykmJih0PXRoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUodCkpLCF0aGlzLnN1cHBvcnRlZExuZ3N8fCF0aGlzLnN1cHBvcnRlZExuZ3MubGVuZ3RofHx0aGlzLnN1cHBvcnRlZExuZ3MuaW5kZXhPZih0KT4tMX19LHtrZXk6ImdldEJlc3RNYXRjaEZyb21Db2RlcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIG49dGhpcztpZighdClyZXR1cm4gbnVsbDt2YXIgZTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKCFlKXt2YXIgbz1uLmZvcm1hdExhbmd1YWdlQ29kZShhKTsoIW4ub3B0aW9ucy5zdXBwb3J0ZWRMbmdzfHxuLmlzU3VwcG9ydGVkQ29kZShvKSkmJihlPW8pfX0pLCFlJiZ0aGlzLm9wdGlvbnMuc3VwcG9ydGVkTG5ncyYmdC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKCFlKXt2YXIgbz1uLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGEpO2lmKG4uaXNTdXBwb3J0ZWRDb2RlKG8pKXJldHVybiBlPW87ZT1uLm9wdGlvbnMuc3VwcG9ydGVkTG5ncy5maW5kKGZ1bmN0aW9uKHUpe2lmKHUuaW5kZXhPZihvKT09PTApcmV0dXJuIHV9KX19KSxlfHwoZT10aGlzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nKVswXSksZX19LHtrZXk6ImdldEZhbGxiYWNrQ29kZXMiLHZhbHVlOmZ1bmN0aW9uKHQsbil7aWYoIXQpcmV0dXJuW107aWYodHlwZW9mIHQ9PSJmdW5jdGlvbiImJih0PXQobikpLHR5cGVvZiB0PT0ic3RyaW5nIiYmKHQ9W3RdKSxPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KHQpPT09IltvYmplY3QgQXJyYXldIilyZXR1cm4gdDtpZighbilyZXR1cm4gdC5kZWZhdWx0fHxbXTt2YXIgZT10W25dO3JldHVybiBlfHwoZT10W3RoaXMuZ2V0U2NyaXB0UGFydEZyb21Db2RlKG4pXSksZXx8KGU9dFt0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShuKV0pLGV8fChlPXRbdGhpcy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShuKV0pLGV8fChlPXQuZGVmYXVsdCksZXx8W119fSx7a2V5OiJ0b1Jlc29sdmVIaWVyYXJjaHkiLHZhbHVlOmZ1bmN0aW9uKHQsbil7dmFyIGU9dGhpcyxhPXRoaXMuZ2V0RmFsbGJhY2tDb2RlcyhufHx0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmd8fFtdLHQpLG89W10sdT1mdW5jdGlvbihsKXtsJiYoZS5pc1N1cHBvcnRlZENvZGUobCk/by5wdXNoKGwpOmUubG9nZ2VyLndhcm4oInJlamVjdGluZyBsYW5ndWFnZSBjb2RlIG5vdCBmb3VuZCBpbiBzdXBwb3J0ZWRMbmdzOiAiLmNvbmNhdChsKSkpfTtyZXR1cm4gdHlwZW9mIHQ9PSJzdHJpbmciJiZ0LmluZGV4T2YoIi0iKT4tMT8odGhpcy5vcHRpb25zLmxvYWQhPT0ibGFuZ3VhZ2VPbmx5IiYmdSh0aGlzLmZvcm1hdExhbmd1YWdlQ29kZSh0KSksdGhpcy5vcHRpb25zLmxvYWQhPT0ibGFuZ3VhZ2VPbmx5IiYmdGhpcy5vcHRpb25zLmxvYWQhPT0iY3VycmVudE9ubHkiJiZ1KHRoaXMuZ2V0U2NyaXB0UGFydEZyb21Db2RlKHQpKSx0aGlzLm9wdGlvbnMubG9hZCE9PSJjdXJyZW50T25seSImJnUodGhpcy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZSh0KSkpOnR5cGVvZiB0PT0ic3RyaW5nIiYmdSh0aGlzLmZvcm1hdExhbmd1YWdlQ29kZSh0KSksYS5mb3JFYWNoKGZ1bmN0aW9uKHMpe28uaW5kZXhPZihzKTwwJiZ1KGUuZm9ybWF0TGFuZ3VhZ2VDb2RlKHMpKX0pLG99fV0pLGl9KCksbHQ9W3tsbmdzOlsiYWNoIiwiYWsiLCJhbSIsImFybiIsImJyIiwiZmlsIiwiZ3VuIiwibG4iLCJtZmUiLCJtZyIsIm1pIiwib2MiLCJwdCIsInB0LUJSIiwidGciLCJ0bCIsInRpIiwidHIiLCJ1eiIsIndhIl0sbnI6WzEsMl0sZmM6MX0se2xuZ3M6WyJhZiIsImFuIiwiYXN0IiwiYXoiLCJiZyIsImJuIiwiY2EiLCJkYSIsImRlIiwiZGV2IiwiZWwiLCJlbiIsImVvIiwiZXMiLCJldCIsImV1IiwiZmkiLCJmbyIsImZ1ciIsImZ5IiwiZ2wiLCJndSIsImhhIiwiaGkiLCJodSIsImh5IiwiaWEiLCJpdCIsImtrIiwia24iLCJrdSIsImxiIiwibWFpIiwibWwiLCJtbiIsIm1yIiwibmFoIiwibmFwIiwibmIiLCJuZSIsIm5sIiwibm4iLCJubyIsIm5zbyIsInBhIiwicGFwIiwicG1zIiwicHMiLCJwdC1QVCIsInJtIiwic2NvIiwic2UiLCJzaSIsInNvIiwic29uIiwic3EiLCJzdiIsInN3IiwidGEiLCJ0ZSIsInRrIiwidXIiLCJ5byJdLG5yOlsxLDJdLGZjOjJ9LHtsbmdzOlsiYXkiLCJibyIsImNnZyIsImZhIiwiaHQiLCJpZCIsImphIiwiamJvIiwia2EiLCJrbSIsImtvIiwia3kiLCJsbyIsIm1zIiwic2FoIiwic3UiLCJ0aCIsInR0IiwidWciLCJ2aSIsIndvIiwiemgiXSxucjpbMV0sZmM6M30se2xuZ3M6WyJiZSIsImJzIiwiY25yIiwiZHoiLCJociIsInJ1Iiwic3IiLCJ1ayJdLG5yOlsxLDIsNV0sZmM6NH0se2xuZ3M6WyJhciJdLG5yOlswLDEsMiwzLDExLDEwMF0sZmM6NX0se2xuZ3M6WyJjcyIsInNrIl0sbnI6WzEsMiw1XSxmYzo2fSx7bG5nczpbImNzYiIsInBsIl0sbnI6WzEsMiw1XSxmYzo3fSx7bG5nczpbImN5Il0sbnI6WzEsMiwzLDhdLGZjOjh9LHtsbmdzOlsiZnIiXSxucjpbMSwyXSxmYzo5fSx7bG5nczpbImdhIl0sbnI6WzEsMiwzLDcsMTFdLGZjOjEwfSx7bG5nczpbImdkIl0sbnI6WzEsMiwzLDIwXSxmYzoxMX0se2xuZ3M6WyJpcyJdLG5yOlsxLDJdLGZjOjEyfSx7bG5nczpbImp2Il0sbnI6WzAsMV0sZmM6MTN9LHtsbmdzOlsia3ciXSxucjpbMSwyLDMsNF0sZmM6MTR9LHtsbmdzOlsibHQiXSxucjpbMSwyLDEwXSxmYzoxNX0se2xuZ3M6WyJsdiJdLG5yOlsxLDIsMF0sZmM6MTZ9LHtsbmdzOlsibWsiXSxucjpbMSwyXSxmYzoxN30se2xuZ3M6WyJtbmsiXSxucjpbMCwxLDJdLGZjOjE4fSx7bG5nczpbIm10Il0sbnI6WzEsMiwxMSwyMF0sZmM6MTl9LHtsbmdzOlsib3IiXSxucjpbMiwxXSxmYzoyfSx7bG5nczpbInJvIl0sbnI6WzEsMiwyMF0sZmM6MjB9LHtsbmdzOlsic2wiXSxucjpbNSwxLDIsM10sZmM6MjF9LHtsbmdzOlsiaGUiLCJpdyJdLG5yOlsxLDIsMjAsMjFdLGZjOjIyfV0sY3Q9ezE6ZnVuY3Rpb24ocil7cmV0dXJuIE51bWJlcihyPjEpfSwyOmZ1bmN0aW9uKHIpe3JldHVybiBOdW1iZXIociE9MSl9LDM6ZnVuY3Rpb24ocil7cmV0dXJuIDB9LDQ6ZnVuY3Rpb24ocil7cmV0dXJuIE51bWJlcihyJTEwPT0xJiZyJTEwMCE9MTE/MDpyJTEwPj0yJiZyJTEwPD00JiYociUxMDA8MTB8fHIlMTAwPj0yMCk/MToyKX0sNTpmdW5jdGlvbihyKXtyZXR1cm4gTnVtYmVyKHI9PTA/MDpyPT0xPzE6cj09Mj8yOnIlMTAwPj0zJiZyJTEwMDw9MTA/MzpyJTEwMD49MTE/NDo1KX0sNjpmdW5jdGlvbihyKXtyZXR1cm4gTnVtYmVyKHI9PTE/MDpyPj0yJiZyPD00PzE6Mil9LDc6ZnVuY3Rpb24ocil7cmV0dXJuIE51bWJlcihyPT0xPzA6ciUxMD49MiYmciUxMDw9NCYmKHIlMTAwPDEwfHxyJTEwMD49MjApPzE6Mil9LDg6ZnVuY3Rpb24ocil7cmV0dXJuIE51bWJlcihyPT0xPzA6cj09Mj8xOnIhPTgmJnIhPTExPzI6Myl9LDk6ZnVuY3Rpb24ocil7cmV0dXJuIE51bWJlcihyPj0yKX0sMTA6ZnVuY3Rpb24ocil7cmV0dXJuIE51bWJlcihyPT0xPzA6cj09Mj8xOnI8Nz8yOnI8MTE/Mzo0KX0sMTE6ZnVuY3Rpb24ocil7cmV0dXJuIE51bWJlcihyPT0xfHxyPT0xMT8wOnI9PTJ8fHI9PTEyPzE6cj4yJiZyPDIwPzI6Myl9LDEyOmZ1bmN0aW9uKHIpe3JldHVybiBOdW1iZXIociUxMCE9MXx8ciUxMDA9PTExKX0sMTM6ZnVuY3Rpb24ocil7cmV0dXJuIE51bWJlcihyIT09MCl9LDE0OmZ1bmN0aW9uKHIpe3JldHVybiBOdW1iZXIocj09MT8wOnI9PTI/MTpyPT0zPzI6Myl9LDE1OmZ1bmN0aW9uKHIpe3JldHVybiBOdW1iZXIociUxMD09MSYmciUxMDAhPTExPzA6ciUxMD49MiYmKHIlMTAwPDEwfHxyJTEwMD49MjApPzE6Mil9LDE2OmZ1bmN0aW9uKHIpe3JldHVybiBOdW1iZXIociUxMD09MSYmciUxMDAhPTExPzA6ciE9PTA/MToyKX0sMTc6ZnVuY3Rpb24ocil7cmV0dXJuIE51bWJlcihyPT0xfHxyJTEwPT0xJiZyJTEwMCE9MTE/MDoxKX0sMTg6ZnVuY3Rpb24ocil7cmV0dXJuIE51bWJlcihyPT0wPzA6cj09MT8xOjIpfSwxOTpmdW5jdGlvbihyKXtyZXR1cm4gTnVtYmVyKHI9PTE/MDpyPT0wfHxyJTEwMD4xJiZyJTEwMDwxMT8xOnIlMTAwPjEwJiZyJTEwMDwyMD8yOjMpfSwyMDpmdW5jdGlvbihyKXtyZXR1cm4gTnVtYmVyKHI9PTE/MDpyPT0wfHxyJTEwMD4wJiZyJTEwMDwyMD8xOjIpfSwyMTpmdW5jdGlvbihyKXtyZXR1cm4gTnVtYmVyKHIlMTAwPT0xPzE6ciUxMDA9PTI/MjpyJTEwMD09M3x8ciUxMDA9PTQ/MzowKX0sMjI6ZnVuY3Rpb24ocil7cmV0dXJuIE51bWJlcihyPT0xPzA6cj09Mj8xOihyPDB8fHI+MTApJiZyJTEwPT0wPzI6Myl9fSxndD1bInYxIiwidjIiLCJ2MyJdLE5lPXt6ZXJvOjAsb25lOjEsdHdvOjIsZmV3OjMsbWFueTo0LG90aGVyOjV9O2Z1bmN0aW9uIHB0KCl7dmFyIGk9e307cmV0dXJuIGx0LmZvckVhY2goZnVuY3Rpb24ocil7ci5sbmdzLmZvckVhY2goZnVuY3Rpb24odCl7aVt0XT17bnVtYmVyczpyLm5yLHBsdXJhbHM6Y3Rbci5mY119fSl9KSxpfXZhciBkdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGkocil7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9O2sodGhpcyxpKSx0aGlzLmxhbmd1YWdlVXRpbHM9cix0aGlzLm9wdGlvbnM9dCx0aGlzLmxvZ2dlcj1OLmNyZWF0ZSgicGx1cmFsUmVzb2x2ZXIiKSwoIXRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTnx8dGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OPT09InY0IikmJih0eXBlb2YgSW50bD4idSJ8fCFJbnRsLlBsdXJhbFJ1bGVzKSYmKHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTj0idjMiLHRoaXMubG9nZ2VyLmVycm9yKCJZb3VyIGVudmlyb25tZW50IHNlZW1zIG5vdCB0byBiZSBJbnRsIEFQSSBjb21wYXRpYmxlLCB1c2UgYW4gSW50bC5QbHVyYWxSdWxlcyBwb2x5ZmlsbC4gV2lsbCBmYWxsYmFjayB0byB0aGUgY29tcGF0aWJpbGl0eUpTT04gdjMgZm9ybWF0IGhhbmRsaW5nLiIpKSx0aGlzLnJ1bGVzPXB0KCl9cmV0dXJuIFIoaSxbe2tleToiYWRkUnVsZSIsdmFsdWU6ZnVuY3Rpb24odCxuKXt0aGlzLnJ1bGVzW3RdPW59fSx7a2V5OiJnZXRSdWxlIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06e307aWYodGhpcy5zaG91bGRVc2VJbnRsQXBpKCkpdHJ5e3JldHVybiBuZXcgSW50bC5QbHVyYWxSdWxlcyh0LHt0eXBlOm4ub3JkaW5hbD8ib3JkaW5hbCI6ImNhcmRpbmFsIn0pfWNhdGNoe3JldHVybn1yZXR1cm4gdGhpcy5ydWxlc1t0XXx8dGhpcy5ydWxlc1t0aGlzLmxhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUodCldfX0se2tleToibmVlZHNQbHVyYWwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7fSxlPXRoaXMuZ2V0UnVsZSh0LG4pO3JldHVybiB0aGlzLnNob3VsZFVzZUludGxBcGkoKT9lJiZlLnJlc29sdmVkT3B0aW9ucygpLnBsdXJhbENhdGVnb3JpZXMubGVuZ3RoPjE6ZSYmZS5udW1iZXJzLmxlbmd0aD4xfX0se2tleToiZ2V0UGx1cmFsRm9ybXNPZktleSIsdmFsdWU6ZnVuY3Rpb24odCxuKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjImJmFyZ3VtZW50c1syXSE9PXZvaWQgMD9hcmd1bWVudHNbMl06e307cmV0dXJuIHRoaXMuZ2V0U3VmZml4ZXModCxlKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIiIuY29uY2F0KG4pLmNvbmNhdChhKX0pfX0se2tleToiZ2V0U3VmZml4ZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsZT1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06e30sYT10aGlzLmdldFJ1bGUodCxlKTtyZXR1cm4gYT90aGlzLnNob3VsZFVzZUludGxBcGkoKT9hLnJlc29sdmVkT3B0aW9ucygpLnBsdXJhbENhdGVnb3JpZXMuc29ydChmdW5jdGlvbihvLHUpe3JldHVybiBOZVtvXS1OZVt1XX0pLm1hcChmdW5jdGlvbihvKXtyZXR1cm4iIi5jb25jYXQobi5vcHRpb25zLnByZXBlbmQpLmNvbmNhdChvKX0pOmEubnVtYmVycy5tYXAoZnVuY3Rpb24obyl7cmV0dXJuIG4uZ2V0U3VmZml4KHQsbyxlKX0pOltdfX0se2tleToiZ2V0U3VmZml4Iix2YWx1ZTpmdW5jdGlvbih0LG4pe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MiYmYXJndW1lbnRzWzJdIT09dm9pZCAwP2FyZ3VtZW50c1syXTp7fSxhPXRoaXMuZ2V0UnVsZSh0LGUpO3JldHVybiBhP3RoaXMuc2hvdWxkVXNlSW50bEFwaSgpPyIiLmNvbmNhdCh0aGlzLm9wdGlvbnMucHJlcGVuZCkuY29uY2F0KGEuc2VsZWN0KG4pKTp0aGlzLmdldFN1ZmZpeFJldHJvQ29tcGF0aWJsZShhLG4pOih0aGlzLmxvZ2dlci53YXJuKCJubyBwbHVyYWwgcnVsZSBmb3VuZCBmb3I6ICIuY29uY2F0KHQpKSwiIil9fSx7a2V5OiJnZXRTdWZmaXhSZXRyb0NvbXBhdGlibGUiLHZhbHVlOmZ1bmN0aW9uKHQsbil7dmFyIGU9dGhpcyxhPXQubm9BYnM/dC5wbHVyYWxzKG4pOnQucGx1cmFscyhNYXRoLmFicyhuKSksbz10Lm51bWJlcnNbYV07dGhpcy5vcHRpb25zLnNpbXBsaWZ5UGx1cmFsU3VmZml4JiZ0Lm51bWJlcnMubGVuZ3RoPT09MiYmdC5udW1iZXJzWzBdPT09MSYmKG89PT0yP289InBsdXJhbCI6bz09PTEmJihvPSIiKSk7dmFyIHU9ZnVuY3Rpb24oKXtyZXR1cm4gZS5vcHRpb25zLnByZXBlbmQmJm8udG9TdHJpbmcoKT9lLm9wdGlvbnMucHJlcGVuZCtvLnRvU3RyaW5nKCk6by50b1N0cmluZygpfTtyZXR1cm4gdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OPT09InYxIj9vPT09MT8iIjp0eXBlb2Ygbz09Im51bWJlciI/Il9wbHVyYWxfIi5jb25jYXQoby50b1N0cmluZygpKTp1KCk6dGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OPT09InYyInx8dGhpcy5vcHRpb25zLnNpbXBsaWZ5UGx1cmFsU3VmZml4JiZ0Lm51bWJlcnMubGVuZ3RoPT09MiYmdC5udW1iZXJzWzBdPT09MT91KCk6dGhpcy5vcHRpb25zLnByZXBlbmQmJmEudG9TdHJpbmcoKT90aGlzLm9wdGlvbnMucHJlcGVuZCthLnRvU3RyaW5nKCk6YS50b1N0cmluZygpfX0se2tleToic2hvdWxkVXNlSW50bEFwaSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hZ3QuaW5jbHVkZXModGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OKX19XSksaX0oKTtmdW5jdGlvbiBEZShpLHIpe3ZhciB0PU9iamVjdC5rZXlzKGkpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoaSk7ciYmKG49bi5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaSxlKS5lbnVtZXJhYmxlfSkpLHQucHVzaC5hcHBseSh0LG4pfXJldHVybiB0fWZ1bmN0aW9uIEwoaSl7Zm9yKHZhciByPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl7dmFyIHQ9YXJndW1lbnRzW3JdIT1udWxsP2FyZ3VtZW50c1tyXTp7fTtyJTI/RGUoT2JqZWN0KHQpLCEwKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe0YoaSxuLHRbbl0pfSk6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM/T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSk6RGUoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe09iamVjdC5kZWZpbmVQcm9wZXJ0eShpLG4sT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LG4pKX0pfXJldHVybiBpfXZhciBodD1mdW5jdGlvbigpe2Z1bmN0aW9uIGkoKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjAmJmFyZ3VtZW50c1swXSE9PXZvaWQgMD9hcmd1bWVudHNbMF06e307ayh0aGlzLGkpLHRoaXMubG9nZ2VyPU4uY3JlYXRlKCJpbnRlcnBvbGF0b3IiKSx0aGlzLm9wdGlvbnM9cix0aGlzLmZvcm1hdD1yLmludGVycG9sYXRpb24mJnIuaW50ZXJwb2xhdGlvbi5mb3JtYXR8fGZ1bmN0aW9uKHQpe3JldHVybiB0fSx0aGlzLmluaXQocil9cmV0dXJuIFIoaSxbe2tleToiaW5pdCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJmFyZ3VtZW50c1swXSE9PXZvaWQgMD9hcmd1bWVudHNbMF06e307dC5pbnRlcnBvbGF0aW9ufHwodC5pbnRlcnBvbGF0aW9uPXtlc2NhcGVWYWx1ZTohMH0pO3ZhciBuPXQuaW50ZXJwb2xhdGlvbjt0aGlzLmVzY2FwZT1uLmVzY2FwZSE9PXZvaWQgMD9uLmVzY2FwZTp0dCx0aGlzLmVzY2FwZVZhbHVlPW4uZXNjYXBlVmFsdWUhPT12b2lkIDA/bi5lc2NhcGVWYWx1ZTohMCx0aGlzLnVzZVJhd1ZhbHVlVG9Fc2NhcGU9bi51c2VSYXdWYWx1ZVRvRXNjYXBlIT09dm9pZCAwP24udXNlUmF3VmFsdWVUb0VzY2FwZTohMSx0aGlzLnByZWZpeD1uLnByZWZpeD9BKG4ucHJlZml4KTpuLnByZWZpeEVzY2FwZWR8fCJ7eyIsdGhpcy5zdWZmaXg9bi5zdWZmaXg/QShuLnN1ZmZpeCk6bi5zdWZmaXhFc2NhcGVkfHwifX0iLHRoaXMuZm9ybWF0U2VwYXJhdG9yPW4uZm9ybWF0U2VwYXJhdG9yP24uZm9ybWF0U2VwYXJhdG9yOm4uZm9ybWF0U2VwYXJhdG9yfHwiLCIsdGhpcy51bmVzY2FwZVByZWZpeD1uLnVuZXNjYXBlU3VmZml4PyIiOm4udW5lc2NhcGVQcmVmaXh8fCItIix0aGlzLnVuZXNjYXBlU3VmZml4PXRoaXMudW5lc2NhcGVQcmVmaXg/IiI6bi51bmVzY2FwZVN1ZmZpeHx8IiIsdGhpcy5uZXN0aW5nUHJlZml4PW4ubmVzdGluZ1ByZWZpeD9BKG4ubmVzdGluZ1ByZWZpeCk6bi5uZXN0aW5nUHJlZml4RXNjYXBlZHx8QSgiJHQoIiksdGhpcy5uZXN0aW5nU3VmZml4PW4ubmVzdGluZ1N1ZmZpeD9BKG4ubmVzdGluZ1N1ZmZpeCk6bi5uZXN0aW5nU3VmZml4RXNjYXBlZHx8QSgiKSIpLHRoaXMubmVzdGluZ09wdGlvbnNTZXBhcmF0b3I9bi5uZXN0aW5nT3B0aW9uc1NlcGFyYXRvcj9uLm5lc3RpbmdPcHRpb25zU2VwYXJhdG9yOm4ubmVzdGluZ09wdGlvbnNTZXBhcmF0b3J8fCIsIix0aGlzLm1heFJlcGxhY2VzPW4ubWF4UmVwbGFjZXM/bi5tYXhSZXBsYWNlczoxZTMsdGhpcy5hbHdheXNGb3JtYXQ9bi5hbHdheXNGb3JtYXQhPT12b2lkIDA/bi5hbHdheXNGb3JtYXQ6ITEsdGhpcy5yZXNldFJlZ0V4cCgpfX0se2tleToicmVzZXQiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zJiZ0aGlzLmluaXQodGhpcy5vcHRpb25zKX19LHtrZXk6InJlc2V0UmVnRXhwIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PSIiLmNvbmNhdCh0aGlzLnByZWZpeCwiKC4rPykiKS5jb25jYXQodGhpcy5zdWZmaXgpO3RoaXMucmVnZXhwPW5ldyBSZWdFeHAodCwiZyIpO3ZhciBuPSIiLmNvbmNhdCh0aGlzLnByZWZpeCkuY29uY2F0KHRoaXMudW5lc2NhcGVQcmVmaXgsIiguKz8pIikuY29uY2F0KHRoaXMudW5lc2NhcGVTdWZmaXgpLmNvbmNhdCh0aGlzLnN1ZmZpeCk7dGhpcy5yZWdleHBVbmVzY2FwZT1uZXcgUmVnRXhwKG4sImciKTt2YXIgZT0iIi5jb25jYXQodGhpcy5uZXN0aW5nUHJlZml4LCIoLis/KSIpLmNvbmNhdCh0aGlzLm5lc3RpbmdTdWZmaXgpO3RoaXMubmVzdGluZ1JlZ2V4cD1uZXcgUmVnRXhwKGUsImciKX19LHtrZXk6ImludGVycG9sYXRlIix2YWx1ZTpmdW5jdGlvbih0LG4sZSxhKXt2YXIgbz10aGlzLHUscyxsLGY9dGhpcy5vcHRpb25zJiZ0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbiYmdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlc3x8e307ZnVuY3Rpb24gYyhtKXtyZXR1cm4gbS5yZXBsYWNlKC9cJC9nLCIkJCQkIil9dmFyIGc9ZnVuY3Rpb24oZCl7aWYoZC5pbmRleE9mKG8uZm9ybWF0U2VwYXJhdG9yKTwwKXt2YXIgaD13ZShuLGYsZCk7cmV0dXJuIG8uYWx3YXlzRm9ybWF0P28uZm9ybWF0KGgsdm9pZCAwLGUsTChMKEwoe30sYSksbikse30se2ludGVycG9sYXRpb25rZXk6ZH0pKTpofXZhciBPPWQuc3BsaXQoby5mb3JtYXRTZXBhcmF0b3IpLGI9Ty5zaGlmdCgpLnRyaW0oKSx4PU8uam9pbihvLmZvcm1hdFNlcGFyYXRvcikudHJpbSgpO3JldHVybiBvLmZvcm1hdCh3ZShuLGYsYikseCxlLEwoTChMKHt9LGEpLG4pLHt9LHtpbnRlcnBvbGF0aW9ua2V5OmJ9KSl9O3RoaXMucmVzZXRSZWdFeHAoKTt2YXIgcD1hJiZhLm1pc3NpbmdJbnRlcnBvbGF0aW9uSGFuZGxlcnx8dGhpcy5vcHRpb25zLm1pc3NpbmdJbnRlcnBvbGF0aW9uSGFuZGxlcix2PWEmJmEuaW50ZXJwb2xhdGlvbiYmYS5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlcyE9PXZvaWQgMD9hLmludGVycG9sYXRpb24uc2tpcE9uVmFyaWFibGVzOnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlcyx5PVt7cmVnZXg6dGhpcy5yZWdleHBVbmVzY2FwZSxzYWZlVmFsdWU6ZnVuY3Rpb24oZCl7cmV0dXJuIGMoZCl9fSx7cmVnZXg6dGhpcy5yZWdleHAsc2FmZVZhbHVlOmZ1bmN0aW9uKGQpe3JldHVybiBvLmVzY2FwZVZhbHVlP2Moby5lc2NhcGUoZCkpOmMoZCl9fV07cmV0dXJuIHkuZm9yRWFjaChmdW5jdGlvbihtKXtmb3IobD0wO3U9bS5yZWdleC5leGVjKHQpOyl7dmFyIGQ9dVsxXS50cmltKCk7aWYocz1nKGQpLHM9PT12b2lkIDApaWYodHlwZW9mIHA9PSJmdW5jdGlvbiIpe3ZhciBoPXAodCx1LGEpO3M9dHlwZW9mIGg9PSJzdHJpbmciP2g6IiJ9ZWxzZSBpZihhJiZhLmhhc093blByb3BlcnR5KGQpKXM9IiI7ZWxzZSBpZih2KXtzPXVbMF07Y29udGludWV9ZWxzZSBvLmxvZ2dlci53YXJuKCJtaXNzZWQgdG8gcGFzcyBpbiB2YXJpYWJsZSAiLmNvbmNhdChkLCIgZm9yIGludGVycG9sYXRpbmcgIikuY29uY2F0KHQpKSxzPSIiO2Vsc2UgdHlwZW9mIHMhPSJzdHJpbmciJiYhby51c2VSYXdWYWx1ZVRvRXNjYXBlJiYocz1iZShzKSk7dmFyIE89bS5zYWZlVmFsdWUocyk7aWYodD10LnJlcGxhY2UodVswXSxPKSx2PyhtLnJlZ2V4Lmxhc3RJbmRleCs9cy5sZW5ndGgsbS5yZWdleC5sYXN0SW5kZXgtPXVbMF0ubGVuZ3RoKTptLnJlZ2V4Lmxhc3RJbmRleD0wLGwrKyxsPj1vLm1heFJlcGxhY2VzKWJyZWFrfX0pLHR9fSx7a2V5OiJuZXN0Iix2YWx1ZTpmdW5jdGlvbih0LG4pe3ZhciBlPXRoaXMsYT1hcmd1bWVudHMubGVuZ3RoPjImJmFyZ3VtZW50c1syXSE9PXZvaWQgMD9hcmd1bWVudHNbMl06e30sbyx1LHM9TCh7fSxhKTtzLmFwcGx5UG9zdFByb2Nlc3Nvcj0hMSxkZWxldGUgcy5kZWZhdWx0VmFsdWU7ZnVuY3Rpb24gbChwLHYpe3ZhciB5PXRoaXMubmVzdGluZ09wdGlvbnNTZXBhcmF0b3I7aWYocC5pbmRleE9mKHkpPDApcmV0dXJuIHA7dmFyIG09cC5zcGxpdChuZXcgUmVnRXhwKCIiLmNvbmNhdCh5LCJbIF0qeyIpKSksZD0ieyIuY29uY2F0KG1bMV0pO3A9bVswXSxkPXRoaXMuaW50ZXJwb2xhdGUoZCxzKTt2YXIgaD1kLm1hdGNoKC8nL2cpLE89ZC5tYXRjaCgvIi9nKTsoaCYmaC5sZW5ndGglMj09PTAmJiFPfHxPLmxlbmd0aCUyIT09MCkmJihkPWQucmVwbGFjZSgvJy9nLCciJykpO3RyeXtzPUpTT04ucGFyc2UoZCksdiYmKHM9TChMKHt9LHYpLHMpKX1jYXRjaChiKXtyZXR1cm4gdGhpcy5sb2dnZXIud2FybigiZmFpbGVkIHBhcnNpbmcgb3B0aW9ucyBzdHJpbmcgaW4gbmVzdGluZyBmb3Iga2V5ICIuY29uY2F0KHApLGIpLCIiLmNvbmNhdChwKS5jb25jYXQoeSkuY29uY2F0KGQpfXJldHVybiBkZWxldGUgcy5kZWZhdWx0VmFsdWUscH1mb3IoO289dGhpcy5uZXN0aW5nUmVnZXhwLmV4ZWModCk7KXt2YXIgZj1bXSxjPSExO2lmKG9bMF0uaW5kZXhPZih0aGlzLmZvcm1hdFNlcGFyYXRvcikhPT0tMSYmIS97Lip9Ly50ZXN0KG9bMV0pKXt2YXIgZz1vWzFdLnNwbGl0KHRoaXMuZm9ybWF0U2VwYXJhdG9yKS5tYXAoZnVuY3Rpb24ocCl7cmV0dXJuIHAudHJpbSgpfSk7b1sxXT1nLnNoaWZ0KCksZj1nLGM9ITB9aWYodT1uKGwuY2FsbCh0aGlzLG9bMV0udHJpbSgpLHMpLHMpLHUmJm9bMF09PT10JiZ0eXBlb2YgdSE9InN0cmluZyIpcmV0dXJuIHU7dHlwZW9mIHUhPSJzdHJpbmciJiYodT1iZSh1KSksdXx8KHRoaXMubG9nZ2VyLndhcm4oIm1pc3NlZCB0byByZXNvbHZlICIuY29uY2F0KG9bMV0sIiBmb3IgbmVzdGluZyAiKS5jb25jYXQodCkpLHU9IiIpLGMmJih1PWYucmVkdWNlKGZ1bmN0aW9uKHAsdil7cmV0dXJuIGUuZm9ybWF0KHAsdixhLmxuZyxMKEwoe30sYSkse30se2ludGVycG9sYXRpb25rZXk6b1sxXS50cmltKCl9KSl9LHUudHJpbSgpKSksdD10LnJlcGxhY2Uob1swXSx1KSx0aGlzLnJlZ2V4cC5sYXN0SW5kZXg9MH1yZXR1cm4gdH19XSksaX0oKTtmdW5jdGlvbiBDZShpLHIpe3ZhciB0PU9iamVjdC5rZXlzKGkpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoaSk7ciYmKG49bi5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaSxlKS5lbnVtZXJhYmxlfSkpLHQucHVzaC5hcHBseSh0LG4pfXJldHVybiB0fWZ1bmN0aW9uIEkoaSl7Zm9yKHZhciByPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl7dmFyIHQ9YXJndW1lbnRzW3JdIT1udWxsP2FyZ3VtZW50c1tyXTp7fTtyJTI/Q2UoT2JqZWN0KHQpLCEwKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe0YoaSxuLHRbbl0pfSk6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM/T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSk6Q2UoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe09iamVjdC5kZWZpbmVQcm9wZXJ0eShpLG4sT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LG4pKX0pfXJldHVybiBpfWZ1bmN0aW9uIHZ0KGkpe3ZhciByPWkudG9Mb3dlckNhc2UoKS50cmltKCksdD17fTtpZihpLmluZGV4T2YoIigiKT4tMSl7dmFyIG49aS5zcGxpdCgiKCIpO3I9blswXS50b0xvd2VyQ2FzZSgpLnRyaW0oKTt2YXIgZT1uWzFdLnN1YnN0cmluZygwLG5bMV0ubGVuZ3RoLTEpO2lmKHI9PT0iY3VycmVuY3kiJiZlLmluZGV4T2YoIjoiKTwwKXQuY3VycmVuY3l8fCh0LmN1cnJlbmN5PWUudHJpbSgpKTtlbHNlIGlmKHI9PT0icmVsYXRpdmV0aW1lIiYmZS5pbmRleE9mKCI6Iik8MCl0LnJhbmdlfHwodC5yYW5nZT1lLnRyaW0oKSk7ZWxzZXt2YXIgYT1lLnNwbGl0KCI7Iik7YS5mb3JFYWNoKGZ1bmN0aW9uKG8pe2lmKG8pe3ZhciB1PW8uc3BsaXQoIjoiKSxzPVFlKHUpLGw9c1swXSxmPXMuc2xpY2UoMSksYz1mLmpvaW4oIjoiKS50cmltKCkucmVwbGFjZSgvXicrfCcrJC9nLCIiKTt0W2wudHJpbSgpXXx8KHRbbC50cmltKCldPWMpLGM9PT0iZmFsc2UiJiYodFtsLnRyaW0oKV09ITEpLGM9PT0idHJ1ZSImJih0W2wudHJpbSgpXT0hMCksaXNOYU4oYyl8fCh0W2wudHJpbSgpXT1wYXJzZUludChjLDEwKSl9fSl9fXJldHVybntmb3JtYXROYW1lOnIsZm9ybWF0T3B0aW9uczp0fX1mdW5jdGlvbiBWKGkpe3ZhciByPXt9O3JldHVybiBmdW5jdGlvbihuLGUsYSl7dmFyIG89ZStKU09OLnN0cmluZ2lmeShhKSx1PXJbb107cmV0dXJuIHV8fCh1PWkoZSxhKSxyW29dPXUpLHUobil9fXZhciBtdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGkoKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjAmJmFyZ3VtZW50c1swXSE9PXZvaWQgMD9hcmd1bWVudHNbMF06e307ayh0aGlzLGkpLHRoaXMubG9nZ2VyPU4uY3JlYXRlKCJmb3JtYXR0ZXIiKSx0aGlzLm9wdGlvbnM9cix0aGlzLmZvcm1hdHM9e251bWJlcjpWKGZ1bmN0aW9uKHQsbil7dmFyIGU9bmV3IEludGwuTnVtYmVyRm9ybWF0KHQsbik7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBlLmZvcm1hdChhKX19KSxjdXJyZW5jeTpWKGZ1bmN0aW9uKHQsbil7dmFyIGU9bmV3IEludGwuTnVtYmVyRm9ybWF0KHQsSShJKHt9LG4pLHt9LHtzdHlsZToiY3VycmVuY3kifSkpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gZS5mb3JtYXQoYSl9fSksZGF0ZXRpbWU6VihmdW5jdGlvbih0LG4pe3ZhciBlPW5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KHQsSSh7fSxuKSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBlLmZvcm1hdChhKX19KSxyZWxhdGl2ZXRpbWU6VihmdW5jdGlvbih0LG4pe3ZhciBlPW5ldyBJbnRsLlJlbGF0aXZlVGltZUZvcm1hdCh0LEkoe30sbikpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gZS5mb3JtYXQoYSxuLnJhbmdlfHwiZGF5Iil9fSksbGlzdDpWKGZ1bmN0aW9uKHQsbil7dmFyIGU9bmV3IEludGwuTGlzdEZvcm1hdCh0LEkoe30sbikpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gZS5mb3JtYXQoYSl9fSl9LHRoaXMuaW5pdChyKX1yZXR1cm4gUihpLFt7a2V5OiJpbml0Iix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06e2ludGVycG9sYXRpb246e319LGU9bi5pbnRlcnBvbGF0aW9uO3RoaXMuZm9ybWF0U2VwYXJhdG9yPWUuZm9ybWF0U2VwYXJhdG9yP2UuZm9ybWF0U2VwYXJhdG9yOmUuZm9ybWF0U2VwYXJhdG9yfHwiLCJ9fSx7a2V5OiJhZGQiLHZhbHVlOmZ1bmN0aW9uKHQsbil7dGhpcy5mb3JtYXRzW3QudG9Mb3dlckNhc2UoKS50cmltKCldPW59fSx7a2V5OiJhZGRDYWNoZWQiLHZhbHVlOmZ1bmN0aW9uKHQsbil7dGhpcy5mb3JtYXRzW3QudG9Mb3dlckNhc2UoKS50cmltKCldPVYobil9fSx7a2V5OiJmb3JtYXQiLHZhbHVlOmZ1bmN0aW9uKHQsbixlLGEpe3ZhciBvPXRoaXMsdT1uLnNwbGl0KHRoaXMuZm9ybWF0U2VwYXJhdG9yKSxzPXUucmVkdWNlKGZ1bmN0aW9uKGwsZil7dmFyIGM9dnQoZiksZz1jLmZvcm1hdE5hbWUscD1jLmZvcm1hdE9wdGlvbnM7aWYoby5mb3JtYXRzW2ddKXt2YXIgdj1sO3RyeXt2YXIgeT1hJiZhLmZvcm1hdFBhcmFtcyYmYS5mb3JtYXRQYXJhbXNbYS5pbnRlcnBvbGF0aW9ua2V5XXx8e30sbT15LmxvY2FsZXx8eS5sbmd8fGEubG9jYWxlfHxhLmxuZ3x8ZTt2PW8uZm9ybWF0c1tnXShsLG0sSShJKEkoe30scCksYSkseSkpfWNhdGNoKGQpe28ubG9nZ2VyLndhcm4oZCl9cmV0dXJuIHZ9ZWxzZSBvLmxvZ2dlci53YXJuKCJ0aGVyZSB3YXMgbm8gZm9ybWF0IGZ1bmN0aW9uIGZvciAiLmNvbmNhdChnKSk7cmV0dXJuIGx9LHQpO3JldHVybiBzfX1dKSxpfSgpO2Z1bmN0aW9uIEVlKGkscil7dmFyIHQ9T2JqZWN0LmtleXMoaSk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIG49T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhpKTtyJiYobj1uLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihpLGUpLmVudW1lcmFibGV9KSksdC5wdXNoLmFwcGx5KHQsbil9cmV0dXJuIHR9ZnVuY3Rpb24gRmUoaSl7Zm9yKHZhciByPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl7dmFyIHQ9YXJndW1lbnRzW3JdIT1udWxsP2FyZ3VtZW50c1tyXTp7fTtyJTI/RWUoT2JqZWN0KHQpLCEwKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe0YoaSxuLHRbbl0pfSk6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM/T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSk6RWUoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe09iamVjdC5kZWZpbmVQcm9wZXJ0eShpLG4sT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LG4pKX0pfXJldHVybiBpfWZ1bmN0aW9uIHl0KGkpe3ZhciByPWJ0KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49aihpKSxlO2lmKHIpe3ZhciBhPWoodGhpcykuY29uc3RydWN0b3I7ZT1SZWZsZWN0LmNvbnN0cnVjdChuLGFyZ3VtZW50cyxhKX1lbHNlIGU9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIEIodGhpcyxlKX19ZnVuY3Rpb24gYnQoKXtpZih0eXBlb2YgUmVmbGVjdD4idSJ8fCFSZWZsZWN0LmNvbnN0cnVjdHx8UmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZih0eXBlb2YgUHJveHk9PSJmdW5jdGlvbiIpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSxmdW5jdGlvbigpe30pKSwhMH1jYXRjaHtyZXR1cm4hMX19ZnVuY3Rpb24gT3QoaSxyKXtpLnBlbmRpbmdbcl0hPT12b2lkIDAmJihkZWxldGUgaS5wZW5kaW5nW3JdLGkucGVuZGluZ0NvdW50LS0pfXZhciB3dD1mdW5jdGlvbihpKXtxKHQsaSk7dmFyIHI9eXQodCk7ZnVuY3Rpb24gdChuLGUsYSl7dmFyIG8sdT1hcmd1bWVudHMubGVuZ3RoPjMmJmFyZ3VtZW50c1szXSE9PXZvaWQgMD9hcmd1bWVudHNbM106e307cmV0dXJuIGsodGhpcyx0KSxvPXIuY2FsbCh0aGlzKSxaJiZfLmNhbGwoRShvKSksby5iYWNrZW5kPW4sby5zdG9yZT1lLG8uc2VydmljZXM9YSxvLmxhbmd1YWdlVXRpbHM9YS5sYW5ndWFnZVV0aWxzLG8ub3B0aW9ucz11LG8ubG9nZ2VyPU4uY3JlYXRlKCJiYWNrZW5kQ29ubmVjdG9yIiksby53YWl0aW5nUmVhZHM9W10sby5tYXhQYXJhbGxlbFJlYWRzPXUubWF4UGFyYWxsZWxSZWFkc3x8MTAsby5yZWFkaW5nQ2FsbHM9MCxvLm1heFJldHJpZXM9dS5tYXhSZXRyaWVzPj0wP3UubWF4UmV0cmllczo1LG8ucmV0cnlUaW1lb3V0PXUucmV0cnlUaW1lb3V0Pj0xP3UucmV0cnlUaW1lb3V0OjM1MCxvLnN0YXRlPXt9LG8ucXVldWU9W10sby5iYWNrZW5kJiZvLmJhY2tlbmQuaW5pdCYmby5iYWNrZW5kLmluaXQoYSx1LmJhY2tlbmQsdSksb31yZXR1cm4gUih0LFt7a2V5OiJxdWV1ZUxvYWQiLHZhbHVlOmZ1bmN0aW9uKGUsYSxvLHUpe3ZhciBzPXRoaXMsbD17fSxmPXt9LGM9e30sZz17fTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKHApe3ZhciB2PSEwO2EuZm9yRWFjaChmdW5jdGlvbih5KXt2YXIgbT0iIi5jb25jYXQocCwifCIpLmNvbmNhdCh5KTshby5yZWxvYWQmJnMuc3RvcmUuaGFzUmVzb3VyY2VCdW5kbGUocCx5KT9zLnN0YXRlW21dPTI6cy5zdGF0ZVttXTwwfHwocy5zdGF0ZVttXT09PTE/ZlttXT09PXZvaWQgMCYmKGZbbV09ITApOihzLnN0YXRlW21dPTEsdj0hMSxmW21dPT09dm9pZCAwJiYoZlttXT0hMCksbFttXT09PXZvaWQgMCYmKGxbbV09ITApLGdbeV09PT12b2lkIDAmJihnW3ldPSEwKSkpfSksdnx8KGNbcF09ITApfSksKE9iamVjdC5rZXlzKGwpLmxlbmd0aHx8T2JqZWN0LmtleXMoZikubGVuZ3RoKSYmdGhpcy5xdWV1ZS5wdXNoKHtwZW5kaW5nOmYscGVuZGluZ0NvdW50Ok9iamVjdC5rZXlzKGYpLmxlbmd0aCxsb2FkZWQ6e30sZXJyb3JzOltdLGNhbGxiYWNrOnV9KSx7dG9Mb2FkOk9iamVjdC5rZXlzKGwpLHBlbmRpbmc6T2JqZWN0LmtleXMoZiksdG9Mb2FkTGFuZ3VhZ2VzOk9iamVjdC5rZXlzKGMpLHRvTG9hZE5hbWVzcGFjZXM6T2JqZWN0LmtleXMoZyl9fX0se2tleToibG9hZGVkIix2YWx1ZTpmdW5jdGlvbihlLGEsbyl7dmFyIHU9ZS5zcGxpdCgifCIpLHM9dVswXSxsPXVbMV07YSYmdGhpcy5lbWl0KCJmYWlsZWRMb2FkaW5nIixzLGwsYSksbyYmdGhpcy5zdG9yZS5hZGRSZXNvdXJjZUJ1bmRsZShzLGwsbyksdGhpcy5zdGF0ZVtlXT1hPy0xOjI7dmFyIGY9e307dGhpcy5xdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uKGMpe1plKGMubG9hZGVkLFtzXSxsKSxPdChjLGUpLGEmJmMuZXJyb3JzLnB1c2goYSksYy5wZW5kaW5nQ291bnQ9PT0wJiYhYy5kb25lJiYoT2JqZWN0LmtleXMoYy5sb2FkZWQpLmZvckVhY2goZnVuY3Rpb24oZyl7ZltnXXx8KGZbZ109e30pO3ZhciBwPWMubG9hZGVkW2ddO3AubGVuZ3RoJiZwLmZvckVhY2goZnVuY3Rpb24odil7ZltnXVt2XT09PXZvaWQgMCYmKGZbZ11bdl09ITApfSl9KSxjLmRvbmU9ITAsYy5lcnJvcnMubGVuZ3RoP2MuY2FsbGJhY2soYy5lcnJvcnMpOmMuY2FsbGJhY2soKSl9KSx0aGlzLmVtaXQoImxvYWRlZCIsZiksdGhpcy5xdWV1ZT10aGlzLnF1ZXVlLmZpbHRlcihmdW5jdGlvbihjKXtyZXR1cm4hYy5kb25lfSl9fSx7a2V5OiJyZWFkIix2YWx1ZTpmdW5jdGlvbihlLGEsbyl7dmFyIHU9dGhpcyxzPWFyZ3VtZW50cy5sZW5ndGg+MyYmYXJndW1lbnRzWzNdIT09dm9pZCAwP2FyZ3VtZW50c1szXTowLGw9YXJndW1lbnRzLmxlbmd0aD40JiZhcmd1bWVudHNbNF0hPT12b2lkIDA/YXJndW1lbnRzWzRdOnRoaXMucmV0cnlUaW1lb3V0LGY9YXJndW1lbnRzLmxlbmd0aD41P2FyZ3VtZW50c1s1XTp2b2lkIDA7aWYoIWUubGVuZ3RoKXJldHVybiBmKG51bGwse30pO2lmKHRoaXMucmVhZGluZ0NhbGxzPj10aGlzLm1heFBhcmFsbGVsUmVhZHMpe3RoaXMud2FpdGluZ1JlYWRzLnB1c2goe2xuZzplLG5zOmEsZmNOYW1lOm8sdHJpZWQ6cyx3YWl0OmwsY2FsbGJhY2s6Zn0pO3JldHVybn1yZXR1cm4gdGhpcy5yZWFkaW5nQ2FsbHMrKyx0aGlzLmJhY2tlbmRbb10oZSxhLGZ1bmN0aW9uKGMsZyl7aWYodS5yZWFkaW5nQ2FsbHMtLSx1LndhaXRpbmdSZWFkcy5sZW5ndGg+MCl7dmFyIHA9dS53YWl0aW5nUmVhZHMuc2hpZnQoKTt1LnJlYWQocC5sbmcscC5ucyxwLmZjTmFtZSxwLnRyaWVkLHAud2FpdCxwLmNhbGxiYWNrKX1pZihjJiZnJiZzPHUubWF4UmV0cmllcyl7c2V0VGltZW91dChmdW5jdGlvbigpe3UucmVhZC5jYWxsKHUsZSxhLG8scysxLGwqMixmKX0sbCk7cmV0dXJufWYoYyxnKX0pfX0se2tleToicHJlcGFyZUxvYWRpbmciLHZhbHVlOmZ1bmN0aW9uKGUsYSl7dmFyIG89dGhpcyx1PWFyZ3VtZW50cy5sZW5ndGg+MiYmYXJndW1lbnRzWzJdIT09dm9pZCAwP2FyZ3VtZW50c1syXTp7fSxzPWFyZ3VtZW50cy5sZW5ndGg+Mz9hcmd1bWVudHNbM106dm9pZCAwO2lmKCF0aGlzLmJhY2tlbmQpcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oIk5vIGJhY2tlbmQgd2FzIGFkZGVkIHZpYSBpMThuZXh0LnVzZS4gV2lsbCBub3QgbG9hZCByZXNvdXJjZXMuIikscyYmcygpO3R5cGVvZiBlPT0ic3RyaW5nIiYmKGU9dGhpcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShlKSksdHlwZW9mIGE9PSJzdHJpbmciJiYoYT1bYV0pO3ZhciBsPXRoaXMucXVldWVMb2FkKGUsYSx1LHMpO2lmKCFsLnRvTG9hZC5sZW5ndGgpcmV0dXJuIGwucGVuZGluZy5sZW5ndGh8fHMoKSxudWxsO2wudG9Mb2FkLmZvckVhY2goZnVuY3Rpb24oZil7by5sb2FkT25lKGYpfSl9fSx7a2V5OiJsb2FkIix2YWx1ZTpmdW5jdGlvbihlLGEsbyl7dGhpcy5wcmVwYXJlTG9hZGluZyhlLGEse30sbyl9fSx7a2V5OiJyZWxvYWQiLHZhbHVlOmZ1bmN0aW9uKGUsYSxvKXt0aGlzLnByZXBhcmVMb2FkaW5nKGUsYSx7cmVsb2FkOiEwfSxvKX19LHtrZXk6ImxvYWRPbmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBhPXRoaXMsbz1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06IiIsdT1lLnNwbGl0KCJ8Iikscz11WzBdLGw9dVsxXTt0aGlzLnJlYWQocyxsLCJyZWFkIix2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKGYsYyl7ZiYmYS5sb2dnZXIud2FybigiIi5jb25jYXQobywibG9hZGluZyBuYW1lc3BhY2UgIikuY29uY2F0KGwsIiBmb3IgbGFuZ3VhZ2UgIikuY29uY2F0KHMsIiBmYWlsZWQiKSxmKSwhZiYmYyYmYS5sb2dnZXIubG9nKCIiLmNvbmNhdChvLCJsb2FkZWQgbmFtZXNwYWNlICIpLmNvbmNhdChsLCIgZm9yIGxhbmd1YWdlICIpLmNvbmNhdChzKSxjKSxhLmxvYWRlZChlLGYsYyl9KX19LHtrZXk6InNhdmVNaXNzaW5nIix2YWx1ZTpmdW5jdGlvbihlLGEsbyx1LHMpe3ZhciBsPWFyZ3VtZW50cy5sZW5ndGg+NSYmYXJndW1lbnRzWzVdIT09dm9pZCAwP2FyZ3VtZW50c1s1XTp7fTtpZih0aGlzLnNlcnZpY2VzLnV0aWxzJiZ0aGlzLnNlcnZpY2VzLnV0aWxzLmhhc0xvYWRlZE5hbWVzcGFjZSYmIXRoaXMuc2VydmljZXMudXRpbHMuaGFzTG9hZGVkTmFtZXNwYWNlKGEpKXt0aGlzLmxvZ2dlci53YXJuKCdkaWQgbm90IHNhdmUga2V5ICInLmNvbmNhdChvLCciIGFzIHRoZSBuYW1lc3BhY2UgIicpLmNvbmNhdChhLCciIHdhcyBub3QgeWV0IGxvYWRlZCcpLCJUaGlzIG1lYW5zIHNvbWV0aGluZyBJUyBXUk9ORyBpbiB5b3VyIHNldHVwLiBZb3UgYWNjZXNzIHRoZSB0IGZ1bmN0aW9uIGJlZm9yZSBpMThuZXh0LmluaXQgLyBpMThuZXh0LmxvYWROYW1lc3BhY2UgLyBpMThuZXh0LmNoYW5nZUxhbmd1YWdlIHdhcyBkb25lLiBXYWl0IGZvciB0aGUgY2FsbGJhY2sgb3IgUHJvbWlzZSB0byByZXNvbHZlIGJlZm9yZSBhY2Nlc3NpbmcgaXQhISEiKTtyZXR1cm59bz09bnVsbHx8bz09PSIifHwodGhpcy5iYWNrZW5kJiZ0aGlzLmJhY2tlbmQuY3JlYXRlJiZ0aGlzLmJhY2tlbmQuY3JlYXRlKGUsYSxvLHUsbnVsbCxGZShGZSh7fSxsKSx7fSx7aXNVcGRhdGU6c30pKSwhKCFlfHwhZVswXSkmJnRoaXMuc3RvcmUuYWRkUmVzb3VyY2UoZVswXSxhLG8sdSkpfX1dKSx0fShfKTtmdW5jdGlvbiBTdCgpe3JldHVybntkZWJ1ZzohMSxpbml0SW1tZWRpYXRlOiEwLG5zOlsidHJhbnNsYXRpb24iXSxkZWZhdWx0TlM6WyJ0cmFuc2xhdGlvbiJdLGZhbGxiYWNrTG5nOlsiZGV2Il0sZmFsbGJhY2tOUzohMSxzdXBwb3J0ZWRMbmdzOiExLG5vbkV4cGxpY2l0U3VwcG9ydGVkTG5nczohMSxsb2FkOiJhbGwiLHByZWxvYWQ6ITEsc2ltcGxpZnlQbHVyYWxTdWZmaXg6ITAsa2V5U2VwYXJhdG9yOiIuIixuc1NlcGFyYXRvcjoiOiIscGx1cmFsU2VwYXJhdG9yOiJfIixjb250ZXh0U2VwYXJhdG9yOiJfIixwYXJ0aWFsQnVuZGxlZExhbmd1YWdlczohMSxzYXZlTWlzc2luZzohMSx1cGRhdGVNaXNzaW5nOiExLHNhdmVNaXNzaW5nVG86ImZhbGxiYWNrIixzYXZlTWlzc2luZ1BsdXJhbHM6ITAsbWlzc2luZ0tleUhhbmRsZXI6ITEsbWlzc2luZ0ludGVycG9sYXRpb25IYW5kbGVyOiExLHBvc3RQcm9jZXNzOiExLHBvc3RQcm9jZXNzUGFzc1Jlc29sdmVkOiExLHJldHVybk51bGw6ITAscmV0dXJuRW1wdHlTdHJpbmc6ITAscmV0dXJuT2JqZWN0czohMSxqb2luQXJyYXlzOiExLHJldHVybmVkT2JqZWN0SGFuZGxlcjohMSxwYXJzZU1pc3NpbmdLZXlIYW5kbGVyOiExLGFwcGVuZE5hbWVzcGFjZVRvTWlzc2luZ0tleTohMSxhcHBlbmROYW1lc3BhY2VUb0NJTW9kZTohMSxvdmVybG9hZFRyYW5zbGF0aW9uT3B0aW9uSGFuZGxlcjpmdW5jdGlvbihyKXt2YXIgdD17fTtpZihQKHJbMV0pPT09Im9iamVjdCImJih0PXJbMV0pLHR5cGVvZiByWzFdPT0ic3RyaW5nIiYmKHQuZGVmYXVsdFZhbHVlPXJbMV0pLHR5cGVvZiByWzJdPT0ic3RyaW5nIiYmKHQudERlc2NyaXB0aW9uPXJbMl0pLFAoclsyXSk9PT0ib2JqZWN0Inx8UChyWzNdKT09PSJvYmplY3QiKXt2YXIgbj1yWzNdfHxyWzJdO09iamVjdC5rZXlzKG4pLmZvckVhY2goZnVuY3Rpb24oZSl7dFtlXT1uW2VdfSl9cmV0dXJuIHR9LGludGVycG9sYXRpb246e2VzY2FwZVZhbHVlOiEwLGZvcm1hdDpmdW5jdGlvbihyLHQsbixlKXtyZXR1cm4gcn0scHJlZml4OiJ7eyIsc3VmZml4OiJ9fSIsZm9ybWF0U2VwYXJhdG9yOiIsIix1bmVzY2FwZVByZWZpeDoiLSIsbmVzdGluZ1ByZWZpeDoiJHQoIixuZXN0aW5nU3VmZml4OiIpIixuZXN0aW5nT3B0aW9uc1NlcGFyYXRvcjoiLCIsbWF4UmVwbGFjZXM6MWUzLHNraXBPblZhcmlhYmxlczohMH19fWZ1bmN0aW9uIF9lKGkpe3JldHVybiB0eXBlb2YgaS5ucz09InN0cmluZyImJihpLm5zPVtpLm5zXSksdHlwZW9mIGkuZmFsbGJhY2tMbmc9PSJzdHJpbmciJiYoaS5mYWxsYmFja0xuZz1baS5mYWxsYmFja0xuZ10pLHR5cGVvZiBpLmZhbGxiYWNrTlM9PSJzdHJpbmciJiYoaS5mYWxsYmFja05TPVtpLmZhbGxiYWNrTlNdKSxpLnN1cHBvcnRlZExuZ3MmJmkuc3VwcG9ydGVkTG5ncy5pbmRleE9mKCJjaW1vZGUiKTwwJiYoaS5zdXBwb3J0ZWRMbmdzPWkuc3VwcG9ydGVkTG5ncy5jb25jYXQoWyJjaW1vZGUiXSkpLGl9ZnVuY3Rpb24gSWUoaSxyKXt2YXIgdD1PYmplY3Qua2V5cyhpKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGkpO3ImJihuPW4uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGksZSkuZW51bWVyYWJsZX0pKSx0LnB1c2guYXBwbHkodCxuKX1yZXR1cm4gdH1mdW5jdGlvbiBEKGkpe2Zvcih2YXIgcj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspe3ZhciB0PWFyZ3VtZW50c1tyXSE9bnVsbD9hcmd1bWVudHNbcl06e307ciUyP0llKE9iamVjdCh0KSwhMCkuZm9yRWFjaChmdW5jdGlvbihuKXtGKGksbix0W25dKX0pOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGksT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpOkllKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbihuKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxuLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxuKSl9KX1yZXR1cm4gaX1mdW5jdGlvbiB4dChpKXt2YXIgcj1QdCgpO3JldHVybiBmdW5jdGlvbigpe3ZhciBuPWooaSksZTtpZihyKXt2YXIgYT1qKHRoaXMpLmNvbnN0cnVjdG9yO2U9UmVmbGVjdC5jb25zdHJ1Y3Qobixhcmd1bWVudHMsYSl9ZWxzZSBlPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBCKHRoaXMsZSl9fWZ1bmN0aW9uIFB0KCl7aWYodHlwZW9mIFJlZmxlY3Q+InUifHwhUmVmbGVjdC5jb25zdHJ1Y3R8fFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYodHlwZW9mIFByb3h5PT0iZnVuY3Rpb24iKXJldHVybiEwO3RyeXtyZXR1cm4gQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sZnVuY3Rpb24oKXt9KSksITB9Y2F0Y2h7cmV0dXJuITF9fWZ1bmN0aW9uIHRlKCl7fWZ1bmN0aW9uIEx0KGkpe3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE9iamVjdC5nZXRQcm90b3R5cGVPZihpKSk7ci5mb3JFYWNoKGZ1bmN0aW9uKHQpe3R5cGVvZiBpW3RdPT0iZnVuY3Rpb24iJiYoaVt0XT1pW3RdLmJpbmQoaSkpfSl9dmFyIG5lPWZ1bmN0aW9uKGkpe3EodCxpKTt2YXIgcj14dCh0KTtmdW5jdGlvbiB0KCl7dmFyIG4sZT1hcmd1bWVudHMubGVuZ3RoPjAmJmFyZ3VtZW50c1swXSE9PXZvaWQgMD9hcmd1bWVudHNbMF06e30sYT1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMDtpZihrKHRoaXMsdCksbj1yLmNhbGwodGhpcyksWiYmXy5jYWxsKEUobikpLG4ub3B0aW9ucz1fZShlKSxuLnNlcnZpY2VzPXt9LG4ubG9nZ2VyPU4sbi5tb2R1bGVzPXtleHRlcm5hbDpbXX0sTHQoRShuKSksYSYmIW4uaXNJbml0aWFsaXplZCYmIWUuaXNDbG9uZSl7aWYoIW4ub3B0aW9ucy5pbml0SW1tZWRpYXRlKXJldHVybiBuLmluaXQoZSxhKSxCKG4sRShuKSk7c2V0VGltZW91dChmdW5jdGlvbigpe24uaW5pdChlLGEpfSwwKX1yZXR1cm4gbn1yZXR1cm4gUih0LFt7a2V5OiJpbml0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsYT1hcmd1bWVudHMubGVuZ3RoPjAmJmFyZ3VtZW50c1swXSE9PXZvaWQgMD9hcmd1bWVudHNbMF06e30sbz1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMDt0eXBlb2YgYT09ImZ1bmN0aW9uIiYmKG89YSxhPXt9KSwhYS5kZWZhdWx0TlMmJmEuZGVmYXVsdE5TIT09ITEmJmEubnMmJih0eXBlb2YgYS5ucz09InN0cmluZyI/YS5kZWZhdWx0TlM9YS5uczphLm5zLmluZGV4T2YoInRyYW5zbGF0aW9uIik8MCYmKGEuZGVmYXVsdE5TPWEubnNbMF0pKTt2YXIgdT1TdCgpO3RoaXMub3B0aW9ucz1EKEQoRCh7fSx1KSx0aGlzLm9wdGlvbnMpLF9lKGEpKSx0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSE9PSJ2MSImJih0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbj1EKEQoe30sdS5pbnRlcnBvbGF0aW9uKSx0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbikpLGEua2V5U2VwYXJhdG9yIT09dm9pZCAwJiYodGhpcy5vcHRpb25zLnVzZXJEZWZpbmVkS2V5U2VwYXJhdG9yPWEua2V5U2VwYXJhdG9yKSxhLm5zU2VwYXJhdG9yIT09dm9pZCAwJiYodGhpcy5vcHRpb25zLnVzZXJEZWZpbmVkTnNTZXBhcmF0b3I9YS5uc1NlcGFyYXRvcik7ZnVuY3Rpb24gcyhkKXtyZXR1cm4gZD90eXBlb2YgZD09ImZ1bmN0aW9uIj9uZXcgZDpkOm51bGx9aWYoIXRoaXMub3B0aW9ucy5pc0Nsb25lKXt0aGlzLm1vZHVsZXMubG9nZ2VyP04uaW5pdChzKHRoaXMubW9kdWxlcy5sb2dnZXIpLHRoaXMub3B0aW9ucyk6Ti5pbml0KG51bGwsdGhpcy5vcHRpb25zKTt2YXIgbDt0aGlzLm1vZHVsZXMuZm9ybWF0dGVyP2w9dGhpcy5tb2R1bGVzLmZvcm1hdHRlcjp0eXBlb2YgSW50bDwidSImJihsPW10KTt2YXIgZj1uZXcgZnQodGhpcy5vcHRpb25zKTt0aGlzLnN0b3JlPW5ldyBvdCh0aGlzLm9wdGlvbnMucmVzb3VyY2VzLHRoaXMub3B0aW9ucyk7dmFyIGM9dGhpcy5zZXJ2aWNlcztjLmxvZ2dlcj1OLGMucmVzb3VyY2VTdG9yZT10aGlzLnN0b3JlLGMubGFuZ3VhZ2VVdGlscz1mLGMucGx1cmFsUmVzb2x2ZXI9bmV3IGR0KGYse3ByZXBlbmQ6dGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvcixjb21wYXRpYmlsaXR5SlNPTjp0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04sc2ltcGxpZnlQbHVyYWxTdWZmaXg6dGhpcy5vcHRpb25zLnNpbXBsaWZ5UGx1cmFsU3VmZml4fSksbCYmKCF0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXR8fHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmZvcm1hdD09PXUuaW50ZXJwb2xhdGlvbi5mb3JtYXQpJiYoYy5mb3JtYXR0ZXI9cyhsKSxjLmZvcm1hdHRlci5pbml0KGMsdGhpcy5vcHRpb25zKSx0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXQ9Yy5mb3JtYXR0ZXIuZm9ybWF0LmJpbmQoYy5mb3JtYXR0ZXIpKSxjLmludGVycG9sYXRvcj1uZXcgaHQodGhpcy5vcHRpb25zKSxjLnV0aWxzPXtoYXNMb2FkZWROYW1lc3BhY2U6dGhpcy5oYXNMb2FkZWROYW1lc3BhY2UuYmluZCh0aGlzKX0sYy5iYWNrZW5kQ29ubmVjdG9yPW5ldyB3dChzKHRoaXMubW9kdWxlcy5iYWNrZW5kKSxjLnJlc291cmNlU3RvcmUsYyx0aGlzLm9wdGlvbnMpLGMuYmFja2VuZENvbm5lY3Rvci5vbigiKiIsZnVuY3Rpb24oZCl7Zm9yKHZhciBoPWFyZ3VtZW50cy5sZW5ndGgsTz1uZXcgQXJyYXkoaD4xP2gtMTowKSxiPTE7YjxoO2IrKylPW2ItMV09YXJndW1lbnRzW2JdO2UuZW1pdC5hcHBseShlLFtkXS5jb25jYXQoTykpfSksdGhpcy5tb2R1bGVzLmxhbmd1YWdlRGV0ZWN0b3ImJihjLmxhbmd1YWdlRGV0ZWN0b3I9cyh0aGlzLm1vZHVsZXMubGFuZ3VhZ2VEZXRlY3RvciksYy5sYW5ndWFnZURldGVjdG9yLmluaXQoYyx0aGlzLm9wdGlvbnMuZGV0ZWN0aW9uLHRoaXMub3B0aW9ucykpLHRoaXMubW9kdWxlcy5pMThuRm9ybWF0JiYoYy5pMThuRm9ybWF0PXModGhpcy5tb2R1bGVzLmkxOG5Gb3JtYXQpLGMuaTE4bkZvcm1hdC5pbml0JiZjLmkxOG5Gb3JtYXQuaW5pdCh0aGlzKSksdGhpcy50cmFuc2xhdG9yPW5ldyBqZSh0aGlzLnNlcnZpY2VzLHRoaXMub3B0aW9ucyksdGhpcy50cmFuc2xhdG9yLm9uKCIqIixmdW5jdGlvbihkKXtmb3IodmFyIGg9YXJndW1lbnRzLmxlbmd0aCxPPW5ldyBBcnJheShoPjE/aC0xOjApLGI9MTtiPGg7YisrKU9bYi0xXT1hcmd1bWVudHNbYl07ZS5lbWl0LmFwcGx5KGUsW2RdLmNvbmNhdChPKSl9KSx0aGlzLm1vZHVsZXMuZXh0ZXJuYWwuZm9yRWFjaChmdW5jdGlvbihkKXtkLmluaXQmJmQuaW5pdChlKX0pfWlmKHRoaXMuZm9ybWF0PXRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmZvcm1hdCxvfHwobz10ZSksdGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nJiYhdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yJiYhdGhpcy5vcHRpb25zLmxuZyl7dmFyIGc9dGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nKTtnLmxlbmd0aD4wJiZnWzBdIT09ImRldiImJih0aGlzLm9wdGlvbnMubG5nPWdbMF0pfSF0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3ImJiF0aGlzLm9wdGlvbnMubG5nJiZ0aGlzLmxvZ2dlci53YXJuKCJpbml0OiBubyBsYW5ndWFnZURldGVjdG9yIGlzIHVzZWQgYW5kIG5vIGxuZyBpcyBkZWZpbmVkIik7dmFyIHA9WyJnZXRSZXNvdXJjZSIsImhhc1Jlc291cmNlQnVuZGxlIiwiZ2V0UmVzb3VyY2VCdW5kbGUiLCJnZXREYXRhQnlMYW5ndWFnZSJdO3AuZm9yRWFjaChmdW5jdGlvbihkKXtlW2RdPWZ1bmN0aW9uKCl7dmFyIGg7cmV0dXJuKGg9ZS5zdG9yZSlbZF0uYXBwbHkoaCxhcmd1bWVudHMpfX0pO3ZhciB2PVsiYWRkUmVzb3VyY2UiLCJhZGRSZXNvdXJjZXMiLCJhZGRSZXNvdXJjZUJ1bmRsZSIsInJlbW92ZVJlc291cmNlQnVuZGxlIl07di5mb3JFYWNoKGZ1bmN0aW9uKGQpe2VbZF09ZnVuY3Rpb24oKXt2YXIgaDtyZXR1cm4oaD1lLnN0b3JlKVtkXS5hcHBseShoLGFyZ3VtZW50cyksZX19KTt2YXIgeT1LKCksbT1mdW5jdGlvbigpe3ZhciBoPWZ1bmN0aW9uKGIseCl7ZS5pc0luaXRpYWxpemVkJiYhZS5pbml0aWFsaXplZFN0b3JlT25jZSYmZS5sb2dnZXIud2FybigiaW5pdDogaTE4bmV4dCBpcyBhbHJlYWR5IGluaXRpYWxpemVkLiBZb3Ugc2hvdWxkIGNhbGwgaW5pdCBqdXN0IG9uY2UhIiksZS5pc0luaXRpYWxpemVkPSEwLGUub3B0aW9ucy5pc0Nsb25lfHxlLmxvZ2dlci5sb2coImluaXRpYWxpemVkIixlLm9wdGlvbnMpLGUuZW1pdCgiaW5pdGlhbGl6ZWQiLGUub3B0aW9ucykseS5yZXNvbHZlKHgpLG8oYix4KX07aWYoZS5sYW5ndWFnZXMmJmUub3B0aW9ucy5jb21wYXRpYmlsaXR5QVBJIT09InYxIiYmIWUuaXNJbml0aWFsaXplZClyZXR1cm4gaChudWxsLGUudC5iaW5kKGUpKTtlLmNoYW5nZUxhbmd1YWdlKGUub3B0aW9ucy5sbmcsaCl9O3JldHVybiB0aGlzLm9wdGlvbnMucmVzb3VyY2VzfHwhdGhpcy5vcHRpb25zLmluaXRJbW1lZGlhdGU/bSgpOnNldFRpbWVvdXQobSwwKSx5fX0se2tleToibG9hZFJlc291cmNlcyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIGE9dGhpcyxvPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp0ZSx1PW8scz10eXBlb2YgZT09InN0cmluZyI/ZTp0aGlzLmxhbmd1YWdlO2lmKHR5cGVvZiBlPT0iZnVuY3Rpb24iJiYodT1lKSwhdGhpcy5vcHRpb25zLnJlc291cmNlc3x8dGhpcy5vcHRpb25zLnBhcnRpYWxCdW5kbGVkTGFuZ3VhZ2VzKXtpZihzJiZzLnRvTG93ZXJDYXNlKCk9PT0iY2ltb2RlIilyZXR1cm4gdSgpO3ZhciBsPVtdLGY9ZnVuY3Rpb24ocCl7aWYocCl7dmFyIHY9YS5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShwKTt2LmZvckVhY2goZnVuY3Rpb24oeSl7bC5pbmRleE9mKHkpPDAmJmwucHVzaCh5KX0pfX07aWYocylmKHMpO2Vsc2V7dmFyIGM9dGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nKTtjLmZvckVhY2goZnVuY3Rpb24oZyl7cmV0dXJuIGYoZyl9KX10aGlzLm9wdGlvbnMucHJlbG9hZCYmdGhpcy5vcHRpb25zLnByZWxvYWQuZm9yRWFjaChmdW5jdGlvbihnKXtyZXR1cm4gZihnKX0pLHRoaXMuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5sb2FkKGwsdGhpcy5vcHRpb25zLm5zLGZ1bmN0aW9uKGcpeyFnJiYhYS5yZXNvbHZlZExhbmd1YWdlJiZhLmxhbmd1YWdlJiZhLnNldFJlc29sdmVkTGFuZ3VhZ2UoYS5sYW5ndWFnZSksdShnKX0pfWVsc2UgdShudWxsKX19LHtrZXk6InJlbG9hZFJlc291cmNlcyIsdmFsdWU6ZnVuY3Rpb24oZSxhLG8pe3ZhciB1PUsoKTtyZXR1cm4gZXx8KGU9dGhpcy5sYW5ndWFnZXMpLGF8fChhPXRoaXMub3B0aW9ucy5ucyksb3x8KG89dGUpLHRoaXMuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5yZWxvYWQoZSxhLGZ1bmN0aW9uKHMpe3UucmVzb2x2ZSgpLG8ocyl9KSx1fX0se2tleToidXNlIix2YWx1ZTpmdW5jdGlvbihlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoIllvdSBhcmUgcGFzc2luZyBhbiB1bmRlZmluZWQgbW9kdWxlISBQbGVhc2UgY2hlY2sgdGhlIG9iamVjdCB5b3UgYXJlIHBhc3NpbmcgdG8gaTE4bmV4dC51c2UoKSIpO2lmKCFlLnR5cGUpdGhyb3cgbmV3IEVycm9yKCJZb3UgYXJlIHBhc3NpbmcgYSB3cm9uZyBtb2R1bGUhIFBsZWFzZSBjaGVjayB0aGUgb2JqZWN0IHlvdSBhcmUgcGFzc2luZyB0byBpMThuZXh0LnVzZSgpIik7cmV0dXJuIGUudHlwZT09PSJiYWNrZW5kIiYmKHRoaXMubW9kdWxlcy5iYWNrZW5kPWUpLChlLnR5cGU9PT0ibG9nZ2VyInx8ZS5sb2cmJmUud2FybiYmZS5lcnJvcikmJih0aGlzLm1vZHVsZXMubG9nZ2VyPWUpLGUudHlwZT09PSJsYW5ndWFnZURldGVjdG9yIiYmKHRoaXMubW9kdWxlcy5sYW5ndWFnZURldGVjdG9yPWUpLGUudHlwZT09PSJpMThuRm9ybWF0IiYmKHRoaXMubW9kdWxlcy5pMThuRm9ybWF0PWUpLGUudHlwZT09PSJwb3N0UHJvY2Vzc29yIiYmTGUuYWRkUG9zdFByb2Nlc3NvcihlKSxlLnR5cGU9PT0iZm9ybWF0dGVyIiYmKHRoaXMubW9kdWxlcy5mb3JtYXR0ZXI9ZSksZS50eXBlPT09IjNyZFBhcnR5IiYmdGhpcy5tb2R1bGVzLmV4dGVybmFsLnB1c2goZSksdGhpc319LHtrZXk6InNldFJlc29sdmVkTGFuZ3VhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCEoIWV8fCF0aGlzLmxhbmd1YWdlcykmJiEoWyJjaW1vZGUiLCJkZXYiXS5pbmRleE9mKGUpPi0xKSlmb3IodmFyIGE9MDthPHRoaXMubGFuZ3VhZ2VzLmxlbmd0aDthKyspe3ZhciBvPXRoaXMubGFuZ3VhZ2VzW2FdO2lmKCEoWyJjaW1vZGUiLCJkZXYiXS5pbmRleE9mKG8pPi0xKSYmdGhpcy5zdG9yZS5oYXNMYW5ndWFnZVNvbWVUcmFuc2xhdGlvbnMobykpe3RoaXMucmVzb2x2ZWRMYW5ndWFnZT1vO2JyZWFrfX19fSx7a2V5OiJjaGFuZ2VMYW5ndWFnZSIsdmFsdWU6ZnVuY3Rpb24oZSxhKXt2YXIgbz10aGlzO3RoaXMuaXNMYW5ndWFnZUNoYW5naW5nVG89ZTt2YXIgdT1LKCk7dGhpcy5lbWl0KCJsYW5ndWFnZUNoYW5naW5nIixlKTt2YXIgcz1mdW5jdGlvbihnKXtvLmxhbmd1YWdlPWcsby5sYW5ndWFnZXM9by5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShnKSxvLnJlc29sdmVkTGFuZ3VhZ2U9dm9pZCAwLG8uc2V0UmVzb2x2ZWRMYW5ndWFnZShnKX0sbD1mdW5jdGlvbihnLHApe3A/KHMocCksby50cmFuc2xhdG9yLmNoYW5nZUxhbmd1YWdlKHApLG8uaXNMYW5ndWFnZUNoYW5naW5nVG89dm9pZCAwLG8uZW1pdCgibGFuZ3VhZ2VDaGFuZ2VkIixwKSxvLmxvZ2dlci5sb2coImxhbmd1YWdlQ2hhbmdlZCIscCkpOm8uaXNMYW5ndWFnZUNoYW5naW5nVG89dm9pZCAwLHUucmVzb2x2ZShmdW5jdGlvbigpe3JldHVybiBvLnQuYXBwbHkobyxhcmd1bWVudHMpfSksYSYmYShnLGZ1bmN0aW9uKCl7cmV0dXJuIG8udC5hcHBseShvLGFyZ3VtZW50cyl9KX0sZj1mdW5jdGlvbihnKXshZSYmIWcmJm8uc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciYmKGc9W10pO3ZhciBwPXR5cGVvZiBnPT0ic3RyaW5nIj9nOm8uc2VydmljZXMubGFuZ3VhZ2VVdGlscy5nZXRCZXN0TWF0Y2hGcm9tQ29kZXMoZyk7cCYmKG8ubGFuZ3VhZ2V8fHMocCksby50cmFuc2xhdG9yLmxhbmd1YWdlfHxvLnRyYW5zbGF0b3IuY2hhbmdlTGFuZ3VhZ2UocCksby5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yJiZvLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuY2FjaGVVc2VyTGFuZ3VhZ2UocCkpLG8ubG9hZFJlc291cmNlcyhwLGZ1bmN0aW9uKHYpe2wodixwKX0pfTtyZXR1cm4hZSYmdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yJiYhdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmFzeW5jP2YodGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmRldGVjdCgpKTohZSYmdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yJiZ0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuYXN5bmM/dGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmRldGVjdChmKTpmKGUpLHV9fSx7a2V5OiJnZXRGaXhlZFQiLHZhbHVlOmZ1bmN0aW9uKGUsYSxvKXt2YXIgdT10aGlzLHM9ZnVuY3Rpb24gbChmLGMpe3ZhciBnO2lmKFAoYykhPT0ib2JqZWN0Iil7Zm9yKHZhciBwPWFyZ3VtZW50cy5sZW5ndGgsdj1uZXcgQXJyYXkocD4yP3AtMjowKSx5PTI7eTxwO3krKyl2W3ktMl09YXJndW1lbnRzW3ldO2c9dS5vcHRpb25zLm92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyKFtmLGNdLmNvbmNhdCh2KSl9ZWxzZSBnPUQoe30sYyk7Zy5sbmc9Zy5sbmd8fGwubG5nLGcubG5ncz1nLmxuZ3N8fGwubG5ncyxnLm5zPWcubnN8fGwubnMsZy5rZXlQcmVmaXg9Zy5rZXlQcmVmaXh8fG98fGwua2V5UHJlZml4O3ZhciBtPXUub3B0aW9ucy5rZXlTZXBhcmF0b3J8fCIuIixkPWcua2V5UHJlZml4PyIiLmNvbmNhdChnLmtleVByZWZpeCkuY29uY2F0KG0pLmNvbmNhdChmKTpmO3JldHVybiB1LnQoZCxnKX07cmV0dXJuIHR5cGVvZiBlPT0ic3RyaW5nIj9zLmxuZz1lOnMubG5ncz1lLHMubnM9YSxzLmtleVByZWZpeD1vLHN9fSx7a2V5OiJ0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlO3JldHVybiB0aGlzLnRyYW5zbGF0b3ImJihlPXRoaXMudHJhbnNsYXRvcikudHJhbnNsYXRlLmFwcGx5KGUsYXJndW1lbnRzKX19LHtrZXk6ImV4aXN0cyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gdGhpcy50cmFuc2xhdG9yJiYoZT10aGlzLnRyYW5zbGF0b3IpLmV4aXN0cy5hcHBseShlLGFyZ3VtZW50cyl9fSx7a2V5OiJzZXREZWZhdWx0TmFtZXNwYWNlIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLm9wdGlvbnMuZGVmYXVsdE5TPWV9fSx7a2V5OiJoYXNMb2FkZWROYW1lc3BhY2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBhPXRoaXMsbz1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06e307aWYoIXRoaXMuaXNJbml0aWFsaXplZClyZXR1cm4gdGhpcy5sb2dnZXIud2FybigiaGFzTG9hZGVkTmFtZXNwYWNlOiBpMThuZXh0IHdhcyBub3QgaW5pdGlhbGl6ZWQiLHRoaXMubGFuZ3VhZ2VzKSwhMTtpZighdGhpcy5sYW5ndWFnZXN8fCF0aGlzLmxhbmd1YWdlcy5sZW5ndGgpcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oImhhc0xvYWRlZE5hbWVzcGFjZTogaTE4bi5sYW5ndWFnZXMgd2VyZSB1bmRlZmluZWQgb3IgZW1wdHkiLHRoaXMubGFuZ3VhZ2VzKSwhMTt2YXIgdT10aGlzLnJlc29sdmVkTGFuZ3VhZ2V8fHRoaXMubGFuZ3VhZ2VzWzBdLHM9dGhpcy5vcHRpb25zP3RoaXMub3B0aW9ucy5mYWxsYmFja0xuZzohMSxsPXRoaXMubGFuZ3VhZ2VzW3RoaXMubGFuZ3VhZ2VzLmxlbmd0aC0xXTtpZih1LnRvTG93ZXJDYXNlKCk9PT0iY2ltb2RlIilyZXR1cm4hMDt2YXIgZj1mdW5jdGlvbihwLHYpe3ZhciB5PWEuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5zdGF0ZVsiIi5jb25jYXQocCwifCIpLmNvbmNhdCh2KV07cmV0dXJuIHk9PT0tMXx8eT09PTJ9O2lmKG8ucHJlY2hlY2spe3ZhciBjPW8ucHJlY2hlY2sodGhpcyxmKTtpZihjIT09dm9pZCAwKXJldHVybiBjfXJldHVybiEhKHRoaXMuaGFzUmVzb3VyY2VCdW5kbGUodSxlKXx8IXRoaXMuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5iYWNrZW5kfHx0aGlzLm9wdGlvbnMucmVzb3VyY2VzJiYhdGhpcy5vcHRpb25zLnBhcnRpYWxCdW5kbGVkTGFuZ3VhZ2VzfHxmKHUsZSkmJighc3x8ZihsLGUpKSl9fSx7a2V5OiJsb2FkTmFtZXNwYWNlcyIsdmFsdWU6ZnVuY3Rpb24oZSxhKXt2YXIgbz10aGlzLHU9SygpO3JldHVybiB0aGlzLm9wdGlvbnMubnM/KHR5cGVvZiBlPT0ic3RyaW5nIiYmKGU9W2VdKSxlLmZvckVhY2goZnVuY3Rpb24ocyl7by5vcHRpb25zLm5zLmluZGV4T2Yocyk8MCYmby5vcHRpb25zLm5zLnB1c2gocyl9KSx0aGlzLmxvYWRSZXNvdXJjZXMoZnVuY3Rpb24ocyl7dS5yZXNvbHZlKCksYSYmYShzKX0pLHUpOihhJiZhKCksUHJvbWlzZS5yZXNvbHZlKCkpfX0se2tleToibG9hZExhbmd1YWdlcyIsdmFsdWU6ZnVuY3Rpb24oZSxhKXt2YXIgbz1LKCk7dHlwZW9mIGU9PSJzdHJpbmciJiYoZT1bZV0pO3ZhciB1PXRoaXMub3B0aW9ucy5wcmVsb2FkfHxbXSxzPWUuZmlsdGVyKGZ1bmN0aW9uKGwpe3JldHVybiB1LmluZGV4T2YobCk8MH0pO3JldHVybiBzLmxlbmd0aD8odGhpcy5vcHRpb25zLnByZWxvYWQ9dS5jb25jYXQocyksdGhpcy5sb2FkUmVzb3VyY2VzKGZ1bmN0aW9uKGwpe28ucmVzb2x2ZSgpLGEmJmEobCl9KSxvKTooYSYmYSgpLFByb21pc2UucmVzb2x2ZSgpKX19LHtrZXk6ImRpciIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoZXx8KGU9dGhpcy5yZXNvbHZlZExhbmd1YWdlfHwodGhpcy5sYW5ndWFnZXMmJnRoaXMubGFuZ3VhZ2VzLmxlbmd0aD4wP3RoaXMubGFuZ3VhZ2VzWzBdOnRoaXMubGFuZ3VhZ2UpKSwhZSlyZXR1cm4icnRsIjt2YXIgYT1bImFyIiwic2h1Iiwic3FyIiwic3NoIiwieGFhIiwieWhkIiwieXVkIiwiYWFvIiwiYWJoIiwiYWJ2IiwiYWNtIiwiYWNxIiwiYWN3IiwiYWN4IiwiYWN5IiwiYWRmIiwiYWRzIiwiYWViIiwiYWVjIiwiYWZiIiwiYWpwIiwiYXBjIiwiYXBkIiwiYXJiIiwiYXJxIiwiYXJzIiwiYXJ5IiwiYXJ6IiwiYXV6IiwiYXZsIiwiYXloIiwiYXlsIiwiYXluIiwiYXlwIiwiYmJ6IiwicGdhIiwiaGUiLCJpdyIsInBzIiwicGJ0IiwicGJ1IiwicHN0IiwicHJwIiwicHJkIiwidWciLCJ1ciIsInlkZCIsInlkcyIsInlpaCIsImppIiwieWkiLCJoYm8iLCJtZW4iLCJ4bW4iLCJmYSIsImpwciIsInBlbyIsInBlcyIsInBycyIsImR2Iiwic2FtIiwiY2tiIl07cmV0dXJuIGEuaW5kZXhPZih0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoZSkpPi0xfHxlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiLWFyYWIiKT4xPyJydGwiOiJsdHIifX0se2tleToiY2xvbmVJbnN0YW5jZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGE9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9LG89YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnRlLHU9RChEKEQoe30sdGhpcy5vcHRpb25zKSxhKSx7aXNDbG9uZTohMH0pLHM9bmV3IHQodSk7KGEuZGVidWchPT12b2lkIDB8fGEucHJlZml4IT09dm9pZCAwKSYmKHMubG9nZ2VyPXMubG9nZ2VyLmNsb25lKGEpKTt2YXIgbD1bInN0b3JlIiwic2VydmljZXMiLCJsYW5ndWFnZSJdO3JldHVybiBsLmZvckVhY2goZnVuY3Rpb24oZil7c1tmXT1lW2ZdfSkscy5zZXJ2aWNlcz1EKHt9LHRoaXMuc2VydmljZXMpLHMuc2VydmljZXMudXRpbHM9e2hhc0xvYWRlZE5hbWVzcGFjZTpzLmhhc0xvYWRlZE5hbWVzcGFjZS5iaW5kKHMpfSxzLnRyYW5zbGF0b3I9bmV3IGplKHMuc2VydmljZXMscy5vcHRpb25zKSxzLnRyYW5zbGF0b3Iub24oIioiLGZ1bmN0aW9uKGYpe2Zvcih2YXIgYz1hcmd1bWVudHMubGVuZ3RoLGc9bmV3IEFycmF5KGM+MT9jLTE6MCkscD0xO3A8YztwKyspZ1twLTFdPWFyZ3VtZW50c1twXTtzLmVtaXQuYXBwbHkocyxbZl0uY29uY2F0KGcpKX0pLHMuaW5pdCh1LG8pLHMudHJhbnNsYXRvci5vcHRpb25zPXMub3B0aW9ucyxzLnRyYW5zbGF0b3IuYmFja2VuZENvbm5lY3Rvci5zZXJ2aWNlcy51dGlscz17aGFzTG9hZGVkTmFtZXNwYWNlOnMuaGFzTG9hZGVkTmFtZXNwYWNlLmJpbmQocyl9LHN9fSx7a2V5OiJ0b0pTT04iLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJue29wdGlvbnM6dGhpcy5vcHRpb25zLHN0b3JlOnRoaXMuc3RvcmUsbGFuZ3VhZ2U6dGhpcy5sYW5ndWFnZSxsYW5ndWFnZXM6dGhpcy5sYW5ndWFnZXMscmVzb2x2ZWRMYW5ndWFnZTp0aGlzLnJlc29sdmVkTGFuZ3VhZ2V9fX1dKSx0fShfKTtGKG5lLCJjcmVhdGVJbnN0YW5jZSIsZnVuY3Rpb24oKXt2YXIgaT1hcmd1bWVudHMubGVuZ3RoPjAmJmFyZ3VtZW50c1swXSE9PXZvaWQgMD9hcmd1bWVudHNbMF06e30scj1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMDtyZXR1cm4gbmV3IG5lKGkscil9KTt2YXIgUz1uZS5jcmVhdGVJbnN0YW5jZSgpO1MuY3JlYXRlSW5zdGFuY2U9bmUuY3JlYXRlSW5zdGFuY2UsUy5jcmVhdGVJbnN0YW5jZSxTLmluaXQsUy5sb2FkUmVzb3VyY2VzLFMucmVsb2FkUmVzb3VyY2VzLFMudXNlLFMuY2hhbmdlTGFuZ3VhZ2UsUy5nZXRGaXhlZFQsUy50LFMuZXhpc3RzLFMuc2V0RGVmYXVsdE5hbWVzcGFjZSxTLmhhc0xvYWRlZE5hbWVzcGFjZSxTLmxvYWROYW1lc3BhY2VzLFMubG9hZExhbmd1YWdlcztjb25zdCBUPWk9Pntjb25zdCByPWkuZ2V0RnVsbFllYXIoKSx0PWkuZ2V0TW9udGgoKSsxLG49aS5nZXREYXRlKCksZT1pLmdldEhvdXJzKCksYT1pLmdldE1pbnV0ZXMoKSxvPWkuZ2V0U2Vjb25kcygpLHU9cz0+YCR7c31gLnBhZFN0YXJ0KDIsIjAiKTtyZXR1cm5gJHtyfS0ke3UodCl9LSR7dShuKX0gJHt1KGUpfToke3UoYSl9OiR7dShvKX1gfTtmdW5jdGlvbiBrdChpLHIsdCl7dmFyIG8sdTtjb25zdCBuPShvPXIuZmluZChzPT5zLnR5cGU9PT0iZmllbGQiKSk9PW51bGw/dm9pZCAwOm8udmFsdWUsZT0odT1yLmZpbmQocz0+cy50eXBlPT09InZhbHVlIikpPT1udWxsP3ZvaWQgMDp1LnZhbHVlO2lmKCFufHwhZSlyZXR1cm4gdDtjb25zdCBhPXRbbl07c3dpdGNoKGUpe2Nhc2UieWVhciI6e2NvbnN0IHM9YS5tYXAobD0+e2NvbnN0IGM9bmV3IERhdGUobCkuZ2V0RnVsbFllYXIoKTtyZXR1cm4gVChuZXcgRGF0ZShjLDAsMSkpfSk7cmV0dXJuey4uLnQsW2ldOnN9fWNhc2UicXVhcnRlciI6e2NvbnN0IHM9YS5tYXAobD0+e2NvbnN0IGY9bmV3IERhdGUobCksYz1mLmdldEZ1bGxZZWFyKCksZz1NYXRoLmZsb29yKGYuZ2V0TW9udGgoKS8zKTtyZXR1cm4gVChuZXcgRGF0ZShjLGcqMywxKSl9KTtyZXR1cm57Li4udCxbaV06c319Y2FzZSJtb250aCI6e2NvbnN0IHM9YS5tYXAobD0+e2NvbnN0IGY9bmV3IERhdGUobCksYz1mLmdldEZ1bGxZZWFyKCksZz1mLmdldE1vbnRoKCk7cmV0dXJuIFQobmV3IERhdGUoYyxnLDEpKX0pO3JldHVybnsuLi50LFtpXTpzfX1jYXNlIndlZWsiOntjb25zdCBzPWEubWFwKGw9Pntjb25zdCBmPW5ldyBEYXRlKGwpLGM9bmV3IERhdGUoZi5zZXREYXRlKGYuZ2V0RGF0ZSgpLWYuZ2V0RGF5KCkpKSxnPWMuZ2V0RnVsbFllYXIoKSxwPWMuZ2V0TW9udGgoKSx2PWMuZ2V0RGF0ZSgpO3JldHVybiBUKG5ldyBEYXRlKGcscCx2KSl9KTtyZXR1cm57Li4udCxbaV06c319Y2FzZSJkYXkiOntjb25zdCBzPWEubWFwKGw9Pntjb25zdCBmPW5ldyBEYXRlKGwpLGM9Zi5nZXRGdWxsWWVhcigpLGc9Zi5nZXRNb250aCgpLHA9Zi5nZXREYXRlKCk7cmV0dXJuIFQobmV3IERhdGUoYyxnLHApKX0pO3JldHVybnsuLi50LFtpXTpzfX1jYXNlImhvdXIiOntjb25zdCBzPWEubWFwKGw9Pntjb25zdCBmPW5ldyBEYXRlKGwpLGM9Zi5nZXRGdWxsWWVhcigpLGc9Zi5nZXRNb250aCgpLHA9Zi5nZXREYXRlKCksdj1mLmdldEhvdXJzKCk7cmV0dXJuIFQobmV3IERhdGUoYyxnLHAsdikpfSk7cmV0dXJuey4uLnQsW2ldOnN9fWNhc2UibWludXRlIjp7Y29uc3Qgcz1hLm1hcChsPT57Y29uc3QgZj1uZXcgRGF0ZShsKSxjPWYuZ2V0RnVsbFllYXIoKSxnPWYuZ2V0TW9udGgoKSxwPWYuZ2V0RGF0ZSgpLHY9Zi5nZXRIb3VycygpLHk9Zi5nZXRNaW51dGVzKCk7cmV0dXJuIFQobmV3IERhdGUoYyxnLHAsdix5KSl9KTtyZXR1cm57Li4udCxbaV06c319Y2FzZSJzZWNvbmQiOntjb25zdCBzPWEubWFwKGw9Pntjb25zdCBmPW5ldyBEYXRlKGwpLGM9Zi5nZXRGdWxsWWVhcigpLGc9Zi5nZXRNb250aCgpLHA9Zi5nZXREYXRlKCksdj1mLmdldEhvdXJzKCkseT1mLmdldE1pbnV0ZXMoKSxtPWYuZ2V0U2Vjb25kcygpO3JldHVybiBUKG5ldyBEYXRlKGMsZyxwLHYseSxtKSl9KTtyZXR1cm57Li4udCxbaV06c319ZGVmYXVsdDpyZXR1cm4gdH19ZnVuY3Rpb24gUnQoaSxyLHQpe3ZhciBvLHU7Y29uc3Qgbj0obz1yLmZpbmQocz0+cy50eXBlPT09ImZpZWxkIikpPT1udWxsP3ZvaWQgMDpvLnZhbHVlLGU9KHU9ci5maW5kKHM9PnMudHlwZT09PSJ2YWx1ZSIpKT09bnVsbD92b2lkIDA6dS52YWx1ZTtpZighbnx8IWUpcmV0dXJuIHQ7Y29uc3QgYT10W25dO3N3aXRjaChlKXtjYXNlInllYXIiOntjb25zdCBzPWEubWFwKGw9Pm5ldyBEYXRlKGwpLmdldEZ1bGxZZWFyKCkpO3JldHVybnsuLi50LFtpXTpzfX1jYXNlInF1YXJ0ZXIiOntjb25zdCBzPWEubWFwKGw9Pntjb25zdCBmPW5ldyBEYXRlKGwpO3JldHVybiBNYXRoLmZsb29yKGYuZ2V0TW9udGgoKS8zKSsxfSk7cmV0dXJuey4uLnQsW2ldOnN9fWNhc2UibW9udGgiOntjb25zdCBzPWEubWFwKGw9Pm5ldyBEYXRlKGwpLmdldE1vbnRoKCkrMSk7cmV0dXJuey4uLnQsW2ldOnN9fWNhc2Uid2VlayI6e2NvbnN0IHM9YS5tYXAobD0+e2NvbnN0IGY9bmV3IERhdGUobCksYz1mLmdldEZ1bGxZZWFyKCksZz1uZXcgRGF0ZShjLDAsMSkscD1uZXcgRGF0ZShuZXcgRGF0ZShnKS5zZXREYXRlKGcuZ2V0RGF0ZSgpLWcuZ2V0RGF5KCkpKSx2PWYuZ2V0VGltZSgpLXAuZ2V0VGltZSgpPjFlMyo2MCo2MCoyNCo3P2M6cC5nZXRGdWxsWWVhcigpLHk9bmV3IERhdGUodiwwLDEpLG09bmV3IERhdGUobmV3IERhdGUoeSkuc2V0RGF0ZSh5LmdldERhdGUoKS15LmdldERheSgpKSk7cmV0dXJuIE1hdGguZmxvb3IoKGYuZ2V0VGltZSgpLW0uZ2V0VGltZSgpKS8oNyoyNCo2MCo2MCoxZTMpKSsxfSk7cmV0dXJuey4uLnQsW2ldOnN9fWNhc2Uid2Vla2RheSI6e2NvbnN0IHM9YS5tYXAobD0+bmV3IERhdGUobCkuZ2V0RGF5KCkpO3JldHVybnsuLi50LFtpXTpzfX1jYXNlImRheSI6e2NvbnN0IHM9YS5tYXAobD0+bmV3IERhdGUobCkuZ2V0RGF0ZSgpKTtyZXR1cm57Li4udCxbaV06c319Y2FzZSJob3VyIjp7Y29uc3Qgcz1hLm1hcChsPT5uZXcgRGF0ZShsKS5nZXRIb3VycygpKTtyZXR1cm57Li4udCxbaV06c319Y2FzZSJtaW51dGUiOntjb25zdCBzPWEubWFwKGw9Pm5ldyBEYXRlKGwpLmdldE1pbnV0ZXMoKSk7cmV0dXJuey4uLnQsW2ldOnN9fWNhc2Uic2Vjb25kIjp7Y29uc3Qgcz1hLm1hcChsPT5uZXcgRGF0ZShsKS5nZXRTZWNvbmRzKCkpO3JldHVybnsuLi50LFtpXTpzfX1kZWZhdWx0OnJldHVybiB0fX1mdW5jdGlvbiBUZShpLHIpe2NvbnN0e29wOnQscGFyYW1zOm4sbnVtOmV9PWksYT17Li4ucn0sbz1yW09iamVjdC5rZXlzKHIpWzBdXS5sZW5ndGg7Zm9yKGxldCB1IG9mIG4pc3dpdGNoKHUudHlwZSl7Y2FzZSJmaWVsZCI6YVt1LnZhbHVlXT1yW3UudmFsdWVdO2JyZWFrO2Nhc2UiY29uc3RhbnQiOmFbdS52YWx1ZV09bmV3IEFycmF5KG8pLmZpbGwodS52YWx1ZSk7YnJlYWs7Y2FzZSJleHByZXNzaW9uIjpsZXQgcz1UZSh1LnZhbHVlLHIpO09iamVjdC5rZXlzKHMpLmZvckVhY2gobD0+e2FbbF09c1tsXX0pO2JyZWFrfXN3aXRjaCh0KXtjYXNlIm9uZSI6cmV0dXJuIER0KGkuYXMsbixhKTtjYXNlImxvZyI6cmV0dXJuIGZlKGkuYXMsbixhLGUpO2Nhc2UibG9nMiI6cmV0dXJuIGZlKGkuYXMsbixhLDIpO2Nhc2UibG9nMTAiOnJldHVybiBmZShpLmFzLG4sYSwxMCk7Y2FzZSJiaW5Db3VudCI6cmV0dXJuIE50KGkuYXMsbixhLGUpO2Nhc2UiYmluIjpyZXR1cm4ganQoaS5hcyxuLGEsZSk7Y2FzZSJkYXRlVGltZURyaWxsIjpyZXR1cm4ga3QoaS5hcyxuLGEpO2Nhc2UiZGF0ZVRpbWVGZWF0dXJlIjpyZXR1cm4gUnQoaS5hcyxuLGEpO2RlZmF1bHQ6cmV0dXJuIGF9fWZ1bmN0aW9uIGp0KGkscix0LG49MTApe2NvbnN0e3ZhbHVlOmV9PXJbMF0sYT10W2VdO2xldCBvPTEvMCx1PS0xLzA7Zm9yKGxldCBwPTA7cDxhLmxlbmd0aDtwKyspe2xldCB2PWFbcF07dj51JiYodT12KSx2PG8mJihvPXYpfWNvbnN0IHM9KHUtbykvbixsPU1hdGgubWluKE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLE1hdGgubWF4KHUtbyxOdW1iZXIuTUlOX1ZBTFVFKSksZj1NYXRoLm1heCgtTWF0aC5yb3VuZChNYXRoLmxvZzEwKGwpKSsyLDApLGM9TWF0aC5taW4oMTAwLE1hdGgubWF4KDAsTWF0aC5tYXgoTnVtYmVyLmlzRmluaXRlKGYpP2Y6MCwwKSkpLGc9YS5tYXAocD0+e2xldCB2PU1hdGguZmxvb3IoKHAtbykvcyk7cmV0dXJuIHY9PT1uJiYodj1uLTEpLE51bWJlci5pc05hTih2KSYmKHY9MCksTnVtYmVyKCh2KnMrbykudG9GaXhlZChjKSl9KTtyZXR1cm57Li4udCxbaV06Z319ZnVuY3Rpb24gTnQoaSxyLHQsbj0xMCl7Y29uc3R7dmFsdWU6ZX09clswXSxvPXRbZV0ubWFwKChsLGYpPT4oe3ZhbDpsLGluZGV4OmZ9KSkuc29ydCgobCxmKT0+bC52YWwtZi52YWwpLm1hcCgobCxmKT0+KHt2YWw6bC52YWwsaW5kZXg6bC5pbmRleCxvcmRlckluZGV4OmZ9KSksdT1vLmxlbmd0aC9uLHM9by5zb3J0KChsLGYpPT5sLmluZGV4LWYuaW5kZXgpLm1hcChsPT57bGV0IGY9TWF0aC5mbG9vcihsLm9yZGVySW5kZXgvdSk7cmV0dXJuIGY9PT1uJiYoZj1uLTEpLGYrMX0pO3JldHVybnsuLi50LFtpXTpzfX1mdW5jdGlvbiBmZShpLHIsdCxuPTEwKXtjb25zdHt2YWx1ZTplfT1yWzBdLG89dFtlXS5tYXAodT0+TWF0aC5sb2codSkvTWF0aC5sb2cobikpO3JldHVybnsuLi50LFtpXTpvfX1mdW5jdGlvbiBEdChpLHIsdCl7aWYoT2JqZWN0LmtleXModCkubGVuZ3RoPT09MClyZXR1cm4gdDtjb25zdCBuPXRbT2JqZWN0LmtleXModClbMF1dLmxlbmd0aCxlPW5ldyBBcnJheShuKS5maWxsKDEpO3JldHVybnsuLi50LFtpXTplfX1mdW5jdGlvbiBDdChpKXtjb25zdCByPXt9O3JldHVybiBpLmxlbmd0aD09PTB8fE9iamVjdC5rZXlzKGlbMF0pLmZvckVhY2godD0+e3JbdF09aS5tYXAobj0+blt0XSl9KSxyfWZ1bmN0aW9uIEV0KGkpe2NvbnN0IHI9T2JqZWN0LmtleXMoaSk7aWYoci5sZW5ndGg9PT0wKXJldHVybltdO2NvbnN0IHQ9W10sbj1pW09iamVjdC5rZXlzKGkpWzBdXS5sZW5ndGg7Zm9yKGxldCBlPTA7ZTxuO2UrKyl7Y29uc3QgYT17fTtyLmZvckVhY2gobz0+e2Fbb109aVtvXVtlXX0pLHQucHVzaChhKX1yZXR1cm4gdH1mdW5jdGlvbiBGdChpLHIpe2xldCB0PUN0KGkpO2ZvcihsZXQgbj0wO248ci5sZW5ndGg7bisrKXtjb25zdCBlPXJbbl07dD1UZShlLmV4cHJlc3Npb24sdCl9cmV0dXJuIEV0KHQpfWNvbnN0IF90PWk9Pntjb25zdHtkYXRhU291cmNlOnIsdHJhbnM6dH09aS5kYXRhO3RyeXtjb25zdCBuPUZ0KHIsdCk7c2VsZi5wb3N0TWVzc2FnZShuKX1jYXRjaChuKXtzZWxmLnBvc3RNZXNzYWdlKHtlcnJvcjpuLm1lc3NhZ2V9KX19O3NlbGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsX3QsITEpfSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNmb3JtLndvcmtlci02MGExY2M4Zi5qcy5tYXAK",X7=typeof window<"u"&&window.Blob&&new Blob([atob(Hae)],{type:"text/javascript;charset=utf-8"});function eVe(){const e=X7&&(window.URL||window.webkitURL).createObjectURL(X7);try{return e?new Worker(e):new Worker("data:application/javascript;base64,"+Hae)}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}const Jae="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIFAoaSl7cmV0dXJuIFA9dHlwZW9mIFN5bWJvbD09ImZ1bmN0aW9uIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09InN5bWJvbCI/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdHlwZW9mIFN5bWJvbD09ImZ1bmN0aW9uIiYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9LFAoaSl9ZnVuY3Rpb24gUihpLHQpe2lmKCEoaSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIEhlKGksdCl7aWYoUChpKSE9PSJvYmplY3QifHxpPT09bnVsbClyZXR1cm4gaTt2YXIgbj1pW1N5bWJvbC50b1ByaW1pdGl2ZV07aWYobiE9PXZvaWQgMCl7dmFyIHI9bi5jYWxsKGksdHx8ImRlZmF1bHQiKTtpZihQKHIpIT09Im9iamVjdCIpcmV0dXJuIHI7dGhyb3cgbmV3IFR5cGVFcnJvcigiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS4iKX1yZXR1cm4odD09PSJzdHJpbmciP1N0cmluZzpOdW1iZXIpKGkpfWZ1bmN0aW9uIHBlKGkpe3ZhciB0PUhlKGksInN0cmluZyIpO3JldHVybiBQKHQpPT09InN5bWJvbCI/dDpTdHJpbmcodCl9ZnVuY3Rpb24gZGUoaSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLHBlKHIua2V5KSxyKX19ZnVuY3Rpb24gayhpLHQsbil7cmV0dXJuIHQmJmRlKGkucHJvdG90eXBlLHQpLG4mJmRlKGksbiksT2JqZWN0LmRlZmluZVByb3BlcnR5KGksInByb3RvdHlwZSIse3dyaXRhYmxlOiExfSksaX1mdW5jdGlvbiBfKGkpe2lmKGk9PT12b2lkIDApdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4gaX1mdW5jdGlvbiBpZShpLHQpe3JldHVybiBpZT1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mLmJpbmQoKTpmdW5jdGlvbihyLGUpe3JldHVybiByLl9fcHJvdG9fXz1lLHJ9LGllKGksdCl9ZnVuY3Rpb24gUShpLHQpe2lmKHR5cGVvZiB0IT0iZnVuY3Rpb24iJiZ0IT09bnVsbCl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpO2kucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTppLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaSwicHJvdG90eXBlIix7d3JpdGFibGU6ITF9KSx0JiZpZShpLHQpfWZ1bmN0aW9uIFYoaSx0KXtpZih0JiYoUCh0KT09PSJvYmplY3QifHx0eXBlb2YgdD09ImZ1bmN0aW9uIikpcmV0dXJuIHQ7aWYodCE9PXZvaWQgMCl0aHJvdyBuZXcgVHlwZUVycm9yKCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZCIpO3JldHVybiBfKGkpfWZ1bmN0aW9uIGooaSl7cmV0dXJuIGo9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCk6ZnVuY3Rpb24obil7cmV0dXJuIG4uX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2Yobil9LGooaSl9ZnVuY3Rpb24gRihpLHQsbil7cmV0dXJuIHQ9cGUodCksdCBpbiBpP09iamVjdC5kZWZpbmVQcm9wZXJ0eShpLHQse3ZhbHVlOm4sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTppW3RdPW4saX1mdW5jdGlvbiBKZShpKXtpZihBcnJheS5pc0FycmF5KGkpKXJldHVybiBpfWZ1bmN0aW9uIHplKGkpe2lmKHR5cGVvZiBTeW1ib2w8InUiJiZpW1N5bWJvbC5pdGVyYXRvcl0hPW51bGx8fGlbIkBAaXRlcmF0b3IiXSE9bnVsbClyZXR1cm4gQXJyYXkuZnJvbShpKX1mdW5jdGlvbiBoZShpLHQpeyh0PT1udWxsfHx0PmkubGVuZ3RoKSYmKHQ9aS5sZW5ndGgpO2Zvcih2YXIgbj0wLHI9bmV3IEFycmF5KHQpO248dDtuKyspcltuXT1pW25dO3JldHVybiByfWZ1bmN0aW9uIFdlKGksdCl7aWYoaSl7aWYodHlwZW9mIGk9PSJzdHJpbmciKXJldHVybiBoZShpLHQpO3ZhciBuPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpKS5zbGljZSg4LC0xKTtpZihuPT09Ik9iamVjdCImJmkuY29uc3RydWN0b3ImJihuPWkuY29uc3RydWN0b3IubmFtZSksbj09PSJNYXAifHxuPT09IlNldCIpcmV0dXJuIEFycmF5LmZyb20oaSk7aWYobj09PSJBcmd1bWVudHMifHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSlyZXR1cm4gaGUoaSx0KX19ZnVuY3Rpb24gWWUoKXt0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLgpJbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuYCl9ZnVuY3Rpb24gR2UoaSl7cmV0dXJuIEplKGkpfHx6ZShpKXx8V2UoaSl8fFllKCl9ZnVuY3Rpb24gdmUoaSx0KXt2YXIgbj1PYmplY3Qua2V5cyhpKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGkpO3QmJihyPXIuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGksZSkuZW51bWVyYWJsZX0pKSxuLnB1c2guYXBwbHkobixyKX1yZXR1cm4gbn1mdW5jdGlvbiBtZShpKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgbj1hcmd1bWVudHNbdF0hPW51bGw/YXJndW1lbnRzW3RdOnt9O3QlMj92ZShPYmplY3QobiksITApLmZvckVhY2goZnVuY3Rpb24ocil7RihpLHIsbltyXSl9KTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyhpLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKTp2ZShPYmplY3QobikpLmZvckVhY2goZnVuY3Rpb24ocil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGkscixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4scikpfSl9cmV0dXJuIGl9dmFyIFFlPXt0eXBlOiJsb2dnZXIiLGxvZzpmdW5jdGlvbih0KXt0aGlzLm91dHB1dCgibG9nIix0KX0sd2FybjpmdW5jdGlvbih0KXt0aGlzLm91dHB1dCgid2FybiIsdCl9LGVycm9yOmZ1bmN0aW9uKHQpe3RoaXMub3V0cHV0KCJlcnJvciIsdCl9LG91dHB1dDpmdW5jdGlvbih0LG4pe2NvbnNvbGUmJmNvbnNvbGVbdF0mJmNvbnNvbGVbdF0uYXBwbHkoY29uc29sZSxuKX19LFplPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gaSh0KXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06e307Uih0aGlzLGkpLHRoaXMuaW5pdCh0LG4pfXJldHVybiBrKGksW3trZXk6ImluaXQiLHZhbHVlOmZ1bmN0aW9uKG4pe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7fTt0aGlzLnByZWZpeD1yLnByZWZpeHx8ImkxOG5leHQ6Iix0aGlzLmxvZ2dlcj1ufHxRZSx0aGlzLm9wdGlvbnM9cix0aGlzLmRlYnVnPXIuZGVidWd9fSx7a2V5OiJzZXREZWJ1ZyIsdmFsdWU6ZnVuY3Rpb24obil7dGhpcy5kZWJ1Zz1ufX0se2tleToibG9nIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgbj1hcmd1bWVudHMubGVuZ3RoLHI9bmV3IEFycmF5KG4pLGU9MDtlPG47ZSsrKXJbZV09YXJndW1lbnRzW2VdO3JldHVybiB0aGlzLmZvcndhcmQociwibG9nIiwiIiwhMCl9fSx7a2V5OiJ3YXJuIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgbj1hcmd1bWVudHMubGVuZ3RoLHI9bmV3IEFycmF5KG4pLGU9MDtlPG47ZSsrKXJbZV09YXJndW1lbnRzW2VdO3JldHVybiB0aGlzLmZvcndhcmQociwid2FybiIsIiIsITApfX0se2tleToiZXJyb3IiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBuPWFyZ3VtZW50cy5sZW5ndGgscj1uZXcgQXJyYXkobiksZT0wO2U8bjtlKyspcltlXT1hcmd1bWVudHNbZV07cmV0dXJuIHRoaXMuZm9yd2FyZChyLCJlcnJvciIsIiIpfX0se2tleToiZGVwcmVjYXRlIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgbj1hcmd1bWVudHMubGVuZ3RoLHI9bmV3IEFycmF5KG4pLGU9MDtlPG47ZSsrKXJbZV09YXJndW1lbnRzW2VdO3JldHVybiB0aGlzLmZvcndhcmQociwid2FybiIsIldBUk5JTkcgREVQUkVDQVRFRDogIiwhMCl9fSx7a2V5OiJmb3J3YXJkIix2YWx1ZTpmdW5jdGlvbihuLHIsZSxhKXtyZXR1cm4gYSYmIXRoaXMuZGVidWc/bnVsbDoodHlwZW9mIG5bMF09PSJzdHJpbmciJiYoblswXT0iIi5jb25jYXQoZSkuY29uY2F0KHRoaXMucHJlZml4LCIgIikuY29uY2F0KG5bMF0pKSx0aGlzLmxvZ2dlcltyXShuKSl9fSx7a2V5OiJjcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKG4pe3JldHVybiBuZXcgaSh0aGlzLmxvZ2dlcixtZShtZSh7fSx7cHJlZml4OiIiLmNvbmNhdCh0aGlzLnByZWZpeCwiOiIpLmNvbmNhdChuLCI6Iil9KSx0aGlzLm9wdGlvbnMpKX19LHtrZXk6ImNsb25lIix2YWx1ZTpmdW5jdGlvbihuKXtyZXR1cm4gbj1ufHx0aGlzLm9wdGlvbnMsbi5wcmVmaXg9bi5wcmVmaXh8fHRoaXMucHJlZml4LG5ldyBpKHRoaXMubG9nZ2VyLG4pfX1dKSxpfSgpLE49bmV3IFplLEk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKCl7Uih0aGlzLGkpLHRoaXMub2JzZXJ2ZXJzPXt9fXJldHVybiBrKGksW3trZXk6Im9uIix2YWx1ZTpmdW5jdGlvbihuLHIpe3ZhciBlPXRoaXM7cmV0dXJuIG4uc3BsaXQoIiAiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Uub2JzZXJ2ZXJzW2FdPWUub2JzZXJ2ZXJzW2FdfHxbXSxlLm9ic2VydmVyc1thXS5wdXNoKHIpfSksdGhpc319LHtrZXk6Im9mZiIsdmFsdWU6ZnVuY3Rpb24obixyKXtpZih0aGlzLm9ic2VydmVyc1tuXSl7aWYoIXIpe2RlbGV0ZSB0aGlzLm9ic2VydmVyc1tuXTtyZXR1cm59dGhpcy5vYnNlcnZlcnNbbl09dGhpcy5vYnNlcnZlcnNbbl0uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlIT09cn0pfX19LHtrZXk6ImVtaXQiLHZhbHVlOmZ1bmN0aW9uKG4pe2Zvcih2YXIgcj1hcmd1bWVudHMubGVuZ3RoLGU9bmV3IEFycmF5KHI+MT9yLTE6MCksYT0xO2E8cjthKyspZVthLTFdPWFyZ3VtZW50c1thXTtpZih0aGlzLm9ic2VydmVyc1tuXSl7dmFyIG89W10uY29uY2F0KHRoaXMub2JzZXJ2ZXJzW25dKTtvLmZvckVhY2goZnVuY3Rpb24odSl7dS5hcHBseSh2b2lkIDAsZSl9KX1pZih0aGlzLm9ic2VydmVyc1siKiJdKXt2YXIgcz1bXS5jb25jYXQodGhpcy5vYnNlcnZlcnNbIioiXSk7cy5mb3JFYWNoKGZ1bmN0aW9uKHUpe3UuYXBwbHkodSxbbl0uY29uY2F0KGUpKX0pfX19XSksaX0oKTtmdW5jdGlvbiAkKCl7dmFyIGksdCxuPW5ldyBQcm9taXNlKGZ1bmN0aW9uKHIsZSl7aT1yLHQ9ZX0pO3JldHVybiBuLnJlc29sdmU9aSxuLnJlamVjdD10LG59ZnVuY3Rpb24geWUoaSl7cmV0dXJuIGk9PW51bGw/IiI6IiIraX1mdW5jdGlvbiBxZShpLHQsbil7aS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3Rbcl0mJihuW3JdPXRbcl0pfSl9ZnVuY3Rpb24gb2UoaSx0LG4pe2Z1bmN0aW9uIHIocyl7cmV0dXJuIHMmJnMuaW5kZXhPZigiIyMjIik+LTE/cy5yZXBsYWNlKC8jIyMvZywiLiIpOnN9ZnVuY3Rpb24gZSgpe3JldHVybiFpfHx0eXBlb2YgaT09InN0cmluZyJ9Zm9yKHZhciBhPXR5cGVvZiB0IT0ic3RyaW5nIj9bXS5jb25jYXQodCk6dC5zcGxpdCgiLiIpO2EubGVuZ3RoPjE7KXtpZihlKCkpcmV0dXJue307dmFyIG89cihhLnNoaWZ0KCkpOyFpW29dJiZuJiYoaVtvXT1uZXcgbiksT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGksbyk/aT1pW29dOmk9e319cmV0dXJuIGUoKT97fTp7b2JqOmksazpyKGEuc2hpZnQoKSl9fWZ1bmN0aW9uIGJlKGksdCxuKXt2YXIgcj1vZShpLHQsT2JqZWN0KSxlPXIub2JqLGE9ci5rO2VbYV09bn1mdW5jdGlvbiBYZShpLHQsbixyKXt2YXIgZT1vZShpLHQsT2JqZWN0KSxhPWUub2JqLG89ZS5rO2Fbb109YVtvXXx8W10sciYmKGFbb109YVtvXS5jb25jYXQobikpLHJ8fGFbb10ucHVzaChuKX1mdW5jdGlvbiBaKGksdCl7dmFyIG49b2UoaSx0KSxyPW4ub2JqLGU9bi5rO2lmKHIpcmV0dXJuIHJbZV19ZnVuY3Rpb24gT2UoaSx0LG4pe3ZhciByPVooaSxuKTtyZXR1cm4gciE9PXZvaWQgMD9yOloodCxuKX1mdW5jdGlvbiB3ZShpLHQsbil7Zm9yKHZhciByIGluIHQpciE9PSJfX3Byb3RvX18iJiZyIT09ImNvbnN0cnVjdG9yIiYmKHIgaW4gaT90eXBlb2YgaVtyXT09InN0cmluZyJ8fGlbcl1pbnN0YW5jZW9mIFN0cmluZ3x8dHlwZW9mIHRbcl09PSJzdHJpbmcifHx0W3JdaW5zdGFuY2VvZiBTdHJpbmc/biYmKGlbcl09dFtyXSk6d2UoaVtyXSx0W3JdLG4pOmlbcl09dFtyXSk7cmV0dXJuIGl9ZnVuY3Rpb24gQShpKXtyZXR1cm4gaS5yZXBsYWNlKC9bXC1cW1xdXC9ce1x9XChcKVwqXCtcP1wuXFxcXlwkXHxdL2csIlxcJCYiKX12YXIgZXQ9eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImIzM5OyIsIi8iOiImI3gyRjsifTtmdW5jdGlvbiB0dChpKXtyZXR1cm4gdHlwZW9mIGk9PSJzdHJpbmciP2kucmVwbGFjZSgvWyY8PiInXC9dL2csZnVuY3Rpb24odCl7cmV0dXJuIGV0W3RdfSk6aX12YXIgcT10eXBlb2Ygd2luZG93PCJ1IiYmd2luZG93Lm5hdmlnYXRvciYmdHlwZW9mIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50RGF0YT4idSImJndpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50JiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIik+LTEsbnQ9WyIgIiwiLCIsIj8iLCIhIiwiOyJdO2Z1bmN0aW9uIHJ0KGksdCxuKXt0PXR8fCIiLG49bnx8IiI7dmFyIHI9bnQuZmlsdGVyKGZ1bmN0aW9uKHMpe3JldHVybiB0LmluZGV4T2Yocyk8MCYmbi5pbmRleE9mKHMpPDB9KTtpZihyLmxlbmd0aD09PTApcmV0dXJuITA7dmFyIGU9bmV3IFJlZ0V4cCgiKCIuY29uY2F0KHIubWFwKGZ1bmN0aW9uKHMpe3JldHVybiBzPT09Ij8iPyJcXD8iOnN9KS5qb2luKCJ8IiksIikiKSksYT0hZS50ZXN0KGkpO2lmKCFhKXt2YXIgbz1pLmluZGV4T2Yobik7bz4wJiYhZS50ZXN0KGkuc3Vic3RyaW5nKDAsbykpJiYoYT0hMCl9cmV0dXJuIGF9ZnVuY3Rpb24gU2UoaSx0KXt2YXIgbj1PYmplY3Qua2V5cyhpKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGkpO3QmJihyPXIuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGksZSkuZW51bWVyYWJsZX0pKSxuLnB1c2guYXBwbHkobixyKX1yZXR1cm4gbn1mdW5jdGlvbiBYKGkpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPWFyZ3VtZW50c1t0XSE9bnVsbD9hcmd1bWVudHNbdF06e307dCUyP1NlKE9iamVjdChuKSwhMCkuZm9yRWFjaChmdW5jdGlvbihyKXtGKGkscixuW3JdKX0pOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGksT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpOlNlKE9iamVjdChuKSkuZm9yRWFjaChmdW5jdGlvbihyKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxyLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobixyKSl9KX1yZXR1cm4gaX1mdW5jdGlvbiBhdChpKXt2YXIgdD1pdCgpO3JldHVybiBmdW5jdGlvbigpe3ZhciByPWooaSksZTtpZih0KXt2YXIgYT1qKHRoaXMpLmNvbnN0cnVjdG9yO2U9UmVmbGVjdC5jb25zdHJ1Y3Qocixhcmd1bWVudHMsYSl9ZWxzZSBlPXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBWKHRoaXMsZSl9fWZ1bmN0aW9uIGl0KCl7aWYodHlwZW9mIFJlZmxlY3Q+InUifHwhUmVmbGVjdC5jb25zdHJ1Y3R8fFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYodHlwZW9mIFByb3h5PT0iZnVuY3Rpb24iKXJldHVybiEwO3RyeXtyZXR1cm4gQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sZnVuY3Rpb24oKXt9KSksITB9Y2F0Y2h7cmV0dXJuITF9fWZ1bmN0aW9uIHhlKGksdCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZhcmd1bWVudHNbMl0hPT12b2lkIDA/YXJndW1lbnRzWzJdOiIuIjtpZihpKXtpZihpW3RdKXJldHVybiBpW3RdO2Zvcih2YXIgcj10LnNwbGl0KG4pLGU9aSxhPTA7YTxyLmxlbmd0aDsrK2Epe2lmKCFlfHx0eXBlb2YgZVtyW2FdXT09InN0cmluZyImJmErMTxyLmxlbmd0aClyZXR1cm47aWYoZVtyW2FdXT09PXZvaWQgMCl7Zm9yKHZhciBvPTIscz1yLnNsaWNlKGEsYStvKS5qb2luKG4pLHU9ZVtzXTt1PT09dm9pZCAwJiZyLmxlbmd0aD5hK287KW8rKyxzPXIuc2xpY2UoYSxhK28pLmpvaW4obiksdT1lW3NdO2lmKHU9PT12b2lkIDApcmV0dXJuO2lmKHU9PT1udWxsKXJldHVybiBudWxsO2lmKHQuZW5kc1dpdGgocykpe2lmKHR5cGVvZiB1PT0ic3RyaW5nIilyZXR1cm4gdTtpZihzJiZ0eXBlb2YgdVtzXT09InN0cmluZyIpcmV0dXJuIHVbc119dmFyIGw9ci5zbGljZShhK28pLmpvaW4obik7cmV0dXJuIGw/eGUodSxsLG4pOnZvaWQgMH1lPWVbclthXV19cmV0dXJuIGV9fXZhciBvdD1mdW5jdGlvbihpKXtRKG4saSk7dmFyIHQ9YXQobik7ZnVuY3Rpb24gbihyKXt2YXIgZSxhPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7bnM6WyJ0cmFuc2xhdGlvbiJdLGRlZmF1bHROUzoidHJhbnNsYXRpb24ifTtyZXR1cm4gUih0aGlzLG4pLGU9dC5jYWxsKHRoaXMpLHEmJkkuY2FsbChfKGUpKSxlLmRhdGE9cnx8e30sZS5vcHRpb25zPWEsZS5vcHRpb25zLmtleVNlcGFyYXRvcj09PXZvaWQgMCYmKGUub3B0aW9ucy5rZXlTZXBhcmF0b3I9Ii4iKSxlLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZT09PXZvaWQgMCYmKGUub3B0aW9ucy5pZ25vcmVKU09OU3RydWN0dXJlPSEwKSxlfXJldHVybiBrKG4sW3trZXk6ImFkZE5hbWVzcGFjZXMiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucy5ucy5pbmRleE9mKGUpPDAmJnRoaXMub3B0aW9ucy5ucy5wdXNoKGUpfX0se2tleToicmVtb3ZlTmFtZXNwYWNlcyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIGE9dGhpcy5vcHRpb25zLm5zLmluZGV4T2YoZSk7YT4tMSYmdGhpcy5vcHRpb25zLm5zLnNwbGljZShhLDEpfX0se2tleToiZ2V0UmVzb3VyY2UiLHZhbHVlOmZ1bmN0aW9uKGUsYSxvKXt2YXIgcz1hcmd1bWVudHMubGVuZ3RoPjMmJmFyZ3VtZW50c1szXSE9PXZvaWQgMD9hcmd1bWVudHNbM106e30sdT1zLmtleVNlcGFyYXRvciE9PXZvaWQgMD9zLmtleVNlcGFyYXRvcjp0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yLGw9cy5pZ25vcmVKU09OU3RydWN0dXJlIT09dm9pZCAwP3MuaWdub3JlSlNPTlN0cnVjdHVyZTp0aGlzLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSxjPVtlLGFdO28mJnR5cGVvZiBvIT0ic3RyaW5nIiYmKGM9Yy5jb25jYXQobykpLG8mJnR5cGVvZiBvPT0ic3RyaW5nIiYmKGM9Yy5jb25jYXQodT9vLnNwbGl0KHUpOm8pKSxlLmluZGV4T2YoIi4iKT4tMSYmKGM9ZS5zcGxpdCgiLiIpKTt2YXIgZj1aKHRoaXMuZGF0YSxjKTtyZXR1cm4gZnx8IWx8fHR5cGVvZiBvIT0ic3RyaW5nIj9mOnhlKHRoaXMuZGF0YSYmdGhpcy5kYXRhW2VdJiZ0aGlzLmRhdGFbZV1bYV0sbyx1KX19LHtrZXk6ImFkZFJlc291cmNlIix2YWx1ZTpmdW5jdGlvbihlLGEsbyxzKXt2YXIgdT1hcmd1bWVudHMubGVuZ3RoPjQmJmFyZ3VtZW50c1s0XSE9PXZvaWQgMD9hcmd1bWVudHNbNF06e3NpbGVudDohMX0sbD10aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yO2w9PT12b2lkIDAmJihsPSIuIik7dmFyIGM9W2UsYV07byYmKGM9Yy5jb25jYXQobD9vLnNwbGl0KGwpOm8pKSxlLmluZGV4T2YoIi4iKT4tMSYmKGM9ZS5zcGxpdCgiLiIpLHM9YSxhPWNbMV0pLHRoaXMuYWRkTmFtZXNwYWNlcyhhKSxiZSh0aGlzLmRhdGEsYyxzKSx1LnNpbGVudHx8dGhpcy5lbWl0KCJhZGRlZCIsZSxhLG8scyl9fSx7a2V5OiJhZGRSZXNvdXJjZXMiLHZhbHVlOmZ1bmN0aW9uKGUsYSxvKXt2YXIgcz1hcmd1bWVudHMubGVuZ3RoPjMmJmFyZ3VtZW50c1szXSE9PXZvaWQgMD9hcmd1bWVudHNbM106e3NpbGVudDohMX07Zm9yKHZhciB1IGluIG8pKHR5cGVvZiBvW3VdPT0ic3RyaW5nInx8T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseShvW3VdKT09PSJbb2JqZWN0IEFycmF5XSIpJiZ0aGlzLmFkZFJlc291cmNlKGUsYSx1LG9bdV0se3NpbGVudDohMH0pO3Muc2lsZW50fHx0aGlzLmVtaXQoImFkZGVkIixlLGEsbyl9fSx7a2V5OiJhZGRSZXNvdXJjZUJ1bmRsZSIsdmFsdWU6ZnVuY3Rpb24oZSxhLG8scyx1KXt2YXIgbD1hcmd1bWVudHMubGVuZ3RoPjUmJmFyZ3VtZW50c1s1XSE9PXZvaWQgMD9hcmd1bWVudHNbNV06e3NpbGVudDohMX0sYz1bZSxhXTtlLmluZGV4T2YoIi4iKT4tMSYmKGM9ZS5zcGxpdCgiLiIpLHM9byxvPWEsYT1jWzFdKSx0aGlzLmFkZE5hbWVzcGFjZXMoYSk7dmFyIGY9Wih0aGlzLmRhdGEsYyl8fHt9O3M/d2UoZixvLHUpOmY9WChYKHt9LGYpLG8pLGJlKHRoaXMuZGF0YSxjLGYpLGwuc2lsZW50fHx0aGlzLmVtaXQoImFkZGVkIixlLGEsbyl9fSx7a2V5OiJyZW1vdmVSZXNvdXJjZUJ1bmRsZSIsdmFsdWU6ZnVuY3Rpb24oZSxhKXt0aGlzLmhhc1Jlc291cmNlQnVuZGxlKGUsYSkmJmRlbGV0ZSB0aGlzLmRhdGFbZV1bYV0sdGhpcy5yZW1vdmVOYW1lc3BhY2VzKGEpLHRoaXMuZW1pdCgicmVtb3ZlZCIsZSxhKX19LHtrZXk6Imhhc1Jlc291cmNlQnVuZGxlIix2YWx1ZTpmdW5jdGlvbihlLGEpe3JldHVybiB0aGlzLmdldFJlc291cmNlKGUsYSkhPT12b2lkIDB9fSx7a2V5OiJnZXRSZXNvdXJjZUJ1bmRsZSIsdmFsdWU6ZnVuY3Rpb24oZSxhKXtyZXR1cm4gYXx8KGE9dGhpcy5vcHRpb25zLmRlZmF1bHROUyksdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEk9PT0idjEiP1goWCh7fSx7fSksdGhpcy5nZXRSZXNvdXJjZShlLGEpKTp0aGlzLmdldFJlc291cmNlKGUsYSl9fSx7a2V5OiJnZXREYXRhQnlMYW5ndWFnZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZGF0YVtlXX19LHtrZXk6Imhhc0xhbmd1YWdlU29tZVRyYW5zbGF0aW9ucyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIGE9dGhpcy5nZXREYXRhQnlMYW5ndWFnZShlKSxvPWEmJk9iamVjdC5rZXlzKGEpfHxbXTtyZXR1cm4hIW8uZmluZChmdW5jdGlvbihzKXtyZXR1cm4gYVtzXSYmT2JqZWN0LmtleXMoYVtzXSkubGVuZ3RoPjB9KX19LHtrZXk6InRvSlNPTiIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhfX1dKSxufShJKSxQZT17cHJvY2Vzc29yczp7fSxhZGRQb3N0UHJvY2Vzc29yOmZ1bmN0aW9uKHQpe3RoaXMucHJvY2Vzc29yc1t0Lm5hbWVdPXR9LGhhbmRsZTpmdW5jdGlvbih0LG4scixlLGEpe3ZhciBvPXRoaXM7cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbihzKXtvLnByb2Nlc3NvcnNbc10mJihuPW8ucHJvY2Vzc29yc1tzXS5wcm9jZXNzKG4scixlLGEpKX0pLG59fTtmdW5jdGlvbiBMZShpLHQpe3ZhciBuPU9iamVjdC5rZXlzKGkpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoaSk7dCYmKHI9ci5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaSxlKS5lbnVtZXJhYmxlfSkpLG4ucHVzaC5hcHBseShuLHIpfXJldHVybiBufWZ1bmN0aW9uIHcoaSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIG49YXJndW1lbnRzW3RdIT1udWxsP2FyZ3VtZW50c1t0XTp7fTt0JTI/TGUoT2JqZWN0KG4pLCEwKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe0YoaSxyLG5bcl0pfSk6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM/T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSk6TGUoT2JqZWN0KG4pKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShpLHIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLHIpKX0pfXJldHVybiBpfWZ1bmN0aW9uIHN0KGkpe3ZhciB0PXV0KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHI9aihpKSxlO2lmKHQpe3ZhciBhPWoodGhpcykuY29uc3RydWN0b3I7ZT1SZWZsZWN0LmNvbnN0cnVjdChyLGFyZ3VtZW50cyxhKX1lbHNlIGU9ci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIFYodGhpcyxlKX19ZnVuY3Rpb24gdXQoKXtpZih0eXBlb2YgUmVmbGVjdD4idSJ8fCFSZWZsZWN0LmNvbnN0cnVjdHx8UmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZih0eXBlb2YgUHJveHk9PSJmdW5jdGlvbiIpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSxmdW5jdGlvbigpe30pKSwhMH1jYXRjaHtyZXR1cm4hMX19dmFyIFJlPXt9LGtlPWZ1bmN0aW9uKGkpe1EobixpKTt2YXIgdD1zdChuKTtmdW5jdGlvbiBuKHIpe3ZhciBlLGE9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9O3JldHVybiBSKHRoaXMsbiksZT10LmNhbGwodGhpcykscSYmSS5jYWxsKF8oZSkpLHFlKFsicmVzb3VyY2VTdG9yZSIsImxhbmd1YWdlVXRpbHMiLCJwbHVyYWxSZXNvbHZlciIsImludGVycG9sYXRvciIsImJhY2tlbmRDb25uZWN0b3IiLCJpMThuRm9ybWF0IiwidXRpbHMiXSxyLF8oZSkpLGUub3B0aW9ucz1hLGUub3B0aW9ucy5rZXlTZXBhcmF0b3I9PT12b2lkIDAmJihlLm9wdGlvbnMua2V5U2VwYXJhdG9yPSIuIiksZS5sb2dnZXI9Ti5jcmVhdGUoInRyYW5zbGF0b3IiKSxlfXJldHVybiBrKG4sW3trZXk6ImNoYW5nZUxhbmd1YWdlIix2YWx1ZTpmdW5jdGlvbihlKXtlJiYodGhpcy5sYW5ndWFnZT1lKX19LHtrZXk6ImV4aXN0cyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIGE9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOntpbnRlcnBvbGF0aW9uOnt9fTtpZihlPT1udWxsKXJldHVybiExO3ZhciBvPXRoaXMucmVzb2x2ZShlLGEpO3JldHVybiBvJiZvLnJlcyE9PXZvaWQgMH19LHtrZXk6ImV4dHJhY3RGcm9tS2V5Iix2YWx1ZTpmdW5jdGlvbihlLGEpe3ZhciBvPWEubnNTZXBhcmF0b3IhPT12b2lkIDA/YS5uc1NlcGFyYXRvcjp0aGlzLm9wdGlvbnMubnNTZXBhcmF0b3I7bz09PXZvaWQgMCYmKG89IjoiKTt2YXIgcz1hLmtleVNlcGFyYXRvciE9PXZvaWQgMD9hLmtleVNlcGFyYXRvcjp0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yLHU9YS5uc3x8dGhpcy5vcHRpb25zLmRlZmF1bHROU3x8W10sbD1vJiZlLmluZGV4T2Yobyk+LTEsYz0hdGhpcy5vcHRpb25zLnVzZXJEZWZpbmVkS2V5U2VwYXJhdG9yJiYhYS5rZXlTZXBhcmF0b3ImJiF0aGlzLm9wdGlvbnMudXNlckRlZmluZWROc1NlcGFyYXRvciYmIWEubnNTZXBhcmF0b3ImJiFydChlLG8scyk7aWYobCYmIWMpe3ZhciBmPWUubWF0Y2godGhpcy5pbnRlcnBvbGF0b3IubmVzdGluZ1JlZ2V4cCk7aWYoZiYmZi5sZW5ndGg+MClyZXR1cm57a2V5OmUsbmFtZXNwYWNlczp1fTt2YXIgZz1lLnNwbGl0KG8pOyhvIT09c3x8bz09PXMmJnRoaXMub3B0aW9ucy5ucy5pbmRleE9mKGdbMF0pPi0xKSYmKHU9Zy5zaGlmdCgpKSxlPWcuam9pbihzKX1yZXR1cm4gdHlwZW9mIHU9PSJzdHJpbmciJiYodT1bdV0pLHtrZXk6ZSxuYW1lc3BhY2VzOnV9fX0se2tleToidHJhbnNsYXRlIix2YWx1ZTpmdW5jdGlvbihlLGEsbyl7dmFyIHM9dGhpcztpZihQKGEpIT09Im9iamVjdCImJnRoaXMub3B0aW9ucy5vdmVybG9hZFRyYW5zbGF0aW9uT3B0aW9uSGFuZGxlciYmKGE9dGhpcy5vcHRpb25zLm92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyKGFyZ3VtZW50cykpLGF8fChhPXt9KSxlPT1udWxsKXJldHVybiIiO0FycmF5LmlzQXJyYXkoZSl8fChlPVtTdHJpbmcoZSldKTt2YXIgdT1hLnJldHVybkRldGFpbHMhPT12b2lkIDA/YS5yZXR1cm5EZXRhaWxzOnRoaXMub3B0aW9ucy5yZXR1cm5EZXRhaWxzLGw9YS5rZXlTZXBhcmF0b3IhPT12b2lkIDA/YS5rZXlTZXBhcmF0b3I6dGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcixjPXRoaXMuZXh0cmFjdEZyb21LZXkoZVtlLmxlbmd0aC0xXSxhKSxmPWMua2V5LGc9Yy5uYW1lc3BhY2VzLHA9Z1tnLmxlbmd0aC0xXSx2PWEubG5nfHx0aGlzLmxhbmd1YWdlLHk9YS5hcHBlbmROYW1lc3BhY2VUb0NJTW9kZXx8dGhpcy5vcHRpb25zLmFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlO2lmKHYmJnYudG9Mb3dlckNhc2UoKT09PSJjaW1vZGUiKXtpZih5KXt2YXIgbT1hLm5zU2VwYXJhdG9yfHx0aGlzLm9wdGlvbnMubnNTZXBhcmF0b3I7cmV0dXJuIHU/KGQucmVzPSIiLmNvbmNhdChwKS5jb25jYXQobSkuY29uY2F0KGYpLGQpOiIiLmNvbmNhdChwKS5jb25jYXQobSkuY29uY2F0KGYpfXJldHVybiB1PyhkLnJlcz1mLGQpOmZ9dmFyIGQ9dGhpcy5yZXNvbHZlKGUsYSksaD1kJiZkLnJlcyxPPWQmJmQudXNlZEtleXx8ZixiPWQmJmQuZXhhY3RVc2VkS2V5fHxmLHg9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseShoKSxFPVsiW29iamVjdCBOdW1iZXJdIiwiW29iamVjdCBGdW5jdGlvbl0iLCJbb2JqZWN0IFJlZ0V4cF0iXSxUPWEuam9pbkFycmF5cyE9PXZvaWQgMD9hLmpvaW5BcnJheXM6dGhpcy5vcHRpb25zLmpvaW5BcnJheXMsSD0hdGhpcy5pMThuRm9ybWF0fHx0aGlzLmkxOG5Gb3JtYXQuaGFuZGxlQXNPYmplY3QsSj10eXBlb2YgaCE9InN0cmluZyImJnR5cGVvZiBoIT0iYm9vbGVhbiImJnR5cGVvZiBoIT0ibnVtYmVyIjtpZihIJiZoJiZKJiZFLmluZGV4T2YoeCk8MCYmISh0eXBlb2YgVD09InN0cmluZyImJng9PT0iW29iamVjdCBBcnJheV0iKSl7aWYoIWEucmV0dXJuT2JqZWN0cyYmIXRoaXMub3B0aW9ucy5yZXR1cm5PYmplY3RzKXt0aGlzLm9wdGlvbnMucmV0dXJuZWRPYmplY3RIYW5kbGVyfHx0aGlzLmxvZ2dlci53YXJuKCJhY2Nlc3NpbmcgYW4gb2JqZWN0IC0gYnV0IHJldHVybk9iamVjdHMgb3B0aW9ucyBpcyBub3QgZW5hYmxlZCEiKTt2YXIgVT10aGlzLm9wdGlvbnMucmV0dXJuZWRPYmplY3RIYW5kbGVyP3RoaXMub3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXIoTyxoLHcodyh7fSxhKSx7fSx7bnM6Z30pKToia2V5ICciLmNvbmNhdChmLCIgKCIpLmNvbmNhdCh0aGlzLmxhbmd1YWdlLCIpJyByZXR1cm5lZCBhbiBvYmplY3QgaW5zdGVhZCBvZiBzdHJpbmcuIik7cmV0dXJuIHU/KGQucmVzPVUsZCk6VX1pZihsKXt2YXIgQWU9eD09PSJbb2JqZWN0IEFycmF5XSIsbmU9QWU/W106e30sTXQ9QWU/YjpPO2Zvcih2YXIgTSBpbiBoKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChoLE0pKXt2YXIgS2U9IiIuY29uY2F0KE10KS5jb25jYXQobCkuY29uY2F0KE0pO25lW01dPXRoaXMudHJhbnNsYXRlKEtlLHcodyh7fSxhKSx7am9pbkFycmF5czohMSxuczpnfSkpLG5lW01dPT09S2UmJihuZVtNXT1oW01dKX1oPW5lfX1lbHNlIGlmKEgmJnR5cGVvZiBUPT0ic3RyaW5nIiYmeD09PSJbb2JqZWN0IEFycmF5XSIpaD1oLmpvaW4oVCksaCYmKGg9dGhpcy5leHRlbmRUcmFuc2xhdGlvbihoLGUsYSxvKSk7ZWxzZXt2YXIgcmU9ITEsej0hMSxVZT1hLmNvdW50IT09dm9pZCAwJiZ0eXBlb2YgYS5jb3VudCE9InN0cmluZyIsZmU9bi5oYXNEZWZhdWx0VmFsdWUoYSksQnQ9VWU/dGhpcy5wbHVyYWxSZXNvbHZlci5nZXRTdWZmaXgodixhLmNvdW50LGEpOiIiLFc9YVsiZGVmYXVsdFZhbHVlIi5jb25jYXQoQnQpXXx8YS5kZWZhdWx0VmFsdWU7IXRoaXMuaXNWYWxpZExvb2t1cChoKSYmZmUmJihyZT0hMCxoPVcpLHRoaXMuaXNWYWxpZExvb2t1cChoKXx8KHo9ITAsaD1mKTt2YXIgVnQ9YS5taXNzaW5nS2V5Tm9WYWx1ZUZhbGxiYWNrVG9LZXl8fHRoaXMub3B0aW9ucy5taXNzaW5nS2V5Tm9WYWx1ZUZhbGxiYWNrVG9LZXksJHQ9VnQmJno/dm9pZCAwOmgsWT1mZSYmVyE9PWgmJnRoaXMub3B0aW9ucy51cGRhdGVNaXNzaW5nO2lmKHp8fHJlfHxZKXtpZih0aGlzLmxvZ2dlci5sb2coWT8idXBkYXRlS2V5IjoibWlzc2luZ0tleSIsdixwLGYsWT9XOmgpLGwpe3ZhciBNZT10aGlzLnJlc29sdmUoZix3KHcoe30sYSkse30se2tleVNlcGFyYXRvcjohMX0pKTtNZSYmTWUucmVzJiZ0aGlzLmxvZ2dlci53YXJuKCJTZWVtcyB0aGUgbG9hZGVkIHRyYW5zbGF0aW9ucyB3ZXJlIGluIGZsYXQgSlNPTiBmb3JtYXQgaW5zdGVhZCBvZiBuZXN0ZWQuIEVpdGhlciBzZXQga2V5U2VwYXJhdG9yOiBmYWxzZSBvbiBpbml0IG9yIG1ha2Ugc3VyZSB5b3VyIHRyYW5zbGF0aW9ucyBhcmUgcHVibGlzaGVkIGluIG5lc3RlZCBmb3JtYXQuIil9dmFyIEc9W10sYWU9dGhpcy5sYW5ndWFnZVV0aWxzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nLGEubG5nfHx0aGlzLmxhbmd1YWdlKTtpZih0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdUbz09PSJmYWxsYmFjayImJmFlJiZhZVswXSlmb3IodmFyIGxlPTA7bGU8YWUubGVuZ3RoO2xlKyspRy5wdXNoKGFlW2xlXSk7ZWxzZSB0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdUbz09PSJhbGwiP0c9dGhpcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShhLmxuZ3x8dGhpcy5sYW5ndWFnZSk6Ry5wdXNoKGEubG5nfHx0aGlzLmxhbmd1YWdlKTt2YXIgQmU9ZnVuY3Rpb24oQixnZSxWZSl7dmFyICRlPWZlJiZWZSE9PWg/VmU6JHQ7cy5vcHRpb25zLm1pc3NpbmdLZXlIYW5kbGVyP3Mub3B0aW9ucy5taXNzaW5nS2V5SGFuZGxlcihCLHAsZ2UsJGUsWSxhKTpzLmJhY2tlbmRDb25uZWN0b3ImJnMuYmFja2VuZENvbm5lY3Rvci5zYXZlTWlzc2luZyYmcy5iYWNrZW5kQ29ubmVjdG9yLnNhdmVNaXNzaW5nKEIscCxnZSwkZSxZLGEpLHMuZW1pdCgibWlzc2luZ0tleSIsQixwLGdlLGgpfTt0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmcmJih0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdQbHVyYWxzJiZVZT9HLmZvckVhY2goZnVuY3Rpb24oY2Upe3MucGx1cmFsUmVzb2x2ZXIuZ2V0U3VmZml4ZXMoY2UsYSkuZm9yRWFjaChmdW5jdGlvbihCKXtCZShbY2VdLGYrQixhWyJkZWZhdWx0VmFsdWUiLmNvbmNhdChCKV18fFcpfSl9KTpCZShHLGYsVykpfWg9dGhpcy5leHRlbmRUcmFuc2xhdGlvbihoLGUsYSxkLG8pLHomJmg9PT1mJiZ0aGlzLm9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9NaXNzaW5nS2V5JiYoaD0iIi5jb25jYXQocCwiOiIpLmNvbmNhdChmKSksKHp8fHJlKSYmdGhpcy5vcHRpb25zLnBhcnNlTWlzc2luZ0tleUhhbmRsZXImJih0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSE9PSJ2MSI/aD10aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlcih0aGlzLm9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9NaXNzaW5nS2V5PyIiLmNvbmNhdChwLCI6IikuY29uY2F0KGYpOmYscmU/aDp2b2lkIDApOmg9dGhpcy5vcHRpb25zLnBhcnNlTWlzc2luZ0tleUhhbmRsZXIoaCkpfXJldHVybiB1PyhkLnJlcz1oLGQpOmh9fSx7a2V5OiJleHRlbmRUcmFuc2xhdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSxhLG8scyx1KXt2YXIgbD10aGlzO2lmKHRoaXMuaTE4bkZvcm1hdCYmdGhpcy5pMThuRm9ybWF0LnBhcnNlKWU9dGhpcy5pMThuRm9ybWF0LnBhcnNlKGUsdyh3KHt9LHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMpLG8pLHMudXNlZExuZyxzLnVzZWROUyxzLnVzZWRLZXkse3Jlc29sdmVkOnN9KTtlbHNlIGlmKCFvLnNraXBJbnRlcnBvbGF0aW9uKXtvLmludGVycG9sYXRpb24mJnRoaXMuaW50ZXJwb2xhdG9yLmluaXQodyh3KHt9LG8pLHtpbnRlcnBvbGF0aW9uOncodyh7fSx0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbiksby5pbnRlcnBvbGF0aW9uKX0pKTt2YXIgYz10eXBlb2YgZT09InN0cmluZyImJihvJiZvLmludGVycG9sYXRpb24mJm8uaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMhPT12b2lkIDA/by5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlczp0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMpLGY7aWYoYyl7dmFyIGc9ZS5tYXRjaCh0aGlzLmludGVycG9sYXRvci5uZXN0aW5nUmVnZXhwKTtmPWcmJmcubGVuZ3RofXZhciBwPW8ucmVwbGFjZSYmdHlwZW9mIG8ucmVwbGFjZSE9InN0cmluZyI/by5yZXBsYWNlOm87aWYodGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcyYmKHA9dyh3KHt9LHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMpLHApKSxlPXRoaXMuaW50ZXJwb2xhdG9yLmludGVycG9sYXRlKGUscCxvLmxuZ3x8dGhpcy5sYW5ndWFnZSxvKSxjKXt2YXIgdj1lLm1hdGNoKHRoaXMuaW50ZXJwb2xhdG9yLm5lc3RpbmdSZWdleHApLHk9diYmdi5sZW5ndGg7Zjx5JiYoby5uZXN0PSExKX1vLm5lc3QhPT0hMSYmKGU9dGhpcy5pbnRlcnBvbGF0b3IubmVzdChlLGZ1bmN0aW9uKCl7Zm9yKHZhciBoPWFyZ3VtZW50cy5sZW5ndGgsTz1uZXcgQXJyYXkoaCksYj0wO2I8aDtiKyspT1tiXT1hcmd1bWVudHNbYl07cmV0dXJuIHUmJnVbMF09PT1PWzBdJiYhby5jb250ZXh0PyhsLmxvZ2dlci53YXJuKCJJdCBzZWVtcyB5b3UgYXJlIG5lc3RpbmcgcmVjdXJzaXZlbHkga2V5OiAiLmNvbmNhdChPWzBdLCIgaW4ga2V5OiAiKS5jb25jYXQoYVswXSkpLG51bGwpOmwudHJhbnNsYXRlLmFwcGx5KGwsTy5jb25jYXQoW2FdKSl9LG8pKSxvLmludGVycG9sYXRpb24mJnRoaXMuaW50ZXJwb2xhdG9yLnJlc2V0KCl9dmFyIG09by5wb3N0UHJvY2Vzc3x8dGhpcy5vcHRpb25zLnBvc3RQcm9jZXNzLGQ9dHlwZW9mIG09PSJzdHJpbmciP1ttXTptO3JldHVybiBlIT1udWxsJiZkJiZkLmxlbmd0aCYmby5hcHBseVBvc3RQcm9jZXNzb3IhPT0hMSYmKGU9UGUuaGFuZGxlKGQsZSxhLHRoaXMub3B0aW9ucyYmdGhpcy5vcHRpb25zLnBvc3RQcm9jZXNzUGFzc1Jlc29sdmVkP3coe2kxOG5SZXNvbHZlZDpzfSxvKTpvLHRoaXMpKSxlfX0se2tleToicmVzb2x2ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIGE9dGhpcyxvPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7fSxzLHUsbCxjLGY7cmV0dXJuIHR5cGVvZiBlPT0ic3RyaW5nIiYmKGU9W2VdKSxlLmZvckVhY2goZnVuY3Rpb24oZyl7aWYoIWEuaXNWYWxpZExvb2t1cChzKSl7dmFyIHA9YS5leHRyYWN0RnJvbUtleShnLG8pLHY9cC5rZXk7dT12O3ZhciB5PXAubmFtZXNwYWNlczthLm9wdGlvbnMuZmFsbGJhY2tOUyYmKHk9eS5jb25jYXQoYS5vcHRpb25zLmZhbGxiYWNrTlMpKTt2YXIgbT1vLmNvdW50IT09dm9pZCAwJiZ0eXBlb2Ygby5jb3VudCE9InN0cmluZyIsZD1tJiYhby5vcmRpbmFsJiZvLmNvdW50PT09MCYmYS5wbHVyYWxSZXNvbHZlci5zaG91bGRVc2VJbnRsQXBpKCksaD1vLmNvbnRleHQhPT12b2lkIDAmJih0eXBlb2Ygby5jb250ZXh0PT0ic3RyaW5nInx8dHlwZW9mIG8uY29udGV4dD09Im51bWJlciIpJiZvLmNvbnRleHQhPT0iIixPPW8ubG5ncz9vLmxuZ3M6YS5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShvLmxuZ3x8YS5sYW5ndWFnZSxvLmZhbGxiYWNrTG5nKTt5LmZvckVhY2goZnVuY3Rpb24oYil7YS5pc1ZhbGlkTG9va3VwKHMpfHwoZj1iLCFSZVsiIi5jb25jYXQoT1swXSwiLSIpLmNvbmNhdChiKV0mJmEudXRpbHMmJmEudXRpbHMuaGFzTG9hZGVkTmFtZXNwYWNlJiYhYS51dGlscy5oYXNMb2FkZWROYW1lc3BhY2UoZikmJihSZVsiIi5jb25jYXQoT1swXSwiLSIpLmNvbmNhdChiKV09ITAsYS5sb2dnZXIud2Fybigna2V5ICInLmNvbmNhdCh1LCciIGZvciBsYW5ndWFnZXMgIicpLmNvbmNhdChPLmpvaW4oIiwgIiksYCIgd29uJ3QgZ2V0IHJlc29sdmVkIGFzIG5hbWVzcGFjZSAiYCkuY29uY2F0KGYsJyIgd2FzIG5vdCB5ZXQgbG9hZGVkJyksIlRoaXMgbWVhbnMgc29tZXRoaW5nIElTIFdST05HIGluIHlvdXIgc2V0dXAuIFlvdSBhY2Nlc3MgdGhlIHQgZnVuY3Rpb24gYmVmb3JlIGkxOG5leHQuaW5pdCAvIGkxOG5leHQubG9hZE5hbWVzcGFjZSAvIGkxOG5leHQuY2hhbmdlTGFuZ3VhZ2Ugd2FzIGRvbmUuIFdhaXQgZm9yIHRoZSBjYWxsYmFjayBvciBQcm9taXNlIHRvIHJlc29sdmUgYmVmb3JlIGFjY2Vzc2luZyBpdCEhISIpKSxPLmZvckVhY2goZnVuY3Rpb24oeCl7aWYoIWEuaXNWYWxpZExvb2t1cChzKSl7Yz14O3ZhciBFPVt2XTtpZihhLmkxOG5Gb3JtYXQmJmEuaTE4bkZvcm1hdC5hZGRMb29rdXBLZXlzKWEuaTE4bkZvcm1hdC5hZGRMb29rdXBLZXlzKEUsdix4LGIsbyk7ZWxzZXt2YXIgVDttJiYoVD1hLnBsdXJhbFJlc29sdmVyLmdldFN1ZmZpeCh4LG8uY291bnQsbykpO3ZhciBIPSIiLmNvbmNhdChhLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yLCJ6ZXJvIik7aWYobSYmKEUucHVzaCh2K1QpLGQmJkUucHVzaCh2K0gpKSxoKXt2YXIgSj0iIi5jb25jYXQodikuY29uY2F0KGEub3B0aW9ucy5jb250ZXh0U2VwYXJhdG9yKS5jb25jYXQoby5jb250ZXh0KTtFLnB1c2goSiksbSYmKEUucHVzaChKK1QpLGQmJkUucHVzaChKK0gpKX19Zm9yKHZhciBVO1U9RS5wb3AoKTspYS5pc1ZhbGlkTG9va3VwKHMpfHwobD1VLHM9YS5nZXRSZXNvdXJjZSh4LGIsVSxvKSl9fSkpfSl9fSkse3JlczpzLHVzZWRLZXk6dSxleGFjdFVzZWRLZXk6bCx1c2VkTG5nOmMsdXNlZE5TOmZ9fX0se2tleToiaXNWYWxpZExvb2t1cCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT12b2lkIDAmJiEoIXRoaXMub3B0aW9ucy5yZXR1cm5OdWxsJiZlPT09bnVsbCkmJiEoIXRoaXMub3B0aW9ucy5yZXR1cm5FbXB0eVN0cmluZyYmZT09PSIiKX19LHtrZXk6ImdldFJlc291cmNlIix2YWx1ZTpmdW5jdGlvbihlLGEsbyl7dmFyIHM9YXJndW1lbnRzLmxlbmd0aD4zJiZhcmd1bWVudHNbM10hPT12b2lkIDA/YXJndW1lbnRzWzNdOnt9O3JldHVybiB0aGlzLmkxOG5Gb3JtYXQmJnRoaXMuaTE4bkZvcm1hdC5nZXRSZXNvdXJjZT90aGlzLmkxOG5Gb3JtYXQuZ2V0UmVzb3VyY2UoZSxhLG8scyk6dGhpcy5yZXNvdXJjZVN0b3JlLmdldFJlc291cmNlKGUsYSxvLHMpfX1dLFt7a2V5OiJoYXNEZWZhdWx0VmFsdWUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBhPSJkZWZhdWx0VmFsdWUiO2Zvcih2YXIgbyBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG8pJiZhPT09by5zdWJzdHJpbmcoMCxhLmxlbmd0aCkmJmVbb10hPT12b2lkIDApcmV0dXJuITA7cmV0dXJuITF9fV0pLG59KEkpO2Z1bmN0aW9uIHNlKGkpe3JldHVybiBpLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2kuc2xpY2UoMSl9dmFyIGZ0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gaSh0KXtSKHRoaXMsaSksdGhpcy5vcHRpb25zPXQsdGhpcy5zdXBwb3J0ZWRMbmdzPXRoaXMub3B0aW9ucy5zdXBwb3J0ZWRMbmdzfHwhMSx0aGlzLmxvZ2dlcj1OLmNyZWF0ZSgibGFuZ3VhZ2VVdGlscyIpfXJldHVybiBrKGksW3trZXk6ImdldFNjcmlwdFBhcnRGcm9tQ29kZSIsdmFsdWU6ZnVuY3Rpb24obil7aWYoIW58fG4uaW5kZXhPZigiLSIpPDApcmV0dXJuIG51bGw7dmFyIHI9bi5zcGxpdCgiLSIpO3JldHVybiByLmxlbmd0aD09PTJ8fChyLnBvcCgpLHJbci5sZW5ndGgtMV0udG9Mb3dlckNhc2UoKT09PSJ4Iik/bnVsbDp0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShyLmpvaW4oIi0iKSl9fSx7a2V5OiJnZXRMYW5ndWFnZVBhcnRGcm9tQ29kZSIsdmFsdWU6ZnVuY3Rpb24obil7aWYoIW58fG4uaW5kZXhPZigiLSIpPDApcmV0dXJuIG47dmFyIHI9bi5zcGxpdCgiLSIpO3JldHVybiB0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShyWzBdKX19LHtrZXk6ImZvcm1hdExhbmd1YWdlQ29kZSIsdmFsdWU6ZnVuY3Rpb24obil7aWYodHlwZW9mIG49PSJzdHJpbmciJiZuLmluZGV4T2YoIi0iKT4tMSl7dmFyIHI9WyJoYW5zIiwiaGFudCIsImxhdG4iLCJjeXJsIiwiY2FucyIsIm1vbmciLCJhcmFiIl0sZT1uLnNwbGl0KCItIik7cmV0dXJuIHRoaXMub3B0aW9ucy5sb3dlckNhc2VMbmc/ZT1lLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpfSk6ZS5sZW5ndGg9PT0yPyhlWzBdPWVbMF0udG9Mb3dlckNhc2UoKSxlWzFdPWVbMV0udG9VcHBlckNhc2UoKSxyLmluZGV4T2YoZVsxXS50b0xvd2VyQ2FzZSgpKT4tMSYmKGVbMV09c2UoZVsxXS50b0xvd2VyQ2FzZSgpKSkpOmUubGVuZ3RoPT09MyYmKGVbMF09ZVswXS50b0xvd2VyQ2FzZSgpLGVbMV0ubGVuZ3RoPT09MiYmKGVbMV09ZVsxXS50b1VwcGVyQ2FzZSgpKSxlWzBdIT09InNnbiImJmVbMl0ubGVuZ3RoPT09MiYmKGVbMl09ZVsyXS50b1VwcGVyQ2FzZSgpKSxyLmluZGV4T2YoZVsxXS50b0xvd2VyQ2FzZSgpKT4tMSYmKGVbMV09c2UoZVsxXS50b0xvd2VyQ2FzZSgpKSksci5pbmRleE9mKGVbMl0udG9Mb3dlckNhc2UoKSk+LTEmJihlWzJdPXNlKGVbMl0udG9Mb3dlckNhc2UoKSkpKSxlLmpvaW4oIi0iKX1yZXR1cm4gdGhpcy5vcHRpb25zLmNsZWFuQ29kZXx8dGhpcy5vcHRpb25zLmxvd2VyQ2FzZUxuZz9uLnRvTG93ZXJDYXNlKCk6bn19LHtrZXk6ImlzU3VwcG9ydGVkQ29kZSIsdmFsdWU6ZnVuY3Rpb24obil7cmV0dXJuKHRoaXMub3B0aW9ucy5sb2FkPT09Imxhbmd1YWdlT25seSJ8fHRoaXMub3B0aW9ucy5ub25FeHBsaWNpdFN1cHBvcnRlZExuZ3MpJiYobj10aGlzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKG4pKSwhdGhpcy5zdXBwb3J0ZWRMbmdzfHwhdGhpcy5zdXBwb3J0ZWRMbmdzLmxlbmd0aHx8dGhpcy5zdXBwb3J0ZWRMbmdzLmluZGV4T2Yobik+LTF9fSx7a2V5OiJnZXRCZXN0TWF0Y2hGcm9tQ29kZXMiLHZhbHVlOmZ1bmN0aW9uKG4pe3ZhciByPXRoaXM7aWYoIW4pcmV0dXJuIG51bGw7dmFyIGU7cmV0dXJuIG4uZm9yRWFjaChmdW5jdGlvbihhKXtpZighZSl7dmFyIG89ci5mb3JtYXRMYW5ndWFnZUNvZGUoYSk7KCFyLm9wdGlvbnMuc3VwcG9ydGVkTG5nc3x8ci5pc1N1cHBvcnRlZENvZGUobykpJiYoZT1vKX19KSwhZSYmdGhpcy5vcHRpb25zLnN1cHBvcnRlZExuZ3MmJm4uZm9yRWFjaChmdW5jdGlvbihhKXtpZighZSl7dmFyIG89ci5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShhKTtpZihyLmlzU3VwcG9ydGVkQ29kZShvKSlyZXR1cm4gZT1vO2U9ci5vcHRpb25zLnN1cHBvcnRlZExuZ3MuZmluZChmdW5jdGlvbihzKXtpZihzLmluZGV4T2Yobyk9PT0wKXJldHVybiBzfSl9fSksZXx8KGU9dGhpcy5nZXRGYWxsYmFja0NvZGVzKHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZylbMF0pLGV9fSx7a2V5OiJnZXRGYWxsYmFja0NvZGVzIix2YWx1ZTpmdW5jdGlvbihuLHIpe2lmKCFuKXJldHVybltdO2lmKHR5cGVvZiBuPT0iZnVuY3Rpb24iJiYobj1uKHIpKSx0eXBlb2Ygbj09InN0cmluZyImJihuPVtuXSksT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseShuKT09PSJbb2JqZWN0IEFycmF5XSIpcmV0dXJuIG47aWYoIXIpcmV0dXJuIG4uZGVmYXVsdHx8W107dmFyIGU9bltyXTtyZXR1cm4gZXx8KGU9blt0aGlzLmdldFNjcmlwdFBhcnRGcm9tQ29kZShyKV0pLGV8fChlPW5bdGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUocildKSxlfHwoZT1uW3RoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUocildKSxlfHwoZT1uLmRlZmF1bHQpLGV8fFtdfX0se2tleToidG9SZXNvbHZlSGllcmFyY2h5Iix2YWx1ZTpmdW5jdGlvbihuLHIpe3ZhciBlPXRoaXMsYT10aGlzLmdldEZhbGxiYWNrQ29kZXMocnx8dGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nfHxbXSxuKSxvPVtdLHM9ZnVuY3Rpb24obCl7bCYmKGUuaXNTdXBwb3J0ZWRDb2RlKGwpP28ucHVzaChsKTplLmxvZ2dlci53YXJuKCJyZWplY3RpbmcgbGFuZ3VhZ2UgY29kZSBub3QgZm91bmQgaW4gc3VwcG9ydGVkTG5nczogIi5jb25jYXQobCkpKX07cmV0dXJuIHR5cGVvZiBuPT0ic3RyaW5nIiYmbi5pbmRleE9mKCItIik+LTE/KHRoaXMub3B0aW9ucy5sb2FkIT09Imxhbmd1YWdlT25seSImJnModGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUobikpLHRoaXMub3B0aW9ucy5sb2FkIT09Imxhbmd1YWdlT25seSImJnRoaXMub3B0aW9ucy5sb2FkIT09ImN1cnJlbnRPbmx5IiYmcyh0aGlzLmdldFNjcmlwdFBhcnRGcm9tQ29kZShuKSksdGhpcy5vcHRpb25zLmxvYWQhPT0iY3VycmVudE9ubHkiJiZzKHRoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUobikpKTp0eXBlb2Ygbj09InN0cmluZyImJnModGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUobikpLGEuZm9yRWFjaChmdW5jdGlvbih1KXtvLmluZGV4T2YodSk8MCYmcyhlLmZvcm1hdExhbmd1YWdlQ29kZSh1KSl9KSxvfX1dKSxpfSgpLGx0PVt7bG5nczpbImFjaCIsImFrIiwiYW0iLCJhcm4iLCJiciIsImZpbCIsImd1biIsImxuIiwibWZlIiwibWciLCJtaSIsIm9jIiwicHQiLCJwdC1CUiIsInRnIiwidGwiLCJ0aSIsInRyIiwidXoiLCJ3YSJdLG5yOlsxLDJdLGZjOjF9LHtsbmdzOlsiYWYiLCJhbiIsImFzdCIsImF6IiwiYmciLCJibiIsImNhIiwiZGEiLCJkZSIsImRldiIsImVsIiwiZW4iLCJlbyIsImVzIiwiZXQiLCJldSIsImZpIiwiZm8iLCJmdXIiLCJmeSIsImdsIiwiZ3UiLCJoYSIsImhpIiwiaHUiLCJoeSIsImlhIiwiaXQiLCJrayIsImtuIiwia3UiLCJsYiIsIm1haSIsIm1sIiwibW4iLCJtciIsIm5haCIsIm5hcCIsIm5iIiwibmUiLCJubCIsIm5uIiwibm8iLCJuc28iLCJwYSIsInBhcCIsInBtcyIsInBzIiwicHQtUFQiLCJybSIsInNjbyIsInNlIiwic2kiLCJzbyIsInNvbiIsInNxIiwic3YiLCJzdyIsInRhIiwidGUiLCJ0ayIsInVyIiwieW8iXSxucjpbMSwyXSxmYzoyfSx7bG5nczpbImF5IiwiYm8iLCJjZ2ciLCJmYSIsImh0IiwiaWQiLCJqYSIsImpibyIsImthIiwia20iLCJrbyIsImt5IiwibG8iLCJtcyIsInNhaCIsInN1IiwidGgiLCJ0dCIsInVnIiwidmkiLCJ3byIsInpoIl0sbnI6WzFdLGZjOjN9LHtsbmdzOlsiYmUiLCJicyIsImNuciIsImR6IiwiaHIiLCJydSIsInNyIiwidWsiXSxucjpbMSwyLDVdLGZjOjR9LHtsbmdzOlsiYXIiXSxucjpbMCwxLDIsMywxMSwxMDBdLGZjOjV9LHtsbmdzOlsiY3MiLCJzayJdLG5yOlsxLDIsNV0sZmM6Nn0se2xuZ3M6WyJjc2IiLCJwbCJdLG5yOlsxLDIsNV0sZmM6N30se2xuZ3M6WyJjeSJdLG5yOlsxLDIsMyw4XSxmYzo4fSx7bG5nczpbImZyIl0sbnI6WzEsMl0sZmM6OX0se2xuZ3M6WyJnYSJdLG5yOlsxLDIsMyw3LDExXSxmYzoxMH0se2xuZ3M6WyJnZCJdLG5yOlsxLDIsMywyMF0sZmM6MTF9LHtsbmdzOlsiaXMiXSxucjpbMSwyXSxmYzoxMn0se2xuZ3M6WyJqdiJdLG5yOlswLDFdLGZjOjEzfSx7bG5nczpbImt3Il0sbnI6WzEsMiwzLDRdLGZjOjE0fSx7bG5nczpbImx0Il0sbnI6WzEsMiwxMF0sZmM6MTV9LHtsbmdzOlsibHYiXSxucjpbMSwyLDBdLGZjOjE2fSx7bG5nczpbIm1rIl0sbnI6WzEsMl0sZmM6MTd9LHtsbmdzOlsibW5rIl0sbnI6WzAsMSwyXSxmYzoxOH0se2xuZ3M6WyJtdCJdLG5yOlsxLDIsMTEsMjBdLGZjOjE5fSx7bG5nczpbIm9yIl0sbnI6WzIsMV0sZmM6Mn0se2xuZ3M6WyJybyJdLG5yOlsxLDIsMjBdLGZjOjIwfSx7bG5nczpbInNsIl0sbnI6WzUsMSwyLDNdLGZjOjIxfSx7bG5nczpbImhlIiwiaXciXSxucjpbMSwyLDIwLDIxXSxmYzoyMn1dLGN0PXsxOmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodD4xKX0sMjpmdW5jdGlvbih0KXtyZXR1cm4gTnVtYmVyKHQhPTEpfSwzOmZ1bmN0aW9uKHQpe3JldHVybiAwfSw0OmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodCUxMD09MSYmdCUxMDAhPTExPzA6dCUxMD49MiYmdCUxMDw9NCYmKHQlMTAwPDEwfHx0JTEwMD49MjApPzE6Mil9LDU6ZnVuY3Rpb24odCl7cmV0dXJuIE51bWJlcih0PT0wPzA6dD09MT8xOnQ9PTI/Mjp0JTEwMD49MyYmdCUxMDA8PTEwPzM6dCUxMDA+PTExPzQ6NSl9LDY6ZnVuY3Rpb24odCl7cmV0dXJuIE51bWJlcih0PT0xPzA6dD49MiYmdDw9ND8xOjIpfSw3OmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodD09MT8wOnQlMTA+PTImJnQlMTA8PTQmJih0JTEwMDwxMHx8dCUxMDA+PTIwKT8xOjIpfSw4OmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodD09MT8wOnQ9PTI/MTp0IT04JiZ0IT0xMT8yOjMpfSw5OmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodD49Mil9LDEwOmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodD09MT8wOnQ9PTI/MTp0PDc/Mjp0PDExPzM6NCl9LDExOmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodD09MXx8dD09MTE/MDp0PT0yfHx0PT0xMj8xOnQ+MiYmdDwyMD8yOjMpfSwxMjpmdW5jdGlvbih0KXtyZXR1cm4gTnVtYmVyKHQlMTAhPTF8fHQlMTAwPT0xMSl9LDEzOmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodCE9PTApfSwxNDpmdW5jdGlvbih0KXtyZXR1cm4gTnVtYmVyKHQ9PTE/MDp0PT0yPzE6dD09Mz8yOjMpfSwxNTpmdW5jdGlvbih0KXtyZXR1cm4gTnVtYmVyKHQlMTA9PTEmJnQlMTAwIT0xMT8wOnQlMTA+PTImJih0JTEwMDwxMHx8dCUxMDA+PTIwKT8xOjIpfSwxNjpmdW5jdGlvbih0KXtyZXR1cm4gTnVtYmVyKHQlMTA9PTEmJnQlMTAwIT0xMT8wOnQhPT0wPzE6Mil9LDE3OmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodD09MXx8dCUxMD09MSYmdCUxMDAhPTExPzA6MSl9LDE4OmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodD09MD8wOnQ9PTE/MToyKX0sMTk6ZnVuY3Rpb24odCl7cmV0dXJuIE51bWJlcih0PT0xPzA6dD09MHx8dCUxMDA+MSYmdCUxMDA8MTE/MTp0JTEwMD4xMCYmdCUxMDA8MjA/MjozKX0sMjA6ZnVuY3Rpb24odCl7cmV0dXJuIE51bWJlcih0PT0xPzA6dD09MHx8dCUxMDA+MCYmdCUxMDA8MjA/MToyKX0sMjE6ZnVuY3Rpb24odCl7cmV0dXJuIE51bWJlcih0JTEwMD09MT8xOnQlMTAwPT0yPzI6dCUxMDA9PTN8fHQlMTAwPT00PzM6MCl9LDIyOmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodD09MT8wOnQ9PTI/MToodDwwfHx0PjEwKSYmdCUxMD09MD8yOjMpfX0sZ3Q9WyJ2MSIsInYyIiwidjMiXSxqZT17emVybzowLG9uZToxLHR3bzoyLGZldzozLG1hbnk6NCxvdGhlcjo1fTtmdW5jdGlvbiBwdCgpe3ZhciBpPXt9O3JldHVybiBsdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QubG5ncy5mb3JFYWNoKGZ1bmN0aW9uKG4pe2lbbl09e251bWJlcnM6dC5ucixwbHVyYWxzOmN0W3QuZmNdfX0pfSksaX12YXIgZHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKHQpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7fTtSKHRoaXMsaSksdGhpcy5sYW5ndWFnZVV0aWxzPXQsdGhpcy5vcHRpb25zPW4sdGhpcy5sb2dnZXI9Ti5jcmVhdGUoInBsdXJhbFJlc29sdmVyIiksKCF0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT058fHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTj09PSJ2NCIpJiYodHlwZW9mIEludGw+InUifHwhSW50bC5QbHVyYWxSdWxlcykmJih0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT049InYzIix0aGlzLmxvZ2dlci5lcnJvcigiWW91ciBlbnZpcm9ubWVudCBzZWVtcyBub3QgdG8gYmUgSW50bCBBUEkgY29tcGF0aWJsZSwgdXNlIGFuIEludGwuUGx1cmFsUnVsZXMgcG9seWZpbGwuIFdpbGwgZmFsbGJhY2sgdG8gdGhlIGNvbXBhdGliaWxpdHlKU09OIHYzIGZvcm1hdCBoYW5kbGluZy4iKSksdGhpcy5ydWxlcz1wdCgpfXJldHVybiBrKGksW3trZXk6ImFkZFJ1bGUiLHZhbHVlOmZ1bmN0aW9uKG4scil7dGhpcy5ydWxlc1tuXT1yfX0se2tleToiZ2V0UnVsZSIsdmFsdWU6ZnVuY3Rpb24obil7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9O2lmKHRoaXMuc2hvdWxkVXNlSW50bEFwaSgpKXRyeXtyZXR1cm4gbmV3IEludGwuUGx1cmFsUnVsZXMobix7dHlwZTpyLm9yZGluYWw/Im9yZGluYWwiOiJjYXJkaW5hbCJ9KX1jYXRjaHtyZXR1cm59cmV0dXJuIHRoaXMucnVsZXNbbl18fHRoaXMucnVsZXNbdGhpcy5sYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKG4pXX19LHtrZXk6Im5lZWRzUGx1cmFsIix2YWx1ZTpmdW5jdGlvbihuKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06e30sZT10aGlzLmdldFJ1bGUobixyKTtyZXR1cm4gdGhpcy5zaG91bGRVc2VJbnRsQXBpKCk/ZSYmZS5yZXNvbHZlZE9wdGlvbnMoKS5wbHVyYWxDYXRlZ29yaWVzLmxlbmd0aD4xOmUmJmUubnVtYmVycy5sZW5ndGg+MX19LHtrZXk6ImdldFBsdXJhbEZvcm1zT2ZLZXkiLHZhbHVlOmZ1bmN0aW9uKG4scil7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4yJiZhcmd1bWVudHNbMl0hPT12b2lkIDA/YXJndW1lbnRzWzJdOnt9O3JldHVybiB0aGlzLmdldFN1ZmZpeGVzKG4sZSkubWFwKGZ1bmN0aW9uKGEpe3JldHVybiIiLmNvbmNhdChyKS5jb25jYXQoYSl9KX19LHtrZXk6ImdldFN1ZmZpeGVzIix2YWx1ZTpmdW5jdGlvbihuKXt2YXIgcj10aGlzLGU9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9LGE9dGhpcy5nZXRSdWxlKG4sZSk7cmV0dXJuIGE/dGhpcy5zaG91bGRVc2VJbnRsQXBpKCk/YS5yZXNvbHZlZE9wdGlvbnMoKS5wbHVyYWxDYXRlZ29yaWVzLnNvcnQoZnVuY3Rpb24obyxzKXtyZXR1cm4gamVbb10tamVbc119KS5tYXAoZnVuY3Rpb24obyl7cmV0dXJuIiIuY29uY2F0KHIub3B0aW9ucy5wcmVwZW5kKS5jb25jYXQobyl9KTphLm51bWJlcnMubWFwKGZ1bmN0aW9uKG8pe3JldHVybiByLmdldFN1ZmZpeChuLG8sZSl9KTpbXX19LHtrZXk6ImdldFN1ZmZpeCIsdmFsdWU6ZnVuY3Rpb24obixyKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjImJmFyZ3VtZW50c1syXSE9PXZvaWQgMD9hcmd1bWVudHNbMl06e30sYT10aGlzLmdldFJ1bGUobixlKTtyZXR1cm4gYT90aGlzLnNob3VsZFVzZUludGxBcGkoKT8iIi5jb25jYXQodGhpcy5vcHRpb25zLnByZXBlbmQpLmNvbmNhdChhLnNlbGVjdChyKSk6dGhpcy5nZXRTdWZmaXhSZXRyb0NvbXBhdGlibGUoYSxyKToodGhpcy5sb2dnZXIud2Fybigibm8gcGx1cmFsIHJ1bGUgZm91bmQgZm9yOiAiLmNvbmNhdChuKSksIiIpfX0se2tleToiZ2V0U3VmZml4UmV0cm9Db21wYXRpYmxlIix2YWx1ZTpmdW5jdGlvbihuLHIpe3ZhciBlPXRoaXMsYT1uLm5vQWJzP24ucGx1cmFscyhyKTpuLnBsdXJhbHMoTWF0aC5hYnMocikpLG89bi5udW1iZXJzW2FdO3RoaXMub3B0aW9ucy5zaW1wbGlmeVBsdXJhbFN1ZmZpeCYmbi5udW1iZXJzLmxlbmd0aD09PTImJm4ubnVtYmVyc1swXT09PTEmJihvPT09Mj9vPSJwbHVyYWwiOm89PT0xJiYobz0iIikpO3ZhciBzPWZ1bmN0aW9uKCl7cmV0dXJuIGUub3B0aW9ucy5wcmVwZW5kJiZvLnRvU3RyaW5nKCk/ZS5vcHRpb25zLnByZXBlbmQrby50b1N0cmluZygpOm8udG9TdHJpbmcoKX07cmV0dXJuIHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTj09PSJ2MSI/bz09PTE/IiI6dHlwZW9mIG89PSJudW1iZXIiPyJfcGx1cmFsXyIuY29uY2F0KG8udG9TdHJpbmcoKSk6cygpOnRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTj09PSJ2MiJ8fHRoaXMub3B0aW9ucy5zaW1wbGlmeVBsdXJhbFN1ZmZpeCYmbi5udW1iZXJzLmxlbmd0aD09PTImJm4ubnVtYmVyc1swXT09PTE/cygpOnRoaXMub3B0aW9ucy5wcmVwZW5kJiZhLnRvU3RyaW5nKCk/dGhpcy5vcHRpb25zLnByZXBlbmQrYS50b1N0cmluZygpOmEudG9TdHJpbmcoKX19LHtrZXk6InNob3VsZFVzZUludGxBcGkiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIWd0LmluY2x1ZGVzKHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTil9fV0pLGl9KCk7ZnVuY3Rpb24gTmUoaSx0KXt2YXIgbj1PYmplY3Qua2V5cyhpKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGkpO3QmJihyPXIuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGksZSkuZW51bWVyYWJsZX0pKSxuLnB1c2guYXBwbHkobixyKX1yZXR1cm4gbn1mdW5jdGlvbiBMKGkpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPWFyZ3VtZW50c1t0XSE9bnVsbD9hcmd1bWVudHNbdF06e307dCUyP05lKE9iamVjdChuKSwhMCkuZm9yRWFjaChmdW5jdGlvbihyKXtGKGkscixuW3JdKX0pOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGksT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpOk5lKE9iamVjdChuKSkuZm9yRWFjaChmdW5jdGlvbihyKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxyLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobixyKSl9KX1yZXR1cm4gaX12YXIgaHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9O1IodGhpcyxpKSx0aGlzLmxvZ2dlcj1OLmNyZWF0ZSgiaW50ZXJwb2xhdG9yIiksdGhpcy5vcHRpb25zPXQsdGhpcy5mb3JtYXQ9dC5pbnRlcnBvbGF0aW9uJiZ0LmludGVycG9sYXRpb24uZm9ybWF0fHxmdW5jdGlvbihuKXtyZXR1cm4gbn0sdGhpcy5pbml0KHQpfXJldHVybiBrKGksW3trZXk6ImluaXQiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9O24uaW50ZXJwb2xhdGlvbnx8KG4uaW50ZXJwb2xhdGlvbj17ZXNjYXBlVmFsdWU6ITB9KTt2YXIgcj1uLmludGVycG9sYXRpb247dGhpcy5lc2NhcGU9ci5lc2NhcGUhPT12b2lkIDA/ci5lc2NhcGU6dHQsdGhpcy5lc2NhcGVWYWx1ZT1yLmVzY2FwZVZhbHVlIT09dm9pZCAwP3IuZXNjYXBlVmFsdWU6ITAsdGhpcy51c2VSYXdWYWx1ZVRvRXNjYXBlPXIudXNlUmF3VmFsdWVUb0VzY2FwZSE9PXZvaWQgMD9yLnVzZVJhd1ZhbHVlVG9Fc2NhcGU6ITEsdGhpcy5wcmVmaXg9ci5wcmVmaXg/QShyLnByZWZpeCk6ci5wcmVmaXhFc2NhcGVkfHwie3siLHRoaXMuc3VmZml4PXIuc3VmZml4P0Eoci5zdWZmaXgpOnIuc3VmZml4RXNjYXBlZHx8In19Iix0aGlzLmZvcm1hdFNlcGFyYXRvcj1yLmZvcm1hdFNlcGFyYXRvcj9yLmZvcm1hdFNlcGFyYXRvcjpyLmZvcm1hdFNlcGFyYXRvcnx8IiwiLHRoaXMudW5lc2NhcGVQcmVmaXg9ci51bmVzY2FwZVN1ZmZpeD8iIjpyLnVuZXNjYXBlUHJlZml4fHwiLSIsdGhpcy51bmVzY2FwZVN1ZmZpeD10aGlzLnVuZXNjYXBlUHJlZml4PyIiOnIudW5lc2NhcGVTdWZmaXh8fCIiLHRoaXMubmVzdGluZ1ByZWZpeD1yLm5lc3RpbmdQcmVmaXg/QShyLm5lc3RpbmdQcmVmaXgpOnIubmVzdGluZ1ByZWZpeEVzY2FwZWR8fEEoIiR0KCIpLHRoaXMubmVzdGluZ1N1ZmZpeD1yLm5lc3RpbmdTdWZmaXg/QShyLm5lc3RpbmdTdWZmaXgpOnIubmVzdGluZ1N1ZmZpeEVzY2FwZWR8fEEoIikiKSx0aGlzLm5lc3RpbmdPcHRpb25zU2VwYXJhdG9yPXIubmVzdGluZ09wdGlvbnNTZXBhcmF0b3I/ci5uZXN0aW5nT3B0aW9uc1NlcGFyYXRvcjpyLm5lc3RpbmdPcHRpb25zU2VwYXJhdG9yfHwiLCIsdGhpcy5tYXhSZXBsYWNlcz1yLm1heFJlcGxhY2VzP3IubWF4UmVwbGFjZXM6MWUzLHRoaXMuYWx3YXlzRm9ybWF0PXIuYWx3YXlzRm9ybWF0IT09dm9pZCAwP3IuYWx3YXlzRm9ybWF0OiExLHRoaXMucmVzZXRSZWdFeHAoKX19LHtrZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucyYmdGhpcy5pbml0KHRoaXMub3B0aW9ucyl9fSx7a2V5OiJyZXNldFJlZ0V4cCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgbj0iIi5jb25jYXQodGhpcy5wcmVmaXgsIiguKz8pIikuY29uY2F0KHRoaXMuc3VmZml4KTt0aGlzLnJlZ2V4cD1uZXcgUmVnRXhwKG4sImciKTt2YXIgcj0iIi5jb25jYXQodGhpcy5wcmVmaXgpLmNvbmNhdCh0aGlzLnVuZXNjYXBlUHJlZml4LCIoLis/KSIpLmNvbmNhdCh0aGlzLnVuZXNjYXBlU3VmZml4KS5jb25jYXQodGhpcy5zdWZmaXgpO3RoaXMucmVnZXhwVW5lc2NhcGU9bmV3IFJlZ0V4cChyLCJnIik7dmFyIGU9IiIuY29uY2F0KHRoaXMubmVzdGluZ1ByZWZpeCwiKC4rPykiKS5jb25jYXQodGhpcy5uZXN0aW5nU3VmZml4KTt0aGlzLm5lc3RpbmdSZWdleHA9bmV3IFJlZ0V4cChlLCJnIil9fSx7a2V5OiJpbnRlcnBvbGF0ZSIsdmFsdWU6ZnVuY3Rpb24obixyLGUsYSl7dmFyIG89dGhpcyxzLHUsbCxjPXRoaXMub3B0aW9ucyYmdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24mJnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXN8fHt9O2Z1bmN0aW9uIGYobSl7cmV0dXJuIG0ucmVwbGFjZSgvXCQvZywiJCQkJCIpfXZhciBnPWZ1bmN0aW9uKGQpe2lmKGQuaW5kZXhPZihvLmZvcm1hdFNlcGFyYXRvcik8MCl7dmFyIGg9T2UocixjLGQpO3JldHVybiBvLmFsd2F5c0Zvcm1hdD9vLmZvcm1hdChoLHZvaWQgMCxlLEwoTChMKHt9LGEpLHIpLHt9LHtpbnRlcnBvbGF0aW9ua2V5OmR9KSk6aH12YXIgTz1kLnNwbGl0KG8uZm9ybWF0U2VwYXJhdG9yKSxiPU8uc2hpZnQoKS50cmltKCkseD1PLmpvaW4oby5mb3JtYXRTZXBhcmF0b3IpLnRyaW0oKTtyZXR1cm4gby5mb3JtYXQoT2UocixjLGIpLHgsZSxMKEwoTCh7fSxhKSxyKSx7fSx7aW50ZXJwb2xhdGlvbmtleTpifSkpfTt0aGlzLnJlc2V0UmVnRXhwKCk7dmFyIHA9YSYmYS5taXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXJ8fHRoaXMub3B0aW9ucy5taXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXIsdj1hJiZhLmludGVycG9sYXRpb24mJmEuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMhPT12b2lkIDA/YS5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlczp0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMseT1be3JlZ2V4OnRoaXMucmVnZXhwVW5lc2NhcGUsc2FmZVZhbHVlOmZ1bmN0aW9uKGQpe3JldHVybiBmKGQpfX0se3JlZ2V4OnRoaXMucmVnZXhwLHNhZmVWYWx1ZTpmdW5jdGlvbihkKXtyZXR1cm4gby5lc2NhcGVWYWx1ZT9mKG8uZXNjYXBlKGQpKTpmKGQpfX1dO3JldHVybiB5LmZvckVhY2goZnVuY3Rpb24obSl7Zm9yKGw9MDtzPW0ucmVnZXguZXhlYyhuKTspe3ZhciBkPXNbMV0udHJpbSgpO2lmKHU9ZyhkKSx1PT09dm9pZCAwKWlmKHR5cGVvZiBwPT0iZnVuY3Rpb24iKXt2YXIgaD1wKG4scyxhKTt1PXR5cGVvZiBoPT0ic3RyaW5nIj9oOiIifWVsc2UgaWYoYSYmYS5oYXNPd25Qcm9wZXJ0eShkKSl1PSIiO2Vsc2UgaWYodil7dT1zWzBdO2NvbnRpbnVlfWVsc2Ugby5sb2dnZXIud2FybigibWlzc2VkIHRvIHBhc3MgaW4gdmFyaWFibGUgIi5jb25jYXQoZCwiIGZvciBpbnRlcnBvbGF0aW5nICIpLmNvbmNhdChuKSksdT0iIjtlbHNlIHR5cGVvZiB1IT0ic3RyaW5nIiYmIW8udXNlUmF3VmFsdWVUb0VzY2FwZSYmKHU9eWUodSkpO3ZhciBPPW0uc2FmZVZhbHVlKHUpO2lmKG49bi5yZXBsYWNlKHNbMF0sTyksdj8obS5yZWdleC5sYXN0SW5kZXgrPXUubGVuZ3RoLG0ucmVnZXgubGFzdEluZGV4LT1zWzBdLmxlbmd0aCk6bS5yZWdleC5sYXN0SW5kZXg9MCxsKyssbD49by5tYXhSZXBsYWNlcylicmVha319KSxufX0se2tleToibmVzdCIsdmFsdWU6ZnVuY3Rpb24obixyKXt2YXIgZT10aGlzLGE9YXJndW1lbnRzLmxlbmd0aD4yJiZhcmd1bWVudHNbMl0hPT12b2lkIDA/YXJndW1lbnRzWzJdOnt9LG8scyx1PUwoe30sYSk7dS5hcHBseVBvc3RQcm9jZXNzb3I9ITEsZGVsZXRlIHUuZGVmYXVsdFZhbHVlO2Z1bmN0aW9uIGwocCx2KXt2YXIgeT10aGlzLm5lc3RpbmdPcHRpb25zU2VwYXJhdG9yO2lmKHAuaW5kZXhPZih5KTwwKXJldHVybiBwO3ZhciBtPXAuc3BsaXQobmV3IFJlZ0V4cCgiIi5jb25jYXQoeSwiWyBdKnsiKSkpLGQ9InsiLmNvbmNhdChtWzFdKTtwPW1bMF0sZD10aGlzLmludGVycG9sYXRlKGQsdSk7dmFyIGg9ZC5tYXRjaCgvJy9nKSxPPWQubWF0Y2goLyIvZyk7KGgmJmgubGVuZ3RoJTI9PT0wJiYhT3x8Ty5sZW5ndGglMiE9PTApJiYoZD1kLnJlcGxhY2UoLycvZywnIicpKTt0cnl7dT1KU09OLnBhcnNlKGQpLHYmJih1PUwoTCh7fSx2KSx1KSl9Y2F0Y2goYil7cmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oImZhaWxlZCBwYXJzaW5nIG9wdGlvbnMgc3RyaW5nIGluIG5lc3RpbmcgZm9yIGtleSAiLmNvbmNhdChwKSxiKSwiIi5jb25jYXQocCkuY29uY2F0KHkpLmNvbmNhdChkKX1yZXR1cm4gZGVsZXRlIHUuZGVmYXVsdFZhbHVlLHB9Zm9yKDtvPXRoaXMubmVzdGluZ1JlZ2V4cC5leGVjKG4pOyl7dmFyIGM9W10sZj0hMTtpZihvWzBdLmluZGV4T2YodGhpcy5mb3JtYXRTZXBhcmF0b3IpIT09LTEmJiEvey4qfS8udGVzdChvWzFdKSl7dmFyIGc9b1sxXS5zcGxpdCh0aGlzLmZvcm1hdFNlcGFyYXRvcikubWFwKGZ1bmN0aW9uKHApe3JldHVybiBwLnRyaW0oKX0pO29bMV09Zy5zaGlmdCgpLGM9ZyxmPSEwfWlmKHM9cihsLmNhbGwodGhpcyxvWzFdLnRyaW0oKSx1KSx1KSxzJiZvWzBdPT09biYmdHlwZW9mIHMhPSJzdHJpbmciKXJldHVybiBzO3R5cGVvZiBzIT0ic3RyaW5nIiYmKHM9eWUocykpLHN8fCh0aGlzLmxvZ2dlci53YXJuKCJtaXNzZWQgdG8gcmVzb2x2ZSAiLmNvbmNhdChvWzFdLCIgZm9yIG5lc3RpbmcgIikuY29uY2F0KG4pKSxzPSIiKSxmJiYocz1jLnJlZHVjZShmdW5jdGlvbihwLHYpe3JldHVybiBlLmZvcm1hdChwLHYsYS5sbmcsTChMKHt9LGEpLHt9LHtpbnRlcnBvbGF0aW9ua2V5Om9bMV0udHJpbSgpfSkpfSxzLnRyaW0oKSkpLG49bi5yZXBsYWNlKG9bMF0scyksdGhpcy5yZWdleHAubGFzdEluZGV4PTB9cmV0dXJuIG59fV0pLGl9KCk7ZnVuY3Rpb24gQ2UoaSx0KXt2YXIgbj1PYmplY3Qua2V5cyhpKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGkpO3QmJihyPXIuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGksZSkuZW51bWVyYWJsZX0pKSxuLnB1c2guYXBwbHkobixyKX1yZXR1cm4gbn1mdW5jdGlvbiBEKGkpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPWFyZ3VtZW50c1t0XSE9bnVsbD9hcmd1bWVudHNbdF06e307dCUyP0NlKE9iamVjdChuKSwhMCkuZm9yRWFjaChmdW5jdGlvbihyKXtGKGkscixuW3JdKX0pOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGksT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpOkNlKE9iamVjdChuKSkuZm9yRWFjaChmdW5jdGlvbihyKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxyLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobixyKSl9KX1yZXR1cm4gaX1mdW5jdGlvbiB2dChpKXt2YXIgdD1pLnRvTG93ZXJDYXNlKCkudHJpbSgpLG49e307aWYoaS5pbmRleE9mKCIoIik+LTEpe3ZhciByPWkuc3BsaXQoIigiKTt0PXJbMF0udG9Mb3dlckNhc2UoKS50cmltKCk7dmFyIGU9clsxXS5zdWJzdHJpbmcoMCxyWzFdLmxlbmd0aC0xKTtpZih0PT09ImN1cnJlbmN5IiYmZS5pbmRleE9mKCI6Iik8MCluLmN1cnJlbmN5fHwobi5jdXJyZW5jeT1lLnRyaW0oKSk7ZWxzZSBpZih0PT09InJlbGF0aXZldGltZSImJmUuaW5kZXhPZigiOiIpPDApbi5yYW5nZXx8KG4ucmFuZ2U9ZS50cmltKCkpO2Vsc2V7dmFyIGE9ZS5zcGxpdCgiOyIpO2EuZm9yRWFjaChmdW5jdGlvbihvKXtpZihvKXt2YXIgcz1vLnNwbGl0KCI6IiksdT1HZShzKSxsPXVbMF0sYz11LnNsaWNlKDEpLGY9Yy5qb2luKCI6IikudHJpbSgpLnJlcGxhY2UoL14nK3wnKyQvZywiIik7bltsLnRyaW0oKV18fChuW2wudHJpbSgpXT1mKSxmPT09ImZhbHNlIiYmKG5bbC50cmltKCldPSExKSxmPT09InRydWUiJiYobltsLnRyaW0oKV09ITApLGlzTmFOKGYpfHwobltsLnRyaW0oKV09cGFyc2VJbnQoZiwxMCkpfX0pfX1yZXR1cm57Zm9ybWF0TmFtZTp0LGZvcm1hdE9wdGlvbnM6bn19ZnVuY3Rpb24gSyhpKXt2YXIgdD17fTtyZXR1cm4gZnVuY3Rpb24ocixlLGEpe3ZhciBvPWUrSlNPTi5zdHJpbmdpZnkoYSkscz10W29dO3JldHVybiBzfHwocz1pKGUsYSksdFtvXT1zKSxzKHIpfX12YXIgbXQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9O1IodGhpcyxpKSx0aGlzLmxvZ2dlcj1OLmNyZWF0ZSgiZm9ybWF0dGVyIiksdGhpcy5vcHRpb25zPXQsdGhpcy5mb3JtYXRzPXtudW1iZXI6SyhmdW5jdGlvbihuLHIpe3ZhciBlPW5ldyBJbnRsLk51bWJlckZvcm1hdChuLHIpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gZS5mb3JtYXQoYSl9fSksY3VycmVuY3k6SyhmdW5jdGlvbihuLHIpe3ZhciBlPW5ldyBJbnRsLk51bWJlckZvcm1hdChuLEQoRCh7fSxyKSx7fSx7c3R5bGU6ImN1cnJlbmN5In0pKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGUuZm9ybWF0KGEpfX0pLGRhdGV0aW1lOksoZnVuY3Rpb24obixyKXt2YXIgZT1uZXcgSW50bC5EYXRlVGltZUZvcm1hdChuLEQoe30scikpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gZS5mb3JtYXQoYSl9fSkscmVsYXRpdmV0aW1lOksoZnVuY3Rpb24obixyKXt2YXIgZT1uZXcgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQobixEKHt9LHIpKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGUuZm9ybWF0KGEsci5yYW5nZXx8ImRheSIpfX0pLGxpc3Q6SyhmdW5jdGlvbihuLHIpe3ZhciBlPW5ldyBJbnRsLkxpc3RGb3JtYXQobixEKHt9LHIpKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGUuZm9ybWF0KGEpfX0pfSx0aGlzLmluaXQodCl9cmV0dXJuIGsoaSxbe2tleToiaW5pdCIsdmFsdWU6ZnVuY3Rpb24obil7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOntpbnRlcnBvbGF0aW9uOnt9fSxlPXIuaW50ZXJwb2xhdGlvbjt0aGlzLmZvcm1hdFNlcGFyYXRvcj1lLmZvcm1hdFNlcGFyYXRvcj9lLmZvcm1hdFNlcGFyYXRvcjplLmZvcm1hdFNlcGFyYXRvcnx8IiwifX0se2tleToiYWRkIix2YWx1ZTpmdW5jdGlvbihuLHIpe3RoaXMuZm9ybWF0c1tuLnRvTG93ZXJDYXNlKCkudHJpbSgpXT1yfX0se2tleToiYWRkQ2FjaGVkIix2YWx1ZTpmdW5jdGlvbihuLHIpe3RoaXMuZm9ybWF0c1tuLnRvTG93ZXJDYXNlKCkudHJpbSgpXT1LKHIpfX0se2tleToiZm9ybWF0Iix2YWx1ZTpmdW5jdGlvbihuLHIsZSxhKXt2YXIgbz10aGlzLHM9ci5zcGxpdCh0aGlzLmZvcm1hdFNlcGFyYXRvciksdT1zLnJlZHVjZShmdW5jdGlvbihsLGMpe3ZhciBmPXZ0KGMpLGc9Zi5mb3JtYXROYW1lLHA9Zi5mb3JtYXRPcHRpb25zO2lmKG8uZm9ybWF0c1tnXSl7dmFyIHY9bDt0cnl7dmFyIHk9YSYmYS5mb3JtYXRQYXJhbXMmJmEuZm9ybWF0UGFyYW1zW2EuaW50ZXJwb2xhdGlvbmtleV18fHt9LG09eS5sb2NhbGV8fHkubG5nfHxhLmxvY2FsZXx8YS5sbmd8fGU7dj1vLmZvcm1hdHNbZ10obCxtLEQoRChEKHt9LHApLGEpLHkpKX1jYXRjaChkKXtvLmxvZ2dlci53YXJuKGQpfXJldHVybiB2fWVsc2Ugby5sb2dnZXIud2FybigidGhlcmUgd2FzIG5vIGZvcm1hdCBmdW5jdGlvbiBmb3IgIi5jb25jYXQoZykpO3JldHVybiBsfSxuKTtyZXR1cm4gdX19XSksaX0oKTtmdW5jdGlvbiBFZShpLHQpe3ZhciBuPU9iamVjdC5rZXlzKGkpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoaSk7dCYmKHI9ci5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaSxlKS5lbnVtZXJhYmxlfSkpLG4ucHVzaC5hcHBseShuLHIpfXJldHVybiBufWZ1bmN0aW9uIF9lKGkpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPWFyZ3VtZW50c1t0XSE9bnVsbD9hcmd1bWVudHNbdF06e307dCUyP0VlKE9iamVjdChuKSwhMCkuZm9yRWFjaChmdW5jdGlvbihyKXtGKGkscixuW3JdKX0pOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGksT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpOkVlKE9iamVjdChuKSkuZm9yRWFjaChmdW5jdGlvbihyKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxyLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobixyKSl9KX1yZXR1cm4gaX1mdW5jdGlvbiB5dChpKXt2YXIgdD1idCgpO3JldHVybiBmdW5jdGlvbigpe3ZhciByPWooaSksZTtpZih0KXt2YXIgYT1qKHRoaXMpLmNvbnN0cnVjdG9yO2U9UmVmbGVjdC5jb25zdHJ1Y3Qocixhcmd1bWVudHMsYSl9ZWxzZSBlPXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBWKHRoaXMsZSl9fWZ1bmN0aW9uIGJ0KCl7aWYodHlwZW9mIFJlZmxlY3Q+InUifHwhUmVmbGVjdC5jb25zdHJ1Y3R8fFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYodHlwZW9mIFByb3h5PT0iZnVuY3Rpb24iKXJldHVybiEwO3RyeXtyZXR1cm4gQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sZnVuY3Rpb24oKXt9KSksITB9Y2F0Y2h7cmV0dXJuITF9fWZ1bmN0aW9uIE90KGksdCl7aS5wZW5kaW5nW3RdIT09dm9pZCAwJiYoZGVsZXRlIGkucGVuZGluZ1t0XSxpLnBlbmRpbmdDb3VudC0tKX12YXIgd3Q9ZnVuY3Rpb24oaSl7UShuLGkpO3ZhciB0PXl0KG4pO2Z1bmN0aW9uIG4ocixlLGEpe3ZhciBvLHM9YXJndW1lbnRzLmxlbmd0aD4zJiZhcmd1bWVudHNbM10hPT12b2lkIDA/YXJndW1lbnRzWzNdOnt9O3JldHVybiBSKHRoaXMsbiksbz10LmNhbGwodGhpcykscSYmSS5jYWxsKF8obykpLG8uYmFja2VuZD1yLG8uc3RvcmU9ZSxvLnNlcnZpY2VzPWEsby5sYW5ndWFnZVV0aWxzPWEubGFuZ3VhZ2VVdGlscyxvLm9wdGlvbnM9cyxvLmxvZ2dlcj1OLmNyZWF0ZSgiYmFja2VuZENvbm5lY3RvciIpLG8ud2FpdGluZ1JlYWRzPVtdLG8ubWF4UGFyYWxsZWxSZWFkcz1zLm1heFBhcmFsbGVsUmVhZHN8fDEwLG8ucmVhZGluZ0NhbGxzPTAsby5tYXhSZXRyaWVzPXMubWF4UmV0cmllcz49MD9zLm1heFJldHJpZXM6NSxvLnJldHJ5VGltZW91dD1zLnJldHJ5VGltZW91dD49MT9zLnJldHJ5VGltZW91dDozNTAsby5zdGF0ZT17fSxvLnF1ZXVlPVtdLG8uYmFja2VuZCYmby5iYWNrZW5kLmluaXQmJm8uYmFja2VuZC5pbml0KGEscy5iYWNrZW5kLHMpLG99cmV0dXJuIGsobixbe2tleToicXVldWVMb2FkIix2YWx1ZTpmdW5jdGlvbihlLGEsbyxzKXt2YXIgdT10aGlzLGw9e30sYz17fSxmPXt9LGc9e307cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihwKXt2YXIgdj0hMDthLmZvckVhY2goZnVuY3Rpb24oeSl7dmFyIG09IiIuY29uY2F0KHAsInwiKS5jb25jYXQoeSk7IW8ucmVsb2FkJiZ1LnN0b3JlLmhhc1Jlc291cmNlQnVuZGxlKHAseSk/dS5zdGF0ZVttXT0yOnUuc3RhdGVbbV08MHx8KHUuc3RhdGVbbV09PT0xP2NbbV09PT12b2lkIDAmJihjW21dPSEwKToodS5zdGF0ZVttXT0xLHY9ITEsY1ttXT09PXZvaWQgMCYmKGNbbV09ITApLGxbbV09PT12b2lkIDAmJihsW21dPSEwKSxnW3ldPT09dm9pZCAwJiYoZ1t5XT0hMCkpKX0pLHZ8fChmW3BdPSEwKX0pLChPYmplY3Qua2V5cyhsKS5sZW5ndGh8fE9iamVjdC5rZXlzKGMpLmxlbmd0aCkmJnRoaXMucXVldWUucHVzaCh7cGVuZGluZzpjLHBlbmRpbmdDb3VudDpPYmplY3Qua2V5cyhjKS5sZW5ndGgsbG9hZGVkOnt9LGVycm9yczpbXSxjYWxsYmFjazpzfSkse3RvTG9hZDpPYmplY3Qua2V5cyhsKSxwZW5kaW5nOk9iamVjdC5rZXlzKGMpLHRvTG9hZExhbmd1YWdlczpPYmplY3Qua2V5cyhmKSx0b0xvYWROYW1lc3BhY2VzOk9iamVjdC5rZXlzKGcpfX19LHtrZXk6ImxvYWRlZCIsdmFsdWU6ZnVuY3Rpb24oZSxhLG8pe3ZhciBzPWUuc3BsaXQoInwiKSx1PXNbMF0sbD1zWzFdO2EmJnRoaXMuZW1pdCgiZmFpbGVkTG9hZGluZyIsdSxsLGEpLG8mJnRoaXMuc3RvcmUuYWRkUmVzb3VyY2VCdW5kbGUodSxsLG8pLHRoaXMuc3RhdGVbZV09YT8tMToyO3ZhciBjPXt9O3RoaXMucXVldWUuZm9yRWFjaChmdW5jdGlvbihmKXtYZShmLmxvYWRlZCxbdV0sbCksT3QoZixlKSxhJiZmLmVycm9ycy5wdXNoKGEpLGYucGVuZGluZ0NvdW50PT09MCYmIWYuZG9uZSYmKE9iamVjdC5rZXlzKGYubG9hZGVkKS5mb3JFYWNoKGZ1bmN0aW9uKGcpe2NbZ118fChjW2ddPXt9KTt2YXIgcD1mLmxvYWRlZFtnXTtwLmxlbmd0aCYmcC5mb3JFYWNoKGZ1bmN0aW9uKHYpe2NbZ11bdl09PT12b2lkIDAmJihjW2ddW3ZdPSEwKX0pfSksZi5kb25lPSEwLGYuZXJyb3JzLmxlbmd0aD9mLmNhbGxiYWNrKGYuZXJyb3JzKTpmLmNhbGxiYWNrKCkpfSksdGhpcy5lbWl0KCJsb2FkZWQiLGMpLHRoaXMucXVldWU9dGhpcy5xdWV1ZS5maWx0ZXIoZnVuY3Rpb24oZil7cmV0dXJuIWYuZG9uZX0pfX0se2tleToicmVhZCIsdmFsdWU6ZnVuY3Rpb24oZSxhLG8pe3ZhciBzPXRoaXMsdT1hcmd1bWVudHMubGVuZ3RoPjMmJmFyZ3VtZW50c1szXSE9PXZvaWQgMD9hcmd1bWVudHNbM106MCxsPWFyZ3VtZW50cy5sZW5ndGg+NCYmYXJndW1lbnRzWzRdIT09dm9pZCAwP2FyZ3VtZW50c1s0XTp0aGlzLnJldHJ5VGltZW91dCxjPWFyZ3VtZW50cy5sZW5ndGg+NT9hcmd1bWVudHNbNV06dm9pZCAwO2lmKCFlLmxlbmd0aClyZXR1cm4gYyhudWxsLHt9KTtpZih0aGlzLnJlYWRpbmdDYWxscz49dGhpcy5tYXhQYXJhbGxlbFJlYWRzKXt0aGlzLndhaXRpbmdSZWFkcy5wdXNoKHtsbmc6ZSxuczphLGZjTmFtZTpvLHRyaWVkOnUsd2FpdDpsLGNhbGxiYWNrOmN9KTtyZXR1cm59cmV0dXJuIHRoaXMucmVhZGluZ0NhbGxzKyssdGhpcy5iYWNrZW5kW29dKGUsYSxmdW5jdGlvbihmLGcpe2lmKHMucmVhZGluZ0NhbGxzLS0scy53YWl0aW5nUmVhZHMubGVuZ3RoPjApe3ZhciBwPXMud2FpdGluZ1JlYWRzLnNoaWZ0KCk7cy5yZWFkKHAubG5nLHAubnMscC5mY05hbWUscC50cmllZCxwLndhaXQscC5jYWxsYmFjayl9aWYoZiYmZyYmdTxzLm1heFJldHJpZXMpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtzLnJlYWQuY2FsbChzLGUsYSxvLHUrMSxsKjIsYyl9LGwpO3JldHVybn1jKGYsZyl9KX19LHtrZXk6InByZXBhcmVMb2FkaW5nIix2YWx1ZTpmdW5jdGlvbihlLGEpe3ZhciBvPXRoaXMscz1hcmd1bWVudHMubGVuZ3RoPjImJmFyZ3VtZW50c1syXSE9PXZvaWQgMD9hcmd1bWVudHNbMl06e30sdT1hcmd1bWVudHMubGVuZ3RoPjM/YXJndW1lbnRzWzNdOnZvaWQgMDtpZighdGhpcy5iYWNrZW5kKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKCJObyBiYWNrZW5kIHdhcyBhZGRlZCB2aWEgaTE4bmV4dC51c2UuIFdpbGwgbm90IGxvYWQgcmVzb3VyY2VzLiIpLHUmJnUoKTt0eXBlb2YgZT09InN0cmluZyImJihlPXRoaXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkoZSkpLHR5cGVvZiBhPT0ic3RyaW5nIiYmKGE9W2FdKTt2YXIgbD10aGlzLnF1ZXVlTG9hZChlLGEscyx1KTtpZighbC50b0xvYWQubGVuZ3RoKXJldHVybiBsLnBlbmRpbmcubGVuZ3RofHx1KCksbnVsbDtsLnRvTG9hZC5mb3JFYWNoKGZ1bmN0aW9uKGMpe28ubG9hZE9uZShjKX0pfX0se2tleToibG9hZCIsdmFsdWU6ZnVuY3Rpb24oZSxhLG8pe3RoaXMucHJlcGFyZUxvYWRpbmcoZSxhLHt9LG8pfX0se2tleToicmVsb2FkIix2YWx1ZTpmdW5jdGlvbihlLGEsbyl7dGhpcy5wcmVwYXJlTG9hZGluZyhlLGEse3JlbG9hZDohMH0sbyl9fSx7a2V5OiJsb2FkT25lIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgYT10aGlzLG89YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOiIiLHM9ZS5zcGxpdCgifCIpLHU9c1swXSxsPXNbMV07dGhpcy5yZWFkKHUsbCwicmVhZCIsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbihjLGYpe2MmJmEubG9nZ2VyLndhcm4oIiIuY29uY2F0KG8sImxvYWRpbmcgbmFtZXNwYWNlICIpLmNvbmNhdChsLCIgZm9yIGxhbmd1YWdlICIpLmNvbmNhdCh1LCIgZmFpbGVkIiksYyksIWMmJmYmJmEubG9nZ2VyLmxvZygiIi5jb25jYXQobywibG9hZGVkIG5hbWVzcGFjZSAiKS5jb25jYXQobCwiIGZvciBsYW5ndWFnZSAiKS5jb25jYXQodSksZiksYS5sb2FkZWQoZSxjLGYpfSl9fSx7a2V5OiJzYXZlTWlzc2luZyIsdmFsdWU6ZnVuY3Rpb24oZSxhLG8scyx1KXt2YXIgbD1hcmd1bWVudHMubGVuZ3RoPjUmJmFyZ3VtZW50c1s1XSE9PXZvaWQgMD9hcmd1bWVudHNbNV06e307aWYodGhpcy5zZXJ2aWNlcy51dGlscyYmdGhpcy5zZXJ2aWNlcy51dGlscy5oYXNMb2FkZWROYW1lc3BhY2UmJiF0aGlzLnNlcnZpY2VzLnV0aWxzLmhhc0xvYWRlZE5hbWVzcGFjZShhKSl7dGhpcy5sb2dnZXIud2FybignZGlkIG5vdCBzYXZlIGtleSAiJy5jb25jYXQobywnIiBhcyB0aGUgbmFtZXNwYWNlICInKS5jb25jYXQoYSwnIiB3YXMgbm90IHlldCBsb2FkZWQnKSwiVGhpcyBtZWFucyBzb21ldGhpbmcgSVMgV1JPTkcgaW4geW91ciBzZXR1cC4gWW91IGFjY2VzcyB0aGUgdCBmdW5jdGlvbiBiZWZvcmUgaTE4bmV4dC5pbml0IC8gaTE4bmV4dC5sb2FkTmFtZXNwYWNlIC8gaTE4bmV4dC5jaGFuZ2VMYW5ndWFnZSB3YXMgZG9uZS4gV2FpdCBmb3IgdGhlIGNhbGxiYWNrIG9yIFByb21pc2UgdG8gcmVzb2x2ZSBiZWZvcmUgYWNjZXNzaW5nIGl0ISEhIik7cmV0dXJufW89PW51bGx8fG89PT0iInx8KHRoaXMuYmFja2VuZCYmdGhpcy5iYWNrZW5kLmNyZWF0ZSYmdGhpcy5iYWNrZW5kLmNyZWF0ZShlLGEsbyxzLG51bGwsX2UoX2Uoe30sbCkse30se2lzVXBkYXRlOnV9KSksISghZXx8IWVbMF0pJiZ0aGlzLnN0b3JlLmFkZFJlc291cmNlKGVbMF0sYSxvLHMpKX19XSksbn0oSSk7ZnVuY3Rpb24gU3QoKXtyZXR1cm57ZGVidWc6ITEsaW5pdEltbWVkaWF0ZTohMCxuczpbInRyYW5zbGF0aW9uIl0sZGVmYXVsdE5TOlsidHJhbnNsYXRpb24iXSxmYWxsYmFja0xuZzpbImRldiJdLGZhbGxiYWNrTlM6ITEsc3VwcG9ydGVkTG5nczohMSxub25FeHBsaWNpdFN1cHBvcnRlZExuZ3M6ITEsbG9hZDoiYWxsIixwcmVsb2FkOiExLHNpbXBsaWZ5UGx1cmFsU3VmZml4OiEwLGtleVNlcGFyYXRvcjoiLiIsbnNTZXBhcmF0b3I6IjoiLHBsdXJhbFNlcGFyYXRvcjoiXyIsY29udGV4dFNlcGFyYXRvcjoiXyIscGFydGlhbEJ1bmRsZWRMYW5ndWFnZXM6ITEsc2F2ZU1pc3Npbmc6ITEsdXBkYXRlTWlzc2luZzohMSxzYXZlTWlzc2luZ1RvOiJmYWxsYmFjayIsc2F2ZU1pc3NpbmdQbHVyYWxzOiEwLG1pc3NpbmdLZXlIYW5kbGVyOiExLG1pc3NpbmdJbnRlcnBvbGF0aW9uSGFuZGxlcjohMSxwb3N0UHJvY2VzczohMSxwb3N0UHJvY2Vzc1Bhc3NSZXNvbHZlZDohMSxyZXR1cm5OdWxsOiEwLHJldHVybkVtcHR5U3RyaW5nOiEwLHJldHVybk9iamVjdHM6ITEsam9pbkFycmF5czohMSxyZXR1cm5lZE9iamVjdEhhbmRsZXI6ITEscGFyc2VNaXNzaW5nS2V5SGFuZGxlcjohMSxhcHBlbmROYW1lc3BhY2VUb01pc3NpbmdLZXk6ITEsYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGU6ITEsb3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXI6ZnVuY3Rpb24odCl7dmFyIG49e307aWYoUCh0WzFdKT09PSJvYmplY3QiJiYobj10WzFdKSx0eXBlb2YgdFsxXT09InN0cmluZyImJihuLmRlZmF1bHRWYWx1ZT10WzFdKSx0eXBlb2YgdFsyXT09InN0cmluZyImJihuLnREZXNjcmlwdGlvbj10WzJdKSxQKHRbMl0pPT09Im9iamVjdCJ8fFAodFszXSk9PT0ib2JqZWN0Iil7dmFyIHI9dFszXXx8dFsyXTtPYmplY3Qua2V5cyhyKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe25bZV09cltlXX0pfXJldHVybiBufSxpbnRlcnBvbGF0aW9uOntlc2NhcGVWYWx1ZTohMCxmb3JtYXQ6ZnVuY3Rpb24odCxuLHIsZSl7cmV0dXJuIHR9LHByZWZpeDoie3siLHN1ZmZpeDoifX0iLGZvcm1hdFNlcGFyYXRvcjoiLCIsdW5lc2NhcGVQcmVmaXg6Ii0iLG5lc3RpbmdQcmVmaXg6IiR0KCIsbmVzdGluZ1N1ZmZpeDoiKSIsbmVzdGluZ09wdGlvbnNTZXBhcmF0b3I6IiwiLG1heFJlcGxhY2VzOjFlMyxza2lwT25WYXJpYWJsZXM6ITB9fX1mdW5jdGlvbiBGZShpKXtyZXR1cm4gdHlwZW9mIGkubnM9PSJzdHJpbmciJiYoaS5ucz1baS5uc10pLHR5cGVvZiBpLmZhbGxiYWNrTG5nPT0ic3RyaW5nIiYmKGkuZmFsbGJhY2tMbmc9W2kuZmFsbGJhY2tMbmddKSx0eXBlb2YgaS5mYWxsYmFja05TPT0ic3RyaW5nIiYmKGkuZmFsbGJhY2tOUz1baS5mYWxsYmFja05TXSksaS5zdXBwb3J0ZWRMbmdzJiZpLnN1cHBvcnRlZExuZ3MuaW5kZXhPZigiY2ltb2RlIik8MCYmKGkuc3VwcG9ydGVkTG5ncz1pLnN1cHBvcnRlZExuZ3MuY29uY2F0KFsiY2ltb2RlIl0pKSxpfWZ1bmN0aW9uIEllKGksdCl7dmFyIG49T2JqZWN0LmtleXMoaSk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhpKTt0JiYocj1yLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihpLGUpLmVudW1lcmFibGV9KSksbi5wdXNoLmFwcGx5KG4scil9cmV0dXJuIG59ZnVuY3Rpb24gQyhpKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgbj1hcmd1bWVudHNbdF0hPW51bGw/YXJndW1lbnRzW3RdOnt9O3QlMj9JZShPYmplY3QobiksITApLmZvckVhY2goZnVuY3Rpb24ocil7RihpLHIsbltyXSl9KTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyhpLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKTpJZShPYmplY3QobikpLmZvckVhY2goZnVuY3Rpb24ocil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGkscixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4scikpfSl9cmV0dXJuIGl9ZnVuY3Rpb24geHQoaSl7dmFyIHQ9UHQoKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj1qKGkpLGU7aWYodCl7dmFyIGE9aih0aGlzKS5jb25zdHJ1Y3RvcjtlPVJlZmxlY3QuY29uc3RydWN0KHIsYXJndW1lbnRzLGEpfWVsc2UgZT1yLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gVih0aGlzLGUpfX1mdW5jdGlvbiBQdCgpe2lmKHR5cGVvZiBSZWZsZWN0PiJ1Inx8IVJlZmxlY3QuY29uc3RydWN0fHxSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKXJldHVybiExO2lmKHR5cGVvZiBQcm94eT09ImZ1bmN0aW9uIilyZXR1cm4hMDt0cnl7cmV0dXJuIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLGZ1bmN0aW9uKCl7fSkpLCEwfWNhdGNoe3JldHVybiExfX1mdW5jdGlvbiBlZSgpe31mdW5jdGlvbiBMdChpKXt2YXIgdD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPYmplY3QuZ2V0UHJvdG90eXBlT2YoaSkpO3QuZm9yRWFjaChmdW5jdGlvbihuKXt0eXBlb2YgaVtuXT09ImZ1bmN0aW9uIiYmKGlbbl09aVtuXS5iaW5kKGkpKX0pfXZhciB0ZT1mdW5jdGlvbihpKXtRKG4saSk7dmFyIHQ9eHQobik7ZnVuY3Rpb24gbigpe3ZhciByLGU9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9LGE9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDA7aWYoUih0aGlzLG4pLHI9dC5jYWxsKHRoaXMpLHEmJkkuY2FsbChfKHIpKSxyLm9wdGlvbnM9RmUoZSksci5zZXJ2aWNlcz17fSxyLmxvZ2dlcj1OLHIubW9kdWxlcz17ZXh0ZXJuYWw6W119LEx0KF8ocikpLGEmJiFyLmlzSW5pdGlhbGl6ZWQmJiFlLmlzQ2xvbmUpe2lmKCFyLm9wdGlvbnMuaW5pdEltbWVkaWF0ZSlyZXR1cm4gci5pbml0KGUsYSksVihyLF8ocikpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtyLmluaXQoZSxhKX0sMCl9cmV0dXJuIHJ9cmV0dXJuIGsobixbe2tleToiaW5pdCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGE9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9LG89YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDA7dHlwZW9mIGE9PSJmdW5jdGlvbiImJihvPWEsYT17fSksIWEuZGVmYXVsdE5TJiZhLmRlZmF1bHROUyE9PSExJiZhLm5zJiYodHlwZW9mIGEubnM9PSJzdHJpbmciP2EuZGVmYXVsdE5TPWEubnM6YS5ucy5pbmRleE9mKCJ0cmFuc2xhdGlvbiIpPDAmJihhLmRlZmF1bHROUz1hLm5zWzBdKSk7dmFyIHM9U3QoKTt0aGlzLm9wdGlvbnM9QyhDKEMoe30scyksdGhpcy5vcHRpb25zKSxGZShhKSksdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkhPT0idjEiJiYodGhpcy5vcHRpb25zLmludGVycG9sYXRpb249QyhDKHt9LHMuaW50ZXJwb2xhdGlvbiksdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24pKSxhLmtleVNlcGFyYXRvciE9PXZvaWQgMCYmKHRoaXMub3B0aW9ucy51c2VyRGVmaW5lZEtleVNlcGFyYXRvcj1hLmtleVNlcGFyYXRvciksYS5uc1NlcGFyYXRvciE9PXZvaWQgMCYmKHRoaXMub3B0aW9ucy51c2VyRGVmaW5lZE5zU2VwYXJhdG9yPWEubnNTZXBhcmF0b3IpO2Z1bmN0aW9uIHUoZCl7cmV0dXJuIGQ/dHlwZW9mIGQ9PSJmdW5jdGlvbiI/bmV3IGQ6ZDpudWxsfWlmKCF0aGlzLm9wdGlvbnMuaXNDbG9uZSl7dGhpcy5tb2R1bGVzLmxvZ2dlcj9OLmluaXQodSh0aGlzLm1vZHVsZXMubG9nZ2VyKSx0aGlzLm9wdGlvbnMpOk4uaW5pdChudWxsLHRoaXMub3B0aW9ucyk7dmFyIGw7dGhpcy5tb2R1bGVzLmZvcm1hdHRlcj9sPXRoaXMubW9kdWxlcy5mb3JtYXR0ZXI6dHlwZW9mIEludGw8InUiJiYobD1tdCk7dmFyIGM9bmV3IGZ0KHRoaXMub3B0aW9ucyk7dGhpcy5zdG9yZT1uZXcgb3QodGhpcy5vcHRpb25zLnJlc291cmNlcyx0aGlzLm9wdGlvbnMpO3ZhciBmPXRoaXMuc2VydmljZXM7Zi5sb2dnZXI9TixmLnJlc291cmNlU3RvcmU9dGhpcy5zdG9yZSxmLmxhbmd1YWdlVXRpbHM9YyxmLnBsdXJhbFJlc29sdmVyPW5ldyBkdChjLHtwcmVwZW5kOnRoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3IsY29tcGF0aWJpbGl0eUpTT046dGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OLHNpbXBsaWZ5UGx1cmFsU3VmZml4OnRoaXMub3B0aW9ucy5zaW1wbGlmeVBsdXJhbFN1ZmZpeH0pLGwmJighdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0fHx0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXQ9PT1zLmludGVycG9sYXRpb24uZm9ybWF0KSYmKGYuZm9ybWF0dGVyPXUobCksZi5mb3JtYXR0ZXIuaW5pdChmLHRoaXMub3B0aW9ucyksdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0PWYuZm9ybWF0dGVyLmZvcm1hdC5iaW5kKGYuZm9ybWF0dGVyKSksZi5pbnRlcnBvbGF0b3I9bmV3IGh0KHRoaXMub3B0aW9ucyksZi51dGlscz17aGFzTG9hZGVkTmFtZXNwYWNlOnRoaXMuaGFzTG9hZGVkTmFtZXNwYWNlLmJpbmQodGhpcyl9LGYuYmFja2VuZENvbm5lY3Rvcj1uZXcgd3QodSh0aGlzLm1vZHVsZXMuYmFja2VuZCksZi5yZXNvdXJjZVN0b3JlLGYsdGhpcy5vcHRpb25zKSxmLmJhY2tlbmRDb25uZWN0b3Iub24oIioiLGZ1bmN0aW9uKGQpe2Zvcih2YXIgaD1hcmd1bWVudHMubGVuZ3RoLE89bmV3IEFycmF5KGg+MT9oLTE6MCksYj0xO2I8aDtiKyspT1tiLTFdPWFyZ3VtZW50c1tiXTtlLmVtaXQuYXBwbHkoZSxbZF0uY29uY2F0KE8pKX0pLHRoaXMubW9kdWxlcy5sYW5ndWFnZURldGVjdG9yJiYoZi5sYW5ndWFnZURldGVjdG9yPXUodGhpcy5tb2R1bGVzLmxhbmd1YWdlRGV0ZWN0b3IpLGYubGFuZ3VhZ2VEZXRlY3Rvci5pbml0KGYsdGhpcy5vcHRpb25zLmRldGVjdGlvbix0aGlzLm9wdGlvbnMpKSx0aGlzLm1vZHVsZXMuaTE4bkZvcm1hdCYmKGYuaTE4bkZvcm1hdD11KHRoaXMubW9kdWxlcy5pMThuRm9ybWF0KSxmLmkxOG5Gb3JtYXQuaW5pdCYmZi5pMThuRm9ybWF0LmluaXQodGhpcykpLHRoaXMudHJhbnNsYXRvcj1uZXcga2UodGhpcy5zZXJ2aWNlcyx0aGlzLm9wdGlvbnMpLHRoaXMudHJhbnNsYXRvci5vbigiKiIsZnVuY3Rpb24oZCl7Zm9yKHZhciBoPWFyZ3VtZW50cy5sZW5ndGgsTz1uZXcgQXJyYXkoaD4xP2gtMTowKSxiPTE7YjxoO2IrKylPW2ItMV09YXJndW1lbnRzW2JdO2UuZW1pdC5hcHBseShlLFtkXS5jb25jYXQoTykpfSksdGhpcy5tb2R1bGVzLmV4dGVybmFsLmZvckVhY2goZnVuY3Rpb24oZCl7ZC5pbml0JiZkLmluaXQoZSl9KX1pZih0aGlzLmZvcm1hdD10aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXQsb3x8KG89ZWUpLHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZyYmIXRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciYmIXRoaXMub3B0aW9ucy5sbmcpe3ZhciBnPXRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy5nZXRGYWxsYmFja0NvZGVzKHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZyk7Zy5sZW5ndGg+MCYmZ1swXSE9PSJkZXYiJiYodGhpcy5vcHRpb25zLmxuZz1nWzBdKX0hdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yJiYhdGhpcy5vcHRpb25zLmxuZyYmdGhpcy5sb2dnZXIud2FybigiaW5pdDogbm8gbGFuZ3VhZ2VEZXRlY3RvciBpcyB1c2VkIGFuZCBubyBsbmcgaXMgZGVmaW5lZCIpO3ZhciBwPVsiZ2V0UmVzb3VyY2UiLCJoYXNSZXNvdXJjZUJ1bmRsZSIsImdldFJlc291cmNlQnVuZGxlIiwiZ2V0RGF0YUJ5TGFuZ3VhZ2UiXTtwLmZvckVhY2goZnVuY3Rpb24oZCl7ZVtkXT1mdW5jdGlvbigpe3ZhciBoO3JldHVybihoPWUuc3RvcmUpW2RdLmFwcGx5KGgsYXJndW1lbnRzKX19KTt2YXIgdj1bImFkZFJlc291cmNlIiwiYWRkUmVzb3VyY2VzIiwiYWRkUmVzb3VyY2VCdW5kbGUiLCJyZW1vdmVSZXNvdXJjZUJ1bmRsZSJdO3YuZm9yRWFjaChmdW5jdGlvbihkKXtlW2RdPWZ1bmN0aW9uKCl7dmFyIGg7cmV0dXJuKGg9ZS5zdG9yZSlbZF0uYXBwbHkoaCxhcmd1bWVudHMpLGV9fSk7dmFyIHk9JCgpLG09ZnVuY3Rpb24oKXt2YXIgaD1mdW5jdGlvbihiLHgpe2UuaXNJbml0aWFsaXplZCYmIWUuaW5pdGlhbGl6ZWRTdG9yZU9uY2UmJmUubG9nZ2VyLndhcm4oImluaXQ6IGkxOG5leHQgaXMgYWxyZWFkeSBpbml0aWFsaXplZC4gWW91IHNob3VsZCBjYWxsIGluaXQganVzdCBvbmNlISIpLGUuaXNJbml0aWFsaXplZD0hMCxlLm9wdGlvbnMuaXNDbG9uZXx8ZS5sb2dnZXIubG9nKCJpbml0aWFsaXplZCIsZS5vcHRpb25zKSxlLmVtaXQoImluaXRpYWxpemVkIixlLm9wdGlvbnMpLHkucmVzb2x2ZSh4KSxvKGIseCl9O2lmKGUubGFuZ3VhZ2VzJiZlLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSE9PSJ2MSImJiFlLmlzSW5pdGlhbGl6ZWQpcmV0dXJuIGgobnVsbCxlLnQuYmluZChlKSk7ZS5jaGFuZ2VMYW5ndWFnZShlLm9wdGlvbnMubG5nLGgpfTtyZXR1cm4gdGhpcy5vcHRpb25zLnJlc291cmNlc3x8IXRoaXMub3B0aW9ucy5pbml0SW1tZWRpYXRlP20oKTpzZXRUaW1lb3V0KG0sMCkseX19LHtrZXk6ImxvYWRSZXNvdXJjZXMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBhPXRoaXMsbz1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06ZWUscz1vLHU9dHlwZW9mIGU9PSJzdHJpbmciP2U6dGhpcy5sYW5ndWFnZTtpZih0eXBlb2YgZT09ImZ1bmN0aW9uIiYmKHM9ZSksIXRoaXMub3B0aW9ucy5yZXNvdXJjZXN8fHRoaXMub3B0aW9ucy5wYXJ0aWFsQnVuZGxlZExhbmd1YWdlcyl7aWYodSYmdS50b0xvd2VyQ2FzZSgpPT09ImNpbW9kZSIpcmV0dXJuIHMoKTt2YXIgbD1bXSxjPWZ1bmN0aW9uKHApe2lmKHApe3ZhciB2PWEuc2VydmljZXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkocCk7di5mb3JFYWNoKGZ1bmN0aW9uKHkpe2wuaW5kZXhPZih5KTwwJiZsLnB1c2goeSl9KX19O2lmKHUpYyh1KTtlbHNle3ZhciBmPXRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy5nZXRGYWxsYmFja0NvZGVzKHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZyk7Zi5mb3JFYWNoKGZ1bmN0aW9uKGcpe3JldHVybiBjKGcpfSl9dGhpcy5vcHRpb25zLnByZWxvYWQmJnRoaXMub3B0aW9ucy5wcmVsb2FkLmZvckVhY2goZnVuY3Rpb24oZyl7cmV0dXJuIGMoZyl9KSx0aGlzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3IubG9hZChsLHRoaXMub3B0aW9ucy5ucyxmdW5jdGlvbihnKXshZyYmIWEucmVzb2x2ZWRMYW5ndWFnZSYmYS5sYW5ndWFnZSYmYS5zZXRSZXNvbHZlZExhbmd1YWdlKGEubGFuZ3VhZ2UpLHMoZyl9KX1lbHNlIHMobnVsbCl9fSx7a2V5OiJyZWxvYWRSZXNvdXJjZXMiLHZhbHVlOmZ1bmN0aW9uKGUsYSxvKXt2YXIgcz0kKCk7cmV0dXJuIGV8fChlPXRoaXMubGFuZ3VhZ2VzKSxhfHwoYT10aGlzLm9wdGlvbnMubnMpLG98fChvPWVlKSx0aGlzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3IucmVsb2FkKGUsYSxmdW5jdGlvbih1KXtzLnJlc29sdmUoKSxvKHUpfSksc319LHtrZXk6InVzZSIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJZb3UgYXJlIHBhc3NpbmcgYW4gdW5kZWZpbmVkIG1vZHVsZSEgUGxlYXNlIGNoZWNrIHRoZSBvYmplY3QgeW91IGFyZSBwYXNzaW5nIHRvIGkxOG5leHQudXNlKCkiKTtpZighZS50eXBlKXRocm93IG5ldyBFcnJvcigiWW91IGFyZSBwYXNzaW5nIGEgd3JvbmcgbW9kdWxlISBQbGVhc2UgY2hlY2sgdGhlIG9iamVjdCB5b3UgYXJlIHBhc3NpbmcgdG8gaTE4bmV4dC51c2UoKSIpO3JldHVybiBlLnR5cGU9PT0iYmFja2VuZCImJih0aGlzLm1vZHVsZXMuYmFja2VuZD1lKSwoZS50eXBlPT09ImxvZ2dlciJ8fGUubG9nJiZlLndhcm4mJmUuZXJyb3IpJiYodGhpcy5tb2R1bGVzLmxvZ2dlcj1lKSxlLnR5cGU9PT0ibGFuZ3VhZ2VEZXRlY3RvciImJih0aGlzLm1vZHVsZXMubGFuZ3VhZ2VEZXRlY3Rvcj1lKSxlLnR5cGU9PT0iaTE4bkZvcm1hdCImJih0aGlzLm1vZHVsZXMuaTE4bkZvcm1hdD1lKSxlLnR5cGU9PT0icG9zdFByb2Nlc3NvciImJlBlLmFkZFBvc3RQcm9jZXNzb3IoZSksZS50eXBlPT09ImZvcm1hdHRlciImJih0aGlzLm1vZHVsZXMuZm9ybWF0dGVyPWUpLGUudHlwZT09PSIzcmRQYXJ0eSImJnRoaXMubW9kdWxlcy5leHRlcm5hbC5wdXNoKGUpLHRoaXN9fSx7a2V5OiJzZXRSZXNvbHZlZExhbmd1YWdlIix2YWx1ZTpmdW5jdGlvbihlKXtpZighKCFlfHwhdGhpcy5sYW5ndWFnZXMpJiYhKFsiY2ltb2RlIiwiZGV2Il0uaW5kZXhPZihlKT4tMSkpZm9yKHZhciBhPTA7YTx0aGlzLmxhbmd1YWdlcy5sZW5ndGg7YSsrKXt2YXIgbz10aGlzLmxhbmd1YWdlc1thXTtpZighKFsiY2ltb2RlIiwiZGV2Il0uaW5kZXhPZihvKT4tMSkmJnRoaXMuc3RvcmUuaGFzTGFuZ3VhZ2VTb21lVHJhbnNsYXRpb25zKG8pKXt0aGlzLnJlc29sdmVkTGFuZ3VhZ2U9bzticmVha319fX0se2tleToiY2hhbmdlTGFuZ3VhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsYSl7dmFyIG89dGhpczt0aGlzLmlzTGFuZ3VhZ2VDaGFuZ2luZ1RvPWU7dmFyIHM9JCgpO3RoaXMuZW1pdCgibGFuZ3VhZ2VDaGFuZ2luZyIsZSk7dmFyIHU9ZnVuY3Rpb24oZyl7by5sYW5ndWFnZT1nLG8ubGFuZ3VhZ2VzPW8uc2VydmljZXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkoZyksby5yZXNvbHZlZExhbmd1YWdlPXZvaWQgMCxvLnNldFJlc29sdmVkTGFuZ3VhZ2UoZyl9LGw9ZnVuY3Rpb24oZyxwKXtwPyh1KHApLG8udHJhbnNsYXRvci5jaGFuZ2VMYW5ndWFnZShwKSxvLmlzTGFuZ3VhZ2VDaGFuZ2luZ1RvPXZvaWQgMCxvLmVtaXQoImxhbmd1YWdlQ2hhbmdlZCIscCksby5sb2dnZXIubG9nKCJsYW5ndWFnZUNoYW5nZWQiLHApKTpvLmlzTGFuZ3VhZ2VDaGFuZ2luZ1RvPXZvaWQgMCxzLnJlc29sdmUoZnVuY3Rpb24oKXtyZXR1cm4gby50LmFwcGx5KG8sYXJndW1lbnRzKX0pLGEmJmEoZyxmdW5jdGlvbigpe3JldHVybiBvLnQuYXBwbHkobyxhcmd1bWVudHMpfSl9LGM9ZnVuY3Rpb24oZyl7IWUmJiFnJiZvLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3ImJihnPVtdKTt2YXIgcD10eXBlb2YgZz09InN0cmluZyI/ZzpvLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuZ2V0QmVzdE1hdGNoRnJvbUNvZGVzKGcpO3AmJihvLmxhbmd1YWdlfHx1KHApLG8udHJhbnNsYXRvci5sYW5ndWFnZXx8by50cmFuc2xhdG9yLmNoYW5nZUxhbmd1YWdlKHApLG8uc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciYmby5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmNhY2hlVXNlckxhbmd1YWdlKHApKSxvLmxvYWRSZXNvdXJjZXMocCxmdW5jdGlvbih2KXtsKHYscCl9KX07cmV0dXJuIWUmJnRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciYmIXRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5hc3luYz9jKHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3QoKSk6IWUmJnRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciYmdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmFzeW5jP3RoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3QoYyk6YyhlKSxzfX0se2tleToiZ2V0Rml4ZWRUIix2YWx1ZTpmdW5jdGlvbihlLGEsbyl7dmFyIHM9dGhpcyx1PWZ1bmN0aW9uIGwoYyxmKXt2YXIgZztpZihQKGYpIT09Im9iamVjdCIpe2Zvcih2YXIgcD1hcmd1bWVudHMubGVuZ3RoLHY9bmV3IEFycmF5KHA+Mj9wLTI6MCkseT0yO3k8cDt5Kyspdlt5LTJdPWFyZ3VtZW50c1t5XTtnPXMub3B0aW9ucy5vdmVybG9hZFRyYW5zbGF0aW9uT3B0aW9uSGFuZGxlcihbYyxmXS5jb25jYXQodikpfWVsc2UgZz1DKHt9LGYpO2cubG5nPWcubG5nfHxsLmxuZyxnLmxuZ3M9Zy5sbmdzfHxsLmxuZ3MsZy5ucz1nLm5zfHxsLm5zLGcua2V5UHJlZml4PWcua2V5UHJlZml4fHxvfHxsLmtleVByZWZpeDt2YXIgbT1zLm9wdGlvbnMua2V5U2VwYXJhdG9yfHwiLiIsZD1nLmtleVByZWZpeD8iIi5jb25jYXQoZy5rZXlQcmVmaXgpLmNvbmNhdChtKS5jb25jYXQoYyk6YztyZXR1cm4gcy50KGQsZyl9O3JldHVybiB0eXBlb2YgZT09InN0cmluZyI/dS5sbmc9ZTp1LmxuZ3M9ZSx1Lm5zPWEsdS5rZXlQcmVmaXg9byx1fX0se2tleToidCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gdGhpcy50cmFuc2xhdG9yJiYoZT10aGlzLnRyYW5zbGF0b3IpLnRyYW5zbGF0ZS5hcHBseShlLGFyZ3VtZW50cyl9fSx7a2V5OiJleGlzdHMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIHRoaXMudHJhbnNsYXRvciYmKGU9dGhpcy50cmFuc2xhdG9yKS5leGlzdHMuYXBwbHkoZSxhcmd1bWVudHMpfX0se2tleToic2V0RGVmYXVsdE5hbWVzcGFjZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zLmRlZmF1bHROUz1lfX0se2tleToiaGFzTG9hZGVkTmFtZXNwYWNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgYT10aGlzLG89YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9O2lmKCF0aGlzLmlzSW5pdGlhbGl6ZWQpcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oImhhc0xvYWRlZE5hbWVzcGFjZTogaTE4bmV4dCB3YXMgbm90IGluaXRpYWxpemVkIix0aGlzLmxhbmd1YWdlcyksITE7aWYoIXRoaXMubGFuZ3VhZ2VzfHwhdGhpcy5sYW5ndWFnZXMubGVuZ3RoKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKCJoYXNMb2FkZWROYW1lc3BhY2U6IGkxOG4ubGFuZ3VhZ2VzIHdlcmUgdW5kZWZpbmVkIG9yIGVtcHR5Iix0aGlzLmxhbmd1YWdlcyksITE7dmFyIHM9dGhpcy5yZXNvbHZlZExhbmd1YWdlfHx0aGlzLmxhbmd1YWdlc1swXSx1PXRoaXMub3B0aW9ucz90aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmc6ITEsbD10aGlzLmxhbmd1YWdlc1t0aGlzLmxhbmd1YWdlcy5sZW5ndGgtMV07aWYocy50b0xvd2VyQ2FzZSgpPT09ImNpbW9kZSIpcmV0dXJuITA7dmFyIGM9ZnVuY3Rpb24ocCx2KXt2YXIgeT1hLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3Iuc3RhdGVbIiIuY29uY2F0KHAsInwiKS5jb25jYXQodildO3JldHVybiB5PT09LTF8fHk9PT0yfTtpZihvLnByZWNoZWNrKXt2YXIgZj1vLnByZWNoZWNrKHRoaXMsYyk7aWYoZiE9PXZvaWQgMClyZXR1cm4gZn1yZXR1cm4hISh0aGlzLmhhc1Jlc291cmNlQnVuZGxlKHMsZSl8fCF0aGlzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3IuYmFja2VuZHx8dGhpcy5vcHRpb25zLnJlc291cmNlcyYmIXRoaXMub3B0aW9ucy5wYXJ0aWFsQnVuZGxlZExhbmd1YWdlc3x8YyhzLGUpJiYoIXV8fGMobCxlKSkpfX0se2tleToibG9hZE5hbWVzcGFjZXMiLHZhbHVlOmZ1bmN0aW9uKGUsYSl7dmFyIG89dGhpcyxzPSQoKTtyZXR1cm4gdGhpcy5vcHRpb25zLm5zPyh0eXBlb2YgZT09InN0cmluZyImJihlPVtlXSksZS5mb3JFYWNoKGZ1bmN0aW9uKHUpe28ub3B0aW9ucy5ucy5pbmRleE9mKHUpPDAmJm8ub3B0aW9ucy5ucy5wdXNoKHUpfSksdGhpcy5sb2FkUmVzb3VyY2VzKGZ1bmN0aW9uKHUpe3MucmVzb2x2ZSgpLGEmJmEodSl9KSxzKTooYSYmYSgpLFByb21pc2UucmVzb2x2ZSgpKX19LHtrZXk6ImxvYWRMYW5ndWFnZXMiLHZhbHVlOmZ1bmN0aW9uKGUsYSl7dmFyIG89JCgpO3R5cGVvZiBlPT0ic3RyaW5nIiYmKGU9W2VdKTt2YXIgcz10aGlzLm9wdGlvbnMucHJlbG9hZHx8W10sdT1lLmZpbHRlcihmdW5jdGlvbihsKXtyZXR1cm4gcy5pbmRleE9mKGwpPDB9KTtyZXR1cm4gdS5sZW5ndGg/KHRoaXMub3B0aW9ucy5wcmVsb2FkPXMuY29uY2F0KHUpLHRoaXMubG9hZFJlc291cmNlcyhmdW5jdGlvbihsKXtvLnJlc29sdmUoKSxhJiZhKGwpfSksbyk6KGEmJmEoKSxQcm9taXNlLnJlc29sdmUoKSl9fSx7a2V5OiJkaXIiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGV8fChlPXRoaXMucmVzb2x2ZWRMYW5ndWFnZXx8KHRoaXMubGFuZ3VhZ2VzJiZ0aGlzLmxhbmd1YWdlcy5sZW5ndGg+MD90aGlzLmxhbmd1YWdlc1swXTp0aGlzLmxhbmd1YWdlKSksIWUpcmV0dXJuInJ0bCI7dmFyIGE9WyJhciIsInNodSIsInNxciIsInNzaCIsInhhYSIsInloZCIsInl1ZCIsImFhbyIsImFiaCIsImFidiIsImFjbSIsImFjcSIsImFjdyIsImFjeCIsImFjeSIsImFkZiIsImFkcyIsImFlYiIsImFlYyIsImFmYiIsImFqcCIsImFwYyIsImFwZCIsImFyYiIsImFycSIsImFycyIsImFyeSIsImFyeiIsImF1eiIsImF2bCIsImF5aCIsImF5bCIsImF5biIsImF5cCIsImJieiIsInBnYSIsImhlIiwiaXciLCJwcyIsInBidCIsInBidSIsInBzdCIsInBycCIsInByZCIsInVnIiwidXIiLCJ5ZGQiLCJ5ZHMiLCJ5aWgiLCJqaSIsInlpIiwiaGJvIiwibWVuIiwieG1uIiwiZmEiLCJqcHIiLCJwZW8iLCJwZXMiLCJwcnMiLCJkdiIsInNhbSIsImNrYiJdO3JldHVybiBhLmluZGV4T2YodGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGUpKT4tMXx8ZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoIi1hcmFiIik+MT8icnRsIjoibHRyIn19LHtrZXk6ImNsb25lSW5zdGFuY2UiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxhPWFyZ3VtZW50cy5sZW5ndGg+MCYmYXJndW1lbnRzWzBdIT09dm9pZCAwP2FyZ3VtZW50c1swXTp7fSxvPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTplZSxzPUMoQyhDKHt9LHRoaXMub3B0aW9ucyksYSkse2lzQ2xvbmU6ITB9KSx1PW5ldyBuKHMpOyhhLmRlYnVnIT09dm9pZCAwfHxhLnByZWZpeCE9PXZvaWQgMCkmJih1LmxvZ2dlcj11LmxvZ2dlci5jbG9uZShhKSk7dmFyIGw9WyJzdG9yZSIsInNlcnZpY2VzIiwibGFuZ3VhZ2UiXTtyZXR1cm4gbC5mb3JFYWNoKGZ1bmN0aW9uKGMpe3VbY109ZVtjXX0pLHUuc2VydmljZXM9Qyh7fSx0aGlzLnNlcnZpY2VzKSx1LnNlcnZpY2VzLnV0aWxzPXtoYXNMb2FkZWROYW1lc3BhY2U6dS5oYXNMb2FkZWROYW1lc3BhY2UuYmluZCh1KX0sdS50cmFuc2xhdG9yPW5ldyBrZSh1LnNlcnZpY2VzLHUub3B0aW9ucyksdS50cmFuc2xhdG9yLm9uKCIqIixmdW5jdGlvbihjKXtmb3IodmFyIGY9YXJndW1lbnRzLmxlbmd0aCxnPW5ldyBBcnJheShmPjE/Zi0xOjApLHA9MTtwPGY7cCsrKWdbcC0xXT1hcmd1bWVudHNbcF07dS5lbWl0LmFwcGx5KHUsW2NdLmNvbmNhdChnKSl9KSx1LmluaXQocyxvKSx1LnRyYW5zbGF0b3Iub3B0aW9ucz11Lm9wdGlvbnMsdS50cmFuc2xhdG9yLmJhY2tlbmRDb25uZWN0b3Iuc2VydmljZXMudXRpbHM9e2hhc0xvYWRlZE5hbWVzcGFjZTp1Lmhhc0xvYWRlZE5hbWVzcGFjZS5iaW5kKHUpfSx1fX0se2tleToidG9KU09OIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybntvcHRpb25zOnRoaXMub3B0aW9ucyxzdG9yZTp0aGlzLnN0b3JlLGxhbmd1YWdlOnRoaXMubGFuZ3VhZ2UsbGFuZ3VhZ2VzOnRoaXMubGFuZ3VhZ2VzLHJlc29sdmVkTGFuZ3VhZ2U6dGhpcy5yZXNvbHZlZExhbmd1YWdlfX19XSksbn0oSSk7Rih0ZSwiY3JlYXRlSW5zdGFuY2UiLGZ1bmN0aW9uKCl7dmFyIGk9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9LHQ9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDA7cmV0dXJuIG5ldyB0ZShpLHQpfSk7dmFyIFM9dGUuY3JlYXRlSW5zdGFuY2UoKTtTLmNyZWF0ZUluc3RhbmNlPXRlLmNyZWF0ZUluc3RhbmNlLFMuY3JlYXRlSW5zdGFuY2UsUy5pbml0LFMubG9hZFJlc291cmNlcyxTLnJlbG9hZFJlc291cmNlcyxTLnVzZSxTLmNoYW5nZUxhbmd1YWdlLFMuZ2V0Rml4ZWRULFMudCxTLmV4aXN0cyxTLnNldERlZmF1bHROYW1lc3BhY2UsUy5oYXNMb2FkZWROYW1lc3BhY2UsUy5sb2FkTmFtZXNwYWNlcyxTLmxvYWRMYW5ndWFnZXM7ZnVuY3Rpb24gUnQoaSx0KXtyZXR1cm4gdD9gJHtpfV8ke3R9YDppfWZ1bmN0aW9uIHVlKGkpe3JldHVybiBpLnJlZHVjZSgodCxuKT0+dCtuLDApL2kubGVuZ3RofWZ1bmN0aW9uIERlKGkpe3JldHVybiBpLnJlZHVjZSgodCxuKT0+dCtuLDApfWZ1bmN0aW9uIGt0KGkpe2NvbnN0IHQ9aS5zb3J0KChyLGUpPT5yLWUpLG49TWF0aC5mbG9vcih0Lmxlbmd0aC8yKTtyZXR1cm4gdC5sZW5ndGglMj09PTA/KHRbbl0rdFtuLTFdKS8yOnRbbl19ZnVuY3Rpb24gVGUoaSl7Y29uc3QgdD11ZShpKTtyZXR1cm4gdWUoaS5tYXAobj0+KG4tdCkqKjIpKX1mdW5jdGlvbiBqdChpKXtyZXR1cm4gTWF0aC5zcXJ0KFRlKGkpKX1mdW5jdGlvbiBOdChpKXtsZXQgdD0tMS8wO2ZvcihsZXQgbiBvZiBpKW4+dCYmKHQ9bik7cmV0dXJuIHR9ZnVuY3Rpb24gQ3QoaSl7bGV0IHQ9MS8wO2ZvcihsZXQgbiBvZiBpKW48dCYmKHQ9bik7cmV0dXJuIHR9ZnVuY3Rpb24gRXQoaSl7cmV0dXJuIGkubGVuZ3RofWZ1bmN0aW9uIF90KGkpe3JldHVybiBuZXcgU2V0KGkpLnNpemV9Y29uc3QgRnQ9e3N1bTpEZSxtZWFuOnVlLG1lZGlhbjprdCxzdGRldjpqdCx2YXJpYW5jZTpUZSxtYXg6TnQsbWluOkN0LGNvdW50OkV0LGRpc3RpbmN0Q291bnQ6X3R9LEl0PSJfX18iO2Z1bmN0aW9uIER0KGksdCl7dmFyIG87Y29uc3R7Z3JvdXBCeTpuLG1lYXN1cmVzOnJ9PXQsZT1uZXcgTWFwLGE9bmV3IE1hcDtmb3IobGV0IHMgb2YgaSl7Y29uc3QgdT1uLm1hcChsPT5zW2xdKS5qb2luKEl0KTthLmhhcyh1KXx8YS5zZXQodSxbXSksKG89YS5nZXQodSkpPT1udWxsfHxvLnB1c2gocyl9Zm9yKGxldFtzLHVdb2YgYSl7aWYodS5sZW5ndGg9PT0wKWNvbnRpbnVlO2xldCBsPXt9O2ZvcihsZXQgYyBvZiBuKWxbY109dVswXVtjXTtmb3IobGV0IGMgb2Ygcil7Y29uc3QgZj1jLmFzRmllbGRLZXl8fFJ0KGMuZmllbGQsYy5hZ2cpO2xbZl09PT12b2lkIDAmJihsW2ZdPTApO2NvbnN0IGc9dS5tYXAodj0+dltjLmZpZWxkXSkubWFwKHY9PmMuZm9ybWF0P25ldyBEYXRlKHYpLmdldFRpbWUoKTp2KSxwPUZ0W2MuYWdnXT8/RGU7bFtmXT1wKGcpfWUuc2V0KHMsbCl9cmV0dXJuIEFycmF5LmZyb20oZS52YWx1ZXMoKSl9ZnVuY3Rpb24gVHQoaSx0KXtjb25zdHtmb2xkQnk6bixuZXdGb2xkS2V5Q29sOnIsbmV3Rm9sZFZhbHVlQ29sOmV9PXQsYT1bXTtmb3IobGV0IG8gb2YgaSlmb3IobGV0IHMgb2Ygbil7Y29uc3QgdT17Li4ub307dVtyXT1zLHVbZV09b1tzXSxkZWxldGUgdVtzXSxhLnB1c2godSl9cmV0dXJuIGF9ZnVuY3Rpb24gQXQoaSx0KXtjb25zdHtiaW5CeTpuLG5ld0JpbkNvbDpyLGJpblNpemU6ZX09dDtsZXQgYT0xLzAsbz0tMS8wO2ZvcihsZXQgdT0wO3U8aS5sZW5ndGg7dSsrKXtsZXQgbD1pW3VdW25dO2w+byYmKG89bCksbDxhJiYoYT1sKX1jb25zdCBzPShvLWEpL2U7cmV0dXJuIGkubWFwKHU9PntsZXQgbD1NYXRoLmZsb29yKCh1W25dLWEpL3MpO3JldHVybiBsPT09ZSYmKGw9ZS0xKSx7Li4udSxbcl06W2wqcythLChsKzEpKnMrYV19fSl9ZnVuY3Rpb24gS3QoaSx0KXtzd2l0Y2godC5vcCl7Y2FzZSJhZ2dyZWdhdGUiOnJldHVybiBEdChpLHQpO2Nhc2UiZm9sZCI6cmV0dXJuIFR0KGksdCk7Y2FzZSJiaW4iOnJldHVybiBBdChpLHQpO2Nhc2UicmF3IjpkZWZhdWx0OnJldHVybiBpfX1jb25zdCBVdD1pPT57dHJ5e2NvbnN0e2RhdGFTb3VyY2U6dCxxdWVyeTpufT1pLmRhdGEscj1LdCh0LG4pO3NlbGYucG9zdE1lc3NhZ2Uocil9Y2F0Y2godCl7Y29uc29sZS5lcnJvcih0LnN0YWNrKSxzZWxmLnBvc3RNZXNzYWdlKHQuc3RhY2spfX07c2VsZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixVdCwhMSl9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD12aWV3UXVlcnkud29ya2VyLTc4OTZlYWQ1LmpzLm1hcAo=",L7=typeof window<"u"&&window.Blob&&new Blob([atob(Jae)],{type:"text/javascript;charset=utf-8"});function tVe(){const e=L7&&(window.URL||window.webkitURL).createObjectURL(L7);try{return e?new Worker(e):new Worker("data:application/javascript;base64,"+Jae)}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}const Bae="dmFyIHk9T2JqZWN0LmRlZmluZVByb3BlcnR5O3ZhciBDPShvLGEscCk9PmEgaW4gbz95KG8sYSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6cH0pOm9bYV09cDt2YXIgUz0obyxhLHApPT4oQyhvLHR5cGVvZiBhIT0ic3ltYm9sIj9hKyIiOmEscCkscCk7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIG8odCxlLHIsbCxjLG4pe2lmKGw+PWUubGVuZ3RoKXJldHVybjtjb25zdCBpPXJbZVtsXV0sdT1gJHt0LnVuaXF1ZUtleX1fXyR7aX1gO2xldCBoPXQuY2hpbGRyZW4uZmluZChmPT5mLmtleT09PWkpO2lmKCFoKXtoPXtrZXk6aSx2YWx1ZTppLHNvcnQ6bD09PWUubGVuZ3RoLTEmJm4/cltuLmZpZF0/P2BfJHtpfWA6aSx1bmlxdWVLZXk6dSxmaWVsZEtleTplW2xdLGNoaWxkcmVuOltdLHBhdGg6Wy4uLnQucGF0aCx7a2V5OmVbbF0sdmFsdWU6aX1dLGhlaWdodDplLmxlbmd0aC1sLTEsaXNDb2xsYXBzZWQ6ITF9LGMuaW5jbHVkZXModC51bmlxdWVLZXkpJiYodC5pc0NvbGxhcHNlZD0hMCk7Y29uc3QgZj1sPT09ZS5sZW5ndGgtMSYmKG49PW51bGw/dm9pZCAwOm4udHlwZSk9PT0iZGVzY2VuZGluZyI7dC5jaGlsZHJlbi5zcGxpY2UoYSh0LmNoaWxkcmVuLGguc29ydCxmKSwwLGgpfW8oaCxlLHIsbCsxLGMsbil9ZnVuY3Rpb24gYSh0LGUscj0hMSl7bGV0IGw9MCxjPXQubGVuZ3RoLTE7Zm9yKDtsPD1jOyl7bGV0IG49TWF0aC5mbG9vcigobCtjKS8yKSxpPXRbbl0uc29ydDtpZih0eXBlb2YgaT09Im51bWJlciImJnR5cGVvZiBlPT0ibnVtYmVyIilyIT09aTxlP2w9bisxOmM9bi0xO2Vsc2V7bGV0IHU9U3RyaW5nKGkpLmxvY2FsZUNvbXBhcmUoU3RyaW5nKGUpKTtyIT09dTwwP2w9bisxOmM9bi0xfX1yZXR1cm4gbH1jb25zdCBwPSJfX3Jvb3QiLEU9Il9fdG90YWwiO2Z1bmN0aW9uIE0odCl7aWYodC5jaGlsZHJlbi5sZW5ndGg+MCl7dC5jaGlsZHJlbi5wdXNoKHtrZXk6RSx2YWx1ZToidG90YWwiLHNvcnQ6IiIsZmllbGRLZXk6dC5jaGlsZHJlblswXS5maWVsZEtleSx1bmlxdWVLZXk6YCR7dC51bmlxdWVLZXl9JHtFfWAsY2hpbGRyZW46W10scGF0aDpbXSxoZWlnaHQ6dC5jaGlsZHJlblswXS5oZWlnaHQsaXNDb2xsYXBzZWQ6ITB9KTtmb3IobGV0IGU9MDtlPHQuY2hpbGRyZW4ubGVuZ3RoLTE7ZSsrKU0odC5jaGlsZHJlbltlXSl9fWZ1bmN0aW9uIGcodCxlLHIsbCxjLG4pe2NvbnN0IGk9e2tleTpwLHZhbHVlOiJyb290IixmaWVsZEtleToicm9vdCIsc29ydDoiIix1bmlxdWVLZXk6cCxjaGlsZHJlbjpbXSxwYXRoOltdLGhlaWdodDp0Lmxlbmd0aCxpc0NvbGxhcHNlZDohMX07Zm9yKGxldCB1IG9mIGUpbyhpLHQsdSwwLHIsYyk7aWYobilmb3IobGV0IHUgb2YgbilvKGksdCx1LDAscix7ZmlkOiIiLHR5cGU6KGM9PW51bGw/dm9pZCAwOmMudHlwZSk/PyJhc2NlbmRpbmcifSk7cmV0dXJuIGwmJk0oaSksaX1jbGFzcyBOe2NvbnN0cnVjdG9yKGUpe1ModGhpcywidHJlZSIpO1ModGhpcywibm9kZVN0YWNrIixbXSk7Uyh0aGlzLCJjdXJyZW50IixudWxsKTt0aGlzLnRyZWU9ZX1maXJzdCgpe2xldCBlPXRoaXMudHJlZTtmb3IodGhpcy5ub2RlU3RhY2s9W2VdO2UuY2hpbGRyZW4ubGVuZ3RoPjAmJiFlLmlzQ29sbGFwc2VkOyl0aGlzLm5vZGVTdGFjay5wdXNoKGUuY2hpbGRyZW5bMF0pLGU9ZS5jaGlsZHJlblswXTtyZXR1cm4gdGhpcy5jdXJyZW50PWUsdGhpcy5jdXJyZW50fW5leHQoKXtsZXQgZT0hMSxyPTA7Zm9yKDt0aGlzLm5vZGVTdGFjay5sZW5ndGg+MSYmKHIrKywhKHI+MTAwKSk7KXtsZXQgbD10aGlzLm5vZGVTdGFja1t0aGlzLm5vZGVTdGFjay5sZW5ndGgtMV0sYz10aGlzLm5vZGVTdGFja1t0aGlzLm5vZGVTdGFjay5sZW5ndGgtMl0sbj1jLmNoaWxkcmVuLmZpbmRJbmRleChpPT5pLmtleT09PWwua2V5KTtpZihuPT09LTEpYnJlYWs7aWYoZSlpZihsLmNoaWxkcmVuLmxlbmd0aD4wJiYhbC5pc0NvbGxhcHNlZCl7dGhpcy5ub2RlU3RhY2sucHVzaChsLmNoaWxkcmVuWzBdKTtjb250aW51ZX1lbHNlIGJyZWFrO2Vsc2V7aWYobjxjLmNoaWxkcmVuLmxlbmd0aC0xKXt0aGlzLm5vZGVTdGFjay5wb3AoKSx0aGlzLm5vZGVTdGFjay5wdXNoKGMuY2hpbGRyZW5bbisxXSksZT0hMDtjb250aW51ZX1pZihuPj1jLmNoaWxkcmVuLmxlbmd0aC0xKXt0aGlzLm5vZGVTdGFjay5wb3AoKTtjb250aW51ZX19fXJldHVybiBlP3RoaXMuY3VycmVudD10aGlzLm5vZGVTdGFja1t0aGlzLm5vZGVTdGFjay5sZW5ndGgtMV18fG51bGw6dGhpcy5jdXJyZW50PW51bGwsdGhpcy5jdXJyZW50fXByZWRpY2F0ZXMoKXtyZXR1cm4gdGhpcy5ub2RlU3RhY2suZmlsdGVyKGU9PmUua2V5IT09cCkubWFwKGU9Pih7a2V5OmUuZmllbGRLZXksdmFsdWU6ZS52YWx1ZX0pKX19ZnVuY3Rpb24gTyh0LGUscil7Y29uc3QgbD1bXSxjPW5ldyBOKHQpLG49bmV3IE4oZSk7Zm9yKGMuZmlyc3QoKTtjLmN1cnJlbnQhPT1udWxsOyl7Y29uc3QgaT1bXTtmb3Iobi5maXJzdCgpO24uY3VycmVudCE9PW51bGw7KXtjb25zdCB1PWMucHJlZGljYXRlcygpLmNvbmNhdChuLnByZWRpY2F0ZXMoKSkuZmlsdGVyKGY9PmYudmFsdWUhPT0idG90YWwiKSxoPXIuZmlsdGVyKGY9PnUuZXZlcnkoZD0+ZltkLmtleV09PT1kLnZhbHVlKSk7aC5sZW5ndGg+MD9pLnB1c2goaC5yZWR1Y2UoKGYsZCk9Pk9iamVjdC5rZXlzKGYpLmxlbmd0aDxPYmplY3Qua2V5cyhkKS5sZW5ndGg/ZjpkKSk6aS5wdXNoKHZvaWQgMCksbi5uZXh0KCl9bC5wdXNoKGkpLGMubmV4dCgpfXJldHVybiBsfWNvbnN0IG09dD0+dC5jaGlsZHJlbi5sZW5ndGg+MD9bdCwuLi5tKHQuY2hpbGRyZW5bMF0pXTpbdF07ZnVuY3Rpb24gJCh0LGUscixsLGMsbixpKXtsZXQgdSxoO2lmKChpPT1udWxsP3ZvaWQgMDppLm1vZGUpPT09InJvdyIpaWYoaD1nKGUubWFwKGQ9PmQuZmlkKSxyLGMsbiksZS5sZW5ndGg+MCl7Y29uc3QgZD1lLm1hcChzPT5zLmZpZCksXz1tKGguY2hpbGRyZW5bMF0pLm1hcChzPT5zLnZhbHVlKSxrPVtdLHY9W107ci5mb3JFYWNoKHM9PmQuZXZlcnkoKGIscSk9PnNbYl09PT1fW3FdKT9rLnB1c2gocyk6di5wdXNoKHMpKSx1PWcodC5tYXAocz0+cy5maWQpLGssYyxuLGksdil9ZWxzZSB1PWcodC5tYXAoZD0+ZC5maWQpLHIsYyxuLGkpO2Vsc2UgaWYodT1nKHQubWFwKGQ9PmQuZmlkKSxyLGMsbiksaSYmdC5sZW5ndGg+MCl7Y29uc3QgZD10Lm1hcChzPT5zLmZpZCksXz1tKHUuY2hpbGRyZW5bMF0pLm1hcChzPT5zLnZhbHVlKSxrPVtdLHY9W107ci5mb3JFYWNoKHM9PmQuZXZlcnkoKGIscSk9PnNbYl09PT1fW3FdKT9rLnB1c2gocyk6di5wdXNoKHMpKSxoPWcoZS5tYXAocz0+cy5maWQpLGssYyxuLGksdil9ZWxzZSBoPWcoZS5tYXAoZD0+ZC5maWQpLHIsYyxuLGkpO2NvbnN0IGY9Tyh1LGgsWy4uLnIsLi4ubF0pO3JldHVybntsdDp1LHR0OmgsbWV0cmljOmZ9fWNvbnN0IHc9dD0+e2NvbnN0e2RpbXNJblJvdzplLGRpbXNJbkNvbHVtbjpyLGFsbERhdGE6bCxhZ2dEYXRhOmMsY29sbGFwc2VkS2V5TGlzdDpuLHNob3dUYWJsZVN1bW1hcnk6aSxzb3J0OnV9PXQuZGF0YTt0cnl7Y29uc3QgaD0kKGUscixsLGMsbixpLHUpO3NlbGYucG9zdE1lc3NhZ2UoaCl9Y2F0Y2goaCl7c2VsZi5wb3N0TWVzc2FnZSh7ZXJyb3I6aC5tZXNzYWdlfSl9fTtzZWxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHcsITEpfSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVpbGRNZXRyaWNUYWJsZS53b3JrZXItMmNmMGM1M2IuanMubWFwCg==",R7=typeof window<"u"&&window.Blob&&new Blob([atob(Bae)],{type:"text/javascript;charset=utf-8"});function nVe(){const e=R7&&(window.URL||window.webkitURL).createObjectURL(R7);try{return e?new Worker(e):new Worker("data:application/javascript;base64,"+Bae)}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}const Kae="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIFAoaSl7cmV0dXJuIFA9dHlwZW9mIFN5bWJvbD09ImZ1bmN0aW9uIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09InN5bWJvbCI/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdHlwZW9mIFN5bWJvbD09ImZ1bmN0aW9uIiYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9LFAoaSl9ZnVuY3Rpb24gUihpLHQpe2lmKCEoaSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfWZ1bmN0aW9uIEJlKGksdCl7aWYoUChpKSE9PSJvYmplY3QifHxpPT09bnVsbClyZXR1cm4gaTt2YXIgbj1pW1N5bWJvbC50b1ByaW1pdGl2ZV07aWYobiE9PXZvaWQgMCl7dmFyIHI9bi5jYWxsKGksdHx8ImRlZmF1bHQiKTtpZihQKHIpIT09Im9iamVjdCIpcmV0dXJuIHI7dGhyb3cgbmV3IFR5cGVFcnJvcigiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS4iKX1yZXR1cm4odD09PSJzdHJpbmciP1N0cmluZzpOdW1iZXIpKGkpfWZ1bmN0aW9uIGdlKGkpe3ZhciB0PUJlKGksInN0cmluZyIpO3JldHVybiBQKHQpPT09InN5bWJvbCI/dDpTdHJpbmcodCl9ZnVuY3Rpb24gcGUoaSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLGdlKHIua2V5KSxyKX19ZnVuY3Rpb24gayhpLHQsbil7cmV0dXJuIHQmJnBlKGkucHJvdG90eXBlLHQpLG4mJnBlKGksbiksT2JqZWN0LmRlZmluZVByb3BlcnR5KGksInByb3RvdHlwZSIse3dyaXRhYmxlOiExfSksaX1mdW5jdGlvbiBGKGkpe2lmKGk9PT12b2lkIDApdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4gaX1mdW5jdGlvbiBpZShpLHQpe3JldHVybiBpZT1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mLmJpbmQoKTpmdW5jdGlvbihyLGUpe3JldHVybiByLl9fcHJvdG9fXz1lLHJ9LGllKGksdCl9ZnVuY3Rpb24gUShpLHQpe2lmKHR5cGVvZiB0IT0iZnVuY3Rpb24iJiZ0IT09bnVsbCl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpO2kucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTppLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaSwicHJvdG90eXBlIix7d3JpdGFibGU6ITF9KSx0JiZpZShpLHQpfWZ1bmN0aW9uIEIoaSx0KXtpZih0JiYoUCh0KT09PSJvYmplY3QifHx0eXBlb2YgdD09ImZ1bmN0aW9uIikpcmV0dXJuIHQ7aWYodCE9PXZvaWQgMCl0aHJvdyBuZXcgVHlwZUVycm9yKCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZCIpO3JldHVybiBGKGkpfWZ1bmN0aW9uIGooaSl7cmV0dXJuIGo9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCk6ZnVuY3Rpb24obil7cmV0dXJuIG4uX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2Yobil9LGooaSl9ZnVuY3Rpb24gXyhpLHQsbil7cmV0dXJuIHQ9Z2UodCksdCBpbiBpP09iamVjdC5kZWZpbmVQcm9wZXJ0eShpLHQse3ZhbHVlOm4sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTppW3RdPW4saX1mdW5jdGlvbiBNZShpKXtpZihBcnJheS5pc0FycmF5KGkpKXJldHVybiBpfWZ1bmN0aW9uIEhlKGkpe2lmKHR5cGVvZiBTeW1ib2w8InUiJiZpW1N5bWJvbC5pdGVyYXRvcl0hPW51bGx8fGlbIkBAaXRlcmF0b3IiXSE9bnVsbClyZXR1cm4gQXJyYXkuZnJvbShpKX1mdW5jdGlvbiBkZShpLHQpeyh0PT1udWxsfHx0PmkubGVuZ3RoKSYmKHQ9aS5sZW5ndGgpO2Zvcih2YXIgbj0wLHI9bmV3IEFycmF5KHQpO248dDtuKyspcltuXT1pW25dO3JldHVybiByfWZ1bmN0aW9uIEplKGksdCl7aWYoaSl7aWYodHlwZW9mIGk9PSJzdHJpbmciKXJldHVybiBkZShpLHQpO3ZhciBuPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpKS5zbGljZSg4LC0xKTtpZihuPT09Ik9iamVjdCImJmkuY29uc3RydWN0b3ImJihuPWkuY29uc3RydWN0b3IubmFtZSksbj09PSJNYXAifHxuPT09IlNldCIpcmV0dXJuIEFycmF5LmZyb20oaSk7aWYobj09PSJBcmd1bWVudHMifHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSlyZXR1cm4gZGUoaSx0KX19ZnVuY3Rpb24gemUoKXt0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLgpJbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuYCl9ZnVuY3Rpb24gV2UoaSl7cmV0dXJuIE1lKGkpfHxIZShpKXx8SmUoaSl8fHplKCl9ZnVuY3Rpb24gaGUoaSx0KXt2YXIgbj1PYmplY3Qua2V5cyhpKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGkpO3QmJihyPXIuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGksZSkuZW51bWVyYWJsZX0pKSxuLnB1c2guYXBwbHkobixyKX1yZXR1cm4gbn1mdW5jdGlvbiB2ZShpKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgbj1hcmd1bWVudHNbdF0hPW51bGw/YXJndW1lbnRzW3RdOnt9O3QlMj9oZShPYmplY3QobiksITApLmZvckVhY2goZnVuY3Rpb24ocil7XyhpLHIsbltyXSl9KTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyhpLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKTpoZShPYmplY3QobikpLmZvckVhY2goZnVuY3Rpb24ocil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGkscixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4scikpfSl9cmV0dXJuIGl9dmFyIFllPXt0eXBlOiJsb2dnZXIiLGxvZzpmdW5jdGlvbih0KXt0aGlzLm91dHB1dCgibG9nIix0KX0sd2FybjpmdW5jdGlvbih0KXt0aGlzLm91dHB1dCgid2FybiIsdCl9LGVycm9yOmZ1bmN0aW9uKHQpe3RoaXMub3V0cHV0KCJlcnJvciIsdCl9LG91dHB1dDpmdW5jdGlvbih0LG4pe2NvbnNvbGUmJmNvbnNvbGVbdF0mJmNvbnNvbGVbdF0uYXBwbHkoY29uc29sZSxuKX19LEdlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gaSh0KXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06e307Uih0aGlzLGkpLHRoaXMuaW5pdCh0LG4pfXJldHVybiBrKGksW3trZXk6ImluaXQiLHZhbHVlOmZ1bmN0aW9uKG4pe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7fTt0aGlzLnByZWZpeD1yLnByZWZpeHx8ImkxOG5leHQ6Iix0aGlzLmxvZ2dlcj1ufHxZZSx0aGlzLm9wdGlvbnM9cix0aGlzLmRlYnVnPXIuZGVidWd9fSx7a2V5OiJzZXREZWJ1ZyIsdmFsdWU6ZnVuY3Rpb24obil7dGhpcy5kZWJ1Zz1ufX0se2tleToibG9nIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgbj1hcmd1bWVudHMubGVuZ3RoLHI9bmV3IEFycmF5KG4pLGU9MDtlPG47ZSsrKXJbZV09YXJndW1lbnRzW2VdO3JldHVybiB0aGlzLmZvcndhcmQociwibG9nIiwiIiwhMCl9fSx7a2V5OiJ3YXJuIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgbj1hcmd1bWVudHMubGVuZ3RoLHI9bmV3IEFycmF5KG4pLGU9MDtlPG47ZSsrKXJbZV09YXJndW1lbnRzW2VdO3JldHVybiB0aGlzLmZvcndhcmQociwid2FybiIsIiIsITApfX0se2tleToiZXJyb3IiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBuPWFyZ3VtZW50cy5sZW5ndGgscj1uZXcgQXJyYXkobiksZT0wO2U8bjtlKyspcltlXT1hcmd1bWVudHNbZV07cmV0dXJuIHRoaXMuZm9yd2FyZChyLCJlcnJvciIsIiIpfX0se2tleToiZGVwcmVjYXRlIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgbj1hcmd1bWVudHMubGVuZ3RoLHI9bmV3IEFycmF5KG4pLGU9MDtlPG47ZSsrKXJbZV09YXJndW1lbnRzW2VdO3JldHVybiB0aGlzLmZvcndhcmQociwid2FybiIsIldBUk5JTkcgREVQUkVDQVRFRDogIiwhMCl9fSx7a2V5OiJmb3J3YXJkIix2YWx1ZTpmdW5jdGlvbihuLHIsZSxhKXtyZXR1cm4gYSYmIXRoaXMuZGVidWc/bnVsbDoodHlwZW9mIG5bMF09PSJzdHJpbmciJiYoblswXT0iIi5jb25jYXQoZSkuY29uY2F0KHRoaXMucHJlZml4LCIgIikuY29uY2F0KG5bMF0pKSx0aGlzLmxvZ2dlcltyXShuKSl9fSx7a2V5OiJjcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKG4pe3JldHVybiBuZXcgaSh0aGlzLmxvZ2dlcix2ZSh2ZSh7fSx7cHJlZml4OiIiLmNvbmNhdCh0aGlzLnByZWZpeCwiOiIpLmNvbmNhdChuLCI6Iil9KSx0aGlzLm9wdGlvbnMpKX19LHtrZXk6ImNsb25lIix2YWx1ZTpmdW5jdGlvbihuKXtyZXR1cm4gbj1ufHx0aGlzLm9wdGlvbnMsbi5wcmVmaXg9bi5wcmVmaXh8fHRoaXMucHJlZml4LG5ldyBpKHRoaXMubG9nZ2VyLG4pfX1dKSxpfSgpLE49bmV3IEdlLEk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKCl7Uih0aGlzLGkpLHRoaXMub2JzZXJ2ZXJzPXt9fXJldHVybiBrKGksW3trZXk6Im9uIix2YWx1ZTpmdW5jdGlvbihuLHIpe3ZhciBlPXRoaXM7cmV0dXJuIG4uc3BsaXQoIiAiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Uub2JzZXJ2ZXJzW2FdPWUub2JzZXJ2ZXJzW2FdfHxbXSxlLm9ic2VydmVyc1thXS5wdXNoKHIpfSksdGhpc319LHtrZXk6Im9mZiIsdmFsdWU6ZnVuY3Rpb24obixyKXtpZih0aGlzLm9ic2VydmVyc1tuXSl7aWYoIXIpe2RlbGV0ZSB0aGlzLm9ic2VydmVyc1tuXTtyZXR1cm59dGhpcy5vYnNlcnZlcnNbbl09dGhpcy5vYnNlcnZlcnNbbl0uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlIT09cn0pfX19LHtrZXk6ImVtaXQiLHZhbHVlOmZ1bmN0aW9uKG4pe2Zvcih2YXIgcj1hcmd1bWVudHMubGVuZ3RoLGU9bmV3IEFycmF5KHI+MT9yLTE6MCksYT0xO2E8cjthKyspZVthLTFdPWFyZ3VtZW50c1thXTtpZih0aGlzLm9ic2VydmVyc1tuXSl7dmFyIG89W10uY29uY2F0KHRoaXMub2JzZXJ2ZXJzW25dKTtvLmZvckVhY2goZnVuY3Rpb24odSl7dS5hcHBseSh2b2lkIDAsZSl9KX1pZih0aGlzLm9ic2VydmVyc1siKiJdKXt2YXIgcz1bXS5jb25jYXQodGhpcy5vYnNlcnZlcnNbIioiXSk7cy5mb3JFYWNoKGZ1bmN0aW9uKHUpe3UuYXBwbHkodSxbbl0uY29uY2F0KGUpKX0pfX19XSksaX0oKTtmdW5jdGlvbiBNKCl7dmFyIGksdCxuPW5ldyBQcm9taXNlKGZ1bmN0aW9uKHIsZSl7aT1yLHQ9ZX0pO3JldHVybiBuLnJlc29sdmU9aSxuLnJlamVjdD10LG59ZnVuY3Rpb24gbWUoaSl7cmV0dXJuIGk9PW51bGw/IiI6IiIraX1mdW5jdGlvbiBRZShpLHQsbil7aS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3Rbcl0mJihuW3JdPXRbcl0pfSl9ZnVuY3Rpb24gb2UoaSx0LG4pe2Z1bmN0aW9uIHIocyl7cmV0dXJuIHMmJnMuaW5kZXhPZigiIyMjIik+LTE/cy5yZXBsYWNlKC8jIyMvZywiLiIpOnN9ZnVuY3Rpb24gZSgpe3JldHVybiFpfHx0eXBlb2YgaT09InN0cmluZyJ9Zm9yKHZhciBhPXR5cGVvZiB0IT0ic3RyaW5nIj9bXS5jb25jYXQodCk6dC5zcGxpdCgiLiIpO2EubGVuZ3RoPjE7KXtpZihlKCkpcmV0dXJue307dmFyIG89cihhLnNoaWZ0KCkpOyFpW29dJiZuJiYoaVtvXT1uZXcgbiksT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGksbyk/aT1pW29dOmk9e319cmV0dXJuIGUoKT97fTp7b2JqOmksazpyKGEuc2hpZnQoKSl9fWZ1bmN0aW9uIHllKGksdCxuKXt2YXIgcj1vZShpLHQsT2JqZWN0KSxlPXIub2JqLGE9ci5rO2VbYV09bn1mdW5jdGlvbiBaZShpLHQsbixyKXt2YXIgZT1vZShpLHQsT2JqZWN0KSxhPWUub2JqLG89ZS5rO2Fbb109YVtvXXx8W10sciYmKGFbb109YVtvXS5jb25jYXQobikpLHJ8fGFbb10ucHVzaChuKX1mdW5jdGlvbiBaKGksdCl7dmFyIG49b2UoaSx0KSxyPW4ub2JqLGU9bi5rO2lmKHIpcmV0dXJuIHJbZV19ZnVuY3Rpb24gYmUoaSx0LG4pe3ZhciByPVooaSxuKTtyZXR1cm4gciE9PXZvaWQgMD9yOloodCxuKX1mdW5jdGlvbiBPZShpLHQsbil7Zm9yKHZhciByIGluIHQpciE9PSJfX3Byb3RvX18iJiZyIT09ImNvbnN0cnVjdG9yIiYmKHIgaW4gaT90eXBlb2YgaVtyXT09InN0cmluZyJ8fGlbcl1pbnN0YW5jZW9mIFN0cmluZ3x8dHlwZW9mIHRbcl09PSJzdHJpbmcifHx0W3JdaW5zdGFuY2VvZiBTdHJpbmc/biYmKGlbcl09dFtyXSk6T2UoaVtyXSx0W3JdLG4pOmlbcl09dFtyXSk7cmV0dXJuIGl9ZnVuY3Rpb24gQShpKXtyZXR1cm4gaS5yZXBsYWNlKC9bXC1cW1xdXC9ce1x9XChcKVwqXCtcP1wuXFxcXlwkXHxdL2csIlxcJCYiKX12YXIgcWU9eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImIzM5OyIsIi8iOiImI3gyRjsifTtmdW5jdGlvbiBYZShpKXtyZXR1cm4gdHlwZW9mIGk9PSJzdHJpbmciP2kucmVwbGFjZSgvWyY8PiInXC9dL2csZnVuY3Rpb24odCl7cmV0dXJuIHFlW3RdfSk6aX12YXIgcT10eXBlb2Ygd2luZG93PCJ1IiYmd2luZG93Lm5hdmlnYXRvciYmdHlwZW9mIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50RGF0YT4idSImJndpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50JiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIik+LTEsZXQ9WyIgIiwiLCIsIj8iLCIhIiwiOyJdO2Z1bmN0aW9uIHR0KGksdCxuKXt0PXR8fCIiLG49bnx8IiI7dmFyIHI9ZXQuZmlsdGVyKGZ1bmN0aW9uKHMpe3JldHVybiB0LmluZGV4T2Yocyk8MCYmbi5pbmRleE9mKHMpPDB9KTtpZihyLmxlbmd0aD09PTApcmV0dXJuITA7dmFyIGU9bmV3IFJlZ0V4cCgiKCIuY29uY2F0KHIubWFwKGZ1bmN0aW9uKHMpe3JldHVybiBzPT09Ij8iPyJcXD8iOnN9KS5qb2luKCJ8IiksIikiKSksYT0hZS50ZXN0KGkpO2lmKCFhKXt2YXIgbz1pLmluZGV4T2Yobik7bz4wJiYhZS50ZXN0KGkuc3Vic3RyaW5nKDAsbykpJiYoYT0hMCl9cmV0dXJuIGF9ZnVuY3Rpb24gU2UoaSx0KXt2YXIgbj1PYmplY3Qua2V5cyhpKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGkpO3QmJihyPXIuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGksZSkuZW51bWVyYWJsZX0pKSxuLnB1c2guYXBwbHkobixyKX1yZXR1cm4gbn1mdW5jdGlvbiBYKGkpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPWFyZ3VtZW50c1t0XSE9bnVsbD9hcmd1bWVudHNbdF06e307dCUyP1NlKE9iamVjdChuKSwhMCkuZm9yRWFjaChmdW5jdGlvbihyKXtfKGkscixuW3JdKX0pOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGksT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpOlNlKE9iamVjdChuKSkuZm9yRWFjaChmdW5jdGlvbihyKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxyLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobixyKSl9KX1yZXR1cm4gaX1mdW5jdGlvbiBydChpKXt2YXIgdD1udCgpO3JldHVybiBmdW5jdGlvbigpe3ZhciByPWooaSksZTtpZih0KXt2YXIgYT1qKHRoaXMpLmNvbnN0cnVjdG9yO2U9UmVmbGVjdC5jb25zdHJ1Y3Qocixhcmd1bWVudHMsYSl9ZWxzZSBlPXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBCKHRoaXMsZSl9fWZ1bmN0aW9uIG50KCl7aWYodHlwZW9mIFJlZmxlY3Q+InUifHwhUmVmbGVjdC5jb25zdHJ1Y3R8fFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYodHlwZW9mIFByb3h5PT0iZnVuY3Rpb24iKXJldHVybiEwO3RyeXtyZXR1cm4gQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sZnVuY3Rpb24oKXt9KSksITB9Y2F0Y2h7cmV0dXJuITF9fWZ1bmN0aW9uIHdlKGksdCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZhcmd1bWVudHNbMl0hPT12b2lkIDA/YXJndW1lbnRzWzJdOiIuIjtpZihpKXtpZihpW3RdKXJldHVybiBpW3RdO2Zvcih2YXIgcj10LnNwbGl0KG4pLGU9aSxhPTA7YTxyLmxlbmd0aDsrK2Epe2lmKCFlfHx0eXBlb2YgZVtyW2FdXT09InN0cmluZyImJmErMTxyLmxlbmd0aClyZXR1cm47aWYoZVtyW2FdXT09PXZvaWQgMCl7Zm9yKHZhciBvPTIscz1yLnNsaWNlKGEsYStvKS5qb2luKG4pLHU9ZVtzXTt1PT09dm9pZCAwJiZyLmxlbmd0aD5hK287KW8rKyxzPXIuc2xpY2UoYSxhK28pLmpvaW4obiksdT1lW3NdO2lmKHU9PT12b2lkIDApcmV0dXJuO2lmKHU9PT1udWxsKXJldHVybiBudWxsO2lmKHQuZW5kc1dpdGgocykpe2lmKHR5cGVvZiB1PT0ic3RyaW5nIilyZXR1cm4gdTtpZihzJiZ0eXBlb2YgdVtzXT09InN0cmluZyIpcmV0dXJuIHVbc119dmFyIGw9ci5zbGljZShhK28pLmpvaW4obik7cmV0dXJuIGw/d2UodSxsLG4pOnZvaWQgMH1lPWVbclthXV19cmV0dXJuIGV9fXZhciBhdD1mdW5jdGlvbihpKXtRKG4saSk7dmFyIHQ9cnQobik7ZnVuY3Rpb24gbihyKXt2YXIgZSxhPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7bnM6WyJ0cmFuc2xhdGlvbiJdLGRlZmF1bHROUzoidHJhbnNsYXRpb24ifTtyZXR1cm4gUih0aGlzLG4pLGU9dC5jYWxsKHRoaXMpLHEmJkkuY2FsbChGKGUpKSxlLmRhdGE9cnx8e30sZS5vcHRpb25zPWEsZS5vcHRpb25zLmtleVNlcGFyYXRvcj09PXZvaWQgMCYmKGUub3B0aW9ucy5rZXlTZXBhcmF0b3I9Ii4iKSxlLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZT09PXZvaWQgMCYmKGUub3B0aW9ucy5pZ25vcmVKU09OU3RydWN0dXJlPSEwKSxlfXJldHVybiBrKG4sW3trZXk6ImFkZE5hbWVzcGFjZXMiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucy5ucy5pbmRleE9mKGUpPDAmJnRoaXMub3B0aW9ucy5ucy5wdXNoKGUpfX0se2tleToicmVtb3ZlTmFtZXNwYWNlcyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIGE9dGhpcy5vcHRpb25zLm5zLmluZGV4T2YoZSk7YT4tMSYmdGhpcy5vcHRpb25zLm5zLnNwbGljZShhLDEpfX0se2tleToiZ2V0UmVzb3VyY2UiLHZhbHVlOmZ1bmN0aW9uKGUsYSxvKXt2YXIgcz1hcmd1bWVudHMubGVuZ3RoPjMmJmFyZ3VtZW50c1szXSE9PXZvaWQgMD9hcmd1bWVudHNbM106e30sdT1zLmtleVNlcGFyYXRvciE9PXZvaWQgMD9zLmtleVNlcGFyYXRvcjp0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yLGw9cy5pZ25vcmVKU09OU3RydWN0dXJlIT09dm9pZCAwP3MuaWdub3JlSlNPTlN0cnVjdHVyZTp0aGlzLm9wdGlvbnMuaWdub3JlSlNPTlN0cnVjdHVyZSxjPVtlLGFdO28mJnR5cGVvZiBvIT0ic3RyaW5nIiYmKGM9Yy5jb25jYXQobykpLG8mJnR5cGVvZiBvPT0ic3RyaW5nIiYmKGM9Yy5jb25jYXQodT9vLnNwbGl0KHUpOm8pKSxlLmluZGV4T2YoIi4iKT4tMSYmKGM9ZS5zcGxpdCgiLiIpKTt2YXIgZj1aKHRoaXMuZGF0YSxjKTtyZXR1cm4gZnx8IWx8fHR5cGVvZiBvIT0ic3RyaW5nIj9mOndlKHRoaXMuZGF0YSYmdGhpcy5kYXRhW2VdJiZ0aGlzLmRhdGFbZV1bYV0sbyx1KX19LHtrZXk6ImFkZFJlc291cmNlIix2YWx1ZTpmdW5jdGlvbihlLGEsbyxzKXt2YXIgdT1hcmd1bWVudHMubGVuZ3RoPjQmJmFyZ3VtZW50c1s0XSE9PXZvaWQgMD9hcmd1bWVudHNbNF06e3NpbGVudDohMX0sbD10aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yO2w9PT12b2lkIDAmJihsPSIuIik7dmFyIGM9W2UsYV07byYmKGM9Yy5jb25jYXQobD9vLnNwbGl0KGwpOm8pKSxlLmluZGV4T2YoIi4iKT4tMSYmKGM9ZS5zcGxpdCgiLiIpLHM9YSxhPWNbMV0pLHRoaXMuYWRkTmFtZXNwYWNlcyhhKSx5ZSh0aGlzLmRhdGEsYyxzKSx1LnNpbGVudHx8dGhpcy5lbWl0KCJhZGRlZCIsZSxhLG8scyl9fSx7a2V5OiJhZGRSZXNvdXJjZXMiLHZhbHVlOmZ1bmN0aW9uKGUsYSxvKXt2YXIgcz1hcmd1bWVudHMubGVuZ3RoPjMmJmFyZ3VtZW50c1szXSE9PXZvaWQgMD9hcmd1bWVudHNbM106e3NpbGVudDohMX07Zm9yKHZhciB1IGluIG8pKHR5cGVvZiBvW3VdPT0ic3RyaW5nInx8T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseShvW3VdKT09PSJbb2JqZWN0IEFycmF5XSIpJiZ0aGlzLmFkZFJlc291cmNlKGUsYSx1LG9bdV0se3NpbGVudDohMH0pO3Muc2lsZW50fHx0aGlzLmVtaXQoImFkZGVkIixlLGEsbyl9fSx7a2V5OiJhZGRSZXNvdXJjZUJ1bmRsZSIsdmFsdWU6ZnVuY3Rpb24oZSxhLG8scyx1KXt2YXIgbD1hcmd1bWVudHMubGVuZ3RoPjUmJmFyZ3VtZW50c1s1XSE9PXZvaWQgMD9hcmd1bWVudHNbNV06e3NpbGVudDohMX0sYz1bZSxhXTtlLmluZGV4T2YoIi4iKT4tMSYmKGM9ZS5zcGxpdCgiLiIpLHM9byxvPWEsYT1jWzFdKSx0aGlzLmFkZE5hbWVzcGFjZXMoYSk7dmFyIGY9Wih0aGlzLmRhdGEsYyl8fHt9O3M/T2UoZixvLHUpOmY9WChYKHt9LGYpLG8pLHllKHRoaXMuZGF0YSxjLGYpLGwuc2lsZW50fHx0aGlzLmVtaXQoImFkZGVkIixlLGEsbyl9fSx7a2V5OiJyZW1vdmVSZXNvdXJjZUJ1bmRsZSIsdmFsdWU6ZnVuY3Rpb24oZSxhKXt0aGlzLmhhc1Jlc291cmNlQnVuZGxlKGUsYSkmJmRlbGV0ZSB0aGlzLmRhdGFbZV1bYV0sdGhpcy5yZW1vdmVOYW1lc3BhY2VzKGEpLHRoaXMuZW1pdCgicmVtb3ZlZCIsZSxhKX19LHtrZXk6Imhhc1Jlc291cmNlQnVuZGxlIix2YWx1ZTpmdW5jdGlvbihlLGEpe3JldHVybiB0aGlzLmdldFJlc291cmNlKGUsYSkhPT12b2lkIDB9fSx7a2V5OiJnZXRSZXNvdXJjZUJ1bmRsZSIsdmFsdWU6ZnVuY3Rpb24oZSxhKXtyZXR1cm4gYXx8KGE9dGhpcy5vcHRpb25zLmRlZmF1bHROUyksdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEk9PT0idjEiP1goWCh7fSx7fSksdGhpcy5nZXRSZXNvdXJjZShlLGEpKTp0aGlzLmdldFJlc291cmNlKGUsYSl9fSx7a2V5OiJnZXREYXRhQnlMYW5ndWFnZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZGF0YVtlXX19LHtrZXk6Imhhc0xhbmd1YWdlU29tZVRyYW5zbGF0aW9ucyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIGE9dGhpcy5nZXREYXRhQnlMYW5ndWFnZShlKSxvPWEmJk9iamVjdC5rZXlzKGEpfHxbXTtyZXR1cm4hIW8uZmluZChmdW5jdGlvbihzKXtyZXR1cm4gYVtzXSYmT2JqZWN0LmtleXMoYVtzXSkubGVuZ3RoPjB9KX19LHtrZXk6InRvSlNPTiIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhfX1dKSxufShJKSx4ZT17cHJvY2Vzc29yczp7fSxhZGRQb3N0UHJvY2Vzc29yOmZ1bmN0aW9uKHQpe3RoaXMucHJvY2Vzc29yc1t0Lm5hbWVdPXR9LGhhbmRsZTpmdW5jdGlvbih0LG4scixlLGEpe3ZhciBvPXRoaXM7cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbihzKXtvLnByb2Nlc3NvcnNbc10mJihuPW8ucHJvY2Vzc29yc1tzXS5wcm9jZXNzKG4scixlLGEpKX0pLG59fTtmdW5jdGlvbiBQZShpLHQpe3ZhciBuPU9iamVjdC5rZXlzKGkpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoaSk7dCYmKHI9ci5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaSxlKS5lbnVtZXJhYmxlfSkpLG4ucHVzaC5hcHBseShuLHIpfXJldHVybiBufWZ1bmN0aW9uIFMoaSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIG49YXJndW1lbnRzW3RdIT1udWxsP2FyZ3VtZW50c1t0XTp7fTt0JTI/UGUoT2JqZWN0KG4pLCEwKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe18oaSxyLG5bcl0pfSk6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM/T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSk6UGUoT2JqZWN0KG4pKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShpLHIsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLHIpKX0pfXJldHVybiBpfWZ1bmN0aW9uIGl0KGkpe3ZhciB0PW90KCk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHI9aihpKSxlO2lmKHQpe3ZhciBhPWoodGhpcykuY29uc3RydWN0b3I7ZT1SZWZsZWN0LmNvbnN0cnVjdChyLGFyZ3VtZW50cyxhKX1lbHNlIGU9ci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIEIodGhpcyxlKX19ZnVuY3Rpb24gb3QoKXtpZih0eXBlb2YgUmVmbGVjdD4idSJ8fCFSZWZsZWN0LmNvbnN0cnVjdHx8UmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSlyZXR1cm4hMTtpZih0eXBlb2YgUHJveHk9PSJmdW5jdGlvbiIpcmV0dXJuITA7dHJ5e3JldHVybiBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbixbXSxmdW5jdGlvbigpe30pKSwhMH1jYXRjaHtyZXR1cm4hMX19dmFyIExlPXt9LFJlPWZ1bmN0aW9uKGkpe1EobixpKTt2YXIgdD1pdChuKTtmdW5jdGlvbiBuKHIpe3ZhciBlLGE9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9O3JldHVybiBSKHRoaXMsbiksZT10LmNhbGwodGhpcykscSYmSS5jYWxsKEYoZSkpLFFlKFsicmVzb3VyY2VTdG9yZSIsImxhbmd1YWdlVXRpbHMiLCJwbHVyYWxSZXNvbHZlciIsImludGVycG9sYXRvciIsImJhY2tlbmRDb25uZWN0b3IiLCJpMThuRm9ybWF0IiwidXRpbHMiXSxyLEYoZSkpLGUub3B0aW9ucz1hLGUub3B0aW9ucy5rZXlTZXBhcmF0b3I9PT12b2lkIDAmJihlLm9wdGlvbnMua2V5U2VwYXJhdG9yPSIuIiksZS5sb2dnZXI9Ti5jcmVhdGUoInRyYW5zbGF0b3IiKSxlfXJldHVybiBrKG4sW3trZXk6ImNoYW5nZUxhbmd1YWdlIix2YWx1ZTpmdW5jdGlvbihlKXtlJiYodGhpcy5sYW5ndWFnZT1lKX19LHtrZXk6ImV4aXN0cyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIGE9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOntpbnRlcnBvbGF0aW9uOnt9fTtpZihlPT1udWxsKXJldHVybiExO3ZhciBvPXRoaXMucmVzb2x2ZShlLGEpO3JldHVybiBvJiZvLnJlcyE9PXZvaWQgMH19LHtrZXk6ImV4dHJhY3RGcm9tS2V5Iix2YWx1ZTpmdW5jdGlvbihlLGEpe3ZhciBvPWEubnNTZXBhcmF0b3IhPT12b2lkIDA/YS5uc1NlcGFyYXRvcjp0aGlzLm9wdGlvbnMubnNTZXBhcmF0b3I7bz09PXZvaWQgMCYmKG89IjoiKTt2YXIgcz1hLmtleVNlcGFyYXRvciE9PXZvaWQgMD9hLmtleVNlcGFyYXRvcjp0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yLHU9YS5uc3x8dGhpcy5vcHRpb25zLmRlZmF1bHROU3x8W10sbD1vJiZlLmluZGV4T2Yobyk+LTEsYz0hdGhpcy5vcHRpb25zLnVzZXJEZWZpbmVkS2V5U2VwYXJhdG9yJiYhYS5rZXlTZXBhcmF0b3ImJiF0aGlzLm9wdGlvbnMudXNlckRlZmluZWROc1NlcGFyYXRvciYmIWEubnNTZXBhcmF0b3ImJiF0dChlLG8scyk7aWYobCYmIWMpe3ZhciBmPWUubWF0Y2godGhpcy5pbnRlcnBvbGF0b3IubmVzdGluZ1JlZ2V4cCk7aWYoZiYmZi5sZW5ndGg+MClyZXR1cm57a2V5OmUsbmFtZXNwYWNlczp1fTt2YXIgZz1lLnNwbGl0KG8pOyhvIT09c3x8bz09PXMmJnRoaXMub3B0aW9ucy5ucy5pbmRleE9mKGdbMF0pPi0xKSYmKHU9Zy5zaGlmdCgpKSxlPWcuam9pbihzKX1yZXR1cm4gdHlwZW9mIHU9PSJzdHJpbmciJiYodT1bdV0pLHtrZXk6ZSxuYW1lc3BhY2VzOnV9fX0se2tleToidHJhbnNsYXRlIix2YWx1ZTpmdW5jdGlvbihlLGEsbyl7dmFyIHM9dGhpcztpZihQKGEpIT09Im9iamVjdCImJnRoaXMub3B0aW9ucy5vdmVybG9hZFRyYW5zbGF0aW9uT3B0aW9uSGFuZGxlciYmKGE9dGhpcy5vcHRpb25zLm92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyKGFyZ3VtZW50cykpLGF8fChhPXt9KSxlPT1udWxsKXJldHVybiIiO0FycmF5LmlzQXJyYXkoZSl8fChlPVtTdHJpbmcoZSldKTt2YXIgdT1hLnJldHVybkRldGFpbHMhPT12b2lkIDA/YS5yZXR1cm5EZXRhaWxzOnRoaXMub3B0aW9ucy5yZXR1cm5EZXRhaWxzLGw9YS5rZXlTZXBhcmF0b3IhPT12b2lkIDA/YS5rZXlTZXBhcmF0b3I6dGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcixjPXRoaXMuZXh0cmFjdEZyb21LZXkoZVtlLmxlbmd0aC0xXSxhKSxmPWMua2V5LGc9Yy5uYW1lc3BhY2VzLHA9Z1tnLmxlbmd0aC0xXSxtPWEubG5nfHx0aGlzLmxhbmd1YWdlLHk9YS5hcHBlbmROYW1lc3BhY2VUb0NJTW9kZXx8dGhpcy5vcHRpb25zLmFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlO2lmKG0mJm0udG9Mb3dlckNhc2UoKT09PSJjaW1vZGUiKXtpZih5KXt2YXIgdj1hLm5zU2VwYXJhdG9yfHx0aGlzLm9wdGlvbnMubnNTZXBhcmF0b3I7cmV0dXJuIHU/KGQucmVzPSIiLmNvbmNhdChwKS5jb25jYXQodikuY29uY2F0KGYpLGQpOiIiLmNvbmNhdChwKS5jb25jYXQodikuY29uY2F0KGYpfXJldHVybiB1PyhkLnJlcz1mLGQpOmZ9dmFyIGQ9dGhpcy5yZXNvbHZlKGUsYSksaD1kJiZkLnJlcyxPPWQmJmQudXNlZEtleXx8ZixiPWQmJmQuZXhhY3RVc2VkS2V5fHxmLHg9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseShoKSxFPVsiW29iamVjdCBOdW1iZXJdIiwiW29iamVjdCBGdW5jdGlvbl0iLCJbb2JqZWN0IFJlZ0V4cF0iXSxUPWEuam9pbkFycmF5cyE9PXZvaWQgMD9hLmpvaW5BcnJheXM6dGhpcy5vcHRpb25zLmpvaW5BcnJheXMsSD0hdGhpcy5pMThuRm9ybWF0fHx0aGlzLmkxOG5Gb3JtYXQuaGFuZGxlQXNPYmplY3QsSj10eXBlb2YgaCE9InN0cmluZyImJnR5cGVvZiBoIT0iYm9vbGVhbiImJnR5cGVvZiBoIT0ibnVtYmVyIjtpZihIJiZoJiZKJiZFLmluZGV4T2YoeCk8MCYmISh0eXBlb2YgVD09InN0cmluZyImJng9PT0iW29iamVjdCBBcnJheV0iKSl7aWYoIWEucmV0dXJuT2JqZWN0cyYmIXRoaXMub3B0aW9ucy5yZXR1cm5PYmplY3RzKXt0aGlzLm9wdGlvbnMucmV0dXJuZWRPYmplY3RIYW5kbGVyfHx0aGlzLmxvZ2dlci53YXJuKCJhY2Nlc3NpbmcgYW4gb2JqZWN0IC0gYnV0IHJldHVybk9iamVjdHMgb3B0aW9ucyBpcyBub3QgZW5hYmxlZCEiKTt2YXIgVT10aGlzLm9wdGlvbnMucmV0dXJuZWRPYmplY3RIYW5kbGVyP3RoaXMub3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXIoTyxoLFMoUyh7fSxhKSx7fSx7bnM6Z30pKToia2V5ICciLmNvbmNhdChmLCIgKCIpLmNvbmNhdCh0aGlzLmxhbmd1YWdlLCIpJyByZXR1cm5lZCBhbiBvYmplY3QgaW5zdGVhZCBvZiBzdHJpbmcuIik7cmV0dXJuIHU/KGQucmVzPVUsZCk6VX1pZihsKXt2YXIgRGU9eD09PSJbb2JqZWN0IEFycmF5XSIscmU9RGU/W106e30sTnQ9RGU/YjpPO2Zvcih2YXIgViBpbiBoKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChoLFYpKXt2YXIgVGU9IiIuY29uY2F0KE50KS5jb25jYXQobCkuY29uY2F0KFYpO3JlW1ZdPXRoaXMudHJhbnNsYXRlKFRlLFMoUyh7fSxhKSx7am9pbkFycmF5czohMSxuczpnfSkpLHJlW1ZdPT09VGUmJihyZVtWXT1oW1ZdKX1oPXJlfX1lbHNlIGlmKEgmJnR5cGVvZiBUPT0ic3RyaW5nIiYmeD09PSJbb2JqZWN0IEFycmF5XSIpaD1oLmpvaW4oVCksaCYmKGg9dGhpcy5leHRlbmRUcmFuc2xhdGlvbihoLGUsYSxvKSk7ZWxzZXt2YXIgbmU9ITEsej0hMSxBZT1hLmNvdW50IT09dm9pZCAwJiZ0eXBlb2YgYS5jb3VudCE9InN0cmluZyIsdWU9bi5oYXNEZWZhdWx0VmFsdWUoYSksQ3Q9QWU/dGhpcy5wbHVyYWxSZXNvbHZlci5nZXRTdWZmaXgobSxhLmNvdW50LGEpOiIiLFc9YVsiZGVmYXVsdFZhbHVlIi5jb25jYXQoQ3QpXXx8YS5kZWZhdWx0VmFsdWU7IXRoaXMuaXNWYWxpZExvb2t1cChoKSYmdWUmJihuZT0hMCxoPVcpLHRoaXMuaXNWYWxpZExvb2t1cChoKXx8KHo9ITAsaD1mKTt2YXIgRXQ9YS5taXNzaW5nS2V5Tm9WYWx1ZUZhbGxiYWNrVG9LZXl8fHRoaXMub3B0aW9ucy5taXNzaW5nS2V5Tm9WYWx1ZUZhbGxiYWNrVG9LZXksRnQ9RXQmJno/dm9pZCAwOmgsWT11ZSYmVyE9PWgmJnRoaXMub3B0aW9ucy51cGRhdGVNaXNzaW5nO2lmKHp8fG5lfHxZKXtpZih0aGlzLmxvZ2dlci5sb2coWT8idXBkYXRlS2V5IjoibWlzc2luZ0tleSIsbSxwLGYsWT9XOmgpLGwpe3ZhciBLZT10aGlzLnJlc29sdmUoZixTKFMoe30sYSkse30se2tleVNlcGFyYXRvcjohMX0pKTtLZSYmS2UucmVzJiZ0aGlzLmxvZ2dlci53YXJuKCJTZWVtcyB0aGUgbG9hZGVkIHRyYW5zbGF0aW9ucyB3ZXJlIGluIGZsYXQgSlNPTiBmb3JtYXQgaW5zdGVhZCBvZiBuZXN0ZWQuIEVpdGhlciBzZXQga2V5U2VwYXJhdG9yOiBmYWxzZSBvbiBpbml0IG9yIG1ha2Ugc3VyZSB5b3VyIHRyYW5zbGF0aW9ucyBhcmUgcHVibGlzaGVkIGluIG5lc3RlZCBmb3JtYXQuIil9dmFyIEc9W10sYWU9dGhpcy5sYW5ndWFnZVV0aWxzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nLGEubG5nfHx0aGlzLmxhbmd1YWdlKTtpZih0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdUbz09PSJmYWxsYmFjayImJmFlJiZhZVswXSlmb3IodmFyIGZlPTA7ZmU8YWUubGVuZ3RoO2ZlKyspRy5wdXNoKGFlW2ZlXSk7ZWxzZSB0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdUbz09PSJhbGwiP0c9dGhpcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShhLmxuZ3x8dGhpcy5sYW5ndWFnZSk6Ry5wdXNoKGEubG5nfHx0aGlzLmxhbmd1YWdlKTt2YXIgVWU9ZnVuY3Rpb24oJCxjZSxWZSl7dmFyICRlPXVlJiZWZSE9PWg/VmU6RnQ7cy5vcHRpb25zLm1pc3NpbmdLZXlIYW5kbGVyP3Mub3B0aW9ucy5taXNzaW5nS2V5SGFuZGxlcigkLHAsY2UsJGUsWSxhKTpzLmJhY2tlbmRDb25uZWN0b3ImJnMuYmFja2VuZENvbm5lY3Rvci5zYXZlTWlzc2luZyYmcy5iYWNrZW5kQ29ubmVjdG9yLnNhdmVNaXNzaW5nKCQscCxjZSwkZSxZLGEpLHMuZW1pdCgibWlzc2luZ0tleSIsJCxwLGNlLGgpfTt0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmcmJih0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdQbHVyYWxzJiZBZT9HLmZvckVhY2goZnVuY3Rpb24obGUpe3MucGx1cmFsUmVzb2x2ZXIuZ2V0U3VmZml4ZXMobGUsYSkuZm9yRWFjaChmdW5jdGlvbigkKXtVZShbbGVdLGYrJCxhWyJkZWZhdWx0VmFsdWUiLmNvbmNhdCgkKV18fFcpfSl9KTpVZShHLGYsVykpfWg9dGhpcy5leHRlbmRUcmFuc2xhdGlvbihoLGUsYSxkLG8pLHomJmg9PT1mJiZ0aGlzLm9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9NaXNzaW5nS2V5JiYoaD0iIi5jb25jYXQocCwiOiIpLmNvbmNhdChmKSksKHp8fG5lKSYmdGhpcy5vcHRpb25zLnBhcnNlTWlzc2luZ0tleUhhbmRsZXImJih0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSE9PSJ2MSI/aD10aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlcih0aGlzLm9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9NaXNzaW5nS2V5PyIiLmNvbmNhdChwLCI6IikuY29uY2F0KGYpOmYsbmU/aDp2b2lkIDApOmg9dGhpcy5vcHRpb25zLnBhcnNlTWlzc2luZ0tleUhhbmRsZXIoaCkpfXJldHVybiB1PyhkLnJlcz1oLGQpOmh9fSx7a2V5OiJleHRlbmRUcmFuc2xhdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSxhLG8scyx1KXt2YXIgbD10aGlzO2lmKHRoaXMuaTE4bkZvcm1hdCYmdGhpcy5pMThuRm9ybWF0LnBhcnNlKWU9dGhpcy5pMThuRm9ybWF0LnBhcnNlKGUsUyhTKHt9LHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMpLG8pLHMudXNlZExuZyxzLnVzZWROUyxzLnVzZWRLZXkse3Jlc29sdmVkOnN9KTtlbHNlIGlmKCFvLnNraXBJbnRlcnBvbGF0aW9uKXtvLmludGVycG9sYXRpb24mJnRoaXMuaW50ZXJwb2xhdG9yLmluaXQoUyhTKHt9LG8pLHtpbnRlcnBvbGF0aW9uOlMoUyh7fSx0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbiksby5pbnRlcnBvbGF0aW9uKX0pKTt2YXIgYz10eXBlb2YgZT09InN0cmluZyImJihvJiZvLmludGVycG9sYXRpb24mJm8uaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMhPT12b2lkIDA/by5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlczp0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMpLGY7aWYoYyl7dmFyIGc9ZS5tYXRjaCh0aGlzLmludGVycG9sYXRvci5uZXN0aW5nUmVnZXhwKTtmPWcmJmcubGVuZ3RofXZhciBwPW8ucmVwbGFjZSYmdHlwZW9mIG8ucmVwbGFjZSE9InN0cmluZyI/by5yZXBsYWNlOm87aWYodGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcyYmKHA9UyhTKHt9LHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMpLHApKSxlPXRoaXMuaW50ZXJwb2xhdG9yLmludGVycG9sYXRlKGUscCxvLmxuZ3x8dGhpcy5sYW5ndWFnZSxvKSxjKXt2YXIgbT1lLm1hdGNoKHRoaXMuaW50ZXJwb2xhdG9yLm5lc3RpbmdSZWdleHApLHk9bSYmbS5sZW5ndGg7Zjx5JiYoby5uZXN0PSExKX1vLm5lc3QhPT0hMSYmKGU9dGhpcy5pbnRlcnBvbGF0b3IubmVzdChlLGZ1bmN0aW9uKCl7Zm9yKHZhciBoPWFyZ3VtZW50cy5sZW5ndGgsTz1uZXcgQXJyYXkoaCksYj0wO2I8aDtiKyspT1tiXT1hcmd1bWVudHNbYl07cmV0dXJuIHUmJnVbMF09PT1PWzBdJiYhby5jb250ZXh0PyhsLmxvZ2dlci53YXJuKCJJdCBzZWVtcyB5b3UgYXJlIG5lc3RpbmcgcmVjdXJzaXZlbHkga2V5OiAiLmNvbmNhdChPWzBdLCIgaW4ga2V5OiAiKS5jb25jYXQoYVswXSkpLG51bGwpOmwudHJhbnNsYXRlLmFwcGx5KGwsTy5jb25jYXQoW2FdKSl9LG8pKSxvLmludGVycG9sYXRpb24mJnRoaXMuaW50ZXJwb2xhdG9yLnJlc2V0KCl9dmFyIHY9by5wb3N0UHJvY2Vzc3x8dGhpcy5vcHRpb25zLnBvc3RQcm9jZXNzLGQ9dHlwZW9mIHY9PSJzdHJpbmciP1t2XTp2O3JldHVybiBlIT1udWxsJiZkJiZkLmxlbmd0aCYmby5hcHBseVBvc3RQcm9jZXNzb3IhPT0hMSYmKGU9eGUuaGFuZGxlKGQsZSxhLHRoaXMub3B0aW9ucyYmdGhpcy5vcHRpb25zLnBvc3RQcm9jZXNzUGFzc1Jlc29sdmVkP1Moe2kxOG5SZXNvbHZlZDpzfSxvKTpvLHRoaXMpKSxlfX0se2tleToicmVzb2x2ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIGE9dGhpcyxvPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7fSxzLHUsbCxjLGY7cmV0dXJuIHR5cGVvZiBlPT0ic3RyaW5nIiYmKGU9W2VdKSxlLmZvckVhY2goZnVuY3Rpb24oZyl7aWYoIWEuaXNWYWxpZExvb2t1cChzKSl7dmFyIHA9YS5leHRyYWN0RnJvbUtleShnLG8pLG09cC5rZXk7dT1tO3ZhciB5PXAubmFtZXNwYWNlczthLm9wdGlvbnMuZmFsbGJhY2tOUyYmKHk9eS5jb25jYXQoYS5vcHRpb25zLmZhbGxiYWNrTlMpKTt2YXIgdj1vLmNvdW50IT09dm9pZCAwJiZ0eXBlb2Ygby5jb3VudCE9InN0cmluZyIsZD12JiYhby5vcmRpbmFsJiZvLmNvdW50PT09MCYmYS5wbHVyYWxSZXNvbHZlci5zaG91bGRVc2VJbnRsQXBpKCksaD1vLmNvbnRleHQhPT12b2lkIDAmJih0eXBlb2Ygby5jb250ZXh0PT0ic3RyaW5nInx8dHlwZW9mIG8uY29udGV4dD09Im51bWJlciIpJiZvLmNvbnRleHQhPT0iIixPPW8ubG5ncz9vLmxuZ3M6YS5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShvLmxuZ3x8YS5sYW5ndWFnZSxvLmZhbGxiYWNrTG5nKTt5LmZvckVhY2goZnVuY3Rpb24oYil7YS5pc1ZhbGlkTG9va3VwKHMpfHwoZj1iLCFMZVsiIi5jb25jYXQoT1swXSwiLSIpLmNvbmNhdChiKV0mJmEudXRpbHMmJmEudXRpbHMuaGFzTG9hZGVkTmFtZXNwYWNlJiYhYS51dGlscy5oYXNMb2FkZWROYW1lc3BhY2UoZikmJihMZVsiIi5jb25jYXQoT1swXSwiLSIpLmNvbmNhdChiKV09ITAsYS5sb2dnZXIud2Fybigna2V5ICInLmNvbmNhdCh1LCciIGZvciBsYW5ndWFnZXMgIicpLmNvbmNhdChPLmpvaW4oIiwgIiksYCIgd29uJ3QgZ2V0IHJlc29sdmVkIGFzIG5hbWVzcGFjZSAiYCkuY29uY2F0KGYsJyIgd2FzIG5vdCB5ZXQgbG9hZGVkJyksIlRoaXMgbWVhbnMgc29tZXRoaW5nIElTIFdST05HIGluIHlvdXIgc2V0dXAuIFlvdSBhY2Nlc3MgdGhlIHQgZnVuY3Rpb24gYmVmb3JlIGkxOG5leHQuaW5pdCAvIGkxOG5leHQubG9hZE5hbWVzcGFjZSAvIGkxOG5leHQuY2hhbmdlTGFuZ3VhZ2Ugd2FzIGRvbmUuIFdhaXQgZm9yIHRoZSBjYWxsYmFjayBvciBQcm9taXNlIHRvIHJlc29sdmUgYmVmb3JlIGFjY2Vzc2luZyBpdCEhISIpKSxPLmZvckVhY2goZnVuY3Rpb24oeCl7aWYoIWEuaXNWYWxpZExvb2t1cChzKSl7Yz14O3ZhciBFPVttXTtpZihhLmkxOG5Gb3JtYXQmJmEuaTE4bkZvcm1hdC5hZGRMb29rdXBLZXlzKWEuaTE4bkZvcm1hdC5hZGRMb29rdXBLZXlzKEUsbSx4LGIsbyk7ZWxzZXt2YXIgVDt2JiYoVD1hLnBsdXJhbFJlc29sdmVyLmdldFN1ZmZpeCh4LG8uY291bnQsbykpO3ZhciBIPSIiLmNvbmNhdChhLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yLCJ6ZXJvIik7aWYodiYmKEUucHVzaChtK1QpLGQmJkUucHVzaChtK0gpKSxoKXt2YXIgSj0iIi5jb25jYXQobSkuY29uY2F0KGEub3B0aW9ucy5jb250ZXh0U2VwYXJhdG9yKS5jb25jYXQoby5jb250ZXh0KTtFLnB1c2goSiksdiYmKEUucHVzaChKK1QpLGQmJkUucHVzaChKK0gpKX19Zm9yKHZhciBVO1U9RS5wb3AoKTspYS5pc1ZhbGlkTG9va3VwKHMpfHwobD1VLHM9YS5nZXRSZXNvdXJjZSh4LGIsVSxvKSl9fSkpfSl9fSkse3JlczpzLHVzZWRLZXk6dSxleGFjdFVzZWRLZXk6bCx1c2VkTG5nOmMsdXNlZE5TOmZ9fX0se2tleToiaXNWYWxpZExvb2t1cCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT12b2lkIDAmJiEoIXRoaXMub3B0aW9ucy5yZXR1cm5OdWxsJiZlPT09bnVsbCkmJiEoIXRoaXMub3B0aW9ucy5yZXR1cm5FbXB0eVN0cmluZyYmZT09PSIiKX19LHtrZXk6ImdldFJlc291cmNlIix2YWx1ZTpmdW5jdGlvbihlLGEsbyl7dmFyIHM9YXJndW1lbnRzLmxlbmd0aD4zJiZhcmd1bWVudHNbM10hPT12b2lkIDA/YXJndW1lbnRzWzNdOnt9O3JldHVybiB0aGlzLmkxOG5Gb3JtYXQmJnRoaXMuaTE4bkZvcm1hdC5nZXRSZXNvdXJjZT90aGlzLmkxOG5Gb3JtYXQuZ2V0UmVzb3VyY2UoZSxhLG8scyk6dGhpcy5yZXNvdXJjZVN0b3JlLmdldFJlc291cmNlKGUsYSxvLHMpfX1dLFt7a2V5OiJoYXNEZWZhdWx0VmFsdWUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBhPSJkZWZhdWx0VmFsdWUiO2Zvcih2YXIgbyBpbiBlKWlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG8pJiZhPT09by5zdWJzdHJpbmcoMCxhLmxlbmd0aCkmJmVbb10hPT12b2lkIDApcmV0dXJuITA7cmV0dXJuITF9fV0pLG59KEkpO2Z1bmN0aW9uIHNlKGkpe3JldHVybiBpLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2kuc2xpY2UoMSl9dmFyIHN0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gaSh0KXtSKHRoaXMsaSksdGhpcy5vcHRpb25zPXQsdGhpcy5zdXBwb3J0ZWRMbmdzPXRoaXMub3B0aW9ucy5zdXBwb3J0ZWRMbmdzfHwhMSx0aGlzLmxvZ2dlcj1OLmNyZWF0ZSgibGFuZ3VhZ2VVdGlscyIpfXJldHVybiBrKGksW3trZXk6ImdldFNjcmlwdFBhcnRGcm9tQ29kZSIsdmFsdWU6ZnVuY3Rpb24obil7aWYoIW58fG4uaW5kZXhPZigiLSIpPDApcmV0dXJuIG51bGw7dmFyIHI9bi5zcGxpdCgiLSIpO3JldHVybiByLmxlbmd0aD09PTJ8fChyLnBvcCgpLHJbci5sZW5ndGgtMV0udG9Mb3dlckNhc2UoKT09PSJ4Iik/bnVsbDp0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShyLmpvaW4oIi0iKSl9fSx7a2V5OiJnZXRMYW5ndWFnZVBhcnRGcm9tQ29kZSIsdmFsdWU6ZnVuY3Rpb24obil7aWYoIW58fG4uaW5kZXhPZigiLSIpPDApcmV0dXJuIG47dmFyIHI9bi5zcGxpdCgiLSIpO3JldHVybiB0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShyWzBdKX19LHtrZXk6ImZvcm1hdExhbmd1YWdlQ29kZSIsdmFsdWU6ZnVuY3Rpb24obil7aWYodHlwZW9mIG49PSJzdHJpbmciJiZuLmluZGV4T2YoIi0iKT4tMSl7dmFyIHI9WyJoYW5zIiwiaGFudCIsImxhdG4iLCJjeXJsIiwiY2FucyIsIm1vbmciLCJhcmFiIl0sZT1uLnNwbGl0KCItIik7cmV0dXJuIHRoaXMub3B0aW9ucy5sb3dlckNhc2VMbmc/ZT1lLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpfSk6ZS5sZW5ndGg9PT0yPyhlWzBdPWVbMF0udG9Mb3dlckNhc2UoKSxlWzFdPWVbMV0udG9VcHBlckNhc2UoKSxyLmluZGV4T2YoZVsxXS50b0xvd2VyQ2FzZSgpKT4tMSYmKGVbMV09c2UoZVsxXS50b0xvd2VyQ2FzZSgpKSkpOmUubGVuZ3RoPT09MyYmKGVbMF09ZVswXS50b0xvd2VyQ2FzZSgpLGVbMV0ubGVuZ3RoPT09MiYmKGVbMV09ZVsxXS50b1VwcGVyQ2FzZSgpKSxlWzBdIT09InNnbiImJmVbMl0ubGVuZ3RoPT09MiYmKGVbMl09ZVsyXS50b1VwcGVyQ2FzZSgpKSxyLmluZGV4T2YoZVsxXS50b0xvd2VyQ2FzZSgpKT4tMSYmKGVbMV09c2UoZVsxXS50b0xvd2VyQ2FzZSgpKSksci5pbmRleE9mKGVbMl0udG9Mb3dlckNhc2UoKSk+LTEmJihlWzJdPXNlKGVbMl0udG9Mb3dlckNhc2UoKSkpKSxlLmpvaW4oIi0iKX1yZXR1cm4gdGhpcy5vcHRpb25zLmNsZWFuQ29kZXx8dGhpcy5vcHRpb25zLmxvd2VyQ2FzZUxuZz9uLnRvTG93ZXJDYXNlKCk6bn19LHtrZXk6ImlzU3VwcG9ydGVkQ29kZSIsdmFsdWU6ZnVuY3Rpb24obil7cmV0dXJuKHRoaXMub3B0aW9ucy5sb2FkPT09Imxhbmd1YWdlT25seSJ8fHRoaXMub3B0aW9ucy5ub25FeHBsaWNpdFN1cHBvcnRlZExuZ3MpJiYobj10aGlzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKG4pKSwhdGhpcy5zdXBwb3J0ZWRMbmdzfHwhdGhpcy5zdXBwb3J0ZWRMbmdzLmxlbmd0aHx8dGhpcy5zdXBwb3J0ZWRMbmdzLmluZGV4T2Yobik+LTF9fSx7a2V5OiJnZXRCZXN0TWF0Y2hGcm9tQ29kZXMiLHZhbHVlOmZ1bmN0aW9uKG4pe3ZhciByPXRoaXM7aWYoIW4pcmV0dXJuIG51bGw7dmFyIGU7cmV0dXJuIG4uZm9yRWFjaChmdW5jdGlvbihhKXtpZighZSl7dmFyIG89ci5mb3JtYXRMYW5ndWFnZUNvZGUoYSk7KCFyLm9wdGlvbnMuc3VwcG9ydGVkTG5nc3x8ci5pc1N1cHBvcnRlZENvZGUobykpJiYoZT1vKX19KSwhZSYmdGhpcy5vcHRpb25zLnN1cHBvcnRlZExuZ3MmJm4uZm9yRWFjaChmdW5jdGlvbihhKXtpZighZSl7dmFyIG89ci5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShhKTtpZihyLmlzU3VwcG9ydGVkQ29kZShvKSlyZXR1cm4gZT1vO2U9ci5vcHRpb25zLnN1cHBvcnRlZExuZ3MuZmluZChmdW5jdGlvbihzKXtpZihzLmluZGV4T2Yobyk9PT0wKXJldHVybiBzfSl9fSksZXx8KGU9dGhpcy5nZXRGYWxsYmFja0NvZGVzKHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZylbMF0pLGV9fSx7a2V5OiJnZXRGYWxsYmFja0NvZGVzIix2YWx1ZTpmdW5jdGlvbihuLHIpe2lmKCFuKXJldHVybltdO2lmKHR5cGVvZiBuPT0iZnVuY3Rpb24iJiYobj1uKHIpKSx0eXBlb2Ygbj09InN0cmluZyImJihuPVtuXSksT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseShuKT09PSJbb2JqZWN0IEFycmF5XSIpcmV0dXJuIG47aWYoIXIpcmV0dXJuIG4uZGVmYXVsdHx8W107dmFyIGU9bltyXTtyZXR1cm4gZXx8KGU9blt0aGlzLmdldFNjcmlwdFBhcnRGcm9tQ29kZShyKV0pLGV8fChlPW5bdGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUocildKSxlfHwoZT1uW3RoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUocildKSxlfHwoZT1uLmRlZmF1bHQpLGV8fFtdfX0se2tleToidG9SZXNvbHZlSGllcmFyY2h5Iix2YWx1ZTpmdW5jdGlvbihuLHIpe3ZhciBlPXRoaXMsYT10aGlzLmdldEZhbGxiYWNrQ29kZXMocnx8dGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nfHxbXSxuKSxvPVtdLHM9ZnVuY3Rpb24obCl7bCYmKGUuaXNTdXBwb3J0ZWRDb2RlKGwpP28ucHVzaChsKTplLmxvZ2dlci53YXJuKCJyZWplY3RpbmcgbGFuZ3VhZ2UgY29kZSBub3QgZm91bmQgaW4gc3VwcG9ydGVkTG5nczogIi5jb25jYXQobCkpKX07cmV0dXJuIHR5cGVvZiBuPT0ic3RyaW5nIiYmbi5pbmRleE9mKCItIik+LTE/KHRoaXMub3B0aW9ucy5sb2FkIT09Imxhbmd1YWdlT25seSImJnModGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUobikpLHRoaXMub3B0aW9ucy5sb2FkIT09Imxhbmd1YWdlT25seSImJnRoaXMub3B0aW9ucy5sb2FkIT09ImN1cnJlbnRPbmx5IiYmcyh0aGlzLmdldFNjcmlwdFBhcnRGcm9tQ29kZShuKSksdGhpcy5vcHRpb25zLmxvYWQhPT0iY3VycmVudE9ubHkiJiZzKHRoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUobikpKTp0eXBlb2Ygbj09InN0cmluZyImJnModGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUobikpLGEuZm9yRWFjaChmdW5jdGlvbih1KXtvLmluZGV4T2YodSk8MCYmcyhlLmZvcm1hdExhbmd1YWdlQ29kZSh1KSl9KSxvfX1dKSxpfSgpLHV0PVt7bG5nczpbImFjaCIsImFrIiwiYW0iLCJhcm4iLCJiciIsImZpbCIsImd1biIsImxuIiwibWZlIiwibWciLCJtaSIsIm9jIiwicHQiLCJwdC1CUiIsInRnIiwidGwiLCJ0aSIsInRyIiwidXoiLCJ3YSJdLG5yOlsxLDJdLGZjOjF9LHtsbmdzOlsiYWYiLCJhbiIsImFzdCIsImF6IiwiYmciLCJibiIsImNhIiwiZGEiLCJkZSIsImRldiIsImVsIiwiZW4iLCJlbyIsImVzIiwiZXQiLCJldSIsImZpIiwiZm8iLCJmdXIiLCJmeSIsImdsIiwiZ3UiLCJoYSIsImhpIiwiaHUiLCJoeSIsImlhIiwiaXQiLCJrayIsImtuIiwia3UiLCJsYiIsIm1haSIsIm1sIiwibW4iLCJtciIsIm5haCIsIm5hcCIsIm5iIiwibmUiLCJubCIsIm5uIiwibm8iLCJuc28iLCJwYSIsInBhcCIsInBtcyIsInBzIiwicHQtUFQiLCJybSIsInNjbyIsInNlIiwic2kiLCJzbyIsInNvbiIsInNxIiwic3YiLCJzdyIsInRhIiwidGUiLCJ0ayIsInVyIiwieW8iXSxucjpbMSwyXSxmYzoyfSx7bG5nczpbImF5IiwiYm8iLCJjZ2ciLCJmYSIsImh0IiwiaWQiLCJqYSIsImpibyIsImthIiwia20iLCJrbyIsImt5IiwibG8iLCJtcyIsInNhaCIsInN1IiwidGgiLCJ0dCIsInVnIiwidmkiLCJ3byIsInpoIl0sbnI6WzFdLGZjOjN9LHtsbmdzOlsiYmUiLCJicyIsImNuciIsImR6IiwiaHIiLCJydSIsInNyIiwidWsiXSxucjpbMSwyLDVdLGZjOjR9LHtsbmdzOlsiYXIiXSxucjpbMCwxLDIsMywxMSwxMDBdLGZjOjV9LHtsbmdzOlsiY3MiLCJzayJdLG5yOlsxLDIsNV0sZmM6Nn0se2xuZ3M6WyJjc2IiLCJwbCJdLG5yOlsxLDIsNV0sZmM6N30se2xuZ3M6WyJjeSJdLG5yOlsxLDIsMyw4XSxmYzo4fSx7bG5nczpbImZyIl0sbnI6WzEsMl0sZmM6OX0se2xuZ3M6WyJnYSJdLG5yOlsxLDIsMyw3LDExXSxmYzoxMH0se2xuZ3M6WyJnZCJdLG5yOlsxLDIsMywyMF0sZmM6MTF9LHtsbmdzOlsiaXMiXSxucjpbMSwyXSxmYzoxMn0se2xuZ3M6WyJqdiJdLG5yOlswLDFdLGZjOjEzfSx7bG5nczpbImt3Il0sbnI6WzEsMiwzLDRdLGZjOjE0fSx7bG5nczpbImx0Il0sbnI6WzEsMiwxMF0sZmM6MTV9LHtsbmdzOlsibHYiXSxucjpbMSwyLDBdLGZjOjE2fSx7bG5nczpbIm1rIl0sbnI6WzEsMl0sZmM6MTd9LHtsbmdzOlsibW5rIl0sbnI6WzAsMSwyXSxmYzoxOH0se2xuZ3M6WyJtdCJdLG5yOlsxLDIsMTEsMjBdLGZjOjE5fSx7bG5nczpbIm9yIl0sbnI6WzIsMV0sZmM6Mn0se2xuZ3M6WyJybyJdLG5yOlsxLDIsMjBdLGZjOjIwfSx7bG5nczpbInNsIl0sbnI6WzUsMSwyLDNdLGZjOjIxfSx7bG5nczpbImhlIiwiaXciXSxucjpbMSwyLDIwLDIxXSxmYzoyMn1dLGZ0PXsxOmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodD4xKX0sMjpmdW5jdGlvbih0KXtyZXR1cm4gTnVtYmVyKHQhPTEpfSwzOmZ1bmN0aW9uKHQpe3JldHVybiAwfSw0OmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodCUxMD09MSYmdCUxMDAhPTExPzA6dCUxMD49MiYmdCUxMDw9NCYmKHQlMTAwPDEwfHx0JTEwMD49MjApPzE6Mil9LDU6ZnVuY3Rpb24odCl7cmV0dXJuIE51bWJlcih0PT0wPzA6dD09MT8xOnQ9PTI/Mjp0JTEwMD49MyYmdCUxMDA8PTEwPzM6dCUxMDA+PTExPzQ6NSl9LDY6ZnVuY3Rpb24odCl7cmV0dXJuIE51bWJlcih0PT0xPzA6dD49MiYmdDw9ND8xOjIpfSw3OmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodD09MT8wOnQlMTA+PTImJnQlMTA8PTQmJih0JTEwMDwxMHx8dCUxMDA+PTIwKT8xOjIpfSw4OmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodD09MT8wOnQ9PTI/MTp0IT04JiZ0IT0xMT8yOjMpfSw5OmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodD49Mil9LDEwOmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodD09MT8wOnQ9PTI/MTp0PDc/Mjp0PDExPzM6NCl9LDExOmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodD09MXx8dD09MTE/MDp0PT0yfHx0PT0xMj8xOnQ+MiYmdDwyMD8yOjMpfSwxMjpmdW5jdGlvbih0KXtyZXR1cm4gTnVtYmVyKHQlMTAhPTF8fHQlMTAwPT0xMSl9LDEzOmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodCE9PTApfSwxNDpmdW5jdGlvbih0KXtyZXR1cm4gTnVtYmVyKHQ9PTE/MDp0PT0yPzE6dD09Mz8yOjMpfSwxNTpmdW5jdGlvbih0KXtyZXR1cm4gTnVtYmVyKHQlMTA9PTEmJnQlMTAwIT0xMT8wOnQlMTA+PTImJih0JTEwMDwxMHx8dCUxMDA+PTIwKT8xOjIpfSwxNjpmdW5jdGlvbih0KXtyZXR1cm4gTnVtYmVyKHQlMTA9PTEmJnQlMTAwIT0xMT8wOnQhPT0wPzE6Mil9LDE3OmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodD09MXx8dCUxMD09MSYmdCUxMDAhPTExPzA6MSl9LDE4OmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodD09MD8wOnQ9PTE/MToyKX0sMTk6ZnVuY3Rpb24odCl7cmV0dXJuIE51bWJlcih0PT0xPzA6dD09MHx8dCUxMDA+MSYmdCUxMDA8MTE/MTp0JTEwMD4xMCYmdCUxMDA8MjA/MjozKX0sMjA6ZnVuY3Rpb24odCl7cmV0dXJuIE51bWJlcih0PT0xPzA6dD09MHx8dCUxMDA+MCYmdCUxMDA8MjA/MToyKX0sMjE6ZnVuY3Rpb24odCl7cmV0dXJuIE51bWJlcih0JTEwMD09MT8xOnQlMTAwPT0yPzI6dCUxMDA9PTN8fHQlMTAwPT00PzM6MCl9LDIyOmZ1bmN0aW9uKHQpe3JldHVybiBOdW1iZXIodD09MT8wOnQ9PTI/MToodDwwfHx0PjEwKSYmdCUxMD09MD8yOjMpfX0sbHQ9WyJ2MSIsInYyIiwidjMiXSxrZT17emVybzowLG9uZToxLHR3bzoyLGZldzozLG1hbnk6NCxvdGhlcjo1fTtmdW5jdGlvbiBjdCgpe3ZhciBpPXt9O3JldHVybiB1dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QubG5ncy5mb3JFYWNoKGZ1bmN0aW9uKG4pe2lbbl09e251bWJlcnM6dC5ucixwbHVyYWxzOmZ0W3QuZmNdfX0pfSksaX12YXIgZ3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKHQpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7fTtSKHRoaXMsaSksdGhpcy5sYW5ndWFnZVV0aWxzPXQsdGhpcy5vcHRpb25zPW4sdGhpcy5sb2dnZXI9Ti5jcmVhdGUoInBsdXJhbFJlc29sdmVyIiksKCF0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT058fHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTj09PSJ2NCIpJiYodHlwZW9mIEludGw+InUifHwhSW50bC5QbHVyYWxSdWxlcykmJih0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT049InYzIix0aGlzLmxvZ2dlci5lcnJvcigiWW91ciBlbnZpcm9ubWVudCBzZWVtcyBub3QgdG8gYmUgSW50bCBBUEkgY29tcGF0aWJsZSwgdXNlIGFuIEludGwuUGx1cmFsUnVsZXMgcG9seWZpbGwuIFdpbGwgZmFsbGJhY2sgdG8gdGhlIGNvbXBhdGliaWxpdHlKU09OIHYzIGZvcm1hdCBoYW5kbGluZy4iKSksdGhpcy5ydWxlcz1jdCgpfXJldHVybiBrKGksW3trZXk6ImFkZFJ1bGUiLHZhbHVlOmZ1bmN0aW9uKG4scil7dGhpcy5ydWxlc1tuXT1yfX0se2tleToiZ2V0UnVsZSIsdmFsdWU6ZnVuY3Rpb24obil7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9O2lmKHRoaXMuc2hvdWxkVXNlSW50bEFwaSgpKXRyeXtyZXR1cm4gbmV3IEludGwuUGx1cmFsUnVsZXMobix7dHlwZTpyLm9yZGluYWw/Im9yZGluYWwiOiJjYXJkaW5hbCJ9KX1jYXRjaHtyZXR1cm59cmV0dXJuIHRoaXMucnVsZXNbbl18fHRoaXMucnVsZXNbdGhpcy5sYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKG4pXX19LHtrZXk6Im5lZWRzUGx1cmFsIix2YWx1ZTpmdW5jdGlvbihuKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06e30sZT10aGlzLmdldFJ1bGUobixyKTtyZXR1cm4gdGhpcy5zaG91bGRVc2VJbnRsQXBpKCk/ZSYmZS5yZXNvbHZlZE9wdGlvbnMoKS5wbHVyYWxDYXRlZ29yaWVzLmxlbmd0aD4xOmUmJmUubnVtYmVycy5sZW5ndGg+MX19LHtrZXk6ImdldFBsdXJhbEZvcm1zT2ZLZXkiLHZhbHVlOmZ1bmN0aW9uKG4scil7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4yJiZhcmd1bWVudHNbMl0hPT12b2lkIDA/YXJndW1lbnRzWzJdOnt9O3JldHVybiB0aGlzLmdldFN1ZmZpeGVzKG4sZSkubWFwKGZ1bmN0aW9uKGEpe3JldHVybiIiLmNvbmNhdChyKS5jb25jYXQoYSl9KX19LHtrZXk6ImdldFN1ZmZpeGVzIix2YWx1ZTpmdW5jdGlvbihuKXt2YXIgcj10aGlzLGU9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9LGE9dGhpcy5nZXRSdWxlKG4sZSk7cmV0dXJuIGE/dGhpcy5zaG91bGRVc2VJbnRsQXBpKCk/YS5yZXNvbHZlZE9wdGlvbnMoKS5wbHVyYWxDYXRlZ29yaWVzLnNvcnQoZnVuY3Rpb24obyxzKXtyZXR1cm4ga2Vbb10ta2Vbc119KS5tYXAoZnVuY3Rpb24obyl7cmV0dXJuIiIuY29uY2F0KHIub3B0aW9ucy5wcmVwZW5kKS5jb25jYXQobyl9KTphLm51bWJlcnMubWFwKGZ1bmN0aW9uKG8pe3JldHVybiByLmdldFN1ZmZpeChuLG8sZSl9KTpbXX19LHtrZXk6ImdldFN1ZmZpeCIsdmFsdWU6ZnVuY3Rpb24obixyKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjImJmFyZ3VtZW50c1syXSE9PXZvaWQgMD9hcmd1bWVudHNbMl06e30sYT10aGlzLmdldFJ1bGUobixlKTtyZXR1cm4gYT90aGlzLnNob3VsZFVzZUludGxBcGkoKT8iIi5jb25jYXQodGhpcy5vcHRpb25zLnByZXBlbmQpLmNvbmNhdChhLnNlbGVjdChyKSk6dGhpcy5nZXRTdWZmaXhSZXRyb0NvbXBhdGlibGUoYSxyKToodGhpcy5sb2dnZXIud2Fybigibm8gcGx1cmFsIHJ1bGUgZm91bmQgZm9yOiAiLmNvbmNhdChuKSksIiIpfX0se2tleToiZ2V0U3VmZml4UmV0cm9Db21wYXRpYmxlIix2YWx1ZTpmdW5jdGlvbihuLHIpe3ZhciBlPXRoaXMsYT1uLm5vQWJzP24ucGx1cmFscyhyKTpuLnBsdXJhbHMoTWF0aC5hYnMocikpLG89bi5udW1iZXJzW2FdO3RoaXMub3B0aW9ucy5zaW1wbGlmeVBsdXJhbFN1ZmZpeCYmbi5udW1iZXJzLmxlbmd0aD09PTImJm4ubnVtYmVyc1swXT09PTEmJihvPT09Mj9vPSJwbHVyYWwiOm89PT0xJiYobz0iIikpO3ZhciBzPWZ1bmN0aW9uKCl7cmV0dXJuIGUub3B0aW9ucy5wcmVwZW5kJiZvLnRvU3RyaW5nKCk/ZS5vcHRpb25zLnByZXBlbmQrby50b1N0cmluZygpOm8udG9TdHJpbmcoKX07cmV0dXJuIHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTj09PSJ2MSI/bz09PTE/IiI6dHlwZW9mIG89PSJudW1iZXIiPyJfcGx1cmFsXyIuY29uY2F0KG8udG9TdHJpbmcoKSk6cygpOnRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTj09PSJ2MiJ8fHRoaXMub3B0aW9ucy5zaW1wbGlmeVBsdXJhbFN1ZmZpeCYmbi5udW1iZXJzLmxlbmd0aD09PTImJm4ubnVtYmVyc1swXT09PTE/cygpOnRoaXMub3B0aW9ucy5wcmVwZW5kJiZhLnRvU3RyaW5nKCk/dGhpcy5vcHRpb25zLnByZXBlbmQrYS50b1N0cmluZygpOmEudG9TdHJpbmcoKX19LHtrZXk6InNob3VsZFVzZUludGxBcGkiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIWx0LmluY2x1ZGVzKHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTil9fV0pLGl9KCk7ZnVuY3Rpb24gamUoaSx0KXt2YXIgbj1PYmplY3Qua2V5cyhpKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGkpO3QmJihyPXIuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGksZSkuZW51bWVyYWJsZX0pKSxuLnB1c2guYXBwbHkobixyKX1yZXR1cm4gbn1mdW5jdGlvbiBMKGkpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPWFyZ3VtZW50c1t0XSE9bnVsbD9hcmd1bWVudHNbdF06e307dCUyP2plKE9iamVjdChuKSwhMCkuZm9yRWFjaChmdW5jdGlvbihyKXtfKGkscixuW3JdKX0pOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGksT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpOmplKE9iamVjdChuKSkuZm9yRWFjaChmdW5jdGlvbihyKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxyLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobixyKSl9KX1yZXR1cm4gaX12YXIgcHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9O1IodGhpcyxpKSx0aGlzLmxvZ2dlcj1OLmNyZWF0ZSgiaW50ZXJwb2xhdG9yIiksdGhpcy5vcHRpb25zPXQsdGhpcy5mb3JtYXQ9dC5pbnRlcnBvbGF0aW9uJiZ0LmludGVycG9sYXRpb24uZm9ybWF0fHxmdW5jdGlvbihuKXtyZXR1cm4gbn0sdGhpcy5pbml0KHQpfXJldHVybiBrKGksW3trZXk6ImluaXQiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9O24uaW50ZXJwb2xhdGlvbnx8KG4uaW50ZXJwb2xhdGlvbj17ZXNjYXBlVmFsdWU6ITB9KTt2YXIgcj1uLmludGVycG9sYXRpb247dGhpcy5lc2NhcGU9ci5lc2NhcGUhPT12b2lkIDA/ci5lc2NhcGU6WGUsdGhpcy5lc2NhcGVWYWx1ZT1yLmVzY2FwZVZhbHVlIT09dm9pZCAwP3IuZXNjYXBlVmFsdWU6ITAsdGhpcy51c2VSYXdWYWx1ZVRvRXNjYXBlPXIudXNlUmF3VmFsdWVUb0VzY2FwZSE9PXZvaWQgMD9yLnVzZVJhd1ZhbHVlVG9Fc2NhcGU6ITEsdGhpcy5wcmVmaXg9ci5wcmVmaXg/QShyLnByZWZpeCk6ci5wcmVmaXhFc2NhcGVkfHwie3siLHRoaXMuc3VmZml4PXIuc3VmZml4P0Eoci5zdWZmaXgpOnIuc3VmZml4RXNjYXBlZHx8In19Iix0aGlzLmZvcm1hdFNlcGFyYXRvcj1yLmZvcm1hdFNlcGFyYXRvcj9yLmZvcm1hdFNlcGFyYXRvcjpyLmZvcm1hdFNlcGFyYXRvcnx8IiwiLHRoaXMudW5lc2NhcGVQcmVmaXg9ci51bmVzY2FwZVN1ZmZpeD8iIjpyLnVuZXNjYXBlUHJlZml4fHwiLSIsdGhpcy51bmVzY2FwZVN1ZmZpeD10aGlzLnVuZXNjYXBlUHJlZml4PyIiOnIudW5lc2NhcGVTdWZmaXh8fCIiLHRoaXMubmVzdGluZ1ByZWZpeD1yLm5lc3RpbmdQcmVmaXg/QShyLm5lc3RpbmdQcmVmaXgpOnIubmVzdGluZ1ByZWZpeEVzY2FwZWR8fEEoIiR0KCIpLHRoaXMubmVzdGluZ1N1ZmZpeD1yLm5lc3RpbmdTdWZmaXg/QShyLm5lc3RpbmdTdWZmaXgpOnIubmVzdGluZ1N1ZmZpeEVzY2FwZWR8fEEoIikiKSx0aGlzLm5lc3RpbmdPcHRpb25zU2VwYXJhdG9yPXIubmVzdGluZ09wdGlvbnNTZXBhcmF0b3I/ci5uZXN0aW5nT3B0aW9uc1NlcGFyYXRvcjpyLm5lc3RpbmdPcHRpb25zU2VwYXJhdG9yfHwiLCIsdGhpcy5tYXhSZXBsYWNlcz1yLm1heFJlcGxhY2VzP3IubWF4UmVwbGFjZXM6MWUzLHRoaXMuYWx3YXlzRm9ybWF0PXIuYWx3YXlzRm9ybWF0IT09dm9pZCAwP3IuYWx3YXlzRm9ybWF0OiExLHRoaXMucmVzZXRSZWdFeHAoKX19LHtrZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucyYmdGhpcy5pbml0KHRoaXMub3B0aW9ucyl9fSx7a2V5OiJyZXNldFJlZ0V4cCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgbj0iIi5jb25jYXQodGhpcy5wcmVmaXgsIiguKz8pIikuY29uY2F0KHRoaXMuc3VmZml4KTt0aGlzLnJlZ2V4cD1uZXcgUmVnRXhwKG4sImciKTt2YXIgcj0iIi5jb25jYXQodGhpcy5wcmVmaXgpLmNvbmNhdCh0aGlzLnVuZXNjYXBlUHJlZml4LCIoLis/KSIpLmNvbmNhdCh0aGlzLnVuZXNjYXBlU3VmZml4KS5jb25jYXQodGhpcy5zdWZmaXgpO3RoaXMucmVnZXhwVW5lc2NhcGU9bmV3IFJlZ0V4cChyLCJnIik7dmFyIGU9IiIuY29uY2F0KHRoaXMubmVzdGluZ1ByZWZpeCwiKC4rPykiKS5jb25jYXQodGhpcy5uZXN0aW5nU3VmZml4KTt0aGlzLm5lc3RpbmdSZWdleHA9bmV3IFJlZ0V4cChlLCJnIil9fSx7a2V5OiJpbnRlcnBvbGF0ZSIsdmFsdWU6ZnVuY3Rpb24obixyLGUsYSl7dmFyIG89dGhpcyxzLHUsbCxjPXRoaXMub3B0aW9ucyYmdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24mJnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXN8fHt9O2Z1bmN0aW9uIGYodil7cmV0dXJuIHYucmVwbGFjZSgvXCQvZywiJCQkJCIpfXZhciBnPWZ1bmN0aW9uKGQpe2lmKGQuaW5kZXhPZihvLmZvcm1hdFNlcGFyYXRvcik8MCl7dmFyIGg9YmUocixjLGQpO3JldHVybiBvLmFsd2F5c0Zvcm1hdD9vLmZvcm1hdChoLHZvaWQgMCxlLEwoTChMKHt9LGEpLHIpLHt9LHtpbnRlcnBvbGF0aW9ua2V5OmR9KSk6aH12YXIgTz1kLnNwbGl0KG8uZm9ybWF0U2VwYXJhdG9yKSxiPU8uc2hpZnQoKS50cmltKCkseD1PLmpvaW4oby5mb3JtYXRTZXBhcmF0b3IpLnRyaW0oKTtyZXR1cm4gby5mb3JtYXQoYmUocixjLGIpLHgsZSxMKEwoTCh7fSxhKSxyKSx7fSx7aW50ZXJwb2xhdGlvbmtleTpifSkpfTt0aGlzLnJlc2V0UmVnRXhwKCk7dmFyIHA9YSYmYS5taXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXJ8fHRoaXMub3B0aW9ucy5taXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXIsbT1hJiZhLmludGVycG9sYXRpb24mJmEuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMhPT12b2lkIDA/YS5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlczp0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMseT1be3JlZ2V4OnRoaXMucmVnZXhwVW5lc2NhcGUsc2FmZVZhbHVlOmZ1bmN0aW9uKGQpe3JldHVybiBmKGQpfX0se3JlZ2V4OnRoaXMucmVnZXhwLHNhZmVWYWx1ZTpmdW5jdGlvbihkKXtyZXR1cm4gby5lc2NhcGVWYWx1ZT9mKG8uZXNjYXBlKGQpKTpmKGQpfX1dO3JldHVybiB5LmZvckVhY2goZnVuY3Rpb24odil7Zm9yKGw9MDtzPXYucmVnZXguZXhlYyhuKTspe3ZhciBkPXNbMV0udHJpbSgpO2lmKHU9ZyhkKSx1PT09dm9pZCAwKWlmKHR5cGVvZiBwPT0iZnVuY3Rpb24iKXt2YXIgaD1wKG4scyxhKTt1PXR5cGVvZiBoPT0ic3RyaW5nIj9oOiIifWVsc2UgaWYoYSYmYS5oYXNPd25Qcm9wZXJ0eShkKSl1PSIiO2Vsc2UgaWYobSl7dT1zWzBdO2NvbnRpbnVlfWVsc2Ugby5sb2dnZXIud2FybigibWlzc2VkIHRvIHBhc3MgaW4gdmFyaWFibGUgIi5jb25jYXQoZCwiIGZvciBpbnRlcnBvbGF0aW5nICIpLmNvbmNhdChuKSksdT0iIjtlbHNlIHR5cGVvZiB1IT0ic3RyaW5nIiYmIW8udXNlUmF3VmFsdWVUb0VzY2FwZSYmKHU9bWUodSkpO3ZhciBPPXYuc2FmZVZhbHVlKHUpO2lmKG49bi5yZXBsYWNlKHNbMF0sTyksbT8odi5yZWdleC5sYXN0SW5kZXgrPXUubGVuZ3RoLHYucmVnZXgubGFzdEluZGV4LT1zWzBdLmxlbmd0aCk6di5yZWdleC5sYXN0SW5kZXg9MCxsKyssbD49by5tYXhSZXBsYWNlcylicmVha319KSxufX0se2tleToibmVzdCIsdmFsdWU6ZnVuY3Rpb24obixyKXt2YXIgZT10aGlzLGE9YXJndW1lbnRzLmxlbmd0aD4yJiZhcmd1bWVudHNbMl0hPT12b2lkIDA/YXJndW1lbnRzWzJdOnt9LG8scyx1PUwoe30sYSk7dS5hcHBseVBvc3RQcm9jZXNzb3I9ITEsZGVsZXRlIHUuZGVmYXVsdFZhbHVlO2Z1bmN0aW9uIGwocCxtKXt2YXIgeT10aGlzLm5lc3RpbmdPcHRpb25zU2VwYXJhdG9yO2lmKHAuaW5kZXhPZih5KTwwKXJldHVybiBwO3ZhciB2PXAuc3BsaXQobmV3IFJlZ0V4cCgiIi5jb25jYXQoeSwiWyBdKnsiKSkpLGQ9InsiLmNvbmNhdCh2WzFdKTtwPXZbMF0sZD10aGlzLmludGVycG9sYXRlKGQsdSk7dmFyIGg9ZC5tYXRjaCgvJy9nKSxPPWQubWF0Y2goLyIvZyk7KGgmJmgubGVuZ3RoJTI9PT0wJiYhT3x8Ty5sZW5ndGglMiE9PTApJiYoZD1kLnJlcGxhY2UoLycvZywnIicpKTt0cnl7dT1KU09OLnBhcnNlKGQpLG0mJih1PUwoTCh7fSxtKSx1KSl9Y2F0Y2goYil7cmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oImZhaWxlZCBwYXJzaW5nIG9wdGlvbnMgc3RyaW5nIGluIG5lc3RpbmcgZm9yIGtleSAiLmNvbmNhdChwKSxiKSwiIi5jb25jYXQocCkuY29uY2F0KHkpLmNvbmNhdChkKX1yZXR1cm4gZGVsZXRlIHUuZGVmYXVsdFZhbHVlLHB9Zm9yKDtvPXRoaXMubmVzdGluZ1JlZ2V4cC5leGVjKG4pOyl7dmFyIGM9W10sZj0hMTtpZihvWzBdLmluZGV4T2YodGhpcy5mb3JtYXRTZXBhcmF0b3IpIT09LTEmJiEvey4qfS8udGVzdChvWzFdKSl7dmFyIGc9b1sxXS5zcGxpdCh0aGlzLmZvcm1hdFNlcGFyYXRvcikubWFwKGZ1bmN0aW9uKHApe3JldHVybiBwLnRyaW0oKX0pO29bMV09Zy5zaGlmdCgpLGM9ZyxmPSEwfWlmKHM9cihsLmNhbGwodGhpcyxvWzFdLnRyaW0oKSx1KSx1KSxzJiZvWzBdPT09biYmdHlwZW9mIHMhPSJzdHJpbmciKXJldHVybiBzO3R5cGVvZiBzIT0ic3RyaW5nIiYmKHM9bWUocykpLHN8fCh0aGlzLmxvZ2dlci53YXJuKCJtaXNzZWQgdG8gcmVzb2x2ZSAiLmNvbmNhdChvWzFdLCIgZm9yIG5lc3RpbmcgIikuY29uY2F0KG4pKSxzPSIiKSxmJiYocz1jLnJlZHVjZShmdW5jdGlvbihwLG0pe3JldHVybiBlLmZvcm1hdChwLG0sYS5sbmcsTChMKHt9LGEpLHt9LHtpbnRlcnBvbGF0aW9ua2V5Om9bMV0udHJpbSgpfSkpfSxzLnRyaW0oKSkpLG49bi5yZXBsYWNlKG9bMF0scyksdGhpcy5yZWdleHAubGFzdEluZGV4PTB9cmV0dXJuIG59fV0pLGl9KCk7ZnVuY3Rpb24gTmUoaSx0KXt2YXIgbj1PYmplY3Qua2V5cyhpKTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGkpO3QmJihyPXIuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGksZSkuZW51bWVyYWJsZX0pKSxuLnB1c2guYXBwbHkobixyKX1yZXR1cm4gbn1mdW5jdGlvbiBEKGkpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPWFyZ3VtZW50c1t0XSE9bnVsbD9hcmd1bWVudHNbdF06e307dCUyP05lKE9iamVjdChuKSwhMCkuZm9yRWFjaChmdW5jdGlvbihyKXtfKGkscixuW3JdKX0pOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGksT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpOk5lKE9iamVjdChuKSkuZm9yRWFjaChmdW5jdGlvbihyKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxyLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobixyKSl9KX1yZXR1cm4gaX1mdW5jdGlvbiBkdChpKXt2YXIgdD1pLnRvTG93ZXJDYXNlKCkudHJpbSgpLG49e307aWYoaS5pbmRleE9mKCIoIik+LTEpe3ZhciByPWkuc3BsaXQoIigiKTt0PXJbMF0udG9Mb3dlckNhc2UoKS50cmltKCk7dmFyIGU9clsxXS5zdWJzdHJpbmcoMCxyWzFdLmxlbmd0aC0xKTtpZih0PT09ImN1cnJlbmN5IiYmZS5pbmRleE9mKCI6Iik8MCluLmN1cnJlbmN5fHwobi5jdXJyZW5jeT1lLnRyaW0oKSk7ZWxzZSBpZih0PT09InJlbGF0aXZldGltZSImJmUuaW5kZXhPZigiOiIpPDApbi5yYW5nZXx8KG4ucmFuZ2U9ZS50cmltKCkpO2Vsc2V7dmFyIGE9ZS5zcGxpdCgiOyIpO2EuZm9yRWFjaChmdW5jdGlvbihvKXtpZihvKXt2YXIgcz1vLnNwbGl0KCI6IiksdT1XZShzKSxsPXVbMF0sYz11LnNsaWNlKDEpLGY9Yy5qb2luKCI6IikudHJpbSgpLnJlcGxhY2UoL14nK3wnKyQvZywiIik7bltsLnRyaW0oKV18fChuW2wudHJpbSgpXT1mKSxmPT09ImZhbHNlIiYmKG5bbC50cmltKCldPSExKSxmPT09InRydWUiJiYobltsLnRyaW0oKV09ITApLGlzTmFOKGYpfHwobltsLnRyaW0oKV09cGFyc2VJbnQoZiwxMCkpfX0pfX1yZXR1cm57Zm9ybWF0TmFtZTp0LGZvcm1hdE9wdGlvbnM6bn19ZnVuY3Rpb24gSyhpKXt2YXIgdD17fTtyZXR1cm4gZnVuY3Rpb24ocixlLGEpe3ZhciBvPWUrSlNPTi5zdHJpbmdpZnkoYSkscz10W29dO3JldHVybiBzfHwocz1pKGUsYSksdFtvXT1zKSxzKHIpfX12YXIgaHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9O1IodGhpcyxpKSx0aGlzLmxvZ2dlcj1OLmNyZWF0ZSgiZm9ybWF0dGVyIiksdGhpcy5vcHRpb25zPXQsdGhpcy5mb3JtYXRzPXtudW1iZXI6SyhmdW5jdGlvbihuLHIpe3ZhciBlPW5ldyBJbnRsLk51bWJlckZvcm1hdChuLHIpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gZS5mb3JtYXQoYSl9fSksY3VycmVuY3k6SyhmdW5jdGlvbihuLHIpe3ZhciBlPW5ldyBJbnRsLk51bWJlckZvcm1hdChuLEQoRCh7fSxyKSx7fSx7c3R5bGU6ImN1cnJlbmN5In0pKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGUuZm9ybWF0KGEpfX0pLGRhdGV0aW1lOksoZnVuY3Rpb24obixyKXt2YXIgZT1uZXcgSW50bC5EYXRlVGltZUZvcm1hdChuLEQoe30scikpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gZS5mb3JtYXQoYSl9fSkscmVsYXRpdmV0aW1lOksoZnVuY3Rpb24obixyKXt2YXIgZT1uZXcgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQobixEKHt9LHIpKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGUuZm9ybWF0KGEsci5yYW5nZXx8ImRheSIpfX0pLGxpc3Q6SyhmdW5jdGlvbihuLHIpe3ZhciBlPW5ldyBJbnRsLkxpc3RGb3JtYXQobixEKHt9LHIpKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGUuZm9ybWF0KGEpfX0pfSx0aGlzLmluaXQodCl9cmV0dXJuIGsoaSxbe2tleToiaW5pdCIsdmFsdWU6ZnVuY3Rpb24obil7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOntpbnRlcnBvbGF0aW9uOnt9fSxlPXIuaW50ZXJwb2xhdGlvbjt0aGlzLmZvcm1hdFNlcGFyYXRvcj1lLmZvcm1hdFNlcGFyYXRvcj9lLmZvcm1hdFNlcGFyYXRvcjplLmZvcm1hdFNlcGFyYXRvcnx8IiwifX0se2tleToiYWRkIix2YWx1ZTpmdW5jdGlvbihuLHIpe3RoaXMuZm9ybWF0c1tuLnRvTG93ZXJDYXNlKCkudHJpbSgpXT1yfX0se2tleToiYWRkQ2FjaGVkIix2YWx1ZTpmdW5jdGlvbihuLHIpe3RoaXMuZm9ybWF0c1tuLnRvTG93ZXJDYXNlKCkudHJpbSgpXT1LKHIpfX0se2tleToiZm9ybWF0Iix2YWx1ZTpmdW5jdGlvbihuLHIsZSxhKXt2YXIgbz10aGlzLHM9ci5zcGxpdCh0aGlzLmZvcm1hdFNlcGFyYXRvciksdT1zLnJlZHVjZShmdW5jdGlvbihsLGMpe3ZhciBmPWR0KGMpLGc9Zi5mb3JtYXROYW1lLHA9Zi5mb3JtYXRPcHRpb25zO2lmKG8uZm9ybWF0c1tnXSl7dmFyIG09bDt0cnl7dmFyIHk9YSYmYS5mb3JtYXRQYXJhbXMmJmEuZm9ybWF0UGFyYW1zW2EuaW50ZXJwb2xhdGlvbmtleV18fHt9LHY9eS5sb2NhbGV8fHkubG5nfHxhLmxvY2FsZXx8YS5sbmd8fGU7bT1vLmZvcm1hdHNbZ10obCx2LEQoRChEKHt9LHApLGEpLHkpKX1jYXRjaChkKXtvLmxvZ2dlci53YXJuKGQpfXJldHVybiBtfWVsc2Ugby5sb2dnZXIud2FybigidGhlcmUgd2FzIG5vIGZvcm1hdCBmdW5jdGlvbiBmb3IgIi5jb25jYXQoZykpO3JldHVybiBsfSxuKTtyZXR1cm4gdX19XSksaX0oKTtmdW5jdGlvbiBDZShpLHQpe3ZhciBuPU9iamVjdC5rZXlzKGkpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoaSk7dCYmKHI9ci5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaSxlKS5lbnVtZXJhYmxlfSkpLG4ucHVzaC5hcHBseShuLHIpfXJldHVybiBufWZ1bmN0aW9uIEVlKGkpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPWFyZ3VtZW50c1t0XSE9bnVsbD9hcmd1bWVudHNbdF06e307dCUyP0NlKE9iamVjdChuKSwhMCkuZm9yRWFjaChmdW5jdGlvbihyKXtfKGkscixuW3JdKX0pOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGksT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpOkNlKE9iamVjdChuKSkuZm9yRWFjaChmdW5jdGlvbihyKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxyLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobixyKSl9KX1yZXR1cm4gaX1mdW5jdGlvbiB2dChpKXt2YXIgdD1tdCgpO3JldHVybiBmdW5jdGlvbigpe3ZhciByPWooaSksZTtpZih0KXt2YXIgYT1qKHRoaXMpLmNvbnN0cnVjdG9yO2U9UmVmbGVjdC5jb25zdHJ1Y3Qocixhcmd1bWVudHMsYSl9ZWxzZSBlPXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBCKHRoaXMsZSl9fWZ1bmN0aW9uIG10KCl7aWYodHlwZW9mIFJlZmxlY3Q+InUifHwhUmVmbGVjdC5jb25zdHJ1Y3R8fFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYodHlwZW9mIFByb3h5PT0iZnVuY3Rpb24iKXJldHVybiEwO3RyeXtyZXR1cm4gQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sW10sZnVuY3Rpb24oKXt9KSksITB9Y2F0Y2h7cmV0dXJuITF9fWZ1bmN0aW9uIHl0KGksdCl7aS5wZW5kaW5nW3RdIT09dm9pZCAwJiYoZGVsZXRlIGkucGVuZGluZ1t0XSxpLnBlbmRpbmdDb3VudC0tKX12YXIgYnQ9ZnVuY3Rpb24oaSl7UShuLGkpO3ZhciB0PXZ0KG4pO2Z1bmN0aW9uIG4ocixlLGEpe3ZhciBvLHM9YXJndW1lbnRzLmxlbmd0aD4zJiZhcmd1bWVudHNbM10hPT12b2lkIDA/YXJndW1lbnRzWzNdOnt9O3JldHVybiBSKHRoaXMsbiksbz10LmNhbGwodGhpcykscSYmSS5jYWxsKEYobykpLG8uYmFja2VuZD1yLG8uc3RvcmU9ZSxvLnNlcnZpY2VzPWEsby5sYW5ndWFnZVV0aWxzPWEubGFuZ3VhZ2VVdGlscyxvLm9wdGlvbnM9cyxvLmxvZ2dlcj1OLmNyZWF0ZSgiYmFja2VuZENvbm5lY3RvciIpLG8ud2FpdGluZ1JlYWRzPVtdLG8ubWF4UGFyYWxsZWxSZWFkcz1zLm1heFBhcmFsbGVsUmVhZHN8fDEwLG8ucmVhZGluZ0NhbGxzPTAsby5tYXhSZXRyaWVzPXMubWF4UmV0cmllcz49MD9zLm1heFJldHJpZXM6NSxvLnJldHJ5VGltZW91dD1zLnJldHJ5VGltZW91dD49MT9zLnJldHJ5VGltZW91dDozNTAsby5zdGF0ZT17fSxvLnF1ZXVlPVtdLG8uYmFja2VuZCYmby5iYWNrZW5kLmluaXQmJm8uYmFja2VuZC5pbml0KGEscy5iYWNrZW5kLHMpLG99cmV0dXJuIGsobixbe2tleToicXVldWVMb2FkIix2YWx1ZTpmdW5jdGlvbihlLGEsbyxzKXt2YXIgdT10aGlzLGw9e30sYz17fSxmPXt9LGc9e307cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihwKXt2YXIgbT0hMDthLmZvckVhY2goZnVuY3Rpb24oeSl7dmFyIHY9IiIuY29uY2F0KHAsInwiKS5jb25jYXQoeSk7IW8ucmVsb2FkJiZ1LnN0b3JlLmhhc1Jlc291cmNlQnVuZGxlKHAseSk/dS5zdGF0ZVt2XT0yOnUuc3RhdGVbdl08MHx8KHUuc3RhdGVbdl09PT0xP2Nbdl09PT12b2lkIDAmJihjW3ZdPSEwKToodS5zdGF0ZVt2XT0xLG09ITEsY1t2XT09PXZvaWQgMCYmKGNbdl09ITApLGxbdl09PT12b2lkIDAmJihsW3ZdPSEwKSxnW3ldPT09dm9pZCAwJiYoZ1t5XT0hMCkpKX0pLG18fChmW3BdPSEwKX0pLChPYmplY3Qua2V5cyhsKS5sZW5ndGh8fE9iamVjdC5rZXlzKGMpLmxlbmd0aCkmJnRoaXMucXVldWUucHVzaCh7cGVuZGluZzpjLHBlbmRpbmdDb3VudDpPYmplY3Qua2V5cyhjKS5sZW5ndGgsbG9hZGVkOnt9LGVycm9yczpbXSxjYWxsYmFjazpzfSkse3RvTG9hZDpPYmplY3Qua2V5cyhsKSxwZW5kaW5nOk9iamVjdC5rZXlzKGMpLHRvTG9hZExhbmd1YWdlczpPYmplY3Qua2V5cyhmKSx0b0xvYWROYW1lc3BhY2VzOk9iamVjdC5rZXlzKGcpfX19LHtrZXk6ImxvYWRlZCIsdmFsdWU6ZnVuY3Rpb24oZSxhLG8pe3ZhciBzPWUuc3BsaXQoInwiKSx1PXNbMF0sbD1zWzFdO2EmJnRoaXMuZW1pdCgiZmFpbGVkTG9hZGluZyIsdSxsLGEpLG8mJnRoaXMuc3RvcmUuYWRkUmVzb3VyY2VCdW5kbGUodSxsLG8pLHRoaXMuc3RhdGVbZV09YT8tMToyO3ZhciBjPXt9O3RoaXMucXVldWUuZm9yRWFjaChmdW5jdGlvbihmKXtaZShmLmxvYWRlZCxbdV0sbCkseXQoZixlKSxhJiZmLmVycm9ycy5wdXNoKGEpLGYucGVuZGluZ0NvdW50PT09MCYmIWYuZG9uZSYmKE9iamVjdC5rZXlzKGYubG9hZGVkKS5mb3JFYWNoKGZ1bmN0aW9uKGcpe2NbZ118fChjW2ddPXt9KTt2YXIgcD1mLmxvYWRlZFtnXTtwLmxlbmd0aCYmcC5mb3JFYWNoKGZ1bmN0aW9uKG0pe2NbZ11bbV09PT12b2lkIDAmJihjW2ddW21dPSEwKX0pfSksZi5kb25lPSEwLGYuZXJyb3JzLmxlbmd0aD9mLmNhbGxiYWNrKGYuZXJyb3JzKTpmLmNhbGxiYWNrKCkpfSksdGhpcy5lbWl0KCJsb2FkZWQiLGMpLHRoaXMucXVldWU9dGhpcy5xdWV1ZS5maWx0ZXIoZnVuY3Rpb24oZil7cmV0dXJuIWYuZG9uZX0pfX0se2tleToicmVhZCIsdmFsdWU6ZnVuY3Rpb24oZSxhLG8pe3ZhciBzPXRoaXMsdT1hcmd1bWVudHMubGVuZ3RoPjMmJmFyZ3VtZW50c1szXSE9PXZvaWQgMD9hcmd1bWVudHNbM106MCxsPWFyZ3VtZW50cy5sZW5ndGg+NCYmYXJndW1lbnRzWzRdIT09dm9pZCAwP2FyZ3VtZW50c1s0XTp0aGlzLnJldHJ5VGltZW91dCxjPWFyZ3VtZW50cy5sZW5ndGg+NT9hcmd1bWVudHNbNV06dm9pZCAwO2lmKCFlLmxlbmd0aClyZXR1cm4gYyhudWxsLHt9KTtpZih0aGlzLnJlYWRpbmdDYWxscz49dGhpcy5tYXhQYXJhbGxlbFJlYWRzKXt0aGlzLndhaXRpbmdSZWFkcy5wdXNoKHtsbmc6ZSxuczphLGZjTmFtZTpvLHRyaWVkOnUsd2FpdDpsLGNhbGxiYWNrOmN9KTtyZXR1cm59cmV0dXJuIHRoaXMucmVhZGluZ0NhbGxzKyssdGhpcy5iYWNrZW5kW29dKGUsYSxmdW5jdGlvbihmLGcpe2lmKHMucmVhZGluZ0NhbGxzLS0scy53YWl0aW5nUmVhZHMubGVuZ3RoPjApe3ZhciBwPXMud2FpdGluZ1JlYWRzLnNoaWZ0KCk7cy5yZWFkKHAubG5nLHAubnMscC5mY05hbWUscC50cmllZCxwLndhaXQscC5jYWxsYmFjayl9aWYoZiYmZyYmdTxzLm1heFJldHJpZXMpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtzLnJlYWQuY2FsbChzLGUsYSxvLHUrMSxsKjIsYyl9LGwpO3JldHVybn1jKGYsZyl9KX19LHtrZXk6InByZXBhcmVMb2FkaW5nIix2YWx1ZTpmdW5jdGlvbihlLGEpe3ZhciBvPXRoaXMscz1hcmd1bWVudHMubGVuZ3RoPjImJmFyZ3VtZW50c1syXSE9PXZvaWQgMD9hcmd1bWVudHNbMl06e30sdT1hcmd1bWVudHMubGVuZ3RoPjM/YXJndW1lbnRzWzNdOnZvaWQgMDtpZighdGhpcy5iYWNrZW5kKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKCJObyBiYWNrZW5kIHdhcyBhZGRlZCB2aWEgaTE4bmV4dC51c2UuIFdpbGwgbm90IGxvYWQgcmVzb3VyY2VzLiIpLHUmJnUoKTt0eXBlb2YgZT09InN0cmluZyImJihlPXRoaXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkoZSkpLHR5cGVvZiBhPT0ic3RyaW5nIiYmKGE9W2FdKTt2YXIgbD10aGlzLnF1ZXVlTG9hZChlLGEscyx1KTtpZighbC50b0xvYWQubGVuZ3RoKXJldHVybiBsLnBlbmRpbmcubGVuZ3RofHx1KCksbnVsbDtsLnRvTG9hZC5mb3JFYWNoKGZ1bmN0aW9uKGMpe28ubG9hZE9uZShjKX0pfX0se2tleToibG9hZCIsdmFsdWU6ZnVuY3Rpb24oZSxhLG8pe3RoaXMucHJlcGFyZUxvYWRpbmcoZSxhLHt9LG8pfX0se2tleToicmVsb2FkIix2YWx1ZTpmdW5jdGlvbihlLGEsbyl7dGhpcy5wcmVwYXJlTG9hZGluZyhlLGEse3JlbG9hZDohMH0sbyl9fSx7a2V5OiJsb2FkT25lIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgYT10aGlzLG89YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOiIiLHM9ZS5zcGxpdCgifCIpLHU9c1swXSxsPXNbMV07dGhpcy5yZWFkKHUsbCwicmVhZCIsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbihjLGYpe2MmJmEubG9nZ2VyLndhcm4oIiIuY29uY2F0KG8sImxvYWRpbmcgbmFtZXNwYWNlICIpLmNvbmNhdChsLCIgZm9yIGxhbmd1YWdlICIpLmNvbmNhdCh1LCIgZmFpbGVkIiksYyksIWMmJmYmJmEubG9nZ2VyLmxvZygiIi5jb25jYXQobywibG9hZGVkIG5hbWVzcGFjZSAiKS5jb25jYXQobCwiIGZvciBsYW5ndWFnZSAiKS5jb25jYXQodSksZiksYS5sb2FkZWQoZSxjLGYpfSl9fSx7a2V5OiJzYXZlTWlzc2luZyIsdmFsdWU6ZnVuY3Rpb24oZSxhLG8scyx1KXt2YXIgbD1hcmd1bWVudHMubGVuZ3RoPjUmJmFyZ3VtZW50c1s1XSE9PXZvaWQgMD9hcmd1bWVudHNbNV06e307aWYodGhpcy5zZXJ2aWNlcy51dGlscyYmdGhpcy5zZXJ2aWNlcy51dGlscy5oYXNMb2FkZWROYW1lc3BhY2UmJiF0aGlzLnNlcnZpY2VzLnV0aWxzLmhhc0xvYWRlZE5hbWVzcGFjZShhKSl7dGhpcy5sb2dnZXIud2FybignZGlkIG5vdCBzYXZlIGtleSAiJy5jb25jYXQobywnIiBhcyB0aGUgbmFtZXNwYWNlICInKS5jb25jYXQoYSwnIiB3YXMgbm90IHlldCBsb2FkZWQnKSwiVGhpcyBtZWFucyBzb21ldGhpbmcgSVMgV1JPTkcgaW4geW91ciBzZXR1cC4gWW91IGFjY2VzcyB0aGUgdCBmdW5jdGlvbiBiZWZvcmUgaTE4bmV4dC5pbml0IC8gaTE4bmV4dC5sb2FkTmFtZXNwYWNlIC8gaTE4bmV4dC5jaGFuZ2VMYW5ndWFnZSB3YXMgZG9uZS4gV2FpdCBmb3IgdGhlIGNhbGxiYWNrIG9yIFByb21pc2UgdG8gcmVzb2x2ZSBiZWZvcmUgYWNjZXNzaW5nIGl0ISEhIik7cmV0dXJufW89PW51bGx8fG89PT0iInx8KHRoaXMuYmFja2VuZCYmdGhpcy5iYWNrZW5kLmNyZWF0ZSYmdGhpcy5iYWNrZW5kLmNyZWF0ZShlLGEsbyxzLG51bGwsRWUoRWUoe30sbCkse30se2lzVXBkYXRlOnV9KSksISghZXx8IWVbMF0pJiZ0aGlzLnN0b3JlLmFkZFJlc291cmNlKGVbMF0sYSxvLHMpKX19XSksbn0oSSk7ZnVuY3Rpb24gT3QoKXtyZXR1cm57ZGVidWc6ITEsaW5pdEltbWVkaWF0ZTohMCxuczpbInRyYW5zbGF0aW9uIl0sZGVmYXVsdE5TOlsidHJhbnNsYXRpb24iXSxmYWxsYmFja0xuZzpbImRldiJdLGZhbGxiYWNrTlM6ITEsc3VwcG9ydGVkTG5nczohMSxub25FeHBsaWNpdFN1cHBvcnRlZExuZ3M6ITEsbG9hZDoiYWxsIixwcmVsb2FkOiExLHNpbXBsaWZ5UGx1cmFsU3VmZml4OiEwLGtleVNlcGFyYXRvcjoiLiIsbnNTZXBhcmF0b3I6IjoiLHBsdXJhbFNlcGFyYXRvcjoiXyIsY29udGV4dFNlcGFyYXRvcjoiXyIscGFydGlhbEJ1bmRsZWRMYW5ndWFnZXM6ITEsc2F2ZU1pc3Npbmc6ITEsdXBkYXRlTWlzc2luZzohMSxzYXZlTWlzc2luZ1RvOiJmYWxsYmFjayIsc2F2ZU1pc3NpbmdQbHVyYWxzOiEwLG1pc3NpbmdLZXlIYW5kbGVyOiExLG1pc3NpbmdJbnRlcnBvbGF0aW9uSGFuZGxlcjohMSxwb3N0UHJvY2VzczohMSxwb3N0UHJvY2Vzc1Bhc3NSZXNvbHZlZDohMSxyZXR1cm5OdWxsOiEwLHJldHVybkVtcHR5U3RyaW5nOiEwLHJldHVybk9iamVjdHM6ITEsam9pbkFycmF5czohMSxyZXR1cm5lZE9iamVjdEhhbmRsZXI6ITEscGFyc2VNaXNzaW5nS2V5SGFuZGxlcjohMSxhcHBlbmROYW1lc3BhY2VUb01pc3NpbmdLZXk6ITEsYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGU6ITEsb3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXI6ZnVuY3Rpb24odCl7dmFyIG49e307aWYoUCh0WzFdKT09PSJvYmplY3QiJiYobj10WzFdKSx0eXBlb2YgdFsxXT09InN0cmluZyImJihuLmRlZmF1bHRWYWx1ZT10WzFdKSx0eXBlb2YgdFsyXT09InN0cmluZyImJihuLnREZXNjcmlwdGlvbj10WzJdKSxQKHRbMl0pPT09Im9iamVjdCJ8fFAodFszXSk9PT0ib2JqZWN0Iil7dmFyIHI9dFszXXx8dFsyXTtPYmplY3Qua2V5cyhyKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe25bZV09cltlXX0pfXJldHVybiBufSxpbnRlcnBvbGF0aW9uOntlc2NhcGVWYWx1ZTohMCxmb3JtYXQ6ZnVuY3Rpb24odCxuLHIsZSl7cmV0dXJuIHR9LHByZWZpeDoie3siLHN1ZmZpeDoifX0iLGZvcm1hdFNlcGFyYXRvcjoiLCIsdW5lc2NhcGVQcmVmaXg6Ii0iLG5lc3RpbmdQcmVmaXg6IiR0KCIsbmVzdGluZ1N1ZmZpeDoiKSIsbmVzdGluZ09wdGlvbnNTZXBhcmF0b3I6IiwiLG1heFJlcGxhY2VzOjFlMyxza2lwT25WYXJpYWJsZXM6ITB9fX1mdW5jdGlvbiBGZShpKXtyZXR1cm4gdHlwZW9mIGkubnM9PSJzdHJpbmciJiYoaS5ucz1baS5uc10pLHR5cGVvZiBpLmZhbGxiYWNrTG5nPT0ic3RyaW5nIiYmKGkuZmFsbGJhY2tMbmc9W2kuZmFsbGJhY2tMbmddKSx0eXBlb2YgaS5mYWxsYmFja05TPT0ic3RyaW5nIiYmKGkuZmFsbGJhY2tOUz1baS5mYWxsYmFja05TXSksaS5zdXBwb3J0ZWRMbmdzJiZpLnN1cHBvcnRlZExuZ3MuaW5kZXhPZigiY2ltb2RlIik8MCYmKGkuc3VwcG9ydGVkTG5ncz1pLnN1cHBvcnRlZExuZ3MuY29uY2F0KFsiY2ltb2RlIl0pKSxpfWZ1bmN0aW9uIF9lKGksdCl7dmFyIG49T2JqZWN0LmtleXMoaSk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhpKTt0JiYocj1yLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihpLGUpLmVudW1lcmFibGV9KSksbi5wdXNoLmFwcGx5KG4scil9cmV0dXJuIG59ZnVuY3Rpb24gQyhpKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgbj1hcmd1bWVudHNbdF0hPW51bGw/YXJndW1lbnRzW3RdOnt9O3QlMj9fZShPYmplY3QobiksITApLmZvckVhY2goZnVuY3Rpb24ocil7XyhpLHIsbltyXSl9KTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyhpLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKTpfZShPYmplY3QobikpLmZvckVhY2goZnVuY3Rpb24ocil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGkscixPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4scikpfSl9cmV0dXJuIGl9ZnVuY3Rpb24gU3QoaSl7dmFyIHQ9d3QoKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj1qKGkpLGU7aWYodCl7dmFyIGE9aih0aGlzKS5jb25zdHJ1Y3RvcjtlPVJlZmxlY3QuY29uc3RydWN0KHIsYXJndW1lbnRzLGEpfWVsc2UgZT1yLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gQih0aGlzLGUpfX1mdW5jdGlvbiB3dCgpe2lmKHR5cGVvZiBSZWZsZWN0PiJ1Inx8IVJlZmxlY3QuY29uc3RydWN0fHxSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKXJldHVybiExO2lmKHR5cGVvZiBQcm94eT09ImZ1bmN0aW9uIilyZXR1cm4hMDt0cnl7cmV0dXJuIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLFtdLGZ1bmN0aW9uKCl7fSkpLCEwfWNhdGNoe3JldHVybiExfX1mdW5jdGlvbiBlZSgpe31mdW5jdGlvbiB4dChpKXt2YXIgdD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPYmplY3QuZ2V0UHJvdG90eXBlT2YoaSkpO3QuZm9yRWFjaChmdW5jdGlvbihuKXt0eXBlb2YgaVtuXT09ImZ1bmN0aW9uIiYmKGlbbl09aVtuXS5iaW5kKGkpKX0pfXZhciB0ZT1mdW5jdGlvbihpKXtRKG4saSk7dmFyIHQ9U3Qobik7ZnVuY3Rpb24gbigpe3ZhciByLGU9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9LGE9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDA7aWYoUih0aGlzLG4pLHI9dC5jYWxsKHRoaXMpLHEmJkkuY2FsbChGKHIpKSxyLm9wdGlvbnM9RmUoZSksci5zZXJ2aWNlcz17fSxyLmxvZ2dlcj1OLHIubW9kdWxlcz17ZXh0ZXJuYWw6W119LHh0KEYocikpLGEmJiFyLmlzSW5pdGlhbGl6ZWQmJiFlLmlzQ2xvbmUpe2lmKCFyLm9wdGlvbnMuaW5pdEltbWVkaWF0ZSlyZXR1cm4gci5pbml0KGUsYSksQihyLEYocikpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtyLmluaXQoZSxhKX0sMCl9cmV0dXJuIHJ9cmV0dXJuIGsobixbe2tleToiaW5pdCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGE9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9LG89YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDA7dHlwZW9mIGE9PSJmdW5jdGlvbiImJihvPWEsYT17fSksIWEuZGVmYXVsdE5TJiZhLmRlZmF1bHROUyE9PSExJiZhLm5zJiYodHlwZW9mIGEubnM9PSJzdHJpbmciP2EuZGVmYXVsdE5TPWEubnM6YS5ucy5pbmRleE9mKCJ0cmFuc2xhdGlvbiIpPDAmJihhLmRlZmF1bHROUz1hLm5zWzBdKSk7dmFyIHM9T3QoKTt0aGlzLm9wdGlvbnM9QyhDKEMoe30scyksdGhpcy5vcHRpb25zKSxGZShhKSksdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkhPT0idjEiJiYodGhpcy5vcHRpb25zLmludGVycG9sYXRpb249QyhDKHt9LHMuaW50ZXJwb2xhdGlvbiksdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24pKSxhLmtleVNlcGFyYXRvciE9PXZvaWQgMCYmKHRoaXMub3B0aW9ucy51c2VyRGVmaW5lZEtleVNlcGFyYXRvcj1hLmtleVNlcGFyYXRvciksYS5uc1NlcGFyYXRvciE9PXZvaWQgMCYmKHRoaXMub3B0aW9ucy51c2VyRGVmaW5lZE5zU2VwYXJhdG9yPWEubnNTZXBhcmF0b3IpO2Z1bmN0aW9uIHUoZCl7cmV0dXJuIGQ/dHlwZW9mIGQ9PSJmdW5jdGlvbiI/bmV3IGQ6ZDpudWxsfWlmKCF0aGlzLm9wdGlvbnMuaXNDbG9uZSl7dGhpcy5tb2R1bGVzLmxvZ2dlcj9OLmluaXQodSh0aGlzLm1vZHVsZXMubG9nZ2VyKSx0aGlzLm9wdGlvbnMpOk4uaW5pdChudWxsLHRoaXMub3B0aW9ucyk7dmFyIGw7dGhpcy5tb2R1bGVzLmZvcm1hdHRlcj9sPXRoaXMubW9kdWxlcy5mb3JtYXR0ZXI6dHlwZW9mIEludGw8InUiJiYobD1odCk7dmFyIGM9bmV3IHN0KHRoaXMub3B0aW9ucyk7dGhpcy5zdG9yZT1uZXcgYXQodGhpcy5vcHRpb25zLnJlc291cmNlcyx0aGlzLm9wdGlvbnMpO3ZhciBmPXRoaXMuc2VydmljZXM7Zi5sb2dnZXI9TixmLnJlc291cmNlU3RvcmU9dGhpcy5zdG9yZSxmLmxhbmd1YWdlVXRpbHM9YyxmLnBsdXJhbFJlc29sdmVyPW5ldyBndChjLHtwcmVwZW5kOnRoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3IsY29tcGF0aWJpbGl0eUpTT046dGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OLHNpbXBsaWZ5UGx1cmFsU3VmZml4OnRoaXMub3B0aW9ucy5zaW1wbGlmeVBsdXJhbFN1ZmZpeH0pLGwmJighdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0fHx0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXQ9PT1zLmludGVycG9sYXRpb24uZm9ybWF0KSYmKGYuZm9ybWF0dGVyPXUobCksZi5mb3JtYXR0ZXIuaW5pdChmLHRoaXMub3B0aW9ucyksdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0PWYuZm9ybWF0dGVyLmZvcm1hdC5iaW5kKGYuZm9ybWF0dGVyKSksZi5pbnRlcnBvbGF0b3I9bmV3IHB0KHRoaXMub3B0aW9ucyksZi51dGlscz17aGFzTG9hZGVkTmFtZXNwYWNlOnRoaXMuaGFzTG9hZGVkTmFtZXNwYWNlLmJpbmQodGhpcyl9LGYuYmFja2VuZENvbm5lY3Rvcj1uZXcgYnQodSh0aGlzLm1vZHVsZXMuYmFja2VuZCksZi5yZXNvdXJjZVN0b3JlLGYsdGhpcy5vcHRpb25zKSxmLmJhY2tlbmRDb25uZWN0b3Iub24oIioiLGZ1bmN0aW9uKGQpe2Zvcih2YXIgaD1hcmd1bWVudHMubGVuZ3RoLE89bmV3IEFycmF5KGg+MT9oLTE6MCksYj0xO2I8aDtiKyspT1tiLTFdPWFyZ3VtZW50c1tiXTtlLmVtaXQuYXBwbHkoZSxbZF0uY29uY2F0KE8pKX0pLHRoaXMubW9kdWxlcy5sYW5ndWFnZURldGVjdG9yJiYoZi5sYW5ndWFnZURldGVjdG9yPXUodGhpcy5tb2R1bGVzLmxhbmd1YWdlRGV0ZWN0b3IpLGYubGFuZ3VhZ2VEZXRlY3Rvci5pbml0KGYsdGhpcy5vcHRpb25zLmRldGVjdGlvbix0aGlzLm9wdGlvbnMpKSx0aGlzLm1vZHVsZXMuaTE4bkZvcm1hdCYmKGYuaTE4bkZvcm1hdD11KHRoaXMubW9kdWxlcy5pMThuRm9ybWF0KSxmLmkxOG5Gb3JtYXQuaW5pdCYmZi5pMThuRm9ybWF0LmluaXQodGhpcykpLHRoaXMudHJhbnNsYXRvcj1uZXcgUmUodGhpcy5zZXJ2aWNlcyx0aGlzLm9wdGlvbnMpLHRoaXMudHJhbnNsYXRvci5vbigiKiIsZnVuY3Rpb24oZCl7Zm9yKHZhciBoPWFyZ3VtZW50cy5sZW5ndGgsTz1uZXcgQXJyYXkoaD4xP2gtMTowKSxiPTE7YjxoO2IrKylPW2ItMV09YXJndW1lbnRzW2JdO2UuZW1pdC5hcHBseShlLFtkXS5jb25jYXQoTykpfSksdGhpcy5tb2R1bGVzLmV4dGVybmFsLmZvckVhY2goZnVuY3Rpb24oZCl7ZC5pbml0JiZkLmluaXQoZSl9KX1pZih0aGlzLmZvcm1hdD10aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXQsb3x8KG89ZWUpLHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZyYmIXRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciYmIXRoaXMub3B0aW9ucy5sbmcpe3ZhciBnPXRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy5nZXRGYWxsYmFja0NvZGVzKHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZyk7Zy5sZW5ndGg+MCYmZ1swXSE9PSJkZXYiJiYodGhpcy5vcHRpb25zLmxuZz1nWzBdKX0hdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yJiYhdGhpcy5vcHRpb25zLmxuZyYmdGhpcy5sb2dnZXIud2FybigiaW5pdDogbm8gbGFuZ3VhZ2VEZXRlY3RvciBpcyB1c2VkIGFuZCBubyBsbmcgaXMgZGVmaW5lZCIpO3ZhciBwPVsiZ2V0UmVzb3VyY2UiLCJoYXNSZXNvdXJjZUJ1bmRsZSIsImdldFJlc291cmNlQnVuZGxlIiwiZ2V0RGF0YUJ5TGFuZ3VhZ2UiXTtwLmZvckVhY2goZnVuY3Rpb24oZCl7ZVtkXT1mdW5jdGlvbigpe3ZhciBoO3JldHVybihoPWUuc3RvcmUpW2RdLmFwcGx5KGgsYXJndW1lbnRzKX19KTt2YXIgbT1bImFkZFJlc291cmNlIiwiYWRkUmVzb3VyY2VzIiwiYWRkUmVzb3VyY2VCdW5kbGUiLCJyZW1vdmVSZXNvdXJjZUJ1bmRsZSJdO20uZm9yRWFjaChmdW5jdGlvbihkKXtlW2RdPWZ1bmN0aW9uKCl7dmFyIGg7cmV0dXJuKGg9ZS5zdG9yZSlbZF0uYXBwbHkoaCxhcmd1bWVudHMpLGV9fSk7dmFyIHk9TSgpLHY9ZnVuY3Rpb24oKXt2YXIgaD1mdW5jdGlvbihiLHgpe2UuaXNJbml0aWFsaXplZCYmIWUuaW5pdGlhbGl6ZWRTdG9yZU9uY2UmJmUubG9nZ2VyLndhcm4oImluaXQ6IGkxOG5leHQgaXMgYWxyZWFkeSBpbml0aWFsaXplZC4gWW91IHNob3VsZCBjYWxsIGluaXQganVzdCBvbmNlISIpLGUuaXNJbml0aWFsaXplZD0hMCxlLm9wdGlvbnMuaXNDbG9uZXx8ZS5sb2dnZXIubG9nKCJpbml0aWFsaXplZCIsZS5vcHRpb25zKSxlLmVtaXQoImluaXRpYWxpemVkIixlLm9wdGlvbnMpLHkucmVzb2x2ZSh4KSxvKGIseCl9O2lmKGUubGFuZ3VhZ2VzJiZlLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSE9PSJ2MSImJiFlLmlzSW5pdGlhbGl6ZWQpcmV0dXJuIGgobnVsbCxlLnQuYmluZChlKSk7ZS5jaGFuZ2VMYW5ndWFnZShlLm9wdGlvbnMubG5nLGgpfTtyZXR1cm4gdGhpcy5vcHRpb25zLnJlc291cmNlc3x8IXRoaXMub3B0aW9ucy5pbml0SW1tZWRpYXRlP3YoKTpzZXRUaW1lb3V0KHYsMCkseX19LHtrZXk6ImxvYWRSZXNvdXJjZXMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBhPXRoaXMsbz1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06ZWUscz1vLHU9dHlwZW9mIGU9PSJzdHJpbmciP2U6dGhpcy5sYW5ndWFnZTtpZih0eXBlb2YgZT09ImZ1bmN0aW9uIiYmKHM9ZSksIXRoaXMub3B0aW9ucy5yZXNvdXJjZXN8fHRoaXMub3B0aW9ucy5wYXJ0aWFsQnVuZGxlZExhbmd1YWdlcyl7aWYodSYmdS50b0xvd2VyQ2FzZSgpPT09ImNpbW9kZSIpcmV0dXJuIHMoKTt2YXIgbD1bXSxjPWZ1bmN0aW9uKHApe2lmKHApe3ZhciBtPWEuc2VydmljZXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkocCk7bS5mb3JFYWNoKGZ1bmN0aW9uKHkpe2wuaW5kZXhPZih5KTwwJiZsLnB1c2goeSl9KX19O2lmKHUpYyh1KTtlbHNle3ZhciBmPXRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy5nZXRGYWxsYmFja0NvZGVzKHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZyk7Zi5mb3JFYWNoKGZ1bmN0aW9uKGcpe3JldHVybiBjKGcpfSl9dGhpcy5vcHRpb25zLnByZWxvYWQmJnRoaXMub3B0aW9ucy5wcmVsb2FkLmZvckVhY2goZnVuY3Rpb24oZyl7cmV0dXJuIGMoZyl9KSx0aGlzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3IubG9hZChsLHRoaXMub3B0aW9ucy5ucyxmdW5jdGlvbihnKXshZyYmIWEucmVzb2x2ZWRMYW5ndWFnZSYmYS5sYW5ndWFnZSYmYS5zZXRSZXNvbHZlZExhbmd1YWdlKGEubGFuZ3VhZ2UpLHMoZyl9KX1lbHNlIHMobnVsbCl9fSx7a2V5OiJyZWxvYWRSZXNvdXJjZXMiLHZhbHVlOmZ1bmN0aW9uKGUsYSxvKXt2YXIgcz1NKCk7cmV0dXJuIGV8fChlPXRoaXMubGFuZ3VhZ2VzKSxhfHwoYT10aGlzLm9wdGlvbnMubnMpLG98fChvPWVlKSx0aGlzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3IucmVsb2FkKGUsYSxmdW5jdGlvbih1KXtzLnJlc29sdmUoKSxvKHUpfSksc319LHtrZXk6InVzZSIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJZb3UgYXJlIHBhc3NpbmcgYW4gdW5kZWZpbmVkIG1vZHVsZSEgUGxlYXNlIGNoZWNrIHRoZSBvYmplY3QgeW91IGFyZSBwYXNzaW5nIHRvIGkxOG5leHQudXNlKCkiKTtpZighZS50eXBlKXRocm93IG5ldyBFcnJvcigiWW91IGFyZSBwYXNzaW5nIGEgd3JvbmcgbW9kdWxlISBQbGVhc2UgY2hlY2sgdGhlIG9iamVjdCB5b3UgYXJlIHBhc3NpbmcgdG8gaTE4bmV4dC51c2UoKSIpO3JldHVybiBlLnR5cGU9PT0iYmFja2VuZCImJih0aGlzLm1vZHVsZXMuYmFja2VuZD1lKSwoZS50eXBlPT09ImxvZ2dlciJ8fGUubG9nJiZlLndhcm4mJmUuZXJyb3IpJiYodGhpcy5tb2R1bGVzLmxvZ2dlcj1lKSxlLnR5cGU9PT0ibGFuZ3VhZ2VEZXRlY3RvciImJih0aGlzLm1vZHVsZXMubGFuZ3VhZ2VEZXRlY3Rvcj1lKSxlLnR5cGU9PT0iaTE4bkZvcm1hdCImJih0aGlzLm1vZHVsZXMuaTE4bkZvcm1hdD1lKSxlLnR5cGU9PT0icG9zdFByb2Nlc3NvciImJnhlLmFkZFBvc3RQcm9jZXNzb3IoZSksZS50eXBlPT09ImZvcm1hdHRlciImJih0aGlzLm1vZHVsZXMuZm9ybWF0dGVyPWUpLGUudHlwZT09PSIzcmRQYXJ0eSImJnRoaXMubW9kdWxlcy5leHRlcm5hbC5wdXNoKGUpLHRoaXN9fSx7a2V5OiJzZXRSZXNvbHZlZExhbmd1YWdlIix2YWx1ZTpmdW5jdGlvbihlKXtpZighKCFlfHwhdGhpcy5sYW5ndWFnZXMpJiYhKFsiY2ltb2RlIiwiZGV2Il0uaW5kZXhPZihlKT4tMSkpZm9yKHZhciBhPTA7YTx0aGlzLmxhbmd1YWdlcy5sZW5ndGg7YSsrKXt2YXIgbz10aGlzLmxhbmd1YWdlc1thXTtpZighKFsiY2ltb2RlIiwiZGV2Il0uaW5kZXhPZihvKT4tMSkmJnRoaXMuc3RvcmUuaGFzTGFuZ3VhZ2VTb21lVHJhbnNsYXRpb25zKG8pKXt0aGlzLnJlc29sdmVkTGFuZ3VhZ2U9bzticmVha319fX0se2tleToiY2hhbmdlTGFuZ3VhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsYSl7dmFyIG89dGhpczt0aGlzLmlzTGFuZ3VhZ2VDaGFuZ2luZ1RvPWU7dmFyIHM9TSgpO3RoaXMuZW1pdCgibGFuZ3VhZ2VDaGFuZ2luZyIsZSk7dmFyIHU9ZnVuY3Rpb24oZyl7by5sYW5ndWFnZT1nLG8ubGFuZ3VhZ2VzPW8uc2VydmljZXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkoZyksby5yZXNvbHZlZExhbmd1YWdlPXZvaWQgMCxvLnNldFJlc29sdmVkTGFuZ3VhZ2UoZyl9LGw9ZnVuY3Rpb24oZyxwKXtwPyh1KHApLG8udHJhbnNsYXRvci5jaGFuZ2VMYW5ndWFnZShwKSxvLmlzTGFuZ3VhZ2VDaGFuZ2luZ1RvPXZvaWQgMCxvLmVtaXQoImxhbmd1YWdlQ2hhbmdlZCIscCksby5sb2dnZXIubG9nKCJsYW5ndWFnZUNoYW5nZWQiLHApKTpvLmlzTGFuZ3VhZ2VDaGFuZ2luZ1RvPXZvaWQgMCxzLnJlc29sdmUoZnVuY3Rpb24oKXtyZXR1cm4gby50LmFwcGx5KG8sYXJndW1lbnRzKX0pLGEmJmEoZyxmdW5jdGlvbigpe3JldHVybiBvLnQuYXBwbHkobyxhcmd1bWVudHMpfSl9LGM9ZnVuY3Rpb24oZyl7IWUmJiFnJiZvLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3ImJihnPVtdKTt2YXIgcD10eXBlb2YgZz09InN0cmluZyI/ZzpvLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuZ2V0QmVzdE1hdGNoRnJvbUNvZGVzKGcpO3AmJihvLmxhbmd1YWdlfHx1KHApLG8udHJhbnNsYXRvci5sYW5ndWFnZXx8by50cmFuc2xhdG9yLmNoYW5nZUxhbmd1YWdlKHApLG8uc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciYmby5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmNhY2hlVXNlckxhbmd1YWdlKHApKSxvLmxvYWRSZXNvdXJjZXMocCxmdW5jdGlvbihtKXtsKG0scCl9KX07cmV0dXJuIWUmJnRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciYmIXRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5hc3luYz9jKHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3QoKSk6IWUmJnRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciYmdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmFzeW5jP3RoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3QoYyk6YyhlKSxzfX0se2tleToiZ2V0Rml4ZWRUIix2YWx1ZTpmdW5jdGlvbihlLGEsbyl7dmFyIHM9dGhpcyx1PWZ1bmN0aW9uIGwoYyxmKXt2YXIgZztpZihQKGYpIT09Im9iamVjdCIpe2Zvcih2YXIgcD1hcmd1bWVudHMubGVuZ3RoLG09bmV3IEFycmF5KHA+Mj9wLTI6MCkseT0yO3k8cDt5KyspbVt5LTJdPWFyZ3VtZW50c1t5XTtnPXMub3B0aW9ucy5vdmVybG9hZFRyYW5zbGF0aW9uT3B0aW9uSGFuZGxlcihbYyxmXS5jb25jYXQobSkpfWVsc2UgZz1DKHt9LGYpO2cubG5nPWcubG5nfHxsLmxuZyxnLmxuZ3M9Zy5sbmdzfHxsLmxuZ3MsZy5ucz1nLm5zfHxsLm5zLGcua2V5UHJlZml4PWcua2V5UHJlZml4fHxvfHxsLmtleVByZWZpeDt2YXIgdj1zLm9wdGlvbnMua2V5U2VwYXJhdG9yfHwiLiIsZD1nLmtleVByZWZpeD8iIi5jb25jYXQoZy5rZXlQcmVmaXgpLmNvbmNhdCh2KS5jb25jYXQoYyk6YztyZXR1cm4gcy50KGQsZyl9O3JldHVybiB0eXBlb2YgZT09InN0cmluZyI/dS5sbmc9ZTp1LmxuZ3M9ZSx1Lm5zPWEsdS5rZXlQcmVmaXg9byx1fX0se2tleToidCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gdGhpcy50cmFuc2xhdG9yJiYoZT10aGlzLnRyYW5zbGF0b3IpLnRyYW5zbGF0ZS5hcHBseShlLGFyZ3VtZW50cyl9fSx7a2V5OiJleGlzdHMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIHRoaXMudHJhbnNsYXRvciYmKGU9dGhpcy50cmFuc2xhdG9yKS5leGlzdHMuYXBwbHkoZSxhcmd1bWVudHMpfX0se2tleToic2V0RGVmYXVsdE5hbWVzcGFjZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zLmRlZmF1bHROUz1lfX0se2tleToiaGFzTG9hZGVkTmFtZXNwYWNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgYT10aGlzLG89YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9O2lmKCF0aGlzLmlzSW5pdGlhbGl6ZWQpcmV0dXJuIHRoaXMubG9nZ2VyLndhcm4oImhhc0xvYWRlZE5hbWVzcGFjZTogaTE4bmV4dCB3YXMgbm90IGluaXRpYWxpemVkIix0aGlzLmxhbmd1YWdlcyksITE7aWYoIXRoaXMubGFuZ3VhZ2VzfHwhdGhpcy5sYW5ndWFnZXMubGVuZ3RoKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKCJoYXNMb2FkZWROYW1lc3BhY2U6IGkxOG4ubGFuZ3VhZ2VzIHdlcmUgdW5kZWZpbmVkIG9yIGVtcHR5Iix0aGlzLmxhbmd1YWdlcyksITE7dmFyIHM9dGhpcy5yZXNvbHZlZExhbmd1YWdlfHx0aGlzLmxhbmd1YWdlc1swXSx1PXRoaXMub3B0aW9ucz90aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmc6ITEsbD10aGlzLmxhbmd1YWdlc1t0aGlzLmxhbmd1YWdlcy5sZW5ndGgtMV07aWYocy50b0xvd2VyQ2FzZSgpPT09ImNpbW9kZSIpcmV0dXJuITA7dmFyIGM9ZnVuY3Rpb24ocCxtKXt2YXIgeT1hLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3Iuc3RhdGVbIiIuY29uY2F0KHAsInwiKS5jb25jYXQobSldO3JldHVybiB5PT09LTF8fHk9PT0yfTtpZihvLnByZWNoZWNrKXt2YXIgZj1vLnByZWNoZWNrKHRoaXMsYyk7aWYoZiE9PXZvaWQgMClyZXR1cm4gZn1yZXR1cm4hISh0aGlzLmhhc1Jlc291cmNlQnVuZGxlKHMsZSl8fCF0aGlzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3IuYmFja2VuZHx8dGhpcy5vcHRpb25zLnJlc291cmNlcyYmIXRoaXMub3B0aW9ucy5wYXJ0aWFsQnVuZGxlZExhbmd1YWdlc3x8YyhzLGUpJiYoIXV8fGMobCxlKSkpfX0se2tleToibG9hZE5hbWVzcGFjZXMiLHZhbHVlOmZ1bmN0aW9uKGUsYSl7dmFyIG89dGhpcyxzPU0oKTtyZXR1cm4gdGhpcy5vcHRpb25zLm5zPyh0eXBlb2YgZT09InN0cmluZyImJihlPVtlXSksZS5mb3JFYWNoKGZ1bmN0aW9uKHUpe28ub3B0aW9ucy5ucy5pbmRleE9mKHUpPDAmJm8ub3B0aW9ucy5ucy5wdXNoKHUpfSksdGhpcy5sb2FkUmVzb3VyY2VzKGZ1bmN0aW9uKHUpe3MucmVzb2x2ZSgpLGEmJmEodSl9KSxzKTooYSYmYSgpLFByb21pc2UucmVzb2x2ZSgpKX19LHtrZXk6ImxvYWRMYW5ndWFnZXMiLHZhbHVlOmZ1bmN0aW9uKGUsYSl7dmFyIG89TSgpO3R5cGVvZiBlPT0ic3RyaW5nIiYmKGU9W2VdKTt2YXIgcz10aGlzLm9wdGlvbnMucHJlbG9hZHx8W10sdT1lLmZpbHRlcihmdW5jdGlvbihsKXtyZXR1cm4gcy5pbmRleE9mKGwpPDB9KTtyZXR1cm4gdS5sZW5ndGg/KHRoaXMub3B0aW9ucy5wcmVsb2FkPXMuY29uY2F0KHUpLHRoaXMubG9hZFJlc291cmNlcyhmdW5jdGlvbihsKXtvLnJlc29sdmUoKSxhJiZhKGwpfSksbyk6KGEmJmEoKSxQcm9taXNlLnJlc29sdmUoKSl9fSx7a2V5OiJkaXIiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGV8fChlPXRoaXMucmVzb2x2ZWRMYW5ndWFnZXx8KHRoaXMubGFuZ3VhZ2VzJiZ0aGlzLmxhbmd1YWdlcy5sZW5ndGg+MD90aGlzLmxhbmd1YWdlc1swXTp0aGlzLmxhbmd1YWdlKSksIWUpcmV0dXJuInJ0bCI7dmFyIGE9WyJhciIsInNodSIsInNxciIsInNzaCIsInhhYSIsInloZCIsInl1ZCIsImFhbyIsImFiaCIsImFidiIsImFjbSIsImFjcSIsImFjdyIsImFjeCIsImFjeSIsImFkZiIsImFkcyIsImFlYiIsImFlYyIsImFmYiIsImFqcCIsImFwYyIsImFwZCIsImFyYiIsImFycSIsImFycyIsImFyeSIsImFyeiIsImF1eiIsImF2bCIsImF5aCIsImF5bCIsImF5biIsImF5cCIsImJieiIsInBnYSIsImhlIiwiaXciLCJwcyIsInBidCIsInBidSIsInBzdCIsInBycCIsInByZCIsInVnIiwidXIiLCJ5ZGQiLCJ5ZHMiLCJ5aWgiLCJqaSIsInlpIiwiaGJvIiwibWVuIiwieG1uIiwiZmEiLCJqcHIiLCJwZW8iLCJwZXMiLCJwcnMiLCJkdiIsInNhbSIsImNrYiJdO3JldHVybiBhLmluZGV4T2YodGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGUpKT4tMXx8ZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoIi1hcmFiIik+MT8icnRsIjoibHRyIn19LHtrZXk6ImNsb25lSW5zdGFuY2UiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxhPWFyZ3VtZW50cy5sZW5ndGg+MCYmYXJndW1lbnRzWzBdIT09dm9pZCAwP2FyZ3VtZW50c1swXTp7fSxvPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTplZSxzPUMoQyhDKHt9LHRoaXMub3B0aW9ucyksYSkse2lzQ2xvbmU6ITB9KSx1PW5ldyBuKHMpOyhhLmRlYnVnIT09dm9pZCAwfHxhLnByZWZpeCE9PXZvaWQgMCkmJih1LmxvZ2dlcj11LmxvZ2dlci5jbG9uZShhKSk7dmFyIGw9WyJzdG9yZSIsInNlcnZpY2VzIiwibGFuZ3VhZ2UiXTtyZXR1cm4gbC5mb3JFYWNoKGZ1bmN0aW9uKGMpe3VbY109ZVtjXX0pLHUuc2VydmljZXM9Qyh7fSx0aGlzLnNlcnZpY2VzKSx1LnNlcnZpY2VzLnV0aWxzPXtoYXNMb2FkZWROYW1lc3BhY2U6dS5oYXNMb2FkZWROYW1lc3BhY2UuYmluZCh1KX0sdS50cmFuc2xhdG9yPW5ldyBSZSh1LnNlcnZpY2VzLHUub3B0aW9ucyksdS50cmFuc2xhdG9yLm9uKCIqIixmdW5jdGlvbihjKXtmb3IodmFyIGY9YXJndW1lbnRzLmxlbmd0aCxnPW5ldyBBcnJheShmPjE/Zi0xOjApLHA9MTtwPGY7cCsrKWdbcC0xXT1hcmd1bWVudHNbcF07dS5lbWl0LmFwcGx5KHUsW2NdLmNvbmNhdChnKSl9KSx1LmluaXQocyxvKSx1LnRyYW5zbGF0b3Iub3B0aW9ucz11Lm9wdGlvbnMsdS50cmFuc2xhdG9yLmJhY2tlbmRDb25uZWN0b3Iuc2VydmljZXMudXRpbHM9e2hhc0xvYWRlZE5hbWVzcGFjZTp1Lmhhc0xvYWRlZE5hbWVzcGFjZS5iaW5kKHUpfSx1fX0se2tleToidG9KU09OIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybntvcHRpb25zOnRoaXMub3B0aW9ucyxzdG9yZTp0aGlzLnN0b3JlLGxhbmd1YWdlOnRoaXMubGFuZ3VhZ2UsbGFuZ3VhZ2VzOnRoaXMubGFuZ3VhZ2VzLHJlc29sdmVkTGFuZ3VhZ2U6dGhpcy5yZXNvbHZlZExhbmd1YWdlfX19XSksbn0oSSk7Xyh0ZSwiY3JlYXRlSW5zdGFuY2UiLGZ1bmN0aW9uKCl7dmFyIGk9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9LHQ9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDA7cmV0dXJuIG5ldyB0ZShpLHQpfSk7dmFyIHc9dGUuY3JlYXRlSW5zdGFuY2UoKTt3LmNyZWF0ZUluc3RhbmNlPXRlLmNyZWF0ZUluc3RhbmNlLHcuY3JlYXRlSW5zdGFuY2Usdy5pbml0LHcubG9hZFJlc291cmNlcyx3LnJlbG9hZFJlc291cmNlcyx3LnVzZSx3LmNoYW5nZUxhbmd1YWdlLHcuZ2V0Rml4ZWRULHcudCx3LmV4aXN0cyx3LnNldERlZmF1bHROYW1lc3BhY2Usdy5oYXNMb2FkZWROYW1lc3BhY2Usdy5sb2FkTmFtZXNwYWNlcyx3LmxvYWRMYW5ndWFnZXM7Y29uc3QgUHQ9KGksdCk9PnR5cGVvZiBpPT0ibnVtYmVyIiYmdHlwZW9mIHQ9PSJudW1iZXIiP2ktdDpTdHJpbmcoaSkubG9jYWxlQ29tcGFyZShTdHJpbmcodCkpO2Z1bmN0aW9uIEx0KGkpe3JldHVybiBQdH1jb25zdCBSdD1MdCgpO2Z1bmN0aW9uIEllKGksdCl7aWYoaS5sZW5ndGg8dC5sZW5ndGgpcmV0dXJuLUllKHQsaSk7Zm9yKGxldCBuPTA7bjxpLmxlbmd0aDtuKyspe2lmKCF0W25dKXJldHVybiAxO2NvbnN0IHI9UnQoaVtuXSx0W25dKTtpZihyIT09MClyZXR1cm4gcn1yZXR1cm4gMH1mdW5jdGlvbiBrdChpLHQsbil7Y29uc3Qgcj1uPT09ImFzY2VuZGluZyI/MTotMTtyZXR1cm4gaS5tYXAoZT0+KHtkYXRhOmUsdmFsdWU6dC5tYXAoYT0+ZVthXSl9KSkuc29ydCgoZSxhKT0+cipJZShlLnZhbHVlLGEudmFsdWUpKS5tYXAoZT0+ZS5kYXRhKX1jb25zdCBqdD1pPT57dHJ5e2NvbnN0e2RhdGE6dCx2aWV3TWVhc3VyZXM6bixzb3J0OnJ9PWkuZGF0YSxlPWt0KHQsbixyKTtzZWxmLnBvc3RNZXNzYWdlKGUpfWNhdGNoKHQpe2NvbnNvbGUuZXJyb3IodC5zdGFjayksc2VsZi5wb3N0TWVzc2FnZSh0LnN0YWNrKX19O3NlbGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsanQsITEpfSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9c29ydC53b3JrZXItZWVjMGRhZGUuanMubWFwCg==",C7=typeof window<"u"&&window.Blob&&new Blob([atob(Kae)],{type:"text/javascript;charset=utf-8"});function rVe(){const e=C7&&(window.URL||window.webkitURL).createObjectURL(C7);try{return e?new Worker(e):new Worker("data:application/javascript;base64,"+Kae)}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}function d5(e,t){return new Promise((n,r)=>{e.postMessage(t),e.onmessage=i=>{n(i.data)},e.onerror=i=>{r({success:!1,message:i})}})}const iVe=async(e,t)=>{if(t.length===0)return e;const n=new qCe;try{return await d5(n,{dataSource:e,filters:t})}catch(r){throw new Error("Uncaught error in FilterWorker",{cause:r})}finally{n.terminate()}},oVe=async(e,t)=>{if(e.length===0)return e;const n=new eVe;try{return await d5(n,{dataSource:e,trans:t})}catch(r){throw new Error("Uncaught error in TransformDataWorker",{cause:r})}finally{n.terminate()}},aVe=async(e,t)=>{const n=new tVe;try{return await d5(n,{dataSource:e,query:t})}catch(r){throw new Error("Uncaught error in ViewQueryWorker",{cause:r})}finally{n.terminate()}},sVe=async(e,t,n,r,i,o,a)=>{const s=new nVe;try{return await d5(s,{dimsInRow:e,dimsInColumn:t,allData:n,aggData:r,collapsedKeyList:i,showTableSummary:o,sort:a})}catch(l){throw new Error("Uncaught error in TableBuilderDataWorker",{cause:l})}finally{s.terminate()}},lVe=async(e,t,n)=>{const r=new rVe;try{return await d5(r,{data:e,viewMeasures:t,sort:n})}catch(i){throw new Error("Uncaught error in ViewQueryWorker",{cause:i})}finally{r.terminate()}},uVe=async(e,t,n,r)=>{let i=e;for await(const o of t)switch(o.type){case"filter":{i=await iVe(i,o.filters.map(a=>{const s={fid:a.fid,rule:null};return a.rule.type==="one of"||a.rule.type==="not in"?s.rule={type:a.rule.type,value:new Set(a.rule.value)}:s.rule=a.rule,s}).filter(Boolean));break}case"transform":{i=await oVe(i,o.transform);break}case"view":{for await(const a of o.query)i=await aVe(i,a);break}case"sort":{i=await lVe(i,o.by,o.sort);break}default:{console.warn(new Error(`Unknown step type: ${o.type}`));break}}return i.slice(n!=null?n:0,r?(n!=null?n:0)+r:void 0)},zp=e=>t=>uVe(e,t.workflow,t.offset,t.limit),V7=[],cVe=new ix([]);class dVe{constructor(){_t(this,"metaDict",{}),_t(this,"metaMap",{}),_t(this,"visDict",{}),_t(this,"dataSources",[]),_t(this,"dsIndex",0),DM(this,{dataSource:eb.struct})}get dataSource(){return this.dataSources[this.dsIndex]}get metaId(){var t;return(t=this.dataSource)==null?void 0:t.metaId}get meta(){var t;return this.metaId&&(t=this.metaDict[this.metaId])!=null?t:V7}get computation(){var t;return(t=this.dataSource)!=null&&t.data?zp(w0(this.dataSource.data)):async()=>[]}get visSpecStore(){return!this.metaId||!this.meta.length?cVe:(this.visDict[this.metaId]||(this.visDict[this.metaId]=new ix(this.meta,{onMetaChange:(t,n)=>this.updateCurrentDatasetMetas(t,n)})),this.visDict[this.metaId])}get currentDataset(){var i,o,a;var t,n,r;return{dataSource:(i=(t=this.dataSource)==null?void 0:t.data)!=null?i:[],id:(o=(n=this.dataSource)==null?void 0:n.id)!=null?o:"",name:(a=(r=this.dataSource)==null?void 0:r.name)!=null?a:"",rawFields:this.meta}}updateCurrentDatasetMetas(t,n){const r=this.meta.find(i=>i.fid===t);if(r)for(let i in n)r[i]=n[i]}useDS(t){const n=this.dataSources.findIndex(r=>r.id===t);n>-1&&this.setDatasetIndex(n)}setDatasetIndex(t){this.dsIndex=t}importData(t){if(t.$schema===Z7){this.metaDict=t.metaDict;const n={};Object.keys(t.metaDict).forEach(r=>{const i=t.metaDict[r];n[GS(i)]=r}),this.metaMap=n,this.dataSources=t.datasets,this.visDict=Object.fromEntries(Object.entries(t.specDict).map(([r,i])=>{const o=new ix(t.metaDict[r],{empty:!0,onMetaChange:(a,s)=>this.updateCurrentDatasetMetas(a,s)});return o.importRaw(i),[r,o]}))}else{const n={},r=Object.fromEntries(t.dataSources.map(l=>[l.id,l])),i=[],o={},a={};t.datasets.forEach(({dsId:l,id:u,name:c,rawFields:d})=>{const f=GS(d);o[f]?u=o[f]:(o[f]=u,n[u]=d,a[u]=new ix(d,{empty:!0,onMetaChange:(m,g)=>this.updateCurrentDatasetMetas(m,g)}));const h=r[l];i.push({data:h.data,id:l,metaId:u,name:c})});const[s]=Object.keys(n);s&&t.specList.forEach(l=>{const u=GS(l.encodings.dimensions.concat(l.encodings.measures).filter(c=>!c.computed));(a[u]||a[s]).appendFromOld(l)}),this.metaDict=n,this.visDict=a,this.dataSources=i,this.dsIndex=0}}exportData(){const t={};return Object.keys(this.visDict).forEach(n=>{t[n]=this.visDict[n].exportAllCharts()}),{$schema:Z7,datasets:w0(this.dataSources),metaDict:w0(this.metaDict),specDict:t}}addDataSource(t){const n=GS(t.fields);this.metaMap[n]||(this.metaMap[n]=ji());const r=this.metaMap[n];this.metaDict[r]=t.fields,this.dataSources.push({data:t.data,id:ji(),metaId:r,name:t.name}),this.dsIndex=this.dataSources.length-1}}function GS(e){return e.map(t=>`${t.name}-${t.analyticType[0]}-${t.semanticType[0]}`).sort().join(",")}class fVe{constructor(){_t(this,"dataStore",new dVe),_t(this,"tmpDSName",""),_t(this,"tmpDSRawFields",[]),_t(this,"tmpDataSource",[]),_t(this,"showDSPanel",!1),DM(this,{tmpDataSource:Bn.ref,dataStore:!1})}setShowDSPanel(t){this.showDSPanel=t}initTempDS(){this.tmpDSName="New Dataset",this.tmpDSRawFields=[],this.tmpDataSource=[]}updateTempFields(t){this.tmpDSRawFields=t}updateTempDatasetMetas(t,n){const r=this.tmpDSRawFields.find(i=>i.fid===t);if(r)for(let i in n)r[i]=n[i]}updateTempFieldAnalyticType(t,n){const r=this.tmpDSRawFields.find(i=>i.fid===t);r&&(r.analyticType=n)}updateTempFieldSemanticType(t,n){const r=this.tmpDSRawFields.find(i=>i.fid===t);r&&(r.semanticType=n)}updateTempName(t){this.tmpDSName=t}updateTempDS(t){const n=MRe(t);this.tmpDataSource=n.dataSource,this.tmpDSRawFields=n.fields}updateTempSTDDS(t){this.tmpDataSource=t.dataSource,this.tmpDSRawFields=t.rawFields,this.tmpDSName=t.name}commitTempDS(){const{tmpDSName:t,tmpDSRawFields:n,tmpDataSource:r}=this;this.dataStore.addDataSource({data:r,fields:n,name:t}),this.setShowDSPanel(!1),this.initTempDS()}startDSBuildingTask(){this.initTempDS(),this.showDSPanel=!0}}function Dae(e){const t={};return(n,...r)=>n?(t[n]||(t[n]=e(...r)),t[n]):e(...r)}const pVe=Dae(()=>new fVe),hVe=Dae((e,t)=>new ix(e,t)),Aae=x.createContext(null),aO=x.createContext(null),Uae=()=>{},mVe=e=>{const t=e.keepAlive?`${e.keepAlive}`:"",n=G.useMemo(()=>pVe(t),[t]);return G.useEffect(()=>{if(e.storeRef){const r=e.storeRef;return r.current=n,()=>{r.current=null}}return Uae},[e.storeRef,n]),x.createElement(Aae.Provider,{value:n},e.children)};function nb(){return G.useContext(Aae)}const $ae=e=>{const t=e.keepAlive?`${e.keepAlive}`:"",n=G.useMemo(()=>hVe(t,e.meta,{onMetaChange:e.onMetaChange}),[t]),r=G.useRef(e.meta);return G.useEffect(()=>{r.current!==e.meta&&(n.setMeta(e.meta),r.current=e.meta)},[e.meta,n]),G.useEffect(()=>{if(e.storeRef){const i=e.storeRef;return i.current=n,()=>{i.current=null}}return Uae},[e.storeRef,n]),x.createElement(aO.Provider,{value:n},e.children)};function Tt(){return G.useContext(aO)}const f5=G.createContext(async()=>[]);function cc(){return G.useContext(f5)}function Qae(e,t){return(...n)=>Promise.race([e(...n),new Promise((r,i)=>{setTimeout(()=>i(new Error("timeout")),t)})])}function qae(e,t){return(...n)=>e(...n).catch(r=>{throw t(r),r})}function gVe(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Xs(e="media"){const[t,n]=G.useState(e==="media"?gVe():e);return G.useEffect(()=>{var r;if(e==="media"){const i=(r=window.matchMedia)==null?void 0:r.call(window,"(prefers-color-scheme: dark)"),o=a=>{n(a.matches?"dark":"light")};return i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}}else n(e)},[e]),t}const b3=(e,t,n=["Enter"],r=!0)=>{const i=G.useRef(e);i.current=()=>{t||e()};const o=G.useRef(n);return o.current=n,G.useMemo(()=>({onClick:a=>{r||a.stopPropagation(),i.current()},onKeyDown:a=>{r||a.stopPropagation(),o.current.includes(a.key)&&(a.stopPropagation(),a.preventDefault(),i.current())},onMouseOut:a=>{var s;r||a.stopPropagation(),(s=document.querySelector("*:focus"))==null||s.blur()}}),[r])},sO=Ae.div`
    --height: 36px;
    --icon-size: 18px;
    width: 100%;
    height: var(--height);
    background-color: ${({dark:e})=>e?"var(--background-color-dark)":"var(--background-color)"};
    color: ${({dark:e})=>e?"var(--color-dark)":"var(--color)"};
    border: 1px solid;
    border-color: ${({dark:e})=>e?"#4b5563":"#e5e7eb"};
    /* box-shadow: 0px 1px 3px 1px rgba(136, 136, 136, 0.1); */
    border-radius: 2px;
    overflow: hidden;
    display: flex;
    flex-direction: row;
    > * {
        flex-grow: 0;
        flex-shrink: 0;
    }
`,ese=Ae.div`
    display: inline-block;
    margin: calc(var(--height) / 6) calc(var(--icon-size) / 4);
    height: calc(var(--height) * 2 / 3);
    width: 1px;
    background: #bbbbbb50;
`,tse=Ae.div`
    display: inline-flex;
    flex-direction: row;
    user-select: none;
    outline: none;
    width: ${({split:e})=>e?"calc(var(--height) + 10px)":"var(--height)"};
    height: var(--height);
    align-items: center;
    overflow: hidden;
    color: ${({dark:e})=>e?"var(--dark-mode-color)":"var(--color)"};
    position: relative;
    > svg {
        flex-grow: 0;
        flex-shrink: 0;
        width: var(--icon-size);
        height: var(--icon-size);
        margin: calc((var(--height) - var(--icon-size)) / 2);
        margin-right: ${({split:e})=>e?"calc((var(--height) - var(--icon-size)) / 4)":""};
        transition: text-shadow 100ms;
    }
    --shadow-color: #0F172A55;
    &[aria-disabled=true] {
        cursor: default;
        > * {
            opacity: 0.33;
        }
    }
    &[aria-disabled=false] {
        cursor: pointer;
        :hover, :focus, &.open {
            --background-color: ${({dark:e})=>e?"#202020":"#FEFEFE"};
            color: ${({dark:e})=>e?"var(--dark-mode-color-hover)":"var(--color-hover)"};
            &.split * svg {
                pointer-events: none;
                transform: translate(-50%, -20%);
            }
            & svg {
                text-shadow: 0 0 1.5px var(--shadow-color);
            }
            background-color: var(--background-color);
        }
    }
    transition: color 100ms, background-image 100ms;
`,F_=x;function bVe({title:e,titleId:t,...n},r){return F_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?F_.createElement("title",{id:t},e):null,F_.createElement("path",{fillRule:"evenodd",d:"M9.53 2.47a.75.75 0 010 1.06L4.81 8.25H15a6.75 6.75 0 010 13.5h-3a.75.75 0 010-1.5h3a5.25 5.25 0 100-10.5H4.81l4.72 4.72a.75.75 0 11-1.06 1.06l-6-6a.75.75 0 010-1.06l6-6a.75.75 0 011.06 0z",clipRule:"evenodd"}))}const yVe=F_.forwardRef(bVe);var vVe=yVe;const M_=x;function xVe({title:e,titleId:t,...n},r){return M_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?M_.createElement("title",{id:t},e):null,M_.createElement("path",{fillRule:"evenodd",d:"M14.47 2.47a.75.75 0 011.06 0l6 6a.75.75 0 010 1.06l-6 6a.75.75 0 11-1.06-1.06l4.72-4.72H9a5.25 5.25 0 100 10.5h3a.75.75 0 010 1.5H9a6.75 6.75 0 010-13.5h10.19l-4.72-4.72a.75.75 0 010-1.06z",clipRule:"evenodd"}))}const wVe=M_.forwardRef(xVe);var ZVe=wVe;const O_=x;function SVe({title:e,titleId:t,...n},r){return O_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?O_.createElement("title",{id:t},e):null,O_.createElement("path",{fillRule:"evenodd",d:"M12.53 16.28a.75.75 0 01-1.06 0l-7.5-7.5a.75.75 0 011.06-1.06L12 14.69l6.97-6.97a.75.75 0 111.06 1.06l-7.5 7.5z",clipRule:"evenodd"}))}const kVe=O_.forwardRef(SVe);var _Ve=kVe;const z_=x;function GVe({title:e,titleId:t,...n},r){return z_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?z_.createElement("title",{id:t},e):null,z_.createElement("path",{fillRule:"evenodd",d:"M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 00-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 00-2.282.819l-.922 1.597a1.875 1.875 0 00.432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 000 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 00-.432 2.385l.922 1.597a1.875 1.875 0 002.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 002.28-.819l.923-1.597a1.875 1.875 0 00-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 000-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 00-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 00-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 00-1.85-1.567h-1.843zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z",clipRule:"evenodd"}))}const IVe=z_.forwardRef(GVe);var WVe=IVe;const P_=x;function EVe({title:e,titleId:t,...n},r){return P_.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?P_.createElement("title",{id:t},e):null,P_.createElement("path",{fillRule:"evenodd",d:"M11.828 2.25c-.916 0-1.699.663-1.85 1.567l-.091.549a.798.798 0 01-.517.608 7.45 7.45 0 00-.478.198.798.798 0 01-.796-.064l-.453-.324a1.875 1.875 0 00-2.416.2l-.243.243a1.875 1.875 0 00-.2 2.416l.324.453a.798.798 0 01.064.796 7.448 7.448 0 00-.198.478.798.798 0 01-.608.517l-.55.092a1.875 1.875 0 00-1.566 1.849v.344c0 .916.663 1.699 1.567 1.85l.549.091c.281.047.508.25.608.517.06.162.127.321.198.478a.798.798 0 01-.064.796l-.324.453a1.875 1.875 0 00.2 2.416l.243.243c.648.648 1.67.733 2.416.2l.453-.324a.798.798 0 01.796-.064c.157.071.316.137.478.198.267.1.47.327.517.608l.092.55c.15.903.932 1.566 1.849 1.566h.344c.916 0 1.699-.663 1.85-1.567l.091-.549a.798.798 0 01.517-.608 7.52 7.52 0 00.478-.198.798.798 0 01.796.064l.453.324a1.875 1.875 0 002.416-.2l.243-.243c.648-.648.733-1.67.2-2.416l-.324-.453a.798.798 0 01-.064-.796c.071-.157.137-.316.198-.478.1-.267.327-.47.608-.517l.55-.091a1.875 1.875 0 001.566-1.85v-.344c0-.916-.663-1.699-1.567-1.85l-.549-.091a.798.798 0 01-.608-.517 7.507 7.507 0 00-.198-.478.798.798 0 01.064-.796l.324-.453a1.875 1.875 0 00-.2-2.416l-.243-.243a1.875 1.875 0 00-2.416-.2l-.453.324a.798.798 0 01-.796.064 7.462 7.462 0 00-.478-.198.798.798 0 01-.517-.608l-.091-.55a1.875 1.875 0 00-1.85-1.566h-.344zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z",clipRule:"evenodd"}))}const XVe=P_.forwardRef(EVe);var LVe=XVe;const mv=x;function RVe({title:e,titleId:t,...n},r){return mv.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?mv.createElement("title",{id:t},e):null,mv.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32l8.4-8.4z"}),mv.createElement("path",{d:"M5.25 5.25a3 3 0 00-3 3v10.5a3 3 0 003 3h10.5a3 3 0 003-3V13.5a.75.75 0 00-1.5 0v5.25a1.5 1.5 0 01-1.5 1.5H5.25a1.5 1.5 0 01-1.5-1.5V8.25a1.5 1.5 0 011.5-1.5h5.25a.75.75 0 000-1.5H5.25z"}))}const CVe=mv.forwardRef(RVe);var VVe=CVe,YVe=vVe,TVe=ZVe,NVe=_Ve,Y7=WVe,FVe=LVe,MVe=VVe;const OVe=G.memo(function(e){var t;const{item:n,styles:r,darkModePreference:i}=e,{icon:o,label:a,disabled:s,onClick:l}=n,u=b3(()=>l==null?void 0:l(),s!=null?s:!1),c={...r==null?void 0:r.icon,...(t=n.styles)==null?void 0:t.icon};return x.createElement(x.Fragment,null,x.createElement(gO,{props:e,handlers:l?u:null,darkModePreference:i},x.createElement(o,{style:c})))}),zVe=Ae.div`
    flex-grow: 0;
    flex-shrink: 0;
    width: calc(var(--icon-size) + 12px);
    height: calc(var(--icon-size) + 12px);
    margin: calc((var(--height) - var(--icon-size) - 12px) / 2);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    box-shadow: ${({checked:e})=>e?"inset 0px 1px 6px 2px rgba(0, 0, 0, 0.33)":"inset 0px 1px 4px 1px rgba(136, 136, 136, 0.16)"};
    border-radius: 4px;
    position: relative;
    background-color: #F7F7F722;
    > svg {
        width: var(--icon-size);
        height: var(--icon-size);
        position: absolute;
        color: ${({checked:e})=>e?"#EDEFF4":"var(--color)"};
        --shadow-color: ${({checked:e})=>e?"#2956bf66":"#9ba1ab66"};
        transition: color 120ms;
    }
    ::before {
        display: block;
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--blue-dark);
        transform: ${({checked:e})=>e?"translate(0)":"translateX(-100%)"};
        transition: transform 80ms;
    }
`,PVe=G.memo(function(e){var t;const{item:n,styles:r,darkModePreference:i}=e,{icon:o,label:a,disabled:s,checked:l,onChange:u}=n,c=b3(()=>u(!l),s!=null?s:!1),d={...r==null?void 0:r.icon,...(t=n.styles)==null?void 0:t.icon};return x.createElement(x.Fragment,null,x.createElement(gO,{props:e,handlers:c,role:"checkbox","aria-checked":l,darkModePreference:i},x.createElement(zVe,{checked:l},x.createElement(o,{style:d}))))});function es(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function tg(e){return!!e&&!!e[Mo]}function Pp(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===UVe}(e)||Array.isArray(e)||!!e[j7]||!!(!((t=e.constructor)===null||t===void 0)&&t[j7])||lO(e)||uO(e))}function Qx(e,t,n){n===void 0&&(n=!1),rb(e)===0?(n?Object.keys:hO)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function rb(e){var t=e[Mo];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:lO(e)?2:uO(e)?3:0}function nY(e,t){return rb(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function jVe(e,t){return rb(e)===2?e.get(t):e[t]}function nse(e,t,n){var r=rb(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function HVe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function lO(e){return DVe&&e instanceof Map}function uO(e){return AVe&&e instanceof Set}function $f(e){return e.o||e.t}function cO(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=$Ve(e);delete t[Mo];for(var n=hO(t),r=0;r<n.length;r++){var i=n[r],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function dO(e,t){return t===void 0&&(t=!1),fO(e)||tg(e)||!Pp(e)||(rb(e)>1&&(e.set=e.add=e.clear=e.delete=JVe),Object.freeze(e),t&&Qx(e,function(n,r){return dO(r,!0)},!0)),e}function JVe(){es(2)}function fO(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function kl(e){var t=QVe[e];return t||es(18,e),t}function T7(){return qx}function kL(e,t){t&&(kl("Patches"),e.u=[],e.s=[],e.v=t)}function cG(e){rY(e),e.p.forEach(BVe),e.p=null}function rY(e){e===qx&&(qx=e.l)}function N7(e){return qx={p:[],l:qx,h:e,m:!0,_:0}}function BVe(e){var t=e[Mo];t.i===0||t.i===1?t.j():t.O=!0}function _L(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||kl("ES5").S(t,e,r),r?(n[Mo].P&&(cG(t),es(4)),Pp(e)&&(e=dG(t,e),t.l||fG(t,e)),t.u&&kl("Patches").M(n[Mo].t,e,t.u,t.s)):e=dG(t,n,[]),cG(t),t.u&&t.v(t.u,t.s),e!==rse?e:void 0}function dG(e,t,n){if(fO(t))return t;var r=t[Mo];if(!r)return Qx(t,function(s,l){return F7(e,r,t,s,l,n)},!0),t;if(r.A!==e)return t;if(!r.P)return fG(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=cO(r.k):r.o,o=i,a=!1;r.i===3&&(o=new Set(i),i.clear(),a=!0),Qx(o,function(s,l){return F7(e,r,i,s,l,n,a)}),fG(e,i,!1),n&&e.u&&kl("Patches").N(r,n,e.u,e.s)}return r.o}function F7(e,t,n,r,i,o,a){if(tg(i)){var s=dG(e,i,o&&t&&t.i!==3&&!nY(t.R,r)?o.concat(r):void 0);if(nse(n,r,s),!tg(s))return;e.m=!1}else a&&n.add(i);if(Pp(i)&&!fO(i)){if(!e.h.D&&e._<1)return;dG(e,i),t&&t.A.l||fG(e,i)}}function fG(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&dO(t,n)}function GL(e,t){var n=e[Mo];return(n?$f(n):e)[t]}function M7(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function iY(e){e.P||(e.P=!0,e.l&&iY(e.l))}function IL(e){e.o||(e.o=cO(e.t))}function oY(e,t,n){var r=lO(t)?kl("MapSet").F(t,n):uO(t)?kl("MapSet").T(t,n):e.g?function(i,o){var a=Array.isArray(i),s={i:a?1:0,A:o?o.A:T7(),P:!1,I:!1,R:{},l:o,t:i,k:null,o:null,j:null,C:!1},l=s,u=aY;a&&(l=[s],u=gv);var c=Proxy.revocable(l,u),d=c.revoke,f=c.proxy;return s.k=f,s.j=d,f}(t,n):kl("ES5").J(t,n);return(n?n.A:T7()).p.push(r),r}function KVe(e){return tg(e)||es(22,e),function t(n){if(!Pp(n))return n;var r,i=n[Mo],o=rb(n);if(i){if(!i.P&&(i.i<4||!kl("ES5").K(i)))return i.t;i.I=!0,r=O7(n,o),i.I=!1}else r=O7(n,o);return Qx(r,function(a,s){i&&jVe(i.t,a)===s||nse(r,a,t(s))}),o===3?new Set(r):r}(e)}function O7(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return cO(e)}var z7,qx,pO=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",DVe=typeof Map<"u",AVe=typeof Set<"u",P7=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",rse=pO?Symbol.for("immer-nothing"):((z7={})["immer-nothing"]=!0,z7),j7=pO?Symbol.for("immer-draftable"):"__$immer_draftable",Mo=pO?Symbol.for("immer-state"):"__$immer_state",UVe=""+Object.prototype.constructor,hO=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,$Ve=Object.getOwnPropertyDescriptors||function(e){var t={};return hO(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},QVe={},aY={get:function(e,t){if(t===Mo)return e;var n=$f(e);if(!nY(n,t))return function(i,o,a){var s,l=M7(o,a);return l?"value"in l?l.value:(s=l.get)===null||s===void 0?void 0:s.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Pp(r)?r:r===GL(e.t,t)?(IL(e),e.o[t]=oY(e.A.h,r,e)):r},has:function(e,t){return t in $f(e)},ownKeys:function(e){return Reflect.ownKeys($f(e))},set:function(e,t,n){var r=M7($f(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=GL($f(e),t),o=i==null?void 0:i[Mo];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(HVe(n,i)&&(n!==void 0||nY(e.t,t)))return!0;IL(e),iY(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return GL(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,IL(e),iY(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=$f(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){es(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){es(12)}},gv={};Qx(aY,function(e,t){gv[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),gv.deleteProperty=function(e,t){return gv.set.call(this,e,t,void 0)},gv.set=function(e,t,n){return aY.set.call(this,e[0],t,n,e[0])};var qVe=function(){function e(n){var r=this;this.g=P7,this.D=!0,this.produce=function(i,o,a){if(typeof i=="function"&&typeof o!="function"){var s=o;o=i;var l=r;return function(g){var y=this;g===void 0&&(g=s);for(var v=arguments.length,w=Array(v>1?v-1:0),Z=1;Z<v;Z++)w[Z-1]=arguments[Z];return l.produce(g,function(k){var _;return(_=o).call.apply(_,[y,k].concat(w))})}}var u;if(typeof o!="function"&&es(6),a!==void 0&&typeof a!="function"&&es(7),Pp(i)){var c=N7(r),d=oY(r,i,void 0),f=!0;try{u=o(d),f=!1}finally{f?cG(c):rY(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(g){return kL(c,a),_L(g,c)},function(g){throw cG(c),g}):(kL(c,a),_L(u,c))}if(!i||typeof i!="object"){if((u=o(i))===void 0&&(u=i),u===rse&&(u=void 0),r.D&&dO(u,!0),a){var h=[],m=[];kl("Patches").M(i,u,h,m),a(h,m)}return u}es(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(u){for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return r.produceWithPatches(u,function(h){return i.apply(void 0,[h].concat(d))})};var a,s,l=r.produce(i,o,function(u,c){a=u,s=c});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,a,s]}):[l,a,s]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Pp(n)||es(8),tg(n)&&(n=KVe(n));var r=N7(this),i=oY(this,n,void 0);return i[Mo].C=!0,rY(r),i},t.finishDraft=function(n,r){var i=n&&n[Mo],o=i.A;return kL(o,r),_L(void 0,o)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!P7&&es(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var o=r[i];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}i>-1&&(r=r.slice(i+1));var a=kl("Patches").$;return tg(n)?a(n,r):this.produce(n,function(s){return a(s,r)})},e}(),Oo=new qVe,eYe=Oo.produce;Oo.produceWithPatches.bind(Oo);Oo.setAutoFreeze.bind(Oo);Oo.setUseProxies.bind(Oo);Oo.applyPatches.bind(Oo);Oo.createDraft.bind(Oo);Oo.finishDraft.bind(Oo);const tYe=eYe;var nYe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ise(e,t){return e(t={exports:{}},t.exports),t.exports}var rYe=ise(function(e){(function(t){var n=function(y,v,w){if(!l(v)||c(v)||d(v)||f(v)||s(v))return v;var Z,k=0,_=0;if(u(v))for(Z=[],_=v.length;k<_;k++)Z.push(n(y,v[k],w));else for(var R in Z={},v)Object.prototype.hasOwnProperty.call(v,R)&&(Z[y(R,w)]=n(y,v[R],w));return Z},r=function(y){return h(y)?y:(y=y.replace(/[\-_\s]+(.)?/g,function(v,w){return w?w.toUpperCase():""})).substr(0,1).toLowerCase()+y.substr(1)},i=function(y){var v=r(y);return v.substr(0,1).toUpperCase()+v.substr(1)},o=function(y,v){return function(w,Z){var k=(Z=Z||{}).separator||"_",_=Z.split||/(?=[A-Z])/;return w.split(_).join(k)}(y,v).toLowerCase()},a=Object.prototype.toString,s=function(y){return typeof y=="function"},l=function(y){return y===Object(y)},u=function(y){return a.call(y)=="[object Array]"},c=function(y){return a.call(y)=="[object Date]"},d=function(y){return a.call(y)=="[object RegExp]"},f=function(y){return a.call(y)=="[object Boolean]"},h=function(y){return(y-=0)==y},m=function(y,v){var w=v&&"process"in v?v.process:v;return typeof w!="function"?y:function(Z,k){return w(Z,y,k)}},g={camelize:r,decamelize:o,pascalize:i,depascalize:o,camelizeKeys:function(y,v){return n(m(r,v),y)},decamelizeKeys:function(y,v){return n(m(o,v),y,v)},pascalizeKeys:function(y,v){return n(m(i,v),y)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};e.exports?e.exports=g:t.humps=g})(nYe)}).decamelize,iYe=ise(function(e){function t(){return e.exports=t=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},t.apply(this,arguments)}e.exports=t}),oYe=function(e){if(Array.isArray(e))return e},aYe=function(e,t){if(typeof Symbol<"u"&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||s.return==null||s.return()}finally{if(i)throw o}}return n}},H7=function(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},sYe=function(e,t){if(e){if(typeof e=="string")return H7(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H7(e,t):void 0}},lYe=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},uYe=function(e,t){return oYe(e)||aYe(e,t)||sYe(e,t)||lYe()},cYe=function(e,t){if(e==null)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},dYe=function(e,t){if(e==null)return{};var n,r,i=cYe(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},fYe=G.createContext(null);function sY(e){var t=e.root,n=e.children;return qn.createPortal(n,t)}function pYe(e){var t=G.forwardRef(function(n,r){var i,o,a=n.mode,s=n.delegatesFocus,l=n.styleSheets,u=n.ssr,c=n.children,d=dYe(n,["mode","delegatesFocus","styleSheets","ssr","children"]),f=(o=G.useRef((i=r)&&i.current),G.useEffect(function(){i&&(i.current=o.current)},[i]),o),h=G.useState(null),m=uYe(h,2),g=m[0],y=m[1],v="node_".concat(a).concat(s);return G.useLayoutEffect(function(){if(f.current)try{if(typeof r=="function"&&r(f.current),u){var w=f.current.shadowRoot;return void y(w)}var Z=f.current.attachShadow({mode:a,delegatesFocus:s});l.length>0&&(Z.adoptedStyleSheets=l),y(Z)}catch(k){(function(_){var R=_.error,I=_.styleSheets,E=_.root;switch(R.name){case"NotSupportedError":I.length>0&&(E.adoptedStyleSheets=I);break;default:throw R}})({error:k,styleSheets:l,root:g})}},[r,f,l]),x.createElement(x.Fragment,null,x.createElement(e.tag,iYe({key:v,ref:f},d),(g||u)&&x.createElement(fYe.Provider,{value:g},u?x.createElement("template",{shadowroot:"open"},e.render({root:g,ssr:u,children:c})):x.createElement(sY,{root:g},e.render({root:g,ssr:u,children:c})))))});return t.propTypes={mode:fe.oneOf(["open","closed"]),delegatesFocus:fe.bool,styleSheets:fe.arrayOf(fe.instanceOf(globalThis.CSSStyleSheet)),ssr:fe.bool,children:fe.node},t.defaultProps={mode:"open",delegatesFocus:!1,styleSheets:[],ssr:!1,children:null},t}sY.propTypes={root:fe.object.isRequired,children:fe.node},sY.defaultProps={children:null};var WL=new Map;function hYe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"core",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(r){return r.children};return new Proxy(e,{get:function(r,i){var o=rYe(i,{separator:"-"}),a="".concat(t,"-").concat(o);return WL.has(a)||WL.set(a,pYe({tag:o,render:n})),WL.get(a)}})}var mYe=hYe();const gYe=`*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html{line-height:1.5;-webkit-text-size-adjust:100%;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}[type=text],input:where(:not([type])),[type=email],[type=url],[type=password],[type=number],[type=date],[type=datetime-local],[type=month],[type=search],[type=tel],[type=time],[type=week],[multiple],textarea,select{-webkit-appearance:none;appearance:none;background-color:#fff;border-color:#6b7280;border-width:1px;border-radius:0;padding:.5rem .75rem;font-size:1rem;line-height:1.5rem;--tw-shadow: 0 0 #0000}[type=text]:focus,input:where(:not([type])):focus,[type=email]:focus,[type=url]:focus,[type=password]:focus,[type=number]:focus,[type=date]:focus,[type=datetime-local]:focus,[type=month]:focus,[type=search]:focus,[type=tel]:focus,[type=time]:focus,[type=week]:focus,[multiple]:focus,textarea:focus,select:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-inset: var(--tw-empty, );--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: #2563eb;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow);border-color:#2563eb}input::placeholder,textarea::placeholder{color:#6b7280;opacity:1}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-date-and-time-value{min-height:1.5em}::-webkit-datetime-edit,::-webkit-datetime-edit-year-field,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute-field,::-webkit-datetime-edit-second-field,::-webkit-datetime-edit-millisecond-field,::-webkit-datetime-edit-meridiem-field{padding-top:0;padding-bottom:0}select{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right .5rem center;background-repeat:no-repeat;background-size:1.5em 1.5em;padding-right:2.5rem;-webkit-print-color-adjust:exact;print-color-adjust:exact}[multiple],[size]:where(select:not([size="1"])){background-image:initial;background-position:initial;background-repeat:unset;background-size:initial;padding-right:.75rem;-webkit-print-color-adjust:unset;print-color-adjust:unset}[type=checkbox],[type=radio]{-webkit-appearance:none;appearance:none;padding:0;-webkit-print-color-adjust:exact;print-color-adjust:exact;display:inline-block;vertical-align:middle;background-origin:border-box;-webkit-user-select:none;user-select:none;flex-shrink:0;height:1rem;width:1rem;color:#2563eb;background-color:#fff;border-color:#6b7280;border-width:1px;--tw-shadow: 0 0 #0000}[type=checkbox]{border-radius:0}[type=radio]{border-radius:100%}[type=checkbox]:focus,[type=radio]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-inset: var(--tw-empty, );--tw-ring-offset-width: 2px;--tw-ring-offset-color: #fff;--tw-ring-color: #2563eb;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}[type=checkbox]:checked,[type=radio]:checked{border-color:transparent;background-color:currentColor;background-size:100% 100%;background-position:center;background-repeat:no-repeat}[type=checkbox]:checked{background-image:url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e")}[type=radio]:checked{background-image:url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle cx='8' cy='8' r='3'/%3e%3c/svg%3e")}[type=checkbox]:checked:hover,[type=checkbox]:checked:focus,[type=radio]:checked:hover,[type=radio]:checked:focus{border-color:transparent;background-color:currentColor}[type=checkbox]:indeterminate{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 16 16'%3e%3cpath stroke='white' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M4 8h8'/%3e%3c/svg%3e");border-color:transparent;background-color:currentColor;background-size:100% 100%;background-position:center;background-repeat:no-repeat}[type=checkbox]:indeterminate:hover,[type=checkbox]:indeterminate:focus{border-color:transparent;background-color:currentColor}[type=file]{background:unset;border-color:inherit;border-width:0;border-radius:0;padding:0;font-size:unset;line-height:inherit}[type=file]:focus{outline:1px solid ButtonText;outline:1px auto -webkit-focus-ring-color}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.pointer-events-none{pointer-events:none}.visible{visibility:visible}.invisible{visibility:hidden}.collapse{visibility:collapse}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.-inset-1{top:-.25rem;right:-.25rem;bottom:-.25rem;left:-.25rem}.inset-0{top:0px;right:0px;bottom:0px;left:0px}.inset-x-0{left:0px;right:0px}.inset-y-0{top:0px;bottom:0px}.-right-1{right:-.25rem}.bottom-0{bottom:0px}.left-0{left:0px}.left-1{left:.25rem}.left-1\\.5{left:.375rem}.left-1\\/2{left:50%}.left-32{left:8rem}.right-0{right:0px}.right-2{right:.5rem}.right-5{right:1.25rem}.top-0{top:0px}.top-2{top:.5rem}.top-5{top:1.25rem}.z-0{z-index:0}.z-10{z-index:10}.z-20{z-index:20}.z-40{z-index:40}.z-50{z-index:50}.z-\\[1\\]{z-index:1}.z-\\[2\\]{z-index:2}.col-span-1{grid-column:span 1 / span 1}.col-span-3{grid-column:span 3 / span 3}.float-right{float:right}.m-0{margin:0}.m-0\\.5{margin:.125rem}.m-1{margin:.25rem}.m-2{margin:.5rem}.m-4{margin:1rem}.-mx-px{margin-left:-1px;margin-right:-1px}.mx-0{margin-left:0;margin-right:0}.mx-1{margin-left:.25rem;margin-right:.25rem}.mx-2{margin-left:.5rem;margin-right:.5rem}.mx-4{margin-left:1rem;margin-right:1rem}.mx-auto{margin-left:auto;margin-right:auto}.my-0{margin-top:0;margin-bottom:0}.my-0\\.5{margin-top:.125rem;margin-bottom:.125rem}.my-1{margin-top:.25rem;margin-bottom:.25rem}.my-2{margin-top:.5rem;margin-bottom:.5rem}.-mb-px{margin-bottom:-1px}.-mr-1{margin-right:-.25rem}.mb-1{margin-bottom:.25rem}.mb-1\\.5{margin-bottom:.375rem}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.ml-0{margin-left:0}.ml-0\\.5{margin-left:.125rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.mr-0{margin-right:0}.mr-0\\.5{margin-right:.125rem}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mt-0{margin-top:0}.mt-0\\.5{margin-top:.125rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.mt-5{margin-top:1.25rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.contents{display:contents}.hidden{display:none}.h-1{height:.25rem}.h-1\\.5{height:.375rem}.h-12{height:3rem}.h-2{height:.5rem}.h-24{height:6rem}.h-3{height:.75rem}.h-3\\.5{height:.875rem}.h-4{height:1rem}.h-48{height:12rem}.h-5{height:1.25rem}.h-5\\/6{height:83.333333%}.h-6{height:1.5rem}.h-8{height:2rem}.h-80{height:20rem}.h-full{height:100%}.max-h-60{max-height:15rem}.max-h-96{max-height:24rem}.w-1{width:.25rem}.w-1\\.5{width:.375rem}.w-11{width:2.75rem}.w-12{width:3rem}.w-20{width:5rem}.w-3{width:.75rem}.w-3\\.5{width:.875rem}.w-36{width:9rem}.w-4{width:1rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-56{width:14rem}.w-6{width:1.5rem}.w-60{width:15rem}.w-8{width:2rem}.w-96{width:24rem}.w-fit{width:-moz-fit-content;width:fit-content}.w-full{width:100%}.w-screen{width:100vw}.min-w-96{min-width:96px}.min-w-\\[100\\%\\]{min-width:100%}.min-w-\\[8rem\\]{min-width:8rem}.max-w-\\[160px\\]{max-width:160px}.max-w-\\[16rem\\]{max-width:16rem}.max-w-full{max-width:100%}.max-w-min{max-width:min-content}.flex-1{flex:1 1 0%}.flex-none{flex:none}.flex-shrink{flex-shrink:1}.flex-shrink-0{flex-shrink:0}.shrink{flex-shrink:1}.shrink-0{flex-shrink:0}.flex-grow{flex-grow:1}.flex-grow-0{flex-grow:0}.grow{flex-grow:1}.grow-0{flex-grow:0}.border-collapse{border-collapse:collapse}.origin-top-left{transform-origin:top left}.origin-top-right{transform-origin:top right}.-translate-x-1\\/4{--tw-translate-x: -25%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-0{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-1\\/2{--tw-translate-x: 50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-5{--tw-translate-x: 1.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-0{--tw-translate-y: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-1{--tw-translate-y: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-100{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-95{--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-\\[67\\%\\]{--tw-scale-x: 67%;--tw-scale-y: 67%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-col-resize{cursor:col-resize}.cursor-default{cursor:default}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.select-none{-webkit-user-select:none;user-select:none}.resize{resize:both}.appearance-none{-webkit-appearance:none;appearance:none}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.items-stretch{align-items:stretch}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-x-0{column-gap:0px}.gap-x-0\\.5{column-gap:.125rem}.gap-x-1{column-gap:.25rem}.space-x-1>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.25rem * var(--tw-space-x-reverse));margin-left:calc(.25rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-6>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1.5rem * var(--tw-space-x-reverse));margin-left:calc(1.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-8>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(2rem * var(--tw-space-x-reverse));margin-left:calc(2rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.divide-x>:not([hidden])~:not([hidden]){--tw-divide-x-reverse: 0;border-right-width:calc(1px * var(--tw-divide-x-reverse));border-left-width:calc(1px * calc(1 - var(--tw-divide-x-reverse)))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse: 0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse))}.divide-gray-100>:not([hidden])~:not([hidden]){--tw-divide-opacity: 1;border-color:rgb(243 244 246 / var(--tw-divide-opacity))}.divide-gray-200>:not([hidden])~:not([hidden]){--tw-divide-opacity: 1;border-color:rgb(229 231 235 / var(--tw-divide-opacity))}.self-start{align-self:flex-start}.self-center{align-self:center}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-visible{overflow:visible}.overflow-y-auto{overflow-y:auto}.overflow-y-visible{overflow-y:visible}.overflow-y-scroll{overflow-y:scroll}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.text-ellipsis{text-overflow:ellipsis}.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-sm{border-radius:.125rem}.rounded-xl{border-radius:.75rem}.rounded-l-md{border-top-left-radius:.375rem;border-bottom-left-radius:.375rem}.rounded-r-md{border-top-right-radius:.375rem;border-bottom-right-radius:.375rem}.rounded-t{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.border{border-width:1px}.border-0{border-width:0px}.border-2{border-width:2px}.border-x{border-left-width:1px;border-right-width:1px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-l{border-left-width:1px}.border-l-0{border-left-width:0px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-t-2{border-top-width:2px}.border-t-4{border-top-width:4px}.\\!border-none{border-style:none!important}.border-blue-400{--tw-border-opacity: 1;border-color:rgb(96 165 250 / var(--tw-border-opacity))}.border-gray-100{--tw-border-opacity: 1;border-color:rgb(243 244 246 / var(--tw-border-opacity))}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity))}.border-gray-50{--tw-border-opacity: 1;border-color:rgb(249 250 251 / var(--tw-border-opacity))}.border-gray-500{--tw-border-opacity: 1;border-color:rgb(107 114 128 / var(--tw-border-opacity))}.border-gray-800{--tw-border-opacity: 1;border-color:rgb(31 41 55 / var(--tw-border-opacity))}.border-indigo-400{--tw-border-opacity: 1;border-color:rgb(129 140 248 / var(--tw-border-opacity))}.border-indigo-500{--tw-border-opacity: 1;border-color:rgb(99 102 241 / var(--tw-border-opacity))}.border-purple-400{--tw-border-opacity: 1;border-color:rgb(192 132 252 / var(--tw-border-opacity))}.border-red-200{--tw-border-opacity: 1;border-color:rgb(254 202 202 / var(--tw-border-opacity))}.border-transparent{border-color:transparent}.border-yellow-400{--tw-border-opacity: 1;border-color:rgb(250 204 21 / var(--tw-border-opacity))}.\\!bg-transparent{background-color:transparent!important}.bg-amber-100{--tw-bg-opacity: 1;background-color:rgb(254 243 199 / var(--tw-bg-opacity))}.bg-black{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity))}.bg-blue-100{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity))}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity))}.bg-gray-100\\/50{background-color:#f3f4f680}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity))}.bg-gray-400{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity))}.bg-gray-800{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity))}.bg-indigo-100{--tw-bg-opacity: 1;background-color:rgb(224 231 255 / var(--tw-bg-opacity))}.bg-indigo-400{--tw-bg-opacity: 1;background-color:rgb(129 140 248 / var(--tw-bg-opacity))}.bg-indigo-400\\/75{background-color:#818cf8bf}.bg-indigo-50{--tw-bg-opacity: 1;background-color:rgb(238 242 255 / var(--tw-bg-opacity))}.bg-indigo-600{--tw-bg-opacity: 1;background-color:rgb(79 70 229 / var(--tw-bg-opacity))}.bg-orange-500{--tw-bg-opacity: 1;background-color:rgb(249 115 22 / var(--tw-bg-opacity))}.bg-purple-100{--tw-bg-opacity: 1;background-color:rgb(243 232 255 / var(--tw-bg-opacity))}.bg-red-50{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity))}.bg-red-600{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity))}.bg-sky-100{--tw-bg-opacity: 1;background-color:rgb(224 242 254 / var(--tw-bg-opacity))}.bg-slate-200{--tw-bg-opacity: 1;background-color:rgb(226 232 240 / var(--tw-bg-opacity))}.bg-slate-50{--tw-bg-opacity: 1;background-color:rgb(248 250 252 / var(--tw-bg-opacity))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.bg-white\\/30{background-color:#ffffff4d}.bg-yellow-100{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity))}.bg-zinc-100{--tw-bg-opacity: 1;background-color:rgb(244 244 245 / var(--tw-bg-opacity))}.bg-zinc-900{--tw-bg-opacity: 1;background-color:rgb(24 24 27 / var(--tw-bg-opacity))}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.from-indigo-500{--tw-gradient-from: #6366f1;--tw-gradient-to: rgb(99 102 241 / 0);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.via-purple-500{--tw-gradient-to: rgb(168 85 247 / 0);--tw-gradient-stops: var(--tw-gradient-from), #a855f7, var(--tw-gradient-to)}.to-pink-500{--tw-gradient-to: #ec4899}.stroke-gray-600\\/50{stroke:#4b556380}.p-0{padding:0}.p-0\\.5{padding:.125rem}.p-1{padding:.25rem}.p-1\\.5{padding:.375rem}.p-2{padding:.5rem}.p-4{padding:1rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-1\\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\\.5{padding-top:.375rem;padding-bottom:.375rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-3\\.5{padding-top:.875rem;padding-bottom:.875rem}.pb-0{padding-bottom:0}.pb-0\\.5{padding-bottom:.125rem}.pb-1{padding-bottom:.25rem}.pl-10{padding-left:2.5rem}.pl-2{padding-left:.5rem}.pl-3{padding-left:.75rem}.pl-6{padding-left:1.5rem}.pr-10{padding-right:2.5rem}.pr-2{padding-right:.5rem}.pr-4{padding-right:1rem}.pr-6{padding-right:1.5rem}.pt-0{padding-top:0}.pt-0\\.5{padding-top:.125rem}.pt-1{padding-top:.25rem}.pt-4{padding-top:1rem}.text-left{text-align:left}.text-center{text-align:center}.text-start{text-align:start}.align-top{vertical-align:top}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-sans{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-light{font-weight:300}.font-medium{font-weight:500}.font-normal{font-weight:400}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.capitalize{text-transform:capitalize}.ordinal{--tw-ordinal: ordinal;font-variant-numeric:var(--tw-ordinal) var(--tw-slashed-zero) var(--tw-numeric-figure) var(--tw-numeric-spacing) var(--tw-numeric-fraction)}.leading-6{line-height:1.5rem}.leading-none{line-height:1}.text-amber-500{--tw-text-opacity: 1;color:rgb(245 158 11 / var(--tw-text-opacity))}.text-amber-500\\/0{color:#f59e0b00}.text-amber-500\\/10{color:#f59e0b1a}.text-amber-500\\/100{color:#f59e0b}.text-amber-500\\/20{color:#f59e0b33}.text-amber-500\\/25{color:#f59e0b40}.text-amber-500\\/30{color:#f59e0b4d}.text-amber-500\\/40{color:#f59e0b66}.text-amber-500\\/5{color:#f59e0b0d}.text-amber-500\\/50{color:#f59e0b80}.text-amber-500\\/60{color:#f59e0b99}.text-amber-500\\/70{color:#f59e0bb3}.text-amber-500\\/75{color:#f59e0bbf}.text-amber-500\\/80{color:#f59e0bcc}.text-amber-500\\/90{color:#f59e0be6}.text-amber-500\\/95{color:#f59e0bf2}.text-amber-600{--tw-text-opacity: 1;color:rgb(217 119 6 / var(--tw-text-opacity))}.text-amber-900{--tw-text-opacity: 1;color:rgb(120 53 15 / var(--tw-text-opacity))}.text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity))}.text-blue-500{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity))}.text-blue-500\\/0{color:#3b82f600}.text-blue-500\\/10{color:#3b82f61a}.text-blue-500\\/100{color:#3b82f6}.text-blue-500\\/20{color:#3b82f633}.text-blue-500\\/25{color:#3b82f640}.text-blue-500\\/30{color:#3b82f64d}.text-blue-500\\/40{color:#3b82f666}.text-blue-500\\/5{color:#3b82f60d}.text-blue-500\\/50{color:#3b82f680}.text-blue-500\\/60{color:#3b82f699}.text-blue-500\\/70{color:#3b82f6b3}.text-blue-500\\/75{color:#3b82f6bf}.text-blue-500\\/80{color:#3b82f6cc}.text-blue-500\\/90{color:#3b82f6e6}.text-blue-500\\/95{color:#3b82f6f2}.text-cyan-500{--tw-text-opacity: 1;color:rgb(6 182 212 / var(--tw-text-opacity))}.text-cyan-500\\/0{color:#06b6d400}.text-cyan-500\\/10{color:#06b6d41a}.text-cyan-500\\/100{color:#06b6d4}.text-cyan-500\\/20{color:#06b6d433}.text-cyan-500\\/25{color:#06b6d440}.text-cyan-500\\/30{color:#06b6d44d}.text-cyan-500\\/40{color:#06b6d466}.text-cyan-500\\/5{color:#06b6d40d}.text-cyan-500\\/50{color:#06b6d480}.text-cyan-500\\/60{color:#06b6d499}.text-cyan-500\\/70{color:#06b6d4b3}.text-cyan-500\\/75{color:#06b6d4bf}.text-cyan-500\\/80{color:#06b6d4cc}.text-cyan-500\\/90{color:#06b6d4e6}.text-cyan-500\\/95{color:#06b6d4f2}.text-emerald-500{--tw-text-opacity: 1;color:rgb(16 185 129 / var(--tw-text-opacity))}.text-emerald-500\\/0{color:#10b98100}.text-emerald-500\\/10{color:#10b9811a}.text-emerald-500\\/100{color:#10b981}.text-emerald-500\\/20{color:#10b98133}.text-emerald-500\\/25{color:#10b98140}.text-emerald-500\\/30{color:#10b9814d}.text-emerald-500\\/40{color:#10b98166}.text-emerald-500\\/5{color:#10b9810d}.text-emerald-500\\/50{color:#10b98180}.text-emerald-500\\/60{color:#10b98199}.text-emerald-500\\/70{color:#10b981b3}.text-emerald-500\\/75{color:#10b981bf}.text-emerald-500\\/80{color:#10b981cc}.text-emerald-500\\/90{color:#10b981e6}.text-emerald-500\\/95{color:#10b981f2}.text-fuchsia-500{--tw-text-opacity: 1;color:rgb(217 70 239 / var(--tw-text-opacity))}.text-fuchsia-500\\/0{color:#d946ef00}.text-fuchsia-500\\/10{color:#d946ef1a}.text-fuchsia-500\\/100{color:#d946ef}.text-fuchsia-500\\/20{color:#d946ef33}.text-fuchsia-500\\/25{color:#d946ef40}.text-fuchsia-500\\/30{color:#d946ef4d}.text-fuchsia-500\\/40{color:#d946ef66}.text-fuchsia-500\\/5{color:#d946ef0d}.text-fuchsia-500\\/50{color:#d946ef80}.text-fuchsia-500\\/60{color:#d946ef99}.text-fuchsia-500\\/70{color:#d946efb3}.text-fuchsia-500\\/75{color:#d946efbf}.text-fuchsia-500\\/80{color:#d946efcc}.text-fuchsia-500\\/90{color:#d946efe6}.text-fuchsia-500\\/95{color:#d946eff2}.text-gray-100{--tw-text-opacity: 1;color:rgb(243 244 246 / var(--tw-text-opacity))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity))}.text-gray-500\\/0{color:#6b728000}.text-gray-500\\/10{color:#6b72801a}.text-gray-500\\/100{color:#6b7280}.text-gray-500\\/20{color:#6b728033}.text-gray-500\\/25{color:#6b728040}.text-gray-500\\/30{color:#6b72804d}.text-gray-500\\/40{color:#6b728066}.text-gray-500\\/5{color:#6b72800d}.text-gray-500\\/50{color:#6b728080}.text-gray-500\\/60{color:#6b728099}.text-gray-500\\/70{color:#6b7280b3}.text-gray-500\\/75{color:#6b7280bf}.text-gray-500\\/80{color:#6b7280cc}.text-gray-500\\/90{color:#6b7280e6}.text-gray-500\\/95{color:#6b7280f2}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity))}.text-green-500{--tw-text-opacity: 1;color:rgb(34 197 94 / var(--tw-text-opacity))}.text-green-500\\/0{color:#22c55e00}.text-green-500\\/10{color:#22c55e1a}.text-green-500\\/100{color:#22c55e}.text-green-500\\/20{color:#22c55e33}.text-green-500\\/25{color:#22c55e40}.text-green-500\\/30{color:#22c55e4d}.text-green-500\\/40{color:#22c55e66}.text-green-500\\/5{color:#22c55e0d}.text-green-500\\/50{color:#22c55e80}.text-green-500\\/60{color:#22c55e99}.text-green-500\\/70{color:#22c55eb3}.text-green-500\\/75{color:#22c55ebf}.text-green-500\\/80{color:#22c55ecc}.text-green-500\\/90{color:#22c55ee6}.text-green-500\\/95{color:#22c55ef2}.text-indigo-500{--tw-text-opacity: 1;color:rgb(99 102 241 / var(--tw-text-opacity))}.text-indigo-500\\/0{color:#6366f100}.text-indigo-500\\/10{color:#6366f11a}.text-indigo-500\\/100{color:#6366f1}.text-indigo-500\\/20{color:#6366f133}.text-indigo-500\\/25{color:#6366f140}.text-indigo-500\\/30{color:#6366f14d}.text-indigo-500\\/40{color:#6366f166}.text-indigo-500\\/5{color:#6366f10d}.text-indigo-500\\/50{color:#6366f180}.text-indigo-500\\/60{color:#6366f199}.text-indigo-500\\/70{color:#6366f1b3}.text-indigo-500\\/75{color:#6366f1bf}.text-indigo-500\\/80{color:#6366f1cc}.text-indigo-500\\/90{color:#6366f1e6}.text-indigo-500\\/95{color:#6366f1f2}.text-indigo-600{--tw-text-opacity: 1;color:rgb(79 70 229 / var(--tw-text-opacity))}.text-indigo-800{--tw-text-opacity: 1;color:rgb(55 48 163 / var(--tw-text-opacity))}.text-lime-500{--tw-text-opacity: 1;color:rgb(132 204 22 / var(--tw-text-opacity))}.text-lime-500\\/0{color:#84cc1600}.text-lime-500\\/10{color:#84cc161a}.text-lime-500\\/100{color:#84cc16}.text-lime-500\\/20{color:#84cc1633}.text-lime-500\\/25{color:#84cc1640}.text-lime-500\\/30{color:#84cc164d}.text-lime-500\\/40{color:#84cc1666}.text-lime-500\\/5{color:#84cc160d}.text-lime-500\\/50{color:#84cc1680}.text-lime-500\\/60{color:#84cc1699}.text-lime-500\\/70{color:#84cc16b3}.text-lime-500\\/75{color:#84cc16bf}.text-lime-500\\/80{color:#84cc16cc}.text-lime-500\\/90{color:#84cc16e6}.text-lime-500\\/95{color:#84cc16f2}.text-neutral-500{--tw-text-opacity: 1;color:rgb(115 115 115 / var(--tw-text-opacity))}.text-neutral-500\\/0{color:#73737300}.text-neutral-500\\/10{color:#7373731a}.text-neutral-500\\/100{color:#737373}.text-neutral-500\\/20{color:#73737333}.text-neutral-500\\/25{color:#73737340}.text-neutral-500\\/30{color:#7373734d}.text-neutral-500\\/40{color:#73737366}.text-neutral-500\\/5{color:#7373730d}.text-neutral-500\\/50{color:#73737380}.text-neutral-500\\/60{color:#73737399}.text-neutral-500\\/70{color:#737373b3}.text-neutral-500\\/75{color:#737373bf}.text-neutral-500\\/80{color:#737373cc}.text-neutral-500\\/90{color:#737373e6}.text-neutral-500\\/95{color:#737373f2}.text-orange-500{--tw-text-opacity: 1;color:rgb(249 115 22 / var(--tw-text-opacity))}.text-orange-500\\/0{color:#f9731600}.text-orange-500\\/10{color:#f973161a}.text-orange-500\\/100{color:#f97316}.text-orange-500\\/20{color:#f9731633}.text-orange-500\\/25{color:#f9731640}.text-orange-500\\/30{color:#f973164d}.text-orange-500\\/40{color:#f9731666}.text-orange-500\\/5{color:#f973160d}.text-orange-500\\/50{color:#f9731680}.text-orange-500\\/60{color:#f9731699}.text-orange-500\\/70{color:#f97316b3}.text-orange-500\\/75{color:#f97316bf}.text-orange-500\\/80{color:#f97316cc}.text-orange-500\\/90{color:#f97316e6}.text-orange-500\\/95{color:#f97316f2}.text-pink-500{--tw-text-opacity: 1;color:rgb(236 72 153 / var(--tw-text-opacity))}.text-pink-500\\/0{color:#ec489900}.text-pink-500\\/10{color:#ec48991a}.text-pink-500\\/100{color:#ec4899}.text-pink-500\\/20{color:#ec489933}.text-pink-500\\/25{color:#ec489940}.text-pink-500\\/30{color:#ec48994d}.text-pink-500\\/40{color:#ec489966}.text-pink-500\\/5{color:#ec48990d}.text-pink-500\\/50{color:#ec489980}.text-pink-500\\/60{color:#ec489999}.text-pink-500\\/70{color:#ec4899b3}.text-pink-500\\/75{color:#ec4899bf}.text-pink-500\\/80{color:#ec4899cc}.text-pink-500\\/90{color:#ec4899e6}.text-pink-500\\/95{color:#ec4899f2}.text-purple-500{--tw-text-opacity: 1;color:rgb(168 85 247 / var(--tw-text-opacity))}.text-purple-500\\/0{color:#a855f700}.text-purple-500\\/10{color:#a855f71a}.text-purple-500\\/100{color:#a855f7}.text-purple-500\\/20{color:#a855f733}.text-purple-500\\/25{color:#a855f740}.text-purple-500\\/30{color:#a855f74d}.text-purple-500\\/40{color:#a855f766}.text-purple-500\\/5{color:#a855f70d}.text-purple-500\\/50{color:#a855f780}.text-purple-500\\/60{color:#a855f799}.text-purple-500\\/70{color:#a855f7b3}.text-purple-500\\/75{color:#a855f7bf}.text-purple-500\\/80{color:#a855f7cc}.text-purple-500\\/90{color:#a855f7e6}.text-purple-500\\/95{color:#a855f7f2}.text-purple-800{--tw-text-opacity: 1;color:rgb(107 33 168 / var(--tw-text-opacity))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity))}.text-red-500\\/0{color:#ef444400}.text-red-500\\/10{color:#ef44441a}.text-red-500\\/100{color:#ef4444}.text-red-500\\/20{color:#ef444433}.text-red-500\\/25{color:#ef444440}.text-red-500\\/30{color:#ef44444d}.text-red-500\\/40{color:#ef444466}.text-red-500\\/5{color:#ef44440d}.text-red-500\\/50{color:#ef444480}.text-red-500\\/60{color:#ef444499}.text-red-500\\/70{color:#ef4444b3}.text-red-500\\/75{color:#ef4444bf}.text-red-500\\/80{color:#ef4444cc}.text-red-500\\/90{color:#ef4444e6}.text-red-500\\/95{color:#ef4444f2}.text-rose-500{--tw-text-opacity: 1;color:rgb(244 63 94 / var(--tw-text-opacity))}.text-rose-500\\/0{color:#f43f5e00}.text-rose-500\\/10{color:#f43f5e1a}.text-rose-500\\/100{color:#f43f5e}.text-rose-500\\/20{color:#f43f5e33}.text-rose-500\\/25{color:#f43f5e40}.text-rose-500\\/30{color:#f43f5e4d}.text-rose-500\\/40{color:#f43f5e66}.text-rose-500\\/5{color:#f43f5e0d}.text-rose-500\\/50{color:#f43f5e80}.text-rose-500\\/60{color:#f43f5e99}.text-rose-500\\/70{color:#f43f5eb3}.text-rose-500\\/75{color:#f43f5ebf}.text-rose-500\\/80{color:#f43f5ecc}.text-rose-500\\/90{color:#f43f5ee6}.text-rose-500\\/95{color:#f43f5ef2}.text-sky-500{--tw-text-opacity: 1;color:rgb(14 165 233 / var(--tw-text-opacity))}.text-sky-500\\/0{color:#0ea5e900}.text-sky-500\\/10{color:#0ea5e91a}.text-sky-500\\/100{color:#0ea5e9}.text-sky-500\\/20{color:#0ea5e933}.text-sky-500\\/25{color:#0ea5e940}.text-sky-500\\/30{color:#0ea5e94d}.text-sky-500\\/40{color:#0ea5e966}.text-sky-500\\/5{color:#0ea5e90d}.text-sky-500\\/50{color:#0ea5e980}.text-sky-500\\/60{color:#0ea5e999}.text-sky-500\\/70{color:#0ea5e9b3}.text-sky-500\\/75{color:#0ea5e9bf}.text-sky-500\\/80{color:#0ea5e9cc}.text-sky-500\\/90{color:#0ea5e9e6}.text-sky-500\\/95{color:#0ea5e9f2}.text-sky-800{--tw-text-opacity: 1;color:rgb(7 89 133 / var(--tw-text-opacity))}.text-slate-500{--tw-text-opacity: 1;color:rgb(100 116 139 / var(--tw-text-opacity))}.text-slate-500\\/0{color:#64748b00}.text-slate-500\\/10{color:#64748b1a}.text-slate-500\\/100{color:#64748b}.text-slate-500\\/20{color:#64748b33}.text-slate-500\\/25{color:#64748b40}.text-slate-500\\/30{color:#64748b4d}.text-slate-500\\/40{color:#64748b66}.text-slate-500\\/5{color:#64748b0d}.text-slate-500\\/50{color:#64748b80}.text-slate-500\\/60{color:#64748b99}.text-slate-500\\/70{color:#64748bb3}.text-slate-500\\/75{color:#64748bbf}.text-slate-500\\/80{color:#64748bcc}.text-slate-500\\/90{color:#64748be6}.text-slate-500\\/95{color:#64748bf2}.text-stone-500{--tw-text-opacity: 1;color:rgb(120 113 108 / var(--tw-text-opacity))}.text-stone-500\\/0{color:#78716c00}.text-stone-500\\/10{color:#78716c1a}.text-stone-500\\/100{color:#78716c}.text-stone-500\\/20{color:#78716c33}.text-stone-500\\/25{color:#78716c40}.text-stone-500\\/30{color:#78716c4d}.text-stone-500\\/40{color:#78716c66}.text-stone-500\\/5{color:#78716c0d}.text-stone-500\\/50{color:#78716c80}.text-stone-500\\/60{color:#78716c99}.text-stone-500\\/70{color:#78716cb3}.text-stone-500\\/75{color:#78716cbf}.text-stone-500\\/80{color:#78716ccc}.text-stone-500\\/90{color:#78716ce6}.text-stone-500\\/95{color:#78716cf2}.text-teal-500{--tw-text-opacity: 1;color:rgb(20 184 166 / var(--tw-text-opacity))}.text-teal-500\\/0{color:#14b8a600}.text-teal-500\\/10{color:#14b8a61a}.text-teal-500\\/100{color:#14b8a6}.text-teal-500\\/20{color:#14b8a633}.text-teal-500\\/25{color:#14b8a640}.text-teal-500\\/30{color:#14b8a64d}.text-teal-500\\/40{color:#14b8a666}.text-teal-500\\/5{color:#14b8a60d}.text-teal-500\\/50{color:#14b8a680}.text-teal-500\\/60{color:#14b8a699}.text-teal-500\\/70{color:#14b8a6b3}.text-teal-500\\/75{color:#14b8a6bf}.text-teal-500\\/80{color:#14b8a6cc}.text-teal-500\\/90{color:#14b8a6e6}.text-teal-500\\/95{color:#14b8a6f2}.text-violet-500{--tw-text-opacity: 1;color:rgb(139 92 246 / var(--tw-text-opacity))}.text-violet-500\\/0{color:#8b5cf600}.text-violet-500\\/10{color:#8b5cf61a}.text-violet-500\\/100{color:#8b5cf6}.text-violet-500\\/20{color:#8b5cf633}.text-violet-500\\/25{color:#8b5cf640}.text-violet-500\\/30{color:#8b5cf64d}.text-violet-500\\/40{color:#8b5cf666}.text-violet-500\\/5{color:#8b5cf60d}.text-violet-500\\/50{color:#8b5cf680}.text-violet-500\\/60{color:#8b5cf699}.text-violet-500\\/70{color:#8b5cf6b3}.text-violet-500\\/75{color:#8b5cf6bf}.text-violet-500\\/80{color:#8b5cf6cc}.text-violet-500\\/90{color:#8b5cf6e6}.text-violet-500\\/95{color:#8b5cf6f2}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.text-yellow-500{--tw-text-opacity: 1;color:rgb(234 179 8 / var(--tw-text-opacity))}.text-yellow-500\\/0{color:#eab30800}.text-yellow-500\\/10{color:#eab3081a}.text-yellow-500\\/100{color:#eab308}.text-yellow-500\\/20{color:#eab30833}.text-yellow-500\\/25{color:#eab30840}.text-yellow-500\\/30{color:#eab3084d}.text-yellow-500\\/40{color:#eab30866}.text-yellow-500\\/5{color:#eab3080d}.text-yellow-500\\/50{color:#eab30880}.text-yellow-500\\/60{color:#eab30899}.text-yellow-500\\/70{color:#eab308b3}.text-yellow-500\\/75{color:#eab308bf}.text-yellow-500\\/80{color:#eab308cc}.text-yellow-500\\/90{color:#eab308e6}.text-yellow-500\\/95{color:#eab308f2}.text-yellow-800{--tw-text-opacity: 1;color:rgb(133 77 14 / var(--tw-text-opacity))}.text-zinc-400{--tw-text-opacity: 1;color:rgb(161 161 170 / var(--tw-text-opacity))}.text-zinc-500{--tw-text-opacity: 1;color:rgb(113 113 122 / var(--tw-text-opacity))}.text-zinc-500\\/0{color:#71717a00}.text-zinc-500\\/10{color:#71717a1a}.text-zinc-500\\/100{color:#71717a}.text-zinc-500\\/20{color:#71717a33}.text-zinc-500\\/25{color:#71717a40}.text-zinc-500\\/30{color:#71717a4d}.text-zinc-500\\/40{color:#71717a66}.text-zinc-500\\/5{color:#71717a0d}.text-zinc-500\\/50{color:#71717a80}.text-zinc-500\\/60{color:#71717a99}.text-zinc-500\\/70{color:#71717ab3}.text-zinc-500\\/75{color:#71717abf}.text-zinc-500\\/80{color:#71717acc}.text-zinc-500\\/90{color:#71717ae6}.text-zinc-500\\/95{color:#71717af2}.text-opacity-50{--tw-text-opacity: .5}.underline{text-decoration-line:underline}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-25{opacity:.25}.opacity-50{opacity:.5}.opacity-70{opacity:.7}.opacity-75{opacity:.75}.opacity-80{opacity:.8}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-2xl{--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / .25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-black{--tw-shadow-color: #000;--tw-shadow: var(--tw-shadow-colored)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline{outline-style:solid}.ring-0{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-1{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-inset{--tw-ring-inset: inset}.ring-black{--tw-ring-opacity: 1;--tw-ring-color: rgb(0 0 0 / var(--tw-ring-opacity))}.ring-gray-300{--tw-ring-opacity: 1;--tw-ring-color: rgb(209 213 219 / var(--tw-ring-opacity))}.ring-gray-500\\/10{--tw-ring-color: rgb(107 114 128 / .1)}.ring-gray-900\\/5{--tw-ring-color: rgb(17 24 39 / .05)}.ring-opacity-5{--tw-ring-opacity: .05}.blur{--tw-blur: blur(8px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow{--tw-drop-shadow: drop-shadow(0 1px 2px rgb(0 0 0 / .1)) drop-shadow(0 1px 1px rgb(0 0 0 / .06));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-filter{-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-100{transition-duration:.1s}.duration-150{transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-75{transition-duration:75ms}.ease-in{transition-timing-function:cubic-bezier(.4,0,1,1)}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}.placeholder\\:italic::placeholder{font-style:italic}.placeholder\\:text-gray-400::placeholder{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity))}.placeholder\\:text-slate-400::placeholder{--tw-text-opacity: 1;color:rgb(148 163 184 / var(--tw-text-opacity))}.hover\\:scale-125:hover{--tw-scale-x: 1.25;--tw-scale-y: 1.25;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:border-gray-300:hover{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity))}.hover\\:border-gray-800:hover{--tw-border-opacity: 1;border-color:rgb(31 41 55 / var(--tw-border-opacity))}.hover\\:bg-blue-100:hover{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity))}.hover\\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity))}.hover\\:bg-gray-200:hover{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity))}.hover\\:bg-gray-50:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity))}.hover\\:bg-gray-500\\/20:hover{background-color:#6b728033}.hover\\:bg-gray-700:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity))}.hover\\:bg-gray-800:hover{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity))}.hover\\:bg-indigo-100\\/20:hover{background-color:#e0e7ff33}.hover\\:bg-indigo-500:hover{--tw-bg-opacity: 1;background-color:rgb(99 102 241 / var(--tw-bg-opacity))}.hover\\:bg-indigo-700:hover{--tw-bg-opacity: 1;background-color:rgb(67 56 202 / var(--tw-bg-opacity))}.hover\\:bg-purple-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 232 255 / var(--tw-bg-opacity))}.hover\\:bg-red-100:hover{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity))}.hover\\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity))}.hover\\:bg-white:hover{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.hover\\:text-gray-500:hover{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity))}.hover\\:text-gray-700:hover{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity))}.hover\\:text-gray-800:hover{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity))}.hover\\:text-indigo-500:hover{--tw-text-opacity: 1;color:rgb(99 102 241 / var(--tw-text-opacity))}.hover\\:text-indigo-700:hover{--tw-text-opacity: 1;color:rgb(67 56 202 / var(--tw-text-opacity))}.hover\\:text-white:hover{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.hover\\:opacity-100:hover{opacity:1}.focus\\:border-blue-500:focus{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity))}.focus\\:border-gray-500:focus{--tw-border-opacity: 1;border-color:rgb(107 114 128 / var(--tw-border-opacity))}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\\:ring-0:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\\:ring-1:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\\:ring-inset:focus{--tw-ring-inset: inset}.focus\\:ring-black:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(0 0 0 / var(--tw-ring-opacity))}.focus\\:ring-indigo-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(99 102 241 / var(--tw-ring-opacity))}.focus\\:ring-indigo-600:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(79 70 229 / var(--tw-ring-opacity))}.focus\\:ring-offset-2:focus{--tw-ring-offset-width: 2px}.focus-visible\\:border-indigo-500:focus-visible{--tw-border-opacity: 1;border-color:rgb(99 102 241 / var(--tw-border-opacity))}.focus-visible\\:outline:focus-visible{outline-style:solid}.focus-visible\\:outline-2:focus-visible{outline-width:2px}.focus-visible\\:outline-offset-2:focus-visible{outline-offset:2px}.focus-visible\\:outline-indigo-600:focus-visible{outline-color:#4f46e5}.focus-visible\\:ring-2:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\\:ring-white:focus-visible{--tw-ring-opacity: 1;--tw-ring-color: rgb(255 255 255 / var(--tw-ring-opacity))}.focus-visible\\:ring-opacity-75:focus-visible{--tw-ring-opacity: .75}.focus-visible\\:ring-offset-2:focus-visible{--tw-ring-offset-width: 2px}.focus-visible\\:ring-offset-orange-300:focus-visible{--tw-ring-offset-color: #fdba74}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:border-gray-400:disabled{--tw-border-opacity: 1;border-color:rgb(156 163 175 / var(--tw-border-opacity))}.disabled\\:bg-gray-400:disabled{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity))}.disabled\\:text-white:disabled{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.disabled\\:opacity-50:disabled{opacity:.5}.group:hover .group-hover\\:visible{visibility:visible}.group:hover .group-hover\\:stroke-gray-600\\/75{stroke:#4b5563bf}.dark .dark\\:divide-gray-700>:not([hidden])~:not([hidden]){--tw-divide-opacity: 1;border-color:rgb(55 65 81 / var(--tw-divide-opacity))}.dark .dark\\:border-gray-600{--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity))}.dark .dark\\:border-gray-700{--tw-border-opacity: 1;border-color:rgb(55 65 81 / var(--tw-border-opacity))}.dark .dark\\:border-gray-800{--tw-border-opacity: 1;border-color:rgb(31 41 55 / var(--tw-border-opacity))}.dark .dark\\:border-indigo-400{--tw-border-opacity: 1;border-color:rgb(129 140 248 / var(--tw-border-opacity))}.dark .dark\\:border-indigo-600{--tw-border-opacity: 1;border-color:rgb(79 70 229 / var(--tw-border-opacity))}.dark .dark\\:border-purple-600{--tw-border-opacity: 1;border-color:rgb(147 51 234 / var(--tw-border-opacity))}.dark .dark\\:border-red-700{--tw-border-opacity: 1;border-color:rgb(185 28 28 / var(--tw-border-opacity))}.dark .dark\\:border-sky-600{--tw-border-opacity: 1;border-color:rgb(2 132 199 / var(--tw-border-opacity))}.dark .dark\\:border-yellow-600{--tw-border-opacity: 1;border-color:rgb(202 138 4 / var(--tw-border-opacity))}.dark .dark\\:bg-amber-800{--tw-bg-opacity: 1;background-color:rgb(146 64 14 / var(--tw-bg-opacity))}.dark .dark\\:bg-black{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity))}.dark .dark\\:bg-blue-800{--tw-bg-opacity: 1;background-color:rgb(30 64 175 / var(--tw-bg-opacity))}.dark .dark\\:bg-gray-700{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity))}.dark .dark\\:bg-gray-700\\/50{background-color:#37415180}.dark .dark\\:bg-gray-800{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity))}.dark .dark\\:bg-gray-800\\/50{background-color:#1f293780}.dark .dark\\:bg-gray-900{--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity))}.dark .dark\\:bg-indigo-900{--tw-bg-opacity: 1;background-color:rgb(49 46 129 / var(--tw-bg-opacity))}.dark .dark\\:bg-purple-800{--tw-bg-opacity: 1;background-color:rgb(107 33 168 / var(--tw-bg-opacity))}.dark .dark\\:bg-purple-900{--tw-bg-opacity: 1;background-color:rgb(88 28 135 / var(--tw-bg-opacity))}.dark .dark\\:bg-red-900{--tw-bg-opacity: 1;background-color:rgb(127 29 29 / var(--tw-bg-opacity))}.dark .dark\\:bg-sky-900{--tw-bg-opacity: 1;background-color:rgb(12 74 110 / var(--tw-bg-opacity))}.dark .dark\\:bg-stone-900{--tw-bg-opacity: 1;background-color:rgb(28 25 23 / var(--tw-bg-opacity))}.dark .dark\\:bg-yellow-900{--tw-bg-opacity: 1;background-color:rgb(113 63 18 / var(--tw-bg-opacity))}.dark .dark\\:bg-zinc-800{--tw-bg-opacity: 1;background-color:rgb(39 39 42 / var(--tw-bg-opacity))}.dark .dark\\:bg-zinc-900{--tw-bg-opacity: 1;background-color:rgb(24 24 27 / var(--tw-bg-opacity))}.dark .dark\\:stroke-gray-200\\/50{stroke:#e5e7eb80}.dark .dark\\:text-amber-400{--tw-text-opacity: 1;color:rgb(251 191 36 / var(--tw-text-opacity))}.dark .dark\\:text-amber-50{--tw-text-opacity: 1;color:rgb(255 251 235 / var(--tw-text-opacity))}.dark .dark\\:text-blue-400{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity))}.dark .dark\\:text-gray-100{--tw-text-opacity: 1;color:rgb(243 244 246 / var(--tw-text-opacity))}.dark .dark\\:text-gray-200{--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity))}.dark .dark\\:text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity))}.dark .dark\\:text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity))}.dark .dark\\:text-gray-400\\/75{color:#9ca3afbf}.dark .dark\\:text-gray-50{--tw-text-opacity: 1;color:rgb(249 250 251 / var(--tw-text-opacity))}.dark .dark\\:text-indigo-100{--tw-text-opacity: 1;color:rgb(224 231 255 / var(--tw-text-opacity))}.dark .dark\\:text-indigo-300{--tw-text-opacity: 1;color:rgb(165 180 252 / var(--tw-text-opacity))}.dark .dark\\:text-purple-100{--tw-text-opacity: 1;color:rgb(243 232 255 / var(--tw-text-opacity))}.dark .dark\\:text-purple-400{--tw-text-opacity: 1;color:rgb(192 132 252 / var(--tw-text-opacity))}.dark .dark\\:text-sky-100{--tw-text-opacity: 1;color:rgb(224 242 254 / var(--tw-text-opacity))}.dark .dark\\:text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.dark .dark\\:text-yellow-100{--tw-text-opacity: 1;color:rgb(254 249 195 / var(--tw-text-opacity))}.dark .dark\\:ring-gray-600{--tw-ring-opacity: 1;--tw-ring-color: rgb(75 85 99 / var(--tw-ring-opacity))}.dark .dark\\:hover\\:bg-blue-800:hover{--tw-bg-opacity: 1;background-color:rgb(30 64 175 / var(--tw-bg-opacity))}.dark .dark\\:hover\\:bg-gray-700:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity))}.dark .dark\\:hover\\:bg-gray-800:hover{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity))}.dark .dark\\:hover\\:bg-indigo-800\\/20:hover{background-color:#3730a333}.dark .dark\\:hover\\:bg-purple-800:hover{--tw-bg-opacity: 1;background-color:rgb(107 33 168 / var(--tw-bg-opacity))}.dark .dark\\:hover\\:text-gray-200:hover{--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity))}.dark .dark\\:hover\\:text-indigo-200:hover{--tw-text-opacity: 1;color:rgb(199 210 254 / var(--tw-text-opacity))}.dark .dark\\:focus\\:border-gray-400:focus{--tw-border-opacity: 1;border-color:rgb(156 163 175 / var(--tw-border-opacity))}.dark .dark\\:focus\\:ring-indigo-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(99 102 241 / var(--tw-ring-opacity))}.dark .group:hover .dark\\:group-hover\\:stroke-gray-200\\/75{stroke:#e5e7ebbf}@media (min-width: 640px){.sm\\:block{display:block}.sm\\:flex{display:flex}.sm\\:min-w-\\[120px\\]{min-width:120px}.sm\\:min-w-\\[96px\\]{min-width:96px}.sm\\:max-w-\\[30\\%\\]{max-width:30%}.sm\\:max-w-\\[35\\%\\]{max-width:35%}.sm\\:flex-1{flex:1 1 0%}.sm\\:flex-col{flex-direction:column}.sm\\:justify-end{justify-content:flex-end}.sm\\:pl-6{padding-left:1.5rem}.sm\\:text-sm{font-size:.875rem;line-height:1.25rem}.sm\\:leading-6{line-height:1.5rem}}
`,bYe=`html{margin:0;padding:0;background-color:#fff}@media (prefers-color-scheme: dark){html{background-color:#18181b}}body{margin:0;padding:0}code{font-family:source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace}
`,mO=G.createContext({root:null}),y3=function({onMount:e,onUnmount:t,children:n,...r}){const[i,o]=G.useState(null),a=G.useRef(null),s=G.useRef(e);s.current=e;const l=G.useRef(t);return l.current=t,G.useEffect(()=>{var u;if(a.current){const c=a.current.shadowRoot;return o(c),(u=s.current)==null||u.call(s,c),()=>{var d;(d=l.current)==null||d.call(l)}}},[]),x.createElement(mYe.div,{...r,mode:"open",ref:a},x.createElement("style",null,gYe),x.createElement("style",null,bYe),x.createElement("link",{rel:"stylesheet",href:"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",integrity:"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=",crossOrigin:""}),i&&x.createElement(Xke,{target:i},x.createElement(mO.Provider,{value:{root:i}},n)))},yYe=Ae.div`
    border-radius: 1px;
    transform: translate(-50%, 0);
    filter: drop-shadow(0 1.6px 1px rgba(0, 0, 0, 0.24)) drop-shadow(0 -1px 0.8px rgba(0, 0, 0, 0.19));
    user-select: none;
    display: block;
    width: max-content;
    height: max-content;
    ::before {
        content: "";
        display: block;
        position: absolute;
        top: 0;
        left: 50%;
        width: 8px;
        height: 8px;
        transform: translate(-50%, -50%) rotate(45deg);
        background-color: ${({dark:e})=>e?"#000":"#fff"};
        border-radius: 1px;
    }
`,ose=G.memo(function({target:e,children:t,darkModePreference:n="media"}){const r=G.useContext(mO),{root:i}=r,[o,a]=G.useState(null);G.useEffect(()=>{const l=e.startsWith("#")?i==null?void 0:i.getElementById(e.slice(1)):i==null?void 0:i.querySelector(e);if(l){const u=l.getBoundingClientRect();a([u.x+u.width/2,u.y+u.height])}},[e,i]);const s=Xs(n);return i&&o&&qn.createPortal(x.createElement(yYe,{role:"dialog",dark:s==="dark",className:"fixed bg-white dark:bg-zinc-900  z-50",style:{left:o[0],top:o[1]+4}},t),i)}),vYe=Ae(sO)`
    flex-direction: column;
    width: max-content;
    height: max-content;
    --aside: 8px;
    --background-color: #f7f7f7;
    --background-color-hover: #fefefe;
    --color: #777;
    --color-hover: #555;
    --blue: #282958;
    --dark-mode-background-color: #1f1f1f;
        --dark-mode-background-color-hover: #2f2f2f;
        --dark-mode-color: #aaa;
        --dark-mode-color-hover: #ccc;
        --dark-mode-blue: #282958;
    background-color: ${({dark:e})=>e?"var(--dark-mode-background-color)":"var(--background-color)"};
`,xYe=Ae(tse)`
    width: unset;
    height: var(--height);
    position: relative;
    font-size: 95%;
    padding-left: var(--aside);
    padding-right: 1em;
    align-items: center;
    &[aria-selected="true"] {
        ::before {
            display: block;
            position: absolute;
            content: "";
            left: calc(var(--aside) / 2);
            width: calc(var(--aside) / 2);
            top: calc(var(--height) / 8);
            bottom: calc(var(--height) / 8);
            background-color: var(--blue);
        }
    }
    > label {
        user-select: none;
        pointer-events: none;
    }
    :hover, &[aria-selected="true"] {
        color: var(--color-hover);
    }
`,wYe=Ae.span`
    pointer-events: none;
    position: absolute;
    bottom: 0;
    left: 50%;
`,ZYe=G.memo(function(e){var t;const{darkModePreference:n,item:r,styles:i,openedKey:o,setOpenedKey:a}=e,{key:s,icon:l,disabled:u,options:c,value:d,onSelect:f}=r,h=`${s}::button`,m=o===h,g=b3(()=>{a(m?null:h)},u!=null?u:!1),y=G.useRef(m);y.current=m,G.useEffect(()=>{if(m){const _=R=>{y.current&&(R?R instanceof KeyboardEvent&&R.key==="Escape"?a(null):R instanceof MouseEvent&&setTimeout(()=>{y.current&&a(null)},100):a(null))};return document.addEventListener("mousedown",_),document.addEventListener("keydown",_),()=>{document.removeEventListener("mousedown",_),document.removeEventListener("keydown",_)}}},[a,m]);const v=c.find(_=>_.key===d),w=v==null?void 0:v.icon,Z={...i==null?void 0:i.icon,...(t=r.styles)==null?void 0:t.icon},k=Xs(n)==="dark";return x.createElement(x.Fragment,null,x.createElement(gO,{darkModePreference:n,props:tYe(e,_=>{v&&(_.item.label=`${_.item.label}: ${v.label}`)}),handlers:g,"aria-haspopup":"listbox"},x.createElement(l,{style:Z}),w&&x.createElement(w,{style:{position:"absolute",left:"calc(var(--height) - var(--icon-size) * 1.2)",bottom:"calc((var(--height) - var(--icon-size)) * 0.1)",width:"calc(var(--icon-size) * 0.6)",height:"calc(var(--icon-size) * 0.6)",margin:"calc((var(--height) - var(--icon-size)) * 0.2)",pointerEvents:"none",...Z}}),x.createElement(wYe,{"aria-hidden":!0,id:h})),m&&x.createElement(ose,{target:`#${h}`,darkModePreference:n},x.createElement(vYe,{dark:k,role:"listbox","aria-activedescendant":`${h}::${d}`,"aria-describedby":h,"aria-disabled":u,onMouseDown:_=>_.stopPropagation()},c.map((_,R,I)=>{var V;const E=_.key===d,X=_.icon,Y=`${h}::${d}`,C=I[(R+I.length-1)%I.length],N=I[(R+1)%I.length];return x.createElement(xYe,{dark:k,key:_.key,id:Y,role:"option","aria-disabled":(V=_.disabled)!=null?V:!1,"aria-selected":E,split:!1,tabIndex:0,onClick:()=>{f(_.key),a(null)},onKeyDown:F=>{F.key==="ArrowDown"?f(N.key):F.key==="ArrowUp"&&f(C.key)},ref:F=>{F&&E&&F.focus()}},x.createElement(X,{style:i==null?void 0:i.icon}),x.createElement("label",{className:"text-xs"},_.label))}))))}),J7="data-tooltip-host-id";let SYe=0;const kYe=Ae.div`
    border-radius: 1px;
    transform: translate(-50%, -100%);
    filter: drop-shadow(0 1.6px 1.2px rgba(0, 0, 0, 0.15)) drop-shadow(0 -1px 1px rgba(0, 0, 0, 0.12));
    user-select: none;
    ::before {
        content: "";
        display: block;
        position: absolute;
        bottom: 0;
        left: 50%;
        width: 8px;
        height: 8px;
        transform: translate(-50%, 50%) rotate(45deg);
        background-color: ${({dark:e})=>e?"#000":"#fff"};
        border-radius: 1px;
    }
`,_Ye=G.memo(function({children:e,content:t,autoHide:n=3e3,showDelay:r=250,hideDelay:i=250,darkModePreference:o="media"}){const a=G.useMemo(()=>SYe++,[]),[s,l]=G.useState([0,0]),[u,c]=G.useState(!1),[d,f]=G.useState(!1),h=G.useContext(mO),{root:m}=h,g=typeof e=="object"?{...e}:e;"props"in g&&(g.props={...g.props,[J7]:a});const y=G.useRef(n);y.current=n;const v=G.useRef(r);v.current=r;const w=G.useRef(i);w.current=i,G.useEffect(()=>{const k=m==null?void 0:m.querySelector(`[${J7}="${a}"]`);if(k){let _=null,R=null,I=null;const E=()=>{for(const N of[_,R,I])N&&clearTimeout(N)},X=()=>{E(),_=setTimeout(()=>{const N=k.getBoundingClientRect();l([N.x+N.width/2,N.y]),c(!0),I=setTimeout(()=>{C()},y.current)},v.current)},Y=()=>{for(const N of[R,I])N&&clearTimeout(N);I=setTimeout(()=>{C()},y.current)},C=()=>{E(),R=setTimeout(()=>{c(!1)},w.current)};return k.addEventListener("mouseover",X),k.addEventListener("mousemove",Y),k.addEventListener("mouseout",C),()=>{k.removeEventListener("mouseover",X),k.removeEventListener("mousemove",Y),k.removeEventListener("mouseout",C),I&&clearTimeout(I)}}},[m,a]);const Z=Xs(o);return x.createElement(x.Fragment,null,g,(u||d)&&m&&qn.createPortal(x.createElement(kYe,{className:`${Z==="dark"?"dark bg-zinc-900":"bg-white"} fixed text-xs p-1 px-3 text-gray-500 z-50`,dark:Z==="dark",onMouseOver:()=>f(!0),onMouseOut:()=>f(!1),style:{left:s[0],top:s[1]-4}},t),m))}),IS=Ae.div`
    flex-grow: 1;
    flex-shrink: 1;
    display: inline-block;
    height: var(--height);
    position: relative;
    margin-right: 4px;
    > svg {
        position: absolute;
        width: calc(var(--icon-size) * 0.6);
        height: calc(var(--icon-size) * 0.6);
        left: 50%;
        top: 50%;
        transform: translate(-50%, ${({open:e})=>e?"-20%":"-50%"});
        transition: transform 120ms;
    }
    :hover > svg, :focus > svg {
        transform: translate(-50%, -20%);
    }
`,GYe=Ae(sO)`
    width: max-content;
    height: max-content;
    background-color: ${({dark:e})=>e?"#000":"#fff"};
`,ase="-";let IYe=0;const gO=G.memo(function({props:{item:{key:e,label:t,disabled:n=!1,menu:r,form:i},styles:o,openedKey:a,setOpenedKey:s,renderSlot:l},handlers:u,darkModePreference:c,children:d,...f}){const h=G.useMemo(()=>`toolbar-item-${IYe++}`,[]),m=!!(i||r)&&u===null,g=!!(i||r)&&e===a&&!n,y=G.useRef(g);y.current=g;const v=b3(()=>{s(g?null:e)},n!=null?n:!1,[" "],!1);G.useEffect(()=>{if(g){const Z=k=>{y.current&&(k?k instanceof KeyboardEvent&&k.key==="Escape"?s(null):k instanceof MouseEvent&&setTimeout(()=>{y.current&&s(null)},100):s(null))};return document.addEventListener("mousedown",Z),document.addEventListener("keydown",Z),()=>{document.removeEventListener("mousedown",Z),document.removeEventListener("keydown",Z)}}},[s,g]),G.useEffect(()=>{if(g&&r)return l(x.createElement(sse,{...r,darkModePreference:c})),()=>l(null)},[g,r,l]);const w=Xs(c)==="dark";return x.createElement(x.Fragment,null,x.createElement(_Ye,{content:t,darkModePreference:c},x.createElement(tse,{dark:w,role:"button",tabIndex:n?void 0:0,"aria-label":t,"aria-disabled":n!=null?n:!1,split:!!(i||r),style:o==null?void 0:o.item,className:g?"open":void 0,"aria-haspopup":m?"menu":"false",...m?v:u,...f,id:h},d,i?m?x.createElement(IS,{open:g,...v},x.createElement(Y7,{style:o==null?void 0:o.splitIcon})):x.createElement(IS,{open:g,role:"button",tabIndex:n?void 0:0,...v},x.createElement(Y7,{style:o==null?void 0:o.splitIcon})):r&&(m?x.createElement(IS,{open:g,...v},x.createElement(NVe,{style:o==null?void 0:o.splitIcon})):x.createElement(IS,{role:"button",tabIndex:n?void 0:0,"aria-label":t,"aria-disabled":n,"aria-haspopup":"menu",open:g,...v},x.createElement(FVe,{style:o==null?void 0:o.splitIcon}))))),g&&i&&x.createElement(ose,{target:`#${h}`,darkModePreference:c},x.createElement(GYe,{dark:w,onMouseDown:Z=>Z.stopPropagation()},i)))}),WYe=G.memo(function({item:e,styles:t,openedKey:n,setOpenedKey:r,renderSlot:i,darkModePreference:o}){return e===ase?x.createElement(ese,null):"checked"in e?x.createElement(PVe,{item:e,styles:t,openedKey:n,setOpenedKey:r,renderSlot:i,darkModePreference:o}):"options"in e?x.createElement(ZYe,{item:e,styles:t,openedKey:n,setOpenedKey:r,renderSlot:i,darkModePreference:o}):x.createElement(OVe,{item:e,styles:t,openedKey:n,setOpenedKey:r,renderSlot:i,darkModePreference:o})}),EYe=Ae.div`
    width: 100%;
    --background-color: #f7f7f7;
    --color: #777;
    --color-hover: #555;
    --blue: #282958;
    --blue-dark: #1d1e38;
    --dark-mode-background-color: #1f1f1f;
    --dark-mode-color: #aaa;
    --dark-mode-color-hover: #ccc;
    --dark-mode-blue: #282958;
    --dark-mode-blue-dark: #1d1e38;
    --dark-mode-preference: ${({darkModePreference:e})=>e};
`,XYe=G.memo(function({darkModePreference:e="media",items:t,styles:n}){const[r,i]=G.useState(null),[o,a]=G.useState(null),s=Xs(e)==="dark";return x.createElement(EYe,{darkModePreference:e,style:n==null?void 0:n.root},x.createElement(sO,{dark:s,style:n==null?void 0:n.container},t.map((l,u)=>l===ase?x.createElement(ese,{key:u}):x.createElement(WYe,{key:l.key,item:l,styles:n,openedKey:r,setOpenedKey:i,renderSlot:c=>a(c),darkModePreference:e}))),o)}),sse=XYe,LYe=Ae.div({marginBlock:"0 0.6em",marginInline:"0.2em"}),RYe=Ae.button(({disabled:e=!1})=>({"&:hover":e?{}:{backgroundColor:"rgba(243, 244, 246, 0.7)"},color:e?"rgba(156, 163, 175, 0.5)":"rgb(55, 65, 81)","& > pre":{display:"inline-block",marginInlineStart:"0.2em"},marginInlineStart:"0.6em","&:first-child":{marginInlineStart:"0"},cursor:e?"default":"pointer"})),pG=({label:e,shortcut:t,disabled:n,handler:r,icon:i})=>{const{t:o}=ot("translation",{keyPrefix:"main.tabpanel.menubar"}),a=x.useMemo(()=>{const s=t.split("+").map(l=>l.trim());return{key:s.filter(l=>/^[a-z]$/i.test(l))[0],ctrlKey:s.includes("Ctrl"),shiftKey:s.includes("Shift"),altKey:s.includes("Alt")}},[t]);return x.useEffect(()=>{const s=l=>{l.ctrlKey===a.ctrlKey&&l.shiftKey===a.shiftKey&&l.altKey===a.altKey&&l.key.toLowerCase()===a.key.toLowerCase()&&(r(),l.stopPropagation())};return document.body.addEventListener("keydown",s),()=>document.body.removeEventListener("keydown",s)},[a,r]),x.createElement(RYe,{className:"text-sm px-3 py-1 border text-gray-400 select-none",disabled:n,onClick:r,"aria-label":o(e),title:`${o(e)} (${t})`},i||o(e))},CYe=()=>{const e=Tt(),{canUndo:t,canRedo:n}=e;return x.createElement(LYe,null,x.createElement(pG,{label:"undo",disabled:!t,handler:e.undo.bind(e),shortcut:"Ctrl+Z",icon:x.createElement(YVe,{width:"1.4em",height:"1.4em"})}),x.createElement(pG,{label:"redo",disabled:!n,handler:e.redo.bind(e),shortcut:"Ctrl+Shift+Z",icon:x.createElement(TVe,{width:"1.4em",height:"1.4em"})}))};ft(CYe);const WS=(e,t,n)=>{const{leading:r=!0,trailing:i=!1}={};let o=!1,a=!1;return()=>{if(o){a=!0;return}o=!0,r&&e(),setTimeout(()=>{a&&i&&e(),o=!1,a=!1},t)}},VYe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQEAAADXCAYAAAAa/OR7AAAS80lEQVR4nO2dPWtdzRHHR+FpBMFEamKUMsUDj0AJxI0/QJp0EfgLSLjVF1AhRFCqkMKtkNoUBn2DPE7nxpWIAyGkVQwBCdSoCSjF9cqrvfsy+3pmd/8/MNa9uvecc6/O/HdmdnaWCAAAAAAAAAAAAAAAAAAAc7Hh+sXj42PL6wAD8/nVy8f9h23r7/75+R/P7sGb6+O1G29n72xD/73+GITZ2PB/Xd81ug4wAd/v/uAYOewC4H/PiqvNW6JLwohUEXgCIJuQIZfgavOWti4P156HVxAm5AlABEAyLYzfhk0QIAZuIAKgOEsZv4kuBhABNxABUBQpAqDz4S+/JyIIgQuIACiCROPXgVfgBiIAspBu/DoQAjshEfhJo+sAHdKTABAR7T9s093BBRHZ6w2AHYgAsNKbACh0IQA8IAJgjV4FQKGqE+EN8IAIgGf0LgAK3RuAGPiBCAAwOVg7AJ5o6QVcbd4+/bz/sG197Fp0xGH/YZs+ELwADvAEABG1E4CrzdtnBq+eM8kRAMXdwQWdnt9nH2d0IAKgCTbj9722BPsP23T08X2RY40MioVAdS/AZdTmIiA9mcfxBMwQwve63U9fpi0eQsUgYFFDCHwjum1ZMFG8EHAxm5fMBCoGQRBOY48Ydz6EEgAVr+txuy4O+vn0a0i5jlGmPmsAEQBeOEk8F66R/PT8nk7P7+nk7Qvr87bzmcdKEYPvd394hBisg3AAeEfJGpn7q81bevf6zdPjk7cvnhm/SubZzlPqemYKD5ATAF5iBYCoTKyujq2LARHR337869q5IQZ5QASAl6VEwHYeddzcQqFYRhcCJAZBEqWSgBz2H7YXEwAiJA0hAhMj7ebPEYBc0ZL2XbQE4cDEuG58n0G1HqVbM2JogM1HgJWUka9WLqDmOUAYeAKTwvUCahulqw7A91ru62POP/I+BvAEAJuWyUBFjDGnGD7nM21dHtLO3tnGrPscQgQmQb/BZ0iCcY2f6NuoP6MAEEEEpsI30i3hBZQg5brRlvw5EIHJGMELyDF8Ihi/CeoEJkC12HK14u7NC4jNDUAA/MATmITUXvxLVPCF4IrWyBn/ksATGBzlBWxdHiYZszQB4OJqWgLWgQhMwiihAAcIQBwQgUG5uT5+1Ntt9zqip4BtyOJATmAQUvrr9+QFhEqMe/os0oAnMAGpI6Mk70Fdi+uaJF1rb8ATGAQz8527845Eo9KvKbRL0d3BBXIDTOAJDMjoW2+FvAIiJAdjgAgMhk0AJI7qpTFzAkgO8oEIDM4sxjCD0NUCIjAwdwcXzQqEJGTnzeueRQBzQWKwY3yxf6oAxGDbmMSctvNN47muL6VUWb1H3+YceQEeEIEBaSEARPTM4BQ5OxalvN68Ft/nnrVpSAiEAx2iqgFtN3QrAVCknqvEtmKhYyIc4AERGIjWAqDQ9w3g4ttctORngBCEQaPRjiidA6ixw1DKaM5x5XO42ryduqcAtiEbCJcI5HgANTv42lhqp6GZhQDbkA3Gzt7ZhvpHVE4ASsKp718ibEFoYAeeQGfo3kCqALTaaFQiukcwizcAT2BQSgvALOjf2ehrLLhABDpCbxiamo13MYMXoEBY8ByIQCfkCACR38hnEgATeAOoGOyK3DqAmY1dZ/9hmz4sfRGCgCfQATfXx49LFQKNCkKCb0AEBKPKgyEAdZk9JIAICGZn72wDApDH7LMhHCACgvn86uUjBCAPX+ESQoIVEAGhQADqAyFYAREQCgQAtAIiIJARtg/vBYgtREAcEID66MlC9fPMMwQQAUFAANqhl1HPspDIBVYRCgEC0A7btOHupy/DCgFWEXbA51cvIQANMfMAIwsAB3gCC4OpwGWwtSUfNSyAJyAYCACQAERgQSAAfmqV/KKU+DkQgYVAIjCM3pQU1AMisAAQAB4lNiTxYW5TNmutAESgMRAAHvregqVboSMMew5EoCGYCuSDUKAdEIFGYCYgjdJiAFFZByLQCAhAOqV3K/IJwYx5AYgAEItKDNYSUPQSWAERaACSgfGUTuLZRn9zdmBWIAKVgQDEgyx+W7DvQEVWswG4kWMpbfxIBvqBJ1ARjGSgByAClUBNAOgFiEAFUBMQh8tdL+HGIxQIg5xABSAAadgMNidJCAHgAU8ALErMdukxRg0B4ANPoDCYEiyHXigUUzQEAYgDngAQQchwIQD1gAgUBF4AD91QOcZdy7BRNrwC4QBojm74rsSfeh55gPrAEygEvIB0chOAKR2I1LoBeAMQAbAgpuEuMZJjERH2HSgCvIB8UhKDuaLhEoDR9h8I7TuAnABYHK4xl/AUzDDg7uBiig1IfCAcyAReQB6xAlCq8SjCgG9ABMBipI7sJXMHEAOIQBbwAtKRIABgBUQANEeqIc+YDyCCCCQDLyCO2rsJuYC7HwYikAAEIA7d+FsKgRIACIEfiACoilTX32TWUIAIdQLRwAvgNfqQZvzwBtxABCKYoXuwa4Wfvp4/NE8vQQBg9HwQDjCZoW+gvhOw+bz6P2TgEgQAxAERYDK6ABCtb/7pMnoJC39AORAOgCdsxsyN+yUIAUKANOAJMJg1Gcj1flQIob++teeUIwAzzwwQwRMIMkIyMGWUdhmxbSFPTNKwBvAA8oAIBIi9qWtupR1LqJefSxxsicH9h23260PHlhA6gG+gqYiH2BkBSQLgwjbHH5r3N43WJRK+9/iO73o9h1wvYIZQAE1FMogVAOn4jJ0rAOZzNTr+cEEYUAaIgIOUXIB0L8B1febUoPnYB3e6UPp3MzOYHXAwmhcQore5f3gB5YAIWIjdVnyJUc4s5Eltva3e63ucehxF6e+nlADMkA/ggHDAQiiBFRNTl8ScijONfomtumzXEYt0r2N0IAIGvlzAUjcrpzJvqUU9sXkDfYoQ04UygAho+KYEl7hZuefsYVWfjZTrQihQHtQJaNjKg5fIdqcU2kgSr1qUTAbOJAKhOgEkBr8SIwCpr0s9FqfX/uhTc5gNqAdEwIGv4s00rJh5dd/5XO83Y2pzwU6oBwB4zkxeAAfkBGjdC+AKgKtcNmX09QlJqCpvZEOHB1AfiAADTs176vZYnEx5aoKwd3GAALRh+nAg1CvAZ9gpy2e53Xp857SFIxAAHggF1oEnYJBSfBNzTN9zLnQvIbSiL/bYEjB3CoYH0JapRUD3AjjG5XptbfQ8g02kejN6na3Lw7XtwWsBL8DOtOGAWh8QKnl11dXb1uOH3puD7Tpzy3WlgJ2ClmVaEeAU3piZfl9GfgRjbI1p9CocqAG8ADfTioALs7adKH3ERW28G9eoX8MbgAD4mVIEXDMCymi5xt8qb5A6/dgTtfICEIAwU64d+H73h0dbItCVgNNfo9NilB8h+WfSKvaHAKxAj0EDlxfgi/eXnIaD8acBAeAzVTigzwjYMGN4lxs+kmG2pGbiD6QzjQhw2odzCoUgAOkgDJDJNCKg4Bixa/RfQgBGTwiWBgIQz3Q5AR8SXf+lz98TEIA0phABFQq4ZgTUzwoYXnlQDSiXKaYI9RbiiPXbg3UByzL1FKEyfkmLgUB5IAB5DCsCsbMBoA4IA+Qz5OwABGAe4AXkM5wI1BaAGer4U8Go3ydDJQZbCECpY41EaEkwWoUtyzSJwVoCgFHfj9kZqJUAgHIMIwIuSo78pY47CmZHoFZrA+ABlGWInIDNCyhR5tuibdjIoD9AH3TtCdjqAHQDVa5qDjD4NCAA/dCtCJgCYBo/qIvvO8b33xddioBeBuwy/tPzezp5+6LthU2C/j2bbcFKCwBG//p0N0WoC4DCd+O5woER23a1Qk8EYvpPPkNPEaob0Lxhbq6PH4kgALUZUQDUvTOTCHUnArufvmyoP1QKEIB4ZugNqN9TdwcXdEcXRV3h3U9fxIpKVyKg/6HUzXJzffx4c338aN48Ni9AQuGPGU9LZwYBMGld97A03eUEfJhqbrK0F2AzKIk3WuvsvgTj93mXnL8Ro6R8l4h+S0Qvdj99+cPnVy+/2/305X/xVxpPKCcwjAgob+Dm+vhRigDEGlNrQZAwlSdBABQhIXC1n8tpS9ciTJhGBIhWf0RfMrC1B5BiZK2EQIIAEMkSAaLVPWSbXtb/LtwBxdzQRkd/b20hmEIEJIYBJYxM/yyh4/nEQ4rBm0gTAKL8sMAGp39lTSGYSgSkTAkuYXSuzy5VABTShEAXgdPz+6fnlWdQ01OrJQQhERhiAZGPljMCW5eHixmded4lryUGZXRqlmfp6wmJUg/faSxdTRH6kBIGLEmvN6gE44+hxMI0SXQfDrhCgRlCgBmQUDxko4YIIBxIIJQLaEEvbrdE9JjbRQsvIeUctr95zr2wdXnoDYnU72qETV17AktPCZp/cNdNjdWMeZT2BlxGpJ+Ha2g1FlG51sLYXmerljUZcnZAwpSguWyZaGXsEILyxIqAuQiot5xDKq7vaTgRCAkAUVsR4Li0LqQJQ4keDPoxXMeLOU+KFzCL0XPY2TvbGHopsY9aAmDzAFIJvb+1SOjnSxUE3Rtqef0wfDtfvxevCnQrAiEvoAYlYz/T4GzkGFPMe0/P7+no43siInr3+g0dfXxPR0REb9M+ry8s8l2TKTwhLwCGX4auwoHQIiGieqFASQ+gFCEDt1W86c8rY1UC4OLd6zdr5yo12pvfpbQQaQR+8as/juMJcOPDkgLQ6/Rfykiso4vp0cf3dPdx9bz6PkKjPReORwTq0pUIEPmnBUtjmwKUNFKFDN02Wpvf3ZHj/Wr1m+lZ3R1c0LvXbzKu2o+077gj/kVEPxLRv4no10T0OyL6GeeNXYUDCluz0dJwawAk4DOaXMH0NctQYpBqtGa4skRCcRD+Q0R/3tk7+5Ptl9PODuQgMf73YRoTtxMOJ2xyrYevCbyBaP7rEgAO3YlAbS+gNwEwXX0Vu4eIyZvoQmDmCnrNmQzGT3Pe3PXagdKYN/SSo5E6t+0aTt6+ePp3d3Dx9I+InsXxXMz3cI6hfl8qP9OD4EplZ+/slznv7y4nUMsTsI1oEm9Mn7ufMj1qi/lDnXDM8+R4A2aFIRE5H/dOrTLmqdYOtBIAacZvdrXxNbzkCoDttfpzMUJQKiSQngvQjdhmeKZxc15jO3bKNfmACASQKgC2aT3TMGPcfpvBm8/HeBIlvQGp1OplwFn5xxED7vVBBDwsKQBqSkz/X12D7vIz+tl7Ddr13hKVlbrnMIoISOt5SGQXhJjrHEYEagsAUX0RCLm6oSSbz0VPEYJYfLsn2UqLpSLR0H1wwgwfw4iATq4gSBGA2Mx6yCtIbaSiFg2FCG2hJsUbUOtL9MdLXk8pOGGEDRQLGdS6UW0LbFz19bnbWuXuemOi5vtjRMn2+iUSey6j4Hbd6Ylan2UaT8Bn/KUXwpjH5FbxEfmXQnONPLcbrv7+2E1PaocFIxl1K4ZrNFpaAEpzen7/JABHH9+vVuBFGuTV5u2TwZv/c6/Bhrnwx/e9mE0zl2rmurN3tqEMHwJQh67CgRoCEOMFcJbPxoz6Nky333yOgyu+P3n7wllWbH5PqQ00a3kBEIB6dOcJLIU+laff6PpjvXzXR0ppr4uty0N69/oN22A5o/vp+b11RyPzNaXRR331uPhJwBrdeAJLegGu3nuxo36N1Xh3BxdEr9+sOgRZfu/6Dnx5A85o/uQVMWcWXNgM3czug7p0kRhcOgxQ5Lr6ROlFOiqetxnc1uXhWpFRqzyILorc0leM8G3BFGECtthfb7HFxbY/fcr6fD2hZ87pqxFdNQZtPVdvCoANGL1sxItAy9kAZfz66FayM09Mok//DCf0fMTVxaj1yM8Fht8PosOB1MrAnFCghMufg+3aVabevC6u4bveZ/YLzMnsw+jl0nXZcC0vwCYCKcbPie+5JbkK3UBdvytBieq+EavyRqRbEWjtBXANNaU+P1YITFKMv2YJL4y/L6YSAY4ALO3uh1Buv7QYXwHD748uRaCGFyDJ8G0FO7WMPuQR6KM6Z8tu0B/diUBJAZBk+CZLjvQco4a7Pw7T1AlIMXhfUQ8AEhHlCbTYWUgCS3kBGNnnZBpPQDK56/tTcO1IDICJmFWEo3oBatRvvTbft3kJADoiRKAnAUjdkXeJnIUuACr7j9V5wAThQCSuxhwul982RVc7J4DYH8SweGKwBy/A1nMvZX6/dhEQZ0MLCMR8iK4T6EEAVONMnwHbfldzH70UQx6xBTfgIXJ2QKrxW7vsfjXmUFNOnVCVXk7mPseA0bEH2GjmCUg1fIVt9V6s624af6mVelkHANOzuCcg1fh1o9eN3beU14VrZSKm50APFBcBqUYfw+n5PZ04XHzTlS/ddVd32eEFgBYUCQckGb5r7b6rWMfl8uuJPZfhlx7pYfSgBtVmByQZvk6ssStiknk6KUIAYwctKZ4TkGj8pZYRmyN8DQ8AAgCk4bwh//6bn4szdhu+uXvfa/WR32bcrj6EuUAEQGtCnsD/AR33HawxpMZqAAAAAElFTkSuQmCC",YYe=e=>{const{src:t,fallbackSrc:n,timeout:r,...i}=e,[o,a]=G.useState(!1),s=G.useRef(!1);return G.useEffect(()=>{const l=setTimeout(()=>{s.current||a(!0)},r);return()=>clearTimeout(l)},[]),x.createElement("img",{...i,src:o?n:t,onError:()=>{a(!0)},onLoad:()=>{s.current=!0}})};function TYe(e){const{t}=ot("translation",{keyPrefix:"main.tabpanel.settings"}),[n,r]=qV(e.value,i=>e.setValue(i));return x.createElement("div",{className:" mt-2"},x.createElement("input",{className:"w-full h-2 bg-blue-100 appearance-none",type:"range",name:"limit",value:n>0?n:0,min:"1",max:"50",disabled:n<0,step:"1",onChange:i=>{const o=parseInt(i.target.value);isNaN(o)||r(o)}}),x.createElement("output",{className:"text-sm ml-1",htmlFor:"height"},x.createElement("input",{type:"checkbox",className:"h-4 w-4 mr-1 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600",checked:n>0,onChange:i=>{r(i.target.checked?30:-1)}}),`${t("limit")}${n>0?`: ${n}`:""}`))}const B7=Ae.div`
    clip: rect(1px, 1px, 1px, 1px);
    clip-path: inset(50%);
    height: 1px;
    width: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
`,EL=Ae.div`
    margin: 2px;
    border-radius: 1.2px;
    padding: 0.5em;
    display: flex;
    flex-direction: column;
    color: #444;
    .dark {
        color: #aaa;
    }
`,NYe=({rendererHandler:e,darkModePreference:t,csvHandler:n,extra:r=[],exclude:i=[]})=>{const o=Tt(),{config:a,layout:s,canUndo:l,canRedo:u,limit:c}=o,{t:d}=ot(),{t:f}=ot("translation",{keyPrefix:"main.tabpanel.settings"}),{defaultAggregated:h,coordSystem:m="generic",geoms:[g]}=a,{showTableSummary:y,stack:v,interactiveScale:w,size:{mode:Z,width:k,height:_},showActions:R}=s,I=G.useCallback(WS(()=>{var V;(V=e==null?void 0:e.current)==null||V.downloadPNG()},200),[e]),E=G.useCallback(WS(()=>{var V;(V=e==null?void 0:e.current)==null||V.downloadSVG()},200),[e]),X=G.useCallback(WS(()=>{var V;(V=e==null?void 0:e.current)==null||V.getCanvasData().then(F=>navigator.clipboard.writeText(F.join(",")))},200),[e]),Y=G.useCallback(WS(()=>{var V;(V=n==null?void 0:n.current)==null||V.download()},200),[]),C=Xs(t)==="dark",N=G.useMemo(()=>{const V=[{key:"undo",label:"undo (Ctrl + Z)",icon:()=>x.createElement(x.Fragment,null,x.createElement(HLe,null),x.createElement(B7,{"aria-hidden":!0},x.createElement(pG,{label:"undo",disabled:!l,handler:o.undo.bind(o),shortcut:"Ctrl+Z"}))),onClick:()=>o.undo(),disabled:!l},{key:"redo",label:"redo (Ctrl+Shift+Z)",icon:()=>x.createElement(x.Fragment,null,x.createElement(JLe,null),x.createElement(B7,{"aria-hidden":!0},x.createElement(pG,{label:"redo",disabled:!u,handler:o.redo.bind(o),shortcut:"Ctrl+Shift+Z"}))),onClick:()=>o.redo(),disabled:!u},"-",{key:"aggregation",label:f("toggle.aggregation"),icon:nRe,checked:h,onChange:F=>{o.setVisualConfig("defaultAggregated",F)}},{key:"mark_type",label:d("constant.mark_type.__enum__"),icon:t7,styles:{icon:{color:"rgb(294,115,22)"}},options:Kt.GEOM_TYPES[m].map(F=>({key:F,label:d(`constant.mark_type.${F}`),icon:{auto:Sae,bar:O=>x.createElement("svg",{stroke:"currentColor",fill:"none",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":!0,...O},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9,4v16h6v-16Z"})),line:O=>x.createElement("svg",{stroke:"currentColor",fill:"none",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":!0,...O},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5,6L19,18"})),area:O=>x.createElement("svg",{stroke:"none",fill:"currentColor",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":!0,...O},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5,20v-17l14,4V20Z"})),trail:O=>x.createElement("svg",{stroke:"none",fill:"currentColor",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":!0,...O},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5,6l7,4l7-2v2l-7,4l-7,-4z"})),point:O=>x.createElement("svg",{stroke:"currentColor",fill:"none",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":!0,...O},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9,12 A3,3,0,0,1,16,12 A3,3,0,0,1,9,12"})),circle:O=>x.createElement("svg",{stroke:"none",fill:"currentColor",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":!0,...O},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6,12 A6,6,0,0,1,18,12 A6,6,0,0,1,6,12"})),tick:O=>x.createElement("svg",{stroke:"currentColor",fill:"none",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":!0,...O},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5,12h14"})),rect:O=>x.createElement("svg",{stroke:"none",fill:"currentColor",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":!0,...O},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5,5v14h14v-14z"})),text:O=>x.createElement("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":!0,...O},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 21l5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 016-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 01-3.827-5.802"})),arc:O=>x.createElement("svg",{stroke:"none",fill:"currentColor",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":!0,...O},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12,21l-9,-15a12,12,0,0,1,18,0Z"})),boxplot:O=>x.createElement("svg",{stroke:"currentColor",fill:"none",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":!0,...O},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7,7v9h10v-9Zm0,4h8M12,7v-6m-3,0h6M12,16v7m-3,0h6"})),table:O=>x.createElement("svg",{stroke:"currentColor",fill:"none",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":!0,...O},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0112 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"})),poi:uRe,choropleth:fRe}[F]})),value:g,onSelect:F=>{o.setVisualConfig("geoms",[F])}},{key:"stack_mode",label:d("constant.stack_mode.__enum__"),icon:pRe,options:Kt.STACK_MODE.map(F=>({key:F,label:d(`constant.stack_mode.${F}`),icon:{none:qM,stack:ULe,normalize:KLe,center:Ux}[F]})),value:v,onSelect:F=>{o.setVisualLayout("stack",F)}},"-",{key:"transpose",label:f("button.transpose"),icon:jLe,onClick:()=>o.transpose()},{key:"sort:asc",label:f("button.ascending"),icon:QM,onClick:()=>o.applyDefaultSort("ascending")},{key:"sort:dec",label:f("button.descending"),icon:$M,onClick:()=>o.applyDefaultSort("descending")},{key:"table:summary",label:f("table.summary"),icon:n7,checked:y,onChange:F=>{o.setVisualLayout("showTableSummary",F)}},"-",{key:"axes_resize",label:f("toggle.axes_resize"),icon:Ux,checked:w,onChange:F=>{o.setVisualLayout("interactiveScale",F)}},{key:"scale",icon:BLe,label:d("constant.layout_type.__enum__"),options:Kt.CHART_LAYOUT_TYPE.map(F=>({key:F,label:d(`constant.layout_type.${F}`),icon:F==="auto"?sRe:lRe})),value:Z,onSelect:F=>{o.setVisualLayout("size",{...s.size,mode:F})},form:x.createElement(EL,null,x.createElement(yRe,{width:k,height:_,onHeightChange:F=>{o.setVisualLayout("size",{mode:"fixed",height:F,width:s.size.width})},onWidthChange:F=>{o.setVisualLayout("size",{mode:"fixed",width:F,height:s.size.height})}}))},"-",{key:"coord_system",label:d("constant.coord_system.__enum__"),icon:t7,options:Kt.COORD_TYPES.map(F=>({key:F,label:d(`constant.coord_system.${F}`),icon:{generic:O=>x.createElement("svg",{stroke:"currentColor",fill:"none",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":!0,...O},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2 12h20M12 2v20"}),x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 7h2M12 16h2M7 12v-2M16 12v-2"})),geographic:oRe}[F]})),value:m,onSelect:F=>{const O=F;o.setCoordSystem(O)}},m==="geographic"&&g==="choropleth"&&{key:"geojson",label:f("button.geojson"),icon:aRe,onClick:()=>{o.setShowGeoJSONConfigPanel(!0)}},"-",{key:"debug",label:f("toggle.debug"),icon:mRe,checked:R,onChange:F=>{o.setVisualLayout("showActions",F)}},...m==="generic"?[{key:"export_chart",label:f("button.export_chart"),icon:dRe,form:x.createElement(EL,{className:C?"dark":""},x.createElement("button",{className:`text-xs pt-1 pb-1 pl-6 pr-6 ${C?"dark bg-zinc-900 text-gray-100 hover:bg-gray-700":"bg-white hover:bg-gray-200 text-gray-800"}`,"aria-label":f("button.export_chart_as",{type:"png"}),onClick:()=>I()},f("button.export_chart_as",{type:"png"})),x.createElement("button",{className:`text-xs pt-1 pb-1 pl-6 pr-6 ${C?"dark bg-zinc-900 text-gray-100 hover:bg-gray-700":"bg-white hover:bg-gray-200 text-gray-800"}`,"aria-label":f("button.export_chart_as",{type:"svg"}),onClick:()=>E()},f("button.export_chart_as",{type:"svg"})),x.createElement("button",{className:`text-xs pt-1 pb-1 pl-6 pr-6 ${C?"dark bg-zinc-900 text-gray-100 hover:bg-gray-700":"bg-white hover:bg-gray-200 text-gray-800"}`,"aria-label":f("button.export_chart_as",{type:"base64"}),onClick:()=>X()},f("button.export_chart_as",{type:"base64"})))}]:[],{key:"csv",label:f("button.export_chart_as",{type:"csv"}),icon:n7,onClick:Y},{key:"config",label:f("button.config"),icon:wae,onClick:()=>{o.setShowVisualConfigPanel(!0)}},{key:"export_code",label:f("button.export_code"),icon:tRe,onClick:()=>{o.setShowCodeExportPanel(!0)}},...r.length===0?[]:["-",...r],"-",{key:"limit_axis",label:f("limit"),icon:Zae,form:x.createElement(EL,null,x.createElement(TYe,{value:c,setValue:F=>{o.setVisualConfig("limit",F)}}))},"-",{key:"kanaries",label:"kanaries docs",icon:()=>x.createElement("a",{href:"https://docs.kanaries.net",target:"_blank"},x.createElement(YYe,{id:"kanaries-logo",className:"p-1.5 opacity-70 hover:opacity-100",src:"https://imagedelivery.net/tSvh1MGEu9IgUanmf58srQ/b6bc899f-a129-4c3a-d08f-d406166d0c00/public",fallbackSrc:VYe,timeout:1e3,alt:"kanaries documents"}))}].filter(Boolean).filter(F=>typeof F=="string"||!i.includes(F.key));switch(o.config.geoms[0]){case"table":return V;default:return V.filter(F=>typeof F=="string"||F.key!=="table:summary")}},[o,l,u,h,g,m,v,w,Z,k,_,R,I,E,C,r,i,c,y]);return x.createElement("div",{style:{margin:"0.38em 0.28em 0.2em 0.18em"}},x.createElement(sse,{darkModePreference:t,items:N,styles:{root:{"--background-color":"#fff","--dark-background-color":"#000","--color":"#777","--color-hover":"#555","--dark-color":"#999","--dark-color-hover":"#bbb","--blue":"rgb(79,70,229)","--blue-dark":"rgb(9, 6, 65)"},container:{}}}))},FYe=ft(NYe),MYe=e=>{const{t}=ot("translation",{keyPrefix:"constant.draggable_key"});return x.createElement(HYe,{className:"m-0.5 border border-gray-200 dark:border-gray-700 relative",style:e.style},x.createElement("div",{className:"fl-header border-r border-gray-200 dark:border-gray-800 cursor-default select-none"},x.createElement("h4",{className:"font-normal"},t(e.name))),x.createElement("div",{className:"fl-container"},e.children))},OYe=e=>{const{t}=ot("translation",{keyPrefix:"constant.draggable_key"});return x.createElement("div",{className:"m-0.5 text-xs border border-gray-200 dark:border-gray-700",style:e.style},x.createElement("div",{className:"border-b border-gray-200 dark:border-gray-800 p-2 cursor-default select-none"},x.createElement("h4",{className:"font-normal"},t(e.name))),x.createElement("div",null,e.children))},zYe=e=>{const{t}=ot("translation",{keyPrefix:"constant.draggable_key"});return x.createElement("div",{className:"m-0.5 text-xs border border-gray-200 dark:border-gray-700"},x.createElement("div",{className:"border-b border-gray-200 dark:border-gray-800 p-2 cursor-default select-none"},x.createElement("h4",{className:"font-normal"},t("filters"))),x.createElement("div",null,e.children))},PYe=Ae.div`
    display: flex;
    padding: 0.2em;
    min-height: 2.4em;
    flex-wrap: wrap;
    > div {
        margin: 1px;
    }
`,jYe=Ae.div({display:"flex",flexDirection:"column",paddingBlock:"0.5em 0.8em",paddingInline:"0.2em",minHeight:"4em","> div":{marginBlock:"0.3em",marginInline:"1px"}}),HYe=Ae.div`
    display: flex;
    margin: 0.2em;
    font-size: 12px;
    div.fl-header {
        /* flex-basis: 100px; */
        width: 100px;
        flex-shrink: 0;
        h4 {
            margin: 0.6em;
            font-weight: 400;
        }
    }
    div.fl-container {
        flex-grow: 10;    
        position: relative;
    }
`;Ae.div`
    border: 1px solid #e5e7eb;
    @media (prefers-color-scheme: dark) {
        border: 1px solid #2d3748;
    }
    font-size: 12px;
    margin: 0.2em;

    .flt-header {
        border-bottom: 1px solid #e5e7eb;
        @media (prefers-color-scheme: dark) {
            border-bottom: 1px solid #2d3748;
        }
        padding: 0.6em;

        > h4 {
            font-weight: 400;
        }
    }

    .flt-container {
    }
`;const JYe=Ae.div`
    background-color: ${e=>e.colType==="continuous"?Kt.COLORS.white:Kt.COLORS.black};
    border-color: ${e=>e.colType==="continuous"?Kt.COLORS.black:Kt.COLORS.white};
    color: ${e=>e.colType==="continuous"?Kt.COLORS.black:Kt.COLORS.white};
    -moz-user-select: none;
    -ms-user-select: none;
    -webkit-align-items: center;
    -webkit-user-select: none;
    align-items: center;
    border-radius: 10px;
    border-style: solid;
    border-width: 1px;
    box-sizing: border-box;
    cursor: default;
    display: -webkit-flex;
    display: flex;
    font-size: 12px;
    height: 20px;
    min-width: 150px;
    /* overflow-y: hidden; */
    padding: 0 10px;
    user-select: none;
    text-overflow: ellipsis;
    white-space: nowrap;
    /* --tw-ring-offset-shadow: 0 0 #0000;
  --tw-ring-shadow: 0 0 #0000;
  --tw-shadow-color: rgb(6 182 212/0.5);
  --tw-shadow: var(--tw-shadow-colored);
  --tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);
  box-shadow: var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow); */
`;function XL(e,t){return new Proxy(e,{get(n,r){return t[r]?typeof n[r]=="function"?(...i)=>t[r](i,(...o)=>n[r].call(n,...o)):t[r]([],n[r]):n[r]}})}window["__react-beautiful-dnd-disable-dev-warnings"]=!0;window["__react-beautiful-dnd-disable-scroll-hack"]=!0;const bO=G.createContext({current:null});function Yl(e){const t=G.useContext(bO);return G.useCallback(n=>{if(n===null)return e(null);const r=Object.defineProperty(n,"getBoundingClientRect",{get(){return()=>{var i;const o=(i=t.current)==null?void 0:i.getBoundingClientRect(),a=HTMLElement.prototype.getBoundingClientRect.call(n);return o?new DOMRect(a.x-o.x,a.y-o.y,a.width,a.height):a}}});e(r)},[e])}function BYe(e){return t=>{const n=G.useContext(bO),r=XL(t,{tryGetLock:(i,o)=>{const a=o(...i);return a===null?null:XL(a,{fluidLift:([s],l)=>{var u;const c=(u=n.current)==null?void 0:u.getBoundingClientRect(),d=l(c?{x:s.x-c.x,y:s.y-c.y}:s);return XL(d,{move:([f],h)=>{var m;const g=(m=n.current)==null?void 0:m.getBoundingClientRect();return h(g?{x:f.x-g.x,y:f.y-g.y}:f),d}})}})}});return e(r)}}const KYe=[eoe,noe,toe].map(BYe),lse=e=>{const t=Tt(),n=G.useRef(null),r=G.useCallback((i,o)=>{if(!i.destination){t.removeField(i.source.droppableId,i.source.index);return}const a=i.destination;if(a.droppableId===i.source.droppableId){if(a.index===i.source.index)return;t.reorderField(a.droppableId,i.source.index,a.index)}else{let s=i.source.droppableId,l=a.droppableId;t.moveField(s,i.source.index,l,a.index)}},[t]);return x.createElement(bO.Provider,{value:n},x.createElement("div",{className:"scale-100",ref:n},x.createElement(wWe,{enableDefaultSensors:!1,sensors:KYe,onDragEnd:r,onDragStart:()=>{},onDragUpdate:()=>{}},e.children)))},bv=[{id:"columns",mode:0},{id:"rows",mode:0},{id:"color",mode:1},{id:"opacity",mode:1},{id:"size",mode:1},{id:"shape",mode:1},{id:"theta",mode:1},{id:"radius",mode:1},{id:"longitude",mode:1},{id:"latitude",mode:1},{id:"geoId",mode:1},{id:"filters",mode:1},{id:"details",mode:1},{id:"text",mode:1}];var DYe=Object.defineProperty,AYe=(e,t,n)=>t in e?DYe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,LL=(e,t,n)=>(AYe(e,typeof t!="symbol"?t+"":t,n),n);let UYe=class{constructor(){LL(this,"current",this.detect()),LL(this,"handoffState","pending"),LL(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},_l=new UYe,Mn=(e,t)=>{_l.isServer?G.useEffect(e,t):G.useLayoutEffect(e,t)};function ro(e){let t=G.useRef(e);return Mn(()=>{t.current=e},[e]),t}function use(e,t){let[n,r]=G.useState(e),i=ro(e);return Mn(()=>r(i.current),[i,r,...t]),n}function cse(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Ss(){let e=[],t={addEventListener(n,r,i,o){return n.addEventListener(r,i,o),t.add(()=>n.removeEventListener(r,i,o))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return cse(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},add(n){return e.push(n),()=>{let r=e.indexOf(n);if(r>=0){let[i]=e.splice(r,1);i()}}},dispose(){for(let n of e.splice(0))n()},style(n,r,i){let o=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:o})})}};return t}function Tl(){let[e]=G.useState(Ss);return G.useEffect(()=>()=>e.dispose(),[e]),e}let Ve=function(e){let t=ro(e);return x.useCallback((...n)=>t.current(...n),[t])};function v3(){let[e,t]=G.useState(_l.isHandoffComplete);return e&&_l.isHandoffComplete===!1&&t(!1),G.useEffect(()=>{e!==!0&&t(!0)},[e]),G.useEffect(()=>_l.handoff(),[]),e}var K7;let Wr=(K7=x.useId)!=null?K7:function(){let e=v3(),[t,n]=x.useState(e?()=>_l.nextId():null);return Mn(()=>{t===null&&n(_l.nextId())},[t]),t!=null?""+t:void 0};function Qt(e,t,...n){if(e in t){let i=t[e];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Qt),r}function vh(e){return _l.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let lY=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Ei=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Ei||{}),ng=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(ng||{}),$Ye=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))($Ye||{});function p5(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(lY)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var h5=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(h5||{});function m5(e,t=0){var n;return e===((n=vh(e))==null?void 0:n.body)?!1:Qt(t,{0(){return e.matches(lY)},1(){let r=e;for(;r!==null;){if(r.matches(lY))return!0;r=r.parentElement}return!1}})}function dse(e){let t=vh(e);Ss().nextFrame(()=>{t&&!m5(t.activeElement,0)&&QYe(e)})}function QYe(e){e==null||e.focus({preventScroll:!0})}let qYe=["textarea","input"].join(",");function eTe(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,qYe))!=null?n:!1}function x3(e,t=n=>n){return e.slice().sort((n,r)=>{let i=t(n),o=t(r);if(i===null||o===null)return 0;let a=i.compareDocumentPosition(o);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function tTe(e,t){return ml(p5(),t,{relativeTo:e})}function ml(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let o=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,a=Array.isArray(e)?n?x3(e):e:p5(e);i.length>0&&a.length>1&&(a=a.filter(h=>!i.includes(h))),r=r!=null?r:o.activeElement;let s=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,a.indexOf(r))-1;if(t&4)return Math.max(0,a.indexOf(r))+1;if(t&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},c=0,d=a.length,f;do{if(c>=d||c+d<=0)return 0;let h=l+c;if(t&16)h=(h+d)%d;else{if(h<0)return 3;if(h>=d)return 1}f=a[h],f==null||f.focus(u),c+=s}while(f!==o.activeElement);return t&6&&eTe(f)&&f.select(),f.hasAttribute("tabindex")||f.setAttribute("tabindex","0"),2}function RL(e,t,n){let r=ro(t);G.useEffect(()=>{function i(o){r.current(o)}return document.addEventListener(e,i,n),()=>document.removeEventListener(e,i,n)},[e,n])}function yO(e,t,n=!0){let r=G.useRef(!1);G.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function i(a,s){if(!r.current||a.defaultPrevented)return;let l=function c(d){return typeof d=="function"?c(d()):Array.isArray(d)||d instanceof Set?d:[d]}(e),u=s(a);if(u!==null&&u.getRootNode().contains(u)){for(let c of l){if(c===null)continue;let d=c instanceof HTMLElement?c:c.current;if(d!=null&&d.contains(u)||a.composed&&a.composedPath().includes(d))return}return!m5(u,h5.Loose)&&u.tabIndex!==-1&&a.preventDefault(),t(a,u)}}let o=G.useRef(null);RL("mousedown",a=>{var s,l;r.current&&(o.current=((l=(s=a.composedPath)==null?void 0:s.call(a))==null?void 0:l[0])||a.target)},!0),RL("click",a=>{o.current&&(i(a,()=>o.current),o.current=null)},!0),RL("blur",a=>i(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function D7(e){var t;if(e.type)return e.type;let n=(t=e.as)!=null?t:"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function w3(e,t){let[n,r]=G.useState(()=>D7(e));return Mn(()=>{r(D7(e))},[e.type,e.as]),Mn(()=>{n||t.current&&t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&r("button")},[n,t]),n}let fse=Symbol();function pse(e,t=!0){return Object.assign(e,{[fse]:t})}function Gn(...e){let t=G.useRef(e);G.useEffect(()=>{t.current=e},[e]);let n=Ve(r=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return e.every(r=>r==null||(r==null?void 0:r[fse]))?void 0:n}function hse({container:e,accept:t,walk:n,enabled:r=!0}){let i=G.useRef(t),o=G.useRef(n);G.useEffect(()=>{i.current=t,o.current=n},[t,n]),Mn(()=>{if(!e||!r)return;let a=vh(e);if(!a)return;let s=i.current,l=o.current,u=Object.assign(d=>s(d),{acceptNode:s}),c=a.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,u,!1);for(;c.nextNode();)l(c.currentNode)},[e,r,i,o])}function nTe(e){throw new Error("Unexpected object: "+e)}var kn=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(kn||{});function mse(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),i=r!=null?r:-1,o=(()=>{switch(e.focus){case 0:return n.findIndex(a=>!t.resolveDisabled(a));case 1:{let a=n.slice().reverse().findIndex((s,l,u)=>i!==-1&&u.length-l-1>=i?!1:!t.resolveDisabled(s));return a===-1?a:n.length-1-a}case 2:return n.findIndex((a,s)=>s<=i?!1:!t.resolveDisabled(a));case 3:{let a=n.slice().reverse().findIndex(s=>!t.resolveDisabled(s));return a===-1?a:n.length-1-a}case 4:return n.findIndex(a=>t.resolveId(a)===e.id);case 5:return null;default:nTe(e)}})();return o===-1?r:o}function gse(...e){return e.filter(Boolean).join(" ")}var Nl=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Nl||{}),Cu=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Cu||{});function yn({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:o=!0,name:a}){let s=bse(t,e);if(o)return ES(s,n,r,a);let l=i!=null?i:0;if(l&2){let{static:u=!1,...c}=s;if(u)return ES(c,n,r,a)}if(l&1){let{unmount:u=!0,...c}=s;return Qt(u?0:1,{0(){return null},1(){return ES({...c,hidden:!0,style:{display:"none"}},n,r,a)}})}return ES(s,n,r,a)}function ES(e,t={},n,r){var i;let{as:o=n,children:a,refName:s="ref",...l}=CL(e,["unmount","static"]),u=e.ref!==void 0?{[s]:e.ref}:{},c=typeof a=="function"?a(t):a;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(t));let d={};if(t){let f=!1,h=[];for(let[m,g]of Object.entries(t))typeof g=="boolean"&&(f=!0),g===!0&&h.push(m);f&&(d["data-headlessui-state"]=h.join(" "))}if(o===G.Fragment&&Object.keys(ew(l)).length>0){if(!G.isValidElement(c)||Array.isArray(c)&&c.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(l).map(m=>`  - ${m}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(m=>`  - ${m}`).join(`
`)].join(`
`));let f=gse((i=c.props)==null?void 0:i.className,l.className),h=f?{className:f}:{};return G.cloneElement(c,Object.assign({},bse(c.props,ew(CL(l,["ref"]))),d,u,rTe(c.ref,u.ref),h))}return G.createElement(o,Object.assign({},CL(l,["ref"]),o!==G.Fragment&&u,o!==G.Fragment&&d),c)}function rTe(...e){return{ref:e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}}function bse(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(t,{[r](i,...o){let a=n[r];for(let s of a){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;s(i,...o)}}});return t}function vn(e){var t;return Object.assign(G.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function ew(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function CL(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function jp(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&iTe(n)?!1:r}function iTe(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}function vO(e={},t=null,n=[]){for(let[r,i]of Object.entries(e))vse(n,yse(t,r),i);return n}function yse(e,t){return e?e+"["+t+"]":t}function vse(e,t,n){if(Array.isArray(n))for(let[r,i]of n.entries())vse(e,yse(t,r.toString()),i);else n instanceof Date?e.push([t,n.toISOString()]):typeof n=="boolean"?e.push([t,n?"1":"0"]):typeof n=="string"?e.push([t,n]):typeof n=="number"?e.push([t,`${n}`]):n==null?e.push([t,""]):vO(n,t,e)}function xse(e){var t;let n=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(n){for(let r of n.elements)if(r.tagName==="INPUT"&&r.type==="submit"||r.tagName==="BUTTON"&&r.type==="submit"||r.nodeName==="INPUT"&&r.type==="image"){r.click();return}}}let oTe="div";var Hp=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Hp||{});function aTe(e,t){let{features:n=1,...r}=e,i={ref:t,"aria-hidden":(n&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return yn({ourProps:i,theirProps:r,slot:{},defaultTag:oTe,name:"Hidden"})}let rg=vn(aTe),xO=G.createContext(null);xO.displayName="OpenClosedContext";var Ln=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Ln||{});function ib(){return G.useContext(xO)}function Z3({value:e,children:t}){return x.createElement(xO.Provider,{value:e},t)}var et=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(et||{});function wO(e,t,n){let[r,i]=G.useState(n),o=e!==void 0,a=G.useRef(o),s=G.useRef(!1),l=G.useRef(!1);return o&&!a.current&&!s.current?(s.current=!0,a.current=o,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!o&&a.current&&!l.current&&(l.current=!0,a.current=o,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[o?e:r,Ve(u=>(o||i(u),t==null?void 0:t(u)))]}function A7(e){return[e.screenX,e.screenY]}function wse(){let e=G.useRef([-1,-1]);return{wasMoved(t){let n=A7(t);return e.current[0]===n[0]&&e.current[1]===n[1]?!1:(e.current=n,!0)},update(t){e.current=A7(t)}}}function sTe(e,t,n){let r=ro(t);G.useEffect(()=>{function i(o){r.current(o)}return window.addEventListener(e,i,n),()=>window.removeEventListener(e,i,n)},[e,n])}var Vu=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Vu||{});function Zse(){let e=G.useRef(0);return sTe("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Sse(){let e=G.useRef(!1);return Mn(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function ob(...e){return G.useMemo(()=>vh(...e),[...e])}function lTe(e,t,n,r){let i=ro(n);G.useEffect(()=>{e=e!=null?e:window;function o(a){i.current(a)}return e.addEventListener(t,o,r),()=>e.removeEventListener(t,o,r)},[e,t,r])}let uTe=G.createContext(!1);function cTe(){return G.useContext(uTe)}function dTe(e){let t=cTe(),n=G.useContext(kse),r=ob(e),[i,o]=G.useState(()=>{if(!t&&n!==null||_l.isServer)return null;let a=r==null?void 0:r.getElementById("headlessui-portal-root");if(a)return a;if(r===null)return null;let s=r.createElement("div");return s.setAttribute("id","headlessui-portal-root"),r.body.appendChild(s)});return G.useEffect(()=>{i!==null&&(r!=null&&r.body.contains(i)||r==null||r.body.appendChild(i))},[i,r]),G.useEffect(()=>{t||n!==null&&o(n.current)},[n,o,t]),i}let fTe=G.Fragment;function pTe(e,t){let n=e,r=G.useRef(null),i=Gn(pse(c=>{r.current=c}),t),o=ob(r),a=dTe(r),[s]=G.useState(()=>{var c;return _l.isServer?null:(c=o==null?void 0:o.createElement("div"))!=null?c:null}),l=v3(),u=G.useRef(!1);return Mn(()=>{if(u.current=!1,!(!a||!s))return a.contains(s)||(s.setAttribute("data-headlessui-portal",""),a.appendChild(s)),()=>{u.current=!0,cse(()=>{var c;u.current&&(!a||!s||(s instanceof Node&&a.contains(s)&&a.removeChild(s),a.childNodes.length<=0&&((c=a.parentElement)==null||c.removeChild(a))))})}},[a,s]),l?!a||!s?null:qn.createPortal(yn({ourProps:{ref:i},theirProps:n,defaultTag:fTe,name:"Portal"}),s):null}let hTe=G.Fragment,kse=G.createContext(null);function mTe(e,t){let{target:n,...r}=e,i={ref:Gn(t)};return x.createElement(kse.Provider,{value:n},yn({ourProps:i,theirProps:r,defaultTag:hTe,name:"Popover.Group"}))}let gTe=vn(pTe),bTe=vn(mTe),yTe=Object.assign(gTe,{Group:bTe}),_se=G.createContext(null);function Gse(){let e=G.useContext(_se);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Gse),t}return e}function ZO(){let[e,t]=G.useState([]);return[e.length>0?e.join(" "):void 0,G.useMemo(()=>function(n){let r=Ve(o=>(t(a=>[...a,o]),()=>t(a=>{let s=a.slice(),l=s.indexOf(o);return l!==-1&&s.splice(l,1),s}))),i=G.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return x.createElement(_se.Provider,{value:i},n.children)},[t])]}let vTe="p";function xTe(e,t){let n=Wr(),{id:r=`headlessui-description-${n}`,...i}=e,o=Gse(),a=Gn(t);Mn(()=>o.register(r),[r,o.register]);let s={ref:a,...o.props,id:r};return yn({ourProps:s,theirProps:i,slot:o.slot||{},defaultTag:vTe,name:o.name||"Description"})}let wTe=vn(xTe),Ise=Object.assign(wTe,{});var ZTe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ZTe||{}),STe=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(STe||{}),kTe=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(kTe||{}),_Te=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.RegisterLabel=7]="RegisterLabel",e))(_Te||{});function VL(e,t=n=>n){let n=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,r=x3(t(e.options.slice()),o=>o.dataRef.current.domRef.current),i=n?r.indexOf(n):null;return i===-1&&(i=null),{options:r,activeOptionIndex:i}}let GTe={1(e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},0(e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let t=e.activeOptionIndex,{isSelected:n}=e.dataRef.current,r=e.options.findIndex(i=>n(i.dataRef.current.value));return r!==-1&&(t=r),{...e,listboxState:0,activeOptionIndex:t}},2(e,t){var n;if(e.dataRef.current.disabled||e.listboxState===1)return e;let r=VL(e),i=mse(t,{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:o=>o.id,resolveDisabled:o=>o.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeOptionIndex:i,activationTrigger:(n=t.trigger)!=null?n:1}},3:(e,t)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let n=e.searchQuery!==""?0:1,r=e.searchQuery+t.value.toLowerCase(),i=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+n).concat(e.options.slice(0,e.activeOptionIndex+n)):e.options).find(a=>{var s;return!a.dataRef.current.disabled&&((s=a.dataRef.current.textValue)==null?void 0:s.startsWith(r))}),o=i?e.options.indexOf(i):-1;return o===-1||o===e.activeOptionIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeOptionIndex:o,activationTrigger:1}},4(e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},5:(e,t)=>{let n={id:t.id,dataRef:t.dataRef},r=VL(e,i=>[...i,n]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(t.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(n)),{...e,...r}},6:(e,t)=>{let n=VL(e,r=>{let i=r.findIndex(o=>o.id===t.id);return i!==-1&&r.splice(i,1),r});return{...e,...n,activationTrigger:1}},7:(e,t)=>({...e,labelId:t.id})},SO=G.createContext(null);SO.displayName="ListboxActionsContext";function g5(e){let t=G.useContext(SO);if(t===null){let n=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,g5),n}return t}let kO=G.createContext(null);kO.displayName="ListboxDataContext";function b5(e){let t=G.useContext(kO);if(t===null){let n=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,b5),n}return t}function ITe(e,t){return Qt(t.type,GTe,e,t)}let WTe=G.Fragment;function ETe(e,t){let{value:n,defaultValue:r,name:i,onChange:o,by:a=(D,$)=>D===$,disabled:s=!1,horizontal:l=!1,multiple:u=!1,...c}=e;const d=l?"horizontal":"vertical";let f=Gn(t),[h=u?[]:void 0,m]=wO(n,o,r),[g,y]=G.useReducer(ITe,{dataRef:G.createRef(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),v=G.useRef({static:!1,hold:!1}),w=G.useRef(null),Z=G.useRef(null),k=G.useRef(null),_=Ve(typeof a=="string"?(D,$)=>{let Q=a;return(D==null?void 0:D[Q])===($==null?void 0:$[Q])}:a),R=G.useCallback(D=>Qt(I.mode,{1:()=>h.some($=>_($,D)),0:()=>_(h,D)}),[h]),I=G.useMemo(()=>({...g,value:h,disabled:s,mode:u?1:0,orientation:d,compare:_,isSelected:R,optionsPropsRef:v,labelRef:w,buttonRef:Z,optionsRef:k}),[h,s,u,g]);Mn(()=>{g.dataRef.current=I},[I]),yO([I.buttonRef,I.optionsRef],(D,$)=>{var Q;y({type:1}),m5($,h5.Loose)||(D.preventDefault(),(Q=I.buttonRef.current)==null||Q.focus())},I.listboxState===0);let E=G.useMemo(()=>({open:I.listboxState===0,disabled:s,value:h}),[I,s,h]),X=Ve(D=>{let $=I.options.find(Q=>Q.id===D);$&&P($.dataRef.current.value)}),Y=Ve(()=>{if(I.activeOptionIndex!==null){let{dataRef:D,id:$}=I.options[I.activeOptionIndex];P(D.current.value),y({type:2,focus:kn.Specific,id:$})}}),C=Ve(()=>y({type:0})),N=Ve(()=>y({type:1})),V=Ve((D,$,Q)=>D===kn.Specific?y({type:2,focus:kn.Specific,id:$,trigger:Q}):y({type:2,focus:D,trigger:Q})),F=Ve((D,$)=>(y({type:5,id:D,dataRef:$}),()=>y({type:6,id:D}))),O=Ve(D=>(y({type:7,id:D}),()=>y({type:7,id:null}))),P=Ve(D=>Qt(I.mode,{0(){return m==null?void 0:m(D)},1(){let $=I.value.slice(),Q=$.findIndex(B=>_(B,D));return Q===-1?$.push(D):$.splice(Q,1),m==null?void 0:m($)}})),H=Ve(D=>y({type:3,value:D})),M=Ve(()=>y({type:4})),j=G.useMemo(()=>({onChange:P,registerOption:F,registerLabel:O,goToOption:V,closeListbox:N,openListbox:C,selectActiveOption:Y,selectOption:X,search:H,clearSearch:M}),[]),J={ref:f},q=G.useRef(null),K=Tl();return G.useEffect(()=>{q.current&&r!==void 0&&K.addEventListener(q.current,"reset",()=>{P(r)})},[q,P]),x.createElement(SO.Provider,{value:j},x.createElement(kO.Provider,{value:I},x.createElement(Z3,{value:Qt(I.listboxState,{0:Ln.Open,1:Ln.Closed})},i!=null&&h!=null&&vO({[i]:h}).map(([D,$],Q)=>x.createElement(rg,{features:Hp.Hidden,ref:Q===0?B=>{var pe;q.current=(pe=B==null?void 0:B.closest("form"))!=null?pe:null}:void 0,...ew({key:D,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:D,value:$})})),yn({ourProps:J,theirProps:c,slot:E,defaultTag:WTe,name:"Listbox"}))))}let XTe="button";function LTe(e,t){var n;let r=Wr(),{id:i=`headlessui-listbox-button-${r}`,...o}=e,a=b5("Listbox.Button"),s=g5("Listbox.Button"),l=Gn(a.buttonRef,t),u=Tl(),c=Ve(y=>{switch(y.key){case et.Space:case et.Enter:case et.ArrowDown:y.preventDefault(),s.openListbox(),u.nextFrame(()=>{a.value||s.goToOption(kn.First)});break;case et.ArrowUp:y.preventDefault(),s.openListbox(),u.nextFrame(()=>{a.value||s.goToOption(kn.Last)});break}}),d=Ve(y=>{switch(y.key){case et.Space:y.preventDefault();break}}),f=Ve(y=>{if(jp(y.currentTarget))return y.preventDefault();a.listboxState===0?(s.closeListbox(),u.nextFrame(()=>{var v;return(v=a.buttonRef.current)==null?void 0:v.focus({preventScroll:!0})})):(y.preventDefault(),s.openListbox())}),h=use(()=>{if(a.labelId)return[a.labelId,i].join(" ")},[a.labelId,i]),m=G.useMemo(()=>({open:a.listboxState===0,disabled:a.disabled,value:a.value}),[a]),g={ref:l,id:i,type:w3(e,a.buttonRef),"aria-haspopup":"listbox","aria-controls":(n=a.optionsRef.current)==null?void 0:n.id,"aria-expanded":a.disabled?void 0:a.listboxState===0,"aria-labelledby":h,disabled:a.disabled,onKeyDown:c,onKeyUp:d,onClick:f};return yn({ourProps:g,theirProps:o,slot:m,defaultTag:XTe,name:"Listbox.Button"})}let RTe="label";function CTe(e,t){let n=Wr(),{id:r=`headlessui-listbox-label-${n}`,...i}=e,o=b5("Listbox.Label"),a=g5("Listbox.Label"),s=Gn(o.labelRef,t);Mn(()=>a.registerLabel(r),[r]);let l=Ve(()=>{var c;return(c=o.buttonRef.current)==null?void 0:c.focus({preventScroll:!0})}),u=G.useMemo(()=>({open:o.listboxState===0,disabled:o.disabled}),[o]);return yn({ourProps:{ref:s,id:r,onClick:l},theirProps:i,slot:u,defaultTag:RTe,name:"Listbox.Label"})}let VTe="ul",YTe=Nl.RenderStrategy|Nl.Static;function TTe(e,t){var n;let r=Wr(),{id:i=`headlessui-listbox-options-${r}`,...o}=e,a=b5("Listbox.Options"),s=g5("Listbox.Options"),l=Gn(a.optionsRef,t),u=Tl(),c=Tl(),d=ib(),f=d!==null?(d&Ln.Open)===Ln.Open:a.listboxState===0;G.useEffect(()=>{var v;let w=a.optionsRef.current;w&&a.listboxState===0&&w!==((v=vh(w))==null?void 0:v.activeElement)&&w.focus({preventScroll:!0})},[a.listboxState,a.optionsRef]);let h=Ve(v=>{switch(c.dispose(),v.key){case et.Space:if(a.searchQuery!=="")return v.preventDefault(),v.stopPropagation(),s.search(v.key);case et.Enter:if(v.preventDefault(),v.stopPropagation(),a.activeOptionIndex!==null){let{dataRef:w}=a.options[a.activeOptionIndex];s.onChange(w.current.value)}a.mode===0&&(s.closeListbox(),Ss().nextFrame(()=>{var w;return(w=a.buttonRef.current)==null?void 0:w.focus({preventScroll:!0})}));break;case Qt(a.orientation,{vertical:et.ArrowDown,horizontal:et.ArrowRight}):return v.preventDefault(),v.stopPropagation(),s.goToOption(kn.Next);case Qt(a.orientation,{vertical:et.ArrowUp,horizontal:et.ArrowLeft}):return v.preventDefault(),v.stopPropagation(),s.goToOption(kn.Previous);case et.Home:case et.PageUp:return v.preventDefault(),v.stopPropagation(),s.goToOption(kn.First);case et.End:case et.PageDown:return v.preventDefault(),v.stopPropagation(),s.goToOption(kn.Last);case et.Escape:return v.preventDefault(),v.stopPropagation(),s.closeListbox(),u.nextFrame(()=>{var w;return(w=a.buttonRef.current)==null?void 0:w.focus({preventScroll:!0})});case et.Tab:v.preventDefault(),v.stopPropagation();break;default:v.key.length===1&&(s.search(v.key),c.setTimeout(()=>s.clearSearch(),350));break}}),m=use(()=>{var v,w,Z;return(Z=(v=a.labelRef.current)==null?void 0:v.id)!=null?Z:(w=a.buttonRef.current)==null?void 0:w.id},[a.labelRef.current,a.buttonRef.current]),g=G.useMemo(()=>({open:a.listboxState===0}),[a]),y={"aria-activedescendant":a.activeOptionIndex===null||(n=a.options[a.activeOptionIndex])==null?void 0:n.id,"aria-multiselectable":a.mode===1?!0:void 0,"aria-labelledby":m,"aria-orientation":a.orientation,id:i,onKeyDown:h,role:"listbox",tabIndex:0,ref:l};return yn({ourProps:y,theirProps:o,slot:g,defaultTag:VTe,features:YTe,visible:f,name:"Listbox.Options"})}let NTe="li";function FTe(e,t){let n=Wr(),{id:r=`headlessui-listbox-option-${n}`,disabled:i=!1,value:o,...a}=e,s=b5("Listbox.Option"),l=g5("Listbox.Option"),u=s.activeOptionIndex!==null?s.options[s.activeOptionIndex].id===r:!1,c=s.isSelected(o),d=G.useRef(null),f=ro({disabled:i,value:o,domRef:d,get textValue(){var _,R;return(R=(_=d.current)==null?void 0:_.textContent)==null?void 0:R.toLowerCase()}}),h=Gn(t,d);Mn(()=>{if(s.listboxState!==0||!u||s.activationTrigger===0)return;let _=Ss();return _.requestAnimationFrame(()=>{var R,I;(I=(R=d.current)==null?void 0:R.scrollIntoView)==null||I.call(R,{block:"nearest"})}),_.dispose},[d,u,s.listboxState,s.activationTrigger,s.activeOptionIndex]),Mn(()=>l.registerOption(r,f),[f,r]);let m=Ve(_=>{if(i)return _.preventDefault();l.onChange(o),s.mode===0&&(l.closeListbox(),Ss().nextFrame(()=>{var R;return(R=s.buttonRef.current)==null?void 0:R.focus({preventScroll:!0})}))}),g=Ve(()=>{if(i)return l.goToOption(kn.Nothing);l.goToOption(kn.Specific,r)}),y=wse(),v=Ve(_=>y.update(_)),w=Ve(_=>{y.wasMoved(_)&&(i||u||l.goToOption(kn.Specific,r,0))}),Z=Ve(_=>{y.wasMoved(_)&&(i||u&&l.goToOption(kn.Nothing))}),k=G.useMemo(()=>({active:u,selected:c,disabled:i}),[u,c,i]);return yn({ourProps:{id:r,ref:h,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":c,disabled:void 0,onClick:m,onFocus:g,onPointerEnter:v,onMouseEnter:v,onPointerMove:w,onMouseMove:w,onPointerLeave:Z,onMouseLeave:Z},theirProps:a,slot:k,defaultTag:NTe,name:"Listbox.Option"})}let MTe=vn(ETe),OTe=vn(LTe),zTe=vn(CTe),PTe=vn(TTe),jTe=vn(FTe),$c=Object.assign(MTe,{Button:OTe,Label:zTe,Options:PTe,Option:jTe});var HTe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(HTe||{}),JTe=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(JTe||{}),BTe=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(BTe||{});function YL(e,t=n=>n){let n=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=x3(t(e.items.slice()),o=>o.dataRef.current.domRef.current),i=n?r.indexOf(n):null;return i===-1&&(i=null),{items:r,activeItemIndex:i}}let KTe={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,menuState:0}},2:(e,t)=>{var n;let r=YL(e),i=mse(t,{resolveItems:()=>r.items,resolveActiveIndex:()=>r.activeItemIndex,resolveId:o=>o.id,resolveDisabled:o=>o.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeItemIndex:i,activationTrigger:(n=t.trigger)!=null?n:1}},3:(e,t)=>{let n=e.searchQuery!==""?0:1,r=e.searchQuery+t.value.toLowerCase(),i=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find(a=>{var s;return((s=a.dataRef.current.textValue)==null?void 0:s.startsWith(r))&&!a.dataRef.current.disabled}),o=i?e.items.indexOf(i):-1;return o===-1||o===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:o,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let n=YL(e,r=>[...r,{id:t.id,dataRef:t.dataRef}]);return{...e,...n}},6:(e,t)=>{let n=YL(e,r=>{let i=r.findIndex(o=>o.id===t.id);return i!==-1&&r.splice(i,1),r});return{...e,...n,activationTrigger:1}}},_O=G.createContext(null);_O.displayName="MenuContext";function S3(e){let t=G.useContext(_O);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,S3),n}return t}function DTe(e,t){return Qt(t.type,KTe,e,t)}let ATe=G.Fragment;function UTe(e,t){let n=G.useReducer(DTe,{menuState:1,buttonRef:G.createRef(),itemsRef:G.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:r,itemsRef:i,buttonRef:o},a]=n,s=Gn(t);yO([o,i],(f,h)=>{var m;a({type:1}),m5(h,h5.Loose)||(f.preventDefault(),(m=o.current)==null||m.focus())},r===0);let l=Ve(()=>{a({type:1})}),u=G.useMemo(()=>({open:r===0,close:l}),[r,l]),c=e,d={ref:s};return x.createElement(_O.Provider,{value:n},x.createElement(Z3,{value:Qt(r,{0:Ln.Open,1:Ln.Closed})},yn({ourProps:d,theirProps:c,slot:u,defaultTag:ATe,name:"Menu"})))}let $Te="button";function QTe(e,t){var n;let r=Wr(),{id:i=`headlessui-menu-button-${r}`,...o}=e,[a,s]=S3("Menu.Button"),l=Gn(a.buttonRef,t),u=Tl(),c=Ve(g=>{switch(g.key){case et.Space:case et.Enter:case et.ArrowDown:g.preventDefault(),g.stopPropagation(),s({type:0}),u.nextFrame(()=>s({type:2,focus:kn.First}));break;case et.ArrowUp:g.preventDefault(),g.stopPropagation(),s({type:0}),u.nextFrame(()=>s({type:2,focus:kn.Last}));break}}),d=Ve(g=>{switch(g.key){case et.Space:g.preventDefault();break}}),f=Ve(g=>{if(jp(g.currentTarget))return g.preventDefault();e.disabled||(a.menuState===0?(s({type:1}),u.nextFrame(()=>{var y;return(y=a.buttonRef.current)==null?void 0:y.focus({preventScroll:!0})})):(g.preventDefault(),s({type:0})))}),h=G.useMemo(()=>({open:a.menuState===0}),[a]),m={ref:l,id:i,type:w3(e,a.buttonRef),"aria-haspopup":"menu","aria-controls":(n=a.itemsRef.current)==null?void 0:n.id,"aria-expanded":e.disabled?void 0:a.menuState===0,onKeyDown:c,onKeyUp:d,onClick:f};return yn({ourProps:m,theirProps:o,slot:h,defaultTag:$Te,name:"Menu.Button"})}let qTe="div",eNe=Nl.RenderStrategy|Nl.Static;function tNe(e,t){var n,r;let i=Wr(),{id:o=`headlessui-menu-items-${i}`,...a}=e,[s,l]=S3("Menu.Items"),u=Gn(s.itemsRef,t),c=ob(s.itemsRef),d=Tl(),f=ib(),h=f!==null?(f&Ln.Open)===Ln.Open:s.menuState===0;G.useEffect(()=>{let w=s.itemsRef.current;w&&s.menuState===0&&w!==(c==null?void 0:c.activeElement)&&w.focus({preventScroll:!0})},[s.menuState,s.itemsRef,c]),hse({container:s.itemsRef.current,enabled:s.menuState===0,accept(w){return w.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:w.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(w){w.setAttribute("role","none")}});let m=Ve(w=>{var Z,k;switch(d.dispose(),w.key){case et.Space:if(s.searchQuery!=="")return w.preventDefault(),w.stopPropagation(),l({type:3,value:w.key});case et.Enter:if(w.preventDefault(),w.stopPropagation(),l({type:1}),s.activeItemIndex!==null){let{dataRef:_}=s.items[s.activeItemIndex];(k=(Z=_.current)==null?void 0:Z.domRef.current)==null||k.click()}dse(s.buttonRef.current);break;case et.ArrowDown:return w.preventDefault(),w.stopPropagation(),l({type:2,focus:kn.Next});case et.ArrowUp:return w.preventDefault(),w.stopPropagation(),l({type:2,focus:kn.Previous});case et.Home:case et.PageUp:return w.preventDefault(),w.stopPropagation(),l({type:2,focus:kn.First});case et.End:case et.PageDown:return w.preventDefault(),w.stopPropagation(),l({type:2,focus:kn.Last});case et.Escape:w.preventDefault(),w.stopPropagation(),l({type:1}),Ss().nextFrame(()=>{var _;return(_=s.buttonRef.current)==null?void 0:_.focus({preventScroll:!0})});break;case et.Tab:w.preventDefault(),w.stopPropagation(),l({type:1}),Ss().nextFrame(()=>{tTe(s.buttonRef.current,w.shiftKey?Ei.Previous:Ei.Next)});break;default:w.key.length===1&&(l({type:3,value:w.key}),d.setTimeout(()=>l({type:4}),350));break}}),g=Ve(w=>{switch(w.key){case et.Space:w.preventDefault();break}}),y=G.useMemo(()=>({open:s.menuState===0}),[s]),v={"aria-activedescendant":s.activeItemIndex===null||(n=s.items[s.activeItemIndex])==null?void 0:n.id,"aria-labelledby":(r=s.buttonRef.current)==null?void 0:r.id,id:o,onKeyDown:m,onKeyUp:g,role:"menu",tabIndex:0,ref:u};return yn({ourProps:v,theirProps:a,slot:y,defaultTag:qTe,features:eNe,visible:h,name:"Menu.Items"})}let nNe=G.Fragment;function rNe(e,t){let n=Wr(),{id:r=`headlessui-menu-item-${n}`,disabled:i=!1,...o}=e,[a,s]=S3("Menu.Item"),l=a.activeItemIndex!==null?a.items[a.activeItemIndex].id===r:!1,u=G.useRef(null),c=Gn(t,u);Mn(()=>{if(a.menuState!==0||!l||a.activationTrigger===0)return;let k=Ss();return k.requestAnimationFrame(()=>{var _,R;(R=(_=u.current)==null?void 0:_.scrollIntoView)==null||R.call(_,{block:"nearest"})}),k.dispose},[u,l,a.menuState,a.activationTrigger,a.activeItemIndex]);let d=G.useRef({disabled:i,domRef:u});Mn(()=>{d.current.disabled=i},[d,i]),Mn(()=>{var k,_;d.current.textValue=(_=(k=u.current)==null?void 0:k.textContent)==null?void 0:_.toLowerCase()},[d,u]),Mn(()=>(s({type:5,id:r,dataRef:d}),()=>s({type:6,id:r})),[d,r]);let f=Ve(()=>{s({type:1})}),h=Ve(k=>{if(i)return k.preventDefault();s({type:1}),dse(a.buttonRef.current)}),m=Ve(()=>{if(i)return s({type:2,focus:kn.Nothing});s({type:2,focus:kn.Specific,id:r})}),g=wse(),y=Ve(k=>g.update(k)),v=Ve(k=>{g.wasMoved(k)&&(i||l||s({type:2,focus:kn.Specific,id:r,trigger:0}))}),w=Ve(k=>{g.wasMoved(k)&&(i||l&&s({type:2,focus:kn.Nothing}))}),Z=G.useMemo(()=>({active:l,disabled:i,close:f}),[l,i,f]);return yn({ourProps:{id:r,ref:c,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,disabled:void 0,onClick:h,onFocus:m,onPointerEnter:y,onMouseEnter:y,onPointerMove:v,onMouseMove:v,onPointerLeave:w,onMouseLeave:w},theirProps:o,slot:Z,defaultTag:nNe,name:"Menu.Item"})}let iNe=vn(UTe),oNe=vn(QTe),aNe=vn(tNe),sNe=vn(rNe),pp=Object.assign(iNe,{Button:oNe,Items:aNe,Item:sNe});var lNe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(lNe||{}),uNe=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(uNe||{});let cNe={0:e=>({...e,popoverState:Qt(e.popoverState,{0:1,1:0})}),1(e){return e.popoverState===1?e:{...e,popoverState:1}},2(e,t){return e.button===t.button?e:{...e,button:t.button}},3(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},4(e,t){return e.panel===t.panel?e:{...e,panel:t.panel}},5(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},GO=G.createContext(null);GO.displayName="PopoverContext";function k3(e){let t=G.useContext(GO);if(t===null){let n=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,k3),n}return t}let IO=G.createContext(null);IO.displayName="PopoverAPIContext";function WO(e){let t=G.useContext(IO);if(t===null){let n=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,WO),n}return t}let EO=G.createContext(null);EO.displayName="PopoverGroupContext";function Wse(){return G.useContext(EO)}let XO=G.createContext(null);XO.displayName="PopoverPanelContext";function dNe(){return G.useContext(XO)}function fNe(e,t){return Qt(t.type,cNe,e,t)}let pNe="div";function hNe(e,t){var n;let r=G.useRef(null),i=Gn(t,pse(N=>{r.current=N})),o=G.useRef([]),a=G.useReducer(fNe,{popoverState:1,buttons:o,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:G.createRef(),afterPanelSentinel:G.createRef()}),[{popoverState:s,button:l,buttonId:u,panel:c,panelId:d,beforePanelSentinel:f,afterPanelSentinel:h},m]=a,g=ob((n=r.current)!=null?n:l),y=G.useMemo(()=>{if(!l||!c)return!1;for(let M of document.querySelectorAll("body > *"))if(Number(M==null?void 0:M.contains(l))^Number(M==null?void 0:M.contains(c)))return!0;let N=p5(),V=N.indexOf(l),F=(V+N.length-1)%N.length,O=(V+1)%N.length,P=N[F],H=N[O];return!c.contains(P)&&!c.contains(H)},[l,c]),v=ro(u),w=ro(d),Z=G.useMemo(()=>({buttonId:v,panelId:w,close:()=>m({type:1})}),[v,w,m]),k=Wse(),_=k==null?void 0:k.registerPopover,R=Ve(()=>{var N;return(N=k==null?void 0:k.isFocusWithinPopoverGroup())!=null?N:(g==null?void 0:g.activeElement)&&((l==null?void 0:l.contains(g.activeElement))||(c==null?void 0:c.contains(g.activeElement)))});G.useEffect(()=>_==null?void 0:_(Z),[_,Z]),lTe(g==null?void 0:g.defaultView,"focus",N=>{var V,F,O,P;s===0&&(R()||l&&c&&N.target!==window&&((F=(V=f.current)==null?void 0:V.contains)!=null&&F.call(V,N.target)||(P=(O=h.current)==null?void 0:O.contains)!=null&&P.call(O,N.target)||m({type:1})))},!0),yO([l,c],(N,V)=>{m({type:1}),m5(V,h5.Loose)||(N.preventDefault(),l==null||l.focus())},s===0);let I=Ve(N=>{m({type:1});let V=N?N instanceof HTMLElement?N:"current"in N&&N.current instanceof HTMLElement?N.current:l:l;V==null||V.focus()}),E=G.useMemo(()=>({close:I,isPortalled:y}),[I,y]),X=G.useMemo(()=>({open:s===0,close:I}),[s,I]),Y=e,C={ref:i};return x.createElement(GO.Provider,{value:a},x.createElement(IO.Provider,{value:E},x.createElement(Z3,{value:Qt(s,{0:Ln.Open,1:Ln.Closed})},yn({ourProps:C,theirProps:Y,slot:X,defaultTag:pNe,name:"Popover"}))))}let mNe="button";function gNe(e,t){let n=Wr(),{id:r=`headlessui-popover-button-${n}`,...i}=e,[o,a]=k3("Popover.Button"),{isPortalled:s}=WO("Popover.Button"),l=G.useRef(null),u=`headlessui-focus-sentinel-${Wr()}`,c=Wse(),d=c==null?void 0:c.closeOthers,f=dNe(),h=f===null?!1:f===o.panelId;G.useEffect(()=>{if(!h)return a({type:3,buttonId:r}),()=>{a({type:3,buttonId:null})}},[h,r,a]);let[m]=G.useState(()=>Symbol()),g=Gn(l,t,h?null:N=>{if(N)o.buttons.current.push(m);else{let V=o.buttons.current.indexOf(m);V!==-1&&o.buttons.current.splice(V,1)}o.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),N&&a({type:2,button:N})}),y=Gn(l,t),v=ob(l),w=Ve(N=>{var V,F,O;if(h){if(o.popoverState===1)return;switch(N.key){case et.Space:case et.Enter:N.preventDefault(),(F=(V=N.target).click)==null||F.call(V),a({type:1}),(O=o.button)==null||O.focus();break}}else switch(N.key){case et.Space:case et.Enter:N.preventDefault(),N.stopPropagation(),o.popoverState===1&&(d==null||d(o.buttonId)),a({type:0});break;case et.Escape:if(o.popoverState!==0)return d==null?void 0:d(o.buttonId);if(!l.current||v!=null&&v.activeElement&&!l.current.contains(v.activeElement))return;N.preventDefault(),N.stopPropagation(),a({type:1});break}}),Z=Ve(N=>{h||N.key===et.Space&&N.preventDefault()}),k=Ve(N=>{var V,F;jp(N.currentTarget)||e.disabled||(h?(a({type:1}),(V=o.button)==null||V.focus()):(N.preventDefault(),N.stopPropagation(),o.popoverState===1&&(d==null||d(o.buttonId)),a({type:0}),(F=o.button)==null||F.focus()))}),_=Ve(N=>{N.preventDefault(),N.stopPropagation()}),R=o.popoverState===0,I=G.useMemo(()=>({open:R}),[R]),E=w3(e,l),X=h?{ref:y,type:E,onKeyDown:w,onClick:k}:{ref:g,id:o.buttonId,type:E,"aria-expanded":e.disabled?void 0:o.popoverState===0,"aria-controls":o.panel?o.panelId:void 0,onKeyDown:w,onKeyUp:Z,onClick:k,onMouseDown:_},Y=Zse(),C=Ve(()=>{let N=o.panel;if(!N)return;function V(){Qt(Y.current,{[Vu.Forwards]:()=>ml(N,Ei.First),[Vu.Backwards]:()=>ml(N,Ei.Last)})===ng.Error&&ml(p5().filter(F=>F.dataset.headlessuiFocusGuard!=="true"),Qt(Y.current,{[Vu.Forwards]:Ei.Next,[Vu.Backwards]:Ei.Previous}),{relativeTo:o.button})}V()});return x.createElement(x.Fragment,null,yn({ourProps:X,theirProps:i,slot:I,defaultTag:mNe,name:"Popover.Button"}),R&&!h&&s&&x.createElement(rg,{id:u,features:Hp.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:C}))}let bNe="div",yNe=Nl.RenderStrategy|Nl.Static;function vNe(e,t){let n=Wr(),{id:r=`headlessui-popover-overlay-${n}`,...i}=e,[{popoverState:o},a]=k3("Popover.Overlay"),s=Gn(t),l=ib(),u=l!==null?(l&Ln.Open)===Ln.Open:o===0,c=Ve(f=>{if(jp(f.currentTarget))return f.preventDefault();a({type:1})}),d=G.useMemo(()=>({open:o===0}),[o]);return yn({ourProps:{ref:s,id:r,"aria-hidden":!0,onClick:c},theirProps:i,slot:d,defaultTag:bNe,features:yNe,visible:u,name:"Popover.Overlay"})}let xNe="div",wNe=Nl.RenderStrategy|Nl.Static;function ZNe(e,t){let n=Wr(),{id:r=`headlessui-popover-panel-${n}`,focus:i=!1,...o}=e,[a,s]=k3("Popover.Panel"),{close:l,isPortalled:u}=WO("Popover.Panel"),c=`headlessui-focus-sentinel-before-${Wr()}`,d=`headlessui-focus-sentinel-after-${Wr()}`,f=G.useRef(null),h=Gn(f,t,I=>{s({type:4,panel:I})}),m=ob(f);Mn(()=>(s({type:5,panelId:r}),()=>{s({type:5,panelId:null})}),[r,s]);let g=ib(),y=g!==null?(g&Ln.Open)===Ln.Open:a.popoverState===0,v=Ve(I=>{var E;switch(I.key){case et.Escape:if(a.popoverState!==0||!f.current||m!=null&&m.activeElement&&!f.current.contains(m.activeElement))return;I.preventDefault(),I.stopPropagation(),s({type:1}),(E=a.button)==null||E.focus();break}});G.useEffect(()=>{var I;e.static||a.popoverState===1&&((I=e.unmount)==null||I)&&s({type:4,panel:null})},[a.popoverState,e.unmount,e.static,s]),G.useEffect(()=>{if(!i||a.popoverState!==0||!f.current)return;let I=m==null?void 0:m.activeElement;f.current.contains(I)||ml(f.current,Ei.First)},[i,f,a.popoverState]);let w=G.useMemo(()=>({open:a.popoverState===0,close:l}),[a,l]),Z={ref:h,id:r,onKeyDown:v,onBlur:i&&a.popoverState===0?I=>{var E,X,Y,C,N;let V=I.relatedTarget;V&&f.current&&((E=f.current)!=null&&E.contains(V)||(s({type:1}),((Y=(X=a.beforePanelSentinel.current)==null?void 0:X.contains)!=null&&Y.call(X,V)||(N=(C=a.afterPanelSentinel.current)==null?void 0:C.contains)!=null&&N.call(C,V))&&V.focus({preventScroll:!0})))}:void 0,tabIndex:-1},k=Zse(),_=Ve(()=>{let I=f.current;if(!I)return;function E(){Qt(k.current,{[Vu.Forwards]:()=>{var X;ml(I,Ei.First)===ng.Error&&((X=a.afterPanelSentinel.current)==null||X.focus())},[Vu.Backwards]:()=>{var X;(X=a.button)==null||X.focus({preventScroll:!0})}})}E()}),R=Ve(()=>{let I=f.current;if(!I)return;function E(){Qt(k.current,{[Vu.Forwards]:()=>{var X;if(!a.button)return;let Y=p5(),C=Y.indexOf(a.button),N=Y.slice(0,C+1),V=[...Y.slice(C+1),...N];for(let F of V.slice())if(F.dataset.headlessuiFocusGuard==="true"||(X=a.panel)!=null&&X.contains(F)){let O=V.indexOf(F);O!==-1&&V.splice(O,1)}ml(V,Ei.First,{sorted:!1})},[Vu.Backwards]:()=>{var X;ml(I,Ei.Previous)===ng.Error&&((X=a.button)==null||X.focus())}})}E()});return x.createElement(XO.Provider,{value:r},y&&u&&x.createElement(rg,{id:c,ref:a.beforePanelSentinel,features:Hp.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:_}),yn({ourProps:Z,theirProps:o,slot:w,defaultTag:xNe,features:wNe,visible:y,name:"Popover.Panel"}),y&&u&&x.createElement(rg,{id:d,ref:a.afterPanelSentinel,features:Hp.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:R}))}let SNe="div";function kNe(e,t){let n=G.useRef(null),r=Gn(n,t),[i,o]=G.useState([]),a=Ve(m=>{o(g=>{let y=g.indexOf(m);if(y!==-1){let v=g.slice();return v.splice(y,1),v}return g})}),s=Ve(m=>(o(g=>[...g,m]),()=>a(m))),l=Ve(()=>{var m;let g=vh(n);if(!g)return!1;let y=g.activeElement;return(m=n.current)!=null&&m.contains(y)?!0:i.some(v=>{var w,Z;return((w=g.getElementById(v.buttonId.current))==null?void 0:w.contains(y))||((Z=g.getElementById(v.panelId.current))==null?void 0:Z.contains(y))})}),u=Ve(m=>{for(let g of i)g.buttonId.current!==m&&g.close()}),c=G.useMemo(()=>({registerPopover:s,unregisterPopover:a,isFocusWithinPopoverGroup:l,closeOthers:u}),[s,a,l,u]),d=G.useMemo(()=>({}),[]),f=e,h={ref:r};return x.createElement(EO.Provider,{value:c},yn({ourProps:h,theirProps:f,slot:d,defaultTag:SNe,name:"Popover.Group"}))}let _Ne=vn(hNe),GNe=vn(gNe),INe=vn(vNe),WNe=vn(ZNe),ENe=vn(kNe),TL=Object.assign(_Ne,{Button:GNe,Overlay:INe,Panel:WNe,Group:ENe});function Ese(e=0){let[t,n]=G.useState(e),r=G.useCallback(s=>n(l=>l|s),[t]),i=G.useCallback(s=>!!(t&s),[t]),o=G.useCallback(s=>n(l=>l&~s),[n]),a=G.useCallback(s=>n(l=>l^s),[n]);return{flags:t,addFlag:r,hasFlag:i,removeFlag:o,toggleFlag:a}}let Xse=G.createContext(null);function Lse(){let e=G.useContext(Xse);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Lse),t}return e}function LO(){let[e,t]=G.useState([]);return[e.length>0?e.join(" "):void 0,G.useMemo(()=>function(n){let r=Ve(o=>(t(a=>[...a,o]),()=>t(a=>{let s=a.slice(),l=s.indexOf(o);return l!==-1&&s.splice(l,1),s}))),i=G.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return x.createElement(Xse.Provider,{value:i},n.children)},[t])]}let XNe="label";function LNe(e,t){let n=Wr(),{id:r=`headlessui-label-${n}`,passive:i=!1,...o}=e,a=Lse(),s=Gn(t);Mn(()=>a.register(r),[r,a.register]);let l={ref:s,...a.props,id:r};return i&&("onClick"in l&&delete l.onClick,"onClick"in o&&delete o.onClick),yn({ourProps:l,theirProps:o,slot:a.slot||{},defaultTag:XNe,name:a.name||"Label"})}let RNe=vn(LNe),Rse=Object.assign(RNe,{});var CNe=(e=>(e[e.RegisterOption=0]="RegisterOption",e[e.UnregisterOption=1]="UnregisterOption",e))(CNe||{});let VNe={0(e,t){let n=[...e.options,{id:t.id,element:t.element,propsRef:t.propsRef}];return{...e,options:x3(n,r=>r.element.current)}},1(e,t){let n=e.options.slice(),r=e.options.findIndex(i=>i.id===t.id);return r===-1?e:(n.splice(r,1),{...e,options:n})}},RO=G.createContext(null);RO.displayName="RadioGroupDataContext";function Cse(e){let t=G.useContext(RO);if(t===null){let n=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Cse),n}return t}let CO=G.createContext(null);CO.displayName="RadioGroupActionsContext";function Vse(e){let t=G.useContext(CO);if(t===null){let n=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Vse),n}return t}function YNe(e,t){return Qt(t.type,VNe,e,t)}let TNe="div";function NNe(e,t){let n=Wr(),{id:r=`headlessui-radiogroup-${n}`,value:i,defaultValue:o,name:a,onChange:s,by:l=(M,j)=>M===j,disabled:u=!1,...c}=e,d=Ve(typeof l=="string"?(M,j)=>{let J=l;return(M==null?void 0:M[J])===(j==null?void 0:j[J])}:l),[f,h]=G.useReducer(YNe,{options:[]}),m=f.options,[g,y]=LO(),[v,w]=ZO(),Z=G.useRef(null),k=Gn(Z,t),[_,R]=wO(i,s,o),I=G.useMemo(()=>m.find(M=>!M.propsRef.current.disabled),[m]),E=G.useMemo(()=>m.some(M=>d(M.propsRef.current.value,_)),[m,_]),X=Ve(M=>{var j;if(u||d(M,_))return!1;let J=(j=m.find(q=>d(q.propsRef.current.value,M)))==null?void 0:j.propsRef.current;return J!=null&&J.disabled?!1:(R==null||R(M),!0)});hse({container:Z.current,accept(M){return M.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:M.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(M){M.setAttribute("role","none")}});let Y=Ve(M=>{let j=Z.current;if(!j)return;let J=vh(j),q=m.filter(K=>K.propsRef.current.disabled===!1).map(K=>K.element.current);switch(M.key){case et.Enter:xse(M.currentTarget);break;case et.ArrowLeft:case et.ArrowUp:if(M.preventDefault(),M.stopPropagation(),ml(q,Ei.Previous|Ei.WrapAround)===ng.Success){let K=m.find(D=>D.element.current===(J==null?void 0:J.activeElement));K&&X(K.propsRef.current.value)}break;case et.ArrowRight:case et.ArrowDown:if(M.preventDefault(),M.stopPropagation(),ml(q,Ei.Next|Ei.WrapAround)===ng.Success){let K=m.find(D=>D.element.current===(J==null?void 0:J.activeElement));K&&X(K.propsRef.current.value)}break;case et.Space:{M.preventDefault(),M.stopPropagation();let K=m.find(D=>D.element.current===(J==null?void 0:J.activeElement));K&&X(K.propsRef.current.value)}break}}),C=Ve(M=>(h({type:0,...M}),()=>h({type:1,id:M.id}))),N=G.useMemo(()=>({value:_,firstOption:I,containsCheckedOption:E,disabled:u,compare:d,...f}),[_,I,E,u,d,f]),V=G.useMemo(()=>({registerOption:C,change:X}),[C,X]),F={ref:k,id:r,role:"radiogroup","aria-labelledby":g,"aria-describedby":v,onKeyDown:Y},O=G.useMemo(()=>({value:_}),[_]),P=G.useRef(null),H=Tl();return G.useEffect(()=>{P.current&&o!==void 0&&H.addEventListener(P.current,"reset",()=>{X(o)})},[P,X]),x.createElement(w,{name:"RadioGroup.Description"},x.createElement(y,{name:"RadioGroup.Label"},x.createElement(CO.Provider,{value:V},x.createElement(RO.Provider,{value:N},a!=null&&_!=null&&vO({[a]:_}).map(([M,j],J)=>x.createElement(rg,{features:Hp.Hidden,ref:J===0?q=>{var K;P.current=(K=q==null?void 0:q.closest("form"))!=null?K:null}:void 0,...ew({key:M,as:"input",type:"radio",checked:j!=null,hidden:!0,readOnly:!0,name:M,value:j})})),yn({ourProps:F,theirProps:c,slot:O,defaultTag:TNe,name:"RadioGroup"})))))}var FNe=(e=>(e[e.Empty=1]="Empty",e[e.Active=2]="Active",e))(FNe||{});let MNe="div";function ONe(e,t){var n;let r=Wr(),{id:i=`headlessui-radiogroup-option-${r}`,value:o,disabled:a=!1,...s}=e,l=G.useRef(null),u=Gn(l,t),[c,d]=LO(),[f,h]=ZO(),{addFlag:m,removeFlag:g,hasFlag:y}=Ese(1),v=ro({value:o,disabled:a}),w=Cse("RadioGroup.Option"),Z=Vse("RadioGroup.Option");Mn(()=>Z.registerOption({id:i,element:l,propsRef:v}),[i,Z,l,e]);let k=Ve(N=>{var V;if(jp(N.currentTarget))return N.preventDefault();Z.change(o)&&(m(2),(V=l.current)==null||V.focus())}),_=Ve(N=>{if(jp(N.currentTarget))return N.preventDefault();m(2)}),R=Ve(()=>g(2)),I=((n=w.firstOption)==null?void 0:n.id)===i,E=w.disabled||a,X=w.compare(w.value,o),Y={ref:u,id:i,role:"radio","aria-checked":X?"true":"false","aria-labelledby":c,"aria-describedby":f,"aria-disabled":E?!0:void 0,tabIndex:E?-1:X||!w.containsCheckedOption&&I?0:-1,onClick:E?void 0:k,onFocus:E?void 0:_,onBlur:E?void 0:R},C=G.useMemo(()=>({checked:X,disabled:E,active:y(2)}),[X,E,y]);return x.createElement(h,{name:"RadioGroup.Description"},x.createElement(d,{name:"RadioGroup.Label"},yn({ourProps:Y,theirProps:s,slot:C,defaultTag:MNe,name:"RadioGroup.Option"})))}let zNe=vn(NNe),PNe=vn(ONe),XS=Object.assign(zNe,{Option:PNe,Label:Rse,Description:Ise}),VO=G.createContext(null);VO.displayName="GroupContext";let jNe=G.Fragment;function HNe(e){let[t,n]=G.useState(null),[r,i]=LO(),[o,a]=ZO(),s=G.useMemo(()=>({switch:t,setSwitch:n,labelledby:r,describedby:o}),[t,n,r,o]),l={},u=e;return x.createElement(a,{name:"Switch.Description"},x.createElement(i,{name:"Switch.Label",props:{onClick(){t&&(t.click(),t.focus({preventScroll:!0}))}}},x.createElement(VO.Provider,{value:s},yn({ourProps:l,theirProps:u,defaultTag:jNe,name:"Switch.Group"}))))}let JNe="button";function BNe(e,t){let n=Wr(),{id:r=`headlessui-switch-${n}`,checked:i,defaultChecked:o=!1,onChange:a,name:s,value:l,...u}=e,c=G.useContext(VO),d=G.useRef(null),f=Gn(d,t,c===null?null:c.setSwitch),[h,m]=wO(i,a,o),g=Ve(()=>m==null?void 0:m(!h)),y=Ve(R=>{if(jp(R.currentTarget))return R.preventDefault();R.preventDefault(),g()}),v=Ve(R=>{R.key===et.Space?(R.preventDefault(),g()):R.key===et.Enter&&xse(R.currentTarget)}),w=Ve(R=>R.preventDefault()),Z=G.useMemo(()=>({checked:h}),[h]),k={id:r,ref:f,role:"switch",type:w3(e,d),tabIndex:0,"aria-checked":h,"aria-labelledby":c==null?void 0:c.labelledby,"aria-describedby":c==null?void 0:c.describedby,onClick:y,onKeyUp:v,onKeyPress:w},_=Tl();return G.useEffect(()=>{var R;let I=(R=d.current)==null?void 0:R.closest("form");I&&o!==void 0&&_.addEventListener(I,"reset",()=>{m(o)})},[d,m]),x.createElement(x.Fragment,null,s!=null&&h&&x.createElement(rg,{features:Hp.Hidden,...ew({as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:h,name:s,value:l})}),yn({ourProps:k,theirProps:u,slot:Z,defaultTag:JNe,name:"Switch"}))}let KNe=vn(BNe),DNe=HNe,NL=Object.assign(KNe,{Group:DNe,Label:Rse,Description:Ise});function ANe(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function FL(e,...t){e&&t.length>0&&e.classList.add(...t)}function ML(e,...t){e&&t.length>0&&e.classList.remove(...t)}function UNe(e,t){let n=Ss();if(!e)return n.dispose;let{transitionDuration:r,transitionDelay:i}=getComputedStyle(e),[o,a]=[r,i].map(s=>{let[l=0]=s.split(",").filter(Boolean).map(u=>u.includes("ms")?parseFloat(u):parseFloat(u)*1e3).sort((u,c)=>c-u);return l});if(o+a!==0){let s=n.addEventListener(e,"transitionend",l=>{l.target===l.currentTarget&&(t(),s())})}else t();return n.add(()=>t()),n.dispose}function $Ne(e,t,n,r){let i=n?"enter":"leave",o=Ss(),a=r!==void 0?ANe(r):()=>{};i==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let s=Qt(i,{enter:()=>t.enter,leave:()=>t.leave}),l=Qt(i,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),u=Qt(i,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return ML(e,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),FL(e,...s,...u),o.nextFrame(()=>{ML(e,...u),FL(e,...l),UNe(e,()=>(ML(e,...s),FL(e,...t.entered),a()))}),o.dispose}function QNe({container:e,direction:t,classes:n,onStart:r,onStop:i}){let o=Sse(),a=Tl(),s=ro(t);Mn(()=>{let l=Ss();a.add(l.dispose);let u=e.current;if(u&&s.current!=="idle"&&o.current)return l.dispose(),r.current(s.current),l.add($Ne(u,n.current,s.current==="enter",()=>{l.dispose(),i.current(s.current)})),l.dispose},[t])}function Tf(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let _3=G.createContext(null);_3.displayName="TransitionContext";var qNe=(e=>(e.Visible="visible",e.Hidden="hidden",e))(qNe||{});function eFe(){let e=G.useContext(_3);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function tFe(){let e=G.useContext(G3);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let G3=G.createContext(null);G3.displayName="NestingContext";function I3(e){return"children"in e?I3(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Yse(e,t){let n=ro(e),r=G.useRef([]),i=Sse(),o=Tl(),a=Ve((h,m=Cu.Hidden)=>{let g=r.current.findIndex(({el:y})=>y===h);g!==-1&&(Qt(m,{[Cu.Unmount](){r.current.splice(g,1)},[Cu.Hidden](){r.current[g].state="hidden"}}),o.microTask(()=>{var y;!I3(r)&&i.current&&((y=n.current)==null||y.call(n))}))}),s=Ve(h=>{let m=r.current.find(({el:g})=>g===h);return m?m.state!=="visible"&&(m.state="visible"):r.current.push({el:h,state:"visible"}),()=>a(h,Cu.Unmount)}),l=G.useRef([]),u=G.useRef(Promise.resolve()),c=G.useRef({enter:[],leave:[],idle:[]}),d=Ve((h,m,g)=>{l.current.splice(0),t&&(t.chains.current[m]=t.chains.current[m].filter(([y])=>y!==h)),t==null||t.chains.current[m].push([h,new Promise(y=>{l.current.push(y)})]),t==null||t.chains.current[m].push([h,new Promise(y=>{Promise.all(c.current[m].map(([v,w])=>w)).then(()=>y())})]),m==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>g(m)):g(m)}),f=Ve((h,m,g)=>{Promise.all(c.current[m].splice(0).map(([y,v])=>v)).then(()=>{var y;(y=l.current.shift())==null||y()}).then(()=>g(m))});return G.useMemo(()=>({children:r,register:s,unregister:a,onStart:d,onStop:f,wait:u,chains:c}),[s,a,r,d,f,c,u])}function nFe(){}let rFe=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function U7(e){var t;let n={};for(let r of rFe)n[r]=(t=e[r])!=null?t:nFe;return n}function iFe(e){let t=G.useRef(U7(e));return G.useEffect(()=>{t.current=U7(e)},[e]),t}let oFe="div",Tse=Nl.RenderStrategy;function aFe(e,t){let{beforeEnter:n,afterEnter:r,beforeLeave:i,afterLeave:o,enter:a,enterFrom:s,enterTo:l,entered:u,leave:c,leaveFrom:d,leaveTo:f,...h}=e,m=G.useRef(null),g=Gn(m,t),y=h.unmount?Cu.Unmount:Cu.Hidden,{show:v,appear:w,initial:Z}=eFe(),[k,_]=G.useState(v?"visible":"hidden"),R=tFe(),{register:I,unregister:E}=R,X=G.useRef(null);G.useEffect(()=>I(m),[I,m]),G.useEffect(()=>{if(y===Cu.Hidden&&m.current){if(v&&k!=="visible"){_("visible");return}return Qt(k,{hidden:()=>E(m),visible:()=>I(m)})}},[k,m,I,E,v,y]);let Y=ro({enter:Tf(a),enterFrom:Tf(s),enterTo:Tf(l),entered:Tf(u),leave:Tf(c),leaveFrom:Tf(d),leaveTo:Tf(f)}),C=iFe({beforeEnter:n,afterEnter:r,beforeLeave:i,afterLeave:o}),N=v3();G.useEffect(()=>{if(N&&k==="visible"&&m.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[m,k,N]);let V=Z&&!w,F=!N||V||X.current===v?"idle":v?"enter":"leave",O=Ese(0),P=Ve(q=>Qt(q,{enter:()=>{O.addFlag(Ln.Opening),C.current.beforeEnter()},leave:()=>{O.addFlag(Ln.Closing),C.current.beforeLeave()},idle:()=>{}})),H=Ve(q=>Qt(q,{enter:()=>{O.removeFlag(Ln.Opening),C.current.afterEnter()},leave:()=>{O.removeFlag(Ln.Closing),C.current.afterLeave()},idle:()=>{}})),M=Yse(()=>{_("hidden"),E(m)},R);QNe({container:m,classes:Y,direction:F,onStart:ro(q=>{M.onStart(m,q,P)}),onStop:ro(q=>{M.onStop(m,q,H),q==="leave"&&!I3(M)&&(_("hidden"),E(m))})}),G.useEffect(()=>{V&&(y===Cu.Hidden?X.current=null:X.current=v)},[v,V,k]);let j=h,J={ref:g};return w&&v&&_l.isServer&&(j={...j,className:gse(h.className,...Y.current.enter,...Y.current.enterFrom)}),x.createElement(G3.Provider,{value:M},x.createElement(Z3,{value:Qt(k,{visible:Ln.Open,hidden:Ln.Closed})|O.flags},yn({ourProps:J,theirProps:j,defaultTag:oFe,features:Tse,visible:k==="visible",name:"Transition.Child"})))}function sFe(e,t){let{show:n,appear:r=!1,unmount:i,...o}=e,a=G.useRef(null),s=Gn(a,t);v3();let l=ib();if(n===void 0&&l!==null&&(n=(l&Ln.Open)===Ln.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,c]=G.useState(n?"visible":"hidden"),d=Yse(()=>{c("hidden")}),[f,h]=G.useState(!0),m=G.useRef([n]);Mn(()=>{f!==!1&&m.current[m.current.length-1]!==n&&(m.current.push(n),h(!1))},[m,n]);let g=G.useMemo(()=>({show:n,appear:r,initial:f}),[n,r,f]);G.useEffect(()=>{if(n)c("visible");else if(!I3(d))c("hidden");else{let v=a.current;if(!v)return;let w=v.getBoundingClientRect();w.x===0&&w.y===0&&w.width===0&&w.height===0&&c("hidden")}},[n,d]);let y={unmount:i};return x.createElement(G3.Provider,{value:d},x.createElement(_3.Provider,{value:g},yn({ourProps:{...y,as:G.Fragment,children:x.createElement(Nse,{ref:s,...y,...o})},theirProps:{},defaultTag:G.Fragment,features:Tse,visible:u==="visible",name:"Transition"})))}function lFe(e,t){let n=G.useContext(_3)!==null,r=ib()!==null;return x.createElement(x.Fragment,null,!n&&r?x.createElement(uY,{ref:t,...e}):x.createElement(Nse,{ref:t,...e}))}let uY=vn(sFe),Nse=vn(aFe),uFe=vn(lFe),Jp=Object.assign(uY,{Child:uFe,Root:uY});function cFe(...e){return e.filter(Boolean).join(" ")}const YO=e=>{const{options:t=[],disable:n,position:r="left-0"}=e;return n?x.createElement(G.Fragment,null,e.children):x.createElement(pp,{as:"span",className:"relative block text-left"},x.createElement(pp.Button,{className:"block w-full text-left"},e.children),x.createElement(Jp,{as:G.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95"},x.createElement(pp.Items,{className:`absolute ${r} z-50 mt-2 w-56 origin-top-right rounded-md bg-white dark:bg-zinc-900  shadow-lg border border-gray-50 dark:border-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none`},x.createElement("div",{className:"py-1"},t.map((i,o)=>x.createElement(pp.Item,{key:i.value},a=>x.createElement("span",{className:cFe(a.active?"bg-gray-100 text-gray-900 dark:bg-gray-800 dark:text-gray-50":"text-gray-700 dark:text-gray-200","block px-4 py-2 text-sm"),onClick:()=>{e.onSelect&&!e.disable&&e.onSelect(i.value,o)}},i.label)))))))},Fse=["top","right","bottom","left"],$7=["start","end"],Q7=Fse.reduce((e,t)=>e.concat(t,t+"-"+$7[0],t+"-"+$7[1]),[]),ig=Math.min,kp=Math.max,hG=Math.round,LS=Math.floor,Vd=e=>({x:e,y:e}),dFe={left:"right",right:"left",bottom:"top",top:"bottom"},fFe={start:"end",end:"start"};function cY(e,t,n){return kp(e,ig(t,n))}function xh(e,t){return typeof e=="function"?e(t):e}function tc(e){return e.split("-")[0]}function Gl(e){return e.split("-")[1]}function Mse(e){return e==="x"?"y":"x"}function TO(e){return e==="y"?"height":"width"}function W3(e){return["top","bottom"].includes(tc(e))?"y":"x"}function NO(e){return Mse(W3(e))}function Ose(e,t,n){n===void 0&&(n=!1);const r=Gl(e),i=NO(e),o=TO(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=gG(a)),[a,gG(a)]}function pFe(e){const t=gG(e);return[mG(e),t,mG(t)]}function mG(e){return e.replace(/start|end/g,t=>fFe[t])}function hFe(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:a;default:return[]}}function mFe(e,t,n,r){const i=Gl(e);let o=hFe(tc(e),n==="start",r);return i&&(o=o.map(a=>a+"-"+i),t&&(o=o.concat(o.map(mG)))),o}function gG(e){return e.replace(/left|right|bottom|top/g,t=>dFe[t])}function gFe(e){return{top:0,right:0,bottom:0,left:0,...e}}function zse(e){return typeof e!="number"?gFe(e):{top:e,right:e,bottom:e,left:e}}function bG(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function q7(e,t,n){let{reference:r,floating:i}=e;const o=W3(t),a=NO(t),s=TO(a),l=tc(t),u=o==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[s]/2-i[s]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Gl(t)){case"start":h[a]-=f*(n&&u?-1:1);break;case"end":h[a]+=f*(n&&u?-1:1);break}return h}const bFe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,s=o.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=q7(u,r,l),f=r,h={},m=0;for(let g=0;g<s.length;g++){const{name:y,fn:v}=s[g],{x:w,y:Z,data:k,reset:_}=await v({x:c,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:u,platform:a,elements:{reference:e,floating:t}});if(c=w!=null?w:c,d=Z!=null?Z:d,h={...h,[y]:{...h[y],...k}},_&&m<=50){m++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(u=_.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):_.rects),{x:c,y:d}=q7(u,f,l)),g=-1;continue}}return{x:c,y:d,placement:f,strategy:i,middlewareData:h}};async function tw(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:a,elements:s,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=xh(t,e),m=zse(h),g=s[f?d==="floating"?"reference":"floating":d],y=bG(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(g)))==null||n?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:u,rootBoundary:c,strategy:l})),v=d==="floating"?{...a.floating,x:r,y:i}:a.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),Z=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},k=bG(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v,offsetParent:w,strategy:l}):v);return{top:(y.top-k.top+m.top)/Z.y,bottom:(k.bottom-y.bottom+m.bottom)/Z.y,left:(y.left-k.left+m.left)/Z.x,right:(k.right-y.right+m.right)/Z.x}}const e6=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:a,elements:s,middlewareData:l}=t,{element:u,padding:c=0}=xh(e,t)||{};if(u==null)return{};const d=zse(c),f={x:n,y:r},h=NO(i),m=TO(h),g=await a.getDimensions(u),y=h==="y",v=y?"top":"left",w=y?"bottom":"right",Z=y?"clientHeight":"clientWidth",k=o.reference[m]+o.reference[h]-f[h]-o.floating[m],_=f[h]-o.reference[h],R=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let I=R?R[Z]:0;(!I||!await(a.isElement==null?void 0:a.isElement(R)))&&(I=s.floating[Z]||o.floating[m]);const E=k/2-_/2,X=I/2-g[m]/2-1,Y=ig(d[v],X),C=ig(d[w],X),N=Y,V=I-g[m]-C,F=I/2-g[m]/2+E,O=cY(N,F,V),P=!l.arrow&&Gl(i)!=null&&F!=O&&o.reference[m]/2-(F<N?Y:C)-g[m]/2<0,H=P?F<N?F-N:F-V:0;return{[h]:f[h]+H,data:{[h]:O,centerOffset:F-O-H,...P&&{alignmentOffset:H}},reset:P}}});function yFe(e,t,n){return(e?[...n.filter(r=>Gl(r)===e),...n.filter(r=>Gl(r)!==e)]:n.filter(r=>tc(r)===r)).filter(r=>e?Gl(r)===e||(t?mG(r)!==r:!1):!0)}const vFe=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,r,i;const{rects:o,middlewareData:a,placement:s,platform:l,elements:u}=t,{crossAxis:c=!1,alignment:d,allowedPlacements:f=Q7,autoAlignment:h=!0,...m}=xh(e,t),g=d!==void 0||f===Q7?yFe(d||null,h,f):f,y=await tw(t,m),v=((n=a.autoPlacement)==null?void 0:n.index)||0,w=g[v];if(w==null)return{};const Z=Ose(w,o,await(l.isRTL==null?void 0:l.isRTL(u.floating)));if(s!==w)return{reset:{placement:g[0]}};const k=[y[tc(w)],y[Z[0]],y[Z[1]]],_=[...((r=a.autoPlacement)==null?void 0:r.overflows)||[],{placement:w,overflows:k}],R=g[v+1];if(R)return{data:{index:v+1,overflows:_},reset:{placement:R}};const I=_.map(X=>{const Y=Gl(X.placement);return[X.placement,Y&&c?X.overflows.slice(0,2).reduce((C,N)=>C+N,0):X.overflows[0],X.overflows]}).sort((X,Y)=>X[1]-Y[1]),E=((i=I.filter(X=>X[2].slice(0,Gl(X[0])?2:3).every(Y=>Y<=0))[0])==null?void 0:i[0])||I[0][0];return E!==s?{data:{index:v+1,overflows:_},reset:{placement:E}}:{}}}},xFe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...y}=xh(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const v=tc(i),w=tc(s)===s,Z=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=f||(w||!g?[gG(s)]:pFe(s));!f&&m!=="none"&&k.push(...mFe(s,g,m,Z));const _=[s,...k],R=await tw(t,y),I=[];let E=((r=o.flip)==null?void 0:r.overflows)||[];if(c&&I.push(R[v]),d){const N=Ose(i,a,Z);I.push(R[N[0]],R[N[1]])}if(E=[...E,{placement:i,overflows:I}],!I.every(N=>N<=0)){var X,Y;const N=(((X=o.flip)==null?void 0:X.index)||0)+1,V=_[N];if(V)return{data:{index:N,overflows:E},reset:{placement:V}};let F=(Y=E.filter(O=>O.overflows[0]<=0).sort((O,P)=>O.overflows[1]-P.overflows[1])[0])==null?void 0:Y.placement;if(!F)switch(h){case"bestFit":{var C;const O=(C=E.map(P=>[P.placement,P.overflows.filter(H=>H>0).reduce((H,M)=>H+M,0)]).sort((P,H)=>P[1]-H[1])[0])==null?void 0:C[0];O&&(F=O);break}case"initialPlacement":F=s;break}if(i!==F)return{reset:{placement:F}}}return{}}}};function t6(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function n6(e){return Fse.some(t=>e[t]>=0)}const wFe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=xh(e,t);switch(r){case"referenceHidden":{const o=await tw(t,{...i,elementContext:"reference"}),a=t6(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:n6(a)}}}case"escaped":{const o=await tw(t,{...i,altBoundary:!0}),a=t6(o,n.floating);return{data:{escapedOffsets:a,escaped:n6(a)}}}default:return{}}}}};async function ZFe(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=tc(n),s=Gl(n),l=W3(n)==="y",u=["left","top"].includes(a)?-1:1,c=o&&l?-1:1,d=xh(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return s&&typeof m=="number"&&(h=s==="end"?m*-1:m),l?{x:h*c,y:f*u}:{x:f*u,y:h*c}}const SFe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,i=await ZFe(t,e);return{x:n+i.x,y:r+i.y,data:i}}}},kFe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:y=>{let{x:v,y:w}=y;return{x:v,y:w}}},...l}=xh(e,t),u={x:n,y:r},c=await tw(t,l),d=W3(tc(i)),f=Mse(d);let h=u[f],m=u[d];if(o){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",w=h+c[y],Z=h-c[v];h=cY(w,h,Z)}if(a){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",w=m+c[y],Z=m-c[v];m=cY(w,m,Z)}const g=s.fn({...t,[f]:h,[d]:m});return{...g,data:{x:g.x-n,y:g.y-r}}}}};function Yd(e){return Pse(e)?(e.nodeName||"").toLowerCase():"#document"}function To(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function dc(e){var t;return(t=(Pse(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Pse(e){return e instanceof Node||e instanceof To(e).Node}function nc(e){return e instanceof Element||e instanceof To(e).Element}function Fl(e){return e instanceof HTMLElement||e instanceof To(e).HTMLElement}function r6(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof To(e).ShadowRoot}function y5(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Za(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function _Fe(e){return["table","td","th"].includes(Yd(e))}function FO(e){const t=MO(),n=Za(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function GFe(e){let t=og(e);for(;Fl(t)&&!E3(t);){if(FO(t))return t;t=og(t)}return null}function MO(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function E3(e){return["html","body","#document"].includes(Yd(e))}function Za(e){return To(e).getComputedStyle(e)}function X3(e){return nc(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function og(e){if(Yd(e)==="html")return e;const t=e.assignedSlot||e.parentNode||r6(e)&&e.host||dc(e);return r6(t)?t.host:t}function jse(e){const t=og(e);return E3(t)?e.ownerDocument?e.ownerDocument.body:e.body:Fl(t)&&y5(t)?t:jse(t)}function nw(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=jse(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),a=To(i);return o?t.concat(a,a.visualViewport||[],y5(i)?i:[],a.frameElement&&n?nw(a.frameElement):[]):t.concat(i,nw(i,[],n))}function Hse(e){const t=Za(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Fl(e),o=i?e.offsetWidth:n,a=i?e.offsetHeight:r,s=hG(n)!==o||hG(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function OO(e){return nc(e)?e:e.contextElement}function Z0(e){const t=OO(e);if(!Fl(t))return Vd(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=Hse(t);let a=(o?hG(n.width):n.width)/r,s=(o?hG(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const IFe=Vd(0);function Jse(e){const t=To(e);return!MO()||!t.visualViewport?IFe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function WFe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==To(e)?!1:t}function Bp(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=OO(e);let a=Vd(1);t&&(r?nc(r)&&(a=Z0(r)):a=Z0(e));const s=WFe(o,n,r)?Jse(o):Vd(0);let l=(i.left+s.x)/a.x,u=(i.top+s.y)/a.y,c=i.width/a.x,d=i.height/a.y;if(o){const f=To(o),h=r&&nc(r)?To(r):r;let m=f.frameElement;for(;m&&r&&h!==f;){const g=Z0(m),y=m.getBoundingClientRect(),v=Za(m),w=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,Z=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,d*=g.y,l+=w,u+=Z,m=To(m).frameElement}}return bG({width:c,height:d,x:l,y:u})}function EFe(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=Fl(n),o=dc(n);if(n===o)return t;let a={scrollLeft:0,scrollTop:0},s=Vd(1);const l=Vd(0);if((i||!i&&r!=="fixed")&&((Yd(n)!=="body"||y5(o))&&(a=X3(n)),Fl(n))){const u=Bp(n);s=Z0(n),l.x=u.x+n.clientLeft,l.y=u.y+n.clientTop}return{width:t.width*s.x,height:t.height*s.y,x:t.x*s.x-a.scrollLeft*s.x+l.x,y:t.y*s.y-a.scrollTop*s.y+l.y}}function XFe(e){return Array.from(e.getClientRects())}function Bse(e){return Bp(dc(e)).left+X3(e).scrollLeft}function LFe(e){const t=dc(e),n=X3(e),r=e.ownerDocument.body,i=kp(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=kp(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Bse(e);const s=-n.scrollTop;return Za(r).direction==="rtl"&&(a+=kp(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:s}}function RFe(e,t){const n=To(e),r=dc(e),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;const u=MO();(!u||u&&t==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s,y:l}}function CFe(e,t){const n=Bp(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Fl(e)?Z0(e):Vd(1),a=e.clientWidth*o.x,s=e.clientHeight*o.y,l=i*o.x,u=r*o.y;return{width:a,height:s,x:l,y:u}}function i6(e,t,n){let r;if(t==="viewport")r=RFe(e,n);else if(t==="document")r=LFe(dc(e));else if(nc(t))r=CFe(t,n);else{const i=Jse(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return bG(r)}function Kse(e,t){const n=og(e);return n===t||!nc(n)||E3(n)?!1:Za(n).position==="fixed"||Kse(n,t)}function VFe(e,t){const n=t.get(e);if(n)return n;let r=nw(e,[],!1).filter(s=>nc(s)&&Yd(s)!=="body"),i=null;const o=Za(e).position==="fixed";let a=o?og(e):e;for(;nc(a)&&!E3(a);){const s=Za(a),l=FO(a);!l&&s.position==="fixed"&&(i=null),(o?!l&&!i:!l&&s.position==="static"&&i&&["absolute","fixed"].includes(i.position)||y5(a)&&!l&&Kse(e,a))?r=r.filter(u=>u!==a):i=s,a=og(a)}return t.set(e,r),r}function YFe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?VFe(t,this._c):[].concat(n),r],a=o[0],s=o.reduce((l,u)=>{const c=i6(t,u,i);return l.top=kp(c.top,l.top),l.right=ig(c.right,l.right),l.bottom=ig(c.bottom,l.bottom),l.left=kp(c.left,l.left),l},i6(t,a,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function TFe(e){return Hse(e)}function NFe(e,t,n){const r=Fl(t),i=dc(t),o=n==="fixed",a=Bp(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const l=Vd(0);if(r||!r&&!o)if((Yd(t)!=="body"||y5(i))&&(s=X3(t)),r){const u=Bp(t,!0,o,t);l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}else i&&(l.x=Bse(i));return{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function o6(e,t){return!Fl(e)||Za(e).position==="fixed"?null:t?t(e):e.offsetParent}function Dse(e,t){const n=To(e);if(!Fl(e))return n;let r=o6(e,t);for(;r&&_Fe(r)&&Za(r).position==="static";)r=o6(r,t);return r&&(Yd(r)==="html"||Yd(r)==="body"&&Za(r).position==="static"&&!FO(r))?n:r||GFe(e)||n}const FFe=async function(e){let{reference:t,floating:n,strategy:r}=e;const i=this.getOffsetParent||Dse,o=this.getDimensions;return{reference:NFe(t,await i(n),r),floating:{x:0,y:0,...await o(n)}}};function MFe(e){return Za(e).direction==="rtl"}const OFe={convertOffsetParentRelativeRectToViewportRelativeRect:EFe,getDocumentElement:dc,getClippingRect:YFe,getOffsetParent:Dse,getElementRects:FFe,getClientRects:XFe,getDimensions:TFe,getScale:Z0,isElement:nc,isRTL:MFe};function zFe(e,t){let n=null,r;const i=dc(e);function o(){clearTimeout(r),n&&n.disconnect(),n=null}function a(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),o();const{left:u,top:c,width:d,height:f}=e.getBoundingClientRect();if(s||t(),!d||!f)return;const h=LS(c),m=LS(i.clientWidth-(u+d)),g=LS(i.clientHeight-(c+f)),y=LS(u),v={rootMargin:-h+"px "+-m+"px "+-g+"px "+-y+"px",threshold:kp(0,ig(1,l))||1};let w=!0;function Z(k){const _=k[0].intersectionRatio;if(_!==l){if(!w)return a();_?a(!1,_):r=setTimeout(()=>{a(!1,1e-7)},100)}w=!1}try{n=new IntersectionObserver(Z,{...v,root:i.ownerDocument})}catch(k){n=new IntersectionObserver(Z,v)}n.observe(e)}return a(!0),o}function PFe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=OO(e),c=i||o?[...u?nw(u):[],...nw(t)]:[];c.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),o&&v.addEventListener("resize",n)});const d=u&&s?zFe(u,n):null;let f=-1,h=null;a&&(h=new ResizeObserver(v=>{let[w]=v;w&&w.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{h&&h.observe(t)})),n()}),u&&!l&&h.observe(u),h.observe(t));let m,g=l?Bp(e):null;l&&y();function y(){const v=Bp(e);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&n(),g=v,m=requestAnimationFrame(y)}return n(),()=>{c.forEach(v=>{i&&v.removeEventListener("scroll",n),o&&v.removeEventListener("resize",n)}),d&&d(),h&&h.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const jFe=(e,t,n)=>{const r=new Map,i={platform:OFe,...n},o={...i.platform,_c:r};return bFe(e,t,{...i,platform:o})},HFe=e=>{const{element:t,padding:n}=e;function r(i){return Object.prototype.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){return r(t)?t.current!=null?e6({element:t.current,padding:n}).fn(i):{}:t?e6({element:t,padding:n}).fn(i):{}}}};var j_=typeof document<"u"?G.useLayoutEffect:G.useEffect;function yG(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!yG(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!yG(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function a6(e){const t=G.useRef(e);return j_(()=>{t.current=e}),t}function JFe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,whileElementsMounted:o,open:a}=e,[s,l]=G.useState({x:null,y:null,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[u,c]=G.useState(r);yG(u,r)||c(r);const d=G.useRef(null),f=G.useRef(null),h=G.useRef(s),m=a6(o),g=a6(i),[y,v]=G.useState(null),[w,Z]=G.useState(null),k=G.useCallback(Y=>{d.current!==Y&&(d.current=Y,v(Y))},[]),_=G.useCallback(Y=>{f.current!==Y&&(f.current=Y,Z(Y))},[]),R=G.useCallback(()=>{if(!d.current||!f.current)return;const Y={placement:t,strategy:n,middleware:u};g.current&&(Y.platform=g.current),jFe(d.current,f.current,Y).then(C=>{const N={...C,isPositioned:!0};I.current&&!yG(h.current,N)&&(h.current=N,qn.flushSync(()=>{l(N)}))})},[u,t,n,g]);j_(()=>{a===!1&&h.current.isPositioned&&(h.current.isPositioned=!1,l(Y=>({...Y,isPositioned:!1})))},[a]);const I=G.useRef(!1);j_(()=>(I.current=!0,()=>{I.current=!1}),[]),j_(()=>{if(y&&w){if(m.current)return m.current(y,w,R);R()}},[y,w,R,m]);const E=G.useMemo(()=>({reference:d,floating:f,setReference:k,setFloating:_}),[k,_]),X=G.useMemo(()=>({reference:y,floating:w}),[y,w]);return G.useMemo(()=>({...s,update:R,refs:E,elements:X,reference:k,floating:_}),[s,R,E,X,k,_])}var BFe=typeof document<"u"?G.useLayoutEffect:G.useEffect;function KFe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter(r=>r!==n))}}}const DFe=G.createContext(null),AFe=()=>G.useContext(DFe);function UFe(e){return(e==null?void 0:e.ownerDocument)||document}function $Fe(e){return UFe(e).defaultView||window}function RS(e){return e?e instanceof $Fe(e).Element:!1}const QFe=Y5e.useInsertionEffect,qFe=QFe||(e=>e());function eMe(e){const t=G.useRef(()=>{});return qFe(()=>{t.current=e}),G.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function tMe(e){e===void 0&&(e={});const{open:t=!1,onOpenChange:n,nodeId:r}=e,i=JFe(e),o=AFe(),a=G.useRef(null),s=G.useRef({}),l=G.useState(()=>KFe())[0],[u,c]=G.useState(null),d=G.useCallback(v=>{const w=RS(v)?{getBoundingClientRect:()=>v.getBoundingClientRect(),contextElement:v}:v;i.refs.setReference(w)},[i.refs]),f=G.useCallback(v=>{(RS(v)||v===null)&&(a.current=v,c(v)),(RS(i.refs.reference.current)||i.refs.reference.current===null||v!==null&&!RS(v))&&i.refs.setReference(v)},[i.refs]),h=G.useMemo(()=>({...i.refs,setReference:f,setPositionReference:d,domReference:a}),[i.refs,f,d]),m=G.useMemo(()=>({...i.elements,domReference:u}),[i.elements,u]),g=eMe(n),y=G.useMemo(()=>({...i,refs:h,elements:m,dataRef:s,nodeId:r,events:l,open:t,onOpenChange:g}),[i,r,l,t,g,h,m]);return BFe(()=>{const v=o==null?void 0:o.nodesRef.current.find(w=>w.id===r);v&&(v.context=y)}),G.useMemo(()=>({...i,context:y,refs:h,reference:f,positionReference:d}),[i,h,y,f,d])}var nMe=Object.defineProperty,rMe=(e,t,n)=>t in e?nMe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,s6=(e,t,n)=>(rMe(e,typeof t!="symbol"?t+"":t,n),n),Ase={exports:{}},wy={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l6;function iMe(){if(l6)return wy;l6=1;var e=x,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(s,l,u){var c,d={},f=null,h=null;u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(h=l.ref);for(c in l)r.call(l,c)&&!o.hasOwnProperty(c)&&(d[c]=l[c]);if(s&&s.defaultProps)for(c in l=s.defaultProps,l)d[c]===void 0&&(d[c]=l[c]);return{$$typeof:t,type:s,key:f,ref:h,props:d,_owner:i.current}}return wy.Fragment=n,wy.jsx=a,wy.jsxs=a,wy}Ase.exports=iMe();var Pt=Ase.exports;class oMe{constructor(){s6(this,"current",this.detect()),s6(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}}const ag=new oMe,Use=(e,t)=>{ag.isServer?G.useEffect(e,t):G.useLayoutEffect(e,t)},OL={serverHandoffComplete:!1};function aMe(){const[e,t]=G.useState(OL.serverHandoffComplete);return G.useEffect(()=>{e!==!0&&t(!0)},[e]),G.useEffect(()=>{OL.serverHandoffComplete===!1&&(OL.serverHandoffComplete=!0)},[]),e}var kte;const sMe=(kte=x.useId)!=null?kte:function(){const e=aMe(),[t,n]=x.useState(e?()=>ag.nextId():null);return Use(()=>{t===null&&n(ag.nextId())},[t]),t!=null?`${t}`:void 0};function lMe(e,t,n,r){G.useEffect(()=>{const i=[];(typeof r.offset=="number"||typeof r.offset=="object"||typeof r.offset=="function")&&i.push(SFe(r.offset)),(r.flip===!0||typeof r.flip=="number"||typeof r.flip=="object")&&i.push(xFe({padding:typeof r.flip=="number"?r.flip:void 0,...typeof r.flip=="object"?r.flip:{}})),(r.shift===!0||typeof r.shift=="number"||typeof r.shift=="object")&&i.push(kFe({padding:typeof r.shift=="number"?r.shift:void 0,...typeof r.shift=="object"?r.shift:{}})),(r.autoPlacement===!0||typeof r.autoPlacement=="object")&&i.push(vFe(typeof r.autoPlacement=="object"?r.autoPlacement:void 0)),(r.arrow===!0||typeof r.arrow=="number")&&i.push(HFe({element:n,padding:r.arrow===!0?0:r.arrow})),i.push(...typeof r.middleware=="function"?r.middleware({referenceEl:t.reference,floatingEl:t.floating}):r.middleware||[]),(r.hide===!0||typeof r.hide=="object")&&i.push(wFe(typeof r.hide=="object"?r.hide:void 0)),e(i)},[r.offset,r.shift,r.flip,r.arrow,r.autoPlacement,r.hide,r.middleware])}function uMe(e,t,n){G.useEffect(()=>{if(e&&ag.isClient&&typeof ResizeObserver<"u"&&t.current&&t.current instanceof Element){const r=new ResizeObserver(([i])=>{const o=i.borderBoxSize.reduce((a,{inlineSize:s})=>a+s,0);n(o)});return r.observe(t.current),()=>{r.disconnect(),n(null)}}},[])}const cMe=e=>{switch(e){case"top":return"origin-bottom";case"bottom":return"origin-top";case"left":return"origin-right";case"right":return"origin-left";case"top-start":case"right-end":return"origin-bottom-left";case"top-end":case"left-end":return"origin-bottom-right";case"right-start":case"bottom-start":return"origin-top-left";case"left-start":case"bottom-end":return"origin-top-right";default:return""}};function dMe(e,t){return G.useMemo(()=>typeof e.originClass=="function"?e.originClass(t):typeof e.originClass=="string"?e.originClass:e.tailwindcssOriginClass?cMe(t):"",[t,e.originClass,e.tailwindcssOriginClass])}function $se(e,t,...n){if(e in t){const i=t[e];return typeof i=="function"?i(...n):i}const r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,$se),r}function Qse(e){return ag.isServer?null:e instanceof Node?e.ownerDocument:e&&Object.prototype.hasOwnProperty.call(e,"current")&&e.current instanceof Node?e.current.ownerDocument:document}const u6=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var qse=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(qse||{});function fMe(e,t=0){var n;return e===((n=Qse(e))==null?void 0:n.body)?!1:$se(t,{0(){return e.matches(u6)},1(){let r=e;for(;r!==null;){if(r.matches(u6))return!0;r=r.parentElement}return!1}})}function pMe(e){const t=G.useRef(e);return Use(()=>{t.current=e},[e]),t}function al(e,t,n){const r=pMe(t);G.useEffect(()=>{function i(o){r.current(o)}return document.addEventListener(e,i,n),()=>document.removeEventListener(e,i,n)},[e,n])}function hMe(e,t,n=!0){const r=G.useRef(!1);G.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function i(a,s){if(!r.current||a.defaultPrevented)return;const l=function c(d){return typeof d=="function"?c(d()):Array.isArray(d)||d instanceof Set?d:[d]}(e),u=s(a);if(u!==null&&u.getRootNode().contains(u)){for(const c of l){if(c===null)continue;const d=c instanceof HTMLElement?c:c.current;if(d!=null&&d.contains(u)||a.composed&&a.composedPath().includes(d))return}return!fMe(u,qse.Loose)&&u.tabIndex!==-1&&a.preventDefault(),t(a,u)}}const o=G.useRef(null);al("mousedown",a=>{var s,l;r.current&&(o.current=((l=(s=a.composedPath)==null?void 0:s.call(a))==null?void 0:l[0])||a.target)},!0),al("click",a=>{o.current&&(i(a,()=>o.current),o.current=null)},!0),al("blur",a=>i(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}const CS=new Map,zO=G.createContext(null);zO.displayName="ReferenceContext";const PO=G.createContext(null);PO.displayName="FloatingContext";const rw=G.createContext(null);rw.displayName="ArrowContext";function ele(e){const t=G.useContext(zO);if(t===null){const n=new Error(`<${e} /> is missing a parent <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ele),n}return t}function tle(e){const t=G.useContext(PO);if(t===null){const n=new Error(`<${e} /> is missing a parent <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,tle),n}return t}function nle(e){const t=G.useContext(rw);if(t===null){const n=new Error(`<${e} /> is missing a parent <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,nle),n}return t}function rle(e,t,n,r){const{referenceRef:i}=r,o=t;if(o.as===G.Fragment)return Pt.jsx(e.type,{...e.props,...n,ref:i});const a=o.as||"div";return Pt.jsx(a,{...n,ref:i,children:Pt.jsx(e.type,{...e.props})})}function jO(e,t,n,r){const{floatingRef:i,props:o,mounted:a,setShow:s,x:l,y:u,placement:c,strategy:d,referenceElWidth:f}=r,h={...o,...t},m=dMe(h,c),g={show:a.current?h.show:!1,enter:`${h.enter||""} ${m}`,enterFrom:`${h.enterFrom||""}`,enterTo:`${h.enterTo||""}`,leave:`${h.leave||""} ${m}`,leaveFrom:`${h.leaveFrom||""}`,leaveTo:`${h.leaveTo||""}`,beforeEnter:()=>{s(!0)},afterLeave:()=>{s(!1)}},y={style:{...!h.dialog&&(h.transform||h.transform===void 0)?{position:d,zIndex:h.zIndex||9999,top:"0px",left:"0px",right:"auto",bottom:"auto",transform:`translate(${Math.round(l||0)}px,${Math.round(u||0)}px)`}:{position:d,zIndex:h.zIndex||9999,top:`${u||0}px`,left:`${l||0}px`},width:h.adaptiveWidth&&typeof f=="number"?`${f}px`:void 0}};function v(k){return h.portal?Pt.jsx(yTe,{children:k}):k}function w(k){const _={...y,...n,ref:i};if(h.as===G.Fragment)return Pt.jsx(k.type,{...k.props,..._});const R=h.as||"div";return Pt.jsx(R,{..._,children:Pt.jsx(k.type,{...k.props})})}function Z(){return ag.isServer?a.current&&h.show?Pt.jsx(e.type,{...e.props}):Pt.jsx(G.Fragment,{}):h.transitionChild?Pt.jsx(Jp.Child,{as:G.Fragment,...g,children:Pt.jsx(e.type,{...e.props})}):Pt.jsx(Jp,{as:G.Fragment,...g,children:Pt.jsx(e.type,{...e.props})})}return v(w(Z()))}function ile([e,t],n){var r,i;const o=sMe(),a=G.useRef(!1),[s,l]=G.useState(),u=G.useRef(null),c=G.useMemo(()=>({show:n.onShow||(()=>{}),hide:n.onHide||(()=>{}),update:n.onUpdate||(()=>{})}),[n.onShow,n.onHide,n.onUpdate]),{x:d,y:f,placement:h,strategy:m,update:g,refs:y,middlewareData:v}=tMe({placement:n.placement||"bottom-start",strategy:n.strategy,middleware:s}),[w,Z]=G.useState(null);G.useEffect(()=>{a.current=!0},[]),G.useEffect(()=>{e&&!CS.get(o)?(CS.set(o,!0),c.show()):!e&&CS.get(o)&&(CS.delete(o),c.hide())},[e]);const k=G.useCallback(()=>{g(),c.update()},[g,c]);G.useEffect(k,[n.placement,n.strategy,s]),lMe(l,y,u,n),uMe(n.adaptiveWidth,y.reference,Z),G.useEffect(()=>{if(y.reference.current&&y.floating.current&&e)return n.autoUpdate!==!1?PFe(y.reference.current,y.floating.current,k,typeof n.autoUpdate=="object"?n.autoUpdate:void 0):()=>{}},[e,k,y]);const _=G.useRef(!0);G.useEffect(()=>{!(y.reference.current instanceof Element)&&y.reference.current&&y.floating.current&&_.current&&(_.current=!1,k(),window.requestAnimationFrame(()=>{_.current=!0,k()}))},[y]);const R={referenceRef:y.setReference,placement:h},I={floatingRef:y.setFloating,props:n,mounted:a,setShow:t,x:d,y:f,placement:h,strategy:m,referenceElWidth:w},E={arrowRef:u,placement:h,x:(r=v.arrow)==null?void 0:r.x,y:(i=v.arrow)==null?void 0:i.y};return{referenceApi:R,floatingApi:I,arrowApi:E,x:d,y:f,placement:h,strategy:m,update:k,refs:y,middlewareData:v}}const ole=G.forwardRef((e,t)=>{var m;const[n,r]=G.useState((m=e.show)!=null?m:!1),{referenceApi:i,floatingApi:o,arrowApi:a,placement:s}=ile([n,r],e),l={placement:s},[u,c]=typeof e.children=="function"?e.children(l):e.children;if(!G.isValidElement(u))return console.warn("<Float /> is missing a reference and floating element."),Pt.jsx(G.Fragment,{});function d(g){if(e.as===G.Fragment||!e.as)return Pt.jsx(G.Fragment,{children:g});const y=e.as;return Pt.jsx(y,{ref:t,className:e.className,children:g})}if(e.composable||e.dialog)return d(Pt.jsx(zO.Provider,{value:i,children:Pt.jsx(PO.Provider,{value:o,children:Pt.jsx(rw.Provider,{value:a,children:typeof e.children=="function"?e.children(l):e.children})})},"FloatingNode"));const f=rle(u,{as:G.Fragment},{key:"reference-node"},i),h=jO(c,{as:e.floatingAs||"div"},{},o);return d([f,Pt.jsx(rw.Provider,{value:a,children:h},"floating-node")])});ole.displayName="Float";function mMe(e){if(!e.children)return Pt.jsx(G.Fragment,{});const t=G.useMemo(()=>{const{as:o,children:a,...s}=e;return s},[e]),n=ele("Float.Reference"),{placement:r}=n,i={placement:r};return rle(typeof e.children=="function"?e.children(i):e.children,{...e,as:e.as||G.Fragment},t,n)}function gMe(e){if(!e.children)return Pt.jsx(G.Fragment,{});const t=G.useMemo(()=>{const{as:o,enter:a,enterFrom:s,enterTo:l,leave:u,leaveFrom:c,leaveTo:d,originClass:f,tailwindcssOriginClass:h,transitionChild:m,children:g,...y}=e;return y},[e]),n=tle("Float.Content"),{placement:r}=n,i={placement:r};return jO(typeof e.children=="function"?e.children(i):e.children,{...e,as:e.as||"div"},t,n)}function bMe(e){var u;const{arrowRef:t,placement:n,x:r,y:i}=nle("Float.Arrow"),o=G.useMemo(()=>{const{as:c,offset:d,children:f,...h}=e;return h},[e]),a={top:"bottom",right:"left",bottom:"top",left:"right"}[n.split("-")[0]],s={left:typeof r=="number"?`${r}px`:void 0,top:typeof i=="number"?`${i}px`:void 0,right:void 0,bottom:void 0,[a]:`${((u=e.offset)!=null?u:4)*-1}px`,...o.style};if(e.as===G.Fragment){const c={placement:n},d=typeof e.children=="function"?e.children(c):e.children;return!d||!G.isValidElement(d)?Pt.jsx(G.Fragment,{}):Pt.jsx(d.type,{...d.props,ref:t,style:s})}const l=e.as||"div";return Pt.jsx(l,{ref:t,...o,style:s,children:e.children})}function HO({onInitial:e,children:t,...n}){var f;const[r,i]=G.useState((f=n.show)!=null?f:!1),o=G.useMemo(()=>{const{as:h,show:m,placement:g,strategy:y,offset:v,shift:w,flip:Z,arrow:k,autoPlacement:_,hide:R,autoUpdate:I,zIndex:E,enter:X,enterFrom:Y,enterTo:C,leave:N,leaveFrom:V,leaveTo:F,originClass:O,tailwindcssOriginClass:P,portal:H,transform:M,middleware:j,onShow:J,onHide:q,onUpdate:K,...D}=n;return D},[n]),{floatingApi:a,arrowApi:s,placement:l,refs:u}=ile([r,i],n);G.useEffect(()=>{var h;i((h=n.show)!=null?h:!1)},[n.show]);function c(){r&&i(!1)}if(e({show:r,setShow:i,placement:l,refs:u}),!t)return Pt.jsx(G.Fragment,{});const d=jO(typeof t=="function"?t({placement:l,close:c}):t,{...n,as:n.as||G.Fragment,show:r},o,a);return Pt.jsx(rw.Provider,{value:s,children:d})}function yMe(e){function t({setShow:n,refs:r}){al("contextmenu",i=>{i.preventDefault(),r.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:i.clientX,y:i.clientY,top:i.clientY,left:i.clientX,right:i.clientX,bottom:i.clientY}}}),n(!0)}),hMe(r.floating,()=>{n(!1)})}return Pt.jsx(HO,{flip:!0,...e,show:!1,portal:!0,onInitial:t})}function vMe({globalHideCursor:e,...t}){function n({setShow:r,refs:i}){function o(){r(!0)}function a(){r(!1)}function s(d){i.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:d.clientX,y:d.clientY,top:d.clientY,left:d.clientX,right:d.clientX,bottom:d.clientY}}})}function l(d){o(),s(d)}function u(d){o(),s(d.touches[0])}const c=Qse(i.floating);c&&(G.useEffect(()=>{if((e||e===void 0)&&!c.getElementById("headlesui-float-cursor-style")){const d=c.createElement("style");return(c.head||c.getElementsByTagName("head")[0]).appendChild(d),d.id="headlesui-float-cursor-style",d.appendChild(c.createTextNode(["*, *::before, *::after {","  cursor: none !important;","}",".headlesui-float-cursor-root {","  pointer-events: none !important;","}"].join(`
`))),()=>{var f;return(f=c.getElementById("headlesui-float-cursor-style"))==null?void 0:f.remove()}}},[e]),"ontouchstart"in window||navigator.maxTouchPoints>0?(al("touchstart",u),al("touchend",a),al("touchmove",u)):(al("mouseenter",l),al("mouseleave",a),al("mousemove",l)))}return Pt.jsx(HO,{...t,portal:!0,className:"headlesui-float-cursor-root",onInitial:n})}const xMe=Object.assign(ole,{Reference:mMe,Content:gMe,Arrow:bMe,Virtual:HO,ContextMenu:yMe,Cursor:vMe}),ale=e=>{const{options:t=[],disable:n=!1,selectedKeys:r=[],onSelect:i,className:o="",required:a}=e,[s,l]=G.useState(t.filter(d=>r.includes(d.key)));G.useEffect(()=>{l(t.filter(d=>r.includes(d.key)))},[t,r]);const u=G.useRef(r);u.current=r;const c=G.useRef(i);return c.current=i,G.useEffect(()=>{var d;const f=s.map(h=>h.key);(f.length!==u.current.length||f.some(h=>!u.current.includes(h)))&&((d=c.current)==null||d.call(c,f))},[s]),n?x.createElement(G.Fragment,null,e.children):x.createElement($c,{multiple:!0,value:s,onChange:l},x.createElement(xMe,{as:"div",className:o},x.createElement("div",{className:"relative w-full flex items-center space-x-2"},x.createElement("span",{className:"flex-1 block truncate text-start"},e.children),x.createElement($c.Button,{className:"grow-0 shrink-0 flex items-center relative"},x.createElement(wae,{className:"h-4 w-4 text-gray-400","aria-hidden":"true"}),a&&s.length===0&&x.createElement("span",{className:"absolute top-0 right-0 h-1.5 w-1.5 translate-x-1/2 -translate-y-1/2 rounded-full bg-orange-500 pointer-events-none","aria-hidden":!0}),s.length>0&&x.createElement("span",{className:"absolute top-0 right-0 h-4 px-1 translate-x-1/2 -translate-y-1/2 scale-[67%] flex items-center justify-center rounded-full bg-indigo-400/75 text-white text-xs font-normal pointer-events-none"},s.length>10?"10+":s.length))),x.createElement(Jp,{as:G.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0"},x.createElement($c.Options,{className:"absolute mt-1 max-h-60 min-w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},t.map(d=>x.createElement($c.Option,{key:d.key,className:({active:f})=>`relative cursor-default select-none py-2 pl-10 pr-4 ${f?"bg-amber-100 text-amber-900":"text-gray-900"}`,value:d},({selected:f})=>x.createElement(x.Fragment,null,x.createElement("span",{className:`block truncate ${f?"font-medium":"font-normal"}`},d.label),f?x.createElement("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-amber-600"},x.createElement(xae,{className:"h-5 w-5","aria-hidden":"true"})):null)))))))},wMe=e=>{var f;const{provided:t,dkey:n,fIndex:r}=e,i=Tt(),{config:o,allFields:a}=i,s=i.allEncodings[n.id][r],{t:l}=ot("translation",{keyPrefix:"constant.aggregator"}),u=G.useMemo(()=>Kt.AGGREGATOR_LIST.map(h=>({value:h,label:l(h)})),[]),c=G.useMemo(()=>a.filter(h=>h.analyticType==="measure"&&h.fid!==xr).map(h=>({key:h.fid,label:h.name})),[a]),d=s.fid===vr?(f=o.folds)!=null?f:[]:null;return x.createElement(JYe,{ref:Yl(t.innerRef),colType:s.analyticType==="dimension"?"discrete":"continuous",...t.draggableProps,...t.dragHandleProps},d&&x.createElement(ale,{options:c,selectedKeys:d,onSelect:h=>{i.setVisualConfig("folds",h)}},x.createElement("span",{className:"flex-1 truncate"},s.name)),!d&&x.createElement("span",{className:"flex-1 truncate"},s.name),"",s.analyticType==="measure"&&s.fid!==ai&&o.defaultAggregated&&x.createElement(YO,{options:u,onSelect:h=>{i.setFieldAggregator(n.id,r,h)}},x.createElement("span",{className:"bg-transparent text-gray-700 float-right focus:outline-none focus:border-gray-500 dark:focus:border-gray-400 flex items-center ml-2"},s.aggName||"",x.createElement(Ux,{className:"w-3"}))),s.analyticType==="dimension"&&s.sort==="ascending"&&x.createElement(QM,{className:"float-right w-3",role:"status","aria-label":"Sorted in ascending order"}),s.analyticType==="dimension"&&s.sort==="descending"&&x.createElement($M,{className:"float-right w-3",role:"status","aria-label":"Sorted in descending order"}))},ZMe=ft(wMe),SMe=e=>{const{provided:t,dkey:n}=e,r=Tt(),{allEncodings:i}=r;return x.createElement(PYe,{...t.droppableProps,ref:Yl(t.innerRef)},i[n.id].map((o,a)=>x.createElement(Aw,{key:o.dragId,draggableId:o.dragId,index:a},(s,l)=>x.createElement(ZMe,{dkey:n,fIndex:a,provided:s}))))},kMe=ft(SMe),_Me=e=>{const t=Tt(),{config:n}=t,{geoms:r,coordSystem:i="generic"}=n,o=G.useMemo(()=>i==="geographic"?r[0]==="choropleth"?bv.filter(a=>a.id==="geoId"):bv.filter(a=>a.id==="longitude"||a.id==="latitude"):r[0]==="arc"?bv.filter(a=>a.id==="radius"||a.id==="theta"):bv.filter(a=>a.id==="columns"||a.id==="rows"),[r[0],i]);return x.createElement("div",null,o.map((a,s)=>x.createElement(MYe,{name:a.id,key:a.id},x.createElement(D0,{droppableId:a.id,direction:"horizontal"},(l,u)=>x.createElement(kMe,{dkey:a,provided:l})))))},GMe=ft(_Me),IMe=Ae.div`
    overflow: visible !important;
    width: calc(100% - 1.875rem);
`,WMe=e=>{var h;const{dkey:t,provided:n,snapshot:r}=e,i=Tt(),{allEncodings:o,config:a,allFields:s}=i,l=(h=a.folds)!=null?h:[],u=o[t.id][0],{t:c}=ot(),d=G.useMemo(()=>Kt.AGGREGATOR_LIST.map(m=>({value:m,label:c(`constant.aggregator.${m}`)})),[]),f=G.useMemo(()=>s.filter(m=>m.analyticType==="measure"&&m.fid!==xr).map(m=>({key:m.fid,label:m.name})),[s]);return x.createElement("div",{className:"p-1 select-none relative",...n.droppableProps,ref:Yl(n.innerRef)},x.createElement("div",{className:`p-1.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 flex item-center justify-center grow text-gray-500 dark:text-gray-400 ${r.draggingFromThisWith||r.isDraggingOver||!u?"opacity-100":"opacity-0"} relative z-0`},c("actions.drop_field")),u&&x.createElement(Aw,{key:u.dragId,draggableId:u.dragId,index:0},(m,g)=>{var y;return x.createElement("div",{ref:Yl(m.innerRef),...m.draggableProps,...m.dragHandleProps,className:"flex items-stretch absolute top-0 left-0 right-0 bottom-0 m-1"+((y=m.draggableProps.style)!=null&&y.transform?" z-10":"")},x.createElement("div",{onClick:()=>{i.removeField(t.id,0)},className:"grow-0 shrink-0 px-1.5 flex items-center justify-center bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-700 cursor-pointer"},x.createElement(hRe,{className:"w-4"})),x.createElement(IMe,{className:"flex-1 flex items-center border border-gray-200 dark:border-gray-700 border-l-0 px-2 space-x-2 truncate"},u.fid===vr&&x.createElement(ale,{options:f,selectedKeys:l,onSelect:v=>{i.setVisualConfig("folds",v)},className:"flex-1 truncate"},x.createElement("span",{className:"flex-1 truncate",title:u.name},u.name)),u.fid!==vr&&x.createElement("span",{className:"flex-1 truncate"},u.name)," ",u.analyticType==="measure"&&u.fid!==ai&&a.defaultAggregated&&x.createElement(YO,{options:d,onSelect:v=>{i.setFieldAggregator(t.id,0,v)}},x.createElement("span",{className:"bg-transparent text-gray-700 dark:text-gray-200 float-right focus:outline-none focus:border-gray-500 dark:focus:border-gray-400 flex items-center ml-2"},u.aggName||"",x.createElement(Ux,{className:"w-3"})))))}))},EMe=ft(WMe),Zy=bv.filter(e=>["color","opacity","size","shape","details","text"].includes(e.id)),XMe=e=>{const t=Tt(),{config:n}=t,{geoms:r}=n,i=G.useMemo(()=>{switch(r[0]){case"bar":case"tick":case"arc":case"line":case"area":case"boxplot":return Zy.filter(o=>o.id!=="shape");case"text":return Zy.filter(o=>o.id==="text"||o.id==="color"||o.id==="size"||o.id==="opacity");case"table":return[];case"poi":return Zy.filter(o=>o.id==="color"||o.id==="opacity"||o.id==="size"||o.id==="details");case"choropleth":return Zy.filter(o=>o.id==="color"||o.id==="opacity"||o.id==="text"||o.id==="details");default:return Zy.filter(o=>o.id!=="text")}},[r[0]]);return x.createElement("div",null,i.map((o,a,{length:s})=>x.createElement(OYe,{name:o.id,key:o.id,style:{position:"relative"}},x.createElement(D0,{droppableId:o.id,direction:"horizontal"},(l,u)=>x.createElement(EMe,{dkey:o,provided:l,snapshot:u})))))},LMe=ft(XMe),sg=e=>{const{dataType:t,analyticType:n}=e,r=`w-3 inline-block ${n==="dimension"?"text-blue-500 dark:text-blue-400":"text-purple-500 dark:text-purple-400"}`;switch(t){case"quantitative":case"ordinal":return x.createElement(Zae,{className:r});case"temporal":return x.createElement(DLe,{className:r});default:return x.createElement(rRe,{className:r})}},RMe=e=>{const{["aria-expanded"]:t,onPress:n,disabled:r,className:i="",...o}=e,a=G.useCallback(l=>{l.preventDefault(),l.stopPropagation(),n==null||n()},[n]),s=G.useCallback(l=>{switch(l.key){case"Enter":case"Space":{n==null||n();break}default:return}l.preventDefault(),l.stopPropagation()},[n]);return G.useMemo(()=>({...o,className:`${i} text-gray-500 dark:text-gray-400 ${r?"cursor-default text-opacity-50":"cursor-pointer rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-indigo-500 hover:bg-indigo-100/20 dark:hover:bg-indigo-800/20 hover:text-indigo-700 dark:hover:text-indigo-200"}`,role:"button","aria-haspopup":"menu","aria-expanded":t,"aria-disabled":r,tabIndex:r?void 0:0,onClick:a,onKeyDown:s}),[a,s,t,r,i,o])};function CMe(...e){return e.filter(Boolean).join(" ")}const VMe=Ae.div`
    display: grid;
    grid-template-columns: max-content 1fr max-content;
    & > div {
        /* row */
        display: contents;
        > * {
            background: inherit;
            cursor: pointer;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            overflow: hidden;
            padding-block: 0.2rem;
            padding-inline: 0.2rem;
            &:first-child {
                padding-left: 0.4rem;
            }
        }
        &[aria-disabled="true"] > * {
            opacity: 0.5;
            cursor: default;
        }
    }
`,YMe=G.memo(function(e){const{children:t,...n}=e;return x.createElement("div",{className:"absolute top-0 right-0"},x.createElement("div",{...n,style:{...n.style,position:"fixed"}},t))}),sle=G.createContext(null),TMe=G.memo(function({item:e,path:t}){const{icon:n,label:r,disabled:i=!1,children:o=[],onPress:a}=e,[s,l]=G.useState(!1),[u,c]=G.useState(!1),d=G.useContext(sle),f=o.length>0&&d.path.length>0&&t.length<=d.path.length&&t.every((g,y)=>g===d.path[y]),h=!i&&(s||u||f),m=G.useMemo(()=>{let g=d.path.findIndex((y,v)=>y!==t[v]);return g!==-1?d.path.slice(0,g):d.path},[d.path,t]);return G.useEffect(()=>{o.length===0&&(s||u)&&m.join(".")!==d.path.join(".")&&d.setPath(m)},[o.length,s,u,d,m]),x.createElement("div",{tabIndex:i?void 0:0,role:"button","aria-haspopup":o.length?"menu":void 0,"aria-disabled":i,className:CMe(h?"bg-gray-100/50 text-gray-900 dark:bg-gray-800/50 dark:text-gray-50":"text-gray-700 dark:text-gray-200",i?"":"cursor-pointer","text-xs"),onClick:g=>{if(i||o.length){g.stopPropagation(),g.preventDefault();return}i||(a==null||a(),d.onDismiss())},onFocus:()=>{i||c(!0),o.length&&!f&&d.setPath(t)},onBlur:()=>{c(!1)},onMouseEnter:()=>{l(!0),o.length&&!f&&!i&&d.setPath(t)},onMouseLeave:()=>{l(!1)},onKeyDown:g=>{i||o.length||(g.key==="Enter"||g.key==="Space")&&(a==null||a(),d.onDismiss())}},x.createElement("div",{"aria-hidden":"true"},n),x.createElement("div",null,x.createElement("span",{className:"truncate self-start"},r)),x.createElement("div",{"aria-hidden":"true",className:"relative"},o.length>0&&x.createElement(x.Fragment,null,x.createElement(QLe,{className:"w-4 h-4","aria-hidden":"true"}),f&&x.createElement(YMe,{className:"z-50 min-w-[8rem] max-w-[16rem] bg-white dark:bg-zinc-900 shadow-lg border border-gray-50 dark:border-gray-800 focus:outline-none"},x.createElement(lle,{items:o,path:t})))))}),lle=G.memo(function({items:e,path:t,title:n}){return x.createElement("div",{className:"py-1 -mx-px"},n&&x.createElement("header",{className:"px-3 py-1 mb-1.5 text-xs text-gray-500/75 dark:text-gray-400/75 truncate"},n),x.createElement(VMe,null,e.map((r,i)=>x.createElement(TMe,{key:i,item:r,path:[...t,i]}))))}),NMe=G.memo(function({onDismiss:e,children:t}){const[n,r]=G.useState([]);return x.createElement(sle.Provider,{value:{path:n,setPath:r,onDismiss:e}},t)}),FMe=G.memo(function({onDismiss:e,items:t,title:n}){return x.createElement(NMe,{onDismiss:e},x.createElement(lle,{title:n,items:t,path:[]}))}),ule=G.createContext(null),MMe=e=>{const{menu:t=[],disabled:n=!1,enableContextMenu:r=!1,title:i,...o}=e,[a,s]=G.useState([0,0]),l=G.useRef(null);return n||t.length===0?x.createElement("div",{...o},e.children):x.createElement(pp,{as:G.Fragment},({open:u,close:c})=>x.createElement(ule.Provider,{value:{disabled:n,expanded:u,moveTo(d,f){s([d,f])},open(){var d;u||(d=l.current)==null||d.click()},close:c,_items:t}},x.createElement(pp.Button,{ref:l,className:"sr-only","aria-hidden":!0}),x.createElement("div",{onContextMenu:d=>{var f;d.preventDefault(),d.stopPropagation(),s([d.clientX,d.clientY]),u||(f=l.current)==null||f.click()},...o},e.children),u&&x.createElement("div",{className:"fixed inset-0 z-50 bg-transparent","aria-hidden":"true"}),x.createElement(Jp,{as:G.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95"},x.createElement(pp.Items,{className:"fixed z-50 mt-0.5 min-w-[8rem] max-w-[16rem] origin-top-left bg-white dark:bg-zinc-900 shadow-lg border border-gray-50 dark:border-gray-800 focus:outline-none",style:{left:a[0],top:a[1]}},x.createElement(FMe,{title:i,items:t,onDismiss:c})))))},OMe=function(e){var c;const{as:t="button",onPress:n,children:r,...i}=e,o=t,a=G.useContext(ule),s=G.useRef(null),l=G.useCallback(()=>{if(a!=null&&a.disabled)return;const d=s.current;if(d){const f=d.getBoundingClientRect();a==null||a.moveTo(f.x+f.width,f.y)}if(n)return n(a!=null?a:void 0);a!=null&&a.expanded?a.close():a==null||a.open()},[a,n]),u=RMe({...i,"aria-expanded":(c=a==null?void 0:a.expanded)!=null?c:!1,onPress:l});return a!=null&&a.disabled||!(a!=null&&a._items.length)?x.createElement("div",{"aria-hidden":!0}):x.createElement(o,{...u,ref:s},r)},S0=Object.assign(MMe,{Button:G.memo(OMe)}),vG=Ae.div`
    transform: ${e=>!e.isDragging&&"translate(0px, 0px) !important"};
    user-select: none;
    align-items: center;
    overflow: hidden;
    > *:not(span) {
        flex: 0 0 unset;
    }
    > span {
        flex: 1;
        display: inline-block;
        padding-inline: 0.1em;
        /* truncate */
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
    :has([role="button"]:hover) {
        background-color: unset;
    }
`,zMe=async(e,t,n=0,r)=>await e({workflow:[...r!=null&&r.filters&&r.filters.length>0?[{type:"filter",filters:r.filters}]:[],{type:"view",query:[{op:"raw",fields:["*"]}]},...r!=null&&r.sorting?[{type:"sort",by:[r.sorting.fid],sort:r.sorting.sort}]:[]],limit:t,offset:n*t}),xG=async(e,t,n)=>t.length===1&&t[0].type==="view"&&t[0].query.length===1&&t[0].query[0].op==="raw"&&t[0].query[0].fields.length===0?[]:await e({workflow:t,limit:n}),cle=async(e,t,n)=>{var r;const{values:i=!0,range:o=!0,valuesMeta:a=!0,sortBy:s="none"}=n,l=`count_${t.fid}`,u=`total_distinct_${t.fid}`,c=`min_${t.fid}`,d=`max_${t.fid}`,f=t.computed?[{type:"transform",transform:[{expression:t.expression,key:t.fid}]}]:[],h={workflow:[...f,{type:"view",query:[{op:"aggregate",groupBy:[],measures:[{field:t.fid,agg:"distinctCount",asFieldKey:u},{field:"*",agg:"count",asFieldKey:"count"}]}]}]},m={workflow:[...f,{type:"view",query:[{op:"aggregate",groupBy:[t.fid],measures:[{field:"*",agg:"count",asFieldKey:l}]}]},...s==="none"?[]:[{type:"sort",by:[s.startsWith("value")?t.fid:l],sort:s.endsWith("dsc")?"descending":"ascending"}]],limit:n.valuesLimit,offset:n.valuesOffset},[g={[u]:0,count:0}]=a?await e(h):[{[u]:0,count:0}],y=i?await e(m):[],v={workflow:[...f,{type:"view",query:[{op:"aggregate",groupBy:[],measures:[{field:t.fid,agg:"min",asFieldKey:c},{field:t.fid,agg:"max",asFieldKey:d}]}]}]},[w={[c]:0,[d]:0}]=o?await e(v):[{[c]:0,[d]:0}],Z=(r=n.selectedCount)!=null&&r.size?{workflow:[...f,{type:"filter",filters:[{fid:t.fid,rule:{type:"one of",value:[...n.selectedCount]}}]},{type:"view",query:[{op:"aggregate",groupBy:[],measures:[{field:"*",agg:"count",asFieldKey:"count"}]}]}]}:null,[k={count:0}]=Z?await e(Z):[];return{values:y.map(_=>({value:_[t.fid],count:_[l]})),valuesMeta:{total:g.count,distinctTotal:g[u]},range:[w[c],w[d]],selectedCount:k.count}};async function dY(e,t){var n;const r=await e({workflow:[{type:"view",query:[{op:"raw",fields:[t]}]}],limit:1,offset:0});return(n=r==null?void 0:r[0])==null?void 0:n[t]}async function PMe(e,t){const n=await dY(e,t),r=tY(n),i=`min_${t}`,o=`max_${t}`,a={workflow:[{type:"view",query:[{op:"aggregate",groupBy:[],measures:[{field:t,agg:"min",asFieldKey:i,format:r},{field:t,agg:"max",asFieldKey:o,format:r}]}]}]},[s={[i]:0,[o]:0}]=await e(a);return[new Date(s[i]).getTime(),new Date(s[o]).getTime()]}const jMe=e=>e.filter(Boolean),dle=e=>{const t=Tt(),n=t.currentVis.encodings[e],{t:r}=ot("translation",{keyPrefix:"field_menu"}),i=cc();return G.useMemo(()=>n.map((o,a)=>{var s;const l=((s=o.expression)==null?void 0:s.op)==="dateTimeDrill",u=[ai,vr,xr].includes(o.fid);return jMe([e==="dimensions"&&{label:r("to_mea"),disabled:u,onPress(){t.moveField("dimensions",a,"measures",t.viewMeasures.length)}},e==="measures"&&{label:r("to_dim"),disabled:u,onPress(){t.moveField("measures",a,"dimensions",t.viewDimensions.length)}},{label:r("new_calc"),disabled:o.semanticType==="nominal"||o.semanticType==="ordinal"||u,children:[{label:r("bin"),onPress(){t.createBinField(e,a,"bin")}},{label:r("binCount"),disabled:o.semanticType==="nominal"||o.semanticType==="ordinal",onPress(){t.createBinField(e,a,"binCount")}},{label:r("log",{base:10}),disabled:o.semanticType==="nominal"||o.semanticType==="ordinal",onPress(){t.createLogField(e,a,"log",10)}},{label:r("log",{base:2}),disabled:o.semanticType==="nominal"||o.semanticType==="ordinal",onPress(){t.createLogField(e,a,"log",2)}},{label:r("binCustom"),disabled:o.semanticType==="nominal"||o.semanticType==="ordinal",onPress(){t.setShowBinSettingPanel(!0),t.setCreateField({channel:e,index:a})}},{label:r("logCustom"),disabled:o.semanticType==="nominal"||o.semanticType==="ordinal",onPress(){t.setShowLogSettingPanel(!0),t.setCreateField({channel:e,index:a})}}]},{label:r("semantic_type.name"),disabled:u,children:["nominal","ordinal","quantitative","temporal"].map(c=>({label:r(`semantic_type.types.${c}`),disabled:o.semanticType===c,onPress(){const d=o.analyticType==="dimension"?"dimensions":"measures";t.changeSemanticType(d,a,c)}}))},(o.semanticType==="temporal"||l)&&{label:r("drill.name"),disabled:u,children:yCe.map(c=>{var d,f;return{label:r(`drill.levels.${c}`),disabled:l&&((f=(d=o.expression)==null?void 0:d.params.find(h=>h.type==="value"))==null?void 0:f.value)===c,onPress(){var y;const h=(y=l?t.allFields.find(v=>{var w,Z;return v.fid===((Z=(w=o.expression)==null?void 0:w.params.find(k=>k.type==="field"))==null?void 0:Z.value)}):null)!=null?y:o,m=h.analyticType==="dimension"?"dimensions":"measures",g=t.allFields.findIndex(v=>v.fid===h.fid);dY(i,h.fid).then(tY).then(v=>t.createDateTimeDrilledField(m,g,c,`${r(`drill.levels.${c}`)} (${h.name||h.fid})`,v))}}})},(o.semanticType==="temporal"||l)&&{label:r("drill.feature_name"),disabled:u,children:vCe.map(c=>{var d,f;return{label:r(`drill.levels.${c}`),disabled:l&&((f=(d=o.expression)==null?void 0:d.params.find(h=>h.type==="value"))==null?void 0:f.value)===c,onPress(){var y;const h=(y=l?t.allFields.find(v=>{var w,Z;return v.fid===((Z=(w=o.expression)==null?void 0:w.params.find(k=>k.type==="field"))==null?void 0:Z.value)}):null)!=null?y:o,m=h.analyticType==="dimension"?"dimensions":"measures",g=t.allFields.findIndex(v=>v.fid===h.fid);dY(i,h.fid).then(tY).then(v=>t.createDateFeatureField(m,g,c,`${r(`drill.levels.${c}`)} [${h.name||h.fid}]`,v))}}})}])}),[e,n,t,r,i])},HMe=e=>{const{provided:t}=e,n=Tt(),{dimensions:r}=n,i=dle("dimensions");return x.createElement("div",{...t.droppableProps,ref:Yl(t.innerRef)},r.map((o,a)=>x.createElement(Aw,{key:o.dragId,draggableId:o.dragId,index:a},(s,l)=>x.createElement(S0,{title:o.name||o.fid,menu:i[a],enableContextMenu:!0,disabled:l.isDragging},x.createElement(vG,{className:`flex dark:text-white pt-0.5 pb-0.5 pl-2 pr-2 mx-0 m-1 text-xs hover:bg-blue-100 dark:hover:bg-blue-800 rounded-full truncate border border-transparent ${l.isDragging?"bg-blue-100 dark:bg-blue-800":""}`,ref:Yl(s.innerRef),isDragging:l.isDragging,...s.draggableProps,...s.dragHandleProps},x.createElement(sg,{dataType:o.semanticType,analyticType:o.analyticType}),x.createElement("span",{className:"ml-0.5",title:o.name},o.name),x.createElement(S0.Button,{as:"div"},x.createElement($x,{className:"w-4 h-4"}))),x.createElement(vG,{className:`dark:text-white pt-0.5 pb-0.5 pl-2 pr-2 mx-0 m-1 text-xs hover:bg-blue-100 dark:hover:bg-blue-800 rounded-full border-blue-400 border truncate ${l.isDragging?"bg-blue-100 dark:bg-blue-800 flex":"hidden"}`,isDragging:l.isDragging},x.createElement(sg,{dataType:o.semanticType,analyticType:o.analyticType}),x.createElement("span",{className:"ml-0.5",title:o.name},o.name),x.createElement(S0.Button,{as:"div"},x.createElement($x,{className:"w-4 h-4"})))))))},JMe=ft(HMe),BMe=e=>{const{provided:t}=e,n=Tt(),{measures:r}=n,i=dle("measures");return x.createElement("div",{...t.droppableProps,ref:Yl(t.innerRef)},r.map((o,a)=>x.createElement(Aw,{key:o.dragId,draggableId:o.dragId,index:a},(s,l)=>x.createElement("div",{className:"block"},x.createElement(S0,{title:o.name||o.fid,menu:i[a],enableContextMenu:!0,disabled:l.isDragging||o.fid===vr},x.createElement(vG,{className:`flex dark:text-white pt-0.5 pb-0.5 pl-2 pr-2 mx-0 m-1 text-xs hover:bg-purple-100 dark:hover:bg-purple-800 rounded-full truncate border border-transparent ${l.isDragging?"bg-purple-100 dark:bg-purple-800":""}`,isDragging:l.isDragging,ref:Yl(s.innerRef),...s.draggableProps,...s.dragHandleProps},x.createElement(sg,{dataType:o.semanticType,analyticType:o.analyticType}),x.createElement("span",{className:"ml-0.5",title:o.name},o.name),x.createElement(S0.Button,{as:"div"},x.createElement($x,{className:"w-4 h-4"}))),x.createElement(vG,{className:`dark:text-white pt-0.5 pb-0.5 pl-2 pr-2 mx-0 m-1 text-xs hover:bg-purple-100 dark:hover:bg-purple-800 rounded-full border-purple-400 border truncate ${l.isDragging?"bg-purple-100 dark:bg-purple-800 flex":"hidden"}`,isDragging:l.isDragging},x.createElement(sg,{dataType:o.semanticType,analyticType:o.analyticType}),x.createElement("span",{className:"ml-0.5",title:o.name},o.name),x.createElement(S0.Button,{as:"div"},x.createElement($x,{className:"w-4 h-4"}))))))))},KMe=ft(BMe),DMe=Ae.div`
    @media (min-width: 640px) {
        height: 680px;
    }
`,AMe=e=>{const{t}=ot("translation",{keyPrefix:"main.tabpanel.DatasetFields"});return x.createElement(DMe,{className:"p-1 m-0.5 border border-gray-200 dark:border-gray-700 flex sm:flex-col",style:{paddingBlock:0,paddingInline:"0.6em"}},x.createElement("h4",{className:"text-xs mb-2 flex-grow-0 cursor-default select-none mt-2"},t("field_list")),x.createElement("div",{className:"pd-1 overflow-y-auto",style:{maxHeight:"380px",minHeight:"100px"}},x.createElement(D0,{droppableId:"dimensions",direction:"vertical"},(n,r)=>x.createElement(JMe,{provided:n}))),x.createElement("div",{className:"border-t dark:border-gray-700 flex-grow pd-1 overflow-y-auto"},x.createElement(D0,{droppableId:"measures",direction:"vertical"},(n,r)=>x.createElement(KMe,{provided:n}))))};var UMe=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Un=globalThis&&globalThis.__assign||function(){return Un=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Un.apply(this,arguments)},c6={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},d6={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},VS={width:"20px",height:"20px",position:"absolute"},$Me={top:Un(Un({},c6),{top:"-5px"}),right:Un(Un({},d6),{left:void 0,right:"-5px"}),bottom:Un(Un({},c6),{top:void 0,bottom:"-5px"}),left:Un(Un({},d6),{left:"-5px"}),topRight:Un(Un({},VS),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Un(Un({},VS),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Un(Un({},VS),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Un(Un({},VS),{left:"-10px",top:"-10px",cursor:"nw-resize"})},QMe=function(e){UMe(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.onMouseDown=function(r){n.props.onResizeStart(r,n.props.direction)},n.onTouchStart=function(r){n.props.onResizeStart(r,n.props.direction)},n}return t.prototype.render=function(){return G.createElement("div",{className:this.props.className||"",style:Un(Un({position:"absolute",userSelect:"none"},$Me[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},t}(G.PureComponent),qMe=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nl=globalThis&&globalThis.__assign||function(){return nl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},nl.apply(this,arguments)},eOe={width:"auto",height:"auto"},YS=function(e,t,n){return Math.max(Math.min(e,n),t)},f6=function(e,t){return Math.round(e/t)*t},am=function(e,t){return new RegExp(e,"i").test(t)},TS=function(e){return!!(e.touches&&e.touches.length)},tOe=function(e){return!!((e.clientX||e.clientX===0)&&(e.clientY||e.clientY===0))},p6=function(e,t,n){n===void 0&&(n=0);var r=t.reduce(function(o,a,s){return Math.abs(a-e)<Math.abs(t[o]-e)?s:o},0),i=Math.abs(t[r]-e);return n===0||i<n?t[r]:e},zL=function(e){return e=e.toString(),e==="auto"||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:e+"px"},NS=function(e,t,n,r){if(e&&typeof e=="string"){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%")){var i=Number(e.replace("%",""))/100;return t*i}if(e.endsWith("vw")){var i=Number(e.replace("vw",""))/100;return n*i}if(e.endsWith("vh")){var i=Number(e.replace("vh",""))/100;return r*i}}return e},nOe=function(e,t,n,r,i,o,a){return r=NS(r,e.width,t,n),i=NS(i,e.height,t,n),o=NS(o,e.width,t,n),a=NS(a,e.height,t,n),{maxWidth:typeof r>"u"?void 0:Number(r),maxHeight:typeof i>"u"?void 0:Number(i),minWidth:typeof o>"u"?void 0:Number(o),minHeight:typeof a>"u"?void 0:Number(a)}},rOe=["as","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],h6="__resizable_base__",iOe=function(e){qMe(t,e);function t(n){var r=e.call(this,n)||this;return r.ratio=1,r.resizable=null,r.parentLeft=0,r.parentTop=0,r.resizableLeft=0,r.resizableRight=0,r.resizableTop=0,r.resizableBottom=0,r.targetLeft=0,r.targetTop=0,r.appendBase=function(){if(!r.resizable||!r.window)return null;var i=r.parentNode;if(!i)return null;var o=r.window.document.createElement("div");return o.style.width="100%",o.style.height="100%",o.style.position="absolute",o.style.transform="scale(0, 0)",o.style.left="0",o.style.flex="0 0 100%",o.classList?o.classList.add(h6):o.className+=h6,i.appendChild(o),o},r.removeBase=function(i){var o=r.parentNode;o&&o.removeChild(i)},r.ref=function(i){i&&(r.resizable=i)},r.state={isResizing:!1,width:typeof(r.propsSize&&r.propsSize.width)>"u"?"auto":r.propsSize&&r.propsSize.width,height:typeof(r.propsSize&&r.propsSize.height)>"u"?"auto":r.propsSize&&r.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},r.onResizeStart=r.onResizeStart.bind(r),r.onMouseMove=r.onMouseMove.bind(r),r.onMouseUp=r.onMouseUp.bind(r),r}return Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||eOe},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var n=0,r=0;if(this.resizable&&this.window){var i=this.resizable.offsetWidth,o=this.resizable.offsetHeight,a=this.resizable.style.position;a!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:i,r=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:o,this.resizable.style.position=a}return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var n=this,r=this.props.size,i=function(s){if(typeof n.state[s]>"u"||n.state[s]==="auto")return"auto";if(n.propsSize&&n.propsSize[s]&&n.propsSize[s].toString().endsWith("%")){if(n.state[s].toString().endsWith("%"))return n.state[s].toString();var l=n.getParentSize(),u=Number(n.state[s].toString().replace("px","")),c=u/l[s]*100;return c+"%"}return zL(n.state[s])},o=r&&typeof r.width<"u"&&!this.state.isResizing?zL(r.width):i("width"),a=r&&typeof r.height<"u"&&!this.state.isResizing?zL(r.height):i("height");return{width:o,height:a}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var r=!1,i=this.parentNode.style.flexWrap;i!=="wrap"&&(r=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var o={width:n.offsetWidth,height:n.offsetHeight};return r&&(this.parentNode.style.flexWrap=i),this.removeBase(n),o},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(n,r){var i=this.propsSize&&this.propsSize[r];return this.state[r]==="auto"&&this.state.original[r]===n&&(typeof i>"u"||i==="auto")?"auto":n},t.prototype.calculateNewMaxFromBoundary=function(n,r){var i=this.props.boundsByDirection,o=this.state.direction,a=i&&am("left",o),s=i&&am("top",o),l,u;if(this.props.bounds==="parent"){var c=this.parentNode;c&&(l=a?this.resizableRight-this.parentLeft:c.offsetWidth+(this.parentLeft-this.resizableLeft),u=s?this.resizableBottom-this.parentTop:c.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(l=a?this.resizableRight:this.window.innerWidth-this.resizableLeft,u=s?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(l=a?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),u=s?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return l&&Number.isFinite(l)&&(n=n&&n<l?n:l),u&&Number.isFinite(u)&&(r=r&&r<u?r:u),{maxWidth:n,maxHeight:r}},t.prototype.calculateNewSizeFromDirection=function(n,r){var i=this.props.scale||1,o=this.props.resizeRatio||1,a=this.state,s=a.direction,l=a.original,u=this.props,c=u.lockAspectRatio,d=u.lockAspectRatioExtraHeight,f=u.lockAspectRatioExtraWidth,h=l.width,m=l.height,g=d||0,y=f||0;return am("right",s)&&(h=l.width+(n-l.x)*o/i,c&&(m=(h-y)/this.ratio+g)),am("left",s)&&(h=l.width-(n-l.x)*o/i,c&&(m=(h-y)/this.ratio+g)),am("bottom",s)&&(m=l.height+(r-l.y)*o/i,c&&(h=(m-g)*this.ratio+y)),am("top",s)&&(m=l.height-(r-l.y)*o/i,c&&(h=(m-g)*this.ratio+y)),{newWidth:h,newHeight:m}},t.prototype.calculateNewSizeFromAspectRatio=function(n,r,i,o){var a=this.props,s=a.lockAspectRatio,l=a.lockAspectRatioExtraHeight,u=a.lockAspectRatioExtraWidth,c=typeof o.width>"u"?10:o.width,d=typeof i.width>"u"||i.width<0?n:i.width,f=typeof o.height>"u"?10:o.height,h=typeof i.height>"u"||i.height<0?r:i.height,m=l||0,g=u||0;if(s){var y=(f-m)*this.ratio+g,v=(h-m)*this.ratio+g,w=(c-g)/this.ratio+m,Z=(d-g)/this.ratio+m,k=Math.max(c,y),_=Math.min(d,v),R=Math.max(f,w),I=Math.min(h,Z);n=YS(n,k,_),r=YS(r,R,I)}else n=YS(n,c,d),r=YS(r,f,h);return{newWidth:n,newHeight:r}},t.prototype.setBoundingClientRect=function(){if(this.props.bounds==="parent"){var n=this.parentNode;if(n){var r=n.getBoundingClientRect();this.parentLeft=r.left,this.parentTop=r.top}}if(this.props.bounds&&typeof this.props.bounds!="string"){var i=this.props.bounds.getBoundingClientRect();this.targetLeft=i.left,this.targetTop=i.top}if(this.resizable){var o=this.resizable.getBoundingClientRect(),a=o.left,s=o.top,l=o.right,u=o.bottom;this.resizableLeft=a,this.resizableRight=l,this.resizableTop=s,this.resizableBottom=u}},t.prototype.onResizeStart=function(n,r){if(!(!this.resizable||!this.window)){var i=0,o=0;if(n.nativeEvent&&tOe(n.nativeEvent)?(i=n.nativeEvent.clientX,o=n.nativeEvent.clientY):n.nativeEvent&&TS(n.nativeEvent)&&(i=n.nativeEvent.touches[0].clientX,o=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var a=this.props.onResizeStart(n,r,this.resizable);if(a===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var s,l=this.window.getComputedStyle(this.resizable);if(l.flexBasis!=="auto"){var u=this.parentNode;if(u){var c=this.window.getComputedStyle(u).flexDirection;this.flexDir=c.startsWith("row")?"row":"column",s=l.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var d={original:{x:i,y:o,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:nl(nl({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:r,flexBasis:s};this.setState(d)}},t.prototype.onMouseMove=function(n){var r=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&TS(n))try{n.preventDefault(),n.stopPropagation()}catch(O){}var i=this.props,o=i.maxWidth,a=i.maxHeight,s=i.minWidth,l=i.minHeight,u=TS(n)?n.touches[0].clientX:n.clientX,c=TS(n)?n.touches[0].clientY:n.clientY,d=this.state,f=d.direction,h=d.original,m=d.width,g=d.height,y=this.getParentSize(),v=nOe(y,this.window.innerWidth,this.window.innerHeight,o,a,s,l);o=v.maxWidth,a=v.maxHeight,s=v.minWidth,l=v.minHeight;var w=this.calculateNewSizeFromDirection(u,c),Z=w.newHeight,k=w.newWidth,_=this.calculateNewMaxFromBoundary(o,a);this.props.snap&&this.props.snap.x&&(k=p6(k,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(Z=p6(Z,this.props.snap.y,this.props.snapGap));var R=this.calculateNewSizeFromAspectRatio(k,Z,{width:_.maxWidth,height:_.maxHeight},{width:s,height:l});if(k=R.newWidth,Z=R.newHeight,this.props.grid){var I=f6(k,this.props.grid[0]),E=f6(Z,this.props.grid[1]),X=this.props.snapGap||0;k=X===0||Math.abs(I-k)<=X?I:k,Z=X===0||Math.abs(E-Z)<=X?E:Z}var Y={width:k-h.width,height:Z-h.height};if(m&&typeof m=="string"){if(m.endsWith("%")){var C=k/y.width*100;k=C+"%"}else if(m.endsWith("vw")){var N=k/this.window.innerWidth*100;k=N+"vw"}else if(m.endsWith("vh")){var V=k/this.window.innerHeight*100;k=V+"vh"}}if(g&&typeof g=="string"){if(g.endsWith("%")){var C=Z/y.height*100;Z=C+"%"}else if(g.endsWith("vw")){var N=Z/this.window.innerWidth*100;Z=N+"vw"}else if(g.endsWith("vh")){var V=Z/this.window.innerHeight*100;Z=V+"vh"}}var F={width:this.createSizeForCssProperty(k,"width"),height:this.createSizeForCssProperty(Z,"height")};this.flexDir==="row"?F.flexBasis=F.width:this.flexDir==="column"&&(F.flexBasis=F.height),qn.flushSync(function(){r.setState(F)}),this.props.onResize&&this.props.onResize(n,f,this.resizable,Y)}},t.prototype.onMouseUp=function(n){var r=this.state,i=r.isResizing,o=r.direction,a=r.original;if(!(!i||!this.resizable)){var s={width:this.size.width-a.width,height:this.size.height-a.height};this.props.onResizeStop&&this.props.onResizeStop(n,o,this.resizable,s),this.props.size&&this.setState(this.props.size),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:nl(nl({},this.state.backgroundStyle),{cursor:"auto"})})}},t.prototype.updateSize=function(n){this.setState({width:n.width,height:n.height})},t.prototype.renderResizer=function(){var n=this,r=this.props,i=r.enable,o=r.handleStyles,a=r.handleClasses,s=r.handleWrapperStyle,l=r.handleWrapperClass,u=r.handleComponent;if(!i)return null;var c=Object.keys(i).map(function(d){return i[d]!==!1?G.createElement(QMe,{key:d,direction:d,onResizeStart:n.onResizeStart,replaceStyles:o&&o[d],className:a&&a[d]},u&&u[d]?u[d]:null):null});return G.createElement("div",{className:l,style:s},c)},t.prototype.render=function(){var n=this,r=Object.keys(this.props).reduce(function(a,s){return rOe.indexOf(s)!==-1||(a[s]=n.props[s]),a},{}),i=nl(nl(nl({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(i.flexBasis=this.state.flexBasis);var o=this.props.as||"div";return G.createElement(o,nl({ref:this.ref,style:i,className:this.props.className},r),this.state.isResizing&&G.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(G.PureComponent);const fle=G.createContext(null),ab=()=>{const e=G.useContext(fle);return e&&"current"in e?e:{current:null}},L3=G.forwardRef(({children:e},t)=>(G.useImperativeHandle(t,()=>{let n="idle",r=[];return{get renderStatus(){return n},onRenderStatusChange:i=>(r.push(i),()=>{r=r.filter(o=>o!==i)}),updateRenderStatus:i=>{n!==i&&(n=i,r.forEach(o=>o(n)))},chartCount:1,chartIndex:0,openChart(){},exportChart:async(i="svg")=>({mode:i,title:"",nCols:0,nRows:0,charts:[],container:()=>null}),exportChartList:async function*(i="svg"){yield{mode:i,total:1,completed:0,index:0,data:{mode:i,title:"",nCols:0,nRows:0,charts:[],container:()=>null},hasNext:!1}}}},[]),x.createElement(fle.Provider,{value:t},e))),oOe=e=>t=>x.createElement(L3,null,x.createElement(e,{...t}));function ple(e){return e.isCollapsed||e.children.length===0?1:e.children.map(ple).reduce((t,n)=>t+n,0)}function hle(e,t,n,r,i,o,a){const s=ple(e),{isCollapsed:l}=e;if(!(n>t.length)&&(r[r.length-1].push(x.createElement("td",{key:`${n}-${e.fieldKey}-${e.value}`,className:"bg-zinc-100 dark:bg-zinc-800 text-gray-800 dark:text-gray-100 align-top whitespace-nowrap p-2 text-xs m-1 border border-gray-300",colSpan:l?e.height+1:1,rowSpan:l?Math.max(i,1):s*Math.max(i,1)},x.createElement("div",{className:"flex"},x.createElement("div",null,e.value),e.height>0&&e.key!=="__total"&&a&&x.createElement(x.Fragment,null,l&&x.createElement(_ae,{className:"w-3 ml-1 self-center cursor-pointer",onClick:()=>o(e)}),!l&&x.createElement(kae,{className:"w-3 ml-1 self-center cursor-pointer",onClick:()=>o(e)}))))),!l))for(let u=0;u<e.children.length;u++){const c=e.children[u];hle(c,t,n+1,r,i,o,a),u<e.children.length-1&&r.push([])}}const aOe=e=>{const{data:t,dimsInRow:n,measInRow:r,onHeaderCollapse:i}=e,o=G.useMemo(()=>{const a=[[]];if(hle(t,n,0,a,r.length,i,e.enableCollapse),a[0].shift(),r.length>0){const s=[];for(let l of a){s.push([...l,x.createElement("td",{key:`0-${r[0].fid}-${r[0].aggName}`,className:"bg-zinc-100 dark:bg-zinc-800 text-gray-800 dark:text-gray-100 whitespace-nowrap p-2 text-xs m-1 border border-gray-300"},r[0].aggName,"(",r[0].name,")")]);for(let u=1;u<r.length;u++)s.push([x.createElement("td",{key:`${u}-${r[u].fid}-${r[u].aggName}`,className:"bg-zinc-100 dark:bg-zinc-800 text-gray-800 dark:text-gray-100 whitespace-nowrap p-2 text-xs m-1 border border-gray-300"},r[u].aggName,"(",r[u].name,")")])}return s}return a},[t,n,r]);return x.createElement("thead",{className:"bg-gray-50 border border-gray-300"},o.map((a,s)=>x.createElement("tr",{className:"border border-gray-300",key:s},a)))};function JO(e){return e.isCollapsed||e.children.length===0?1:e.children.map(JO).reduce((t,n)=>t+n,0)}function mle(e,t,n,r,i,o,a){const s=JO(e),{isCollapsed:l}=e;if(!(n>t.length)&&(r[n].push(x.createElement("td",{key:`${n}-${e.fieldKey}-${e.value}-${r[n].length}`,className:"bg-zinc-100 dark:bg-zinc-800 text-gray-800 dark:text-gray-100 align-top whitespace-nowrap p-2 text-xs m-1 border border-gray-300",colSpan:l?Math.max(i,1):s*Math.max(i,1),rowSpan:l?e.height+1:1},x.createElement("div",{className:"flex"},x.createElement("div",null,e.value),e.height>0&&e.key!=="__total"&&a&&x.createElement(x.Fragment,null,l&&x.createElement(_ae,{className:"w-3 ml-1 self-center cursor-pointer",onClick:()=>o(e)}),!l&&x.createElement(kae,{className:"w-3 ml-1 self-center cursor-pointer",onClick:()=>o(e)}))))),!l))for(let u=0;u<e.children.length;u++){const c=e.children[u];mle(c,t,n+1,r,i,o,a)}}const sOe=e=>{const{data:t,dimsInCol:n,measInCol:r,onHeaderCollapse:i,onTopTreeHeaderRowNumChange:o}=e,a=G.useMemo(()=>{const s=new Array(n.length+1).fill(0).map(()=>[]);mle(t,n,0,s,r.length,i,e.enableCollapse);const l=JO(t);return s.forEach((u,c)=>{const d=u.map(f=>x.isValidElement(f)?f.props.rowSpan:0);d.length>0&&d[0]>1&&d.every(f=>f===d[0])&&u.forEach((f,h)=>{if(x.isValidElement(f)){const m=x.cloneElement(f,{...f.props,rowSpan:1});s[c][h]=m}})}),s.push(new Array(l).fill(0).flatMap((u,c)=>r.map(d=>x.createElement("td",{key:`${s.length}-${d.fid}-${d.aggName}-${c}`,className:"bg-zinc-100 dark:bg-zinc-800 text-gray-800 dark:text-gray-100 whitespace-nowrap p-2 text-xs m-1 border border-gray-300"},d.aggName,"(",d.name,")")))),s.shift(),s},[t,n,r]);return G.useEffect(()=>{o(a.filter(s=>s.length>0).length)},[a]),x.createElement("thead",{className:"border border-gray-300 bg-gray-50"},a.map((s,l)=>x.createElement("tr",{className:`${(s==null?void 0:s.length)>0?"":"hidden"} border border-gray-300`,key:l},s)))};function sm(e,t){const n=cr(t.fid,t.aggName);return e[n]===void 0?"--":e[n]}const lOe=x.memo(e=>{const{matrix:t,meaInRows:n,meaInColumns:r}=e;return x.createElement("tbody",{className:"bg-white dark:bg-black text-gray-800 dark:text-gray-100 border-r border-b border-gray-300"},t.map((i,o)=>n.length!==0?n.map((a,s)=>x.createElement("tr",{className:"divide-x divide-gray-200",key:`${o}-${a.fid}-${a.aggName}`},i.flatMap((l,u)=>(l=l!=null?l:{},r.length!==0?r.map((c,d)=>x.createElement("td",{className:"whitespace-nowrap p-2 text-xs",key:`${o}-${u}-${a.fid}-${a.aggName}-${c.fid}-${c.aggName}`},sm(l,a)," , ",sm(l,c))):x.createElement("td",{className:"whitespace-nowrap p-2 text-xs",key:`${o}-${u}-${a.fid}-${a.aggName}`},sm(l,a)))))):x.createElement("tr",{className:"divide-x divide-gray-200",key:o},i.flatMap((a,s)=>(a=a!=null?a:{},n.length===0&&r.length!==0?r.map((l,u)=>x.createElement("td",{className:"whitespace-nowrap p-2 text-xs",key:`${o}-${s}-${u}-${l.fid}-${l.aggName}`},sm(a,l))):n.length===0&&r.length===0?x.createElement("td",{className:"whitespace-nowrap p-2 text-xs",key:`${o}-${s}`},"True"):n.flatMap((l,u)=>x.createElement("td",{className:"whitespace-nowrap p-2 text-xs",key:`${o}-${s}-${u}-${l.fid}-${l.aggName}`},r.flatMap((c,d)=>x.createElement("td",{className:"whitespace-nowrap p-2 text-xs",key:`${o}-${s}-${u}-${d}-${c.fid}-${c.aggName}`},sm(a,l)," , ",sm(a,c))))))))))},function(e,t){return JSON.stringify(e.matrix)===JSON.stringify(t.matrix)});function BO(e){const t=e.className||"text-white";return x.createElement("svg",{className:`animate-spin ml-2 mr-2 h-5 w-5 ${t}`,viewBox:"0 0 24 24"},x.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}))}function sb(){return x.createElement("div",{className:"bg-gray-100/50 dark:bg-gray-700/50 absolute top-0 left-0 right-0 bottom-0 z-50 flex items-center justify-center"},x.createElement(BO,{className:"text-indigo-500"}),x.createElement("span",{className:"text-sm text-indigo-500"},"Loading..."))}function gle(e,t,n,r,i,o){const a=r.find(s=>s.fid===xr);if(i.find(s=>s.fid===vr)&&a){if(!(o!=null&&o.length))return[];const s=(o!=null?o:[]).map(u=>n.find(c=>c.fid===u)).filter(Boolean).map(u=>t?{name:`${a.aggName}(${u.name})`,fid:cr(u.fid,a.aggName)}:{name:u.name,fid:u.fid}),l=new Set(s.map(u=>u.fid));return e.flatMap(u=>{const c=Object.fromEntries(Object.entries(u).filter(d=>!l.has(d[0])));return s.map(d=>({...c,[vr]:d.name,[t?cr(xr,a.aggName):xr]:u[d.fid]}))})}return e}const uOe=new Map,cOe=ft(function(e){var M;const{data:t,visualConfig:n,loading:r,layout:i,draggableFieldState:o}=e,a=cc(),s=ab(),[l,u]=G.useState(null),[c,d]=G.useState(null),[f,h]=G.useState([]),[m,g]=G.useState(!1),y=Tt(),v=!!y,w=(M=y==null?void 0:y.tableCollapsedHeaderMap)!=null?M:uOe,{rows:Z,columns:k}=o,{defaultAggregated:_,folds:R}=n,{showTableSummary:I}=i,E=G.useRef([]),[X,Y]=G.useState(0),C=G.useMemo(()=>Z.filter(j=>j.analyticType==="dimension"),[Z]),N=G.useMemo(()=>k.filter(j=>j.analyticType==="dimension"),[k]),V=G.useMemo(()=>Z.filter(j=>j.analyticType==="measure"),[Z]),F=G.useMemo(()=>k.filter(j=>j.analyticType==="measure"),[k]);G.useEffect(()=>{if(!v){P();return}y&&y.tableCollapsedHeaderMap.size>0?(y.resetTableCollapsedHeader(),I&&H()):O()},[t,v,y]),G.useEffect(()=>{!v||I?P():O()},[v,y==null?void 0:y.tableCollapsedHeaderMap]);const O=async()=>{await H(),P()},P=()=>{var j;(j=s.current)==null||j.updateRenderStatus("rendering"),g(!0);const J=rO(o),q=Lae(o);sVe(C,N,t,E.current,Array.from(w.keys()),I,J!=="none"&&q!=="none"?{fid:q==="column"?`${V[0].fid}_${V[0].aggName}`:`${F[0].fid}_${F[0].aggName}`,mode:q,type:J}:void 0).then(K=>{var D;const{lt:$,tt:Q,metric:B}=K;qn.unstable_batchedUpdates(()=>{u($),d(Q),h(B)}),(D=s.current)==null||D.updateRenderStatus("idle"),g(!1)}).catch(K=>{var D;(D=s.current)==null||D.updateRenderStatus("error"),console.log(K),g(!1)})},H=()=>{var j;if(C.length===0&&N.length===0||t.length===0)return;let J=[],q=[];if(I)J=C.map(($,Q)=>C.slice(0,Q)),q=N.map(($,Q)=>N.slice(0,Q));else{const $=Array.from(w).map(([pe,re])=>re[re.length-1].key),Q=C.filter(pe=>$.includes(pe.fid)),B=N.filter(pe=>$.includes(pe.fid));J=Q.map(pe=>C.slice(0,C.indexOf(pe)+1)),q=B.map(pe=>N.slice(0,N.indexOf(pe)+1))}J.push(C),q.push(N);const K=q.flatMap($=>J.map(Q=>[...$,...Q])).slice(0,-1);g(!0),(j=s.current)==null||j.updateRenderStatus("computing");const D=K.map($=>{if(!y)return Promise.resolve([]);const{viewFilters:Q,allFields:B,viewMeasures:pe,sort:re,limit:ee}=y,oe=eg(Q,B,$,pe,_,re,R!=null?R:[],ee>0?ee:void 0);return xG(a,oe,ee>0?ee:void 0).then(ue=>gle(ue,_,B,pe,$,R)).catch(ue=>{var U;return(U=s.current)==null||U.updateRenderStatus("error"),[]})});return new Promise(($,Q)=>{Promise.all(D).then(B=>{g(!1);const pe=[...B.flat()];E.current=pe,$()}).catch(B=>{console.error(B),g(!1),Q()})})};return x.createElement("div",{className:"relative"},(m||r)&&x.createElement(sb,null),x.createElement("div",{className:"flex"},x.createElement("table",{className:"border border-gray-300 border-collapse"},x.createElement("thead",{className:"border border-gray-300"},new Array(Math.max(X-1,0)).fill(0).map((j,J)=>x.createElement("tr",{className:"",key:J},x.createElement("td",{className:"bg-zinc-100 dark:bg-zinc-800 text-gray-800 dark:text-gray-100 p-2 m-1 text-xs border border-gray-300",colSpan:C.length+(V.length>0?1:0)},"_"))),X>0&&x.createElement("tr",{className:""},C.map(j=>x.createElement("td",{className:"bg-zinc-100 dark:bg-zinc-800 text-gray-800 dark:text-gray-100 p-2 m-1 text-xs border whitespace-nowrap border-gray-300",colSpan:1},j.name)),V.length>0&&x.createElement("td",{className:"bg-zinc-100 dark:bg-zinc-800 text-gray-800 dark:text-gray-100 p-2 m-1 text-xs border border-gray-300",colSpan:1},"_"))),l&&x.createElement(aOe,{data:l,dimsInRow:C,measInRow:V,onHeaderCollapse:j=>y==null?void 0:y.updateTableCollapsedHeader(j),enableCollapse:v})),x.createElement("table",{className:"border border-gray-300 border-collapse"},c&&x.createElement(sOe,{data:c,dimsInCol:N,measInCol:F,onHeaderCollapse:j=>y==null?void 0:y.updateTableCollapsedHeader(j),onTopTreeHeaderRowNumChange:j=>Y(j),enableCollapse:v}),f&&x.createElement(lOe,{matrix:f,meaInColumns:F,meaInRows:V}))))});function ble(e,t){const n=G.useRef(t);G.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function dOe(e,t,n){t.center!==n.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==n.radius&&e.setRadius(t.radius)}const fOe=1;function pOe(e){return Object.freeze({__version:fOe,map:e})}function R3(e,t){return Object.freeze({...e,...t})}const yle=G.createContext(null),vle=yle.Provider;function v5(){const e=G.useContext(yle);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function xle(e){function t(n,r){const{instance:i,context:o}=e(n).current;return G.useImperativeHandle(r,()=>i),n.children==null?null:x.createElement(vle,{value:o},n.children)}return G.forwardRef(t)}function hOe(e){function t(n,r){const[i,o]=G.useState(!1),{instance:a}=e(n,o).current;G.useImperativeHandle(r,()=>a),G.useEffect(function(){i&&a.update()},[a,i,n.children]);const s=a._contentNode;return s?qn.createPortal(n.children,s):null}return G.forwardRef(t)}function wle(e){function t(n,r){const{instance:i}=e(n).current;return G.useImperativeHandle(r,()=>i),null}return G.forwardRef(t)}function mOe(e){return function(t){const n=v5(),r=e(t,n),{instance:i}=r.current,o=G.useRef(t.position),{position:a}=t;return G.useEffect(function(){return i.addTo(n.map),function(){i.remove()}},[n.map,i]),G.useEffect(function(){a!=null&&a!==o.current&&(i.setPosition(a),o.current=a)},[i,a]),r}}function KO(e,t){const n=G.useRef();G.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function C3(e,t){var r;const n=(r=e.pane)!=null?r:t.pane;return n?{...e,pane:n}:e}function gOe(e,t){return function(n,r){const i=v5(),o=e(C3(n,i),i);return ble(i.map,n.attribution),KO(o.current,n.eventHandlers),t(o.current,i,n,r),o}}var Ls={},bOe={};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(n0,function(n){var r="1.9.4";function i(p){var b,S,W,T;for(S=1,W=arguments.length;S<W;S++){T=arguments[S];for(b in T)p[b]=T[b]}return p}var o=Object.create||function(){function p(){}return function(b){return p.prototype=b,new p}}();function a(p,b){var S=Array.prototype.slice;if(p.bind)return p.bind.apply(p,S.call(arguments,1));var W=S.call(arguments,2);return function(){return p.apply(b,W.length?W.concat(S.call(arguments)):arguments)}}var s=0;function l(p){return"_leaflet_id"in p||(p._leaflet_id=++s),p._leaflet_id}function u(p,b,S){var W,T,z,A;return A=function(){W=!1,T&&(z.apply(S,T),T=!1)},z=function(){W?T=arguments:(p.apply(S,arguments),setTimeout(A,b),W=!0)},z}function c(p,b,S){var W=b[1],T=b[0],z=W-T;return p===W&&S?p:((p-T)%z+z)%z+T}function d(){return!1}function f(p,b){if(b===!1)return p;var S=Math.pow(10,b===void 0?6:b);return Math.round(p*S)/S}function h(p){return p.trim?p.trim():p.replace(/^\s+|\s+$/g,"")}function m(p){return h(p).split(/\s+/)}function g(p,b){Object.prototype.hasOwnProperty.call(p,"options")||(p.options=p.options?o(p.options):{});for(var S in b)p.options[S]=b[S];return p.options}function y(p,b,S){var W=[];for(var T in p)W.push(encodeURIComponent(S?T.toUpperCase():T)+"="+encodeURIComponent(p[T]));return(!b||b.indexOf("?")===-1?"?":"&")+W.join("&")}var v=/\{ *([\w_ -]+) *\}/g;function w(p,b){return p.replace(v,function(S,W){var T=b[W];if(T===void 0)throw new Error("No value provided for variable "+S);return typeof T=="function"&&(T=T(b)),T})}var Z=Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"};function k(p,b){for(var S=0;S<p.length;S++)if(p[S]===b)return S;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function R(p){return window["webkit"+p]||window["moz"+p]||window["ms"+p]}var I=0;function E(p){var b=+new Date,S=Math.max(0,16-(b-I));return I=b+S,window.setTimeout(p,S)}var X=window.requestAnimationFrame||R("RequestAnimationFrame")||E,Y=window.cancelAnimationFrame||R("CancelAnimationFrame")||R("CancelRequestAnimationFrame")||function(p){window.clearTimeout(p)};function C(p,b,S){if(S&&X===E)p.call(b);else return X.call(window,a(p,b))}function N(p){p&&Y.call(window,p)}var V={__proto__:null,extend:i,create:o,bind:a,get lastId(){return s},stamp:l,throttle:u,wrapNum:c,falseFn:d,formatNum:f,trim:h,splitWords:m,setOptions:g,getParamString:y,template:w,isArray:Z,indexOf:k,emptyImageUrl:_,requestFn:X,cancelFn:Y,requestAnimFrame:C,cancelAnimFrame:N};function F(){}F.extend=function(p){var b=function(){g(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},S=b.__super__=this.prototype,W=o(S);W.constructor=b,b.prototype=W;for(var T in this)Object.prototype.hasOwnProperty.call(this,T)&&T!=="prototype"&&T!=="__super__"&&(b[T]=this[T]);return p.statics&&i(b,p.statics),p.includes&&(O(p.includes),i.apply(null,[W].concat(p.includes))),i(W,p),delete W.statics,delete W.includes,W.options&&(W.options=S.options?o(S.options):{},i(W.options,p.options)),W._initHooks=[],W.callInitHooks=function(){if(!this._initHooksCalled){S.callInitHooks&&S.callInitHooks.call(this),this._initHooksCalled=!0;for(var z=0,A=W._initHooks.length;z<A;z++)W._initHooks[z].call(this)}},b},F.include=function(p){var b=this.prototype.options;return i(this.prototype,p),p.options&&(this.prototype.options=b,this.mergeOptions(p.options)),this},F.mergeOptions=function(p){return i(this.prototype.options,p),this},F.addInitHook=function(p){var b=Array.prototype.slice.call(arguments,1),S=typeof p=="function"?p:function(){this[p].apply(this,b)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(S),this};function O(p){if(!(typeof L>"u"||!L||!L.Mixin)){p=Z(p)?p:[p];for(var b=0;b<p.length;b++)p[b]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var P={on:function(p,b,S){if(typeof p=="object")for(var W in p)this._on(W,p[W],b);else{p=m(p);for(var T=0,z=p.length;T<z;T++)this._on(p[T],b,S)}return this},off:function(p,b,S){if(!arguments.length)delete this._events;else if(typeof p=="object")for(var W in p)this._off(W,p[W],b);else{p=m(p);for(var T=arguments.length===1,z=0,A=p.length;z<A;z++)T?this._off(p[z]):this._off(p[z],b,S)}return this},_on:function(p,b,S,W){if(typeof b!="function"){console.warn("wrong listener type: "+typeof b);return}if(this._listens(p,b,S)===!1){S===this&&(S=void 0);var T={fn:b,ctx:S};W&&(T.once=!0),this._events=this._events||{},this._events[p]=this._events[p]||[],this._events[p].push(T)}},_off:function(p,b,S){var W,T,z;if(this._events&&(W=this._events[p],!!W)){if(arguments.length===1){if(this._firingCount)for(T=0,z=W.length;T<z;T++)W[T].fn=d;delete this._events[p];return}if(typeof b!="function"){console.warn("wrong listener type: "+typeof b);return}var A=this._listens(p,b,S);if(A!==!1){var te=W[A];this._firingCount&&(te.fn=d,this._events[p]=W=W.slice()),W.splice(A,1)}}},fire:function(p,b,S){if(!this.listens(p,S))return this;var W=i({},b,{type:p,target:this,sourceTarget:b&&b.sourceTarget||this});if(this._events){var T=this._events[p];if(T){this._firingCount=this._firingCount+1||1;for(var z=0,A=T.length;z<A;z++){var te=T[z],ie=te.fn;te.once&&this.off(p,ie,te.ctx),ie.call(te.ctx||this,W)}this._firingCount--}}return S&&this._propagateEvent(W),this},listens:function(p,b,S,W){typeof p!="string"&&console.warn('"string" type argument expected');var T=b;typeof b!="function"&&(W=!!b,T=void 0,S=void 0);var z=this._events&&this._events[p];if(z&&z.length&&this._listens(p,T,S)!==!1)return!0;if(W){for(var A in this._eventParents)if(this._eventParents[A].listens(p,b,S,W))return!0}return!1},_listens:function(p,b,S){if(!this._events)return!1;var W=this._events[p]||[];if(!b)return!!W.length;S===this&&(S=void 0);for(var T=0,z=W.length;T<z;T++)if(W[T].fn===b&&W[T].ctx===S)return T;return!1},once:function(p,b,S){if(typeof p=="object")for(var W in p)this._on(W,p[W],b,!0);else{p=m(p);for(var T=0,z=p.length;T<z;T++)this._on(p[T],b,S,!0)}return this},addEventParent:function(p){return this._eventParents=this._eventParents||{},this._eventParents[l(p)]=p,this},removeEventParent:function(p){return this._eventParents&&delete this._eventParents[l(p)],this},_propagateEvent:function(p){for(var b in this._eventParents)this._eventParents[b].fire(p.type,i({layer:p.target,propagatedFrom:p.target},p),!0)}};P.addEventListener=P.on,P.removeEventListener=P.clearAllEventListeners=P.off,P.addOneTimeEventListener=P.once,P.fireEvent=P.fire,P.hasEventListeners=P.listens;var H=F.extend(P);function M(p,b,S){this.x=S?Math.round(p):p,this.y=S?Math.round(b):b}var j=Math.trunc||function(p){return p>0?Math.floor(p):Math.ceil(p)};M.prototype={clone:function(){return new M(this.x,this.y)},add:function(p){return this.clone()._add(J(p))},_add:function(p){return this.x+=p.x,this.y+=p.y,this},subtract:function(p){return this.clone()._subtract(J(p))},_subtract:function(p){return this.x-=p.x,this.y-=p.y,this},divideBy:function(p){return this.clone()._divideBy(p)},_divideBy:function(p){return this.x/=p,this.y/=p,this},multiplyBy:function(p){return this.clone()._multiplyBy(p)},_multiplyBy:function(p){return this.x*=p,this.y*=p,this},scaleBy:function(p){return new M(this.x*p.x,this.y*p.y)},unscaleBy:function(p){return new M(this.x/p.x,this.y/p.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=j(this.x),this.y=j(this.y),this},distanceTo:function(p){p=J(p);var b=p.x-this.x,S=p.y-this.y;return Math.sqrt(b*b+S*S)},equals:function(p){return p=J(p),p.x===this.x&&p.y===this.y},contains:function(p){return p=J(p),Math.abs(p.x)<=Math.abs(this.x)&&Math.abs(p.y)<=Math.abs(this.y)},toString:function(){return"Point("+f(this.x)+", "+f(this.y)+")"}};function J(p,b,S){return p instanceof M?p:Z(p)?new M(p[0],p[1]):p==null?p:typeof p=="object"&&"x"in p&&"y"in p?new M(p.x,p.y):new M(p,b,S)}function q(p,b){if(p)for(var S=b?[p,b]:p,W=0,T=S.length;W<T;W++)this.extend(S[W])}q.prototype={extend:function(p){var b,S;if(!p)return this;if(p instanceof M||typeof p[0]=="number"||"x"in p)b=S=J(p);else if(p=K(p),b=p.min,S=p.max,!b||!S)return this;return!this.min&&!this.max?(this.min=b.clone(),this.max=S.clone()):(this.min.x=Math.min(b.x,this.min.x),this.max.x=Math.max(S.x,this.max.x),this.min.y=Math.min(b.y,this.min.y),this.max.y=Math.max(S.y,this.max.y)),this},getCenter:function(p){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,p)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(p){var b,S;return typeof p[0]=="number"||p instanceof M?p=J(p):p=K(p),p instanceof q?(b=p.min,S=p.max):b=S=p,b.x>=this.min.x&&S.x<=this.max.x&&b.y>=this.min.y&&S.y<=this.max.y},intersects:function(p){p=K(p);var b=this.min,S=this.max,W=p.min,T=p.max,z=T.x>=b.x&&W.x<=S.x,A=T.y>=b.y&&W.y<=S.y;return z&&A},overlaps:function(p){p=K(p);var b=this.min,S=this.max,W=p.min,T=p.max,z=T.x>b.x&&W.x<S.x,A=T.y>b.y&&W.y<S.y;return z&&A},isValid:function(){return!!(this.min&&this.max)},pad:function(p){var b=this.min,S=this.max,W=Math.abs(b.x-S.x)*p,T=Math.abs(b.y-S.y)*p;return K(J(b.x-W,b.y-T),J(S.x+W,S.y+T))},equals:function(p){return p?(p=K(p),this.min.equals(p.getTopLeft())&&this.max.equals(p.getBottomRight())):!1}};function K(p,b){return!p||p instanceof q?p:new q(p,b)}function D(p,b){if(p)for(var S=b?[p,b]:p,W=0,T=S.length;W<T;W++)this.extend(S[W])}D.prototype={extend:function(p){var b=this._southWest,S=this._northEast,W,T;if(p instanceof Q)W=p,T=p;else if(p instanceof D){if(W=p._southWest,T=p._northEast,!W||!T)return this}else return p?this.extend(B(p)||$(p)):this;return!b&&!S?(this._southWest=new Q(W.lat,W.lng),this._northEast=new Q(T.lat,T.lng)):(b.lat=Math.min(W.lat,b.lat),b.lng=Math.min(W.lng,b.lng),S.lat=Math.max(T.lat,S.lat),S.lng=Math.max(T.lng,S.lng)),this},pad:function(p){var b=this._southWest,S=this._northEast,W=Math.abs(b.lat-S.lat)*p,T=Math.abs(b.lng-S.lng)*p;return new D(new Q(b.lat-W,b.lng-T),new Q(S.lat+W,S.lng+T))},getCenter:function(){return new Q((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Q(this.getNorth(),this.getWest())},getSouthEast:function(){return new Q(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(p){typeof p[0]=="number"||p instanceof Q||"lat"in p?p=B(p):p=$(p);var b=this._southWest,S=this._northEast,W,T;return p instanceof D?(W=p.getSouthWest(),T=p.getNorthEast()):W=T=p,W.lat>=b.lat&&T.lat<=S.lat&&W.lng>=b.lng&&T.lng<=S.lng},intersects:function(p){p=$(p);var b=this._southWest,S=this._northEast,W=p.getSouthWest(),T=p.getNorthEast(),z=T.lat>=b.lat&&W.lat<=S.lat,A=T.lng>=b.lng&&W.lng<=S.lng;return z&&A},overlaps:function(p){p=$(p);var b=this._southWest,S=this._northEast,W=p.getSouthWest(),T=p.getNorthEast(),z=T.lat>b.lat&&W.lat<S.lat,A=T.lng>b.lng&&W.lng<S.lng;return z&&A},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(p,b){return p?(p=$(p),this._southWest.equals(p.getSouthWest(),b)&&this._northEast.equals(p.getNorthEast(),b)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function $(p,b){return p instanceof D?p:new D(p,b)}function Q(p,b,S){if(isNaN(p)||isNaN(b))throw new Error("Invalid LatLng object: ("+p+", "+b+")");this.lat=+p,this.lng=+b,S!==void 0&&(this.alt=+S)}Q.prototype={equals:function(p,b){if(!p)return!1;p=B(p);var S=Math.max(Math.abs(this.lat-p.lat),Math.abs(this.lng-p.lng));return S<=(b===void 0?1e-9:b)},toString:function(p){return"LatLng("+f(this.lat,p)+", "+f(this.lng,p)+")"},distanceTo:function(p){return re.distance(this,B(p))},wrap:function(){return re.wrapLatLng(this)},toBounds:function(p){var b=180*p/40075017,S=b/Math.cos(Math.PI/180*this.lat);return $([this.lat-b,this.lng-S],[this.lat+b,this.lng+S])},clone:function(){return new Q(this.lat,this.lng,this.alt)}};function B(p,b,S){return p instanceof Q?p:Z(p)&&typeof p[0]!="object"?p.length===3?new Q(p[0],p[1],p[2]):p.length===2?new Q(p[0],p[1]):null:p==null?p:typeof p=="object"&&"lat"in p?new Q(p.lat,"lng"in p?p.lng:p.lon,p.alt):b===void 0?null:new Q(p,b,S)}var pe={latLngToPoint:function(p,b){var S=this.projection.project(p),W=this.scale(b);return this.transformation._transform(S,W)},pointToLatLng:function(p,b){var S=this.scale(b),W=this.transformation.untransform(p,S);return this.projection.unproject(W)},project:function(p){return this.projection.project(p)},unproject:function(p){return this.projection.unproject(p)},scale:function(p){return 256*Math.pow(2,p)},zoom:function(p){return Math.log(p/256)/Math.LN2},getProjectedBounds:function(p){if(this.infinite)return null;var b=this.projection.bounds,S=this.scale(p),W=this.transformation.transform(b.min,S),T=this.transformation.transform(b.max,S);return new q(W,T)},infinite:!1,wrapLatLng:function(p){var b=this.wrapLng?c(p.lng,this.wrapLng,!0):p.lng,S=this.wrapLat?c(p.lat,this.wrapLat,!0):p.lat,W=p.alt;return new Q(S,b,W)},wrapLatLngBounds:function(p){var b=p.getCenter(),S=this.wrapLatLng(b),W=b.lat-S.lat,T=b.lng-S.lng;if(W===0&&T===0)return p;var z=p.getSouthWest(),A=p.getNorthEast(),te=new Q(z.lat-W,z.lng-T),ie=new Q(A.lat-W,A.lng-T);return new D(te,ie)}},re=i({},pe,{wrapLng:[-180,180],R:6371e3,distance:function(p,b){var S=Math.PI/180,W=p.lat*S,T=b.lat*S,z=Math.sin((b.lat-p.lat)*S/2),A=Math.sin((b.lng-p.lng)*S/2),te=z*z+Math.cos(W)*Math.cos(T)*A*A,ie=2*Math.atan2(Math.sqrt(te),Math.sqrt(1-te));return this.R*ie}}),ee=6378137,oe={R:ee,MAX_LATITUDE:85.0511287798,project:function(p){var b=Math.PI/180,S=this.MAX_LATITUDE,W=Math.max(Math.min(S,p.lat),-S),T=Math.sin(W*b);return new M(this.R*p.lng*b,this.R*Math.log((1+T)/(1-T))/2)},unproject:function(p){var b=180/Math.PI;return new Q((2*Math.atan(Math.exp(p.y/this.R))-Math.PI/2)*b,p.x*b/this.R)},bounds:function(){var p=ee*Math.PI;return new q([-p,-p],[p,p])}()};function ue(p,b,S,W){if(Z(p)){this._a=p[0],this._b=p[1],this._c=p[2],this._d=p[3];return}this._a=p,this._b=b,this._c=S,this._d=W}ue.prototype={transform:function(p,b){return this._transform(p.clone(),b)},_transform:function(p,b){return b=b||1,p.x=b*(this._a*p.x+this._b),p.y=b*(this._c*p.y+this._d),p},untransform:function(p,b){return b=b||1,new M((p.x/b-this._b)/this._a,(p.y/b-this._d)/this._c)}};function U(p,b,S,W){return new ue(p,b,S,W)}var de=i({},re,{code:"EPSG:3857",projection:oe,transformation:function(){var p=.5/(Math.PI*oe.R);return U(p,.5,-p,.5)}()}),be=i({},de,{code:"EPSG:900913"});function xe(p){return document.createElementNS("http://www.w3.org/2000/svg",p)}function me(p,b){var S="",W,T,z,A,te,ie;for(W=0,z=p.length;W<z;W++){for(te=p[W],T=0,A=te.length;T<A;T++)ie=te[T],S+=(T?"L":"M")+ie.x+" "+ie.y;S+=b?Pe.svg?"z":"x":""}return S||"M0 0"}var Ce=document.documentElement.style,Xe="ActiveXObject"in window,Fe=Xe&&!document.addEventListener,Ue="msLaunchUri"in navigator&&!("documentMode"in document),at=Hs("webkit"),Qe=Hs("android"),Me=Hs("android 2")||Hs("android 3"),ne=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ye=Qe&&Hs("Google")&&ne<537&&!("AudioNode"in window),nt=!!window.opera,lt=!Ue&&Hs("chrome"),bt=Hs("gecko")&&!at&&!nt&&!Xe,zn=!lt&&Hs("safari"),tn=Hs("phantom"),Pn="OTransition"in Ce,zs=navigator.platform.indexOf("Win")===0,_c=Xe&&"transition"in Ce,Ps="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Me,Kn="MozPerspective"in Ce,Gc=!window.L_DISABLE_3D&&(_c||Ps||Kn)&&!Pn&&!tn,Br=typeof orientation<"u"||Hs("mobile"),gi=Br&&at,Bb=Br&&Ps,Kb=!window.PointerEvent&&window.MSPointerEvent,Db=!!(window.PointerEvent||Kb),Ab="ontouchstart"in window||!!window.TouchEvent,WZ=!window.L_NO_TOUCH&&(Ab||Db),EZ=Br&&nt,XZ=Br&&bt,Kr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,du=function(){var p=!1;try{var b=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("testPassiveEventSupport",d,b),window.removeEventListener("testPassiveEventSupport",d,b)}catch(S){}return p}(),js=function(){return!!document.createElement("canvas").getContext}(),Jh=!!(document.createElementNS&&xe("svg").createSVGRect),Ic=!!Jh&&function(){var p=document.createElement("div");return p.innerHTML="<svg/>",(p.firstChild&&p.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),cwe=!Jh&&function(){try{var p=document.createElement("div");p.innerHTML='<v:shape adj="1"/>';var b=p.firstChild;return b.style.behavior="url(#default#VML)",b&&typeof b.adj=="object"}catch(S){return!1}}(),dwe=navigator.platform.indexOf("Mac")===0,fwe=navigator.platform.indexOf("Linux")===0;function Hs(p){return navigator.userAgent.toLowerCase().indexOf(p)>=0}var Pe={ie:Xe,ielt9:Fe,edge:Ue,webkit:at,android:Qe,android23:Me,androidStock:ye,opera:nt,chrome:lt,gecko:bt,safari:zn,phantom:tn,opera12:Pn,win:zs,ie3d:_c,webkit3d:Ps,gecko3d:Kn,any3d:Gc,mobile:Br,mobileWebkit:gi,mobileWebkit3d:Bb,msPointer:Kb,pointer:Db,touch:WZ,touchNative:Ab,mobileOpera:EZ,mobileGecko:XZ,retina:Kr,passiveEvents:du,canvas:js,svg:Jh,vml:cwe,inlineSvg:Ic,mac:dwe,linux:fwe},wB=Pe.msPointer?"MSPointerDown":"pointerdown",ZB=Pe.msPointer?"MSPointerMove":"pointermove",SB=Pe.msPointer?"MSPointerUp":"pointerup",kB=Pe.msPointer?"MSPointerCancel":"pointercancel",oX={touchstart:wB,touchmove:ZB,touchend:SB,touchcancel:kB},_B={touchstart:ywe,touchmove:LZ,touchend:LZ,touchcancel:LZ},Bh={},GB=!1;function pwe(p,b,S){return b==="touchstart"&&bwe(),_B[b]?(S=_B[b].bind(this,S),p.addEventListener(oX[b],S,!1),S):(console.warn("wrong event specified:",b),d)}function hwe(p,b,S){if(!oX[b]){console.warn("wrong event specified:",b);return}p.removeEventListener(oX[b],S,!1)}function mwe(p){Bh[p.pointerId]=p}function gwe(p){Bh[p.pointerId]&&(Bh[p.pointerId]=p)}function IB(p){delete Bh[p.pointerId]}function bwe(){GB||(document.addEventListener(wB,mwe,!0),document.addEventListener(ZB,gwe,!0),document.addEventListener(SB,IB,!0),document.addEventListener(kB,IB,!0),GB=!0)}function LZ(p,b){if(b.pointerType!==(b.MSPOINTER_TYPE_MOUSE||"mouse")){b.touches=[];for(var S in Bh)b.touches.push(Bh[S]);b.changedTouches=[b],p(b)}}function ywe(p,b){b.MSPOINTER_TYPE_TOUCH&&b.pointerType===b.MSPOINTER_TYPE_TOUCH&&Yr(b),LZ(p,b)}function vwe(p){var b={},S,W;for(W in p)S=p[W],b[W]=S&&S.bind?S.bind(p):S;return p=b,b.type="dblclick",b.detail=2,b.isTrusted=!1,b._simulated=!0,b}var xwe=200;function wwe(p,b){p.addEventListener("dblclick",b);var S=0,W;function T(z){if(z.detail!==1){W=z.detail;return}if(!(z.pointerType==="mouse"||z.sourceCapabilities&&!z.sourceCapabilities.firesTouchEvents)){var A=RB(z);if(!(A.some(function(ie){return ie instanceof HTMLLabelElement&&ie.attributes.for})&&!A.some(function(ie){return ie instanceof HTMLInputElement||ie instanceof HTMLSelectElement}))){var te=Date.now();te-S<=xwe?(W++,W===2&&b(vwe(z))):W=1,S=te}}}return p.addEventListener("click",T),{dblclick:b,simDblclick:T}}function Zwe(p,b){p.removeEventListener("dblclick",b.dblclick),p.removeEventListener("click",b.simDblclick)}var aX=VZ(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ub=VZ(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),WB=Ub==="webkitTransition"||Ub==="OTransition"?Ub+"End":"transitionend";function EB(p){return typeof p=="string"?document.getElementById(p):p}function $b(p,b){var S=p.style[b]||p.currentStyle&&p.currentStyle[b];if((!S||S==="auto")&&document.defaultView){var W=document.defaultView.getComputedStyle(p,null);S=W?W[b]:null}return S==="auto"?null:S}function Xt(p,b,S){var W=document.createElement(p);return W.className=b||"",S&&S.appendChild(W),W}function In(p){var b=p.parentNode;b&&b.removeChild(p)}function RZ(p){for(;p.firstChild;)p.removeChild(p.firstChild)}function Kh(p){var b=p.parentNode;b&&b.lastChild!==p&&b.appendChild(p)}function Dh(p){var b=p.parentNode;b&&b.firstChild!==p&&b.insertBefore(p,b.firstChild)}function sX(p,b){if(p.classList!==void 0)return p.classList.contains(b);var S=CZ(p);return S.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(S)}function pt(p,b){if(p.classList!==void 0)for(var S=m(b),W=0,T=S.length;W<T;W++)p.classList.add(S[W]);else if(!sX(p,b)){var z=CZ(p);lX(p,(z?z+" ":"")+b)}}function jn(p,b){p.classList!==void 0?p.classList.remove(b):lX(p,h((" "+CZ(p)+" ").replace(" "+b+" "," ")))}function lX(p,b){p.className.baseVal===void 0?p.className=b:p.className.baseVal=b}function CZ(p){return p.correspondingElement&&(p=p.correspondingElement),p.className.baseVal===void 0?p.className:p.className.baseVal}function Uo(p,b){"opacity"in p.style?p.style.opacity=b:"filter"in p.style&&Swe(p,b)}function Swe(p,b){var S=!1,W="DXImageTransform.Microsoft.Alpha";try{S=p.filters.item(W)}catch(T){if(b===1)return}b=Math.round(b*100),S?(S.Enabled=b!==100,S.Opacity=b):p.style.filter+=" progid:"+W+"(opacity="+b+")"}function VZ(p){for(var b=document.documentElement.style,S=0;S<p.length;S++)if(p[S]in b)return p[S];return!1}function Ef(p,b,S){var W=b||new M(0,0);p.style[aX]=(Pe.ie3d?"translate("+W.x+"px,"+W.y+"px)":"translate3d("+W.x+"px,"+W.y+"px,0)")+(S?" scale("+S+")":"")}function Dn(p,b){p._leaflet_pos=b,Pe.any3d?Ef(p,b):(p.style.left=b.x+"px",p.style.top=b.y+"px")}function Xf(p){return p._leaflet_pos||new M(0,0)}var Qb,qb,uX;if("onselectstart"in document)Qb=function(){ut(window,"selectstart",Yr)},qb=function(){nn(window,"selectstart",Yr)};else{var ey=VZ(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Qb=function(){if(ey){var p=document.documentElement.style;uX=p[ey],p[ey]="none"}},qb=function(){ey&&(document.documentElement.style[ey]=uX,uX=void 0)}}function cX(){ut(window,"dragstart",Yr)}function dX(){nn(window,"dragstart",Yr)}var YZ,fX;function pX(p){for(;p.tabIndex===-1;)p=p.parentNode;p.style&&(TZ(),YZ=p,fX=p.style.outlineStyle,p.style.outlineStyle="none",ut(window,"keydown",TZ))}function TZ(){YZ&&(YZ.style.outlineStyle=fX,YZ=void 0,fX=void 0,nn(window,"keydown",TZ))}function XB(p){do p=p.parentNode;while((!p.offsetWidth||!p.offsetHeight)&&p!==document.body);return p}function hX(p){var b=p.getBoundingClientRect();return{x:b.width/p.offsetWidth||1,y:b.height/p.offsetHeight||1,boundingClientRect:b}}var kwe={__proto__:null,TRANSFORM:aX,TRANSITION:Ub,TRANSITION_END:WB,get:EB,getStyle:$b,create:Xt,remove:In,empty:RZ,toFront:Kh,toBack:Dh,hasClass:sX,addClass:pt,removeClass:jn,setClass:lX,getClass:CZ,setOpacity:Uo,testProp:VZ,setTransform:Ef,setPosition:Dn,getPosition:Xf,get disableTextSelection(){return Qb},get enableTextSelection(){return qb},disableImageDrag:cX,enableImageDrag:dX,preventOutline:pX,restoreOutline:TZ,getSizedParentNode:XB,getScale:hX};function ut(p,b,S,W){if(b&&typeof b=="object")for(var T in b)gX(p,T,b[T],S);else{b=m(b);for(var z=0,A=b.length;z<A;z++)gX(p,b[z],S,W)}return this}var Js="_leaflet_events";function nn(p,b,S,W){if(arguments.length===1)LB(p),delete p[Js];else if(b&&typeof b=="object")for(var T in b)bX(p,T,b[T],S);else if(b=m(b),arguments.length===2)LB(p,function(te){return k(b,te)!==-1});else for(var z=0,A=b.length;z<A;z++)bX(p,b[z],S,W);return this}function LB(p,b){for(var S in p[Js]){var W=S.split(/\d/)[0];(!b||b(W))&&bX(p,W,null,null,S)}}var mX={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function gX(p,b,S,W){var T=b+l(S)+(W?"_"+l(W):"");if(p[Js]&&p[Js][T])return this;var z=function(te){return S.call(W||p,te||window.event)},A=z;!Pe.touchNative&&Pe.pointer&&b.indexOf("touch")===0?z=pwe(p,b,z):Pe.touch&&b==="dblclick"?z=wwe(p,z):"addEventListener"in p?b==="touchstart"||b==="touchmove"||b==="wheel"||b==="mousewheel"?p.addEventListener(mX[b]||b,z,Pe.passiveEvents?{passive:!1}:!1):b==="mouseenter"||b==="mouseleave"?(z=function(te){te=te||window.event,vX(p,te)&&A(te)},p.addEventListener(mX[b],z,!1)):p.addEventListener(b,A,!1):p.attachEvent("on"+b,z),p[Js]=p[Js]||{},p[Js][T]=z}function bX(p,b,S,W,T){T=T||b+l(S)+(W?"_"+l(W):"");var z=p[Js]&&p[Js][T];if(!z)return this;!Pe.touchNative&&Pe.pointer&&b.indexOf("touch")===0?hwe(p,b,z):Pe.touch&&b==="dblclick"?Zwe(p,z):"removeEventListener"in p?p.removeEventListener(mX[b]||b,z,!1):p.detachEvent("on"+b,z),p[Js][T]=null}function Lf(p){return p.stopPropagation?p.stopPropagation():p.originalEvent?p.originalEvent._stopped=!0:p.cancelBubble=!0,this}function yX(p){return gX(p,"wheel",Lf),this}function ty(p){return ut(p,"mousedown touchstart dblclick contextmenu",Lf),p._leaflet_disable_click=!0,this}function Yr(p){return p.preventDefault?p.preventDefault():p.returnValue=!1,this}function Rf(p){return Yr(p),Lf(p),this}function RB(p){if(p.composedPath)return p.composedPath();for(var b=[],S=p.target;S;)b.push(S),S=S.parentNode;return b}function CB(p,b){if(!b)return new M(p.clientX,p.clientY);var S=hX(b),W=S.boundingClientRect;return new M((p.clientX-W.left)/S.x-b.clientLeft,(p.clientY-W.top)/S.y-b.clientTop)}var _we=Pe.linux&&Pe.chrome?window.devicePixelRatio:Pe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function VB(p){return Pe.edge?p.wheelDeltaY/2:p.deltaY&&p.deltaMode===0?-p.deltaY/_we:p.deltaY&&p.deltaMode===1?-p.deltaY*20:p.deltaY&&p.deltaMode===2?-p.deltaY*60:p.deltaX||p.deltaZ?0:p.wheelDelta?(p.wheelDeltaY||p.wheelDelta)/2:p.detail&&Math.abs(p.detail)<32765?-p.detail*20:p.detail?p.detail/-32765*60:0}function vX(p,b){var S=b.relatedTarget;if(!S)return!0;try{for(;S&&S!==p;)S=S.parentNode}catch(W){return!1}return S!==p}var Gwe={__proto__:null,on:ut,off:nn,stopPropagation:Lf,disableScrollPropagation:yX,disableClickPropagation:ty,preventDefault:Yr,stop:Rf,getPropagationPath:RB,getMousePosition:CB,getWheelDelta:VB,isExternalTarget:vX,addListener:ut,removeListener:nn},YB=H.extend({run:function(p,b,S,W){this.stop(),this._el=p,this._inProgress=!0,this._duration=S||.25,this._easeOutPower=1/Math.max(W||.5,.2),this._startPos=Xf(p),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=C(this._animate,this),this._step()},_step:function(p){var b=+new Date-this._startTime,S=this._duration*1e3;b<S?this._runFrame(this._easeOut(b/S),p):(this._runFrame(1),this._complete())},_runFrame:function(p,b){var S=this._startPos.add(this._offset.multiplyBy(p));b&&S._round(),Dn(this._el,S),this.fire("step")},_complete:function(){N(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(p){return 1-Math.pow(1-p,this._easeOutPower)}}),kt=H.extend({options:{crs:de,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(p,b){b=g(this,b),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(p),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.zoom!==void 0&&(this._zoom=this._limitZoom(b.zoom)),b.center&&b.zoom!==void 0&&this.setView(B(b.center),b.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ub&&Pe.any3d&&!Pe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ut(this._proxy,WB,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(p,b,S){if(b=b===void 0?this._zoom:this._limitZoom(b),p=this._limitCenter(B(p),b,this.options.maxBounds),S=S||{},this._stop(),this._loaded&&!S.reset&&S!==!0){S.animate!==void 0&&(S.zoom=i({animate:S.animate},S.zoom),S.pan=i({animate:S.animate,duration:S.duration},S.pan));var W=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(p,b,S.zoom):this._tryAnimatedPan(p,S.pan);if(W)return clearTimeout(this._sizeTimer),this}return this._resetView(p,b,S.pan&&S.pan.noMoveStart),this},setZoom:function(p,b){return this._loaded?this.setView(this.getCenter(),p,{zoom:b}):(this._zoom=p,this)},zoomIn:function(p,b){return p=p||(Pe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+p,b)},zoomOut:function(p,b){return p=p||(Pe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-p,b)},setZoomAround:function(p,b,S){var W=this.getZoomScale(b),T=this.getSize().divideBy(2),z=p instanceof M?p:this.latLngToContainerPoint(p),A=z.subtract(T).multiplyBy(1-1/W),te=this.containerPointToLatLng(T.add(A));return this.setView(te,b,{zoom:S})},_getBoundsCenterZoom:function(p,b){b=b||{},p=p.getBounds?p.getBounds():$(p);var S=J(b.paddingTopLeft||b.padding||[0,0]),W=J(b.paddingBottomRight||b.padding||[0,0]),T=this.getBoundsZoom(p,!1,S.add(W));if(T=typeof b.maxZoom=="number"?Math.min(b.maxZoom,T):T,T===1/0)return{center:p.getCenter(),zoom:T};var z=W.subtract(S).divideBy(2),A=this.project(p.getSouthWest(),T),te=this.project(p.getNorthEast(),T),ie=this.unproject(A.add(te).divideBy(2).add(z),T);return{center:ie,zoom:T}},fitBounds:function(p,b){if(p=$(p),!p.isValid())throw new Error("Bounds are not valid.");var S=this._getBoundsCenterZoom(p,b);return this.setView(S.center,S.zoom,b)},fitWorld:function(p){return this.fitBounds([[-90,-180],[90,180]],p)},panTo:function(p,b){return this.setView(p,this._zoom,{pan:b})},panBy:function(p,b){if(p=J(p).round(),b=b||{},!p.x&&!p.y)return this.fire("moveend");if(b.animate!==!0&&!this.getSize().contains(p))return this._resetView(this.unproject(this.project(this.getCenter()).add(p)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new YB,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){pt(this._mapPane,"leaflet-pan-anim");var S=this._getMapPanePos().subtract(p).round();this._panAnim.run(this._mapPane,S,b.duration||.25,b.easeLinearity)}else this._rawPanBy(p),this.fire("move").fire("moveend");return this},flyTo:function(p,b,S){if(S=S||{},S.animate===!1||!Pe.any3d)return this.setView(p,b,S);this._stop();var W=this.project(this.getCenter()),T=this.project(p),z=this.getSize(),A=this._zoom;p=B(p),b=b===void 0?A:b;var te=Math.max(z.x,z.y),ie=te*this.getZoomScale(A,b),he=T.distanceTo(W)||1,Re=1.42,qe=Re*Re;function mt(An){var DZ=An?-1:1,h5e=An?ie:te,m5e=ie*ie-te*te+DZ*qe*qe*he*he,g5e=2*h5e*qe*he,XX=m5e/g5e,mK=Math.sqrt(XX*XX+1)-XX,b5e=mK<1e-9?-18:Math.log(mK);return b5e}function bi(An){return(Math.exp(An)-Math.exp(-An))/2}function hr(An){return(Math.exp(An)+Math.exp(-An))/2}function Qo(An){return bi(An)/hr(An)}var Oi=mt(0);function em(An){return te*(hr(Oi)/hr(Oi+Re*An))}function c5e(An){return te*(hr(Oi)*Qo(Oi+Re*An)-bi(Oi))/qe}function d5e(An){return 1-Math.pow(1-An,1.5)}var f5e=Date.now(),pK=(mt(1)-Oi)/Re,p5e=S.duration?1e3*S.duration:1e3*pK*.8;function hK(){var An=(Date.now()-f5e)/p5e,DZ=d5e(An)*pK;An<=1?(this._flyToFrame=C(hK,this),this._move(this.unproject(W.add(T.subtract(W).multiplyBy(c5e(DZ)/he)),A),this.getScaleZoom(te/em(DZ),A),{flyTo:!0})):this._move(p,b)._moveEnd(!0)}return this._moveStart(!0,S.noMoveStart),hK.call(this),this},flyToBounds:function(p,b){var S=this._getBoundsCenterZoom(p,b);return this.flyTo(S.center,S.zoom,b)},setMaxBounds:function(p){return p=$(p),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),p.isValid()?(this.options.maxBounds=p,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(p){var b=this.options.minZoom;return this.options.minZoom=p,this._loaded&&b!==p&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(p):this},setMaxZoom:function(p){var b=this.options.maxZoom;return this.options.maxZoom=p,this._loaded&&b!==p&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(p):this},panInsideBounds:function(p,b){this._enforcingBounds=!0;var S=this.getCenter(),W=this._limitCenter(S,this._zoom,$(p));return S.equals(W)||this.panTo(W,b),this._enforcingBounds=!1,this},panInside:function(p,b){b=b||{};var S=J(b.paddingTopLeft||b.padding||[0,0]),W=J(b.paddingBottomRight||b.padding||[0,0]),T=this.project(this.getCenter()),z=this.project(p),A=this.getPixelBounds(),te=K([A.min.add(S),A.max.subtract(W)]),ie=te.getSize();if(!te.contains(z)){this._enforcingBounds=!0;var he=z.subtract(te.getCenter()),Re=te.extend(z).getSize().subtract(ie);T.x+=he.x<0?-Re.x:Re.x,T.y+=he.y<0?-Re.y:Re.y,this.panTo(this.unproject(T),b),this._enforcingBounds=!1}return this},invalidateSize:function(p){if(!this._loaded)return this;p=i({animate:!1,pan:!0},p===!0?{animate:!0}:p);var b=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var S=this.getSize(),W=b.divideBy(2).round(),T=S.divideBy(2).round(),z=W.subtract(T);return!z.x&&!z.y?this:(p.animate&&p.pan?this.panBy(z):(p.pan&&this._rawPanBy(z),this.fire("move"),p.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:S}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(p){if(p=this._locateOptions=i({timeout:1e4,watch:!1},p),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=a(this._handleGeolocationResponse,this),S=a(this._handleGeolocationError,this);return p.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,S,p):navigator.geolocation.getCurrentPosition(b,S,p),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(p){if(this._container._leaflet_id){var b=p.code,S=p.message||(b===1?"permission denied":b===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+S+"."})}},_handleGeolocationResponse:function(p){if(this._container._leaflet_id){var b=p.coords.latitude,S=p.coords.longitude,W=new Q(b,S),T=W.toBounds(p.coords.accuracy*2),z=this._locateOptions;if(z.setView){var A=this.getBoundsZoom(T);this.setView(W,z.maxZoom?Math.min(A,z.maxZoom):A)}var te={latlng:W,bounds:T,timestamp:p.timestamp};for(var ie in p.coords)typeof p.coords[ie]=="number"&&(te[ie]=p.coords[ie]);this.fire("locationfound",te)}},addHandler:function(p,b){if(!b)return this;var S=this[p]=new b(this);return this._handlers.push(S),this.options[p]&&S.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(b){this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),In(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(N(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var p;for(p in this._layers)this._layers[p].remove();for(p in this._panes)In(this._panes[p]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(p,b){var S="leaflet-pane"+(p?" leaflet-"+p.replace("Pane","")+"-pane":""),W=Xt("div",S,b||this._mapPane);return p&&(this._panes[p]=W),W},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var p=this.getPixelBounds(),b=this.unproject(p.getBottomLeft()),S=this.unproject(p.getTopRight());return new D(b,S)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(p,b,S){p=$(p),S=J(S||[0,0]);var W=this.getZoom()||0,T=this.getMinZoom(),z=this.getMaxZoom(),A=p.getNorthWest(),te=p.getSouthEast(),ie=this.getSize().subtract(S),he=K(this.project(te,W),this.project(A,W)).getSize(),Re=Pe.any3d?this.options.zoomSnap:1,qe=ie.x/he.x,mt=ie.y/he.y,bi=b?Math.max(qe,mt):Math.min(qe,mt);return W=this.getScaleZoom(bi,W),Re&&(W=Math.round(W/(Re/100))*(Re/100),W=b?Math.ceil(W/Re)*Re:Math.floor(W/Re)*Re),Math.max(T,Math.min(z,W))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(p,b){var S=this._getTopLeftPoint(p,b);return new q(S,S.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(p){return this.options.crs.getProjectedBounds(p===void 0?this.getZoom():p)},getPane:function(p){return typeof p=="string"?this._panes[p]:p},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(p,b){var S=this.options.crs;return b=b===void 0?this._zoom:b,S.scale(p)/S.scale(b)},getScaleZoom:function(p,b){var S=this.options.crs;b=b===void 0?this._zoom:b;var W=S.zoom(p*S.scale(b));return isNaN(W)?1/0:W},project:function(p,b){return b=b===void 0?this._zoom:b,this.options.crs.latLngToPoint(B(p),b)},unproject:function(p,b){return b=b===void 0?this._zoom:b,this.options.crs.pointToLatLng(J(p),b)},layerPointToLatLng:function(p){var b=J(p).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(p){var b=this.project(B(p))._round();return b._subtract(this.getPixelOrigin())},wrapLatLng:function(p){return this.options.crs.wrapLatLng(B(p))},wrapLatLngBounds:function(p){return this.options.crs.wrapLatLngBounds($(p))},distance:function(p,b){return this.options.crs.distance(B(p),B(b))},containerPointToLayerPoint:function(p){return J(p).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(p){return J(p).add(this._getMapPanePos())},containerPointToLatLng:function(p){var b=this.containerPointToLayerPoint(J(p));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(p){return this.layerPointToContainerPoint(this.latLngToLayerPoint(B(p)))},mouseEventToContainerPoint:function(p){return CB(p,this._container)},mouseEventToLayerPoint:function(p){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(p))},mouseEventToLatLng:function(p){return this.layerPointToLatLng(this.mouseEventToLayerPoint(p))},_initContainer:function(p){var b=this._container=EB(p);if(b){if(b._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ut(b,"scroll",this._onScroll,this),this._containerId=l(b)},_initLayout:function(){var p=this._container;this._fadeAnimated=this.options.fadeAnimation&&Pe.any3d,pt(p,"leaflet-container"+(Pe.touch?" leaflet-touch":"")+(Pe.retina?" leaflet-retina":"")+(Pe.ielt9?" leaflet-oldie":"")+(Pe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var b=$b(p,"position");b!=="absolute"&&b!=="relative"&&b!=="fixed"&&b!=="sticky"&&(p.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var p=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Dn(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pt(p.markerPane,"leaflet-zoom-hide"),pt(p.shadowPane,"leaflet-zoom-hide"))},_resetView:function(p,b,S){Dn(this._mapPane,new M(0,0));var W=!this._loaded;this._loaded=!0,b=this._limitZoom(b),this.fire("viewprereset");var T=this._zoom!==b;this._moveStart(T,S)._move(p,b)._moveEnd(T),this.fire("viewreset"),W&&this.fire("load")},_moveStart:function(p,b){return p&&this.fire("zoomstart"),b||this.fire("movestart"),this},_move:function(p,b,S,W){b===void 0&&(b=this._zoom);var T=this._zoom!==b;return this._zoom=b,this._lastCenter=p,this._pixelOrigin=this._getNewPixelOrigin(p),W?S&&S.pinch&&this.fire("zoom",S):((T||S&&S.pinch)&&this.fire("zoom",S),this.fire("move",S)),this},_moveEnd:function(p){return p&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return N(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(p){Dn(this._mapPane,this._getMapPanePos().subtract(p))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(p){this._targets={},this._targets[l(this._container)]=this;var b=p?nn:ut;b(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&b(window,"resize",this._onResize,this),Pe.any3d&&this.options.transform3DLimit&&(p?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){N(this._resizeRequest),this._resizeRequest=C(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var p=this._getMapPanePos();Math.max(Math.abs(p.x),Math.abs(p.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(p,b){for(var S=[],W,T=b==="mouseout"||b==="mouseover",z=p.target||p.srcElement,A=!1;z;){if(W=this._targets[l(z)],W&&(b==="click"||b==="preclick")&&this._draggableMoved(W)){A=!0;break}if(W&&W.listens(b,!0)&&(T&&!vX(z,p)||(S.push(W),T))||z===this._container)break;z=z.parentNode}return!S.length&&!A&&!T&&this.listens(b,!0)&&(S=[this]),S},_isClickDisabled:function(p){for(;p&&p!==this._container;){if(p._leaflet_disable_click)return!0;p=p.parentNode}},_handleDOMEvent:function(p){var b=p.target||p.srcElement;if(!(!this._loaded||b._leaflet_disable_events||p.type==="click"&&this._isClickDisabled(b))){var S=p.type;S==="mousedown"&&pX(b),this._fireDOMEvent(p,S)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(p,b,S){if(p.type==="click"){var W=i({},p);W.type="preclick",this._fireDOMEvent(W,W.type,S)}var T=this._findEventTargets(p,b);if(S){for(var z=[],A=0;A<S.length;A++)S[A].listens(b,!0)&&z.push(S[A]);T=z.concat(T)}if(T.length){b==="contextmenu"&&Yr(p);var te=T[0],ie={originalEvent:p};if(p.type!=="keypress"&&p.type!=="keydown"&&p.type!=="keyup"){var he=te.getLatLng&&(!te._radius||te._radius<=10);ie.containerPoint=he?this.latLngToContainerPoint(te.getLatLng()):this.mouseEventToContainerPoint(p),ie.layerPoint=this.containerPointToLayerPoint(ie.containerPoint),ie.latlng=he?te.getLatLng():this.layerPointToLatLng(ie.layerPoint)}for(A=0;A<T.length;A++)if(T[A].fire(b,ie,!0),ie.originalEvent._stopped||T[A].options.bubblingMouseEvents===!1&&k(this._mouseEvents,b)!==-1)return}},_draggableMoved:function(p){return p=p.dragging&&p.dragging.enabled()?p:this,p.dragging&&p.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var p=0,b=this._handlers.length;p<b;p++)this._handlers[p].disable()},whenReady:function(p,b){return this._loaded?p.call(b||this,{target:this}):this.on("load",p,b),this},_getMapPanePos:function(){return Xf(this._mapPane)||new M(0,0)},_moved:function(){var p=this._getMapPanePos();return p&&!p.equals([0,0])},_getTopLeftPoint:function(p,b){var S=p&&b!==void 0?this._getNewPixelOrigin(p,b):this.getPixelOrigin();return S.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(p,b){var S=this.getSize()._divideBy(2);return this.project(p,b)._subtract(S)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(p,b,S){var W=this._getNewPixelOrigin(S,b);return this.project(p,b)._subtract(W)},_latLngBoundsToNewLayerBounds:function(p,b,S){var W=this._getNewPixelOrigin(S,b);return K([this.project(p.getSouthWest(),b)._subtract(W),this.project(p.getNorthWest(),b)._subtract(W),this.project(p.getSouthEast(),b)._subtract(W),this.project(p.getNorthEast(),b)._subtract(W)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(p){return this.latLngToLayerPoint(p).subtract(this._getCenterLayerPoint())},_limitCenter:function(p,b,S){if(!S)return p;var W=this.project(p,b),T=this.getSize().divideBy(2),z=new q(W.subtract(T),W.add(T)),A=this._getBoundsOffset(z,S,b);return Math.abs(A.x)<=1&&Math.abs(A.y)<=1?p:this.unproject(W.add(A),b)},_limitOffset:function(p,b){if(!b)return p;var S=this.getPixelBounds(),W=new q(S.min.add(p),S.max.add(p));return p.add(this._getBoundsOffset(W,b))},_getBoundsOffset:function(p,b,S){var W=K(this.project(b.getNorthEast(),S),this.project(b.getSouthWest(),S)),T=W.min.subtract(p.min),z=W.max.subtract(p.max),A=this._rebound(T.x,-z.x),te=this._rebound(T.y,-z.y);return new M(A,te)},_rebound:function(p,b){return p+b>0?Math.round(p-b)/2:Math.max(0,Math.ceil(p))-Math.max(0,Math.floor(b))},_limitZoom:function(p){var b=this.getMinZoom(),S=this.getMaxZoom(),W=Pe.any3d?this.options.zoomSnap:1;return W&&(p=Math.round(p/W)*W),Math.max(b,Math.min(S,p))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){jn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(p,b){var S=this._getCenterOffset(p)._trunc();return(b&&b.animate)!==!0&&!this.getSize().contains(S)?!1:(this.panBy(S,b),!0)},_createAnimProxy:function(){var p=this._proxy=Xt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(p),this.on("zoomanim",function(b){var S=aX,W=this._proxy.style[S];Ef(this._proxy,this.project(b.center,b.zoom),this.getZoomScale(b.zoom,1)),W===this._proxy.style[S]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){In(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var p=this.getCenter(),b=this.getZoom();Ef(this._proxy,this.project(p,b),this.getZoomScale(b,1))},_catchTransitionEnd:function(p){this._animatingZoom&&p.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(p,b,S){if(this._animatingZoom)return!0;if(S=S||{},!this._zoomAnimated||S.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var W=this.getZoomScale(b),T=this._getCenterOffset(p)._divideBy(1-1/W);return S.animate!==!0&&!this.getSize().contains(T)?!1:(C(function(){this._moveStart(!0,S.noMoveStart||!1)._animateZoom(p,b,!0)},this),!0)},_animateZoom:function(p,b,S,W){this._mapPane&&(S&&(this._animatingZoom=!0,this._animateToCenter=p,this._animateToZoom=b,pt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:p,zoom:b,noUpdate:W}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&jn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Iwe(p,b){return new kt(p,b)}var Na=F.extend({options:{position:"topright"},initialize:function(p){g(this,p)},getPosition:function(){return this.options.position},setPosition:function(p){var b=this._map;return b&&b.removeControl(this),this.options.position=p,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(p){this.remove(),this._map=p;var b=this._container=this.onAdd(p),S=this.getPosition(),W=p._controlCorners[S];return pt(b,"leaflet-control"),S.indexOf("bottom")!==-1?W.insertBefore(b,W.firstChild):W.appendChild(b),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(In(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(p){this._map&&p&&p.screenX>0&&p.screenY>0&&this._map.getContainer().focus()}}),ny=function(p){return new Na(p)};kt.include({addControl:function(p){return p.addTo(this),this},removeControl:function(p){return p.remove(),this},_initControlPos:function(){var p=this._controlCorners={},b="leaflet-",S=this._controlContainer=Xt("div",b+"control-container",this._container);function W(T,z){var A=b+T+" "+b+z;p[T+z]=Xt("div",A,S)}W("top","left"),W("top","right"),W("bottom","left"),W("bottom","right")},_clearControlPos:function(){for(var p in this._controlCorners)In(this._controlCorners[p]);In(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var TB=Na.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(p,b,S,W){return S<W?-1:W<S?1:0}},initialize:function(p,b,S){g(this,S),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var W in p)this._addLayer(p[W],W);for(W in b)this._addLayer(b[W],W,!0)},onAdd:function(p){this._initLayout(),this._update(),this._map=p,p.on("zoomend",this._checkDisabledLayers,this);for(var b=0;b<this._layers.length;b++)this._layers[b].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(p){return Na.prototype.addTo.call(this,p),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(p,b){return this._addLayer(p,b),this._map?this._update():this},addOverlay:function(p,b){return this._addLayer(p,b,!0),this._map?this._update():this},removeLayer:function(p){p.off("add remove",this._onLayerChange,this);var b=this._getLayer(l(p));return b&&this._layers.splice(this._layers.indexOf(b),1),this._map?this._update():this},expand:function(){pt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var p=this._map.getSize().y-(this._container.offsetTop+50);return p<this._section.clientHeight?(pt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=p+"px"):jn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return jn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var p="leaflet-control-layers",b=this._container=Xt("div",p),S=this.options.collapsed;b.setAttribute("aria-haspopup",!0),ty(b),yX(b);var W=this._section=Xt("section",p+"-list");S&&(this._map.on("click",this.collapse,this),ut(b,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var T=this._layersLink=Xt("a",p+"-toggle",b);T.href="#",T.title="Layers",T.setAttribute("role","button"),ut(T,{keydown:function(z){z.keyCode===13&&this._expandSafely()},click:function(z){Yr(z),this._expandSafely()}},this),S||this.expand(),this._baseLayersList=Xt("div",p+"-base",W),this._separator=Xt("div",p+"-separator",W),this._overlaysList=Xt("div",p+"-overlays",W),b.appendChild(W)},_getLayer:function(p){for(var b=0;b<this._layers.length;b++)if(this._layers[b]&&l(this._layers[b].layer)===p)return this._layers[b]},_addLayer:function(p,b,S){this._map&&p.on("add remove",this._onLayerChange,this),this._layers.push({layer:p,name:b,overlay:S}),this.options.sortLayers&&this._layers.sort(a(function(W,T){return this.options.sortFunction(W.layer,T.layer,W.name,T.name)},this)),this.options.autoZIndex&&p.setZIndex&&(this._lastZIndex++,p.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;RZ(this._baseLayersList),RZ(this._overlaysList),this._layerControlInputs=[];var p,b,S,W,T=0;for(S=0;S<this._layers.length;S++)W=this._layers[S],this._addItem(W),b=b||W.overlay,p=p||!W.overlay,T+=W.overlay?0:1;return this.options.hideSingleBase&&(p=p&&T>1,this._baseLayersList.style.display=p?"":"none"),this._separator.style.display=b&&p?"":"none",this},_onLayerChange:function(p){this._handlingClick||this._update();var b=this._getLayer(l(p.target)),S=b.overlay?p.type==="add"?"overlayadd":"overlayremove":p.type==="add"?"baselayerchange":null;S&&this._map.fire(S,b)},_createRadioElement:function(p,b){var S='<input type="radio" class="leaflet-control-layers-selector" name="'+p+'"'+(b?' checked="checked"':"")+"/>",W=document.createElement("div");return W.innerHTML=S,W.firstChild},_addItem:function(p){var b=document.createElement("label"),S=this._map.hasLayer(p.layer),W;p.overlay?(W=document.createElement("input"),W.type="checkbox",W.className="leaflet-control-layers-selector",W.defaultChecked=S):W=this._createRadioElement("leaflet-base-layers_"+l(this),S),this._layerControlInputs.push(W),W.layerId=l(p.layer),ut(W,"click",this._onInputClick,this);var T=document.createElement("span");T.innerHTML=" "+p.name;var z=document.createElement("span");b.appendChild(z),z.appendChild(W),z.appendChild(T);var A=p.overlay?this._overlaysList:this._baseLayersList;return A.appendChild(b),this._checkDisabledLayers(),b},_onInputClick:function(){if(!this._preventClick){var p=this._layerControlInputs,b,S,W=[],T=[];this._handlingClick=!0;for(var z=p.length-1;z>=0;z--)b=p[z],S=this._getLayer(b.layerId).layer,b.checked?W.push(S):b.checked||T.push(S);for(z=0;z<T.length;z++)this._map.hasLayer(T[z])&&this._map.removeLayer(T[z]);for(z=0;z<W.length;z++)this._map.hasLayer(W[z])||this._map.addLayer(W[z]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var p=this._layerControlInputs,b,S,W=this._map.getZoom(),T=p.length-1;T>=0;T--)b=p[T],S=this._getLayer(b.layerId).layer,b.disabled=S.options.minZoom!==void 0&&W<S.options.minZoom||S.options.maxZoom!==void 0&&W>S.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var p=this._section;this._preventClick=!0,ut(p,"click",Yr),this.expand();var b=this;setTimeout(function(){nn(p,"click",Yr),b._preventClick=!1})}}),Wwe=function(p,b,S){return new TB(p,b,S)},xX=Na.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(p){var b="leaflet-control-zoom",S=Xt("div",b+" leaflet-bar"),W=this.options;return this._zoomInButton=this._createButton(W.zoomInText,W.zoomInTitle,b+"-in",S,this._zoomIn),this._zoomOutButton=this._createButton(W.zoomOutText,W.zoomOutTitle,b+"-out",S,this._zoomOut),this._updateDisabled(),p.on("zoomend zoomlevelschange",this._updateDisabled,this),S},onRemove:function(p){p.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(p){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(p.shiftKey?3:1))},_zoomOut:function(p){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(p.shiftKey?3:1))},_createButton:function(p,b,S,W,T){var z=Xt("a",S,W);return z.innerHTML=p,z.href="#",z.title=b,z.setAttribute("role","button"),z.setAttribute("aria-label",b),ty(z),ut(z,"click",Rf),ut(z,"click",T,this),ut(z,"click",this._refocusOnMap,this),z},_updateDisabled:function(){var p=this._map,b="leaflet-disabled";jn(this._zoomInButton,b),jn(this._zoomOutButton,b),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||p._zoom===p.getMinZoom())&&(pt(this._zoomOutButton,b),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||p._zoom===p.getMaxZoom())&&(pt(this._zoomInButton,b),this._zoomInButton.setAttribute("aria-disabled","true"))}});kt.mergeOptions({zoomControl:!0}),kt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new xX,this.addControl(this.zoomControl))});var Ewe=function(p){return new xX(p)},NB=Na.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(p){var b="leaflet-control-scale",S=Xt("div",b),W=this.options;return this._addScales(W,b+"-line",S),p.on(W.updateWhenIdle?"moveend":"move",this._update,this),p.whenReady(this._update,this),S},onRemove:function(p){p.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(p,b,S){p.metric&&(this._mScale=Xt("div",b,S)),p.imperial&&(this._iScale=Xt("div",b,S))},_update:function(){var p=this._map,b=p.getSize().y/2,S=p.distance(p.containerPointToLatLng([0,b]),p.containerPointToLatLng([this.options.maxWidth,b]));this._updateScales(S)},_updateScales:function(p){this.options.metric&&p&&this._updateMetric(p),this.options.imperial&&p&&this._updateImperial(p)},_updateMetric:function(p){var b=this._getRoundNum(p),S=b<1e3?b+" m":b/1e3+" km";this._updateScale(this._mScale,S,b/p)},_updateImperial:function(p){var b=p*3.2808399,S,W,T;b>5280?(S=b/5280,W=this._getRoundNum(S),this._updateScale(this._iScale,W+" mi",W/S)):(T=this._getRoundNum(b),this._updateScale(this._iScale,T+" ft",T/b))},_updateScale:function(p,b,S){p.style.width=Math.round(this.options.maxWidth*S)+"px",p.innerHTML=b},_getRoundNum:function(p){var b=Math.pow(10,(Math.floor(p)+"").length-1),S=p/b;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:1,b*S}}),Xwe=function(p){return new NB(p)},Lwe='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',wX=Na.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Pe.inlineSvg?Lwe+" ":"")+"Leaflet</a>"},initialize:function(p){g(this,p),this._attributions={}},onAdd:function(p){p.attributionControl=this,this._container=Xt("div","leaflet-control-attribution"),ty(this._container);for(var b in p._layers)p._layers[b].getAttribution&&this.addAttribution(p._layers[b].getAttribution());return this._update(),p.on("layeradd",this._addAttribution,this),this._container},onRemove:function(p){p.off("layeradd",this._addAttribution,this)},_addAttribution:function(p){p.layer.getAttribution&&(this.addAttribution(p.layer.getAttribution()),p.layer.once("remove",function(){this.removeAttribution(p.layer.getAttribution())},this))},setPrefix:function(p){return this.options.prefix=p,this._update(),this},addAttribution:function(p){return p?(this._attributions[p]||(this._attributions[p]=0),this._attributions[p]++,this._update(),this):this},removeAttribution:function(p){return p?(this._attributions[p]&&(this._attributions[p]--,this._update()),this):this},_update:function(){if(this._map){var p=[];for(var b in this._attributions)this._attributions[b]&&p.push(b);var S=[];this.options.prefix&&S.push(this.options.prefix),p.length&&S.push(p.join(", ")),this._container.innerHTML=S.join(' <span aria-hidden="true">|</span> ')}}});kt.mergeOptions({attributionControl:!0}),kt.addInitHook(function(){this.options.attributionControl&&new wX().addTo(this)});var Rwe=function(p){return new wX(p)};Na.Layers=TB,Na.Zoom=xX,Na.Scale=NB,Na.Attribution=wX,ny.layers=Wwe,ny.zoom=Ewe,ny.scale=Xwe,ny.attribution=Rwe;var Bs=F.extend({initialize:function(p){this._map=p},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Bs.addTo=function(p,b){return p.addHandler(b,this),this};var Cwe={Events:P},FB=Pe.touch?"touchstart mousedown":"mousedown",Wc=H.extend({options:{clickTolerance:3},initialize:function(p,b,S,W){g(this,W),this._element=p,this._dragStartTarget=b||p,this._preventOutline=S},enable:function(){this._enabled||(ut(this._dragStartTarget,FB,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Wc._dragging===this&&this.finishDrag(!0),nn(this._dragStartTarget,FB,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(p){if(this._enabled&&(this._moved=!1,!sX(this._element,"leaflet-zoom-anim"))){if(p.touches&&p.touches.length!==1){Wc._dragging===this&&this.finishDrag();return}if(!(Wc._dragging||p.shiftKey||p.which!==1&&p.button!==1&&!p.touches)&&(Wc._dragging=this,this._preventOutline&&pX(this._element),cX(),Qb(),!this._moving)){this.fire("down");var b=p.touches?p.touches[0]:p,S=XB(this._element);this._startPoint=new M(b.clientX,b.clientY),this._startPos=Xf(this._element),this._parentScale=hX(S);var W=p.type==="mousedown";ut(document,W?"mousemove":"touchmove",this._onMove,this),ut(document,W?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(p){if(this._enabled){if(p.touches&&p.touches.length>1){this._moved=!0;return}var b=p.touches&&p.touches.length===1?p.touches[0]:p,S=new M(b.clientX,b.clientY)._subtract(this._startPoint);!S.x&&!S.y||Math.abs(S.x)+Math.abs(S.y)<this.options.clickTolerance||(S.x/=this._parentScale.x,S.y/=this._parentScale.y,Yr(p),this._moved||(this.fire("dragstart"),this._moved=!0,pt(document.body,"leaflet-dragging"),this._lastTarget=p.target||p.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(S),this._moving=!0,this._lastEvent=p,this._updatePosition())}},_updatePosition:function(){var p={originalEvent:this._lastEvent};this.fire("predrag",p),Dn(this._element,this._newPos),this.fire("drag",p)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(p){jn(document.body,"leaflet-dragging"),this._lastTarget&&(jn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),nn(document,"mousemove touchmove",this._onMove,this),nn(document,"mouseup touchend touchcancel",this._onUp,this),dX(),qb();var b=this._moved&&this._moving;this._moving=!1,Wc._dragging=!1,b&&this.fire("dragend",{noInertia:p,distance:this._newPos.distanceTo(this._startPos)})}});function MB(p,b,S){var W,T=[1,4,2,8],z,A,te,ie,he,Re,qe,mt;for(z=0,Re=p.length;z<Re;z++)p[z]._code=Cf(p[z],b);for(te=0;te<4;te++){for(qe=T[te],W=[],z=0,Re=p.length,A=Re-1;z<Re;A=z++)ie=p[z],he=p[A],ie._code&qe?he._code&qe||(mt=NZ(he,ie,qe,b,S),mt._code=Cf(mt,b),W.push(mt)):(he._code&qe&&(mt=NZ(he,ie,qe,b,S),mt._code=Cf(mt,b),W.push(mt)),W.push(ie));p=W}return p}function OB(p,b){var S,W,T,z,A,te,ie,he,Re;if(!p||p.length===0)throw new Error("latlngs not passed");$o(p)||(console.warn("latlngs are not flat! Only the first ring will be used"),p=p[0]);var qe=B([0,0]),mt=$(p),bi=mt.getNorthWest().distanceTo(mt.getSouthWest())*mt.getNorthEast().distanceTo(mt.getNorthWest());bi<1700&&(qe=ZX(p));var hr=p.length,Qo=[];for(S=0;S<hr;S++){var Oi=B(p[S]);Qo.push(b.project(B([Oi.lat-qe.lat,Oi.lng-qe.lng])))}for(te=ie=he=0,S=0,W=hr-1;S<hr;W=S++)T=Qo[S],z=Qo[W],A=T.y*z.x-z.y*T.x,ie+=(T.x+z.x)*A,he+=(T.y+z.y)*A,te+=A*3;te===0?Re=Qo[0]:Re=[ie/te,he/te];var em=b.unproject(J(Re));return B([em.lat+qe.lat,em.lng+qe.lng])}function ZX(p){for(var b=0,S=0,W=0,T=0;T<p.length;T++){var z=B(p[T]);b+=z.lat,S+=z.lng,W++}return B([b/W,S/W])}var Vwe={__proto__:null,clipPolygon:MB,polygonCenter:OB,centroid:ZX};function zB(p,b){if(!b||!p.length)return p.slice();var S=b*b;return p=Nwe(p,S),p=Twe(p,S),p}function PB(p,b,S){return Math.sqrt(ry(p,b,S,!0))}function Ywe(p,b,S){return ry(p,b,S)}function Twe(p,b){var S=p.length,W=typeof Uint8Array!="undefined"?Uint8Array:Array,T=new W(S);T[0]=T[S-1]=1,SX(p,T,b,0,S-1);var z,A=[];for(z=0;z<S;z++)T[z]&&A.push(p[z]);return A}function SX(p,b,S,W,T){var z=0,A,te,ie;for(te=W+1;te<=T-1;te++)ie=ry(p[te],p[W],p[T],!0),ie>z&&(A=te,z=ie);z>S&&(b[A]=1,SX(p,b,S,W,A),SX(p,b,S,A,T))}function Nwe(p,b){for(var S=[p[0]],W=1,T=0,z=p.length;W<z;W++)Fwe(p[W],p[T])>b&&(S.push(p[W]),T=W);return T<z-1&&S.push(p[z-1]),S}var jB;function HB(p,b,S,W,T){var z=W?jB:Cf(p,S),A=Cf(b,S),te,ie,he;for(jB=A;;){if(!(z|A))return[p,b];if(z&A)return!1;te=z||A,ie=NZ(p,b,te,S,T),he=Cf(ie,S),te===z?(p=ie,z=he):(b=ie,A=he)}}function NZ(p,b,S,W,T){var z=b.x-p.x,A=b.y-p.y,te=W.min,ie=W.max,he,Re;return S&8?(he=p.x+z*(ie.y-p.y)/A,Re=ie.y):S&4?(he=p.x+z*(te.y-p.y)/A,Re=te.y):S&2?(he=ie.x,Re=p.y+A*(ie.x-p.x)/z):S&1&&(he=te.x,Re=p.y+A*(te.x-p.x)/z),new M(he,Re,T)}function Cf(p,b){var S=0;return p.x<b.min.x?S|=1:p.x>b.max.x&&(S|=2),p.y<b.min.y?S|=4:p.y>b.max.y&&(S|=8),S}function Fwe(p,b){var S=b.x-p.x,W=b.y-p.y;return S*S+W*W}function ry(p,b,S,W){var T=b.x,z=b.y,A=S.x-T,te=S.y-z,ie=A*A+te*te,he;return ie>0&&(he=((p.x-T)*A+(p.y-z)*te)/ie,he>1?(T=S.x,z=S.y):he>0&&(T+=A*he,z+=te*he)),A=p.x-T,te=p.y-z,W?A*A+te*te:new M(T,z)}function $o(p){return!Z(p[0])||typeof p[0][0]!="object"&&typeof p[0][0]<"u"}function JB(p){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),$o(p)}function BB(p,b){var S,W,T,z,A,te,ie,he;if(!p||p.length===0)throw new Error("latlngs not passed");$o(p)||(console.warn("latlngs are not flat! Only the first ring will be used"),p=p[0]);var Re=B([0,0]),qe=$(p),mt=qe.getNorthWest().distanceTo(qe.getSouthWest())*qe.getNorthEast().distanceTo(qe.getNorthWest());mt<1700&&(Re=ZX(p));var bi=p.length,hr=[];for(S=0;S<bi;S++){var Qo=B(p[S]);hr.push(b.project(B([Qo.lat-Re.lat,Qo.lng-Re.lng])))}for(S=0,W=0;S<bi-1;S++)W+=hr[S].distanceTo(hr[S+1])/2;if(W===0)he=hr[0];else for(S=0,z=0;S<bi-1;S++)if(A=hr[S],te=hr[S+1],T=A.distanceTo(te),z+=T,z>W){ie=(z-W)/T,he=[te.x-ie*(te.x-A.x),te.y-ie*(te.y-A.y)];break}var Oi=b.unproject(J(he));return B([Oi.lat+Re.lat,Oi.lng+Re.lng])}var Mwe={__proto__:null,simplify:zB,pointToSegmentDistance:PB,closestPointOnSegment:Ywe,clipSegment:HB,_getEdgeIntersection:NZ,_getBitCode:Cf,_sqClosestPointOnSegment:ry,isFlat:$o,_flat:JB,polylineCenter:BB},kX={project:function(p){return new M(p.lng,p.lat)},unproject:function(p){return new Q(p.y,p.x)},bounds:new q([-180,-90],[180,90])},_X={R:6378137,R_MINOR:6356752314245179e-9,bounds:new q([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(p){var b=Math.PI/180,S=this.R,W=p.lat*b,T=this.R_MINOR/S,z=Math.sqrt(1-T*T),A=z*Math.sin(W),te=Math.tan(Math.PI/4-W/2)/Math.pow((1-A)/(1+A),z/2);return W=-S*Math.log(Math.max(te,1e-10)),new M(p.lng*b*S,W)},unproject:function(p){for(var b=180/Math.PI,S=this.R,W=this.R_MINOR/S,T=Math.sqrt(1-W*W),z=Math.exp(-p.y/S),A=Math.PI/2-2*Math.atan(z),te=0,ie=.1,he;te<15&&Math.abs(ie)>1e-7;te++)he=T*Math.sin(A),he=Math.pow((1-he)/(1+he),T/2),ie=Math.PI/2-2*Math.atan(z*he)-A,A+=ie;return new Q(A*b,p.x*b/S)}},Owe={__proto__:null,LonLat:kX,Mercator:_X,SphericalMercator:oe},zwe=i({},re,{code:"EPSG:3395",projection:_X,transformation:function(){var p=.5/(Math.PI*_X.R);return U(p,.5,-p,.5)}()}),KB=i({},re,{code:"EPSG:4326",projection:kX,transformation:U(1/180,1,-1/180,.5)}),Pwe=i({},pe,{projection:kX,transformation:U(1,0,-1,0),scale:function(p){return Math.pow(2,p)},zoom:function(p){return Math.log(p)/Math.LN2},distance:function(p,b){var S=b.lng-p.lng,W=b.lat-p.lat;return Math.sqrt(S*S+W*W)},infinite:!0});pe.Earth=re,pe.EPSG3395=zwe,pe.EPSG3857=de,pe.EPSG900913=be,pe.EPSG4326=KB,pe.Simple=Pwe;var Fa=H.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(p){return p.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(p){return p&&p.removeLayer(this),this},getPane:function(p){return this._map.getPane(p?this.options[p]||p:this.options.pane)},addInteractiveTarget:function(p){return this._map._targets[l(p)]=this,this},removeInteractiveTarget:function(p){return delete this._map._targets[l(p)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(p){var b=p.target;if(b.hasLayer(this)){if(this._map=b,this._zoomAnimated=b._zoomAnimated,this.getEvents){var S=this.getEvents();b.on(S,this),this.once("remove",function(){b.off(S,this)},this)}this.onAdd(b),this.fire("add"),b.fire("layeradd",{layer:this})}}});kt.include({addLayer:function(p){if(!p._layerAdd)throw new Error("The provided object is not a Layer.");var b=l(p);return this._layers[b]?this:(this._layers[b]=p,p._mapToAdd=this,p.beforeAdd&&p.beforeAdd(this),this.whenReady(p._layerAdd,p),this)},removeLayer:function(p){var b=l(p);return this._layers[b]?(this._loaded&&p.onRemove(this),delete this._layers[b],this._loaded&&(this.fire("layerremove",{layer:p}),p.fire("remove")),p._map=p._mapToAdd=null,this):this},hasLayer:function(p){return l(p)in this._layers},eachLayer:function(p,b){for(var S in this._layers)p.call(b,this._layers[S]);return this},_addLayers:function(p){p=p?Z(p)?p:[p]:[];for(var b=0,S=p.length;b<S;b++)this.addLayer(p[b])},_addZoomLimit:function(p){(!isNaN(p.options.maxZoom)||!isNaN(p.options.minZoom))&&(this._zoomBoundLayers[l(p)]=p,this._updateZoomLevels())},_removeZoomLimit:function(p){var b=l(p);this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels())},_updateZoomLevels:function(){var p=1/0,b=-1/0,S=this._getZoomSpan();for(var W in this._zoomBoundLayers){var T=this._zoomBoundLayers[W].options;p=T.minZoom===void 0?p:Math.min(p,T.minZoom),b=T.maxZoom===void 0?b:Math.max(b,T.maxZoom)}this._layersMaxZoom=b===-1/0?void 0:b,this._layersMinZoom=p===1/0?void 0:p,S!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ah=Fa.extend({initialize:function(p,b){g(this,b),this._layers={};var S,W;if(p)for(S=0,W=p.length;S<W;S++)this.addLayer(p[S])},addLayer:function(p){var b=this.getLayerId(p);return this._layers[b]=p,this._map&&this._map.addLayer(p),this},removeLayer:function(p){var b=p in this._layers?p:this.getLayerId(p);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(p){var b=typeof p=="number"?p:this.getLayerId(p);return b in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(p){var b=Array.prototype.slice.call(arguments,1),S,W;for(S in this._layers)W=this._layers[S],W[p]&&W[p].apply(W,b);return this},onAdd:function(p){this.eachLayer(p.addLayer,p)},onRemove:function(p){this.eachLayer(p.removeLayer,p)},eachLayer:function(p,b){for(var S in this._layers)p.call(b,this._layers[S]);return this},getLayer:function(p){return this._layers[p]},getLayers:function(){var p=[];return this.eachLayer(p.push,p),p},setZIndex:function(p){return this.invoke("setZIndex",p)},getLayerId:function(p){return l(p)}}),jwe=function(p,b){return new Ah(p,b)},fu=Ah.extend({addLayer:function(p){return this.hasLayer(p)?this:(p.addEventParent(this),Ah.prototype.addLayer.call(this,p),this.fire("layeradd",{layer:p}))},removeLayer:function(p){return this.hasLayer(p)?(p in this._layers&&(p=this._layers[p]),p.removeEventParent(this),Ah.prototype.removeLayer.call(this,p),this.fire("layerremove",{layer:p})):this},setStyle:function(p){return this.invoke("setStyle",p)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var p=new D;for(var b in this._layers){var S=this._layers[b];p.extend(S.getBounds?S.getBounds():S.getLatLng())}return p}}),Hwe=function(p,b){return new fu(p,b)},Uh=F.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(p){g(this,p)},createIcon:function(p){return this._createIcon("icon",p)},createShadow:function(p){return this._createIcon("shadow",p)},_createIcon:function(p,b){var S=this._getIconUrl(p);if(!S){if(p==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var W=this._createImg(S,b&&b.tagName==="IMG"?b:null);return this._setIconStyles(W,p),(this.options.crossOrigin||this.options.crossOrigin==="")&&(W.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),W},_setIconStyles:function(p,b){var S=this.options,W=S[b+"Size"];typeof W=="number"&&(W=[W,W]);var T=J(W),z=J(b==="shadow"&&S.shadowAnchor||S.iconAnchor||T&&T.divideBy(2,!0));p.className="leaflet-marker-"+b+" "+(S.className||""),z&&(p.style.marginLeft=-z.x+"px",p.style.marginTop=-z.y+"px"),T&&(p.style.width=T.x+"px",p.style.height=T.y+"px")},_createImg:function(p,b){return b=b||document.createElement("img"),b.src=p,b},_getIconUrl:function(p){return Pe.retina&&this.options[p+"RetinaUrl"]||this.options[p+"Url"]}});function Jwe(p){return new Uh(p)}var iy=Uh.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(p){return typeof iy.imagePath!="string"&&(iy.imagePath=this._detectIconPath()),(this.options.imagePath||iy.imagePath)+Uh.prototype._getIconUrl.call(this,p)},_stripUrl:function(p){var b=function(S,W,T){var z=W.exec(S);return z&&z[T]};return p=b(p,/^url\((['"])?(.+)\1\)$/,2),p&&b(p,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var p=Xt("div","leaflet-default-icon-path",document.body),b=$b(p,"background-image")||$b(p,"backgroundImage");if(document.body.removeChild(p),b=this._stripUrl(b),b)return b;var S=document.querySelector('link[href$="leaflet.css"]');return S?S.href.substring(0,S.href.length-11-1):""}}),DB=Bs.extend({initialize:function(p){this._marker=p},addHooks:function(){var p=this._marker._icon;this._draggable||(this._draggable=new Wc(p,p,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pt(p,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&jn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(p){var b=this._marker,S=b._map,W=this._marker.options.autoPanSpeed,T=this._marker.options.autoPanPadding,z=Xf(b._icon),A=S.getPixelBounds(),te=S.getPixelOrigin(),ie=K(A.min._subtract(te).add(T),A.max._subtract(te).subtract(T));if(!ie.contains(z)){var he=J((Math.max(ie.max.x,z.x)-ie.max.x)/(A.max.x-ie.max.x)-(Math.min(ie.min.x,z.x)-ie.min.x)/(A.min.x-ie.min.x),(Math.max(ie.max.y,z.y)-ie.max.y)/(A.max.y-ie.max.y)-(Math.min(ie.min.y,z.y)-ie.min.y)/(A.min.y-ie.min.y)).multiplyBy(W);S.panBy(he,{animate:!1}),this._draggable._newPos._add(he),this._draggable._startPos._add(he),Dn(b._icon,this._draggable._newPos),this._onDrag(p),this._panRequest=C(this._adjustPan.bind(this,p))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(p){this._marker.options.autoPan&&(N(this._panRequest),this._panRequest=C(this._adjustPan.bind(this,p)))},_onDrag:function(p){var b=this._marker,S=b._shadow,W=Xf(b._icon),T=b._map.layerPointToLatLng(W);S&&Dn(S,W),b._latlng=T,p.latlng=T,p.oldLatLng=this._oldLatLng,b.fire("move",p).fire("drag",p)},_onDragEnd:function(p){N(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",p)}}),FZ=Fa.extend({options:{icon:new iy,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(p,b){g(this,b),this._latlng=B(p)},onAdd:function(p){this._zoomAnimated=this._zoomAnimated&&p.options.markerZoomAnimation,this._zoomAnimated&&p.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(p){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&p.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(p){var b=this._latlng;return this._latlng=B(p),this.update(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},setZIndexOffset:function(p){return this.options.zIndexOffset=p,this.update()},getIcon:function(){return this.options.icon},setIcon:function(p){return this.options.icon=p,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var p=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(p)}return this},_initIcon:function(){var p=this.options,b="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),S=p.icon.createIcon(this._icon),W=!1;S!==this._icon&&(this._icon&&this._removeIcon(),W=!0,p.title&&(S.title=p.title),S.tagName==="IMG"&&(S.alt=p.alt||"")),pt(S,b),p.keyboard&&(S.tabIndex="0",S.setAttribute("role","button")),this._icon=S,p.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ut(S,"focus",this._panOnFocus,this);var T=p.icon.createShadow(this._shadow),z=!1;T!==this._shadow&&(this._removeShadow(),z=!0),T&&(pt(T,b),T.alt=""),this._shadow=T,p.opacity<1&&this._updateOpacity(),W&&this.getPane().appendChild(this._icon),this._initInteraction(),T&&z&&this.getPane(p.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&nn(this._icon,"focus",this._panOnFocus,this),In(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&In(this._shadow),this._shadow=null},_setPos:function(p){this._icon&&Dn(this._icon,p),this._shadow&&Dn(this._shadow,p),this._zIndex=p.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(p){this._icon&&(this._icon.style.zIndex=this._zIndex+p)},_animateZoom:function(p){var b=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.interactive&&(pt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),DB)){var p=this.options.draggable;this.dragging&&(p=this.dragging.enabled(),this.dragging.disable()),this.dragging=new DB(this),p&&this.dragging.enable()}},setOpacity:function(p){return this.options.opacity=p,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var p=this.options.opacity;this._icon&&Uo(this._icon,p),this._shadow&&Uo(this._shadow,p)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var p=this._map;if(p){var b=this.options.icon.options,S=b.iconSize?J(b.iconSize):J(0,0),W=b.iconAnchor?J(b.iconAnchor):J(0,0);p.panInside(this._latlng,{paddingTopLeft:W,paddingBottomRight:S.subtract(W)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Bwe(p,b){return new FZ(p,b)}var Ec=Fa.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(p){this._renderer=p.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(p){return g(this,p),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&p&&Object.prototype.hasOwnProperty.call(p,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),MZ=Ec.extend({options:{fill:!0,radius:10},initialize:function(p,b){g(this,b),this._latlng=B(p),this._radius=this.options.radius},setLatLng:function(p){var b=this._latlng;return this._latlng=B(p),this.redraw(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(p){return this.options.radius=this._radius=p,this.redraw()},getRadius:function(){return this._radius},setStyle:function(p){var b=p&&p.radius||this._radius;return Ec.prototype.setStyle.call(this,p),this.setRadius(b),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var p=this._radius,b=this._radiusY||p,S=this._clickTolerance(),W=[p+S,b+S];this._pxBounds=new q(this._point.subtract(W),this._point.add(W))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(p){return p.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Kwe(p,b){return new MZ(p,b)}var GX=MZ.extend({initialize:function(p,b,S){if(typeof b=="number"&&(b=i({},S,{radius:b})),g(this,b),this._latlng=B(p),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(p){return this._mRadius=p,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var p=[this._radius,this._radiusY||this._radius];return new D(this._map.layerPointToLatLng(this._point.subtract(p)),this._map.layerPointToLatLng(this._point.add(p)))},setStyle:Ec.prototype.setStyle,_project:function(){var p=this._latlng.lng,b=this._latlng.lat,S=this._map,W=S.options.crs;if(W.distance===re.distance){var T=Math.PI/180,z=this._mRadius/re.R/T,A=S.project([b+z,p]),te=S.project([b-z,p]),ie=A.add(te).divideBy(2),he=S.unproject(ie).lat,Re=Math.acos((Math.cos(z*T)-Math.sin(b*T)*Math.sin(he*T))/(Math.cos(b*T)*Math.cos(he*T)))/T;(isNaN(Re)||Re===0)&&(Re=z/Math.cos(Math.PI/180*b)),this._point=ie.subtract(S.getPixelOrigin()),this._radius=isNaN(Re)?0:ie.x-S.project([he,p-Re]).x,this._radiusY=ie.y-A.y}else{var qe=W.unproject(W.project(this._latlng).subtract([this._mRadius,0]));this._point=S.latLngToLayerPoint(this._latlng),this._radius=this._point.x-S.latLngToLayerPoint(qe).x}this._updateBounds()}});function Dwe(p,b,S){return new GX(p,b,S)}var pu=Ec.extend({options:{smoothFactor:1,noClip:!1},initialize:function(p,b){g(this,b),this._setLatLngs(p)},getLatLngs:function(){return this._latlngs},setLatLngs:function(p){return this._setLatLngs(p),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(p){for(var b=1/0,S=null,W=ry,T,z,A=0,te=this._parts.length;A<te;A++)for(var ie=this._parts[A],he=1,Re=ie.length;he<Re;he++){T=ie[he-1],z=ie[he];var qe=W(p,T,z,!0);qe<b&&(b=qe,S=W(p,T,z))}return S&&(S.distance=Math.sqrt(b)),S},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return BB(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(p,b){return b=b||this._defaultShape(),p=B(p),b.push(p),this._bounds.extend(p),this.redraw()},_setLatLngs:function(p){this._bounds=new D,this._latlngs=this._convertLatLngs(p)},_defaultShape:function(){return $o(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(p){for(var b=[],S=$o(p),W=0,T=p.length;W<T;W++)S?(b[W]=B(p[W]),this._bounds.extend(b[W])):b[W]=this._convertLatLngs(p[W]);return b},_project:function(){var p=new q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,p),this._bounds.isValid()&&p.isValid()&&(this._rawPxBounds=p,this._updateBounds())},_updateBounds:function(){var p=this._clickTolerance(),b=new M(p,p);this._rawPxBounds&&(this._pxBounds=new q([this._rawPxBounds.min.subtract(b),this._rawPxBounds.max.add(b)]))},_projectLatlngs:function(p,b,S){var W=p[0]instanceof Q,T=p.length,z,A;if(W){for(A=[],z=0;z<T;z++)A[z]=this._map.latLngToLayerPoint(p[z]),S.extend(A[z]);b.push(A)}else for(z=0;z<T;z++)this._projectLatlngs(p[z],b,S)},_clipPoints:function(){var p=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(p))){if(this.options.noClip){this._parts=this._rings;return}var b=this._parts,S,W,T,z,A,te,ie;for(S=0,T=0,z=this._rings.length;S<z;S++)for(ie=this._rings[S],W=0,A=ie.length;W<A-1;W++)te=HB(ie[W],ie[W+1],p,W,!0),te&&(b[T]=b[T]||[],b[T].push(te[0]),(te[1]!==ie[W+1]||W===A-2)&&(b[T].push(te[1]),T++))}},_simplifyPoints:function(){for(var p=this._parts,b=this.options.smoothFactor,S=0,W=p.length;S<W;S++)p[S]=zB(p[S],b)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(p,b){var S,W,T,z,A,te,ie=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(S=0,z=this._parts.length;S<z;S++)for(te=this._parts[S],W=0,A=te.length,T=A-1;W<A;T=W++)if(!(!b&&W===0)&&PB(p,te[T],te[W])<=ie)return!0;return!1}});function Awe(p,b){return new pu(p,b)}pu._flat=JB;var $h=pu.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return OB(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(p){var b=pu.prototype._convertLatLngs.call(this,p),S=b.length;return S>=2&&b[0]instanceof Q&&b[0].equals(b[S-1])&&b.pop(),b},_setLatLngs:function(p){pu.prototype._setLatLngs.call(this,p),$o(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return $o(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var p=this._renderer._bounds,b=this.options.weight,S=new M(b,b);if(p=new q(p.min.subtract(S),p.max.add(S)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(p))){if(this.options.noClip){this._parts=this._rings;return}for(var W=0,T=this._rings.length,z;W<T;W++)z=MB(this._rings[W],p,!0),z.length&&this._parts.push(z)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(p){var b=!1,S,W,T,z,A,te,ie,he;if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(z=0,ie=this._parts.length;z<ie;z++)for(S=this._parts[z],A=0,he=S.length,te=he-1;A<he;te=A++)W=S[A],T=S[te],W.y>p.y!=T.y>p.y&&p.x<(T.x-W.x)*(p.y-W.y)/(T.y-W.y)+W.x&&(b=!b);return b||pu.prototype._containsPoint.call(this,p,!0)}});function Uwe(p,b){return new $h(p,b)}var hu=fu.extend({initialize:function(p,b){g(this,b),this._layers={},p&&this.addData(p)},addData:function(p){var b=Z(p)?p:p.features,S,W,T;if(b){for(S=0,W=b.length;S<W;S++)T=b[S],(T.geometries||T.geometry||T.features||T.coordinates)&&this.addData(T);return this}var z=this.options;if(z.filter&&!z.filter(p))return this;var A=OZ(p,z);return A?(A.feature=jZ(p),A.defaultOptions=A.options,this.resetStyle(A),z.onEachFeature&&z.onEachFeature(p,A),this.addLayer(A)):this},resetStyle:function(p){return p===void 0?this.eachLayer(this.resetStyle,this):(p.options=i({},p.defaultOptions),this._setLayerStyle(p,this.options.style),this)},setStyle:function(p){return this.eachLayer(function(b){this._setLayerStyle(b,p)},this)},_setLayerStyle:function(p,b){p.setStyle&&(typeof b=="function"&&(b=b(p.feature)),p.setStyle(b))}});function OZ(p,b){var S=p.type==="Feature"?p.geometry:p,W=S?S.coordinates:null,T=[],z=b&&b.pointToLayer,A=b&&b.coordsToLatLng||IX,te,ie,he,Re;if(!W&&!S)return null;switch(S.type){case"Point":return te=A(W),AB(z,p,te,b);case"MultiPoint":for(he=0,Re=W.length;he<Re;he++)te=A(W[he]),T.push(AB(z,p,te,b));return new fu(T);case"LineString":case"MultiLineString":return ie=zZ(W,S.type==="LineString"?0:1,A),new pu(ie,b);case"Polygon":case"MultiPolygon":return ie=zZ(W,S.type==="Polygon"?1:2,A),new $h(ie,b);case"GeometryCollection":for(he=0,Re=S.geometries.length;he<Re;he++){var qe=OZ({geometry:S.geometries[he],type:"Feature",properties:p.properties},b);qe&&T.push(qe)}return new fu(T);case"FeatureCollection":for(he=0,Re=S.features.length;he<Re;he++){var mt=OZ(S.features[he],b);mt&&T.push(mt)}return new fu(T);default:throw new Error("Invalid GeoJSON object.")}}function AB(p,b,S,W){return p?p(b,S):new FZ(S,W&&W.markersInheritOptions&&W)}function IX(p){return new Q(p[1],p[0],p[2])}function zZ(p,b,S){for(var W=[],T=0,z=p.length,A;T<z;T++)A=b?zZ(p[T],b-1,S):(S||IX)(p[T]),W.push(A);return W}function WX(p,b){return p=B(p),p.alt!==void 0?[f(p.lng,b),f(p.lat,b),f(p.alt,b)]:[f(p.lng,b),f(p.lat,b)]}function PZ(p,b,S,W){for(var T=[],z=0,A=p.length;z<A;z++)T.push(b?PZ(p[z],$o(p[z])?0:b-1,S,W):WX(p[z],W));return!b&&S&&T.length>0&&T.push(T[0].slice()),T}function Qh(p,b){return p.feature?i({},p.feature,{geometry:b}):jZ(b)}function jZ(p){return p.type==="Feature"||p.type==="FeatureCollection"?p:{type:"Feature",properties:{},geometry:p}}var EX={toGeoJSON:function(p){return Qh(this,{type:"Point",coordinates:WX(this.getLatLng(),p)})}};FZ.include(EX),GX.include(EX),MZ.include(EX),pu.include({toGeoJSON:function(p){var b=!$o(this._latlngs),S=PZ(this._latlngs,b?1:0,!1,p);return Qh(this,{type:(b?"Multi":"")+"LineString",coordinates:S})}}),$h.include({toGeoJSON:function(p){var b=!$o(this._latlngs),S=b&&!$o(this._latlngs[0]),W=PZ(this._latlngs,S?2:b?1:0,!0,p);return b||(W=[W]),Qh(this,{type:(S?"Multi":"")+"Polygon",coordinates:W})}}),Ah.include({toMultiPoint:function(p){var b=[];return this.eachLayer(function(S){b.push(S.toGeoJSON(p).geometry.coordinates)}),Qh(this,{type:"MultiPoint",coordinates:b})},toGeoJSON:function(p){var b=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(b==="MultiPoint")return this.toMultiPoint(p);var S=b==="GeometryCollection",W=[];return this.eachLayer(function(T){if(T.toGeoJSON){var z=T.toGeoJSON(p);if(S)W.push(z.geometry);else{var A=jZ(z);A.type==="FeatureCollection"?W.push.apply(W,A.features):W.push(A)}}}),S?Qh(this,{geometries:W,type:"GeometryCollection"}):{type:"FeatureCollection",features:W}}});function UB(p,b){return new hu(p,b)}var $we=UB,HZ=Fa.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(p,b,S){this._url=p,this._bounds=$(b),g(this,S)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){In(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(p){return this.options.opacity=p,this._image&&this._updateOpacity(),this},setStyle:function(p){return p.opacity&&this.setOpacity(p.opacity),this},bringToFront:function(){return this._map&&Kh(this._image),this},bringToBack:function(){return this._map&&Dh(this._image),this},setUrl:function(p){return this._url=p,this._image&&(this._image.src=p),this},setBounds:function(p){return this._bounds=$(p),this._map&&this._reset(),this},getEvents:function(){var p={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},setZIndex:function(p){return this.options.zIndex=p,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var p=this._url.tagName==="IMG",b=this._image=p?this._url:Xt("img");if(pt(b,"leaflet-image-layer"),this._zoomAnimated&&pt(b,"leaflet-zoom-animated"),this.options.className&&pt(b,this.options.className),b.onselectstart=d,b.onmousemove=d,b.onload=a(this.fire,this,"load"),b.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),p){this._url=b.src;return}b.src=this._url,b.alt=this.options.alt},_animateZoom:function(p){var b=this._map.getZoomScale(p.zoom),S=this._map._latLngBoundsToNewLayerBounds(this._bounds,p.zoom,p.center).min;Ef(this._image,S,b)},_reset:function(){var p=this._image,b=new q(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),S=b.getSize();Dn(p,b.min),p.style.width=S.x+"px",p.style.height=S.y+"px"},_updateOpacity:function(){Uo(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var p=this.options.errorOverlayUrl;p&&this._url!==p&&(this._url=p,this._image.src=p)},getCenter:function(){return this._bounds.getCenter()}}),Qwe=function(p,b,S){return new HZ(p,b,S)},$B=HZ.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var p=this._url.tagName==="VIDEO",b=this._image=p?this._url:Xt("video");if(pt(b,"leaflet-image-layer"),this._zoomAnimated&&pt(b,"leaflet-zoom-animated"),this.options.className&&pt(b,this.options.className),b.onselectstart=d,b.onmousemove=d,b.onloadeddata=a(this.fire,this,"load"),p){for(var S=b.getElementsByTagName("source"),W=[],T=0;T<S.length;T++)W.push(S[T].src);this._url=S.length>0?W:[b.src];return}Z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(b.style,"objectFit")&&(b.style.objectFit="fill"),b.autoplay=!!this.options.autoplay,b.loop=!!this.options.loop,b.muted=!!this.options.muted,b.playsInline=!!this.options.playsInline;for(var z=0;z<this._url.length;z++){var A=Xt("source");A.src=this._url[z],b.appendChild(A)}}});function qwe(p,b,S){return new $B(p,b,S)}var QB=HZ.extend({_initImage:function(){var p=this._image=this._url;pt(p,"leaflet-image-layer"),this._zoomAnimated&&pt(p,"leaflet-zoom-animated"),this.options.className&&pt(p,this.options.className),p.onselectstart=d,p.onmousemove=d}});function e5e(p,b,S){return new QB(p,b,S)}var Ks=Fa.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(p,b){p&&(p instanceof Q||Z(p))?(this._latlng=B(p),g(this,b)):(g(this,p),this._source=b),this.options.content&&(this._content=this.options.content)},openOn:function(p){return p=arguments.length?p:this._source._map,p.hasLayer(this)||p.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(p){return this._map?this.close():(arguments.length?this._source=p:p=this._source,this._prepareOpen(),this.openOn(p._map)),this},onAdd:function(p){this._zoomAnimated=p._zoomAnimated,this._container||this._initLayout(),p._fadeAnimated&&Uo(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),p._fadeAnimated&&Uo(this._container,1),this.bringToFront(),this.options.interactive&&(pt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(p){p._fadeAnimated?(Uo(this._container,0),this._removeTimeout=setTimeout(a(In,void 0,this._container),200)):In(this._container),this.options.interactive&&(jn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(p){return this._latlng=B(p),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(p){return this._content=p,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var p={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Kh(this._container),this},bringToBack:function(){return this._map&&Dh(this._container),this},_prepareOpen:function(p){var b=this._source;if(!b._map)return!1;if(b instanceof fu){b=null;var S=this._source._layers;for(var W in S)if(S[W]._map){b=S[W];break}if(!b)return!1;this._source=b}if(!p)if(b.getCenter)p=b.getCenter();else if(b.getLatLng)p=b.getLatLng();else if(b.getBounds)p=b.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(p),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var p=this._contentNode,b=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof b=="string")p.innerHTML=b;else{for(;p.hasChildNodes();)p.removeChild(p.firstChild);p.appendChild(b)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var p=this._map.latLngToLayerPoint(this._latlng),b=J(this.options.offset),S=this._getAnchor();this._zoomAnimated?Dn(this._container,p.add(S)):b=b.add(p).add(S);var W=this._containerBottom=-b.y,T=this._containerLeft=-Math.round(this._containerWidth/2)+b.x;this._container.style.bottom=W+"px",this._container.style.left=T+"px"}},_getAnchor:function(){return[0,0]}});kt.include({_initOverlay:function(p,b,S,W){var T=b;return T instanceof p||(T=new p(W).setContent(b)),S&&T.setLatLng(S),T}}),Fa.include({_initOverlay:function(p,b,S,W){var T=S;return T instanceof p?(g(T,W),T._source=this):(T=b&&!W?b:new p(W,this),T.setContent(S)),T}});var JZ=Ks.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(p){return p=arguments.length?p:this._source._map,!p.hasLayer(this)&&p._popup&&p._popup.options.autoClose&&p.removeLayer(p._popup),p._popup=this,Ks.prototype.openOn.call(this,p)},onAdd:function(p){Ks.prototype.onAdd.call(this,p),p.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ec||this._source.on("preclick",Lf))},onRemove:function(p){Ks.prototype.onRemove.call(this,p),p.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ec||this._source.off("preclick",Lf))},getEvents:function(){var p=Ks.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(p.preclick=this.close),this.options.keepInView&&(p.moveend=this._adjustPan),p},_initLayout:function(){var p="leaflet-popup",b=this._container=Xt("div",p+" "+(this.options.className||"")+" leaflet-zoom-animated"),S=this._wrapper=Xt("div",p+"-content-wrapper",b);if(this._contentNode=Xt("div",p+"-content",S),ty(b),yX(this._contentNode),ut(b,"contextmenu",Lf),this._tipContainer=Xt("div",p+"-tip-container",b),this._tip=Xt("div",p+"-tip",this._tipContainer),this.options.closeButton){var W=this._closeButton=Xt("a",p+"-close-button",b);W.setAttribute("role","button"),W.setAttribute("aria-label","Close popup"),W.href="#close",W.innerHTML='<span aria-hidden="true">&#215;</span>',ut(W,"click",function(T){Yr(T),this.close()},this)}},_updateLayout:function(){var p=this._contentNode,b=p.style;b.width="",b.whiteSpace="nowrap";var S=p.offsetWidth;S=Math.min(S,this.options.maxWidth),S=Math.max(S,this.options.minWidth),b.width=S+1+"px",b.whiteSpace="",b.height="";var W=p.offsetHeight,T=this.options.maxHeight,z="leaflet-popup-scrolled";T&&W>T?(b.height=T+"px",pt(p,z)):jn(p,z),this._containerWidth=this._container.offsetWidth},_animateZoom:function(p){var b=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center),S=this._getAnchor();Dn(this._container,b.add(S))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var p=this._map,b=parseInt($b(this._container,"marginBottom"),10)||0,S=this._container.offsetHeight+b,W=this._containerWidth,T=new M(this._containerLeft,-S-this._containerBottom);T._add(Xf(this._container));var z=p.layerPointToContainerPoint(T),A=J(this.options.autoPanPadding),te=J(this.options.autoPanPaddingTopLeft||A),ie=J(this.options.autoPanPaddingBottomRight||A),he=p.getSize(),Re=0,qe=0;z.x+W+ie.x>he.x&&(Re=z.x+W-he.x+ie.x),z.x-Re-te.x<0&&(Re=z.x-te.x),z.y+S+ie.y>he.y&&(qe=z.y+S-he.y+ie.y),z.y-qe-te.y<0&&(qe=z.y-te.y),(Re||qe)&&(this.options.keepInView&&(this._autopanning=!0),p.fire("autopanstart").panBy([Re,qe]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),t5e=function(p,b){return new JZ(p,b)};kt.mergeOptions({closePopupOnClick:!0}),kt.include({openPopup:function(p,b,S){return this._initOverlay(JZ,p,b,S).openOn(this),this},closePopup:function(p){return p=arguments.length?p:this._popup,p&&p.close(),this}}),Fa.include({bindPopup:function(p,b){return this._popup=this._initOverlay(JZ,this._popup,p,b),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(p){return this._popup&&(this instanceof fu||(this._popup._source=this),this._popup._prepareOpen(p||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(p){return this._popup&&this._popup.setContent(p),this},getPopup:function(){return this._popup},_openPopup:function(p){if(!(!this._popup||!this._map)){Rf(p);var b=p.layer||p.target;if(this._popup._source===b&&!(b instanceof Ec)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(p.latlng);return}this._popup._source=b,this.openPopup(p.latlng)}},_movePopup:function(p){this._popup.setLatLng(p.latlng)},_onKeyPress:function(p){p.originalEvent.keyCode===13&&this._openPopup(p)}});var BZ=Ks.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(p){Ks.prototype.onAdd.call(this,p),this.setOpacity(this.options.opacity),p.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(p){Ks.prototype.onRemove.call(this,p),p.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var p=Ks.prototype.getEvents.call(this);return this.options.permanent||(p.preclick=this.close),p},_initLayout:function(){var p="leaflet-tooltip",b=p+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Xt("div",b),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(p){var b,S,W=this._map,T=this._container,z=W.latLngToContainerPoint(W.getCenter()),A=W.layerPointToContainerPoint(p),te=this.options.direction,ie=T.offsetWidth,he=T.offsetHeight,Re=J(this.options.offset),qe=this._getAnchor();te==="top"?(b=ie/2,S=he):te==="bottom"?(b=ie/2,S=0):te==="center"?(b=ie/2,S=he/2):te==="right"?(b=0,S=he/2):te==="left"?(b=ie,S=he/2):A.x<z.x?(te="right",b=0,S=he/2):(te="left",b=ie+(Re.x+qe.x)*2,S=he/2),p=p.subtract(J(b,S,!0)).add(Re).add(qe),jn(T,"leaflet-tooltip-right"),jn(T,"leaflet-tooltip-left"),jn(T,"leaflet-tooltip-top"),jn(T,"leaflet-tooltip-bottom"),pt(T,"leaflet-tooltip-"+te),Dn(T,p)},_updatePosition:function(){var p=this._map.latLngToLayerPoint(this._latlng);this._setPosition(p)},setOpacity:function(p){this.options.opacity=p,this._container&&Uo(this._container,p)},_animateZoom:function(p){var b=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center);this._setPosition(b)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),n5e=function(p,b){return new BZ(p,b)};kt.include({openTooltip:function(p,b,S){return this._initOverlay(BZ,p,b,S).openOn(this),this},closeTooltip:function(p){return p.close(),this}}),Fa.include({bindTooltip:function(p,b){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(BZ,this._tooltip,p,b),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(p){if(!(!p&&this._tooltipHandlersAdded)){var b=p?"off":"on",S={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?S.add=this._openTooltip:(S.mouseover=this._openTooltip,S.mouseout=this.closeTooltip,S.click=this._openTooltip,this._map?this._addFocusListeners():S.add=this._addFocusListeners),this._tooltip.options.sticky&&(S.mousemove=this._moveTooltip),this[b](S),this._tooltipHandlersAdded=!p}},openTooltip:function(p){return this._tooltip&&(this instanceof fu||(this._tooltip._source=this),this._tooltip._prepareOpen(p)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(p){return this._tooltip&&this._tooltip.setContent(p),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(p){var b=typeof p.getElement=="function"&&p.getElement();b&&(ut(b,"focus",function(){this._tooltip._source=p,this.openTooltip()},this),ut(b,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(p){var b=typeof p.getElement=="function"&&p.getElement();b&&b.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(p){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var b=this;this._map.once("moveend",function(){b._openOnceFlag=!1,b._openTooltip(p)});return}this._tooltip._source=p.layer||p.target,this.openTooltip(this._tooltip.options.sticky?p.latlng:void 0)}},_moveTooltip:function(p){var b=p.latlng,S,W;this._tooltip.options.sticky&&p.originalEvent&&(S=this._map.mouseEventToContainerPoint(p.originalEvent),W=this._map.containerPointToLayerPoint(S),b=this._map.layerPointToLatLng(W)),this._tooltip.setLatLng(b)}});var qB=Uh.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(p){var b=p&&p.tagName==="DIV"?p:document.createElement("div"),S=this.options;if(S.html instanceof Element?(RZ(b),b.appendChild(S.html)):b.innerHTML=S.html!==!1?S.html:"",S.bgPos){var W=J(S.bgPos);b.style.backgroundPosition=-W.x+"px "+-W.y+"px"}return this._setIconStyles(b,"icon"),b},createShadow:function(){return null}});function r5e(p){return new qB(p)}Uh.Default=iy;var oy=Fa.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Pe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(p){g(this,p)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(p){p._addZoomLimit(this)},onRemove:function(p){this._removeAllTiles(),In(this._container),p._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Kh(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Dh(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(p){return this.options.opacity=p,this._updateOpacity(),this},setZIndex:function(p){return this.options.zIndex=p,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var p=this._clampZoom(this._map.getZoom());p!==this._tileZoom&&(this._tileZoom=p,this._updateLevels()),this._update()}return this},getEvents:function(){var p={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),p.move=this._onMove),this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},createTile:function(){return document.createElement("div")},getTileSize:function(){var p=this.options.tileSize;return p instanceof M?p:new M(p,p)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(p){for(var b=this.getPane().children,S=-p(-1/0,1/0),W=0,T=b.length,z;W<T;W++)z=b[W].style.zIndex,b[W]!==this._container&&z&&(S=p(S,+z));isFinite(S)&&(this.options.zIndex=S+p(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Pe.ielt9){Uo(this._container,this.options.opacity);var p=+new Date,b=!1,S=!1;for(var W in this._tiles){var T=this._tiles[W];if(!(!T.current||!T.loaded)){var z=Math.min(1,(p-T.loaded)/200);Uo(T.el,z),z<1?b=!0:(T.active?S=!0:this._onOpaqueTile(T),T.active=!0)}}S&&!this._noPrune&&this._pruneTiles(),b&&(N(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this))}},_onOpaqueTile:d,_initContainer:function(){this._container||(this._container=Xt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var p=this._tileZoom,b=this.options.maxZoom;if(p!==void 0){for(var S in this._levels)S=Number(S),this._levels[S].el.children.length||S===p?(this._levels[S].el.style.zIndex=b-Math.abs(p-S),this._onUpdateLevel(S)):(In(this._levels[S].el),this._removeTilesAtZoom(S),this._onRemoveLevel(S),delete this._levels[S]);var W=this._levels[p],T=this._map;return W||(W=this._levels[p]={},W.el=Xt("div","leaflet-tile-container leaflet-zoom-animated",this._container),W.el.style.zIndex=b,W.origin=T.project(T.unproject(T.getPixelOrigin()),p).round(),W.zoom=p,this._setZoomTransform(W,T.getCenter(),T.getZoom()),d(W.el.offsetWidth),this._onCreateLevel(W)),this._level=W,W}},_onUpdateLevel:d,_onRemoveLevel:d,_onCreateLevel:d,_pruneTiles:function(){if(this._map){var p,b,S=this._map.getZoom();if(S>this.options.maxZoom||S<this.options.minZoom){this._removeAllTiles();return}for(p in this._tiles)b=this._tiles[p],b.retain=b.current;for(p in this._tiles)if(b=this._tiles[p],b.current&&!b.active){var W=b.coords;this._retainParent(W.x,W.y,W.z,W.z-5)||this._retainChildren(W.x,W.y,W.z,W.z+2)}for(p in this._tiles)this._tiles[p].retain||this._removeTile(p)}},_removeTilesAtZoom:function(p){for(var b in this._tiles)this._tiles[b].coords.z===p&&this._removeTile(b)},_removeAllTiles:function(){for(var p in this._tiles)this._removeTile(p)},_invalidateAll:function(){for(var p in this._levels)In(this._levels[p].el),this._onRemoveLevel(Number(p)),delete this._levels[p];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(p,b,S,W){var T=Math.floor(p/2),z=Math.floor(b/2),A=S-1,te=new M(+T,+z);te.z=+A;var ie=this._tileCoordsToKey(te),he=this._tiles[ie];return he&&he.active?(he.retain=!0,!0):(he&&he.loaded&&(he.retain=!0),A>W?this._retainParent(T,z,A,W):!1)},_retainChildren:function(p,b,S,W){for(var T=2*p;T<2*p+2;T++)for(var z=2*b;z<2*b+2;z++){var A=new M(T,z);A.z=S+1;var te=this._tileCoordsToKey(A),ie=this._tiles[te];if(ie&&ie.active){ie.retain=!0;continue}else ie&&ie.loaded&&(ie.retain=!0);S+1<W&&this._retainChildren(T,z,S+1,W)}},_resetView:function(p){var b=p&&(p.pinch||p.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),b,b)},_animateZoom:function(p){this._setView(p.center,p.zoom,!0,p.noUpdate)},_clampZoom:function(p){var b=this.options;return b.minNativeZoom!==void 0&&p<b.minNativeZoom?b.minNativeZoom:b.maxNativeZoom!==void 0&&b.maxNativeZoom<p?b.maxNativeZoom:p},_setView:function(p,b,S,W){var T=Math.round(b);this.options.maxZoom!==void 0&&T>this.options.maxZoom||this.options.minZoom!==void 0&&T<this.options.minZoom?T=void 0:T=this._clampZoom(T);var z=this.options.updateWhenZooming&&T!==this._tileZoom;(!W||z)&&(this._tileZoom=T,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),T!==void 0&&this._update(p),S||this._pruneTiles(),this._noPrune=!!S),this._setZoomTransforms(p,b)},_setZoomTransforms:function(p,b){for(var S in this._levels)this._setZoomTransform(this._levels[S],p,b)},_setZoomTransform:function(p,b,S){var W=this._map.getZoomScale(S,p.zoom),T=p.origin.multiplyBy(W).subtract(this._map._getNewPixelOrigin(b,S)).round();Pe.any3d?Ef(p.el,T,W):Dn(p.el,T)},_resetGrid:function(){var p=this._map,b=p.options.crs,S=this._tileSize=this.getTileSize(),W=this._tileZoom,T=this._map.getPixelWorldBounds(this._tileZoom);T&&(this._globalTileRange=this._pxBoundsToTileRange(T)),this._wrapX=b.wrapLng&&!this.options.noWrap&&[Math.floor(p.project([0,b.wrapLng[0]],W).x/S.x),Math.ceil(p.project([0,b.wrapLng[1]],W).x/S.y)],this._wrapY=b.wrapLat&&!this.options.noWrap&&[Math.floor(p.project([b.wrapLat[0],0],W).y/S.x),Math.ceil(p.project([b.wrapLat[1],0],W).y/S.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(p){var b=this._map,S=b._animatingZoom?Math.max(b._animateToZoom,b.getZoom()):b.getZoom(),W=b.getZoomScale(S,this._tileZoom),T=b.project(p,this._tileZoom).floor(),z=b.getSize().divideBy(W*2);return new q(T.subtract(z),T.add(z))},_update:function(p){var b=this._map;if(b){var S=this._clampZoom(b.getZoom());if(p===void 0&&(p=b.getCenter()),this._tileZoom!==void 0){var W=this._getTiledPixelBounds(p),T=this._pxBoundsToTileRange(W),z=T.getCenter(),A=[],te=this.options.keepBuffer,ie=new q(T.getBottomLeft().subtract([te,-te]),T.getTopRight().add([te,-te]));if(!(isFinite(T.min.x)&&isFinite(T.min.y)&&isFinite(T.max.x)&&isFinite(T.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var he in this._tiles){var Re=this._tiles[he].coords;(Re.z!==this._tileZoom||!ie.contains(new M(Re.x,Re.y)))&&(this._tiles[he].current=!1)}if(Math.abs(S-this._tileZoom)>1){this._setView(p,S);return}for(var qe=T.min.y;qe<=T.max.y;qe++)for(var mt=T.min.x;mt<=T.max.x;mt++){var bi=new M(mt,qe);if(bi.z=this._tileZoom,!!this._isValidTile(bi)){var hr=this._tiles[this._tileCoordsToKey(bi)];hr?hr.current=!0:A.push(bi)}}if(A.sort(function(Oi,em){return Oi.distanceTo(z)-em.distanceTo(z)}),A.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Qo=document.createDocumentFragment();for(mt=0;mt<A.length;mt++)this._addTile(A[mt],Qo);this._level.el.appendChild(Qo)}}}},_isValidTile:function(p){var b=this._map.options.crs;if(!b.infinite){var S=this._globalTileRange;if(!b.wrapLng&&(p.x<S.min.x||p.x>S.max.x)||!b.wrapLat&&(p.y<S.min.y||p.y>S.max.y))return!1}if(!this.options.bounds)return!0;var W=this._tileCoordsToBounds(p);return $(this.options.bounds).overlaps(W)},_keyToBounds:function(p){return this._tileCoordsToBounds(this._keyToTileCoords(p))},_tileCoordsToNwSe:function(p){var b=this._map,S=this.getTileSize(),W=p.scaleBy(S),T=W.add(S),z=b.unproject(W,p.z),A=b.unproject(T,p.z);return[z,A]},_tileCoordsToBounds:function(p){var b=this._tileCoordsToNwSe(p),S=new D(b[0],b[1]);return this.options.noWrap||(S=this._map.wrapLatLngBounds(S)),S},_tileCoordsToKey:function(p){return p.x+":"+p.y+":"+p.z},_keyToTileCoords:function(p){var b=p.split(":"),S=new M(+b[0],+b[1]);return S.z=+b[2],S},_removeTile:function(p){var b=this._tiles[p];b&&(In(b.el),delete this._tiles[p],this.fire("tileunload",{tile:b.el,coords:this._keyToTileCoords(p)}))},_initTile:function(p){pt(p,"leaflet-tile");var b=this.getTileSize();p.style.width=b.x+"px",p.style.height=b.y+"px",p.onselectstart=d,p.onmousemove=d,Pe.ielt9&&this.options.opacity<1&&Uo(p,this.options.opacity)},_addTile:function(p,b){var S=this._getTilePos(p),W=this._tileCoordsToKey(p),T=this.createTile(this._wrapCoords(p),a(this._tileReady,this,p));this._initTile(T),this.createTile.length<2&&C(a(this._tileReady,this,p,null,T)),Dn(T,S),this._tiles[W]={el:T,coords:p,current:!0},b.appendChild(T),this.fire("tileloadstart",{tile:T,coords:p})},_tileReady:function(p,b,S){b&&this.fire("tileerror",{error:b,tile:S,coords:p});var W=this._tileCoordsToKey(p);S=this._tiles[W],S&&(S.loaded=+new Date,this._map._fadeAnimated?(Uo(S.el,0),N(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this)):(S.active=!0,this._pruneTiles()),b||(pt(S.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:S.el,coords:p})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Pe.ielt9||!this._map._fadeAnimated?C(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(p){return p.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(p){var b=new M(this._wrapX?c(p.x,this._wrapX):p.x,this._wrapY?c(p.y,this._wrapY):p.y);return b.z=p.z,b},_pxBoundsToTileRange:function(p){var b=this.getTileSize();return new q(p.min.unscaleBy(b).floor(),p.max.unscaleBy(b).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var p in this._tiles)if(!this._tiles[p].loaded)return!1;return!0}});function i5e(p){return new oy(p)}var qh=oy.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(p,b){this._url=p,b=g(this,b),b.detectRetina&&Pe.retina&&b.maxZoom>0?(b.tileSize=Math.floor(b.tileSize/2),b.zoomReverse?(b.zoomOffset--,b.minZoom=Math.min(b.maxZoom,b.minZoom+1)):(b.zoomOffset++,b.maxZoom=Math.max(b.minZoom,b.maxZoom-1)),b.minZoom=Math.max(0,b.minZoom)):b.zoomReverse?b.minZoom=Math.min(b.maxZoom,b.minZoom):b.maxZoom=Math.max(b.minZoom,b.maxZoom),typeof b.subdomains=="string"&&(b.subdomains=b.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(p,b){return this._url===p&&b===void 0&&(b=!0),this._url=p,b||this.redraw(),this},createTile:function(p,b){var S=document.createElement("img");return ut(S,"load",a(this._tileOnLoad,this,b,S)),ut(S,"error",a(this._tileOnError,this,b,S)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(S.referrerPolicy=this.options.referrerPolicy),S.alt="",S.src=this.getTileUrl(p),S},getTileUrl:function(p){var b={r:Pe.retina?"@2x":"",s:this._getSubdomain(p),x:p.x,y:p.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var S=this._globalTileRange.max.y-p.y;this.options.tms&&(b.y=S),b["-y"]=S}return w(this._url,i(b,this.options))},_tileOnLoad:function(p,b){Pe.ielt9?setTimeout(a(p,this,null,b),0):p(null,b)},_tileOnError:function(p,b,S){var W=this.options.errorTileUrl;W&&b.getAttribute("src")!==W&&(b.src=W),p(S,b)},_onTileRemove:function(p){p.tile.onload=null},_getZoomForUrl:function(){var p=this._tileZoom,b=this.options.maxZoom,S=this.options.zoomReverse,W=this.options.zoomOffset;return S&&(p=b-p),p+W},_getSubdomain:function(p){var b=Math.abs(p.x+p.y)%this.options.subdomains.length;return this.options.subdomains[b]},_abortLoading:function(){var p,b;for(p in this._tiles)if(this._tiles[p].coords.z!==this._tileZoom&&(b=this._tiles[p].el,b.onload=d,b.onerror=d,!b.complete)){b.src=_;var S=this._tiles[p].coords;In(b),delete this._tiles[p],this.fire("tileabort",{tile:b,coords:S})}},_removeTile:function(p){var b=this._tiles[p];if(b)return b.el.setAttribute("src",_),oy.prototype._removeTile.call(this,p)},_tileReady:function(p,b,S){if(!(!this._map||S&&S.getAttribute("src")===_))return oy.prototype._tileReady.call(this,p,b,S)}});function eK(p,b){return new qh(p,b)}var tK=qh.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(p,b){this._url=p;var S=i({},this.defaultWmsParams);for(var W in b)W in this.options||(S[W]=b[W]);b=g(this,b);var T=b.detectRetina&&Pe.retina?2:1,z=this.getTileSize();S.width=z.x*T,S.height=z.y*T,this.wmsParams=S},onAdd:function(p){this._crs=this.options.crs||p.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,qh.prototype.onAdd.call(this,p)},getTileUrl:function(p){var b=this._tileCoordsToNwSe(p),S=this._crs,W=K(S.project(b[0]),S.project(b[1])),T=W.min,z=W.max,A=(this._wmsVersion>=1.3&&this._crs===KB?[T.y,T.x,z.y,z.x]:[T.x,T.y,z.x,z.y]).join(","),te=qh.prototype.getTileUrl.call(this,p);return te+y(this.wmsParams,te,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+A},setParams:function(p,b){return i(this.wmsParams,p),b||this.redraw(),this}});function o5e(p,b){return new tK(p,b)}qh.WMS=tK,eK.wms=o5e;var mu=Fa.extend({options:{padding:.1},initialize:function(p){g(this,p),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),pt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var p={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(p.zoomanim=this._onAnimZoom),p},_onAnimZoom:function(p){this._updateTransform(p.center,p.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(p,b){var S=this._map.getZoomScale(b,this._zoom),W=this._map.getSize().multiplyBy(.5+this.options.padding),T=this._map.project(this._center,b),z=W.multiplyBy(-S).add(T).subtract(this._map._getNewPixelOrigin(p,b));Pe.any3d?Ef(this._container,z,S):Dn(this._container,z)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var p in this._layers)this._layers[p]._reset()},_onZoomEnd:function(){for(var p in this._layers)this._layers[p]._project()},_updatePaths:function(){for(var p in this._layers)this._layers[p]._update()},_update:function(){var p=this.options.padding,b=this._map.getSize(),S=this._map.containerPointToLayerPoint(b.multiplyBy(-p)).round();this._bounds=new q(S,S.add(b.multiplyBy(1+p*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),nK=mu.extend({options:{tolerance:0},getEvents:function(){var p=mu.prototype.getEvents.call(this);return p.viewprereset=this._onViewPreReset,p},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){mu.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var p=this._container=document.createElement("canvas");ut(p,"mousemove",this._onMouseMove,this),ut(p,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ut(p,"mouseout",this._handleMouseOut,this),p._leaflet_disable_events=!0,this._ctx=p.getContext("2d")},_destroyContainer:function(){N(this._redrawRequest),delete this._ctx,In(this._container),nn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var p;this._redrawBounds=null;for(var b in this._layers)p=this._layers[b],p._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mu.prototype._update.call(this);var p=this._bounds,b=this._container,S=p.getSize(),W=Pe.retina?2:1;Dn(b,p.min),b.width=W*S.x,b.height=W*S.y,b.style.width=S.x+"px",b.style.height=S.y+"px",Pe.retina&&this._ctx.scale(2,2),this._ctx.translate(-p.min.x,-p.min.y),this.fire("update")}},_reset:function(){mu.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(p){this._updateDashArray(p),this._layers[l(p)]=p;var b=p._order={layer:p,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=b),this._drawLast=b,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(p){this._requestRedraw(p)},_removePath:function(p){var b=p._order,S=b.next,W=b.prev;S?S.prev=W:this._drawLast=W,W?W.next=S:this._drawFirst=S,delete p._order,delete this._layers[l(p)],this._requestRedraw(p)},_updatePath:function(p){this._extendRedrawBounds(p),p._project(),p._update(),this._requestRedraw(p)},_updateStyle:function(p){this._updateDashArray(p),this._requestRedraw(p)},_updateDashArray:function(p){if(typeof p.options.dashArray=="string"){var b=p.options.dashArray.split(/[, ]+/),S=[],W,T;for(T=0;T<b.length;T++){if(W=Number(b[T]),isNaN(W))return;S.push(W)}p.options._dashArray=S}else p.options._dashArray=p.options.dashArray},_requestRedraw:function(p){this._map&&(this._extendRedrawBounds(p),this._redrawRequest=this._redrawRequest||C(this._redraw,this))},_extendRedrawBounds:function(p){if(p._pxBounds){var b=(p.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new q,this._redrawBounds.extend(p._pxBounds.min.subtract([b,b])),this._redrawBounds.extend(p._pxBounds.max.add([b,b]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var p=this._redrawBounds;if(p){var b=p.getSize();this._ctx.clearRect(p.min.x,p.min.y,b.x,b.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var p,b=this._redrawBounds;if(this._ctx.save(),b){var S=b.getSize();this._ctx.beginPath(),this._ctx.rect(b.min.x,b.min.y,S.x,S.y),this._ctx.clip()}this._drawing=!0;for(var W=this._drawFirst;W;W=W.next)p=W.layer,(!b||p._pxBounds&&p._pxBounds.intersects(b))&&p._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(p,b){if(this._drawing){var S,W,T,z,A=p._parts,te=A.length,ie=this._ctx;if(te){for(ie.beginPath(),S=0;S<te;S++){for(W=0,T=A[S].length;W<T;W++)z=A[S][W],ie[W?"lineTo":"moveTo"](z.x,z.y);b&&ie.closePath()}this._fillStroke(ie,p)}}},_updateCircle:function(p){if(!(!this._drawing||p._empty())){var b=p._point,S=this._ctx,W=Math.max(Math.round(p._radius),1),T=(Math.max(Math.round(p._radiusY),1)||W)/W;T!==1&&(S.save(),S.scale(1,T)),S.beginPath(),S.arc(b.x,b.y/T,W,0,Math.PI*2,!1),T!==1&&S.restore(),this._fillStroke(S,p)}},_fillStroke:function(p,b){var S=b.options;S.fill&&(p.globalAlpha=S.fillOpacity,p.fillStyle=S.fillColor||S.color,p.fill(S.fillRule||"evenodd")),S.stroke&&S.weight!==0&&(p.setLineDash&&p.setLineDash(b.options&&b.options._dashArray||[]),p.globalAlpha=S.opacity,p.lineWidth=S.weight,p.strokeStyle=S.color,p.lineCap=S.lineCap,p.lineJoin=S.lineJoin,p.stroke())},_onClick:function(p){for(var b=this._map.mouseEventToLayerPoint(p),S,W,T=this._drawFirst;T;T=T.next)S=T.layer,S.options.interactive&&S._containsPoint(b)&&(!(p.type==="click"||p.type==="preclick")||!this._map._draggableMoved(S))&&(W=S);this._fireEvent(W?[W]:!1,p)},_onMouseMove:function(p){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var b=this._map.mouseEventToLayerPoint(p);this._handleMouseHover(p,b)}},_handleMouseOut:function(p){var b=this._hoveredLayer;b&&(jn(this._container,"leaflet-interactive"),this._fireEvent([b],p,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(p,b){if(!this._mouseHoverThrottled){for(var S,W,T=this._drawFirst;T;T=T.next)S=T.layer,S.options.interactive&&S._containsPoint(b)&&(W=S);W!==this._hoveredLayer&&(this._handleMouseOut(p),W&&(pt(this._container,"leaflet-interactive"),this._fireEvent([W],p,"mouseover"),this._hoveredLayer=W)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,p),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(p,b,S){this._map._fireDOMEvent(b,S||b.type,p)},_bringToFront:function(p){var b=p._order;if(b){var S=b.next,W=b.prev;if(S)S.prev=W;else return;W?W.next=S:S&&(this._drawFirst=S),b.prev=this._drawLast,this._drawLast.next=b,b.next=null,this._drawLast=b,this._requestRedraw(p)}},_bringToBack:function(p){var b=p._order;if(b){var S=b.next,W=b.prev;if(W)W.next=S;else return;S?S.prev=W:W&&(this._drawLast=W),b.prev=null,b.next=this._drawFirst,this._drawFirst.prev=b,this._drawFirst=b,this._requestRedraw(p)}}});function rK(p){return Pe.canvas?new nK(p):null}var ay=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(p){return document.createElement("<lvml:"+p+' class="lvml">')}}catch(p){}return function(p){return document.createElement("<"+p+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),a5e={_initContainer:function(){this._container=Xt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(mu.prototype._update.call(this),this.fire("update"))},_initPath:function(p){var b=p._container=ay("shape");pt(b,"leaflet-vml-shape "+(this.options.className||"")),b.coordsize="1 1",p._path=ay("path"),b.appendChild(p._path),this._updateStyle(p),this._layers[l(p)]=p},_addPath:function(p){var b=p._container;this._container.appendChild(b),p.options.interactive&&p.addInteractiveTarget(b)},_removePath:function(p){var b=p._container;In(b),p.removeInteractiveTarget(b),delete this._layers[l(p)]},_updateStyle:function(p){var b=p._stroke,S=p._fill,W=p.options,T=p._container;T.stroked=!!W.stroke,T.filled=!!W.fill,W.stroke?(b||(b=p._stroke=ay("stroke")),T.appendChild(b),b.weight=W.weight+"px",b.color=W.color,b.opacity=W.opacity,W.dashArray?b.dashStyle=Z(W.dashArray)?W.dashArray.join(" "):W.dashArray.replace(/( *, *)/g," "):b.dashStyle="",b.endcap=W.lineCap.replace("butt","flat"),b.joinstyle=W.lineJoin):b&&(T.removeChild(b),p._stroke=null),W.fill?(S||(S=p._fill=ay("fill")),T.appendChild(S),S.color=W.fillColor||W.color,S.opacity=W.fillOpacity):S&&(T.removeChild(S),p._fill=null)},_updateCircle:function(p){var b=p._point.round(),S=Math.round(p._radius),W=Math.round(p._radiusY||S);this._setPath(p,p._empty()?"M0 0":"AL "+b.x+","+b.y+" "+S+","+W+" 0,"+65535*360)},_setPath:function(p,b){p._path.v=b},_bringToFront:function(p){Kh(p._container)},_bringToBack:function(p){Dh(p._container)}},KZ=Pe.vml?ay:xe,sy=mu.extend({_initContainer:function(){this._container=KZ("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=KZ("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){In(this._container),nn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mu.prototype._update.call(this);var p=this._bounds,b=p.getSize(),S=this._container;(!this._svgSize||!this._svgSize.equals(b))&&(this._svgSize=b,S.setAttribute("width",b.x),S.setAttribute("height",b.y)),Dn(S,p.min),S.setAttribute("viewBox",[p.min.x,p.min.y,b.x,b.y].join(" ")),this.fire("update")}},_initPath:function(p){var b=p._path=KZ("path");p.options.className&&pt(b,p.options.className),p.options.interactive&&pt(b,"leaflet-interactive"),this._updateStyle(p),this._layers[l(p)]=p},_addPath:function(p){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(p._path),p.addInteractiveTarget(p._path)},_removePath:function(p){In(p._path),p.removeInteractiveTarget(p._path),delete this._layers[l(p)]},_updatePath:function(p){p._project(),p._update()},_updateStyle:function(p){var b=p._path,S=p.options;b&&(S.stroke?(b.setAttribute("stroke",S.color),b.setAttribute("stroke-opacity",S.opacity),b.setAttribute("stroke-width",S.weight),b.setAttribute("stroke-linecap",S.lineCap),b.setAttribute("stroke-linejoin",S.lineJoin),S.dashArray?b.setAttribute("stroke-dasharray",S.dashArray):b.removeAttribute("stroke-dasharray"),S.dashOffset?b.setAttribute("stroke-dashoffset",S.dashOffset):b.removeAttribute("stroke-dashoffset")):b.setAttribute("stroke","none"),S.fill?(b.setAttribute("fill",S.fillColor||S.color),b.setAttribute("fill-opacity",S.fillOpacity),b.setAttribute("fill-rule",S.fillRule||"evenodd")):b.setAttribute("fill","none"))},_updatePoly:function(p,b){this._setPath(p,me(p._parts,b))},_updateCircle:function(p){var b=p._point,S=Math.max(Math.round(p._radius),1),W=Math.max(Math.round(p._radiusY),1)||S,T="a"+S+","+W+" 0 1,0 ",z=p._empty()?"M0 0":"M"+(b.x-S)+","+b.y+T+S*2+",0 "+T+-S*2+",0 ";this._setPath(p,z)},_setPath:function(p,b){p._path.setAttribute("d",b)},_bringToFront:function(p){Kh(p._path)},_bringToBack:function(p){Dh(p._path)}});Pe.vml&&sy.include(a5e);function iK(p){return Pe.svg||Pe.vml?new sy(p):null}kt.include({getRenderer:function(p){var b=p.options.renderer||this._getPaneRenderer(p.options.pane)||this.options.renderer||this._renderer;return b||(b=this._renderer=this._createRenderer()),this.hasLayer(b)||this.addLayer(b),b},_getPaneRenderer:function(p){if(p==="overlayPane"||p===void 0)return!1;var b=this._paneRenderers[p];return b===void 0&&(b=this._createRenderer({pane:p}),this._paneRenderers[p]=b),b},_createRenderer:function(p){return this.options.preferCanvas&&rK(p)||iK(p)}});var oK=$h.extend({initialize:function(p,b){$h.prototype.initialize.call(this,this._boundsToLatLngs(p),b)},setBounds:function(p){return this.setLatLngs(this._boundsToLatLngs(p))},_boundsToLatLngs:function(p){return p=$(p),[p.getSouthWest(),p.getNorthWest(),p.getNorthEast(),p.getSouthEast()]}});function s5e(p,b){return new oK(p,b)}sy.create=KZ,sy.pointsToPath=me,hu.geometryToLayer=OZ,hu.coordsToLatLng=IX,hu.coordsToLatLngs=zZ,hu.latLngToCoords=WX,hu.latLngsToCoords=PZ,hu.getFeature=Qh,hu.asFeature=jZ,kt.mergeOptions({boxZoom:!0});var aK=Bs.extend({initialize:function(p){this._map=p,this._container=p._container,this._pane=p._panes.overlayPane,this._resetStateTimeout=0,p.on("unload",this._destroy,this)},addHooks:function(){ut(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){nn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){In(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(p){if(!p.shiftKey||p.which!==1&&p.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Qb(),cX(),this._startPoint=this._map.mouseEventToContainerPoint(p),ut(document,{contextmenu:Rf,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(p){this._moved||(this._moved=!0,this._box=Xt("div","leaflet-zoom-box",this._container),pt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(p);var b=new q(this._point,this._startPoint),S=b.getSize();Dn(this._box,b.min),this._box.style.width=S.x+"px",this._box.style.height=S.y+"px"},_finish:function(){this._moved&&(In(this._box),jn(this._container,"leaflet-crosshair")),qb(),dX(),nn(document,{contextmenu:Rf,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(p){if(!(p.which!==1&&p.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var b=new D(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(b).fire("boxzoomend",{boxZoomBounds:b})}},_onKeyDown:function(p){p.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});kt.addInitHook("addHandler","boxZoom",aK),kt.mergeOptions({doubleClickZoom:!0});var sK=Bs.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(p){var b=this._map,S=b.getZoom(),W=b.options.zoomDelta,T=p.originalEvent.shiftKey?S-W:S+W;b.options.doubleClickZoom==="center"?b.setZoom(T):b.setZoomAround(p.containerPoint,T)}});kt.addInitHook("addHandler","doubleClickZoom",sK),kt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var lK=Bs.extend({addHooks:function(){if(!this._draggable){var p=this._map;this._draggable=new Wc(p._mapPane,p._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),p.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),p.on("zoomend",this._onZoomEnd,this),p.whenReady(this._onZoomEnd,this))}pt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){jn(this._map._container,"leaflet-grab"),jn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var p=this._map;if(p._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var b=$(this._map.options.maxBounds);this._offsetLimit=K(this._map.latLngToContainerPoint(b.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(b.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;p.fire("movestart").fire("dragstart"),p.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(p){if(this._map.options.inertia){var b=this._lastTime=+new Date,S=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(S),this._times.push(b),this._prunePositions(b)}this._map.fire("move",p).fire("drag",p)},_prunePositions:function(p){for(;this._positions.length>1&&p-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var p=this._map.getSize().divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(p).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(p,b){return p-(p-b)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var p=this._draggable._newPos.subtract(this._draggable._startPos),b=this._offsetLimit;p.x<b.min.x&&(p.x=this._viscousLimit(p.x,b.min.x)),p.y<b.min.y&&(p.y=this._viscousLimit(p.y,b.min.y)),p.x>b.max.x&&(p.x=this._viscousLimit(p.x,b.max.x)),p.y>b.max.y&&(p.y=this._viscousLimit(p.y,b.max.y)),this._draggable._newPos=this._draggable._startPos.add(p)}},_onPreDragWrap:function(){var p=this._worldWidth,b=Math.round(p/2),S=this._initialWorldOffset,W=this._draggable._newPos.x,T=(W-b+S)%p+b-S,z=(W+b+S)%p-b-S,A=Math.abs(T+S)<Math.abs(z+S)?T:z;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=A},_onDragEnd:function(p){var b=this._map,S=b.options,W=!S.inertia||p.noInertia||this._times.length<2;if(b.fire("dragend",p),W)b.fire("moveend");else{this._prunePositions(+new Date);var T=this._lastPos.subtract(this._positions[0]),z=(this._lastTime-this._times[0])/1e3,A=S.easeLinearity,te=T.multiplyBy(A/z),ie=te.distanceTo([0,0]),he=Math.min(S.inertiaMaxSpeed,ie),Re=te.multiplyBy(he/ie),qe=he/(S.inertiaDeceleration*A),mt=Re.multiplyBy(-qe/2).round();!mt.x&&!mt.y?b.fire("moveend"):(mt=b._limitOffset(mt,b.options.maxBounds),C(function(){b.panBy(mt,{duration:qe,easeLinearity:A,noMoveStart:!0,animate:!0})}))}}});kt.addInitHook("addHandler","dragging",lK),kt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var uK=Bs.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(p){this._map=p,this._setPanDelta(p.options.keyboardPanDelta),this._setZoomDelta(p.options.zoomDelta)},addHooks:function(){var p=this._map._container;p.tabIndex<=0&&(p.tabIndex="0"),ut(p,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),nn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var p=document.body,b=document.documentElement,S=p.scrollTop||b.scrollTop,W=p.scrollLeft||b.scrollLeft;this._map._container.focus(),window.scrollTo(W,S)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(p){var b=this._panKeys={},S=this.keyCodes,W,T;for(W=0,T=S.left.length;W<T;W++)b[S.left[W]]=[-1*p,0];for(W=0,T=S.right.length;W<T;W++)b[S.right[W]]=[p,0];for(W=0,T=S.down.length;W<T;W++)b[S.down[W]]=[0,p];for(W=0,T=S.up.length;W<T;W++)b[S.up[W]]=[0,-1*p]},_setZoomDelta:function(p){var b=this._zoomKeys={},S=this.keyCodes,W,T;for(W=0,T=S.zoomIn.length;W<T;W++)b[S.zoomIn[W]]=p;for(W=0,T=S.zoomOut.length;W<T;W++)b[S.zoomOut[W]]=-p},_addHooks:function(){ut(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){nn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(p){if(!(p.altKey||p.ctrlKey||p.metaKey)){var b=p.keyCode,S=this._map,W;if(b in this._panKeys){if(!S._panAnim||!S._panAnim._inProgress)if(W=this._panKeys[b],p.shiftKey&&(W=J(W).multiplyBy(3)),S.options.maxBounds&&(W=S._limitOffset(J(W),S.options.maxBounds)),S.options.worldCopyJump){var T=S.wrapLatLng(S.unproject(S.project(S.getCenter()).add(W)));S.panTo(T)}else S.panBy(W)}else if(b in this._zoomKeys)S.setZoom(S.getZoom()+(p.shiftKey?3:1)*this._zoomKeys[b]);else if(b===27&&S._popup&&S._popup.options.closeOnEscapeKey)S.closePopup();else return;Rf(p)}}});kt.addInitHook("addHandler","keyboard",uK),kt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var cK=Bs.extend({addHooks:function(){ut(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){nn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(p){var b=VB(p),S=this._map.options.wheelDebounceTime;this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(p),this._startTime||(this._startTime=+new Date);var W=Math.max(S-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),W),Rf(p)},_performZoom:function(){var p=this._map,b=p.getZoom(),S=this._map.options.zoomSnap||0;p._stop();var W=this._delta/(this._map.options.wheelPxPerZoomLevel*4),T=4*Math.log(2/(1+Math.exp(-Math.abs(W))))/Math.LN2,z=S?Math.ceil(T/S)*S:T,A=p._limitZoom(b+(this._delta>0?z:-z))-b;this._delta=0,this._startTime=null,A&&(p.options.scrollWheelZoom==="center"?p.setZoom(b+A):p.setZoomAround(this._lastMousePos,b+A))}});kt.addInitHook("addHandler","scrollWheelZoom",cK);var l5e=600;kt.mergeOptions({tapHold:Pe.touchNative&&Pe.safari&&Pe.mobile,tapTolerance:15});var dK=Bs.extend({addHooks:function(){ut(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){nn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(p){if(clearTimeout(this._holdTimeout),p.touches.length===1){var b=p.touches[0];this._startPos=this._newPos=new M(b.clientX,b.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(ut(document,"touchend",Yr),ut(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",b))},this),l5e),ut(document,"touchend touchcancel contextmenu",this._cancel,this),ut(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function p(){nn(document,"touchend",Yr),nn(document,"touchend touchcancel",p)},_cancel:function(){clearTimeout(this._holdTimeout),nn(document,"touchend touchcancel contextmenu",this._cancel,this),nn(document,"touchmove",this._onMove,this)},_onMove:function(p){var b=p.touches[0];this._newPos=new M(b.clientX,b.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(p,b){var S=new MouseEvent(p,{bubbles:!0,cancelable:!0,view:window,screenX:b.screenX,screenY:b.screenY,clientX:b.clientX,clientY:b.clientY});S._simulated=!0,b.target.dispatchEvent(S)}});kt.addInitHook("addHandler","tapHold",dK),kt.mergeOptions({touchZoom:Pe.touch,bounceAtZoomLimits:!0});var fK=Bs.extend({addHooks:function(){pt(this._map._container,"leaflet-touch-zoom"),ut(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){jn(this._map._container,"leaflet-touch-zoom"),nn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(p){var b=this._map;if(!(!p.touches||p.touches.length!==2||b._animatingZoom||this._zooming)){var S=b.mouseEventToContainerPoint(p.touches[0]),W=b.mouseEventToContainerPoint(p.touches[1]);this._centerPoint=b.getSize()._divideBy(2),this._startLatLng=b.containerPointToLatLng(this._centerPoint),b.options.touchZoom!=="center"&&(this._pinchStartLatLng=b.containerPointToLatLng(S.add(W)._divideBy(2))),this._startDist=S.distanceTo(W),this._startZoom=b.getZoom(),this._moved=!1,this._zooming=!0,b._stop(),ut(document,"touchmove",this._onTouchMove,this),ut(document,"touchend touchcancel",this._onTouchEnd,this),Yr(p)}},_onTouchMove:function(p){if(!(!p.touches||p.touches.length!==2||!this._zooming)){var b=this._map,S=b.mouseEventToContainerPoint(p.touches[0]),W=b.mouseEventToContainerPoint(p.touches[1]),T=S.distanceTo(W)/this._startDist;if(this._zoom=b.getScaleZoom(T,this._startZoom),!b.options.bounceAtZoomLimits&&(this._zoom<b.getMinZoom()&&T<1||this._zoom>b.getMaxZoom()&&T>1)&&(this._zoom=b._limitZoom(this._zoom)),b.options.touchZoom==="center"){if(this._center=this._startLatLng,T===1)return}else{var z=S._add(W)._divideBy(2)._subtract(this._centerPoint);if(T===1&&z.x===0&&z.y===0)return;this._center=b.unproject(b.project(this._pinchStartLatLng,this._zoom).subtract(z),this._zoom)}this._moved||(b._moveStart(!0,!1),this._moved=!0),N(this._animRequest);var A=a(b._move,b,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=C(A,this,!0),Yr(p)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,N(this._animRequest),nn(document,"touchmove",this._onTouchMove,this),nn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});kt.addInitHook("addHandler","touchZoom",fK),kt.BoxZoom=aK,kt.DoubleClickZoom=sK,kt.Drag=lK,kt.Keyboard=uK,kt.ScrollWheelZoom=cK,kt.TapHold=dK,kt.TouchZoom=fK,n.Bounds=q,n.Browser=Pe,n.CRS=pe,n.Canvas=nK,n.Circle=GX,n.CircleMarker=MZ,n.Class=F,n.Control=Na,n.DivIcon=qB,n.DivOverlay=Ks,n.DomEvent=Gwe,n.DomUtil=kwe,n.Draggable=Wc,n.Evented=H,n.FeatureGroup=fu,n.GeoJSON=hu,n.GridLayer=oy,n.Handler=Bs,n.Icon=Uh,n.ImageOverlay=HZ,n.LatLng=Q,n.LatLngBounds=D,n.Layer=Fa,n.LayerGroup=Ah,n.LineUtil=Mwe,n.Map=kt,n.Marker=FZ,n.Mixin=Cwe,n.Path=Ec,n.Point=M,n.PolyUtil=Vwe,n.Polygon=$h,n.Polyline=pu,n.Popup=JZ,n.PosAnimation=YB,n.Projection=Owe,n.Rectangle=oK,n.Renderer=mu,n.SVG=sy,n.SVGOverlay=QB,n.TileLayer=qh,n.Tooltip=BZ,n.Transformation=ue,n.Util=V,n.VideoOverlay=$B,n.bind=a,n.bounds=K,n.canvas=rK,n.circle=Dwe,n.circleMarker=Kwe,n.control=ny,n.divIcon=r5e,n.extend=i,n.featureGroup=Hwe,n.geoJSON=UB,n.geoJson=$we,n.gridLayer=i5e,n.icon=Jwe,n.imageOverlay=Qwe,n.latLng=B,n.latLngBounds=$,n.layerGroup=jwe,n.map=Iwe,n.marker=Bwe,n.point=J,n.polygon=Uwe,n.polyline=Awe,n.popup=t5e,n.rectangle=s5e,n.setOptions=g,n.stamp=l,n.svg=iK,n.svgOverlay=e5e,n.tileLayer=eK,n.tooltip=n5e,n.transformation=U,n.version=r,n.videoOverlay=qwe;var u5e=window.L;n.noConflict=function(){return window.L=u5e,this},window.L=n})})(bOe,Ls);function wh(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function x5(e,t){return t==null?function(n,r){const i=G.useRef();return i.current||(i.current=e(n,r)),i}:function(n,r){const i=G.useRef();i.current||(i.current=e(n,r));const o=G.useRef(n),{instance:a}=i.current;return G.useEffect(function(){o.current!==n&&(t(a,n,o.current),o.current=n)},[a,n,r]),i}}function Zle(e,t){G.useEffect(function(){var n;return((n=t.layerContainer)!=null?n:t.map).addLayer(e.instance),function(){var r;(r=t.layerContainer)==null||r.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function Sle(e){return function(t){const n=v5(),r=e(C3(t,n),n);return ble(n.map,t.attribution),KO(r.current,t.eventHandlers),Zle(r.current,n),r}}function yOe(e,t){const n=G.useRef();G.useEffect(function(){var r;if(t.pathOptions!==n.current){const i=(r=t.pathOptions)!=null?r:{};e.instance.setStyle(i),n.current=i}},[e,t])}function vOe(e){return function(t){const n=v5(),r=e(C3(t,n),n);return KO(r.current,t.eventHandlers),Zle(r.current,n),yOe(r.current,t),r}}function xOe(e){function t(i,o){return wh(e(i),o)}const n=x5(t),r=mOe(n);return wle(r)}function wOe(e,t){const n=x5(e,t),r=Sle(n);return xle(r)}function ZOe(e,t){const n=x5(e),r=gOe(n,t);return hOe(r)}function DO(e,t){const n=x5(e,t),r=vOe(n);return xle(r)}function SOe(e,t){const n=x5(e,t),r=Sle(n);return wle(r)}function kOe(e,t,n){const{opacity:r,zIndex:i}=t;r!=null&&r!==n.opacity&&e.setOpacity(r),i!=null&&i!==n.zIndex&&e.setZIndex(i)}function _Oe(){return v5().map}const AO=xOe(function(e){return new Ls.Control.Attribution(e)}),kle=DO(function({center:e,children:t,...n},r){const i=new Ls.CircleMarker(e,n);return wh(i,R3(r,{overlayContainer:i}))},dOe),GOe=DO(function({data:e,...t},n){const r=new Ls.GeoJSON(e,t);return wh(r,R3(n,{overlayContainer:r}))},function(e,t,n){t.style!==n.style&&(t.style==null?e.resetStyle():e.setStyle(t.style))});function fY(){return fY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fY.apply(this,arguments)}function IOe({bounds:e,boundsOptions:t,center:n,children:r,className:i,id:o,placeholder:a,style:s,whenReady:l,zoom:u,...c},d){const[f]=G.useState({className:i,id:o,style:s}),[h,m]=G.useState(null);G.useImperativeHandle(d,()=>{var v;return(v=h==null?void 0:h.map)!=null?v:null},[h]);const g=G.useCallback(v=>{if(v!==null&&h===null){const w=new Ls.Map(v,c);n!=null&&u!=null?w.setView(n,u):e!=null&&w.fitBounds(e,t),l!=null&&w.whenReady(l),m(pOe(w))}},[]);G.useEffect(()=>()=>{h==null||h.map.remove()},[h]);const y=h?x.createElement(vle,{value:h},r):a!=null?a:null;return x.createElement("div",fY({},f,{ref:g}),y)}const UO=G.forwardRef(IOe),WOe=wOe(function({position:e,...t},n){const r=new Ls.Marker(e,t);return wh(r,R3(n,{overlayContainer:r}))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==n.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==n.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),EOe=DO(function({positions:e,...t},n){const r=new Ls.Polygon(e,t);return wh(r,R3(n,{overlayContainer:r}))},function(e,t,n){t.positions!==n.positions&&e.setLatLngs(t.positions)}),$O=SOe(function({url:e,...t},n){const r=new Ls.TileLayer(e,C3(t,n));return wh(r,n)},function(e,t,n){kOe(e,t,n);const{url:r}=t;r!=null&&r!==n.url&&e.setUrl(r)}),pY=ZOe(function(e,t){const n=new Ls.Tooltip(e,t.overlayContainer);return wh(n,t)},function(e,t,{position:n},r){G.useEffect(function(){const i=t.overlayContainer;if(i==null)return;const{instance:o}=e,a=l=>{l.tooltip===o&&(n!=null&&o.setLatLng(n),o.update(),r(!0))},s=l=>{l.tooltip===o&&r(!1)};return i.on({tooltipopen:a,tooltipclose:s}),i.bindTooltip(o),function(){i.off({tooltipopen:a,tooltipclose:s}),i._map!=null&&i.unbindTooltip()}},[e,t,r,n])});function ju(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function XOe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function w5(e){let t,n,r;e.length!==2?(t=ju,n=(s,l)=>ju(e(s),l),r=(s,l)=>e(s)-l):(t=e===ju||e===XOe?e:LOe,n=e,r=e);function i(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(s[d],l)<0?u=d+1:c=d}while(u<c)}return u}function o(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(s[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function a(s,l,u=0,c=s.length){const d=i(s,l,u,c-1);return d>u&&r(s[d-1],l)>-r(s[d],l)?d-1:d}return{left:i,center:a,right:o}}function LOe(){return 0}function _le(e){return e===null?NaN:+e}function*ROe(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const Gle=w5(ju),wG=Gle.right,COe=Gle.left;w5(_le).center;const Z5=wG;function VOe(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i))}if(n>1)return o/(n-1)}function YOe(e,t){const n=VOe(e,t);return n&&Math.sqrt(n)}class Ri{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],a=t+o,s=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);s&&(n[r++]=s),t=a}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}class m6 extends Map{constructor(t,n=Ele){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(hY(this,t))}has(t){return super.has(hY(this,t))}set(t,n){return super.set(Ile(this,t),n)}delete(t){return super.delete(Wle(this,t))}}class ZG extends Set{constructor(t,n=Ele){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(hY(this,t))}add(t){return super.add(Ile(this,t))}delete(t){return super.delete(Wle(this,t))}}function hY({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Ile({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Wle({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Ele(e){return e!==null&&typeof e=="object"?e.valueOf():e}function TOe(e,t){return Array.from(t,n=>e[n])}function NOe(e=ju){if(e===ju)return Xle;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Xle(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const FOe=Math.sqrt(50),MOe=Math.sqrt(10),OOe=Math.sqrt(2);function SG(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=FOe?10:o>=MOe?5:o>=OOe?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=n&&n<2?SG(e,t,n*2):[s,l,u]}function mY(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,a]=r?SG(t,e,n):SG(e,t,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(i+u)/-a;else for(let u=0;u<s;++u)l[u]=(i+u)*a;return l}function gY(e,t,n){return t=+t,e=+e,n=+n,SG(e,t,n)[2]}function Td(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?gY(t,e,n):gY(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function _p(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function bY(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Lle(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Xle:NOe(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*d/l+f)),m=Math.min(r,Math.floor(t+(l-u)*d/l+f));Lle(e,t,h,m,i)}const o=e[t];let a=n,s=r;for(Sy(e,n,t),i(e[r],o)>0&&Sy(e,n,r);a<s;){for(Sy(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}i(e[n],o)===0?Sy(e,n,s):(++s,Sy(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Sy(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function yY(e,t,n){if(e=Float64Array.from(ROe(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return bY(e);if(t>=1)return _p(e);var r,i=(r-1)*t,o=Math.floor(i),a=_p(Lle(e,o).subarray(0,o+1)),s=bY(e.subarray(o+1));return a+(s-a)*(i-o)}}function Rle(e,t,n=_le){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),s=+n(e[o+1],o+1,e);return a+(s-a)*(i-o)}}function zOe(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function Cle(e,t){return yY(e,.5,t)}function*POe(e){for(const t of e)yield*t}function Vle(e){return Array.from(POe(e))}function Eo(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function Yle(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Ul(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function df(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const vY=Symbol("implicit");function V3(){var e=new m6,t=[],n=[],r=vY;function i(o){let a=e.get(o);if(a===void 0){if(r!==vY)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new m6;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return V3(t,n).unknown(r)},Ul.apply(i,arguments),i}function lb(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function S5(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ff(){}var Kp=.7,lg=1/Kp,k0="\\s*([+-]?\\d+)\\s*",iw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Il="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jOe=/^#([0-9a-f]{3,8})$/,HOe=new RegExp(`^rgb\\(${k0},${k0},${k0}\\)$`),JOe=new RegExp(`^rgb\\(${Il},${Il},${Il}\\)$`),BOe=new RegExp(`^rgba\\(${k0},${k0},${k0},${iw}\\)$`),KOe=new RegExp(`^rgba\\(${Il},${Il},${Il},${iw}\\)$`),DOe=new RegExp(`^hsl\\(${iw},${Il},${Il}\\)$`),AOe=new RegExp(`^hsla\\(${iw},${Il},${Il},${iw}\\)$`),g6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lb(ff,ow,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:b6,formatHex:b6,formatHex8:UOe,formatHsl:$Oe,formatRgb:y6,toString:y6});function b6(){return this.rgb().formatHex()}function UOe(){return this.rgb().formatHex8()}function $Oe(){return Tle(this).formatHsl()}function y6(){return this.rgb().formatRgb()}function ow(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=jOe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?v6(t):n===3?new wr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?FS(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?FS(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=HOe.exec(e))?new wr(t[1],t[2],t[3],1):(t=JOe.exec(e))?new wr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=BOe.exec(e))?FS(t[1],t[2],t[3],t[4]):(t=KOe.exec(e))?FS(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=DOe.exec(e))?Z6(t[1],t[2]/100,t[3]/100,1):(t=AOe.exec(e))?Z6(t[1],t[2]/100,t[3]/100,t[4]):g6.hasOwnProperty(e)?v6(g6[e]):e==="transparent"?new wr(NaN,NaN,NaN,0):null}function v6(e){return new wr(e>>16&255,e>>8&255,e&255,1)}function FS(e,t,n,r){return r<=0&&(e=t=n=NaN),new wr(e,t,n,r)}function QO(e){return e instanceof ff||(e=ow(e)),e?(e=e.rgb(),new wr(e.r,e.g,e.b,e.opacity)):new wr}function Nd(e,t,n,r){return arguments.length===1?QO(e):new wr(e,t,n,r!=null?r:1)}function wr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}lb(wr,Nd,S5(ff,{brighter(e){return e=e==null?lg:Math.pow(lg,e),new wr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Kp:Math.pow(Kp,e),new wr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new wr(Gp(this.r),Gp(this.g),Gp(this.b),kG(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:x6,formatHex:x6,formatHex8:QOe,formatRgb:w6,toString:w6}));function x6(){return`#${hp(this.r)}${hp(this.g)}${hp(this.b)}`}function QOe(){return`#${hp(this.r)}${hp(this.g)}${hp(this.b)}${hp((isNaN(this.opacity)?1:this.opacity)*255)}`}function w6(){const e=kG(this.opacity);return`${e===1?"rgb(":"rgba("}${Gp(this.r)}, ${Gp(this.g)}, ${Gp(this.b)}${e===1?")":`, ${e})`}`}function kG(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hp(e){return e=Gp(e),(e<16?"0":"")+e.toString(16)}function Z6(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ts(e,t,n,r)}function Tle(e){if(e instanceof ts)return new ts(e.h,e.s,e.l,e.opacity);if(e instanceof ff||(e=ow(e)),!e)return new ts;if(e instanceof ts)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new ts(a,s,l,e.opacity)}function _G(e,t,n,r){return arguments.length===1?Tle(e):new ts(e,t,n,r!=null?r:1)}function ts(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}lb(ts,_G,S5(ff,{brighter(e){return e=e==null?lg:Math.pow(lg,e),new ts(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Kp:Math.pow(Kp,e),new ts(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new wr(PL(e>=240?e-240:e+120,i,r),PL(e,i,r),PL(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ts(S6(this.h),MS(this.s),MS(this.l),kG(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=kG(this.opacity);return`${e===1?"hsl(":"hsla("}${S6(this.h)}, ${MS(this.s)*100}%, ${MS(this.l)*100}%${e===1?")":`, ${e})`}`}}));function S6(e){return e=(e||0)%360,e<0?e+360:e}function MS(e){return Math.max(0,Math.min(1,e||0))}function PL(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Nle=Math.PI/180,Fle=180/Math.PI,GG=18,Mle=.96422,Ole=1,zle=.82521,Ple=4/29,_0=6/29,jle=3*_0*_0,qOe=_0*_0*_0;function Hle(e){if(e instanceof Wl)return new Wl(e.l,e.a,e.b,e.opacity);if(e instanceof Yu)return Jle(e);e instanceof wr||(e=QO(e));var t=BL(e.r),n=BL(e.g),r=BL(e.b),i=jL((.2225045*t+.7168786*n+.0606169*r)/Ole),o,a;return t===n&&n===r?o=a=i:(o=jL((.4360747*t+.3850649*n+.1430804*r)/Mle),a=jL((.0139322*t+.0971045*n+.7141733*r)/zle)),new Wl(116*i-16,500*(o-i),200*(i-a),e.opacity)}function IG(e,t,n,r){return arguments.length===1?Hle(e):new Wl(e,t,n,r!=null?r:1)}function Wl(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}lb(Wl,IG,S5(ff,{brighter(e){return new Wl(this.l+GG*(e!=null?e:1),this.a,this.b,this.opacity)},darker(e){return new Wl(this.l-GG*(e!=null?e:1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Mle*HL(t),e=Ole*HL(e),n=zle*HL(n),new wr(JL(3.1338561*t-1.6168667*e-.4906146*n),JL(-.9787684*t+1.9161415*e+.033454*n),JL(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function jL(e){return e>qOe?Math.pow(e,1/3):e/jle+Ple}function HL(e){return e>_0?e*e*e:jle*(e-Ple)}function JL(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function BL(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function eze(e){if(e instanceof Yu)return new Yu(e.h,e.c,e.l,e.opacity);if(e instanceof Wl||(e=Hle(e)),e.a===0&&e.b===0)return new Yu(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Fle;return new Yu(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function WG(e,t,n,r){return arguments.length===1?eze(e):new Yu(e,t,n,r!=null?r:1)}function Yu(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Jle(e){if(isNaN(e.h))return new Wl(e.l,0,0,e.opacity);var t=e.h*Nle;return new Wl(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}lb(Yu,WG,S5(ff,{brighter(e){return new Yu(this.h,this.c,this.l+GG*(e!=null?e:1),this.opacity)},darker(e){return new Yu(this.h,this.c,this.l-GG*(e!=null?e:1),this.opacity)},rgb(){return Jle(this).rgb()}}));var Ble=-.14861,qO=1.78277,ez=-.29227,Y3=-.90649,aw=1.97294,k6=aw*Y3,_6=aw*qO,G6=qO*ez-Y3*Ble;function tze(e){if(e instanceof Ip)return new Ip(e.h,e.s,e.l,e.opacity);e instanceof wr||(e=QO(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(G6*r+k6*t-_6*n)/(G6+k6-_6),o=r-i,a=(aw*(n-i)-ez*o)/Y3,s=Math.sqrt(a*a+o*o)/(aw*i*(1-i)),l=s?Math.atan2(a,o)*Fle-120:NaN;return new Ip(l<0?l+360:l,s,i,e.opacity)}function xY(e,t,n,r){return arguments.length===1?tze(e):new Ip(e,t,n,r!=null?r:1)}function Ip(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}lb(Ip,xY,S5(ff,{brighter(e){return e=e==null?lg:Math.pow(lg,e),new Ip(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Kp:Math.pow(Kp,e),new Ip(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Nle,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new wr(255*(t+n*(Ble*r+qO*i)),255*(t+n*(ez*r+Y3*i)),255*(t+n*(aw*r)),this.opacity)}}));function Kle(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function Dle(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return Kle((n-r/t)*t,a,i,o,s)}}function Ale(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return Kle((n-r/t)*t,i,o,a,s)}}const T3=e=>()=>e;function Ule(e,t){return function(n){return e+n*t}}function nze(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function N3(e,t){var n=t-e;return n?Ule(e,n>180||n<-180?n-360*Math.round(n/360):n):T3(isNaN(e)?t:e)}function rze(e){return(e=+e)==1?Zr:function(t,n){return n-t?nze(t,n,e):T3(isNaN(t)?n:t)}}function Zr(e,t){var n=t-e;return n?Ule(e,n):T3(isNaN(e)?t:e)}const wY=function e(t){var n=rze(t);function r(i,o){var a=n((i=Nd(i)).r,(o=Nd(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),u=Zr(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function $le(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=Nd(t[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=e(r),i=e(i),o=e(o),s.opacity=1,function(l){return s.r=r(l),s.g=i(l),s.b=o(l),s+""}}}var ize=$le(Dle),oze=$le(Ale);function tz(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function Qle(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function aze(e,t){return(Qle(t)?tz:qle)(e,t)}function qle(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=pf(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function eue(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Qa(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function tue(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=pf(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var ZY=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,KL=new RegExp(ZY.source,"g");function sze(e){return function(){return e}}function lze(e){return function(t){return e(t)+""}}function nue(e,t){var n=ZY.lastIndex=KL.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(e=e+"",t=t+"";(r=ZY.exec(e))&&(i=KL.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:Qa(r,i)})),n=KL.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?lze(l[0].x):sze(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}function pf(e,t){var n=typeof t,r;return t==null||n==="boolean"?T3(t):(n==="number"?Qa:n==="string"?(r=ow(t))?(t=r,wY):nue:t instanceof ow?wY:t instanceof Date?eue:Qle(t)?tz:Array.isArray(t)?qle:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?tue:Qa)(e,t)}function uze(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function cze(e,t){var n=N3(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function k5(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var I6=180/Math.PI,rue={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function iue(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*I6,skewX:Math.atan(l)*I6,scaleX:a,scaleY:s}}var OS;function dze(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?rue:iue(t.a,t.b,t.c,t.d,t.e,t.f)}function fze(e){return e==null||(OS||(OS=document.createElementNS("http://www.w3.org/2000/svg","g")),OS.setAttribute("transform",e),!(e=OS.transform.baseVal.consolidate()))?rue:(e=e.matrix,iue(e.a,e.b,e.c,e.d,e.e,e.f))}function oue(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,d,f,h,m){if(u!==d||c!==f){var g=h.push("translate(",null,t,null,n);m.push({i:g-4,x:Qa(u,d)},{i:g-2,x:Qa(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function a(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Qa(u,c)})):c&&d.push(i(d)+"rotate("+c+r)}function s(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Qa(u,c)}):c&&d.push(i(d)+"skewX("+c+r)}function l(u,c,d,f,h,m){if(u!==d||c!==f){var g=h.push(i(h)+"scale(",null,",",null,")");m.push({i:g-4,x:Qa(u,d)},{i:g-2,x:Qa(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,d,f),a(u.rotate,c.rotate,d,f),s(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var m=-1,g=f.length,y;++m<g;)d[(y=f[m]).i]=y.x(h);return d.join("")}}}var pze=oue(dze,"px, ","px)","deg)"),hze=oue(fze,", ",")",")"),mze=1e-12;function W6(e){return((e=Math.exp(e))+1/e)/2}function gze(e){return((e=Math.exp(e))-1/e)/2}function bze(e){return((e=Math.exp(2*e))-1)/(e+1)}const yze=function e(t,n,r){function i(o,a){var s=o[0],l=o[1],u=o[2],c=a[0],d=a[1],f=a[2],h=c-s,m=d-l,g=h*h+m*m,y,v;if(g<mze)v=Math.log(f/u)/t,y=function(I){return[s+I*h,l+I*m,u*Math.exp(t*I*v)]};else{var w=Math.sqrt(g),Z=(f*f-u*u+r*g)/(2*u*n*w),k=(f*f-u*u-r*g)/(2*f*n*w),_=Math.log(Math.sqrt(Z*Z+1)-Z),R=Math.log(Math.sqrt(k*k+1)-k);v=(R-_)/t,y=function(I){var E=I*v,X=W6(_),Y=u/(n*w)*(X*bze(t*E+_)-gze(_));return[s+Y*h,l+Y*m,u*X/W6(t*E+_)]}}return y.duration=v*1e3*t/Math.SQRT2,y}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,l=s*s;return e(a,s,l)},i}(Math.SQRT2,2,4);function aue(e){return function(t,n){var r=e((t=_G(t)).h,(n=_G(n)).h),i=Zr(t.s,n.s),o=Zr(t.l,n.l),a=Zr(t.opacity,n.opacity);return function(s){return t.h=r(s),t.s=i(s),t.l=o(s),t.opacity=a(s),t+""}}}const vze=aue(N3);var xze=aue(Zr);function wze(e,t){var n=Zr((e=IG(e)).l,(t=IG(t)).l),r=Zr(e.a,t.a),i=Zr(e.b,t.b),o=Zr(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=o(a),e+""}}function sue(e){return function(t,n){var r=e((t=WG(t)).h,(n=WG(n)).h),i=Zr(t.c,n.c),o=Zr(t.l,n.l),a=Zr(t.opacity,n.opacity);return function(s){return t.h=r(s),t.c=i(s),t.l=o(s),t.opacity=a(s),t+""}}}const Zze=sue(N3);var Sze=sue(Zr);function lue(e){return function t(n){n=+n;function r(i,o){var a=e((i=xY(i)).h,(o=xY(o)).h),s=Zr(i.s,o.s),l=Zr(i.l,o.l),u=Zr(i.opacity,o.opacity);return function(c){return i.h=a(c),i.s=s(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=t,r}(1)}const kze=lue(N3);var _ze=lue(Zr);function nz(e,t){t===void 0&&(t=e,e=pf);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function Gze(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Ize=Object.freeze(Object.defineProperty({__proto__:null,interpolate:pf,interpolateArray:aze,interpolateBasis:Dle,interpolateBasisClosed:Ale,interpolateCubehelix:kze,interpolateCubehelixLong:_ze,interpolateDate:eue,interpolateDiscrete:uze,interpolateHcl:Zze,interpolateHclLong:Sze,interpolateHsl:vze,interpolateHslLong:xze,interpolateHue:cze,interpolateLab:wze,interpolateNumber:Qa,interpolateNumberArray:tz,interpolateObject:tue,interpolateRgb:wY,interpolateRgbBasis:ize,interpolateRgbBasisClosed:oze,interpolateRound:k5,interpolateString:nue,interpolateTransformCss:pze,interpolateTransformSvg:hze,interpolateZoom:yze,piecewise:nz,quantize:Gze},Symbol.toStringTag,{value:"Module"}));function Wze(e){return function(){return e}}function SY(e){return+e}var E6=[0,1];function qi(e){return e}function kY(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Wze(isNaN(t)?NaN:.5)}function Eze(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Xze(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=kY(i,r),o=n(a,o)):(r=kY(r,i),o=n(o,a)),function(s){return o(r(s))}}function Lze(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=kY(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var l=Z5(e,s,1,r)-1;return o[l](i[l](s))}}function _5(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function F3(){var e=E6,t=E6,n=pf,r,i,o,a=qi,s,l,u;function c(){var f=Math.min(e.length,t.length);return a!==qi&&(a=Eze(e[0],e[f-1])),s=f>2?Lze:Xze,l=u=null,d}function d(f){return f==null||isNaN(f=+f)?o:(l||(l=s(e.map(r),t,n)))(r(a(f)))}return d.invert=function(f){return a(i((u||(u=s(t,e.map(r),Qa)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,SY),c()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=k5,c()},d.clamp=function(f){return arguments.length?(a=f?!0:qi,c()):a!==qi},d.interpolate=function(f){return arguments.length?(n=f,c()):n},d.unknown=function(f){return arguments.length?(o=f,d):o},function(f,h){return r=f,i=h,c()}}function uue(){return F3()(qi,qi)}function Rze(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function EG(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ug(e){return e=EG(Math.abs(e)),e?e[1]:NaN}function Cze(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function Vze(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Yze=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Dp(e){if(!(t=Yze.exec(e)))throw new Error("invalid format: "+e);var t;return new rz({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Dp.prototype=rz.prototype;function rz(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}rz.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Tze(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var cue;function Nze(e,t){var n=EG(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(cue=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+EG(e,Math.max(0,t+o-1))[0]}function X6(e,t){var n=EG(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const L6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Rze,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>X6(e*100,t),r:X6,s:Nze,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function R6(e){return e}var C6=Array.prototype.map,V6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function due(e){var t=e.grouping===void 0||e.thousands===void 0?R6:Cze(C6.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?R6:Vze(C6.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d){d=Dp(d);var f=d.fill,h=d.align,m=d.sign,g=d.symbol,y=d.zero,v=d.width,w=d.comma,Z=d.precision,k=d.trim,_=d.type;_==="n"?(w=!0,_="g"):L6[_]||(Z===void 0&&(Z=12),k=!0,_="g"),(y||f==="0"&&h==="=")&&(y=!0,f="0",h="=");var R=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",I=g==="$"?r:/[%p]/.test(_)?a:"",E=L6[_],X=/[defgprs%]/.test(_);Z=Z===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,Z)):Math.max(0,Math.min(20,Z));function Y(C){var N=R,V=I,F,O,P;if(_==="c")V=E(C)+V,C="";else{C=+C;var H=C<0||1/C<0;if(C=isNaN(C)?l:E(Math.abs(C),Z),k&&(C=Tze(C)),H&&+C==0&&m!=="+"&&(H=!1),N=(H?m==="("?m:s:m==="-"||m==="("?"":m)+N,V=(_==="s"?V6[8+cue/3]:"")+V+(H&&m==="("?")":""),X){for(F=-1,O=C.length;++F<O;)if(P=C.charCodeAt(F),48>P||P>57){V=(P===46?i+C.slice(F+1):C.slice(F))+V,C=C.slice(0,F);break}}}w&&!y&&(C=t(C,1/0));var M=N.length+C.length+V.length,j=M<v?new Array(v-M+1).join(f):"";switch(w&&y&&(C=t(j+C,j.length?v-V.length:1/0),j=""),h){case"<":C=N+C+V+j;break;case"=":C=N+j+C+V;break;case"^":C=j.slice(0,M=j.length>>1)+N+C+V+j.slice(M);break;default:C=j+N+C+V;break}return o(C)}return Y.toString=function(){return d+""},Y}function c(d,f){var h=u((d=Dp(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(ug(f)/3)))*3,g=Math.pow(10,-m),y=V6[8+m/3];return function(v){return h(g*v)+y}}return{format:u,formatPrefix:c}}var zS,G5,iz;Fze({thousands:",",grouping:[3],currency:["$",""]});function Fze(e){return zS=due(e),G5=zS.format,iz=zS.formatPrefix,zS}function fue(e){return Math.max(0,-ug(Math.abs(e)))}function pue(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ug(t)/3)))*3-ug(Math.abs(e)))}function hue(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ug(t)-ug(e))+1}function mue(e,t,n,r){var i=Td(e,t,n),o;switch(r=Dp(r!=null?r:",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=pue(i,a))&&(r.precision=o),iz(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=hue(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=fue(i))&&(r.precision=o-(r.type==="%")*2);break}}return G5(r)}function Zh(e){var t=e.domain;return e.ticks=function(n){var r=t();return mY(r[0],r[r.length-1],n!=null?n:10)},e.tickFormat=function(n,r){var i=t();return mue(i[0],i[i.length-1],n!=null?n:10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],s=r[o],l,u,c=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);c-- >0;){if(u=gY(a,s,n),u===l)return r[i]=a,r[o]=s,t(r);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function oz(){var e=uue();return e.copy=function(){return _5(e,oz())},Ul.apply(e,arguments),Zh(e)}function gue(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,SY),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return gue(e).unknown(t)},e=arguments.length?Array.from(e,SY):[0,1],Zh(n)}function bue(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function Y6(e){return Math.log(e)}function T6(e){return Math.exp(e)}function Mze(e){return-Math.log(-e)}function Oze(e){return-Math.exp(-e)}function zze(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Pze(e){return e===10?zze:e===Math.E?Math.exp:t=>Math.pow(e,t)}function jze(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function N6(e){return(t,n)=>-e(-t,n)}function az(e){const t=e(Y6,T6),n=t.domain;let r=10,i,o;function a(){return i=jze(r),o=Pze(r),n()[0]<0?(i=N6(i),o=N6(o),e(Mze,Oze)):e(Y6,T6),t}return t.base=function(s){return arguments.length?(r=+s,a()):r},t.domain=function(s){return arguments.length?(n(s),a()):n()},t.ticks=s=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let f=i(u),h=i(c),m,g;const y=s==null?10:+s;let v=[];if(!(r%1)&&h-f<y){if(f=Math.floor(f),h=Math.ceil(h),u>0){for(;f<=h;++f)for(m=1;m<r;++m)if(g=f<0?m/o(-f):m*o(f),!(g<u)){if(g>c)break;v.push(g)}}else for(;f<=h;++f)for(m=r-1;m>=1;--m)if(g=f>0?m/o(-f):m*o(f),!(g<u)){if(g>c)break;v.push(g)}v.length*2<y&&(v=mY(u,c,y))}else v=mY(f,h,Math.min(h-f,y)).map(o);return d?v.reverse():v},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Dp(l)).precision==null&&(l.trim=!0),l=G5(l)),s===1/0)return l;const u=Math.max(1,r*s/t.ticks().length);return c=>{let d=c/o(Math.round(i(c)));return d*r<r-.5&&(d*=r),d<=u?l(c):""}},t.nice=()=>n(bue(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),t}function yue(){const e=az(F3()).domain([1,10]);return e.copy=()=>_5(e,yue()).base(e.base()),Ul.apply(e,arguments),e}function F6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function M6(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function sz(e){var t=1,n=e(F6(t),M6(t));return n.constant=function(r){return arguments.length?e(F6(t=+r),M6(t)):t},Zh(n)}function vue(){var e=sz(F3());return e.copy=function(){return _5(e,vue()).constant(e.constant())},Ul.apply(e,arguments)}function O6(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Hze(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Jze(e){return e<0?-e*e:e*e}function lz(e){var t=e(qi,qi),n=1;function r(){return n===1?e(qi,qi):n===.5?e(Hze,Jze):e(O6(n),O6(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Zh(t)}function uz(){var e=lz(F3());return e.copy=function(){return _5(e,uz()).exponent(e.exponent())},Ul.apply(e,arguments),e}function Bze(){return uz.apply(null,arguments).exponent(.5)}function xue(){var e=[],t=[],n=[],r;function i(){var a=0,s=Math.max(1,t.length);for(n=new Array(s-1);++a<s;)n[a-1]=Rle(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:t[Z5(n,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(ju),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return xue().domain(e).range(t).unknown(r)},Ul.apply(o,arguments)}function wue(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function a(l){return l!=null&&l<=l?i[Z5(r,l,0,n)]:o}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return a}return a.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},a.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},a.unknown=function(l){return arguments.length&&(o=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return wue().domain([e,t]).range(i).unknown(o)},Ul.apply(Zh(a),arguments)}function Zue(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[Z5(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Zue().domain(e).range(t).unknown(n)},Ul.apply(i,arguments)}const DL=new Date,AL=new Date;function fr(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const l=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;let u;do l.push(u=new Date(+o)),t(o,s),e(o);while(u<o&&o<a);return l},i.filter=o=>fr(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););}),n&&(i.count=(o,a)=>(DL.setTime(+o),AL.setTime(+a),e(DL),e(AL),Math.floor(n(DL,AL))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const cg=fr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);cg.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?fr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):cg);cg.range;const Tu=1e3,fa=Tu*60,Nu=fa*60,rc=Nu*24,cz=rc*7,z6=rc*30,UL=rc*365,Fu=fr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Tu)},(e,t)=>(t-e)/Tu,e=>e.getUTCSeconds());Fu.range;const M3=fr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Tu)},(e,t)=>{e.setTime(+e+t*fa)},(e,t)=>(t-e)/fa,e=>e.getMinutes());M3.range;const O3=fr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*fa)},(e,t)=>(t-e)/fa,e=>e.getUTCMinutes());O3.range;const z3=fr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Tu-e.getMinutes()*fa)},(e,t)=>{e.setTime(+e+t*Nu)},(e,t)=>(t-e)/Nu,e=>e.getHours());z3.range;const P3=fr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Nu)},(e,t)=>(t-e)/Nu,e=>e.getUTCHours());P3.range;const Hu=fr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*fa)/rc,e=>e.getDate()-1);Hu.range;const Zd=fr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/rc,e=>e.getUTCDate()-1);Zd.range;const Sue=fr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/rc,e=>Math.floor(e/rc));Sue.range;function Sh(e){return fr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*fa)/cz)}const ub=Sh(0),XG=Sh(1),Kze=Sh(2),Dze=Sh(3),dg=Sh(4),Aze=Sh(5),Uze=Sh(6);ub.range;XG.range;Kze.range;Dze.range;dg.range;Aze.range;Uze.range;function kh(e){return fr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/cz)}const cb=kh(0),LG=kh(1),$ze=kh(2),Qze=kh(3),fg=kh(4),qze=kh(5),ePe=kh(6);cb.range;LG.range;$ze.range;Qze.range;fg.range;qze.range;ePe.range;const sw=fr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());sw.range;const lw=fr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());lw.range;const Ml=fr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ml.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ml.range;const Ol=fr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ol.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ol.range;function kue(e,t,n,r,i,o){const a=[[Fu,1,Tu],[Fu,5,5*Tu],[Fu,15,15*Tu],[Fu,30,30*Tu],[o,1,fa],[o,5,5*fa],[o,15,15*fa],[o,30,30*fa],[i,1,Nu],[i,3,3*Nu],[i,6,6*Nu],[i,12,12*Nu],[r,1,rc],[r,2,2*rc],[n,1,cz],[t,1,z6],[t,3,3*z6],[e,1,UL]];function s(u,c,d){const f=c<u;f&&([u,c]=[c,u]);const h=d&&typeof d.range=="function"?d:l(u,c,d),m=h?h.range(u,+c+1):[];return f?m.reverse():m}function l(u,c,d){const f=Math.abs(c-u)/d,h=w5(([,,y])=>y).right(a,f);if(h===a.length)return e.every(Td(u/UL,c/UL,d));if(h===0)return cg.every(Math.max(Td(u,c,d),1));const[m,g]=a[f/a[h-1][2]<a[h][2]/f?h-1:h];return m.every(g)}return[s,l]}const[tPe,nPe]=kue(Ol,lw,cb,Sue,P3,O3),[rPe,iPe]=kue(Ml,sw,ub,Hu,z3,M3);function $L(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function QL(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ky(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function _ue(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,u=_y(i),c=Gy(i),d=_y(o),f=Gy(o),h=_y(a),m=Gy(a),g=_y(s),y=Gy(s),v=_y(l),w=Gy(l),Z={a:H,A:M,b:j,B:J,c:null,d:K6,e:K6,f:IPe,g:NPe,G:MPe,H:kPe,I:_Pe,j:GPe,L:Gue,m:WPe,M:EPe,p:q,q:K,Q:U6,s:$6,S:XPe,u:LPe,U:RPe,V:CPe,w:VPe,W:YPe,x:null,X:null,y:TPe,Y:FPe,Z:OPe,"%":A6},k={a:D,A:$,b:Q,B,c:null,d:D6,e:D6,f:HPe,g:eje,G:nje,H:zPe,I:PPe,j:jPe,L:Wue,m:JPe,M:BPe,p:pe,q:re,Q:U6,s:$6,S:KPe,u:DPe,U:APe,V:UPe,w:$Pe,W:QPe,x:null,X:null,y:qPe,Y:tje,Z:rje,"%":A6},_={a:Y,A:C,b:N,B:V,c:F,d:J6,e:J6,f:xPe,g:H6,G:j6,H:B6,I:B6,j:gPe,L:vPe,m:mPe,M:bPe,p:X,q:hPe,Q:ZPe,s:SPe,S:yPe,u:uPe,U:cPe,V:dPe,w:lPe,W:fPe,x:O,X:P,y:H6,Y:j6,Z:pPe,"%":wPe};Z.x=R(n,Z),Z.X=R(r,Z),Z.c=R(t,Z),k.x=R(n,k),k.X=R(r,k),k.c=R(t,k);function R(ee,oe){return function(ue){var U=[],de=-1,be=0,xe=ee.length,me,Ce,Xe;for(ue instanceof Date||(ue=new Date(+ue));++de<xe;)ee.charCodeAt(de)===37&&(U.push(ee.slice(be,de)),(Ce=P6[me=ee.charAt(++de)])!=null?me=ee.charAt(++de):Ce=me==="e"?" ":"0",(Xe=oe[me])&&(me=Xe(ue,Ce)),U.push(me),be=de+1);return U.push(ee.slice(be,de)),U.join("")}}function I(ee,oe){return function(ue){var U=ky(1900,void 0,1),de=E(U,ee,ue+="",0),be,xe;if(de!=ue.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(oe&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(be=QL(ky(U.y,0,1)),xe=be.getUTCDay(),be=xe>4||xe===0?LG.ceil(be):LG(be),be=Zd.offset(be,(U.V-1)*7),U.y=be.getUTCFullYear(),U.m=be.getUTCMonth(),U.d=be.getUTCDate()+(U.w+6)%7):(be=$L(ky(U.y,0,1)),xe=be.getDay(),be=xe>4||xe===0?XG.ceil(be):XG(be),be=Hu.offset(be,(U.V-1)*7),U.y=be.getFullYear(),U.m=be.getMonth(),U.d=be.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),xe="Z"in U?QL(ky(U.y,0,1)).getUTCDay():$L(ky(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(xe+5)%7:U.w+U.U*7-(xe+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,QL(U)):$L(U)}}function E(ee,oe,ue,U){for(var de=0,be=oe.length,xe=ue.length,me,Ce;de<be;){if(U>=xe)return-1;if(me=oe.charCodeAt(de++),me===37){if(me=oe.charAt(de++),Ce=_[me in P6?oe.charAt(de++):me],!Ce||(U=Ce(ee,ue,U))<0)return-1}else if(me!=ue.charCodeAt(U++))return-1}return U}function X(ee,oe,ue){var U=u.exec(oe.slice(ue));return U?(ee.p=c.get(U[0].toLowerCase()),ue+U[0].length):-1}function Y(ee,oe,ue){var U=h.exec(oe.slice(ue));return U?(ee.w=m.get(U[0].toLowerCase()),ue+U[0].length):-1}function C(ee,oe,ue){var U=d.exec(oe.slice(ue));return U?(ee.w=f.get(U[0].toLowerCase()),ue+U[0].length):-1}function N(ee,oe,ue){var U=v.exec(oe.slice(ue));return U?(ee.m=w.get(U[0].toLowerCase()),ue+U[0].length):-1}function V(ee,oe,ue){var U=g.exec(oe.slice(ue));return U?(ee.m=y.get(U[0].toLowerCase()),ue+U[0].length):-1}function F(ee,oe,ue){return E(ee,t,oe,ue)}function O(ee,oe,ue){return E(ee,n,oe,ue)}function P(ee,oe,ue){return E(ee,r,oe,ue)}function H(ee){return a[ee.getDay()]}function M(ee){return o[ee.getDay()]}function j(ee){return l[ee.getMonth()]}function J(ee){return s[ee.getMonth()]}function q(ee){return i[+(ee.getHours()>=12)]}function K(ee){return 1+~~(ee.getMonth()/3)}function D(ee){return a[ee.getUTCDay()]}function $(ee){return o[ee.getUTCDay()]}function Q(ee){return l[ee.getUTCMonth()]}function B(ee){return s[ee.getUTCMonth()]}function pe(ee){return i[+(ee.getUTCHours()>=12)]}function re(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var oe=R(ee+="",Z);return oe.toString=function(){return ee},oe},parse:function(ee){var oe=I(ee+="",!1);return oe.toString=function(){return ee},oe},utcFormat:function(ee){var oe=R(ee+="",k);return oe.toString=function(){return ee},oe},utcParse:function(ee){var oe=I(ee+="",!0);return oe.toString=function(){return ee},oe}}}var P6={"-":"",_:" ",0:"0"},Vr=/^\s*\d+/,oPe=/^%/,aPe=/[\\^$*+?|[\]().{}]/g;function Ct(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function sPe(e){return e.replace(aPe,"\\$&")}function _y(e){return new RegExp("^(?:"+e.map(sPe).join("|")+")","i")}function Gy(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function lPe(e,t,n){var r=Vr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function uPe(e,t,n){var r=Vr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function cPe(e,t,n){var r=Vr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function dPe(e,t,n){var r=Vr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function fPe(e,t,n){var r=Vr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function j6(e,t,n){var r=Vr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function H6(e,t,n){var r=Vr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function pPe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function hPe(e,t,n){var r=Vr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function mPe(e,t,n){var r=Vr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function J6(e,t,n){var r=Vr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function gPe(e,t,n){var r=Vr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function B6(e,t,n){var r=Vr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function bPe(e,t,n){var r=Vr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function yPe(e,t,n){var r=Vr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function vPe(e,t,n){var r=Vr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function xPe(e,t,n){var r=Vr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function wPe(e,t,n){var r=oPe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ZPe(e,t,n){var r=Vr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function SPe(e,t,n){var r=Vr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function K6(e,t){return Ct(e.getDate(),t,2)}function kPe(e,t){return Ct(e.getHours(),t,2)}function _Pe(e,t){return Ct(e.getHours()%12||12,t,2)}function GPe(e,t){return Ct(1+Hu.count(Ml(e),e),t,3)}function Gue(e,t){return Ct(e.getMilliseconds(),t,3)}function IPe(e,t){return Gue(e,t)+"000"}function WPe(e,t){return Ct(e.getMonth()+1,t,2)}function EPe(e,t){return Ct(e.getMinutes(),t,2)}function XPe(e,t){return Ct(e.getSeconds(),t,2)}function LPe(e){var t=e.getDay();return t===0?7:t}function RPe(e,t){return Ct(ub.count(Ml(e)-1,e),t,2)}function Iue(e){var t=e.getDay();return t>=4||t===0?dg(e):dg.ceil(e)}function CPe(e,t){return e=Iue(e),Ct(dg.count(Ml(e),e)+(Ml(e).getDay()===4),t,2)}function VPe(e){return e.getDay()}function YPe(e,t){return Ct(XG.count(Ml(e)-1,e),t,2)}function TPe(e,t){return Ct(e.getFullYear()%100,t,2)}function NPe(e,t){return e=Iue(e),Ct(e.getFullYear()%100,t,2)}function FPe(e,t){return Ct(e.getFullYear()%1e4,t,4)}function MPe(e,t){var n=e.getDay();return e=n>=4||n===0?dg(e):dg.ceil(e),Ct(e.getFullYear()%1e4,t,4)}function OPe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ct(t/60|0,"0",2)+Ct(t%60,"0",2)}function D6(e,t){return Ct(e.getUTCDate(),t,2)}function zPe(e,t){return Ct(e.getUTCHours(),t,2)}function PPe(e,t){return Ct(e.getUTCHours()%12||12,t,2)}function jPe(e,t){return Ct(1+Zd.count(Ol(e),e),t,3)}function Wue(e,t){return Ct(e.getUTCMilliseconds(),t,3)}function HPe(e,t){return Wue(e,t)+"000"}function JPe(e,t){return Ct(e.getUTCMonth()+1,t,2)}function BPe(e,t){return Ct(e.getUTCMinutes(),t,2)}function KPe(e,t){return Ct(e.getUTCSeconds(),t,2)}function DPe(e){var t=e.getUTCDay();return t===0?7:t}function APe(e,t){return Ct(cb.count(Ol(e)-1,e),t,2)}function Eue(e){var t=e.getUTCDay();return t>=4||t===0?fg(e):fg.ceil(e)}function UPe(e,t){return e=Eue(e),Ct(fg.count(Ol(e),e)+(Ol(e).getUTCDay()===4),t,2)}function $Pe(e){return e.getUTCDay()}function QPe(e,t){return Ct(LG.count(Ol(e)-1,e),t,2)}function qPe(e,t){return Ct(e.getUTCFullYear()%100,t,2)}function eje(e,t){return e=Eue(e),Ct(e.getUTCFullYear()%100,t,2)}function tje(e,t){return Ct(e.getUTCFullYear()%1e4,t,4)}function nje(e,t){var n=e.getUTCDay();return e=n>=4||n===0?fg(e):fg.ceil(e),Ct(e.getUTCFullYear()%1e4,t,4)}function rje(){return"+0000"}function A6(){return"%"}function U6(e){return+e}function $6(e){return Math.floor(+e/1e3)}var lm,j3,Xue,dz,Lue;ije({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ije(e){return lm=_ue(e),j3=lm.format,Xue=lm.parse,dz=lm.utcFormat,Lue=lm.utcParse,lm}function oje(e){return new Date(e)}function aje(e){return e instanceof Date?+e:+new Date(+e)}function fz(e,t,n,r,i,o,a,s,l,u){var c=uue(),d=c.invert,f=c.domain,h=u(".%L"),m=u(":%S"),g=u("%I:%M"),y=u("%I %p"),v=u("%a %d"),w=u("%b %d"),Z=u("%B"),k=u("%Y");function _(R){return(l(R)<R?h:s(R)<R?m:a(R)<R?g:o(R)<R?y:r(R)<R?i(R)<R?v:w:n(R)<R?Z:k)(R)}return c.invert=function(R){return new Date(d(R))},c.domain=function(R){return arguments.length?f(Array.from(R,aje)):f().map(oje)},c.ticks=function(R){var I=f();return e(I[0],I[I.length-1],R!=null?R:10)},c.tickFormat=function(R,I){return I==null?_:u(I)},c.nice=function(R){var I=f();return(!R||typeof R.range!="function")&&(R=t(I[0],I[I.length-1],R!=null?R:10)),R?f(bue(I,R)):c},c.copy=function(){return _5(c,fz(e,t,n,r,i,o,a,s,l,u))},c}function sje(){return Ul.apply(fz(rPe,iPe,Ml,sw,ub,Hu,z3,M3,Fu,j3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function lje(){return Ul.apply(fz(tPe,nPe,Ol,lw,cb,Zd,P3,O3,Fu,dz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function H3(){var e=0,t=1,n,r,i,o,a=qi,s=!1,l;function u(d){return d==null||isNaN(d=+d)?l:a(i===0?.5:(d=(o(d)-n)*i,s?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(d){return arguments.length?(s=!!d,u):s},u.interpolator=function(d){return arguments.length?(a=d,u):a};function c(d){return function(f){var h,m;return arguments.length?([h,m]=f,a=d(h,m),u):[a(0),a(1)]}}return u.range=c(pf),u.rangeRound=c(k5),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return o=d,n=d(e),r=d(t),i=n===r?0:1/(r-n),u}}function hf(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function pz(){var e=Zh(H3()(qi));return e.copy=function(){return hf(e,pz())},df.apply(e,arguments)}function Rue(){var e=az(H3()).domain([1,10]);return e.copy=function(){return hf(e,Rue()).base(e.base())},df.apply(e,arguments)}function Cue(){var e=sz(H3());return e.copy=function(){return hf(e,Cue()).constant(e.constant())},df.apply(e,arguments)}function hz(){var e=lz(H3());return e.copy=function(){return hf(e,hz()).exponent(e.exponent())},df.apply(e,arguments)}function uje(){return hz.apply(null,arguments).exponent(.5)}function J3(){var e=0,t=.5,n=1,r=1,i,o,a,s,l,u=qi,c,d=!1,f;function h(g){return isNaN(g=+g)?f:(g=.5+((g=+c(g))-o)*(r*g<r*o?s:l),u(d?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=c(e=+e),o=c(t=+t),a=c(n=+n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(u=g,h):u};function m(g){return function(y){var v,w,Z;return arguments.length?([v,w,Z]=y,u=nz(g,[v,w,Z]),h):[u(0),u(.5),u(1)]}}return h.range=m(pf),h.rangeRound=m(k5),h.unknown=function(g){return arguments.length?(f=g,h):f},function(g){return c=g,i=g(e),o=g(t),a=g(n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,h}}function Vue(){var e=Zh(J3()(qi));return e.copy=function(){return hf(e,Vue())},df.apply(e,arguments)}function Yue(){var e=az(J3()).domain([.1,1,10]);return e.copy=function(){return hf(e,Yue()).base(e.base())},df.apply(e,arguments)}function Tue(){var e=sz(J3());return e.copy=function(){return hf(e,Tue()).constant(e.constant())},df.apply(e,arguments)}function mz(){var e=lz(J3());return e.copy=function(){return hf(e,mz()).exponent(e.exponent())},df.apply(e,arguments)}function cje(){return mz.apply(null,arguments).exponent(.5)}const mr="#5B8FF9",gz={background:"transparent",header:{titleColor:"#d1d5db",labelColor:"#d1d5db"},axis:{gridColor:"#666",domainColor:"#d1d5db",tickColor:"#d1d5db",labelColor:"#d1d5db",titleColor:"#d1d5db"},legend:{labelColor:"#d1d5db",titleColor:"#d1d5db"},view:{stroke:"#666"}},dje={light:{background:"transparent"},dark:gz},fje={light:{area:{fill:mr},bar:{fill:mr},circle:{fill:mr},line:{stroke:mr},point:{stroke:mr},rect:{fill:mr},tick:{stroke:mr},arc:{fill:mr},background:"transparent",range:{category:["#5B8FF9","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],diverging:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],heatmap:["#0d0887","#46039f","#7201a8","#9c179e","#bd3786","#d8576b","#ed7953","#fb9f3a","#fdca26","#f0f921"],ramp:["#EBCCFF","#CCB0FF","#AE95FF","#907BFF","#7262FD","#5349E0","#2F32C3","#001BA7","#00068C"]},scale:{continuous:{range:["#d4d4e8","#3b196f"]}}},dark:{...gz,area:{fill:mr},bar:{fill:mr},circle:{fill:mr},line:{stroke:mr},point:{stroke:mr},rect:{fill:mr},tick:{stroke:mr},arc:{fill:mr},range:{category:["#5B8FF9","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],diverging:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],heatmap:["#0d0887","#46039f","#7201a8","#9c179e","#bd3786","#d8576b","#ed7953","#fb9f3a","#fdca26","#f0f921"],ramp:["#EBCCFF","#CCB0FF","#AE95FF","#907BFF","#7262FD","#5349E0","#2F32C3","#001BA7","#00068C"]},scale:{continuous:{range:["#d4d4e8","#3b196f"]}}}},Nue={vega:dje,g2:fje},pje=e=>({light:{area:{fill:e},bar:{fill:e},circle:{fill:e},line:{stroke:e},point:{stroke:e},rect:{fill:e},tick:{stroke:e},boxplot:{fill:e},errorbar:{stroke:e},errorband:{fill:e},arc:{fill:e},background:"transparent"},dark:{...gz,area:{fill:e},bar:{fill:e},circle:{fill:e},line:{stroke:e},point:{stroke:e},rect:{fill:e},tick:{stroke:e},boxplot:{fill:e},errorbar:{stroke:e},errorband:{fill:e},arc:{fill:e}}}),hje=e=>({light:{range:{category:{scheme:e},diverging:{scheme:e},heatmap:{scheme:e},ordinal:{scheme:e},ramp:{scheme:e}}},dark:{range:{category:{scheme:e},diverging:{scheme:e},heatmap:{scheme:e},ordinal:{scheme:e},ramp:{scheme:e}}}}),_Y={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f",blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"};function Fue(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const mje=Object.entries(_Y).map(([e,t])=>({name:e,value:Fue(t)})),GY=e=>{var t;return Fue((t=_Y[e])!=null?t:_Y.tableau10)},gje=e=>{if(!e)return{r:91,g:143,b:249,a:1};const t=e.match(/\d+/g)||[],[n=0,r=0,i=0,o=0]=t.map(Number);return{r:n,g:r,b:i,a:o}},qL=e=>e&&typeof e=="object"&&e.constructor===Object,Mue=(e,t)=>{if(qL(e)&&qL(t)){const n={...e};return Object.keys(t).forEach(r=>{n[r]=qL(n[r])?Mue(n[r],t[r]):t[r]}),n}return t},bje=(...e)=>e.reduce((t,n)=>Mue(t,n),{});function yje(e){var t;const{themeConfig:n,themeKey:r,mediaTheme:i,colorPalette:o,primaryColor:a}=e,s=n!=null?n:Nue[r!=null?r:"vega"],l=a?pje(a):{},u=o?hje(o):{};return(t=bje(s,l,u))==null?void 0:t[i]}function Q6(e){if(e){if(e instanceof Array)return e;if(typeof e=="object"&&"scheme"in e)return e.scheme instanceof Array?e.scheme:GY(e.scheme)}}function vje(e){var l,u,c;var t,n,r;const i=(l=(t=e.point)==null?void 0:t.stroke)!=null?l:mr,o=typeof i=="string"?i:mr,a=(u=Q6((n=e.range)==null?void 0:n.category))!=null?u:GY("tableau10"),s=(c=Q6((r=e.range)==null?void 0:r.ramp))!=null?c:GY("blues");return{primaryColor:o,nominalPalette:a,quantitativePalette:s}}function xje(e){if(e.length<2)return e[0]==="temporal"||e[0]==="quantitative"?"tick":"bar";const t=new Map;["nominal","ordinal","quantitative","temporal"].forEach(n=>{t.set(n,0)});for(let n of e)t.set(n,t.get(n)+1);return t.get("nominal")===1||t.get("ordinal")===1?"bar":t.get("temporal")===1&&t.get("quantitative")===1?"line":(t.get("quantitative"),"point")}const Ot={dragId:"",fid:"",name:"",semanticType:"quantitative",analyticType:"measure",aggName:"sum"};function wje(e,t){Object.values(e).forEach(n=>{if(n.aggregate===null)return;const r=t.find(i=>i.fid===n.field&&(i.analyticType==="measure"||i.fid===ai));r&&r.fid===ai?(n.title="Count",n.field=cr(r.fid,r.aggName)):r&&(n.title=`${r.aggName}(${r.name})`,n.field=cr(r.fid,r.aggName))})}function Zje(e){return e==="text"?new Set(["text","color","size","x","y","xOffset","yOffset","opacity"]):e==="arc"?new Set(["opacity","color","size","theta","radius"]):new Set(["column","opacity","color","row","size","x","y","xOffset","yOffset","shape"])}function Sje(e){switch(e){case"quarter":return"yearquarter";case"month":return"yearmonth";case"week":return"yearweek";case"day":return"yearmonthdate";case"hour":return"yearmonthdatehours";case"minute":return"yearmonthdatehoursminutes";case"second":return"yearmonthdatehoursminutesseconds"}return e}function kje(e){const t=Zje(e.geomType),n={};return Object.keys(e).filter(r=>t.has(r)).forEach(r=>{e[r]!==Ot&&(n[r]={field:e[r].fid,title:e[r].name,type:e[r].semanticType},e[r].analyticType!=="measure"&&(n[r].aggregate=null),e[r].analyticType==="measure"&&(n[r].type="quantitative"),e[r].semanticType==="temporal"&&e[r].timeUnit&&(n[r].timeUnit=Sje(e[r].timeUnit)))}),n.x&&(n.x.axis={labelOverlap:!0}),n&&n.y&&(n.y.axis={labelOverlap:!0}),n.x&&n.y&&(e.x.sort&&e.x.sort||e.y&&e.y.sort)&&(e.x.sort!=="none"&&(e.y.sort==="none"||!e.y.sort)?n.x.sort={encoding:"y",order:e.x.sort}:e.y.sort&&e.y.sort!=="none"&&(e.x.sort==="none"||!e.x.sort)&&(n.y.sort={encoding:"x",order:e.y.sort})),n}function _je(e,t){if(t==="stack"||t==="zero")return;let n=t==="none"?null:t;const r=["x","y","theta","radius"];for(let i of r)e[i]&&e[i].type==="quantitative"&&(e[i].stack=n)}function Gje(e,t=[],n=!1){const r=Object.keys(e).filter(i=>i!=="tooltip").map(i=>({field:e[i].field,type:e[i].type,title:e[i].title,...e[i].timeUnit?{timeUnit:e[i].timeUnit}:{}})).concat(t.map(i=>({field:n?cr(i.fid,i.aggName):i.fid,title:n&&i.aggName?`${i.aggName}(${i.name})`:i.name,type:i.semanticType})));e.tooltip=r}function q6(e){const{x:t,y:n,color:r,opacity:i,size:o,shape:a,theta:s,radius:l,text:u,row:c,column:d,xOffset:f,yOffset:h,details:m,defaultAggregated:g,stack:y,geomType:v,hideLegend:w=!1}=e,Z=[t,n,r,i,o,a,c,d,f,h,s,l,u];let k=v,_={};if(w&&(_.legend={disable:!0}),v==="auto"){const I=[];t!==Ot&&I.push(t.semanticType),n!==Ot&&I.push(n.semanticType),k=xje(I)}let R=kje({geomType:k,x:t,y:n,color:r,opacity:i,size:o,shape:a,row:c,column:d,xOffset:f,yOffset:h,theta:s,radius:l,details:m,text:u});return g&&wje(R,Z),Gje(R,m,g),_je(R,y),{config:_,mark:{type:k,opacity:.96,tooltip:{content:"data"}},encoding:R}}function Oue(e,t,n,r){if(typeof e=="function"){if(!t)return;const i=n.map(o=>o[t.fid]);return e({semanticType:t.semanticType,theme:r,values:i})}return e}function e8(e,t,n,r){const i={...t.encoding};function o(a){if(e[a]&&i[a])if(typeof e[a]=="function"){const s=i[a].field,l=n.map(u=>u[s]);i[a].scale=e[a]({semanticType:i[a].type,theme:r,values:l})}else i[a].scale=e[a]}return o("color"),o("opacity"),o("size"),o("radius"),o("theta"),{...t,encoding:i}}const zue=(e,t,n,r)=>{const{nominalPalette:i,primaryColor:o,quantitativePalette:a}=G.useMemo(()=>vje(r),[r]),s=G.useMemo(()=>()=>o,[o]),l=G.useMemo(()=>t?n&&t.aggName&&t.analyticType==="measure"?cr(t.fid,t.aggName):t.fid:"",[t,n]),u=G.useMemo(()=>!t||t.semanticType==="nominal"?[0,0]:e.reduce((m,{[l]:g})=>(g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g),m),[1/0,-1/0]),[e,t,l]),c=G.useMemo(()=>!t||t.semanticType!=="nominal"?[]:[...e.reduce((m,g)=>(m.add(g[l]),m),new Set)],[e,t,l]),d=G.useMemo(()=>{const[m,g]=u,y=a.map((w,Z)=>m+(g-m)*Z/(a.length-1)),v=oz().domain(y).range(a);return function(w){return v(Number(w[l]))}},[u,l,a]),f=G.useMemo(()=>{const m=V3().domain(c).range(i);return function(g){return m(g[l])}},[c,i]),h=G.useMemo(()=>c.map(m=>({name:m,color:f({[l]:m})})),[c,f]);return t?t.semanticType==="quantitative"||t.semanticType==="temporal"?{mapper:d,display:{type:t.semanticType,color:a,domain:u}}:{mapper:f,display:{type:"nominal",colors:h}}:{mapper:s}},Pue=(e,t,n)=>G.useMemo(()=>{let r,i;if(n&&(n.domain&&(r=Number(n.domain[0]),i=Number(n.domain[1])),n.domainMin!==void 0&&(r=n.domainMin),n.domainMax!==void 0&&(i=n.domainMax)),r!==void 0&&i!==void 0)return[r,i];if(!e)return[r!=null?r:0,i!=null?i:0];const o=t.map(l=>Number(l[e])).filter(l=>!isNaN(l));if(o.length===0)return[r!=null?r:0,i!=null?i:0];const[a,s]=o.slice(1).reduce((l,u)=>(u<l[0]&&(l[0]=u),u>l[1]&&(l[1]=u),l),[o[0],o[0]]);return[r!=null?r:a,i!=null?i:s]},[e,t,n]),jue=(e,t,n)=>G.useMemo(()=>{let r,i;return n&&(n.range&&(r=Number(n.range[0]),i=Number(n.range[1])),n.rangeMin!==void 0&&(r=n.rangeMin),n.rangeMax!==void 0&&(i=n.rangeMax)),[r!=null?r:e,i!=null?i:t]},[n,t,e]),Ije=2,Wje=10,Eje=3,Xje=(e,t,n,r)=>{const i=G.useMemo(()=>t?n&&t.aggName&&t.analyticType==="measure"?cr(t.fid,t.aggName):t.fid:"",[t,n]),o=G.useMemo(()=>{if(r.size)return Oue(r.size,t,e,"light")},[r,e,t]),[a,s]=Pue(i,e,o),[l,u]=jue(Ije,Wje,o);return G.useCallback(function(c){const d=Math.max(l,Math.min(Eje,u));if(!i)return d;const f=Number(c[i]);if(isNaN(f))return d;const h=Math.max(Math.min((f-a)/(s-a),1),0);return l+Math.sqrt(h)*(u-l)},[i,a,s,l,u,n])},Lje=.3,Rje=.8,Cje=1,Hue=(e,t,n,r)=>{const i=G.useMemo(()=>t?n&&t.aggName&&t.analyticType==="measure"?cr(t.fid,t.aggName):t.fid:"",[t,n]),o=G.useMemo(()=>{if(r.opacity)return Oue(r.opacity,t,e,"light")},[r,e,t]),[a,s]=Pue(i,e,o),[l,u]=jue(Lje,Rje,o);return G.useCallback(function(c){if(!i)return Cje;const d=Number(c[i]);if(isNaN(d))return 0;const f=Math.max(Math.min((d-a)/(s-a),1),0);return l+f*(u-l)},[i,a,s,l,u,n])},Vje=e=>`${e}`,Yje=(e,t)=>{const{timeFormat:n="%b %d, %Y",numberFormat:r}=t,i=G.useMemo(()=>{const a=j3(n);return s=>{if(typeof s!="number"&&typeof s!="string")return"";const l=new Date(s);return isNaN(l.getTime())?"Invalid Date":a(l)}},[n]),o=G.useMemo(()=>{if(!r)return s=>typeof s!="number"?"":s.toLocaleString();const a=G5(r);return s=>typeof s!="number"?"":a(s)},[r]);return G.useMemo(()=>e==="quantitative"?o:e==="temporal"?i:Vje,[e,o,i])};function Jue({bounds:e}){return _Oe().flyToBounds(e),null}const IY=G.memo(function({allFields:e,vegaConfig:t,field:n,value:r}){const{fid:i,analyticType:o,aggName:a}=n,s=G.useMemo(()=>{var d;var u;const c=(d=(u=e.find(f=>f.fid===i))==null?void 0:u.name)!=null?d:i;return o==="measure"&&a?`${a}(${c})`:c},[e,i,o,a]),l=Yje(n.semanticType,t);return x.createElement("p",null,s,": ",l(r))}),PS=15;function Bue(e){const{display:t,field:n,aggerated:r}=e,i=r&&n.analyticType==="measure"&&n.aggName?`${n.aggName}(${n.name})`:n.name;return x.createElement("div",{className:"absolute right-5 top-5 bg-white/30 rounded p-2",style:{zIndex:999}},t.type==="nominal"&&x.createElement("div",{className:"font-xs flex flex-col space-y-1"},x.createElement("div",{className:"font-medium max-w-[160px] overflow-hidden text-ellipsis whitespace-nowrap"},i),t.colors.slice(0,PS).map(({name:o,color:a})=>x.createElement("div",{className:"flex space-x-1 items-center",key:o},x.createElement("div",{className:"w-3 h-3",style:{backgroundColor:a}}),x.createElement("div",null,o))),t.colors.length>PS&&x.createElement("div",{className:"flex space-x-1 items-center"},x.createElement("div",{className:"w-3 h-3",style:{backgroundColor:t.colors[PS].color}}),x.createElement("div",null,"...",t.colors.length-PS," entries"))),t.type==="quantitative"&&x.createElement("div",{className:"font-xs flex flex-col space-y-1"},x.createElement("div",{className:"font-medium max-w-[160px] overflow-hidden text-ellipsis whitespace-nowrap"},i),x.createElement("div",{className:"flex space-x-1"},x.createElement("div",{className:"w-4 h-48",style:{background:`linear-gradient(${[...t.color].reverse().join(",")})`}}),x.createElement("div",{className:"font-xs flex flex-col justify-between"},x.createElement("div",null,Math.floor(t.domain[1])),x.createElement("div",null,Math.floor(t.domain[1]*.75+t.domain[0]*.25)),x.createElement("div",null,Math.floor(t.domain[1]*.5+t.domain[0]*.5)),x.createElement("div",null,Math.floor(t.domain[1]*.25+t.domain[0]*.75)),x.createElement("div",null,Math.floor(t.domain[0]))))))}const WY=(e,t)=>{const n=Number(e),r=Number(t);return n>=-90&&n<=90&&r>=-180&&r<=180},Tje=(e,t)=>`${typeof e=="number"?e:JSON.stringify(e)}, ${typeof t=="number"?t:JSON.stringify(t)}`,eR=20,Nje=G.forwardRef(function(e,t){const{name:n,data:r,allFields:i,latitude:o,longitude:a,color:s,opacity:l,size:u,details:c,defaultAggregated:d,vegaConfig:f,channelScales:h}=e,m=G.useMemo(()=>a&&o?r.map(X=>[Number(X[o.fid]),Number(X[a.fid])]).filter(X=>WY(X[0],X[1])):[],[a,o,r]),[g,y]=G.useMemo(()=>{if(m.length>0){const[X,Y]=m.reduce(([C,N],[V,F])=>(V<C[0][0]&&(C[0][0]=V),V>C[1][0]&&(C[1][0]=V),F<C[0][1]&&(C[0][1]=F),F>C[1][1]&&(C[1][1]=F),[C,[N[0]+F,N[1]+V]]),[[[...m[0]],[...m[0]]],[0,0]]);return[X,[Y[0]/m.length,Y[1]/m.length]]}return[[[-180,-90],[180,90]],[0,0]]},[m]),v=G.useRef([]);v.current=[],G.useEffect(()=>{v.current.length>0&&console.warn(`Failed to render ${v.current.length.toLocaleString()} markers of ${r.length.toLocaleString()} rows due to invalid lat/lng.
--------
${`${v.current.slice(0,eR).map(([X,Y,C])=>`[${X+1}] ${Tje(C,Y)}`).join(`
`)}`+(v.current.length>eR?`
	... and ${(v.current.length-eR).toLocaleString()} more`:"")}
`)});const w=G.useRef(null);G.useEffect(()=>{var X;const Y=(X=w.current)==null?void 0:X.getContainer();if(Y){const C=new ResizeObserver(()=>{var N;(N=w.current)==null||N.invalidateSize()});return C.observe(Y),()=>{C.unobserve(Y)}}});const Z=ab();G.useEffect(()=>{const X=Z.current;X&&(X.exportChart=async Y=>({mode:Y,title:n||"untitled",nCols:0,nRows:0,charts:[],container:()=>{var N;var C;return(N=(C=w.current)==null?void 0:C.getContainer())!=null?N:null},chartType:"map"}))},[]);const k=Xje(r,u,d,h),_=Hue(r,l,d,h),{mapper:R,display:I}=zue(r,s,d,f),E=G.useMemo(()=>c.concat([u,s,l].filter(Boolean)).map(X=>({...X,key:d&&X.analyticType==="measure"&&X.aggName?cr(X.fid,X.aggName):X.fid})),[d,c,u,s,l]);return x.createElement(UO,{attributionControl:!1,center:y,ref:w,zoom:5,bounds:g,style:{width:"100%",height:"100%",zIndex:1}},x.createElement(Jue,{bounds:g}),x.createElement($O,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),x.createElement(AO,{prefix:"Leaflet"}),!!(o&&a)&&r.map((X,Y)=>{const C=X[o.fid],N=X[a.fid];if(!WY(C,N))return v.current.push([Y,C,N]),null;const V=k(X),F=_(X),O=R(X);return x.createElement(kle,{key:`${Y}-${V}-${F}-${O}`,center:[Number(C),Number(N)],radius:V,opacity:.8,fillOpacity:F,fillColor:O,color:"#00000022",stroke:!0,weight:1,fill:!0},E.length>0&&x.createElement(pY,null,E.map((P,H)=>x.createElement(IY,{key:H,allFields:i,vegaConfig:f,field:P,value:X[P.key]}))))}),I&&x.createElement(Bue,{display:I,field:s}))}),tR={};function Kue(e,t){const n=t?`${t.type}(${t.url})`:"",r=e||tR[n]||t,[i,o]=G.useState(0),a=G.useRef(0);return G.useEffect(()=>{if(r===t&&t){const s=Date.now();a.current=s,fetch(t.url).then(l=>l.json()).then(l=>{if(s===a.current){if(t.type==="GeoJSON")if("features"in l)tR[n]=l;else throw"invalid geojson";else tR[n]=g3(l,Object.keys(l.objects)[0]);o(s)}}).catch(l=>console.error(l))}},[r]),r===t?void 0:r}const Due=e=>{switch(e.type){case"Polygon":return[e.coordinates[0].map(t=>[t[1],t[0]])];case"Point":{const t=e.coordinates;return[[[t[1],t[0]]]]}case"GeometryCollection":return e.geometries.map(Due).flat();case"LineString":return[e.coordinates.map(t=>[t[1],t[0]])];case"MultiLineString":return e.coordinates.map(t=>t.map(n=>[n[1],n[0]]));case"MultiPoint":return[e.coordinates.map(t=>[t[1],t[0]])];case"MultiPolygon":return e.coordinates.map(t=>t[0].map(n=>[n[1],n[0]]));default:return[]}},Fje=e=>{let t=0,n=[0,0];for(let r=0;r<e.length-1;r++){let[i,o]=e[r],[a,s]=e[r+1],l=i*s-a*o;t+=l,n[0]+=(i+a)*l,n[1]+=(o+s)*l}return t/=2,n[0]/=6*t,n[1]/=6*t,n},Mje=G.forwardRef(function(e,t){const{name:n,data:r,allFields:i,features:o,featuresUrl:a,geoKey:s,defaultAggregated:l,geoId:u,color:c,opacity:d,text:f,details:h,vegaConfig:m,scaleIncludeUnmatchedChoropleth:g,channelScales:y}=e;G.useImperativeHandle(t,()=>({}));const v=Kue(o,a),{t:w}=ot("translation"),Z=G.useMemo(()=>u?r.map(P=>P[u.fid]):[],[u,r]),[k,_]=G.useMemo(()=>{if(Z.length&&s&&v){const P=[],H=Z.map((M,j)=>{const J=M?v.features.find(q=>{var K;return((K=q.properties)==null?void 0:K[s])===M}):void 0;return J&&P.push(j),J});return[P,H]}return[[],[]]},[Z,v,s]);G.useEffect(()=>{if(_.length>0){const P=_.filter(H=>!H);P.length&&console.warn(`Failed to render ${P.length.toLocaleString()} items of ${r.length.toLocaleString()} rows due to missing geojson feature.`)}},[_]);const R=G.useMemo(()=>_.length>0?_.map(P=>P?Due(P.geometry):[],[]):[],[_]),[I,E]=G.useMemo(()=>{const P=R.flat(2);if(P.length>0){const[H,M]=P.reduce(([j,J],[q,K])=>(q<j[0][0]&&(j[0][0]=q),q>j[1][0]&&(j[1][0]=q),K<j[0][1]&&(j[0][1]=K),K>j[1][1]&&(j[1][1]=K),[j,[J[0]+K,J[1]+q]]),[[[...P[0]],[...P[0]]],[0,0]]);return[H,[M[0]/R.length,M[1]/R.length]]}return[[[-180,-90],[180,90]],[0,0]]},[R]),X=G.useMemo(()=>g?r:k.map(P=>r[P]),[r,k,g]),Y=Hue(X,d,l,y),{mapper:C,display:N}=zue(X,c,l,m),V=G.useMemo(()=>h.concat([c,d].filter(Boolean)).map(P=>({...P,key:l&&P.analyticType==="measure"&&P.aggName?cr(P.fid,P.aggName):P.fid})),[l,h,c,d]),F=G.useRef(null);G.useEffect(()=>{var P;const H=(P=F.current)==null?void 0:P.getContainer();if(H){const M=new ResizeObserver(()=>{var j;(j=F.current)==null||j.invalidateSize()});return M.observe(H),()=>{M.unobserve(H)}}});const O=ab();return G.useEffect(()=>{const P=O.current;P&&(P.exportChart=async H=>({mode:H,title:n||"untitled",nCols:0,nRows:0,charts:[],container:()=>{var j;var M;return(j=(M=F.current)==null?void 0:M.getContainer())!=null?j:null},chartType:"map"}))},[]),!v&&(o||a)?x.createElement("div",{className:"flex items-center justify-center w-full h-full"},w("main.tabpanel.settings.geography_settings.loading")):x.createElement(UO,{attributionControl:!1,center:E,ref:F,zoom:5,bounds:I,style:{width:"100%",height:"100%",zIndex:1}},x.createElement(Jue,{bounds:I}),x.createElement($O,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),x.createElement(AO,{prefix:"Leaflet"}),R.length>0&&r.map((P,H)=>{const M=R[H],j=Y(P),J=C(P);return x.createElement(G.Fragment,{key:`${H}-${j}-${J}`},M.map((q,K)=>{if(q.length===0)return null;if(q.length===1)return x.createElement(kle,{key:K,center:q[0],radius:3,opacity:.8,fillOpacity:j,fillColor:J,color:"#0004",weight:1,stroke:!0,fill:!0},V.length>0&&x.createElement(pY,null,x.createElement("header",null,r[H][u.fid]),V.map(($,Q)=>x.createElement(IY,{key:Q,allFields:i,vegaConfig:m,field:$,value:P[$.key]}))));const D=f&&q.length>=3?Fje(q):[NaN,NaN];return x.createElement(G.Fragment,{key:K},x.createElement(EOe,{positions:q,pathOptions:{fillOpacity:j*.8,fillColor:J,color:"#0004",weight:1,stroke:!0,fill:!0}},x.createElement(pY,null,x.createElement("header",null,r[H][u.fid]),V.map(($,Q)=>x.createElement(IY,{key:Q,allFields:i,vegaConfig:m,field:$,value:P[$.key]})))),f&&r[H][f.fid]&&WY(D[0],D[1])&&x.createElement(WOe,{position:D,interactive:!1,icon:Ls.divIcon({className:"!bg-transparent !border-none",html:`<div style="font-size: 11px; transform: translate(-50%, -50%); opacity: 0.8;">${r[H][f.fid]}</div>`})}))}))}),N&&x.createElement(Bue,{display:N,field:c}))}),EY=800,RG=600,Aue=G.forwardRef(function(e,t){const{name:n,draggableFieldState:r,data:i,visualConfig:o,visualLayout:a,vegaConfig:s={},channelScales:l,scale:u}=e,{latitude:[c],longitude:[d],geoId:[f],dimensions:h,measures:m,size:[g],color:[y],opacity:[v],text:[w],details:Z}=r,{defaultAggregated:k,geoms:[_]}=o,{geojson:R,geoKey:I="",geoUrl:E,scaleIncludeUnmatchedChoropleth:X=!1}=a,Y=G.useMemo(()=>[...h,...m],[h,m]),C=G.useMemo(()=>Y.find(P=>P.geoRole==="latitude"),[Y]),N=G.useMemo(()=>Y.find(P=>P.geoRole==="longitude"),[Y]),V=G.useMemo(()=>c!=null?c:C,[c,C]),F=G.useMemo(()=>d!=null?d:N,[d,N]),O=G.useMemo(()=>{var H,M;const P=l!=null?l:{};return u!=null&&u.opacity&&(P.opacity={...(H=P.opacity)!=null?H:{},...u.opacity}),u!=null&&u.size&&(P.size={...(M=P.size)!=null?M:{},...u.size}),P},[l,u]);return _==="poi"?x.createElement(Nje,{name:n,data:i,allFields:Y,defaultAggregated:k,latitude:V,longitude:F,color:y,opacity:v,size:g,details:Z,vegaConfig:s,channelScales:O}):_==="choropleth"?x.createElement(Mje,{name:n,data:i,allFields:Y,features:R,featuresUrl:E,geoKey:I,defaultAggregated:k,geoId:f,color:y,opacity:v,text:w,details:Z,vegaConfig:s,scaleIncludeUnmatchedChoropleth:X,channelScales:O}):null});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Oje=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zje=Object.prototype.hasOwnProperty;function XY(e,t){return zje.call(e,t)}function LY(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)XY(e,i)&&r.push(i);return r}function Xo(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function RY(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Qf(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Uue(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function CY(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(CY(e[t]))return!0}else if(typeof e=="object"){for(var r=LY(e),i=r.length,o=0;o<i;o++)if(CY(e[r[o]]))return!0}}return!1}function t8(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var $ue=function(e){Oje(t,e);function t(n,r,i,o,a){var s=this.constructor,l=e.call(this,t8(n,{name:r,index:i,operation:o,tree:a}))||this;return l.name=r,l.index=i,l.operation=o,l.tree=a,Object.setPrototypeOf(l,s.prototype),l.message=t8(n,{name:r,index:i,operation:o,tree:a}),l}return t}(Error),Tn=$ue,Pje=Xo,s0={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=CG(n,this.path);r&&(r=Xo(r));var i=Wp(n,{op:"remove",path:this.from}).removed;return Wp(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=CG(n,this.from);return Wp(n,{op:"add",path:this.path,value:Xo(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:uw(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},jje={add:function(e,t,n){return RY(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:s0.move,copy:s0.copy,test:s0.test,_get:s0._get};function CG(e,t){if(t=="")return e;var n={op:"_get",path:t};return Wp(e,n),n.value}function Wp(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):VG(t,0)),t.path===""){var a={newDocument:e};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=e,a;if(t.op==="move"||t.op==="copy")return a.newDocument=CG(e,t.from),t.op==="move"&&(a.removed=e),a;if(t.op==="test"){if(a.test=uw(e,t.value),a.test===!1)throw new Tn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}else{if(t.op==="remove")return a.removed=e,a.newDocument=null,a;if(t.op==="_get")return t.value=e,a;if(n)throw new Tn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}}else{r||(e=Xo(e));var s=t.path||"",l=s.split("/"),u=e,c=1,d=l.length,f=void 0,h=void 0,m=void 0;for(typeof n=="function"?m=n:m=VG;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=Uue(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(u[h]===void 0?f=l.slice(0,c).join("/"):c==d-1&&(f=t.path),f!==void 0&&m(t,0,e,f)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!RY(h))throw new Tn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);RY(h)&&(h=~~h)}if(c>=d){if(n&&t.op==="add"&&h>u.length)throw new Tn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var a=jje[t.op].call(t,u,h,e);if(a.test===!1)throw new Tn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(c>=d){var a=s0[t.op].call(t,u,h,e);if(a.test===!1)throw new Tn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}if(u=u[h],n&&c<d&&(!u||typeof u!="object"))throw new Tn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function B3(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Tn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Xo(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=Wp(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function Hje(e,t,n){var r=Wp(e,t);if(r.test===!1)throw new Tn("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function VG(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Tn("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(s0[e.op]){if(typeof e.path!="string")throw new Tn("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Tn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Tn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Tn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&CY(e.value))throw new Tn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Tn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Tn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var a={op:"_get",path:e.from,value:void 0},s=Que([a],n);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new Tn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Tn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function Que(e,t,n){try{if(!Array.isArray(e))throw new Tn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)B3(Xo(t),Xo(e),n||!0);else{n=n||VG;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Tn)return i;throw i}}function uw(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,a;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!uw(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var s=Object.keys(e);if(o=s.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(s[i]))return!1;for(i=o;i--!==0;)if(a=s[i],!uw(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}const Jje=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Tn,_areEquals:uw,applyOperation:Wp,applyPatch:B3,applyReducer:Hje,deepClone:Pje,getValueByPointer:CG,validate:Que,validator:VG},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var bz=new WeakMap,Bje=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Kje=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Dje(e){return bz.get(e)}function Aje(e,t){return e.observers.get(t)}function Uje(e,t){e.observers.delete(t.callback)}function $je(e,t){t.unobserve()}function Qje(e,t){var n=[],r,i=Dje(e);if(!i)i=new Bje(e),bz.set(e,i);else{var o=Aje(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=Xo(e),t){r.callback=t,r.next=null;var a=function(){VY(r)},s=function(){clearTimeout(r.next),r.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return r.patches=n,r.object=e,r.unobserve=function(){VY(r),clearTimeout(r.next),Uje(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},i.observers.set(t,new Kje(t,r)),r}function VY(e,t){t===void 0&&(t=!1);var n=bz.get(e.object);yz(n.value,e.object,e.patches,"",t),e.patches.length&&B3(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function yz(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=LY(t),a=LY(e),s=!1,l=a.length-1;l>=0;l--){var u=a[l],c=e[u];if(XY(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?yz(c,d,n,r+"/"+Qf(u),i):c!==d&&(i&&n.push({op:"test",path:r+"/"+Qf(u),value:Xo(c)}),n.push({op:"replace",path:r+"/"+Qf(u),value:Xo(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Qf(u),value:Xo(c)}),n.push({op:"remove",path:r+"/"+Qf(u)}),s=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!s&&o.length==a.length))for(var l=0;l<o.length;l++){var u=o[l];!XY(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+Qf(u),value:Xo(t[u])})}}}function qje(e,t,n){n===void 0&&(n=!1);var r=[];return yz(e,t,r,"",n),r}const e4e=Object.freeze(Object.defineProperty({__proto__:null,compare:qje,generate:VY,observe:Qje,unobserve:$je},Symbol.toStringTag,{value:"Module"}));Object.assign({},Jje,e4e,{JsonPatchError:$ue,deepClone:Xo,escapePathComponent:Qf,unescapePathComponent:Uue});var t4e=/("(?:[^\\"]|\\.)*")|[:,]/g,nR=function(e,t){var n,r,i;return t=t||{},n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),r=n===""?1/0:t.maxLength===void 0?80:t.maxLength,i=t.replacer,function o(a,s,l){var u,c,d,f,h,m,g,y,v,w,Z,k;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),Z=JSON.stringify(a,i),Z===void 0)return Z;if(g=r-s.length-l,Z.length<=g&&(v=Z.replace(t4e,function(_,R){return R||_+" "}),v.length<=g))return v;if(i!=null&&(a=JSON.parse(Z),i=void 0),typeof a=="object"&&a!==null){if(y=s+n,d=[],c=0,Array.isArray(a))for(w="[",u="]",g=a.length;c<g;c++)d.push(o(a[c],y,c===g-1?0:1)||"null");else for(w="{",u="}",m=Object.keys(a),g=m.length;c<g;c++)f=m[c],h=JSON.stringify(f)+": ",k=o(a[f],y,h.length+(c===g-1?0:1)),k!==void 0&&d.push(h+k);if(d.length>0)return[w,n+d.join(`,
`+y),u].join(`
`+s)}return Z}(e,"",0)};function bo(e,t,n){return e.fields=t||[],e.fname=n,e}function On(e){return e==null?null:e.fname}function si(e){return e==null?null:e.fields}function que(e){return e.length===1?n4e(e[0]):r4e(e)}const n4e=e=>function(t){return t[e]},r4e=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function le(e){throw Error(e)}function $l(e){const t=[],n=e.length;let r=null,i=0,o="",a,s,l;e=e+"";function u(){t.push(o+e.substring(a,s)),o="",a=s+1}for(a=s=0;s<n;++s)if(l=e[s],l==="\\")o+=e.substring(a,s),o+=e.substring(++s,++s),a=s;else if(l===r)u(),r=null,i=-1;else{if(r)continue;a===i&&l==='"'||a===i&&l==="'"?(a=s+1,r=l):l==="."&&!i?s>a?u():a=s+1:l==="["?(s>a&&u(),i=a=s+1):l==="]"&&(i||le("Access path missing open bracket: "+e),i>0&&u(),i=0,a=s+1)}return i&&le("Access path missing closing bracket: "+e),r&&le("Access path missing closing quote: "+e),s>a&&(s++,u()),t}function lo(e,t,n){const r=$l(e);return e=r.length===1?r[0]:e,bo((n&&n.get||que)(r),[e],t||e)}const I5=lo("id"),pi=bo(e=>e,[],"identity"),Bc=bo(()=>0,[],"zero"),db=bo(()=>1,[],"one"),Sa=bo(()=>!0,[],"true"),Vc=bo(()=>!1,[],"false");function i4e(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const ece=0,vz=1,xz=2,tce=3,nce=4;function wz(e,t,n=i4e){let r=e||ece;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=vz&&n(t||"error","ERROR",arguments),this},warn(){return r>=xz&&n(t||"warn","WARN",arguments),this},info(){return r>=tce&&n(t||"log","INFO",arguments),this},debug(){return r>=nce&&n(t||"log","DEBUG",arguments),this}}}var ce=Array.isArray;function Le(e){return e===Object(e)}const n8=e=>e!=="__proto__";function fb(...e){return e.reduce((t,n)=>{for(const r in n)if(r==="signals")t.signals=o4e(t.signals,n.signals);else{const i=r==="legend"?{layout:1}:r==="style"?!0:null;pb(t,r,n[r],i)}return t},{})}function pb(e,t,n,r){if(!n8(t))return;let i,o;if(Le(n)&&!ce(n)){o=Le(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?pb(o,i,n[i]):n8(i)&&(o[i]=n[i])}else e[t]=n}function o4e(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function Zt(e){return e[e.length-1]}function ri(e){return e==null||e===""?null:+e}const rce=e=>t=>e*Math.exp(t),ice=e=>t=>Math.log(e*t),oce=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),ace=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,YG=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function K3(e,t,n,r){const i=n(e[0]),o=n(Zt(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function sce(e,t){return K3(e,t,ri,pi)}function lce(e,t){var n=Math.sign(e[0]);return K3(e,t,ice(n),rce(n))}function uce(e,t,n){return K3(e,t,YG(n),YG(1/n))}function cce(e,t,n){return K3(e,t,oce(n),ace(n))}function D3(e,t,n,r,i){const o=r(e[0]),a=r(Zt(e)),s=t!=null?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function Zz(e,t,n){return D3(e,t,n,ri,pi)}function Sz(e,t,n){const r=Math.sign(e[0]);return D3(e,t,n,ice(r),rce(r))}function TG(e,t,n,r){return D3(e,t,n,YG(r),YG(1/r))}function kz(e,t,n,r){return D3(e,t,n,oce(r),ace(r))}function dce(e){return 1+~~(new Date(e).getMonth()/3)}function fce(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Ee(e){return e!=null?ce(e)?e:[e]:[]}function pce(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function dt(e){return typeof e=="function"}const a4e="descending";function _z(e,t,n){n=n||{},t=Ee(t)||[];const r=[],i=[],o={},a=n.comparator||s4e;return Ee(e).forEach((s,l)=>{s!=null&&(r.push(t[l]===a4e?-1:1),i.push(s=dt(s)?s:lo(s,null,n)),(si(s)||[]).forEach(u=>o[u]=1))}),i.length===0?null:bo(a(i,r),Object.keys(o))}const A3=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),s4e=(e,t)=>e.length===1?l4e(e[0],t[0]):u4e(e,t,e.length),l4e=(e,t)=>function(n,r){return A3(e(n),e(r))*t},u4e=(e,t,n)=>(t.push(0),function(r,i){let o,a=0,s=-1;for(;a===0&&++s<n;)o=e[s],a=A3(o(r),o(i));return a*t[s]});function hi(e){return dt(e)?e:()=>e}function Gz(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function ct(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function zl(e,t){let n=0,r,i,o,a;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=a=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>a&&(a=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=a=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>a&&(a=i))}return[o,a]}function hce(e,t){const n=e.length;let r=-1,i,o,a,s,l;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=l=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,l=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=l=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,l=r))}return[s,l]}const c4e=Object.prototype.hasOwnProperty;function ze(e,t){return c4e.call(e,t)}const jS={};function hb(e){let t={},n;function r(o){return ze(t,o)&&t[o]!==jS}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,a){return r(o)||(++i.size,t[o]===jS&&--i.empty),t[o]=a,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=jS),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let a=0;for(const s in t){const l=t[s];l!==jS&&(!n||!n(l))&&(o[s]=l,++a)}i.size=a,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function mce(e,t,n,r,i,o){if(!n&&n!==0)return o;const a=+n;let s=e[0],l=Zt(e),u;l<s&&(u=s,s=l,l=u),u=Math.abs(t-s);const c=Math.abs(l-t);return u<c&&u<=a?r:c<=a?i:o}function Se(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),ct(r,n)}function l0(e,t,n,r){let i=t[0],o=t[t.length-1],a;return i>o&&(a=i,i=o,o=a),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function mf(e){return typeof e=="boolean"}function Sd(e){return Object.prototype.toString.call(e)==="[object Date]"}function gce(e){return e&&dt(e[Symbol.iterator])}function At(e){return typeof e=="number"}function bce(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function We(e){return typeof e=="string"}function Iz(e,t,n){e&&(e=t?Ee(e).map(s=>s.replace(/\\(.)/g,"$1")):Ee(e));const r=e&&e.length,i=n&&n.get||que,o=s=>i(t?[s]:$l(s));let a;if(!r)a=function(){return""};else if(r===1){const s=o(e[0]);a=function(l){return""+s(l)}}else{const s=e.map(o);a=function(l){let u=""+s[0](l),c=0;for(;++c<r;)u+="|"+s[c](l);return u}}return bo(a,e,"key")}function yce(e,t){const n=e[0],r=Zt(e),i=+t;return i?i===1?r:n+i*(r-n):n}const d4e=1e4;function vce(e){e=+e||d4e;let t,n,r;const i=()=>{t={},n={},r=0},o=(a,s)=>(++r>e&&(n=t,t={},r=1),t[a]=s);return i(),{clear:i,has:a=>ze(t,a)||ze(n,a),get:a=>ze(t,a)?t[a]:ze(n,a)?o(a,n[a]):void 0,set:(a,s)=>ze(t,a)?t[a]=s:o(a,s)}}function xce(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const a=r||new t.constructor(i+o);let s=0,l=0,u=0;for(;s<i&&l<o;++u)a[u]=e(t[s],n[l])>0?n[l++]:t[s++];for(;s<i;++s,++u)a[u]=t[s];for(;l<o;++l,++u)a[u]=n[l];return a}function yv(e,t){let n="";for(;--t>=0;)n+=e;return n}function wce(e,t,n,r){const i=n||" ",o=e+"",a=t-o.length;return a<=0?o:r==="left"?yv(i,a)+o:r==="center"?yv(i,~~(a/2))+o+yv(i,Math.ceil(a/2)):o+yv(i,a)}function W5(e){return e&&Zt(e)-e[0]||0}function ke(e){return ce(e)?"["+e.map(ke)+"]":Le(e)||We(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Wz(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const f4e=e=>At(e)||Sd(e)?e:Date.parse(e);function Ez(e,t){return t=t||f4e,e==null||e===""?null:t(e)}function Xz(e){return e==null||e===""?null:e+""}function ks(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function Zce(e,t,n,r){const i=r!=null?r:"",o=e+"",a=o.length,s=Math.max(0,t-i.length);return a<=t?o:n==="left"?i+o.slice(a-s):n==="center"?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i}function Mc(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}var r8={},rR={},iR=34,Iy=10,oR=13;function Sce(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function p4e(e,t){var n=Sce(e);return function(r,i){return t(n(r),i,e)}}function i8(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Pi(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function h4e(e){return e<0?"-"+Pi(-e,6):e>9999?"+"+Pi(e,6):Pi(e,4)}function m4e(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":h4e(e.getUTCFullYear())+"-"+Pi(e.getUTCMonth()+1,2)+"-"+Pi(e.getUTCDate(),2)+(i?"T"+Pi(t,2)+":"+Pi(n,2)+":"+Pi(r,2)+"."+Pi(i,3)+"Z":r?"T"+Pi(t,2)+":"+Pi(n,2)+":"+Pi(r,2)+"Z":n||t?"T"+Pi(t,2)+":"+Pi(n,2)+"Z":"")}function g4e(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(d,f){var h,m,g=i(d,function(y,v){if(h)return h(y,v-1);m=y,h=f?p4e(y,f):Sce(y)});return g.columns=m||[],g}function i(d,f){var h=[],m=d.length,g=0,y=0,v,w=m<=0,Z=!1;d.charCodeAt(m-1)===Iy&&--m,d.charCodeAt(m-1)===oR&&--m;function k(){if(w)return rR;if(Z)return Z=!1,r8;var R,I=g,E;if(d.charCodeAt(I)===iR){for(;g++<m&&d.charCodeAt(g)!==iR||d.charCodeAt(++g)===iR;);return(R=g)>=m?w=!0:(E=d.charCodeAt(g++))===Iy?Z=!0:E===oR&&(Z=!0,d.charCodeAt(g)===Iy&&++g),d.slice(I+1,R-1).replace(/""/g,'"')}for(;g<m;){if((E=d.charCodeAt(R=g++))===Iy)Z=!0;else if(E===oR)Z=!0,d.charCodeAt(g)===Iy&&++g;else if(E!==n)continue;return d.slice(I,R)}return w=!0,d.slice(I,m)}for(;(v=k())!==rR;){for(var _=[];v!==r8&&v!==rR;)_.push(v),v=k();f&&(_=f(_,y++))==null||h.push(_)}return h}function o(d,f){return d.map(function(h){return f.map(function(m){return c(h[m])}).join(e)})}function a(d,f){return f==null&&(f=i8(d)),[f.map(c).join(e)].concat(o(d,f)).join(`
`)}function s(d,f){return f==null&&(f=i8(d)),o(d,f).join(`
`)}function l(d){return d.map(u).join(`
`)}function u(d){return d.map(c).join(e)}function c(d){return d==null?"":d instanceof Date?m4e(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:l,formatRow:u,formatValue:c}}const Pr="year",uo="quarter",li="month",sr="week",co="date",ni="day",Pl="dayofyear",zo="hours",Po="minutes",ka="seconds",_s="milliseconds",Lz=[Pr,uo,li,sr,co,ni,Pl,zo,Po,ka,_s],aR=Lz.reduce((e,t,n)=>(e[t]=1+n,e),{});function Rz(e){const t=Ee(e).slice(),n={};return t.length||le("Missing time unit."),t.forEach(r=>{ze(aR,r)?n[r]=1:le("Invalid time unit: ".concat(r,"."))}),(n[sr]||n[ni]?1:0)+(n[uo]||n[li]||n[co]?1:0)+(n[Pl]?1:0)>1&&le("Incompatible time units: ".concat(e)),t.sort((r,i)=>aR[r]-aR[i]),t}const b4e={[Pr]:"%Y ",[uo]:"Q%q ",[li]:"%b ",[co]:"%d ",[sr]:"W%U ",[ni]:"%a ",[Pl]:"%j ",[zo]:"%H:00",[Po]:"00:%M",[ka]:":%S",[_s]:".%L",["".concat(Pr,"-").concat(li)]:"%Y-%m ",["".concat(Pr,"-").concat(li,"-").concat(co)]:"%Y-%m-%d ",["".concat(zo,"-").concat(Po)]:"%H:%M"};function kce(e,t){const n=ct({},b4e,t),r=Rz(e),i=r.length;let o="",a=0,s,l;for(a=0;a<i;)for(s=r.length;s>a;--s)if(l=r.slice(a,s).join("-"),n[l]!=null){o+=n[l],a=s;break}return o.trim()}const rp=new Date;function Cz(e){return rp.setFullYear(e),rp.setMonth(0),rp.setDate(1),rp.setHours(0,0,0,0),rp}function _ce(e){return Ice(new Date(e))}function Gce(e){return YY(new Date(e))}function Ice(e){return Hu.count(Cz(e.getFullYear())-1,e)}function YY(e){return ub.count(Cz(e.getFullYear())-1,e)}function TY(e){return Cz(e).getDay()}function y4e(e,t,n,r,i,o,a){if(0<=e&&e<100){const s=new Date(-1,t,n,r,i,o,a);return s.setFullYear(e),s}return new Date(e,t,n,r,i,o,a)}function Wce(e){return Xce(new Date(e))}function Ece(e){return NY(new Date(e))}function Xce(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Zd.count(t-1,e)}function NY(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return cb.count(t-1,e)}function FY(e){return rp.setTime(Date.UTC(e,0,1)),rp.getUTCDay()}function v4e(e,t,n,r,i,o,a){if(0<=e&&e<100){const s=new Date(Date.UTC(-1,t,n,r,i,o,a));return s.setUTCFullYear(n.y),s}return new Date(Date.UTC(e,t,n,r,i,o,a))}function Lce(e,t,n,r,i){const o=t||1,a=Zt(e),s=(v,w,Z)=>(Z=Z||v,x4e(n[Z],r[Z],v===a&&o,w)),l=new Date,u=ks(e),c=u[Pr]?s(Pr):hi(2012),d=u[li]?s(li):u[uo]?s(uo):Bc,f=u[sr]&&u[ni]?s(ni,1,sr+ni):u[sr]?s(sr,1):u[ni]?s(ni,1):u[co]?s(co,1):u[Pl]?s(Pl,1):db,h=u[zo]?s(zo):Bc,m=u[Po]?s(Po):Bc,g=u[ka]?s(ka):Bc,y=u[_s]?s(_s):Bc;return function(v){l.setTime(+v);const w=c(l);return i(w,d(l),f(l,w),h(l),m(l),g(l),y(l))}}function x4e(e,t,n,r){const i=n<=1?e:r?(o,a)=>r+n*Math.floor((e(o,a)-r)/n):(o,a)=>n*Math.floor(e(o,a)/n);return t?(o,a)=>t(i(o,a),a):i}function pg(e,t,n){return t+e*7-(n+6)%7}const w4e={[Pr]:e=>e.getFullYear(),[uo]:e=>Math.floor(e.getMonth()/3),[li]:e=>e.getMonth(),[co]:e=>e.getDate(),[zo]:e=>e.getHours(),[Po]:e=>e.getMinutes(),[ka]:e=>e.getSeconds(),[_s]:e=>e.getMilliseconds(),[Pl]:e=>Ice(e),[sr]:e=>YY(e),[sr+ni]:(e,t)=>pg(YY(e),e.getDay(),TY(t)),[ni]:(e,t)=>pg(1,e.getDay(),TY(t))},Z4e={[uo]:e=>3*e,[sr]:(e,t)=>pg(e,0,TY(t))};function Rce(e,t){return Lce(e,t||1,w4e,Z4e,y4e)}const S4e={[Pr]:e=>e.getUTCFullYear(),[uo]:e=>Math.floor(e.getUTCMonth()/3),[li]:e=>e.getUTCMonth(),[co]:e=>e.getUTCDate(),[zo]:e=>e.getUTCHours(),[Po]:e=>e.getUTCMinutes(),[ka]:e=>e.getUTCSeconds(),[_s]:e=>e.getUTCMilliseconds(),[Pl]:e=>Xce(e),[sr]:e=>NY(e),[ni]:(e,t)=>pg(1,e.getUTCDay(),FY(t)),[sr+ni]:(e,t)=>pg(NY(e),e.getUTCDay(),FY(t))},k4e={[uo]:e=>3*e,[sr]:(e,t)=>pg(e,0,FY(t))};function Cce(e,t){return Lce(e,t||1,S4e,k4e,v4e)}const _4e={[Pr]:Ml,[uo]:sw.every(3),[li]:sw,[sr]:ub,[co]:Hu,[ni]:Hu,[Pl]:Hu,[zo]:z3,[Po]:M3,[ka]:Fu,[_s]:cg},G4e={[Pr]:Ol,[uo]:lw.every(3),[li]:lw,[sr]:cb,[co]:Zd,[ni]:Zd,[Pl]:Zd,[zo]:P3,[Po]:O3,[ka]:Fu,[_s]:cg};function mb(e){return _4e[e]}function gb(e){return G4e[e]}function Vce(e,t,n){return e?e.offset(t,n):void 0}function Yce(e,t,n){return Vce(mb(e),t,n)}function Tce(e,t,n){return Vce(gb(e),t,n)}function Nce(e,t,n,r){return e?e.range(t,n,r):void 0}function Fce(e,t,n,r){return Nce(mb(e),t,n,r)}function Mce(e,t,n,r){return Nce(gb(e),t,n,r)}const vv=1e3,xv=vv*60,wv=xv*60,U3=wv*24,I4e=U3*7,o8=U3*30,MY=U3*365,Oce=[Pr,li,co,zo,Po,ka,_s],Zv=Oce.slice(0,-1),Sv=Zv.slice(0,-1),kv=Sv.slice(0,-1),W4e=kv.slice(0,-1),E4e=[Pr,sr],a8=[Pr,li],zce=[Pr],Wy=[[Zv,1,vv],[Zv,5,5*vv],[Zv,15,15*vv],[Zv,30,30*vv],[Sv,1,xv],[Sv,5,5*xv],[Sv,15,15*xv],[Sv,30,30*xv],[kv,1,wv],[kv,3,3*wv],[kv,6,6*wv],[kv,12,12*wv],[W4e,1,U3],[E4e,1,I4e],[a8,1,o8],[a8,3,3*o8],[zce,1,MY]];function Pce(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(W5(t))/n;let i=w5(s=>s[2]).right(Wy,r),o,a;return i===Wy.length?(o=zce,a=Td(t[0]/MY,t[1]/MY,n)):i?(i=Wy[r/Wy[i-1][2]<Wy[i][2]/r?i-1:i],o=i[0],a=i[1]):(o=Oce,a=Math.max(Td(t[0],t[1],n),1)),{units:o,step:a}}function _v(e){const t={};return n=>t[n]||(t[n]=e(n))}function X4e(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=L4e(r,i);const a=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+a}}function L4e(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function jce(e){const t=_v(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Dp(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return X4e(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,a){a=Dp(a!=null?a:",f");const s=Td(r,i,o),l=Math.max(Math.abs(r),Math.abs(i));let u;if(a.precision==null)switch(a.type){case"s":return isNaN(u=pue(s,l))||(a.precision=u),n(a,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=hue(s,l))||(a.precision=u-(a.type==="e"));break}case"f":case"%":{isNaN(u=fue(s))||(a.precision=u-(a.type==="%")*2);break}}return t(a)}}}let OY;Hce();function Hce(){return OY=jce({format:G5,formatPrefix:iz})}function Jce(e){return jce(due(e))}function NG(e){return arguments.length?OY=Jce(e):OY}function s8(e,t,n){n=n||{},Le(n)||le("Invalid time multi-format specifier: ".concat(n));const r=t(ka),i=t(Po),o=t(zo),a=t(co),s=t(sr),l=t(li),u=t(uo),c=t(Pr),d=e(n[_s]||".%L"),f=e(n[ka]||":%S"),h=e(n[Po]||"%I:%M"),m=e(n[zo]||"%I %p"),g=e(n[co]||n[ni]||"%a %d"),y=e(n[sr]||"%b %d"),v=e(n[li]||"%B"),w=e(n[uo]||"%B"),Z=e(n[Pr]||"%Y");return k=>(r(k)<k?d:i(k)<k?f:o(k)<k?h:a(k)<k?m:l(k)<k?s(k)<k?g:y:c(k)<k?u(k)<k?v:w:Z)(k)}function Bce(e){const t=_v(e.format),n=_v(e.utcFormat);return{timeFormat:r=>We(r)?t(r):s8(t,mb,r),utcFormat:r=>We(r)?n(r):s8(n,gb,r),timeParse:_v(e.parse),utcParse:_v(e.utcParse)}}let zY;Kce();function Kce(){return zY=Bce({format:j3,parse:Xue,utcFormat:dz,utcParse:Lue})}function Dce(e){return Bce(_ue(e))}function cw(e){return arguments.length?zY=Dce(e):zY}const PY=(e,t)=>ct({},e,t);function Ace(e,t){const n=e?Jce(e):NG(),r=t?Dce(t):cw();return PY(n,r)}function Vz(e,t){const n=arguments.length;return n&&n!==2&&le("defaultLocale expects either zero or two arguments."),n?PY(NG(e),cw(t)):PY(NG(),cw())}function R4e(){return Hce(),Kce(),Vz()}const C4e=/^(data:|([A-Za-z]+:)?\/\/)/,V4e=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Y4e=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,l8="file://";function T4e(e,t){return n=>({options:n||{},sanitize:F4e,load:N4e,fileAccess:!1,file:M4e(t),http:z4e(e)})}async function N4e(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function F4e(e,t){t=ct({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,a;const s=V4e.test(e.replace(Y4e,""));(e==null||typeof e!="string"||!s)&&le("Sanitize failure, invalid URI: "+ke(e));const l=C4e.test(e);return(a=t.baseURL)&&!l&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),o=(i=e.startsWith(l8))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(l8.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function M4e(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):O4e}async function O4e(){le("No file system access.")}function z4e(e){return e?async function(t,n){const r=ct({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?dt(o[i])?o[i]():o.text():le(o.status+""+o.statusText)}:P4e}async function P4e(){le("No HTTP fetch method available.")}const j4e=e=>e!=null&&e===e,H4e=e=>e==="true"||e==="false"||e===!0||e===!1,J4e=e=>!Number.isNaN(Date.parse(e)),Uce=e=>!Number.isNaN(+e)&&!(e instanceof Date),B4e=e=>Uce(e)&&Number.isInteger(+e),jY={boolean:Wz,integer:ri,number:ri,date:Ez,string:Xz,unknown:pi},HS=[H4e,B4e,Uce,J4e],K4e=["boolean","integer","number","date"];function $ce(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=HS.length,i=HS.map((o,a)=>a+1);for(let o=0,a=0,s,l;o<n;++o)for(l=t?e[o][t]:e[o],s=0;s<r;++s)if(i[s]&&j4e(l)&&!HS[s](l)&&(i[s]=0,++a,a===HS.length))return"string";return K4e[i.reduce((o,a)=>o===0?a:o,0)-1]}function Qce(e,t){return t.reduce((n,r)=>(n[r]=$ce(e,r),n),{})}function u8(e){const t=function(n,r){const i={delimiter:e};return Yz(n,r?ct(r,i):i)};return t.responseType="text",t}function Yz(e,t){return t.header&&(e=t.header.map(ke).join(t.delimiter)+`
`+e),g4e(t.delimiter).parse(e+"")}Yz.responseType="text";function D4e(e){return typeof Buffer=="function"&&dt(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function Tz(e,t){const n=t&&t.property?lo(t.property):pi;return Le(e)&&!D4e(e)?A4e(n(e),t):n(JSON.parse(e))}Tz.responseType="json";function A4e(e,t){return!ce(e)&&gce(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const U4e={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function qce(e,t){let n,r,i,o;return e=Tz(e,t),t&&t.feature?(n=g3,i=t.feature):t&&t.mesh?(n=HCe,i=t.mesh,o=U4e[t.filter]):le("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):le("Invalid TopoJSON object: "+i),r&&r.features||[r]}qce.responseType="json";const H_={dsv:Yz,csv:u8(","),tsv:u8("	"),json:Tz,topojson:qce};function Nz(e,t){return arguments.length>1?(H_[e]=t,this):ze(H_,e)?H_[e]:null}function ede(e){const t=Nz(e);return t&&t.responseType||"text"}function tde(e,t,n,r){t=t||{};const i=Nz(t.type||"json");return i||le("Unknown data format type: "+t.type),e=i(e,t),t.parse&&$4e(e,t.parse,n,r),ze(e,"columns")&&delete e.columns,e}function $4e(e,t,n,r){if(!e.length)return;const i=cw();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),a,s,l,u,c,d;t==="auto"&&(t=Qce(e,o)),o=Object.keys(t);const f=o.map(h=>{const m=t[h];let g,y;if(m&&(m.startsWith("date:")||m.startsWith("utc:")))return g=m.split(/:(.+)?/,2),y=g[1],(y[0]==="'"&&y[y.length-1]==="'"||y[0]==='"'&&y[y.length-1]==='"')&&(y=y.slice(1,-1)),(g[0]==="utc"?r:n)(y);if(!jY[m])throw Error("Illegal format pattern: "+h+":"+m);return jY[m]});for(l=0,c=e.length,d=o.length;l<c;++l)for(a=e[l],u=0;u<d;++u)s=o[u],a[s]=f[u](a[s])}const $3=T4e(typeof fetch<"u"&&fetch,null);function Q3(e){const t=e||pi,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const a=n.indexOf(i);a>=0&&n.splice(a,1)}return n},n}async function J_(e,t){try{await t(e)}catch(n){e.error(n)}}const nde=Symbol("vega_id");let Q4e=1;function q3(e){return!!(e&&He(e))}function He(e){return e[nde]}function rde(e,t){return e[nde]=t,e}function Nt(e){const t=e===Object(e)?e:{data:e};return He(t)?t:rde(t,Q4e++)}function Fz(e){return e1(e,Nt({}))}function e1(e,t){for(const n in e)t[n]=e[n];return t}function ide(e,t){return rde(t,He(e))}function _h(e,t){return e?t?(n,r)=>e(n,r)||He(t(n))-He(t(r)):(n,r)=>e(n,r)||He(n)-He(r):null}function ode(e){return e&&e.constructor===Gh}function Gh(){const e=[],t=[],n=[],r=[],i=[];let o=null,a=!1;return{constructor:Gh,insert(s){const l=Ee(s),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(s){const l=dt(s)?r:t,u=Ee(s),c=u.length;for(let d=0;d<c;++d)l.push(u[d]);return this},modify(s,l,u){const c={field:l,value:hi(u)};return dt(s)?(c.filter=s,i.push(c)):(c.tuple=s,n.push(c)),this},encode(s,l){return dt(s)?i.push({filter:s,field:l}):n.push({tuple:s,field:l}),this},clean(s){return o=s,this},reflow(){return a=!0,this},pulse(s,l){const u={},c={};let d,f,h,m,g,y;for(d=0,f=l.length;d<f;++d)u[He(l[d])]=1;for(d=0,f=t.length;d<f;++d)g=t[d],u[He(g)]=-1;for(d=0,f=r.length;d<f;++d)m=r[d],l.forEach(w=>{m(w)&&(u[He(w)]=-1)});for(d=0,f=e.length;d<f;++d)g=e[d],y=He(g),u[y]?u[y]=1:s.add.push(Nt(e[d]));for(d=0,f=l.length;d<f;++d)g=l[d],u[He(g)]<0&&s.rem.push(g);function v(w,Z,k){k?w[Z]=k(w):s.encode=Z,a||(c[He(w)]=w)}for(d=0,f=n.length;d<f;++d)h=n[d],g=h.tuple,m=h.field,y=u[He(g)],y>0&&(v(g,m,h.value),s.modifies(m));for(d=0,f=i.length;d<f;++d)h=i[d],m=h.filter,l.forEach(w=>{m(w)&&u[He(w)]>0&&v(w,h.field,h.value)}),s.modifies(h.field);if(a)s.mod=t.length||r.length?l.filter(w=>u[He(w)]>0):l.slice();else for(y in c)s.mod.push(c[y]);return(o||o==null&&(t.length||r.length))&&s.clean(!0),s}}}const B_="_:mod:_";function t1(){Object.defineProperty(this,B_,{writable:!0,value:{}})}t1.prototype={set(e,t,n,r){const i=this,o=i[e],a=i[B_];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||r)&&(i[e]=n,a[e]=ce(n)?1+n.length:-1),i},modified(e,t){const n=this[B_];if(arguments.length){if(ce(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[B_]={},this}};let q4e=0;const eHe="pulse",tHe=new t1,nHe=1,rHe=2;function qt(e,t,n,r){this.id=++q4e,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function c8(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}qt.prototype={targets(){return this._targets||(this._targets=Q3(I5))},set(e){return this.value!==e?(this.value=e,1):0},skip:c8(nHe),modified:c8(rHe),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new t1,i=this._argops=this._argops||[],o=[];let a,s,l,u;const c=(d,f,h)=>{h instanceof qt?(h!==this&&(t&&h.targets().add(this),o.push(h)),i.push({op:h,name:d,index:f})):r.set(d,f,h)};for(a in e)if(s=e[a],a===eHe)Ee(s).forEach(d=>{d instanceof qt?d!==this&&(d.targets().add(this),o.push(d)):le("Pulse parameters must be operator instances.")}),this.source=s;else if(ce(s))for(r.set(a,-1,Array(l=s.length)),u=0;u<l;++u)c(a,u,s[u]);else c(a,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||tHe,n=this._argops;let r,i,o,a;if(n){const s=n.length;for(i=0;i<s;++i)r=n[i],o=r.op,a=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,a);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function iHe(e,t,n,r){let i=1,o;return e instanceof qt?o=e:e&&e.prototype instanceof qt?o=new e:dt(e)?o=new qt(null,e):(i=0,o=new qt(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function oHe(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let aHe=0;function n1(e,t,n){this.id=++aHe,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Yc(e,t,n){return new n1(e,t,n)}n1.prototype={_filter:Sa,_apply:pi,targets(){return this._targets||(this._targets=Q3(I5))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Yc(e);return this.targets().add(t),t},apply(e){const t=Yc(null,e);return this.targets().add(t),t},merge(){const e=Yc();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Yc();return this.targets().add(Yc(null,null,Gz(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Yc(null,null,()=>n=!0)),t.targets().add(Yc(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Sa,this._targets=null}};function sHe(e,t,n,r){const i=this,o=Yc(n,r),a=function(u){u.dataflow=i;try{o.receive(u)}catch(c){i.error(c)}finally{i.run()}};let s;typeof e=="string"&&typeof document<"u"?s=document.querySelectorAll(e):s=Ee(e);const l=s.length;for(let u=0;u<l;++u)s[u].addEventListener(t,a);return o}function lHe(e,t){const n=this.locale();return tde(e,t,n.timeParse,n.utcParse)}function uHe(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function cHe(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:ede(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function dHe(e,t,n){const r=this,i=r._pending||fHe(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(Sa).insert(o.data||[])),i.done(),o}function fHe(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const pHe={skip:!0};function hHe(e,t,n,r,i){return(e instanceof qt?gHe:mHe)(this,e,t,n,r,i),this}function mHe(e,t,n,r,i,o){const a=ct({},o,pHe);let s,l;dt(n)||(n=hi(n)),r===void 0?s=u=>e.touch(n(u)):dt(r)?(l=new qt(null,r,i,!1),s=u=>{l.evaluate(u);const c=n(u),d=l.value;ode(d)?e.pulse(c,d,o):e.update(c,d,a)}):s=u=>e.update(n(u),r,a),t.apply(s)}function gHe(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const a=o||{},s=new qt(null,bHe(n,r),i,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}function bHe(e,t){return t=dt(t)?t:hi(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function yHe(e){e.rank=++this._rank}function vHe(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&le("Cycle detected in dataflow graph.")}const FG={},il=1,Oc=2,Zu=4,xHe=il|Oc,d8=il|Zu,um=il|Oc|Zu,f8=8,Ey=16,p8=32,h8=64;function kd(e,t,n){this.dataflow=e,this.stamp=t!=null?t:-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function sR(e,t){const n=[];return Mc(e,t,r=>n.push(r)),n}function m8(e,t){const n={};return e.visit(t,r=>{n[He(r)]=1}),r=>n[He(r)]?null:r}function JS(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}kd.prototype={StopPropagation:FG,ADD:il,REM:Oc,MOD:Zu,ADD_REM:xHe,ADD_MOD:d8,ALL:um,REFLOW:f8,SOURCE:Ey,NO_SOURCE:p8,NO_FIELDS:h8,fork(e){return new kd(this.dataflow).init(this,e)},clone(){const e=this.fork(um);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(um|Ey)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new kd(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&h8)&&(n.fields=e.fields),t&il?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Oc?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Zu?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&p8?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||um;return t&il&&this.add.length||t&Oc&&this.rem.length||t&Zu&&this.mod.length},reflow(e){if(e)return this.fork(um).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Zu,m8(this,il))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return ce(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?ce(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&il&&(n.addF=JS(n.addF,t)),e&Oc&&(n.remF=JS(n.remF,t)),e&Zu&&(n.modF=JS(n.modF,t)),e&Ey&&(n.srcF=JS(n.srcF,t)),n},materialize(e){e=e||um;const t=this;return e&il&&t.addF&&(t.add=sR(t.add,t.addF),t.addF=null),e&Oc&&t.remF&&(t.rem=sR(t.rem,t.remF),t.remF=null),e&Zu&&t.modF&&(t.mod=sR(t.mod,t.modF),t.modF=null),e&Ey&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&Ey)return Mc(n.source,n.srcF,r),n;e&il&&Mc(n.add,n.addF,r),e&Oc&&Mc(n.rem,n.remF,r),e&Zu&&Mc(n.mod,n.modF,r);const i=n.source;if(e&f8&&i){const o=n.add.length+n.mod.length;o===i.length||(o?Mc(i,m8(n,d8),r):Mc(i,n.srcF,r))}return n}};function Mz(e,t,n,r){const i=this,o=n.length;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(let s=0;s<o;++s){const l=n[s];if(l.stamp===t){if(l.fields){const u=i.fields||(i.fields={});for(const c in l.fields)u[c]=1}l.changed(i.ADD)&&(a|=i.ADD),l.changed(i.REM)&&(a|=i.REM),l.changed(i.MOD)&&(a|=i.MOD)}}this.changes=a}Se(Mz,kd,{fork(e){const t=new kd(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ce(e)?e.some(r=>n[r]):n[e]:0},filter(){le("MultiPulse does not support filtering.")},materialize(){le("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function wHe(e,t,n){const r=this,i=[];if(r._pulse)return ade(r);if(r._pending&&await r._pending,t&&await J_(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new kd(r,o,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=Q3(I5);let a=0,s,l,u;try{for(;r._heap.size()>0;){if(s=r._heap.pop(),s.rank!==s.qrank){r._enqueue(s,!0);continue}l=s.run(r._getPulse(s,e)),l.then?l=await l:l.async&&(i.push(l.async),l=FG),l!==FG&&s._targets&&s._targets.forEach(c=>r._enqueue(c)),++a}}catch(c){r._heap.clear(),u=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${a} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const c=r._postrun.sort((d,f)=>f.priority-d.priority);r._postrun=[];for(let d=0;d<c.length;++d)await J_(r,c[d].callback)}return n&&await J_(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(d=>{try{d(r)}catch(f){r.error(f)}})})),r}async function ZHe(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function SHe(e,t,n){return this._pulse?ade(this):(this.evaluate(e,t,n),this)}function kHe(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function ade(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function _He(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function GHe(e,t){const n=e.source,r=this._clock;return n&&ce(n)?new Mz(this,r,n.map(i=>i.pulse),t):this._input[e.id]||IHe(this._pulse,n&&n.pulse)}function IHe(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==FG&&(e.source=t.source),e)}const Oz={skip:!1,force:!1};function WHe(e,t){const n=t||Oz;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function EHe(e,t,n){const r=n||Oz;return(e.set(t)||r.force)&&this.touch(e,r),this}function XHe(e,t,n){this.touch(e,n||Oz);const r=new kd(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function LHe(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),sde(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,RHe(t,0,e)):r=n,r}}}function sde(e,t,n,r){let i,o;const a=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(a,i)<0){e[n]=i,n=o;continue}break}return e[n]=a}function RHe(e,t,n){const r=t,i=e.length,o=e[t];let a=(t<<1)+1,s;for(;a<i;)s=a+1,s<i&&n(e[a],e[s])>=0&&(a=s),e[t]=e[a],t=a,a=(t<<1)+1;return e[t]=o,sde(e,r,t,n)}function G0(){this.logger(wz()),this.logLevel(vz),this._clock=0,this._rank=0,this._locale=Vz();try{this._loader=$3()}catch(e){}this._touched=Q3(I5),this._input={},this._pulse=null,this._heap=LHe((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Xy(e){return function(){return this._log[e].apply(this,arguments)}}G0.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Xy("error"),warn:Xy("warn"),info:Xy("info"),debug:Xy("debug"),logLevel:Xy("level"),cleanThreshold:1e4,add:iHe,connect:oHe,rank:yHe,rerank:vHe,pulse:XHe,touch:WHe,update:EHe,changeset:Gh,ingest:uHe,parse:lHe,preload:dHe,request:cHe,events:sHe,on:hHe,evaluate:wHe,run:SHe,runAsync:ZHe,runAfter:kHe,_enqueue:_He,_getPulse:GHe};function ae(e,t){qt.call(this,e,null,t)}Se(ae,qt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const hg={};function lde(e){const t=ude(e);return t&&t.Definition||null}function ude(e){return e=e&&e.toLowerCase(),ze(hg,e)?hg[e]:null}function*cde(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function zz(e,t,n){const r=Float64Array.from(cde(e,n));return r.sort(ju),t.map(i=>Rle(r,i))}function Pz(e,t){return zz(e,[.25,.5,.75],t)}function jz(e,t){const n=e.length,r=YOe(e,t),i=Pz(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function dde(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],a=e.extent[1],s,l,u,c,d,f;const h=e.span||a-o||Math.abs(o)||1;if(e.step)s=e.step;else if(e.steps){for(c=h/t,d=0,f=e.steps.length;d<f&&e.steps[d]<c;++d);s=e.steps[Math.max(0,d-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,s=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/s)>t;)s*=n;for(d=0,f=i.length;d<f;++d)c=s/i[d],c>=u&&h/c<=t&&(s=c)}c=Math.log(s);const m=c>=0?0:~~(-c/r)+1,g=Math.pow(n,-m-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/s+g)*s,o=o<c?c-s:c,a=Math.ceil(a/s)*s),{start:o,stop:a===o?o+s:a,step:s}}var _a=Math.random;function CHe(e){_a=e}function fde(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(cde(e,r)),o=i.length,a=t;let s,l,u,c;for(u=0,c=Array(a);u<a;++u){for(s=0,l=0;l<o;++l)s+=i[~~(_a()*o)];c[u]=s/o}return c.sort(ju),[yY(c,n/2),yY(c,1-n/2)]}function pde(e,t,n,r){r=r||(f=>f);const i=e.length,o=new Float64Array(i);let a=0,s=1,l=r(e[0]),u=l,c=l+t,d;for(;s<i;++s){if(d=r(e[s]),d>=c){for(u=(l+u)/2;a<s;++a)o[a]=u;c=d+t,l=d}u=d}for(u=(l+u)/2;a<s;++a)o[a]=u;return n?VHe(o,t+t/4):o}function VHe(e,t){const n=e.length;let r=0,i=1,o,a;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(a=i+(r+o-i-i>>1);a<i;)e[a++]=e[i];for(;a>i;)e[a--]=e[r]}r=i,i=o}return e}function YHe(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function THe(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(a){return arguments.length?(n=a||0,i=r-n,o):n},max(a){return arguments.length?(r=a||0,i=r-n,o):r},sample(){return n+Math.floor(i*_a())},pdf(a){return a===Math.floor(a)&&a>=n&&a<r?1/i:0},cdf(a){const s=Math.floor(a);return s<n?0:s>=r?1:(s-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return o.min(e).max(t)}const hde=Math.sqrt(2*Math.PI),NHe=Math.SQRT2;let Ly=NaN;function r1(e,t){e=e||0,t=t!=null?t:1;let n=0,r=0,i,o;if(Ly===Ly)n=Ly,Ly=NaN;else{do n=_a()*2-1,r=_a()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,Ly=r*o}return e+n*t}function Hz(e,t,n){n=n!=null?n:1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*hde)}function i1(e,t,n){t=t||0,n=n!=null?n:1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const a=Math.exp(-i*i/2);let s;i<7.07106781186547?(s=.0352624965998911*i+.700383064443688,s=s*i+6.37396220353165,s=s*i+33.912866078383,s=s*i+112.079291497871,s=s*i+221.213596169931,s=s*i+220.206867912376,o=a*s,s=.0883883476483184*i+1.75566716318264,s=s*i+16.064177579207,s=s*i+86.7807322029461,s=s*i+296.564248779674,s=s*i+637.333633378831,s=s*i+793.826512519948,s=s*i+440.413735824752,o=o/s):(s=i+.65,s=i+4/s,s=i+3/s,s=i+2/s,s=i+1/s,o=a/s/2.506628274631)}return r>0?1-o:o}function o1(e,t,n){return e<0||e>1?NaN:(t||0)+(n!=null?n:1)*NHe*FHe(2*e-1)}function FHe(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Jz(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o!=null?o:1,i):r},sample:()=>r1(n,r),pdf:o=>Hz(o,n,r),cdf:o=>i1(o,n,r),icdf:o=>o1(o,n,r)};return i.mean(e).stdev(t)}function Bz(e,t){const n=Jz();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=jz(e)),i):t},sample(){return e[~~(_a()*r)]+t*n.sample()},pdf(o){let a=0,s=0;for(;s<r;++s)a+=n.pdf((o-e[s])/t);return a/t/r},cdf(o){let a=0,s=0;for(;s<r;++s)a+=n.cdf((o-e[s])/t);return a/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Kz(e,t){return e=e||0,t=t!=null?t:1,Math.exp(e+r1()*t)}function Dz(e,t,n){if(e<=0)return 0;t=t||0,n=n!=null?n:1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*hde*e)}function Az(e,t,n){return i1(Math.log(e),t,n)}function Uz(e,t,n){return Math.exp(o1(e,t,n))}function mde(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o!=null?o:1,i):r},sample:()=>Kz(n,r),pdf:o=>Dz(o,n,r),cdf:o=>Az(o,n,r),icdf:o=>Uz(o,n,r)};return i.mean(e).stdev(t)}function gde(e,t){let n=0,r;function i(a){const s=[];let l=0,u;for(u=0;u<n;++u)l+=s[u]=a[u]==null?1:+a[u];for(u=0;u<n;++u)s[u]/=l;return s}const o={weights(a){return arguments.length?(r=i(t=a||[]),o):t},distributions(a){return arguments.length?(a?(n=a.length,e=a):(n=0,e=[]),o.weights(t)):e},sample(){const a=_a();let s=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(a<l){s=e[u];break}return s.sample()},pdf(a){let s=0,l=0;for(;l<n;++l)s+=r[l]*e[l].pdf(a);return s},cdf(a){let s=0,l=0;for(;l<n;++l)s+=r[l]*e[l].cdf(a);return s},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function $z(e,t){return t==null&&(t=e!=null?e:1,e=0),e+(t-e)*_a()}function Qz(e,t,n){return n==null&&(n=t!=null?t:1,t=0),e>=t&&e<=n?1/(n-t):0}function qz(e,t,n){return n==null&&(n=t!=null?t:1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function eP(e,t,n){return n==null&&(n=t!=null?t:1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function bde(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o!=null?o:1,i):r},sample:()=>$z(n,r),pdf:o=>Qz(o,n,r),cdf:o=>qz(o,n,r),icdf:o=>eP(o,n,r)};return t==null&&(t=e!=null?e:1,e=0),i.min(e).max(t)}function E5(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function a1(e,t,n,r){e=e.filter(h=>{let m=t(h),g=n(h);return m!=null&&(m=+m)>=m&&g!=null&&(g=+g)>=g}),r&&e.sort((h,m)=>t(h)-t(m));const i=e.length,o=new Float64Array(i),a=new Float64Array(i);let s=0,l=0,u=0,c,d,f;for(f of e)o[s]=c=+t(f),a[s]=d=+n(f),++s,l+=(c-l)/s,u+=(d-u)/s;for(s=0;s<i;++s)o[s]-=l,a[s]-=u;return[o,a,l,u]}function X5(e,t,n,r){let i=-1,o,a;for(const s of e)o=t(s),a=n(s),o!=null&&(o=+o)>=o&&a!=null&&(a=+a)>=a&&r(o,a,++i)}function bb(e,t,n,r,i){let o=0,a=0;return X5(e,t,n,(s,l)=>{const u=l-i(s),c=l-r;o+=u*u,a+=c*c}),1-o/a}function tP(e,t,n){let r=0,i=0,o=0,a=0,s=0;X5(e,t,n,(c,d)=>{++s,r+=(c-r)/s,i+=(d-i)/s,o+=(c*d-o)/s,a+=(c*c-a)/s});const l=E5(r,i,o,a),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:bb(e,t,n,i,u)}}function yde(e,t,n){let r=0,i=0,o=0,a=0,s=0;X5(e,t,n,(c,d)=>{++s,c=Math.log(c),r+=(c-r)/s,i+=(d-i)/s,o+=(c*d-o)/s,a+=(c*c-a)/s});const l=E5(r,i,o,a),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:bb(e,t,n,i,u)}}function vde(e,t,n){const[r,i,o,a]=a1(e,t,n);let s=0,l=0,u=0,c=0,d=0,f,h,m;X5(e,t,n,(w,Z)=>{f=r[d++],h=Math.log(Z),m=f*Z,s+=(Z*h-s)/d,l+=(m-l)/d,u+=(m*h-u)/d,c+=(f*m-c)/d});const[g,y]=E5(l/a,s/a,u/a,c/a),v=w=>Math.exp(g+y*(w-o));return{coef:[Math.exp(g-y*o),y],predict:v,rSquared:bb(e,t,n,a,v)}}function xde(e,t,n){let r=0,i=0,o=0,a=0,s=0,l=0;X5(e,t,n,(d,f)=>{const h=Math.log(d),m=Math.log(f);++l,r+=(h-r)/l,i+=(m-i)/l,o+=(h*m-o)/l,a+=(h*h-a)/l,s+=(f-s)/l});const u=E5(r,i,o,a),c=d=>u[0]*Math.pow(d,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:bb(e,t,n,s,c)}}function nP(e,t,n){const[r,i,o,a]=a1(e,t,n),s=r.length;let l=0,u=0,c=0,d=0,f=0,h,m,g,y;for(h=0;h<s;)m=r[h],g=i[h++],y=m*m,l+=(y-l)/h,u+=(y*m-u)/h,c+=(y*y-c)/h,d+=(m*g-d)/h,f+=(y*g-f)/h;const v=c-l*l,w=l*v-u*u,Z=(f*l-d*u)/w,k=(d*v-f*u)/w,_=-Z*l,R=I=>(I=I-o,Z*I*I+k*I+_+a);return{coef:[_-k*o+Z*o*o+a,k-2*Z*o,Z],predict:R,rSquared:bb(e,t,n,a,R)}}function wde(e,t,n,r){if(r===1)return tP(e,t,n);if(r===2)return nP(e,t,n);const[i,o,a,s]=a1(e,t,n),l=i.length,u=[],c=[],d=r+1;let f,h,m,g,y;for(f=0;f<d;++f){for(m=0,g=0;m<l;++m)g+=Math.pow(i[m],f)*o[m];for(u.push(g),y=new Float64Array(d),h=0;h<d;++h){for(m=0,g=0;m<l;++m)g+=Math.pow(i[m],f+h);y[h]=g}c.push(y)}c.push(u);const v=OHe(c),w=Z=>{Z-=a;let k=s+v[0]+v[1]*Z+v[2]*Z*Z;for(f=3;f<d;++f)k+=v[f]*Math.pow(Z,f);return k};return{coef:MHe(d,v,-a,s),predict:w,rSquared:bb(e,t,n,s,w)}}function MHe(e,t,n,r){const i=Array(e);let o,a,s,l;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],l=1,i[o]+=s,a=1;a<=o;++a)l*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*l;return i[0]+=r,i}function OHe(e){const t=e.length-1,n=[];let r,i,o,a,s;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(o=r;o<t+1;++o)s=e[o][r],e[o][r]=e[o][a],e[o][a]=s;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,o=i+1;o<t;++o)s+=e[o][i]*n[o];n[i]=(e[t][i]-s)/e[i][i]}return n}const g8=2,b8=1e-12;function Zde(e,t,n,r){const[i,o,a,s]=a1(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),d=new Float64Array(l),f=new Float64Array(l).fill(1);for(let h=-1;++h<=g8;){const m=[0,u-1];for(let y=0;y<l;++y){const v=i[y],w=m[0],Z=m[1],k=v-i[w]>i[Z]-v?w:Z;let _=0,R=0,I=0,E=0,X=0;const Y=1/Math.abs(i[k]-v||1);for(let V=w;V<=Z;++V){const F=i[V],O=o[V],P=zHe(Math.abs(v-F)*Y)*f[V],H=F*P;_+=P,R+=H,I+=O*P,E+=O*H,X+=F*H}const[C,N]=E5(R/_,I/_,E/_,X/_);c[y]=C+N*v,d[y]=Math.abs(o[y]-c[y]),PHe(i,y+1,m)}if(h===g8)break;const g=Cle(d);if(Math.abs(g)<b8)break;for(let y=0,v,w;y<l;++y)v=d[y]/(6*g),f[y]=v>=1?b8:(w=1-v*v)*w}return jHe(i,c,a,s)}function zHe(e){return(e=1-e*e*e)*e*e}function PHe(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function jHe(e,t,n,r){const i=e.length,o=[];let a=0,s=0,l=[],u;for(;a<i;++a)u=e[a]+n,l[0]===u?l[1]+=(t[a]-l[1])/++s:(s=0,l[1]+=r,l=[u,t[a]],o.push(l));return l[1]+=r,o}const HHe=.5*Math.PI/180;function s1(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,e(g)],o=t[0],a=t[1],s=a-o,l=s/r,u=[i(o)],c=[];if(n===r){for(let g=1;g<r;++g)u.push(i(o+g/n*s));return u.push(i(a)),u}else{c.push(i(a));for(let g=n;--g>0;)c.push(i(o+g/n*s))}let d=u[0],f=c[c.length-1];const h=1/s,m=JHe(d[1],c);for(;f;){const g=i((d[0]+f[0])/2);g[0]-d[0]>=l&&BHe(d,g,f,h,m)>HHe?c.push(g):(d=f,u.push(f),c.pop()),f=c[c.length-1]}return u}function JHe(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const a=t[o][1];a<n&&(n=a),a>r&&(r=a)}return 1/(r-n)}function BHe(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),a=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-a)}function KHe(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function HY(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:KHe(e)}function Sde(e,t,n){return n||e+(t?"_"+t:"")}const lR=()=>{},DHe={init:lR,add:lR,rem:lR,idx:0},dw={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},L5=Object.keys(dw);function AHe(e,t){return n=>ct({name:e,out:n||e},DHe,t)}L5.forEach(e=>{dw[e]=AHe(e,dw[e])});function kde(e,t){return dw[e](t)}function _de(e,t){return e.idx-t.idx}function UHe(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=dw[i]())})};return e.forEach(n),Object.values(t).sort(_de)}function $He(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.init(this))}function QHe(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function qHe(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function eJe(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function Gde(e,t){const n=t||pi,r=UHe(e),i=e.slice().sort(_de);function o(a){this._ops=r,this._out=i,this.cell=a,this.init()}return o.prototype.init=$He,o.prototype.add=QHe,o.prototype.rem=qHe,o.prototype.set=eJe,o.prototype.get=n,o.fields=e.map(a=>a.out),o}function rP(e){this._key=e?lo(e):He,this.reset()}const Jr=rP.prototype;Jr.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Jr.add=function(e){this._add.push(e)};Jr.rem=function(e){this._rem.push(e)};Jr.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),a={};let s,l,u;for(s=0;s<i;++s)a[n(t[s])]=1;for(s=0,l=0;s<r;++s)a[n(u=e[s])]?a[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o};Jr.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",ze(n,o)||(n[o]=1,++i);return i};Jr.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=hce(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Jr.argmin=function(e){return this.extent(e)[0]||{}};Jr.argmax=function(e){return this.extent(e)[1]||{}};Jr.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Jr.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Jr.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Pz(this.values(),e),this._get=e),this._q};Jr.q1=function(e){return this.quartile(e)[0]};Jr.q2=function(e){return this.quartile(e)[1]};Jr.q3=function(e){return this.quartile(e)[2]};Jr.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=fde(this.values(),1e3,.05,e),this._get=e),this._ci};Jr.ci0=function(e){return this.ci(e)[0]};Jr.ci1=function(e){return this.ci(e)[1]};function Fd(e){ae.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Fd.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:L5},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Se(Fd,ae,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(s){let l,u,c,d;for(l in s)for(c=s[l].tuple,u=0;u<i;++u)r[u][d=c[n[u]]]=d}o(e._prev),o(t);function a(s,l,u){const c=n[u],d=r[u++];for(const f in d){const h=s?s+"|"+f:f;l[c]=d[f],u<i?a(h,l,u):t[h]||e.cell(h,l)}}a("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(y){const v=Ee(si(y)),w=v.length;let Z=0,k;for(;Z<w;++Z)r[k=v[Z]]||(r[k]=1,t.push(k))}this._dims=Ee(e.groupby),this._dnames=this._dims.map(y=>{const v=On(y);return i(y),n.push(v),v}),this.cellkey=e.key?e.key:HY(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],a=e.ops||["count"],s=e.as||[],l=o.length,u={};let c,d,f,h,m,g;for(l!==a.length&&le("Unmatched number of fields and aggregate ops."),g=0;g<l;++g){if(c=o[g],d=a[g],c==null&&d!=="count"&&le("Null aggregate field specified."),h=On(c),m=Sde(d,h,s[g]),n.push(m),d==="count"){this._counts.push(m);continue}f=u[h],f||(i(c),f=u[h]=[],f.field=c,this._measures.push(f)),d!=="count"&&(this._countOnly=!1),f.push(kde(d,m))}return this._measures=this._measures.map(y=>Gde(y,y.field)),{}},cellkey:HY(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new rP),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let a=0;a<i;++a)o[n[a]]=r[a](e);return t?ide(t.tuple,o):Nt(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,a=e.rem,s=e.mod;let l,u,c,d;if(r)for(u in r)l=r[u],(!i||l.num)&&a.push(l.tuple);for(c=0,d=this._alen;c<d;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,d=this._mlen;c<d;++c)l=n[c],(l.num===0&&i?a:s).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const tJe=1e-14;function iP(e){ae.call(this,null,e)}iP.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Se(iP,ae,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,a=e.as||["bin0","bin1"],s=a[0],l=a[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(si(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const d=r(c);c[s]=d,c[l]=d==null?null:i+o*(1+(d-i)/o)}:c=>c[s]=r(c)),t.modifies(n?a:s)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=dde(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,a,s;(a=e.anchor)!=null&&(s=a-(i+r*Math.floor((a-i)/r)),i+=s,o+=s);const l=function(u){let c=ri(t(u));return c==null?null:c<i?-1/0:c>o?1/0:(c=Math.max(i,Math.min(c,o-r)),i+r*Math.floor(tJe+(c-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=bo(l,si(t),e.name||"bin_"+On(t))}});function Ide(e,t,n){const r=e;let i=t||[],o=n||[],a={},s=0;return{add:l=>o.push(l),remove:l=>a[r(l)]=++s,size:()=>i.length,data:(l,u)=>(s&&(i=i.filter(c=>!a[r(c)]),a={},s=0),u&&l&&i.sort(l),o.length&&(i=l?xce(l,i,o.sort(l)):i.concat(o),o=[]),i)}}function oP(e){ae.call(this,[],e)}oP.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Se(oP,ae,{transform(e,t){const n=t.fork(t.ALL),r=Ide(He,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(_h(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function Wde(e){qt.call(this,null,nJe,e)}Se(Wde,qt);function nJe(e){return this.value&&!e.modified()?this.value:_z(e.fields,e.orders)}function aP(e){ae.call(this,null,e)}aP.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function rJe(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Se(aP,ae,{transform(e,t){const n=d=>f=>{for(var h=rJe(s(f),e.case,o)||[],m,g=0,y=h.length;g<y;++g)a.test(m=h[g])||d(m)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,a=this._stop,s=e.field,l=e.as||["text","count"],u=n(d=>i[d]=1+(i[d]||0)),c=n(d=>i[d]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS);let s,l,u;for(s in n)l=r[s],u=n[s]||0,!l&&u?(r[s]=l=Nt({}),l[i]=s,l[o]=u,a.add.push(l)):u===0?(l&&a.rem.push(l),n[s]=null,r[s]=null):l[o]!==u&&(l[o]=u,a.mod.push(l));return a.modifies(t)}});function sP(e){ae.call(this,null,e)}sP.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Se(sP,ae,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=iJe(s,i,o,e.filter||Sa)):n.mod=s,n.source=this.value,n.modifies(r)}});function iJe(e,t,n,r){for(var i=[],o={},a=e.length,s=0,l,u;s<a;++s)for(o[t]=u=e[s],l=0;l<a;++l)o[n]=e[l],r(o)&&(i.push(Nt(o)),o={},o[t]=u);return i}const y8={kde:Bz,mixture:gde,normal:Jz,lognormal:mde,uniform:bde},oJe="distributions",v8="function",aJe="field";function Ede(e,t){const n=e[v8];ze(y8,n)||le("Unknown distribution function: "+n);const r=y8[n]();for(const i in e)i===aJe?r.data((e.from||t()).map(e[i])):i===oJe?r[i](e[i].map(o=>Ede(o,t))):typeof r[i]===v8&&r[i](e[i]);return r}function lP(e){ae.call(this,null,e)}const Xde=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],sJe={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Xde},{name:"weights",type:"number",array:!0}]};lP.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Xde.concat(sJe)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Se(lP,ae,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=Ede(e.distribution,lJe(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let a=e.method||"pdf";a!=="pdf"&&a!=="cdf"&&le("Invalid density method: "+a),!e.extent&&!r.data&&le("Missing density extent parameter."),a=r[a];const s=e.as||["value","density"],l=e.extent||zl(r.data()),u=s1(a,l,i,o).map(c=>{const d={};return d[s[0]]=c[0],d[s[1]]=c[1],Nt(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function lJe(e){return()=>e.materialize(e.SOURCE).source}function Lde(e,t){return e?e.map((n,r)=>t[r]||On(n)):null}function uP(e,t,n){const r=[],i=d=>d(l);let o,a,s,l,u,c;if(t==null)r.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)l=e[a],u=t.map(i),c=o[u],c||(o[u]=c=[],c.dims=u,r.push(c)),c.push(n(l));return r}const Rde="bin";function cP(e){ae.call(this,null,e)}cP.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:Rde}]};const uJe=(e,t)=>W5(zl(e,t))/30;Se(cP,ae,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=uP(t.source,e.groupby,pi),i=e.smooth||!1,o=e.field,a=e.step||uJe(n,o),s=_h((m,g)=>o(m)-o(g)),l=e.as||Rde,u=r.length;let c=1/0,d=-1/0,f=0,h;for(;f<u;++f){const m=r[f].sort(s);h=-1;for(const g of pde(m,a,i,o))g<c&&(c=g),g>d&&(d=g),m[++h][l]=g}return this.value={start:c,stop:d,step:a},t.reflow(!0).modifies(l)}});function Cde(e){qt.call(this,null,cJe,e),this.modified(!0)}Se(Cde,qt);function cJe(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:bo(n=>t(n,e),si(t),On(t))}function dP(e){ae.call(this,[void 0,void 0],e)}dP.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Se(dP,ae,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],a=n[1];if((i||o==null)&&(o=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,s=>{const l=ri(r(s));l!=null&&(l<o&&(o=l),l>a&&(a=l))}),!Number.isFinite(o)||!Number.isFinite(a)){let s=On(r);s&&(s=' for field "'.concat(s,'"')),t.dataflow.warn("Infinite extent".concat(s,": [").concat(o,", ").concat(a,"]")),o=a=void 0}this.value=[o,a]}});function fP(e,t){qt.call(this,e),this.parent=t,this.count=0}Se(fP,qt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function l1(e){ae.call(this,{},e),this._keys=hb();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Se(l1,ae,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=ze(i,e)&&i[e],a,s;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(s=r||(s=this._group[e])&&s.tuple,a=n.dataflow,o=new fP(n.fork(n.NO_SOURCE),this),a.add(o).connect(t(a,e,s)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,a=e.modified("key"),s=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=He(l),c=o.get(u);c!==void 0&&(o.delete(u),s(c).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);o.set(He(l),u),s(u).add(l)}),a||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=He(l),c=o.get(u),d=r(l);c===d?s(d).mod(l):(o.set(u,d),s(c).rem(l),s(d).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{s(o.get(He(l))).mod(l)}),a&&t.visit(t.REFLOW,l=>{const u=He(l),c=o.get(u),d=r(l);c!==d&&(o.set(u,d),s(c).rem(l),s(d).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function Vde(e){qt.call(this,null,dJe,e)}Se(Vde,qt);function dJe(e){return this.value&&!e.modified()?this.value:ce(e.name)?Ee(e.name).map(t=>lo(t)):lo(e.name,e.as)}function pP(e){ae.call(this,hb(),e)}pP.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Se(pP,ae,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,a=i.rem,s=i.mod,l=e.expr;let u=!0;t.visit(t.REM,d=>{const f=He(d);r.has(f)?r.delete(f):a.push(d)}),t.visit(t.ADD,d=>{l(d,e)?o.push(d):r.set(He(d),1)});function c(d){const f=He(d),h=l(d,e),m=r.get(f);h&&m?(r.delete(f),o.push(d)):!h&&!m?(r.set(f,1),a.push(d)):u&&h&&!m&&s.push(d)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function hP(e){ae.call(this,[],e)}hP.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Se(hP,ae,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=Lde(r,e.as||[]),o=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,s=>{const l=r.map(m=>m(s)),u=l.reduce((m,g)=>Math.max(m,g.length),0);let c=0,d,f,h;for(;c<u;++c){for(f=Fz(s),d=0;d<a;++d)f[i[d]]=(h=l[d][c])==null?null:h;o&&(f[o]=c),n.add.push(f)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function mP(e){ae.call(this,[],e)}mP.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Se(mP,ae,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(On),o=e.as||["key","value"],a=o[0],s=o[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,d;c<l;++c)d=Fz(u),d[a]=i[c],d[s]=r[c](u),n.add.push(d)}),this.value=n.source=n.add,n.modifies(o)}});function gP(e){ae.call(this,null,e)}gP.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Se(gP,ae,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,a=>a[r]=n(a,e))}});function Yde(e){ae.call(this,[],e)}Se(Yde,ae,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,a,s,l;if(o>0){for(a=[];--o>=0;)a.push(l=Nt(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else s=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(s):s,i=i.slice(-o);return n.source=this.value=i,n}});const BS={value:"value",median:Cle,mean:zOe,min:bY,max:_p},fJe=[];function bP(e){ae.call(this,[],e)}bP.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function pJe(e){var t=e.method||BS.value,n;if(BS[t]==null)le("Unrecognized imputation method: "+t);else return t===BS.value?(n=e.value!==void 0?e.value:0,()=>n):BS[t]}function hJe(e){const t=e.field;return n=>n?t(n):NaN}Se(bP,ae,{transform(e,t){var n=t.fork(t.ALL),r=pJe(e),i=hJe(e),o=On(e.field),a=On(e.key),s=(e.groupby||[]).map(On),l=mJe(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,d=l.domain.length,f,h,m,g,y,v,w,Z,k,_;for(y=0,Z=l.length;y<Z;++y)for(f=l[y],m=f.values,h=NaN,w=0;w<d;++w)if(f[w]==null){for(g=l.domain[w],_={_impute:!0},v=0,k=m.length;v<k;++v)_[s[v]]=m[v];_[a]=g,_[o]=Number.isNaN(h)?h=r(f,i):h,u.push(Nt(_))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function mJe(e,t,n,r){var i=v=>v(y),o=[],a=r?r.slice():[],s={},l={},u,c,d,f,h,m,g,y;for(a.forEach((v,w)=>s[v]=w+1),f=0,g=e.length;f<g;++f)y=e[f],m=n(y),h=s[m]||(s[m]=a.push(m)),c=(u=t?t.map(i):fJe)+"",(d=l[c])||(d=l[c]=[],o.push(d),d.values=u),d[h-1]=y;return o.domain=a,o}function yP(e){Fd.call(this,e)}yP.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:L5},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Se(yP,Fd,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{ct(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function vP(e){ae.call(this,null,e)}vP.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Se(vP,ae,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=uP(r,e.groupby,e.field),o=(e.groupby||[]).map(On),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,d=e.steps||e.minsteps||25,f=e.steps||e.maxsteps||200;s!=="pdf"&&s!=="cdf"&&le("Invalid density method: "+s),e.resolve==="shared"&&(c||(c=zl(r,e.field)),d=f=e.steps||f),i.forEach(h=>{const m=Bz(h,a)[s],g=e.counts?h.length:1,y=c||zl(h);s1(m,y,d,f).forEach(v=>{const w={};for(let Z=0;Z<o.length;++Z)w[o[Z]]=h.dims[Z];w[l[0]]=v[0],w[l[1]]=v[1]*g,u.push(Nt(w))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function Tde(e){qt.call(this,null,gJe,e)}Se(Tde,qt);function gJe(e){return this.value&&!e.modified()?this.value:Iz(e.fields,e.flat)}function Nde(e){ae.call(this,[],e),this._pending=null}Se(Nde,ae,{transform(e,t){const n=t.dataflow;return this._pending?uR(this,t,this._pending):bJe(e)?t.StopPropagation:e.values?uR(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=Ee(r.data),i=>i.touch(this)))}:n.request(e.url,e.format).then(r=>uR(this,t,Ee(r.data)))}});function bJe(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function uR(e,t,n){n.forEach(Nt);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function xP(e){ae.call(this,{},e)}xP.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Se(xP,ae,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,a=e.modified(),s=n.length;let l=a?t.SOURCE:t.ADD,u=t,c=e.as,d,f,h;return i?(f=i.length,s>1&&!c&&le('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==s*f&&le('The "as" parameter has too few output field names.'),c=c||i.map(On),d=function(m){for(var g=0,y=0,v,w;g<s;++g)if(w=r.get(n[g](m)),w==null)for(v=0;v<f;++v,++y)m[c[y]]=o;else for(v=0;v<f;++v,++y)m[c[y]]=i[v](w)}):(c||le("Missing output field names."),d=function(m){for(var g=0,y;g<s;++g)y=r.get(n[g](m)),m[c[g]]=y!=null?y:o}),a?u=t.reflow(!0):(h=n.some(m=>t.modified(m.fields)),l|=h?t.MOD:0),t.visit(l,d),u.modifies(c)}});function Fde(e){qt.call(this,null,yJe,e)}Se(Fde,qt);function yJe(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,a;for(o=0;o<n;++o)a=t[o],a[0]<r&&(r=a[0]),a[1]>i&&(i=a[1]);return[r,i]}function Mde(e){qt.call(this,null,vJe,e)}Se(Mde,qt);function vJe(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function Ode(e){ae.call(this,null,e)}Se(Ode,ae,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function wP(e){Fd.call(this,e)}wP.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:L5,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Se(wP,Fd,{_transform:Fd.prototype.transform,transform(e,t){return this._transform(xJe(e,t),t)}});function xJe(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=si(n).concat(si(r)),a=ZJe(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:a.map(()=>i),fields:a.map(s=>wJe(s,n,r,o)),as:a.map(s=>s+""),modified:e.modified.bind(e)}}function wJe(e,t,n,r){return bo(i=>t(i)===e?n(i):NaN,r,e+"")}function ZJe(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const a=e(o);r[a]||(r[a]=1,i.push(a))}),i.sort(A3),t?i.slice(0,t):i}function zde(e){l1.call(this,e)}Se(zde,l1,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(He(o),n,t,o);return(e.modified("field")||r&&t.modified(si(r)))&&le("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const a=i(o);r(o).forEach(s=>a.mod(s))}),t.visit(t.ADD,o=>{const a=i(o);r(o).forEach(s=>a.add(Nt(s)))}),t.visit(t.REM,o=>{const a=i(o);r(o).forEach(s=>a.rem(s))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function ZP(e){ae.call(this,null,e)}ZP.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Se(ZP,ae,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=Lde(e.fields,e.as||[]),o=r?(s,l)=>SJe(s,l,r,i):e1;let a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,s=>{const l=He(s);n.rem.push(a[l]),a[l]=null}),t.visit(t.ADD,s=>{const l=o(s,Nt({}));a[He(s)]=l,n.add.push(l)}),t.visit(t.MOD,s=>{n.mod.push(o(s,a[He(s)]))}),n}});function SJe(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function Pde(e){ae.call(this,null,e)}Se(Pde,ae,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function SP(e){ae.call(this,null,e)}SP.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const kJe=1e-14;Se(SP,ae,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=uP(i,e.groupby,e.field),a=(e.groupby||[]).map(On),s=[],l=e.step||.01,u=e.probs||Eo(l/2,1-kJe,l),c=u.length;return o.forEach(d=>{const f=zz(d,u);for(let h=0;h<c;++h){const m={};for(let g=0;g<a.length;++g)m[a[g]]=d.dims[g];m[r[0]]=u[h],m[r[1]]=f[h],s.push(Nt(m))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n}});function jde(e){ae.call(this,null,e)}Se(jde,ae,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=He(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=Fz(i);r[He(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[He(i)];for(const a in i)o[a]=i[a],n.modifies(a);n.mod.push(o)})),n}});function kP(e){ae.call(this,[],e),this.count=0}kP.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Se(kP,ae,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((c,d)=>(c[He(d)]=1,c),{});let a=this.value,s=this.count,l=0;function u(c){let d,f;a.length<i?a.push(c):(f=~~((s+1)*_a()),f<a.length&&f>=l&&(d=a[f],o[He(d)]&&n.rem.push(d),a[f]=c)),++s}if(t.rem.length&&(t.visit(t.REM,c=>{const d=He(c);o[d]&&(o[d]=-1,n.rem.push(c)),--s}),a=a.filter(c=>o[He(c)]!==-1)),(t.rem.length||r)&&a.length<i&&t.source&&(l=s=a.length,t.visit(t.SOURCE,c=>{o[He(c)]||u(c)}),l=-1),r&&a.length>i){const c=a.length-i;for(let d=0;d<c;++d)o[He(a[d])]=-1,n.rem.push(a[d]);a=a.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[He(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=a.filter(c=>!o[He(c)])),this.count=s,this.value=n.source=a,n}});function _P(e){ae.call(this,null,e)}_P.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Se(_P,ae,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Eo(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,Nt(o)}),n.add=t.add.concat(this.value),n}});function Hde(e){ae.call(this,null,e),this.modified(!0)}Se(Hde,ae,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function GP(e){ae.call(this,null,e)}const Jde=["unit0","unit1"];GP.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Lz,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Jde}]};Se(GP,ae,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),a=(i?gb:mb)(o.unit).offset,s=e.as||Jde,l=s[0],u=s[1],c=o.step;let d=o.start||1/0,f=o.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(si(n)))&&(t=t.reflow(!0),h=t.SOURCE,d=1/0,f=-1/0),t.visit(h,m=>{const g=n(m);let y,v;g==null?(m[l]=null,r&&(m[u]=null)):(m[l]=y=v=o(g),r&&(m[u]=v=a(y,c)),y<d&&(d=y),v>f&&(f=v))}),o.start=d,o.stop=f,t.modifies(r?s:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:Pce({extent:e.extent||zl(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=Rz(r),a=this.value||{},s=(n?Cce:Rce)(o,i);return s.unit=Zt(o),s.units=o,s.step=i,s.start=a.start,s.stop=a.stop,this.value=s}});function Bde(e){ae.call(this,hb(),e)}Se(Bde,ae,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=s=>i.set(r(s),s);let a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,s=>i.delete(r(s))),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function Kde(e){ae.call(this,null,e)}Se(Kde,ae,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(_h(e.sort)):t.source).map(e.field))}});function _Je(e,t,n,r){const i=fw[e](t,n);return{init:i.init||Bc,update:function(o,a){a[r]=i.next(o)}}}const fw={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=fw.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||le("ntile num must be greater than zero.");const n=fw.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||le("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=GJe(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function GJe(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const IJe=Object.keys(fw);function Dde(e){const t=Ee(e.ops),n=Ee(e.fields),r=Ee(e.params),i=Ee(e.as),o=this.outputs=[],a=this.windows=[],s={},l={},u=[],c=[];let d=!0;function f(h){Ee(si(h)).forEach(m=>s[m]=1)}f(e.sort),t.forEach((h,m)=>{const g=n[m],y=On(g),v=Sde(h,y,i[m]);if(f(g),o.push(v),ze(fw,h))a.push(_Je(h,n[m],r[m],v));else{if(g==null&&h!=="count"&&le("Null aggregate field specified."),h==="count"){u.push(v);return}d=!1;let w=l[y];w||(w=l[y]=[],w.field=g,c.push(w)),w.push(kde(h,v))}}),(u.length||c.length)&&(this.cell=WJe(c,u,d)),this.inputs=Object.keys(s)}const Ade=Dde.prototype;Ade.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};Ade.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<o;++a)r[a].update(e,t)};function WJe(e,t,n){e=e.map(l=>Gde(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new e[a](r);if(r.store)var s=r.data=new rP;return r.add=function(l){if(r.num+=1,!n){s&&s.add(l);for(let u=0;u<i;++u)o[u].add(o[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){s&&s.rem(l);for(let u=0;u<i;++u)o[u].rem(o[u].get(l),l)}},r.set=function(l){let u,c;for(s&&s.values(),u=0,c=t.length;u<c;++u)l[t[u]]=r.num;if(!n)for(u=0,c=o.length;u<c;++u)o[u].set(l)},r.init=function(){r.num=0,s&&s.reset();for(let l=0;l<i;++l)o[l].init()},r}function IP(e){ae.call(this,{},e),this._mlen=0,this._mods=[]}IP.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:IJe.concat(L5)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Se(IP,ae,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=_h(e.sort),i=HY(e.groupby),o=s=>this.group(i(s));let a=this.state;(!a||n)&&(a=this.state=new Dde(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,s=>o(s).add(s))):(t.visit(t.REM,s=>o(s).remove(s)),t.visit(t.ADD,s=>o(s).add(s)));for(let s=0,l=this._mlen;s<l;++s)EJe(this._mods[s],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=Ide(He),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function EJe(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=e.data(n),l=s.length,u=o?w5(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||hi(-1)};t.init();for(let d=0;d<l;++d)XJe(c,a,d,l),o&&LJe(c,u),t.update(c,s[d])}function XJe(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function LJe(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const RJe=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Fd,bin:iP,collect:oP,compare:Wde,countpattern:aP,cross:sP,density:lP,dotbin:cP,expression:Cde,extent:dP,facet:l1,field:Vde,filter:pP,flatten:hP,fold:mP,formula:gP,generate:Yde,impute:bP,joinaggregate:yP,kde:vP,key:Tde,load:Nde,lookup:xP,multiextent:Fde,multivalues:Mde,params:Ode,pivot:wP,prefacet:zde,project:ZP,proxy:Pde,quantile:SP,relay:jde,sample:kP,sequence:_P,sieve:Hde,subflow:fP,timeunit:GP,tupleindex:Bde,values:Kde,window:IP},Symbol.toStringTag,{value:"Module"}));function zt(e){return function(){return e}}const x8=Math.abs,Ur=Math.atan2,Nf=Math.cos,CJe=Math.max,cR=Math.min,Us=Math.sin,mp=Math.sqrt,Qr=1e-12,mg=Math.PI,MG=mg/2,Ude=2*mg;function VJe(e){return e>1?0:e<-1?mg:Math.acos(e)}function w8(e){return e>=1?MG:e<=-1?-MG:Math.asin(e)}const JY=Math.PI,BY=2*JY,qf=1e-6,YJe=BY-qf;function $de(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function TJe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return $de;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let WP=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?$de:TJe(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,i,o){this._append`C${+e},${+t},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(e,t,n,r,i){if(e=+e,t=+t,n=+n,r=+r,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,s=n-e,l=r-t,u=o-e,c=a-t,d=u*u+c*c;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(d>qf)if(!(Math.abs(c*s-l*u)>qf)||!i)this._append`L${this._x1=e},${this._y1=t}`;else{let f=n-o,h=r-a,m=s*s+l*l,g=f*f+h*h,y=Math.sqrt(m),v=Math.sqrt(d),w=i*Math.tan((JY-Math.acos((m+d-g)/(2*y*v)))/2),Z=w/v,k=w/y;Math.abs(Z-1)>qf&&this._append`L${e+Z*u},${t+Z*c}`,this._append`A${i},${i},0,0,${+(c*f>u*h)},${this._x1=e+k*s},${this._y1=t+k*l}`}}arc(e,t,n,r,i,o){if(e=+e,t=+t,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),s=n*Math.sin(r),l=e+a,u=t+s,c=1^o,d=o?r-i:i-r;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>qf||Math.abs(this._y1-u)>qf)&&this._append`L${l},${u}`,n&&(d<0&&(d=d%BY+BY),d>YJe?this._append`A${n},${n},0,1,${c},${e-a},${t-s}A${n},${n},0,1,${c},${this._x1=l},${this._y1=u}`:d>qf&&this._append`A${n},${n},0,${+(d>=JY)},${c},${this._x1=e+n*Math.cos(i)},${this._y1=t+n*Math.sin(i)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}};function u1(){return new WP}u1.prototype=WP.prototype;function c1(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new WP(t)}function NJe(e){return e.innerRadius}function FJe(e){return e.outerRadius}function MJe(e){return e.startAngle}function OJe(e){return e.endAngle}function zJe(e){return e&&e.padAngle}function PJe(e,t,n,r,i,o,a,s){var l=n-e,u=r-t,c=a-i,d=s-o,f=d*l-c*u;if(!(f*f<Qr))return f=(c*(t-o)-d*(e-i))/f,[e+f*l,t+f*u]}function KS(e,t,n,r,i,o,a){var s=e-n,l=t-r,u=(a?o:-o)/mp(s*s+l*l),c=u*l,d=-u*s,f=e+c,h=t+d,m=n+c,g=r+d,y=(f+m)/2,v=(h+g)/2,w=m-f,Z=g-h,k=w*w+Z*Z,_=i-o,R=f*g-m*h,I=(Z<0?-1:1)*mp(CJe(0,_*_*k-R*R)),E=(R*Z-w*I)/k,X=(-R*w-Z*I)/k,Y=(R*Z+w*I)/k,C=(-R*w+Z*I)/k,N=E-y,V=X-v,F=Y-y,O=C-v;return N*N+V*V>F*F+O*O&&(E=Y,X=C),{cx:E,cy:X,x01:-c,y01:-d,x11:E*(i/_-1),y11:X*(i/_-1)}}function jJe(){var e=NJe,t=FJe,n=zt(0),r=null,i=MJe,o=OJe,a=zJe,s=null,l=c1(u);function u(){var c,d,f=+e.apply(this,arguments),h=+t.apply(this,arguments),m=i.apply(this,arguments)-MG,g=o.apply(this,arguments)-MG,y=x8(g-m),v=g>m;if(s||(s=c=l()),h<f&&(d=h,h=f,f=d),!(h>Qr))s.moveTo(0,0);else if(y>Ude-Qr)s.moveTo(h*Nf(m),h*Us(m)),s.arc(0,0,h,m,g,!v),f>Qr&&(s.moveTo(f*Nf(g),f*Us(g)),s.arc(0,0,f,g,m,v));else{var w=m,Z=g,k=m,_=g,R=y,I=y,E=a.apply(this,arguments)/2,X=E>Qr&&(r?+r.apply(this,arguments):mp(f*f+h*h)),Y=cR(x8(h-f)/2,+n.apply(this,arguments)),C=Y,N=Y,V,F;if(X>Qr){var O=w8(X/f*Us(E)),P=w8(X/h*Us(E));(R-=O*2)>Qr?(O*=v?1:-1,k+=O,_-=O):(R=0,k=_=(m+g)/2),(I-=P*2)>Qr?(P*=v?1:-1,w+=P,Z-=P):(I=0,w=Z=(m+g)/2)}var H=h*Nf(w),M=h*Us(w),j=f*Nf(_),J=f*Us(_);if(Y>Qr){var q=h*Nf(Z),K=h*Us(Z),D=f*Nf(k),$=f*Us(k),Q;if(y<mg)if(Q=PJe(H,M,D,$,q,K,j,J)){var B=H-Q[0],pe=M-Q[1],re=q-Q[0],ee=K-Q[1],oe=1/Us(VJe((B*re+pe*ee)/(mp(B*B+pe*pe)*mp(re*re+ee*ee)))/2),ue=mp(Q[0]*Q[0]+Q[1]*Q[1]);C=cR(Y,(f-ue)/(oe-1)),N=cR(Y,(h-ue)/(oe+1))}else C=N=0}I>Qr?N>Qr?(V=KS(D,$,H,M,h,N,v),F=KS(q,K,j,J,h,N,v),s.moveTo(V.cx+V.x01,V.cy+V.y01),N<Y?s.arc(V.cx,V.cy,N,Ur(V.y01,V.x01),Ur(F.y01,F.x01),!v):(s.arc(V.cx,V.cy,N,Ur(V.y01,V.x01),Ur(V.y11,V.x11),!v),s.arc(0,0,h,Ur(V.cy+V.y11,V.cx+V.x11),Ur(F.cy+F.y11,F.cx+F.x11),!v),s.arc(F.cx,F.cy,N,Ur(F.y11,F.x11),Ur(F.y01,F.x01),!v))):(s.moveTo(H,M),s.arc(0,0,h,w,Z,!v)):s.moveTo(H,M),!(f>Qr)||!(R>Qr)?s.lineTo(j,J):C>Qr?(V=KS(j,J,q,K,f,-C,v),F=KS(H,M,D,$,f,-C,v),s.lineTo(V.cx+V.x01,V.cy+V.y01),C<Y?s.arc(V.cx,V.cy,C,Ur(V.y01,V.x01),Ur(F.y01,F.x01),!v):(s.arc(V.cx,V.cy,C,Ur(V.y01,V.x01),Ur(V.y11,V.x11),!v),s.arc(0,0,f,Ur(V.cy+V.y11,V.cx+V.x11),Ur(F.cy+F.y11,F.cx+F.x11),v),s.arc(F.cx,F.cy,C,Ur(F.y11,F.x11),Ur(F.y01,F.x01),!v))):s.arc(0,0,f,_,k,v)}if(s.closePath(),c)return s=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-mg/2;return[Nf(d)*c,Us(d)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:zt(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:zt(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:zt(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:zt(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:zt(+c),u):i},u.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:zt(+c),u):o},u.padAngle=function(c){return arguments.length?(a=typeof c=="function"?c:zt(+c),u):a},u.context=function(c){return arguments.length?(s=c!=null?c:null,u):s},u}function Qde(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qde(e){this._context=e}qde.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function EP(e){return new qde(e)}function efe(e){return e[0]}function tfe(e){return e[1]}function nfe(e,t){var n=zt(!0),r=null,i=EP,o=null,a=c1(s);e=typeof e=="function"?e:e===void 0?efe:zt(e),t=typeof t=="function"?t:t===void 0?tfe:zt(t);function s(l){var u,c=(l=Qde(l)).length,d,f=!1,h;for(r==null&&(o=i(h=a())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(d,u,l),+t(d,u,l));if(h)return o=null,h+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:zt(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:zt(+l),s):t},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:zt(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),s):r},s}function rfe(e,t,n){var r=null,i=zt(!0),o=null,a=EP,s=null,l=c1(u);e=typeof e=="function"?e:e===void 0?efe:zt(+e),t=typeof t=="function"?t:zt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?tfe:zt(+n);function u(d){var f,h,m,g=(d=Qde(d)).length,y,v=!1,w,Z=new Array(g),k=new Array(g);for(o==null&&(s=a(w=l())),f=0;f<=g;++f){if(!(f<g&&i(y=d[f],f,d))===v)if(v=!v)h=f,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),m=f-1;m>=h;--m)s.point(Z[m],k[m]);s.lineEnd(),s.areaEnd()}v&&(Z[f]=+e(y,f,d),k[f]=+t(y,f,d),s.point(r?+r(y,f,d):Z[f],n?+n(y,f,d):k[f]))}if(w)return s=null,w+""||null}function c(){return nfe().defined(i).curve(a).context(o)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:zt(+d),r=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:zt(+d),u):e},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:zt(+d),u):r},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:zt(+d),n=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:zt(+d),u):t},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:zt(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:zt(!!d),u):i},u.curve=function(d){return arguments.length?(a=d,o!=null&&(s=a(o)),u):a},u.context=function(d){return arguments.length?(d==null?o=s=null:s=a(o=d),u):o},u}const HJe={draw(e,t){const n=mp(t/mg);e.moveTo(n,0),e.arc(0,0,n,0,Ude)}};function JJe(e,t){let n=null,r=c1(i);e=typeof e=="function"?e:zt(e||HJe),t=typeof t=="function"?t:zt(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:zt(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:zt(+o),i):t},i.context=function(o){return arguments.length?(n=o!=null?o:null,i):n},i}function Md(){}function OG(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function d1(e){this._context=e}d1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:OG(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:OG(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function BJe(e){return new d1(e)}function ife(e){this._context=e}ife.prototype={areaStart:Md,areaEnd:Md,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:OG(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function KJe(e){return new ife(e)}function ofe(e){this._context=e}ofe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:OG(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function DJe(e){return new ofe(e)}function afe(e,t){this._basis=new d1(e),this._beta=t}afe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,a=t[n]-i,s=-1,l;++s<=n;)l=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(r+l*o),this._beta*t[s]+(1-this._beta)*(i+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const AJe=function e(t){function n(r){return t===1?new d1(r):new afe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function zG(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function XP(e,t){this._context=e,this._k=(1-t)/6}XP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:zG(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:zG(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const UJe=function e(t){function n(r){return new XP(r,t)}return n.tension=function(r){return e(+r)},n}(0);function LP(e,t){this._context=e,this._k=(1-t)/6}LP.prototype={areaStart:Md,areaEnd:Md,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:zG(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $Je=function e(t){function n(r){return new LP(r,t)}return n.tension=function(r){return e(+r)},n}(0);function RP(e,t){this._context=e,this._k=(1-t)/6}RP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:zG(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const QJe=function e(t){function n(r){return new RP(r,t)}return n.tension=function(r){return e(+r)},n}(0);function CP(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>Qr){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Qr){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function sfe(e,t){this._context=e,this._alpha=t}sfe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:CP(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qJe=function e(t){function n(r){return t?new sfe(r,t):new XP(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function lfe(e,t){this._context=e,this._alpha=t}lfe.prototype={areaStart:Md,areaEnd:Md,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:CP(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const eBe=function e(t){function n(r){return t?new lfe(r,t):new LP(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function ufe(e,t){this._context=e,this._alpha=t}ufe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:CP(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const tBe=function e(t){function n(r){return t?new ufe(r,t):new RP(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function cfe(e){this._context=e}cfe.prototype={areaStart:Md,areaEnd:Md,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function nBe(e){return new cfe(e)}function Z8(e){return e<0?-1:1}function S8(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Z8(o)+Z8(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function k8(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function dR(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function PG(e){this._context=e}PG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:dR(this,this._t0,k8(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,dR(this,k8(this,n=S8(this,e,t)),n);break;default:dR(this,this._t0,n=S8(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function dfe(e){this._context=new ffe(e)}(dfe.prototype=Object.create(PG.prototype)).point=function(e,t){PG.prototype.point.call(this,t,e)};function ffe(e){this._context=e}ffe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function rBe(e){return new PG(e)}function iBe(e){return new dfe(e)}function pfe(e){this._context=e}pfe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=_8(e),i=_8(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function _8(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function oBe(e){return new pfe(e)}function f1(e,t){this._context=e,this._t=t}f1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function aBe(e){return new f1(e,.5)}function sBe(e){return new f1(e,0)}function lBe(e){return new f1(e,1)}function _d(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const uBe=()=>typeof Image<"u"?Image:null;function VP(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const cBe="identity",gg="linear",ic="log",R5="pow",C5="sqrt",p1="symlog",Ap="time",Up="utc",El="sequential",yb="diverging",bg="quantile",h1="quantize",m1="threshold",YP="ordinal",KY="point",hfe="band",TP="bin-ordinal",pr="continuous",V5="discrete",Y5="discretizing",Va="interpolating",NP="temporal";function dBe(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function fBe(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,a,s,l,u;for(i<r&&(s=r,r=i,i=s),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(o<0&&(o=l),a=l);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function FP(){const e=V3().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,a=!1,s=0,l=0,u=.5;delete e.unknown;function c(){const d=t().length,f=r[1]<r[0],h=r[1-f],m=VP(d,s,l);let g=r[f-0];i=(h-g)/(m||1),a&&(i=Math.floor(i)),g+=(h-g-i*(d-s))*u,o=i*(1-s),a&&(g=Math.round(g),o=Math.round(o));const y=Eo(d).map(v=>g+i*v);return n(f?y.reverse():y)}return e.domain=function(d){return arguments.length?(t(d),c()):t()},e.range=function(d){return arguments.length?(r=[+d[0],+d[1]],c()):r.slice()},e.rangeRound=function(d){return r=[+d[0],+d[1]],a=!0,c()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(d){return arguments.length?(a=!!d,c()):a},e.padding=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),s=l,c()):s},e.paddingInner=function(d){return arguments.length?(s=Math.max(0,Math.min(1,d)),c()):s},e.paddingOuter=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),c()):l},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),c()):u},e.invertRange=function(d){if(d[0]==null||d[1]==null)return;const f=r[1]<r[0],h=f?n().reverse():n(),m=h.length-1;let g=+d[0],y=+d[1],v,w,Z;if(!(g!==g||y!==y)&&(y<g&&(Z=g,g=y,y=Z),!(y<h[0]||g>r[1-f])))return v=Math.max(0,wG(h,g)-1),w=g===y?v:wG(h,y)-1,g-h[v]>o+1e-10&&++v,f&&(Z=v,v=m-w,w=m-Z),v>w?void 0:t().slice(v,w+1)},e.invert=function(d){const f=e.invertRange([d,d]);return f&&f[0]},e.copy=function(){return FP().domain(t()).range(r).round(a).paddingInner(s).paddingOuter(l).align(u)},c()}function mfe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return mfe(t())},e}function pBe(){return mfe(FP().paddingInner(1))}var hBe=Array.prototype.map;function mBe(e){return hBe.call(e,ri)}const gBe=Array.prototype.slice;function gfe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Z5(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=mBe(r),n):e.slice()},n.range=function(r){return arguments.length?(t=gBe.call(r),n):t.slice()},n.tickFormat=function(r,i){return mue(e[0],Zt(e),r!=null?r:10,i)},n.copy=function(){return gfe().domain(n.domain()).range(n.range())},n}const jG={};function bBe(e,t,n){const r=function(){const i=t();return i.invertRange||(i.invertRange=i.invert?dBe(i):i.invertExtent?fBe(i):void 0),i.type=e,i};return r.metadata=ks(Ee(n)),r}function Vt(e,t,n){return arguments.length>1?(jG[e]=bBe(e,t,n),this):bfe(e)?jG[e]:void 0}Vt(cBe,gue);Vt(gg,oz,pr);Vt(ic,yue,[pr,ic]);Vt(R5,uz,pr);Vt(C5,Bze,pr);Vt(p1,vue,pr);Vt(Ap,sje,[pr,NP]);Vt(Up,lje,[pr,NP]);Vt(El,pz,[pr,Va]);Vt("".concat(El,"-").concat(gg),pz,[pr,Va]);Vt("".concat(El,"-").concat(ic),Rue,[pr,Va,ic]);Vt("".concat(El,"-").concat(R5),hz,[pr,Va]);Vt("".concat(El,"-").concat(C5),uje,[pr,Va]);Vt("".concat(El,"-").concat(p1),Cue,[pr,Va]);Vt("".concat(yb,"-").concat(gg),Vue,[pr,Va]);Vt("".concat(yb,"-").concat(ic),Yue,[pr,Va,ic]);Vt("".concat(yb,"-").concat(R5),mz,[pr,Va]);Vt("".concat(yb,"-").concat(C5),cje,[pr,Va]);Vt("".concat(yb,"-").concat(p1),Tue,[pr,Va]);Vt(bg,xue,[Y5,bg]);Vt(h1,wue,Y5);Vt(m1,Zue,Y5);Vt(TP,gfe,[V5,Y5]);Vt(YP,V3,V5);Vt(hfe,FP,V5);Vt(KY,pBe,V5);function bfe(e){return ze(jG,e)}function Ih(e,t){const n=jG[e];return n&&n.metadata[t]}function MP(e){return Ih(e,pr)}function yg(e){return Ih(e,V5)}function DY(e){return Ih(e,Y5)}function yfe(e){return Ih(e,ic)}function yBe(e){return Ih(e,NP)}function vfe(e){return Ih(e,Va)}function xfe(e){return Ih(e,bg)}const vBe=["clamp","base","constant","exponent"];function wfe(e,t){const n=t[0],r=Zt(t)-n;return function(i){return e(n+i*r)}}function g1(e,t,n){return nz(OP(t||"rgb",n),e)}function Zfe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function Sfe(e,t,n){const r=n-t;let i,o,a;return!r||!Number.isFinite(r)?hi(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),a=Vt(o)().domain([t,n]).range([0,1]),vBe.forEach(s=>e[s]?a[s](e[s]()):0),a)}function OP(e,t){const n=Ize[xBe(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function xBe(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const wBe={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},ZBe={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function kfe(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function _fe(e,t){for(const n in e)zP(n,t(e[n]))}const G8={};_fe(ZBe,kfe);_fe(wBe,e=>g1(kfe(e)));function zP(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(G8[e]=t,this):G8[e]}const K_="symbol",SBe="discrete",kBe="gradient",_Be=e=>ce(e)?e.map(t=>String(t)):String(e),GBe=(e,t)=>e[1]-t[1],IBe=(e,t)=>t[1]-e[1];function PP(e,t,n){let r;return At(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(W5(e.domain())/n||1)))),Le(t)&&(r=t.step,t=t.interval),We(t)&&(t=e.type===Ap?mb(t):e.type==Up?gb(t):le("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function Gfe(e,t,n){let r=e.range(),i=r[0],o=Zt(r),a=GBe;if(i>o&&(r=o,o=i,i=r,a=IBe),i=Math.floor(i),o=Math.ceil(o),t=t.map(s=>[s,e(s)]).filter(s=>i<=s[1]&&s[1]<=o).sort(a).map(s=>s[0]),n>0&&t.length>1){const s=[t[0],Zt(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=s)}return t}function jP(e,t){return e.bins?Gfe(e,e.bins):e.ticks?e.ticks(t):e.domain()}function Ife(e,t,n,r,i,o){const a=t.type;let s=_Be;if(a===Ap||i===Ap)s=e.timeFormat(r);else if(a===Up||i===Up)s=e.utcFormat(r);else if(yfe(a)){const l=e.formatFloat(r);if(o||t.bins)s=l;else{const u=Wfe(t,n,!1);s=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();s=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(s=e.format(r));return s}function Wfe(e,t,n){const r=jP(e,t),i=e.base(),o=Math.log(i),a=Math.max(1,i*t/r.length),s=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/o));return u*i<i-.5&&(u*=i),u<=a};return n?r.filter(s):s}const AY={[bg]:"quantiles",[h1]:"thresholds",[m1]:"domain"},Efe={[bg]:"quantiles",[h1]:"domain"};function Xfe(e,t){return e.bins?XBe(e.bins):e.type===ic?Wfe(e,t,!0):AY[e.type]?EBe(e[AY[e.type]]()):jP(e,t)}function WBe(e,t,n){const r=t[Efe[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],a;for(a=1;a<i;++a)o=Math.min(o,r[a]-r[a-1]);return e.formatSpan(0,o,3*10,n)}function EBe(e){const t=[-1/0].concat(e);return t.max=1/0,t}function XBe(e){const t=e.slice(0,-1);return t.max=Zt(e),t}const LBe=e=>AY[e.type]||e.bins;function Lfe(e,t,n,r,i,o,a){const s=Efe[t.type]&&o!==Ap&&o!==Up?WBe(e,t,i):Ife(e,t,n,i,o,a);return r===K_&&LBe(t)?RBe(s):r===SBe?CBe(s):VBe(s)}const RBe=e=>(t,n,r)=>{const i=I8(r[n+1],I8(r.max,1/0)),o=W8(t,e),a=W8(i,e);return o&&a?o+"  "+a:a?"< "+a:" "+o},I8=(e,t)=>e!=null?e:t,CBe=e=>(t,n)=>n?e(t):null,VBe=e=>t=>e(t),W8=(e,t)=>Number.isFinite(e)?t(e):null;function YBe(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Zt(t),o=i-r;if(e.type===m1){const a=n?o/n:.1;r-=a,i+=a,o=i-r}return a=>(a-r)/o}function TBe(e,t,n,r){const i=r||t.type;return We(n)&&yBe(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Ap?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Up?e.utcFormat("%A, %d %B %Y, %X UTC"):Lfe(e,t,5,null,n,r,!0)}function Rfe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=TBe(e,t,n.format,n.formatType);if(DY(t.type)){const o=Xfe(t).slice(1).map(i),a=o.length;return"".concat(a," boundar").concat(a===1?"y":"ies",": ").concat(o.join(", "))}else if(yg(t.type)){const o=t.domain(),a=o.length,s=a>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return"".concat(a," value").concat(a===1?"":"s",": ").concat(s)}else{const o=t.domain();return"values from ".concat(i(o[0])," to ").concat(i(Zt(o)))}}let Cfe=0;function NBe(){Cfe=0}const HG="p_";function HP(e){return e&&e.gradient}function Vfe(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?HG:"";return i||(i=e.id="gradient_"+Cfe++,r==="radial"?(e.x1=$s(e.x1,.5),e.y1=$s(e.y1,.5),e.r1=$s(e.r1,0),e.x2=$s(e.x2,.5),e.y2=$s(e.y2,.5),e.r2=$s(e.r2,.5),o=HG):(e.x1=$s(e.x1,0),e.y1=$s(e.y1,0),e.x2=$s(e.x2,1),e.y2=$s(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function $s(e,t){return e!=null?e:t}function Yfe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const E8={basis:{curve:BJe},"basis-closed":{curve:KJe},"basis-open":{curve:DJe},bundle:{curve:AJe,tension:"beta",value:.85},cardinal:{curve:UJe,tension:"tension",value:0},"cardinal-open":{curve:QJe,tension:"tension",value:0},"cardinal-closed":{curve:$Je,tension:"tension",value:0},"catmull-rom":{curve:qJe,tension:"alpha",value:.5},"catmull-rom-closed":{curve:eBe,tension:"alpha",value:.5},"catmull-rom-open":{curve:tBe,tension:"alpha",value:.5},linear:{curve:EP},"linear-closed":{curve:nBe},monotone:{horizontal:iBe,vertical:rBe},natural:{curve:oBe},step:{curve:aBe},"step-after":{curve:lBe},"step-before":{curve:sBe}};function JP(e,t,n){var r=ze(E8,e)&&E8[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const FBe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},MBe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,OBe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,zBe=/^((\s+,?\s*)|(,\s*))/,PBe=/^[01]/;function vg(e){const t=[];return(e.match(MBe)||[]).forEach(n=>{let r=n[0];const i=r.toLowerCase(),o=FBe[i],a=jBe(i,o,n.slice(1).trim()),s=a.length;if(s<o||s&&s%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...a.slice(0,o)]),s!==o){i==="m"&&(r=r==="M"?"L":"l");for(let l=o;l<s;l+=o)t.push([r,...a.slice(l,l+o)])}}),t}function jBe(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const a=e==="a"&&(o===3||o===4)?PBe:OBe,s=n.slice(i).match(a);if(s===null)throw Error("Invalid SVG path, incorrect parameter type");i+=s[0].length,r.push(+s[0]);const l=n.slice(i).match(zBe);l!==null&&(i+=l[0].length)}return r}const Od=Math.PI/180,HBe=1e-14,ip=Math.PI/2,ul=Math.PI*2,cm=Math.sqrt(3)/2;var fR={},pR={},Tfe=[].join;function JBe(e,t,n,r,i,o,a,s,l){const u=Tfe.call(arguments);if(fR[u])return fR[u];const c=a*Od,d=Math.sin(c),f=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=f*(s-e)*.5+d*(l-t)*.5,m=f*(l-t)*.5-d*(s-e)*.5;let g=h*h/(n*n)+m*m/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const y=f/n,v=d/n,w=-d/r,Z=f/r,k=y*s+v*l,_=w*s+Z*l,R=y*e+v*t,I=w*e+Z*t;let E=1/((R-k)*(R-k)+(I-_)*(I-_))-.25;E<0&&(E=0);let X=Math.sqrt(E);o==i&&(X=-X);const Y=.5*(k+R)-X*(I-_),C=.5*(_+I)+X*(R-k),N=Math.atan2(_-C,k-Y);let V=Math.atan2(I-C,R-Y)-N;V<0&&o===1?V+=ul:V>0&&o===0&&(V-=ul);const F=Math.ceil(Math.abs(V/(ip+.001))),O=[];for(let P=0;P<F;++P){const H=N+P*V/F,M=N+(P+1)*V/F;O[P]=[Y,C,H,M,n,r,d,f]}return fR[u]=O}function BBe(e){const t=Tfe.call(e);if(pR[t])return pR[t];var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7];const c=u*a,d=-l*s,f=l*a,h=u*s,m=Math.cos(i),g=Math.sin(i),y=Math.cos(o),v=Math.sin(o),w=.5*(o-i),Z=Math.sin(w*.5),k=8/3*Z*Z/Math.sin(w),_=n+m-k*g,R=r+g+k*m,I=n+y,E=r+v,X=I+k*v,Y=E-k*y;return pR[t]=[c*_+d*R,f*_+h*R,c*X+d*Y,f*X+h*Y,c*I+d*E,f*I+h*E]}const ea=["l",0,0,0,0,0,0,0];function KBe(e,t,n){const r=ea[0]=e[0];if(r==="a"||r==="A")ea[1]=t*e[1],ea[2]=n*e[2],ea[3]=e[3],ea[4]=e[4],ea[5]=e[5],ea[6]=t*e[6],ea[7]=n*e[7];else if(r==="h"||r==="H")ea[1]=t*e[1];else if(r==="v"||r==="V")ea[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)ea[i]=(i%2==1?t:n)*e[i];return ea}function pw(e,t,n,r,i,o){var a,s=null,l=0,u=0,c=0,d=0,f,h,m,g,y=0,v=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var w=0,Z=t.length;w<Z;++w){switch(a=t[w],(i!==1||o!==1)&&(a=KBe(a,i,o)),a[0]){case"l":l+=a[1],u+=a[2],e.lineTo(l+n,u+r);break;case"L":l=a[1],u=a[2],e.lineTo(l+n,u+r);break;case"h":l+=a[1],e.lineTo(l+n,u+r);break;case"H":l=a[1],e.lineTo(l+n,u+r);break;case"v":u+=a[1],e.lineTo(l+n,u+r);break;case"V":u=a[1],e.lineTo(l+n,u+r);break;case"m":l+=a[1],u+=a[2],y=l,v=u,e.moveTo(l+n,u+r);break;case"M":l=a[1],u=a[2],y=l,v=u,e.moveTo(l+n,u+r);break;case"c":f=l+a[5],h=u+a[6],c=l+a[3],d=u+a[4],e.bezierCurveTo(l+a[1]+n,u+a[2]+r,c+n,d+r,f+n,h+r),l=f,u=h;break;case"C":l=a[5],u=a[6],c=a[3],d=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,c+n,d+r,l+n,u+r);break;case"s":f=l+a[3],h=u+a[4],c=2*l-c,d=2*u-d,e.bezierCurveTo(c+n,d+r,l+a[1]+n,u+a[2]+r,f+n,h+r),c=l+a[1],d=u+a[2],l=f,u=h;break;case"S":f=a[3],h=a[4],c=2*l-c,d=2*u-d,e.bezierCurveTo(c+n,d+r,a[1]+n,a[2]+r,f+n,h+r),l=f,u=h,c=a[1],d=a[2];break;case"q":f=l+a[3],h=u+a[4],c=l+a[1],d=u+a[2],e.quadraticCurveTo(c+n,d+r,f+n,h+r),l=f,u=h;break;case"Q":f=a[3],h=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,f+n,h+r),l=f,u=h,c=a[1],d=a[2];break;case"t":f=l+a[1],h=u+a[2],s[0].match(/[QqTt]/)===null?(c=l,d=u):s[0]==="t"?(c=2*l-m,d=2*u-g):s[0]==="q"&&(c=2*l-c,d=2*u-d),m=c,g=d,e.quadraticCurveTo(c+n,d+r,f+n,h+r),l=f,u=h,c=l+a[1],d=u+a[2];break;case"T":f=a[1],h=a[2],c=2*l-c,d=2*u-d,e.quadraticCurveTo(c+n,d+r,f+n,h+r),l=f,u=h;break;case"a":X8(e,l+n,u+r,[a[1],a[2],a[3],a[4],a[5],a[6]+l+n,a[7]+u+r]),l+=a[6],u+=a[7];break;case"A":X8(e,l+n,u+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),l=a[6],u=a[7];break;case"z":case"Z":l=y,u=v,e.closePath();break}s=a}}function X8(e,t,n,r){const i=JBe(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const a=BBe(i[o]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}const L8=.5773502691896257,R8={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,ul)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=cm*n,i=r-n*L8,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=cm*n,i=r-n*L8;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=cm*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=cm*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=cm*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=cm*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function Nfe(e){return ze(R8,e)?R8[e]:DBe(e)}var hR={};function DBe(e){if(!ze(hR,e)){const t=vg(e);hR[e]={draw:function(n,r){pw(n,t,0,0,Math.sqrt(r)/2)}}}return hR[e]}const Rc=.448084975506;function ABe(e){return e.x}function UBe(e){return e.y}function $Be(e){return e.width}function QBe(e){return e.height}function gu(e){return typeof e=="function"?e:()=>+e}function DS(e,t,n){return Math.max(t,Math.min(e,n))}function Ffe(){var e=ABe,t=UBe,n=$Be,r=QBe,i=gu(0),o=i,a=i,s=i,l=null;function u(c,d,f){var h,m=d!=null?d:+e.call(this,c),g=f!=null?f:+t.call(this,c),y=+n.call(this,c),v=+r.call(this,c),w=Math.min(y,v)/2,Z=DS(+i.call(this,c),0,w),k=DS(+o.call(this,c),0,w),_=DS(+a.call(this,c),0,w),R=DS(+s.call(this,c),0,w);if(l||(l=h=u1()),Z<=0&&k<=0&&_<=0&&R<=0)l.rect(m,g,y,v);else{var I=m+y,E=g+v;l.moveTo(m+Z,g),l.lineTo(I-k,g),l.bezierCurveTo(I-Rc*k,g,I,g+Rc*k,I,g+k),l.lineTo(I,E-R),l.bezierCurveTo(I,E-Rc*R,I-Rc*R,E,I-R,E),l.lineTo(m+_,E),l.bezierCurveTo(m+Rc*_,E,m,E-Rc*_,m,E-_),l.lineTo(m,g+Z),l.bezierCurveTo(m,g+Rc*Z,m+Rc*Z,g,m+Z,g),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=gu(c),u):e},u.y=function(c){return arguments.length?(t=gu(c),u):t},u.width=function(c){return arguments.length?(n=gu(c),u):n},u.height=function(c){return arguments.length?(r=gu(c),u):r},u.cornerRadius=function(c,d,f,h){return arguments.length?(i=gu(c),o=d!=null?gu(d):i,s=f!=null?gu(f):i,a=h!=null?gu(h):o,u):i},u.context=function(c){return arguments.length?(l=c!=null?c:null,u):l},u}function Mfe(){var e,t,n,r,i=null,o,a,s,l;function u(d,f,h){const m=h/2;if(o){var g=s-f,y=d-a;if(g||y){var v=Math.sqrt(g*g+y*y),w=(g/=v)*l,Z=(y/=v)*l,k=Math.atan2(y,g);i.moveTo(a-w,s-Z),i.lineTo(d-g*m,f-y*m),i.arc(d,f,m,k-Math.PI,k),i.lineTo(a+w,s+Z),i.arc(a,s,l,k,k+Math.PI)}else i.arc(d,f,m,0,ul);i.closePath()}else o=1;a=d,s=f,l=m}function c(d){var f,h=d.length,m,g=!1,y;for(i==null&&(i=y=u1()),f=0;f<=h;++f)!(f<h&&r(m=d[f],f,d))===g&&(g=!g)&&(o=0),g&&u(+e(m,f,d),+t(m,f,d),+n(m,f,d));if(y)return i=null,y+""||null}return c.x=function(d){return arguments.length?(e=d,c):e},c.y=function(d){return arguments.length?(t=d,c):t},c.size=function(d){return arguments.length?(n=d,c):n},c.defined=function(d){return arguments.length?(r=d,c):r},c.context=function(d){return arguments.length?(d==null?i=null:i=d,c):i},c}function T5(e,t){return e!=null?e:t}const N5=e=>e.x||0,F5=e=>e.y||0,qBe=e=>e.width||0,eKe=e=>e.height||0,tKe=e=>(e.x||0)+(e.width||0),nKe=e=>(e.y||0)+(e.height||0),rKe=e=>e.startAngle||0,iKe=e=>e.endAngle||0,oKe=e=>e.padAngle||0,aKe=e=>e.innerRadius||0,sKe=e=>e.outerRadius||0,lKe=e=>e.cornerRadius||0,uKe=e=>T5(e.cornerRadiusTopLeft,e.cornerRadius)||0,cKe=e=>T5(e.cornerRadiusTopRight,e.cornerRadius)||0,dKe=e=>T5(e.cornerRadiusBottomRight,e.cornerRadius)||0,fKe=e=>T5(e.cornerRadiusBottomLeft,e.cornerRadius)||0,pKe=e=>T5(e.size,64),hKe=e=>e.size||1,b1=e=>e.defined!==!1,mKe=e=>Nfe(e.shape||"circle"),gKe=jJe().startAngle(rKe).endAngle(iKe).padAngle(oKe).innerRadius(aKe).outerRadius(sKe).cornerRadius(lKe),bKe=rfe().x(N5).y1(F5).y0(nKe).defined(b1),yKe=rfe().y(F5).x1(N5).x0(tKe).defined(b1),vKe=nfe().x(N5).y(F5).defined(b1),xKe=Ffe().x(N5).y(F5).width(qBe).height(eKe).cornerRadius(uKe,cKe,dKe,fKe),wKe=JJe().type(mKe).size(pKe),ZKe=Mfe().x(N5).y(F5).defined(b1).size(hKe);function BP(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function SKe(e,t){return gKe.context(e)(t)}function kKe(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?yKe:bKe).curve(JP(r,n.orient,n.tension)).context(e)(t)}function _Ke(e,t){const n=t[0],r=n.interpolate||"linear";return vKe.curve(JP(r,n.orient,n.tension)).context(e)(t)}function vb(e,t,n,r){return xKe.context(e)(t,n,r)}function GKe(e,t){return(t.mark.shape||t.shape).context(e)(t)}function IKe(e,t){return wKe.context(e)(t)}function WKe(e,t){return ZKe.context(e)(t)}var Ofe=1;function zfe(){Ofe=1}function KP(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+Ofe++),a=i.clipping[o]||(i.clipping[o]={id:o});return dt(r)?a.path=r(null):BP(n)?a.path=vb(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function tr(e){this.clear(),e&&this.union(e)}tr.prototype={clone(){return new tr(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(e),l=Math.sin(e),u=t-t*s+n*l,c=n-t*l-n*s;return[s*r-l*i+u,l*r+s*i+c,s*r-l*a+u,l*r+s*a+c,s*o-l*i+u,l*o+s*i+c,s*o-l*a+u,l*o+s*a+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function y1(e){this.mark=e,this.bounds=this.bounds||new tr}function v1(e){y1.call(this,e),this.items=this.items||[]}Se(v1,y1);function DP(e){this._pending=0,this._loader=e||$3()}function C8(e){e._pending+=1}function Ry(e){e._pending-=1}DP.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return C8(t),t._loader.sanitize(e,{context:"href"}).then(n=>(Ry(t),n)).catch(()=>(Ry(t),null))},loadImage(e){const t=this,n=uBe();return C8(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const o=new n,a=ze(r,"crossOrigin")?r.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>Ry(t),o.onerror=()=>Ry(t),o.src=i,o}).catch(r=>(Ry(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function fc(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?EKe(t,r):0))}return e}function EKe(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const XKe=ul-1e-8;let x1,D_,A_,gp,UY,U_,$Y,QY;const Qc=(e,t)=>x1.add(e,t),$_=(e,t)=>Qc(D_=e,A_=t),V8=e=>Qc(e,x1.y1),Y8=e=>Qc(x1.x1,e),op=(e,t)=>UY*e+$Y*t,ap=(e,t)=>U_*e+QY*t,mR=(e,t)=>Qc(op(e,t),ap(e,t)),gR=(e,t)=>$_(op(e,t),ap(e,t));function M5(e,t){return x1=e,t?(gp=t*Od,UY=QY=Math.cos(gp),U_=Math.sin(gp),$Y=-U_):(UY=QY=1,gp=U_=$Y=0),LKe}const LKe={beginPath(){},closePath(){},moveTo:gR,lineTo:gR,rect(e,t,n,r){gp?(mR(e+n,t),mR(e+n,t+r),mR(e,t+r),gR(e,t)):(Qc(e+n,t+r),$_(e,t))},quadraticCurveTo(e,t,n,r){const i=op(e,t),o=ap(e,t),a=op(n,r),s=ap(n,r);T8(D_,i,a,V8),T8(A_,o,s,Y8),$_(a,s)},bezierCurveTo(e,t,n,r,i,o){const a=op(e,t),s=ap(e,t),l=op(n,r),u=ap(n,r),c=op(i,o),d=ap(i,o);N8(D_,a,l,c,V8),N8(A_,s,u,d,Y8),$_(c,d)},arc(e,t,n,r,i,o){if(r+=gp,i+=gp,D_=n*Math.cos(i)+e,A_=n*Math.sin(i)+t,Math.abs(i-r)>XKe)Qc(e-n,t-n),Qc(e+n,t+n);else{const a=u=>Qc(n*Math.cos(u)+e,n*Math.sin(u)+t);let s,l;if(a(r),a(i),i!==r)if(r=r%ul,r<0&&(r+=ul),i=i%ul,i<0&&(i+=ul),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=ul,s=r-r%ip,l=0;l<4&&s>i;++l,s-=ip)a(s);else for(s=r-r%ip+ip,l=0;l<4&&s<i;++l,s=s+ip)a(s)}}};function T8(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function N8(e,t,n,r,i){const o=r-e+3*t-3*n,a=e+n-2*t,s=e-t;let l=0,u=0,c;Math.abs(o)>HBe?(c=a*a+s*o,c>=0&&(c=Math.sqrt(c),l=(-a+c)/o,u=(-a-c)/o)):l=.5*s/a,0<l&&l<1&&i(F8(l,e,t,n,r)),0<u&&u<1&&i(F8(u,e,t,n,r))}function F8(e,t,n,r,i){const o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*r+s*e*i}var Gd=(Gd=_d(1,1))?Gd.getContext("2d"):null;const qY=new tr;function AP(e){return function(t,n){if(!Gd)return!0;e(Gd,t),qY.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:a}=qY;for(let s=i;s<=a;++s)for(let l=r;l<=o;++l)if(Gd.isPointInPath(l,s))return!0;return!1}}function UP(e,t){return t.contains(e.x||0,e.y||0)}function Pfe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(qY.set(n,r,n+i,r+o))}function jfe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return u0(t,n,r,i,o)}function u0(e,t,n,r,i){const{x1:o,y1:a,x2:s,y2:l}=e,u=r-t,c=i-n;let d=0,f=1,h,m,g,y;for(y=0;y<4;++y){if(y===0&&(h=-u,m=-(o-t)),y===1&&(h=u,m=s-t),y===2&&(h=-c,m=-(a-n)),y===3&&(h=c,m=l-n),Math.abs(h)<1e-10&&m<0)return!1;if(g=m/h,h<0){if(g>f)return!1;g>d&&(d=g)}else if(h>0){if(g<d)return!1;g<f&&(f=g)}}return!0}function xg(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ja(e,t){return e!=null?e:t}function M8(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function RKe(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+ja(t.x1,.5)*r,n.y1+ja(t.y1,.5)*i,Math.max(r,i)*ja(t.r1,0),n.x1+ja(t.x2,.5)*r,n.y1+ja(t.y2,.5)*i,Math.max(r,i)*ja(t.r2,.5));else{const a=ja(t.x1,0),s=ja(t.y1,0),l=ja(t.x2,1),u=ja(t.y2,0);if(a===l||s===u||r===i)o=e.createLinearGradient(n.x1+a*r,n.y1+s*i,n.x1+l*r,n.y1+u*i);else{const c=_d(Math.ceil(r),Math.ceil(i)),d=c.getContext("2d");return d.scale(r,i),d.fillStyle=M8(d.createLinearGradient(a,s,l,u),t.stops),d.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return M8(o,t.stops)}function Hfe(e,t,n){return HP(n)?RKe(e,n,t.bounds):n}function JG(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=Hfe(e,t,t.fill),!0):!1}var CKe=[];function wg(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=Hfe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||CKe),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function VKe(e,t){return e.zindex-t.zindex||e.index-t.index}function $P(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(VKe)}function Gs(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=$P(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function BG(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=$P(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function QP(e){return function(t,n,r){Gs(n,i=>{(!r||r.intersects(i.bounds))&&Jfe(e,t,i,i)})}}function YKe(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&Jfe(e,t,n.items[0],n.items)}}function Jfe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(xg(t,n),n.fill&&JG(t,n,i)&&t.fill(),n.stroke&&wg(t,n,i)&&t.stroke()))}function w1(e){return e=e||Sa,function(t,n,r,i,o,a){return r*=t.pixelRatio,i*=t.pixelRatio,BG(n,s=>{const l=s.bounds;if(!(l&&!l.contains(o,a)||!l)&&e(t,s,r,i,o,a))return s})}}function O5(e,t){return function(n,r,i,o){var a=Array.isArray(r)?r[0]:r,s=t!=null?t:a.fill,l=a.stroke&&n.isPointInStroke,u,c;return l&&(u=a.strokeWidth,c=a.strokeCap,n.lineWidth=u!=null?u:1,n.lineCap=c!=null?c:"butt"),e(n,r)?!1:s&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o)}}function qP(e){return w1(O5(e))}function Ep(e,t){return"translate("+e+","+t+")"}function ej(e){return"rotate("+e+")"}function TKe(e,t){return"scale("+e+","+t+")"}function Bfe(e){return Ep(e.x||0,e.y||0)}function NKe(e){return Ep(e.x||0,e.y||0)+(e.angle?" "+ej(e.angle):"")}function FKe(e){return Ep(e.x||0,e.y||0)+(e.angle?" "+ej(e.angle):"")+(e.scaleX||e.scaleY?" "+TKe(e.scaleX||1,e.scaleY||1):"")}function tj(e,t,n){function r(a,s){a("transform",NKe(s)),a("d",t(null,s))}function i(a,s){return t(M5(a,s.angle),s),fc(a,s).translate(s.x||0,s.y||0)}function o(a,s){var l=s.x||0,u=s.y||0,c=s.angle||0;a.translate(l,u),c&&a.rotate(c*=Od),a.beginPath(),t(a,s),c&&a.rotate(-c),a.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:QP(o),pick:qP(o),isect:n||AP(o)}}var MKe=tj("arc",SKe);function OKe(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,a,s;--i>=0;)e[i].defined!==!1&&(s=Math.abs(e[i][r]-n),s<o&&(o=s,a=e[i]));return a}function zKe(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,a;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],a=i*i+o*o,a<n))return e[r];return null}function PKe(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function nj(e,t,n){function r(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function i(l,u){var c=u.items;return c.length===0?l:(t(M5(l),c),fc(l,c[0]))}function o(l,u){l.beginPath(),t(l,u)}const a=O5(o);function s(l,u,c,d,f,h){var m=u.items,g=u.bounds;return!m||!m.length||g&&!g.contains(f,h)?null:(c*=l.pixelRatio,d*=l.pixelRatio,a(l,m,c,d)?m[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:YKe(o),pick:s,isect:UP,tip:n}}var jKe=nj("area",kKe,OKe);function HKe(e,t){var n=t.clip;e.save(),dt(n)?(e.beginPath(),n(e),e.clip()):Kfe(e,t.group)}function Kfe(e,t){e.beginPath(),BP(t)?vb(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function Dfe(e){const t=ja(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function JKe(e,t){e("transform",Bfe(t))}function Afe(e,t){const n=Dfe(t);e("d",vb(null,t,n,n))}function BKe(e,t){e("class","background"),e("aria-hidden",!0),Afe(e,t)}function KKe(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Afe(e,t):e("d","")}function DKe(e,t,n){const r=t.clip?KP(n,t,t):null;e("clip-path",r)}function AKe(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),fc(e,t),e.translate(t.x||0,t.y||0)}function hw(e,t,n,r){const i=Dfe(t);e.beginPath(),vb(e,t,(n||0)+i,(r||0)+i)}const UKe=O5(hw),$Ke=O5(hw,!1),QKe=O5(hw,!0);function qKe(e,t,n){Gs(t,r=>{const i=r.x||0,o=r.y||0,a=r.strokeForeground,s=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&s&&(hw(e,r,i,o),xg(e,r),r.fill&&JG(e,r,s)&&e.fill(),r.stroke&&!a&&wg(e,r,s)&&e.stroke()),e.save(),e.translate(i,o),r.clip&&Kfe(e,r),n&&n.translate(-i,-o),Gs(r,l=>{this.draw(e,l,n)}),n&&n.translate(i,o),e.restore(),a&&r.stroke&&s&&(hw(e,r,i,o),xg(e,r),wg(e,r,s)&&e.stroke())})}function eDe(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const a=n*e.pixelRatio,s=r*e.pixelRatio;return BG(t,l=>{let u,c,d;const f=l.bounds;if(f&&!f.contains(i,o))return;c=l.x||0,d=l.y||0;const h=c+(l.width||0),m=d+(l.height||0),g=l.clip;if(g&&(i<c||i>h||o<d||o>m))return;if(e.save(),e.translate(c,d),c=i-c,d=o-d,g&&BP(l)&&!QKe(e,l,a,s))return e.restore(),null;const y=l.strokeForeground,v=t.interactive!==!1;return v&&y&&l.stroke&&$Ke(e,l,a,s)?(e.restore(),l):(u=BG(l,w=>tDe(w,c,d)?this.pick(w,n,r,c,d):null),!u&&v&&(l.fill||!y&&l.stroke)&&UKe(e,l,a,s)&&(u=l),e.restore(),u||null)})}function tDe(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var nDe={type:"group",tag:"g",nested:!1,attr:JKe,bound:AKe,draw:qKe,pick:eDe,isect:Pfe,content:DKe,background:BKe,foreground:KKe},mw={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function rj(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function ij(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function oj(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function Z1(e,t){return e==="center"?t/2:e==="right"?t:0}function S1(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function rDe(e,t,n){const r=rj(t,n),i=ij(t,r),o=oj(t,r),a=(t.x||0)-Z1(t.align,i),s=(t.y||0)-S1(t.baseline,o),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,mw["xmlns:xlink"],"xlink:href"),e("transform",Ep(a,s)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function iDe(e,t){const n=t.image,r=ij(t,n),i=oj(t,n),o=(t.x||0)-Z1(t.align,r),a=(t.y||0)-S1(t.baseline,i);return e.set(o,a,o+r,a+i)}function oDe(e,t,n){Gs(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=rj(r,this);let o=ij(r,i),a=oj(r,i);if(o===0||a===0)return;let s=(r.x||0)-Z1(r.align,o),l=(r.y||0)-S1(r.baseline,a),u,c,d,f;r.aspect!==!1&&(c=i.width/i.height,d=r.width/r.height,c===c&&d===d&&c!==d&&(d<c?(f=o/c,l+=(a-f)/2,a=f):(f=a*c,s+=(o-f)/2,o=f))),(i.complete||i.toDataURL)&&(xg(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,s,l,o,a))})}var aDe={type:"image",tag:"image",nested:!1,attr:rDe,bound:iDe,draw:oDe,pick:w1(),isect:Sa,get:rj,xOffset:Z1,yOffset:S1},sDe=nj("line",_Ke,zKe);function lDe(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",FKe(t)),e("d",t.path)}function Q_(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*Od,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=vg(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),pw(e,l,0,0,o,a),e.rotate(-s),e.translate(-r,-i)):pw(e,l,r,i,o,a)}function uDe(e,t){return Q_(M5(e,t.angle),t)?e.set(0,0,0,0):fc(e,t,!0)}var cDe={type:"path",tag:"path",nested:!1,attr:lDe,bound:uDe,draw:QP(Q_),pick:qP(Q_),isect:AP(Q_)};function dDe(e,t){e("d",vb(null,t))}function fDe(e,t){var n,r;return fc(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function O8(e,t){e.beginPath(),vb(e,t)}var pDe={type:"rect",tag:"path",nested:!1,attr:dDe,bound:fDe,draw:QP(O8),pick:qP(O8),isect:Pfe};function hDe(e,t){e("transform",Bfe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function mDe(e,t){var n,r;return fc(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function Ufe(e,t,n){var r,i,o,a;return t.stroke&&wg(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,a=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,a),!0):!1}function gDe(e,t,n){Gs(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&Ufe(e,r,i)&&(xg(e,r),e.stroke())}})}function bDe(e,t,n,r){return e.isPointInStroke?Ufe(e,t,1)&&e.isPointInStroke(n,r):!1}var yDe={type:"rule",tag:"line",nested:!1,attr:hDe,bound:mDe,draw:gDe,pick:w1(bDe),isect:jfe},vDe=tj("shape",GKe),xDe=tj("symbol",IKe,UP);const z8=vce();var bs={height:Ql,measureWidth:aj,estimateWidth:eT,width:eT,canvas:$fe};$fe(!0);function $fe(e){bs.width=e&&Gd?aj:eT}function eT(e,t){return Qfe(Pd(e,t),Ql(e))}function Qfe(e,t){return~~(.8*e.length*t)}function aj(e,t){return Ql(e)<=0||!(t=Pd(e,t))?0:qfe(t,k1(e))}function qfe(e,t){const n="(".concat(t,") ").concat(e);let r=z8.get(n);return r===void 0&&(Gd.font=t,r=Gd.measureText(e).width,z8.set(n,r)),r}function Ql(e){return e.fontSize!=null?+e.fontSize||0:11}function zd(e){return e.lineHeight!=null?e.lineHeight:Ql(e)+2}function wDe(e){return ce(e)?e.length>1?e:e[0]:e}function z5(e){return wDe(e.lineBreak&&e.text&&!ce(e.text)?e.text.split(e.lineBreak):e.text)}function sj(e){const t=z5(e);return(ce(t)?t.length-1:0)*zd(e)}function Pd(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?SDe(e,n):n}function ZDe(e){if(bs.width===aj){const t=k1(e);return n=>qfe(n,t)}else{const t=Ql(e);return n=>Qfe(n,t)}}function SDe(e,t){var n=+e.limit,r=ZDe(e);if(r(t)<n)return t;var i=e.ellipsis||"",o=e.dir==="rtl",a=0,s=t.length,l;if(n-=r(i),o){for(;a<s;)l=a+s>>>1,r(t.slice(l))>n?a=l+1:s=l;return i+t.slice(a)}else{for(;a<s;)l=1+(a+s>>>1),r(t.slice(0,l))<n?a=l:s=l-1;return t.slice(0,a)+i}}function P5(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function k1(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Ql(e)+"px "+P5(e,t)}function lj(e){var t=e.baseline,n=Ql(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*zd(e):t==="line-bottom"?.29*n-.5*zd(e):0)}const kDe={left:"start",center:"middle",right:"end"},ox=new tr;function _1(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-ip,t+=r*Math.cos(i),n+=r*Math.sin(i)),ox.x1=t,ox.y1=n,ox}function _De(e,t){var n=t.dx||0,r=(t.dy||0)+lj(t),i=_1(t),o=i.x1,a=i.y1,s=t.angle||0,l;e("text-anchor",kDe[t.align]||"start"),s?(l=Ep(o,a)+" "+ej(s),(n||r)&&(l+=" "+Ep(n,r))):l=Ep(o+n,a+r),e("transform",l)}function uj(e,t,n){var r=bs.height(t),i=t.align,o=_1(t),a=o.x1,s=o.y1,l=t.dx||0,u=(t.dy||0)+lj(t)-Math.round(.8*r),c=z5(t),d;if(ce(c)?(r+=zd(t)*(c.length-1),d=c.reduce((f,h)=>Math.max(f,bs.width(t,h)),0)):d=bs.width(t,c),i==="center"?l-=d/2:i==="right"&&(l-=d),e.set(l+=a,u+=s,l+d,u+r),t.angle&&!n)e.rotate(t.angle*Od,a,s);else if(n===2)return e.rotatedPoints(t.angle*Od,a,s);return e}function GDe(e,t,n){Gs(t,r=>{var i=r.opacity==null?1:r.opacity,o,a,s,l,u,c,d;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=k1(r),e.textAlign=r.align||"left",o=_1(r),a=o.x1,s=o.y1,r.angle&&(e.save(),e.translate(a,s),e.rotate(r.angle*Od),a=s=0),a+=r.dx||0,s+=(r.dy||0)+lj(r),c=z5(r),xg(e,r),ce(c))for(u=zd(r),l=0;l<c.length;++l)d=Pd(r,c[l]),r.fill&&JG(e,r,i)&&e.fillText(d,a,s),r.stroke&&wg(e,r,i)&&e.strokeText(d,a,s),s+=u;else d=Pd(r,c),r.fill&&JG(e,r,i)&&e.fillText(d,a,s),r.stroke&&wg(e,r,i)&&e.strokeText(d,a,s);r.angle&&e.restore()}})}function IDe(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=_1(t),s=a.x1,l=a.y1,u=uj(ox,t,1),c=-t.angle*Od,d=Math.cos(c),f=Math.sin(c),h=d*i-f*o+(s-d*s+f*l),m=f*i+d*o+(l-f*s-d*l);return u.contains(h,m)}function WDe(e,t){const n=uj(ox,e,2);return u0(t,n[0],n[1],n[2],n[3])||u0(t,n[0],n[1],n[4],n[5])||u0(t,n[4],n[5],n[6],n[7])||u0(t,n[2],n[3],n[6],n[7])}var EDe={type:"text",tag:"text",nested:!1,attr:_De,bound:uj,draw:GDe,pick:w1(IDe),isect:WDe},XDe=nj("trail",WKe,PKe),jo={arc:MKe,area:jKe,group:nDe,image:aDe,line:sDe,path:cDe,rect:pDe,rule:yDe,shape:vDe,symbol:xDe,text:EDe,trail:XDe};function tT(e,t,n){var r=jo[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new tr),e,n)}var P8={mark:null};function epe(e,t,n){var r=jo[e.marktype],i=r.bound,o=e.items,a=o&&o.length,s,l,u,c;if(r.nested)return a?u=o[0]:(P8.mark=e,u=P8),c=tT(u,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new tr,a)for(s=0,l=o.length;s<l;++s)t.union(tT(o[s],i,n));return e.bounds=t}const LDe=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function tpe(e,t){return JSON.stringify(e,LDe,t)}function npe(e){const t=typeof e=="string"?JSON.parse(e):e;return rpe(t)}function rpe(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&rpe(n[i]);return t&&epe(e),e}function cj(e){arguments.length?this.root=npe(e):(this.root=ipe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new v1(this.root)])}cj.prototype={toJSON(e){return tpe(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const r=ipe(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function ipe(e,t){const n={bounds:new tr,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function qc(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function dj(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Di(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=qc(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function ns(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function ope(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function G1(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function RDe(e,t,n,r){var i=e&&e.mark,o,a;if(i&&(o=jo[i.marktype]).tip){for(a=G1(t,n),a[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=o.tip(i.items,a)}return e}function jd(e,t){this._active=null,this._handlers={},this._loader=e||$3(),this._tooltip=t||CDe}function CDe(e,t,n,r){e.element().setAttribute("title",r||"")}jd.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),o=qc(null,"a");for(const a in r)o.setAttribute(a,r[a]);o.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=RDe(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),a=i.height();let s=i.x1+r[0]+n.left,l=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,l+=e.y||0;return{x:s,y:l,width:o,height:a,left:s,top:l,right:s+o,bottom:l+a}}};function ql(e){this._el=null,this._bgcolor=null,this._loader=new DP(e)}ql.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render(){},renderAsync(e){const t=this.render(e);return this._ready?this._ready.then(()=>t):Promise.resolve(t)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(o=>{o&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const VDe="keydown",YDe="keypress",TDe="keyup",ape="dragenter",q_="dragleave",spe="dragover",nT="mousedown",NDe="mouseup",KG="mousemove",ax="mouseout",lpe="mouseover",DG="click",FDe="dblclick",MDe="wheel",upe="mousewheel",AG="touchstart",UG="touchmove",$G="touchend",ODe=[VDe,YDe,TDe,ape,q_,spe,nT,NDe,KG,ax,lpe,DG,FDe,MDe,upe,AG,UG,$G],rT=KG,gw=ax,iT=DG;function j5(e,t){jd.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const zDe=e=>e===AG||e===UG||e===$G?[AG,UG,$G]:[e];function j8(e,t){zDe(t).forEach(n=>PDe(e,n))}function PDe(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function H8(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?this.fire(e,r):((!i||!i.exit)&&this.fire(n,r),this._active=o,this.fire(t,r),this.fire(e,r))}}function J8(e){return function(t){this.fire(e,t),this._active=null}}Se(j5,jd,{initialize(e,t,n){return this._canvas=e&&dj(e,"canvas"),[DG,nT,KG,ax,q_].forEach(r=>j8(this,r)),jd.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:ODe,DOMMouseScroll(e){this.fire(upe,e)},mousemove:H8(KG,lpe,ax),dragover:H8(spe,ape,q_),mouseout:J8(ax),dragleave:J8(q_),mousedown(e){this._down=this._active,this.fire(nT,e)},click(e){this._down===this._active&&(this.fire(DG,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(AG,e,!0)},touchmove(e){this.fire(UG,e,!0)},touchend(e){this.fire($G,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===iT&&r&&r.href?this.handleHref(t,r,r.href):(e===rT||e===gw)&&this.handleTooltip(t,r,e!==gw),i)for(let o=0,a=i.length;o<a;++o)i[o].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(j8(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=G1(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const o=this.context();return jo[e.marktype].pick.call(this,o,e,t,n,r,i)}});function jDe(){return typeof window<"u"&&window.devicePixelRatio||1}var HDe=jDe();function JDe(e,t,n,r,i,o){const a=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,s=e.getContext("2d"),l=a?HDe:i;e.width=t*l,e.height=n*l;for(const u in o)s[u]=o[u];return a&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=l,s.setTransform(l,0,0,l,l*r[0],l*r[1]),e}function QG(e){ql.call(this,e),this._options={},this._redraw=!1,this._dirty=new tr,this._tempb=new tr}const B8=ql.prototype,BDe=(e,t,n)=>new tr().set(0,0,t,n).translate(-e[0],-e[1]);function KDe(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}Se(QG,ql,{initialize(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:_d(1,1,this._options.type),e&&this._canvas&&(ns(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),B8.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(B8.resize.call(this,e,t,n,r),this._canvas)JDe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||le("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e){const t=this.context(),n=this._origin,r=this._width,i=this._height,o=this._dirty,a=BDe(n,r,i);t.save();const s=this._redraw||o.empty()?(this._redraw=!1,a.expand(1)):KDe(t,a.intersect(o),n);return this.clear(-n[0],-n[1],r,i),this.draw(t,e,s),t.restore(),o.clear(),this},draw(e,t,n){const r=jo[t.marktype];t.clip&&HKe(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,o=this.context();i.type!=="pdf"&&!i.externalContext&&o.clearRect(e,t,n,r),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});function fj(e,t){jd.call(this,e,t);const n=this;n._hrefHandler=oT(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=oT(n,(r,i)=>{n.handleTooltip(r,i,r.type!==gw)})}const oT=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};Se(fj,jd,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(iT,this._hrefHandler),r.removeEventListener(rT,this._tooltipHandler),r.removeEventListener(gw,this._tooltipHandler)),this._svg=r=e&&dj(e,"svg"),r&&(r.addEventListener(iT,this._hrefHandler),r.addEventListener(rT,this._tooltipHandler),r.addEventListener(gw,this._tooltipHandler)),jd.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const i={type:e,handler:t,listener:oT(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const cpe="aria-hidden",pj="aria-label",hj="role",mj="aria-roledescription",dpe="graphics-object",gj="graphics-symbol",fpe=(e,t,n)=>({[hj]:e,[mj]:t,[pj]:n||void 0}),DDe=ks(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),K8={axis:{desc:"axis",caption:$De},legend:{desc:"legend",caption:QDe},"title-text":{desc:"title",caption:e=>"Title text '".concat(A8(e),"'")},"title-subtitle":{desc:"subtitle",caption:e=>"Subtitle text '".concat(A8(e),"'")}},D8={ariaRole:hj,ariaRoleDescription:mj,description:pj};function ppe(e,t){const n=t.aria===!1;if(e(cpe,n||void 0),n||t.description==null)for(const r in D8)e(D8[r],void 0);else{const r=t.mark.marktype;e(pj,t.description),e(hj,t.ariaRole||(r==="group"?dpe:gj)),e(mj,t.ariaRoleDescription||"".concat(r," mark"))}}function hpe(e){return e.aria===!1?{[cpe]:!0}:DDe[e.role]?null:K8[e.role]?UDe(e,K8[e.role]):ADe(e)}function ADe(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return fpe(n?dpe:gj,"".concat(t," mark container"),e.description)}function UDe(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return fpe(t.role||gj,t.desc,n.description||r(n))}catch(n){return null}}function A8(e){return Ee(e.text).join(" ")}function $De(e){const t=e.datum,n=e.orient,r=t.title?mpe(e):null,i=e.context,o=i.scales[t.scale].value,a=i.dataflow.locale(),s=o.type,l=n==="left"||n==="right"?"Y":"X";return"".concat(l,"-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(yg(s)?"discrete":s," scale")+" with ".concat(Rfe(a,o,e))}function QDe(e){const t=e.datum,n=t.title?mpe(e):null,r="".concat(t.type||""," legend").trim(),i=t.scales,o=Object.keys(i),a=e.context,s=a.scales[i[o[0]]].value,l=a.dataflow.locale();return eAe(r)+(n?" titled '".concat(n,"'"):"")+" for ".concat(qDe(o))+" with ".concat(Rfe(l,s,e))}function mpe(e){try{return Ee(Zt(e.items).items[0].text).join(" ")}catch(t){return null}}function qDe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Zt(e)}function eAe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const gpe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),tAe=e=>gpe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function bj(){let e="",t="",n="";const r=[],i=()=>t=n="",o=l=>{t&&(e+="".concat(t,">").concat(n),i()),r.push(l)},a=(l,u)=>(u!=null&&(t+=" ".concat(l,'="').concat(tAe(u),'"')),s),s={open(l){o(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),d=1;d<u;d++)c[d-1]=arguments[d];for(const f of c)for(const h in f)a(h,f[h]);return s},close(){const l=r.pop();return t?e+=t+(n?">".concat(n,"</").concat(l,">"):"/>"):e+="</".concat(l,">"),i(),s},attr:a,text:l=>(n+=gpe(l),s),toString:()=>e};return s}const bpe=e=>ype(bj(),e)+"";function ype(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):ype(e,r)}return e.close()}const qG={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},eI={blend:"mix-blend-mode"},vpe={fill:"none","stroke-miterlimit":10},Cy=0,U8="http://www.w3.org/2000/xmlns/",or=mw.xmlns;function yj(e){ql.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const bR=ql.prototype;Se(yj,ql,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=Di(e,0,"svg",or),this._svg.setAttributeNS(U8,"xmlns",or),this._svg.setAttributeNS(U8,"xmlns:xlink",mw["xmlns:xlink"]),this._svg.setAttribute("version",mw.version),this._svg.setAttribute("class","marks"),ns(e,1),this._root=Di(this._svg,Cy,"g",or),ed(this._root,vpe),ns(this._svg,Cy+1)),this.background(this._bgcolor),bR.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),bR.background.apply(this,arguments)},resize(e,t,n,r){return bR.resize.call(this,e,t,n,r),this._svg&&(ed(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=Di(e,Cy,"rect",or),ed(n,{width:this._width,height:this._height,fill:t}));const r=bpe(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),ns(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,o,a,s,l;for(a=0,s=e.length;a<s;++a)if(n=e[a],r=n.mark,r.marktype!==i&&(i=r.marktype,o=jo[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,$8(n,t),r.items.forEach(u=>{u.dirty=t})),!r.zdirty){if(n.exit){o.nested&&r.items.length?(l=r.items[0],l._svg&&this._update(o,l._svg,l)):n._svg&&(l=n._svg.parentNode,l&&l.removeChild(n._svg)),n._svg=null;continue}n=o.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,$8(n,t)):this._update(o,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n){if(!this.isDirty(t))return t._svg;const r=this._svg,i=jo[t.marktype],o=t.interactive===!1?"none":null,a=i.tag==="g",s=Q8(t,e,n,"g",r);s.setAttribute("class",ope(t));const l=hpe(t);for(const f in l)Zi(s,f,l[f]);a||Zi(s,"pointer-events",o),Zi(s,"clip-path",t.clip?KP(this,t,t.group):null);let u=null,c=0;const d=f=>{const h=this.isDirty(f),m=Q8(f,s,u,i.tag,r);h&&(this._update(i,m,f),a&&iAe(this,m,f)),u=m,++c};return i.nested?t.items.length&&d(t.items[0]):Gs(t,d),ns(s,c),s},_update(e,t,n){Mu=t,ei=t.__values__,ppe(sx,n),e.attr(sx,n,this);const r=aAe[e.type];r&&r.call(this,e,t,n),Mu&&this.style(Mu,n)},style(e,t){if(t!=null){for(const n in qG){let r=n==="font"?P5(t):t[n];if(r===ei[n])continue;const i=qG[n];r==null?e.removeAttribute(i):(HP(r)&&(r=Vfe(r,this._defs.gradient,xpe())),e.setAttribute(i,r+"")),ei[n]=r}for(const n in eI)e9(e,eI[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=Di(e,Cy+1,"defs",or)),r=nAe(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=Di(e,Cy+1,"defs",or)),r=rAe(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):ns(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function $8(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function nAe(e,t,n){let r,i,o;if(t.gradient==="radial"){let a=Di(e,n++,"pattern",or);ed(a,{id:HG+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=Di(a,0,"rect",or),ed(a,{width:1,height:1,fill:"url(".concat(xpe(),"#").concat(t.id,")")}),e=Di(e,n++,"radialGradient",or),ed(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Di(e,n++,"linearGradient",or),ed(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=Di(e,r,"stop",or),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return ns(e,r),n}function rAe(e,t,n){let r;return e=Di(e,n,"clipPath",or),e.setAttribute("id",t.id),t.path?(r=Di(e,0,"path",or),r.setAttribute("d",t.path)):(r=Di(e,0,"rect",or),ed(r,{x:0,y:0,width:t.width,height:t.height})),ns(e,1),n+1}function iAe(e,t,n){t=t.lastChild.previousSibling;let r,i=0;Gs(n,o=>{r=e.mark(t,o,r),++i}),ns(t,1+i)}function Q8(e,t,n,r,i){let o=e._svg,a;if(!o&&(a=t.ownerDocument,o=qc(a,r,or),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const s=qc(a,"path",or);o.appendChild(s),s.__data__=e;const l=qc(a,"g",or);o.appendChild(l),l.__data__=e;const u=qc(a,"path",or);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==i||oAe(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function oAe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Mu=null,ei=null;const aAe={group(e,t,n){const r=Mu=t.childNodes[2];ei=r.__values__,e.foreground(sx,n,this),ei=t.__values__,Mu=t.childNodes[1],e.content(sx,n,this);const i=Mu=t.childNodes[0];e.background(sx,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==ei.events&&(Zi(r,"pointer-events",o),Zi(i,"pointer-events",o),ei.events=o),n.strokeForeground&&n.stroke){const a=n.fill;Zi(r,"display",null),this.style(i,n),Zi(i,"stroke",null),a&&(n.fill=null),ei=r.__values__,this.style(r,n),a&&(n.fill=a),Mu=null}else Zi(r,"display","none")},image(e,t,n){n.smooth===!1?(e9(t,"image-rendering","optimizeSpeed"),e9(t,"image-rendering","pixelated")):e9(t,"image-rendering",null)},text(e,t,n){const r=z5(n);let i,o,a,s;ce(r)?(o=r.map(l=>Pd(n,l)),i=o.join(`
`),i!==ei.text&&(ns(t,0),a=t.ownerDocument,s=zd(n),o.forEach((l,u)=>{const c=qc(a,"tspan",or);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",s)),t.appendChild(c)}),ei.text=i)):(o=Pd(n,r),o!==ei.text&&(t.textContent=o,ei.text=o)),Zi(t,"font-family",P5(n)),Zi(t,"font-size",Ql(n)+"px"),Zi(t,"font-style",n.fontStyle),Zi(t,"font-variant",n.fontVariant),Zi(t,"font-weight",n.fontWeight)}};function sx(e,t,n){t!==ei[e]&&(n?sAe(Mu,e,t,n):Zi(Mu,e,t),ei[e]=t)}function e9(e,t,n){n!==ei[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ei[t]=n)}function ed(e,t){for(const n in t)Zi(e,n,t[n])}function Zi(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function sAe(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function xpe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function vj(e){ql.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}Se(vj,ql,{svg(){return this._text},_render(e){const t=bj();t.open("svg",ct({},mw,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",vpe,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=jo[t.marktype],r=n.tag,i=[ppe,n.attr];e.open("g",{class:ope(t),"clip-path":t.clip?KP(this,t,t.group):null},hpe(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});const o=a=>{const s=this.href(a);if(s&&e.open("a",s),e.open(r,this.attr(t,a,i,r!=="g"?r:null)),r==="text"){const l=z5(a);if(ce(l)){const u={x:0,dy:zd(a)};for(let c=0;c<l.length;++c)e.open("tspan",c?u:null).text(Pd(a,l[c])).close()}else e.text(Pd(a,l))}else if(r==="g"){const l=a.strokeForeground,u=a.fill,c=a.stroke;l&&c&&(a.stroke=null),e.open("path",this.attr(t,a,n.background,"bgrect")).close(),e.open("g",this.attr(t,a,n.content)),Gs(a,d=>this.mark(e,d)),e.close(),l&&c?(u&&(a.fill=null),a.stroke=c,e.open("path",this.attr(t,a,n.foreground,"bgrect")).close(),u&&(a.fill=u)):e.open("path",this.attr(t,a,n.foreground,"bgfore")).close()}e.close(),s&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):Gs(t,o),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},o=(a,s,l,u)=>{i[u||a]=s};return Array.isArray(n)?n.forEach(a=>a(o,t,this)):n(o,t,this),r&&lAe(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const r in t){const i=t[r],o=i.stops;i.gradient==="radial"?(e.open("pattern",{id:HG+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),e.close(),e.open("radialGradient",{id:r,fx:i.x1,fy:i.y1,fr:i.r1,cx:i.x2,cy:i.y2,r:i.r2})):e.open("linearGradient",{id:r,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2});for(let a=0;a<o.length;++a)e.open("stop",{offset:o[a].offset,"stop-color":o[a].color}).close();e.close()}for(const r in n){const i=n[r];e.open("clipPath",{id:r}),i.path?e.open("path",{d:i.path}).close():e.open("rect",{x:0,y:0,width:i.width,height:i.height}).close(),e.close()}e.close()}}});function lAe(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=P5(t),e["font-size"]=Ql(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const a in qG){let s=t[a];const l=qG[a];s==="transparent"&&(l==="fill"||l==="stroke")||s!=null&&(HP(s)&&(s=Vfe(s,i.gradient,"")),e[l]=s)}for(const a in eI){const s=t[a];s!=null&&(o=o||[],o.push("".concat(eI[a],": ").concat(s,";")))}return o&&(e.style=o.join(" ")),e}const wpe="canvas",Zpe="png",Spe="svg",kpe="none",td={Canvas:wpe,PNG:Zpe,SVG:Spe,None:kpe},Zg={};Zg[wpe]=Zg[Zpe]={renderer:QG,headless:QG,handler:j5};Zg[Spe]={renderer:yj,headless:vj,handler:fj};Zg[kpe]={};function I1(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Zg[e]=t,this):Zg[e]}function _pe(e,t,n){const r=[],i=new tr().union(t),o=e.marktype;return o?Gpe(e,i,n,r):o==="group"?Ipe(e,i,n,r):le("Intersect scene must be mark node or group item.")}function Gpe(e,t,n,r){if(uAe(e,t,n)){const i=e.items,o=e.marktype,a=i.length;let s=0;if(o==="group")for(;s<a;++s)Ipe(i[s],t,n,r);else for(const l=jo[o].isect;s<a;++s){const u=i[s];Wpe(u,t,l)&&r.push(u)}}return r}function uAe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function Ipe(e,t,n,r){n&&n(e.mark)&&Wpe(e,t,jo.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let l=0;l<o;++l)Gpe(i[l],t,n,r);t.translate(a,s)}return r}function Wpe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const yR=new tr;function Epe(e){const t=e.clip;if(dt(t))t(M5(yR.clear()));else if(t)yR.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(yR)}const cAe=1e-9;function xj(e,t,n){return e===t?!0:n==="path"?Xpe(e,t):e instanceof Date&&t instanceof Date?+e==+t:At(e)&&At(t)?Math.abs(e-t)<=cAe:!e||!t||!Le(e)&&!Le(t)?e==t:dAe(e,t)}function Xpe(e,t){return xj(vg(e),vg(t))}function dAe(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!xj(e[i],t[i],i))return!1;return typeof e==typeof t}function fAe(){zfe(),NBe()}const Sg="top",rs="left",ss="right",Hd="bottom",pAe="top-left",hAe="top-right",mAe="bottom-left",gAe="bottom-right",wj="start",aT="middle",ki="end",bAe="x",yAe="y",W1="group",Zj="axis",Sj="title",vAe="frame",xAe="scope",kj="legend",Lpe="row-header",Rpe="row-footer",Cpe="row-title",Vpe="column-header",Ype="column-footer",Tpe="column-title",wAe="padding",ZAe="symbol",Npe="fit",SAe="fit-x",kAe="fit-y",_Ae="pad",_j="none",AS="all",sT="each",Gj="flush",nd="column",rd="row";function Fpe(e){ae.call(this,null,e)}Se(Fpe,ae,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=jo[i],a=o.bound;let s=r.bounds,l;if(o.nested)r.items.length&&n.dirty(r.items[0]),s=US(r,a),r.items.forEach(u=>{u.bounds.clear().union(s)});else if(i===W1||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),s.clear(),r.items.forEach(u=>s.union(US(u,a))),r.role){case Zj:case kj:case Sj:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{s.union(US(u,a))}),t.visit(t.MOD,u=>{l=l||s.alignsWith(u.bounds),n.dirty(u),s.union(US(u,a))}),l&&(s.clear(),r.items.forEach(u=>s.union(u.bounds)));return Epe(r),t.modifies("bounds")}});function US(e,t,n){return t(e.bounds.clear(),e,n)}const q8=":vega_identifier:";function Ij(e){ae.call(this,0,e)}Ij.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Se(Ij,ae,{transform(e,t){const n=GAe(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function GAe(e){return e._signals[q8]||(e._signals[q8]=e.add(0))}function Mpe(e){ae.call(this,null,e)}Se(Mpe,ae,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,IAe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===W1?v1:y1;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function IAe(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Ope(e){ae.call(this,null,e)}const eU={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!zpe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},zpe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),tU=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(zpe(i,o=e[n].bounds,t))return!0},WAe=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},EAe=(e,t,n)=>{var r=e.range(),i=new tr;return t===Sg||t===Hd?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},nU=e=>(e.forEach(t=>t.opacity=1),e),rU=(e,t)=>e.reflow(t.modified()).modifies("opacity");Se(Ope,ae,{transform(e,t){const n=eU[e.method]||eU.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,a;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(nU(i),t=rU(t,e)),t;if(i=i.filter(WAe),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=nU(i),t=rU(t,e),o.length>=3&&tU(o,r)){do o=n(o,r);while(o.length>=3&&tU(o,r));o.length<3&&!Zt(i).opacity&&(o.length>1&&(Zt(o).opacity=0),Zt(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=EAe(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{a(l)||(l.opacity=0)}));const s=o[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&s.union(l.bounds)}),t}});function Ppe(e){ae.call(this,null,e)}Se(Ppe,ae,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const qr=new tr;function c0(e,t,n){return e[t]===n?0:(e[t]=n,1)}function XAe(e){var t=e.items[0].orient;return t===rs||t===ss}function LAe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function RAe(e,t,n,r){var i=t.items[0],o=i.datum,a=i.translate!=null?i.translate:.5,s=i.orient,l=LAe(o),u=i.range,c=i.offset,d=i.position,f=i.minExtent,h=i.maxExtent,m=o.title&&i.items[l[2]].items[0],g=i.titlePadding,y=i.bounds,v=m&&sj(m),w=0,Z=0,k,_;switch(qr.clear().union(y),y.clear(),(k=l[0])>-1&&y.union(i.items[k].bounds),(k=l[1])>-1&&y.union(i.items[k].bounds),s){case Sg:w=d||0,Z=-c,_=Math.max(f,Math.min(h,-y.y1)),y.add(0,-_).add(u,0),m&&$S(e,m,_,g,v,0,-1,y);break;case rs:w=-c,Z=d||0,_=Math.max(f,Math.min(h,-y.x1)),y.add(-_,0).add(0,u),m&&$S(e,m,_,g,v,1,-1,y);break;case ss:w=n+c,Z=d||0,_=Math.max(f,Math.min(h,y.x2)),y.add(0,0).add(_,u),m&&$S(e,m,_,g,v,1,1,y);break;case Hd:w=d||0,Z=r+c,_=Math.max(f,Math.min(h,y.y2)),y.add(0,0).add(u,_),m&&$S(e,m,_,g,0,0,1,y);break;default:w=i.x,Z=i.y}return fc(y.translate(w,Z),i),c0(i,"x",w+a)|c0(i,"y",Z+a)&&(i.bounds=qr,e.dirty(i),i.bounds=y,e.dirty(i)),i.mark.bounds.clear().union(y)}function $S(e,t,n,r,i,o,a,s){const l=t.bounds;if(t.auto){const u=a*(n+i+r);let c=0,d=0;e.dirty(t),o?c=(t.x||0)-(t.x=u):d=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-d)),e.dirty(t)}s.union(l)}const iU=(e,t)=>Math.floor(Math.min(e,t)),oU=(e,t)=>Math.ceil(Math.max(e,t));function CAe(e){var t=e.items,n=t.length,r=0,i,o;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===W1)switch(i.role){case Zj:case kj:case Sj:break;case Lpe:a.rowheaders.push(...o);break;case Rpe:a.rowfooters.push(...o);break;case Vpe:a.colheaders.push(...o);break;case Ype:a.colfooters.push(...o);break;case Cpe:a.rowtitle=o[0];break;case Tpe:a.coltitle=o[0];break;default:a.marks.push(...o)}return a}function VAe(e){return new tr().set(0,0,e.width||0,e.height||0)}function YAe(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function wn(e,t,n){const r=Le(e)?e[t]:e;return r!=null?r:n!==void 0?n:0}function aU(e){return e<0?Math.ceil(-e):0}function jpe(e,t,n){var r=!n.nodirty,i=n.bounds===Gj?VAe:YAe,o=qr.set(0,0,0,0),a=wn(n.align,nd),s=wn(n.align,rd),l=wn(n.padding,nd),u=wn(n.padding,rd),c=n.columns||t.length,d=c<=0?1:Math.ceil(t.length/c),f=t.length,h=Array(f),m=Array(c),g=0,y=Array(f),v=Array(d),w=0,Z=Array(f),k=Array(f),_=Array(f),R,I,E,X,Y,C,N,V,F,O,P;for(I=0;I<c;++I)m[I]=0;for(I=0;I<d;++I)v[I]=0;for(I=0;I<f;++I)C=t[I],Y=_[I]=i(C),C.x=C.x||0,Z[I]=0,C.y=C.y||0,k[I]=0,E=I%c,X=~~(I/c),g=Math.max(g,N=Math.ceil(Y.x2)),w=Math.max(w,V=Math.ceil(Y.y2)),m[E]=Math.max(m[E],N),v[X]=Math.max(v[X],V),h[I]=l+aU(Y.x1),y[I]=u+aU(Y.y1),r&&e.dirty(t[I]);for(I=0;I<f;++I)I%c===0&&(h[I]=0),I<c&&(y[I]=0);if(a===sT)for(E=1;E<c;++E){for(P=0,I=E;I<f;I+=c)P<h[I]&&(P=h[I]);for(I=E;I<f;I+=c)h[I]=P+m[E-1]}else if(a===AS){for(P=0,I=0;I<f;++I)I%c&&P<h[I]&&(P=h[I]);for(I=0;I<f;++I)I%c&&(h[I]=P+g)}else for(a=!1,E=1;E<c;++E)for(I=E;I<f;I+=c)h[I]+=m[E-1];if(s===sT)for(X=1;X<d;++X){for(P=0,I=X*c,R=I+c;I<R;++I)P<y[I]&&(P=y[I]);for(I=X*c;I<R;++I)y[I]=P+v[X-1]}else if(s===AS){for(P=0,I=c;I<f;++I)P<y[I]&&(P=y[I]);for(I=c;I<f;++I)y[I]=P+w}else for(s=!1,X=1;X<d;++X)for(I=X*c,R=I+c;I<R;++I)y[I]+=v[X-1];for(F=0,I=0;I<f;++I)F=h[I]+(I%c?F:0),Z[I]+=F-t[I].x;for(E=0;E<c;++E)for(O=0,I=E;I<f;I+=c)O+=y[I],k[I]+=O-t[I].y;if(a&&wn(n.center,nd)&&d>1)for(I=0;I<f;++I)Y=a===AS?g:m[I%c],F=Y-_[I].x2-t[I].x-Z[I],F>0&&(Z[I]+=F/2);if(s&&wn(n.center,rd)&&c!==1)for(I=0;I<f;++I)Y=s===AS?w:v[~~(I/c)],O=Y-_[I].y2-t[I].y-k[I],O>0&&(k[I]+=O/2);for(I=0;I<f;++I)o.union(_[I].translate(Z[I],k[I]));switch(F=wn(n.anchor,bAe),O=wn(n.anchor,yAe),wn(n.anchor,nd)){case ki:F-=o.width();break;case aT:F-=o.width()/2}switch(wn(n.anchor,rd)){case ki:O-=o.height();break;case aT:O-=o.height()/2}for(F=Math.round(F),O=Math.round(O),o.clear(),I=0;I<f;++I)t[I].mark.bounds.clear();for(I=0;I<f;++I)C=t[I],C.x+=Z[I]+=F,C.y+=k[I]+=O,o.union(C.mark.bounds.union(C.bounds.translate(Z[I],k[I]))),r&&e.dirty(C);return o}function TAe(e,t,n){var r=CAe(t),i=r.marks,o=n.bounds===Gj?NAe:FAe,a=n.offset,s=n.columns||i.length,l=s<=0?1:Math.ceil(i.length/s),u=l*s,c,d,f,h,m,g,y;const v=jpe(e,i,n);v.empty()&&v.set(0,0,0,0),r.rowheaders&&(g=wn(n.headerBand,rd,null),c=QS(e,r.rowheaders,i,s,l,-wn(a,"rowHeader"),iU,0,o,"x1",0,s,1,g)),r.colheaders&&(g=wn(n.headerBand,nd,null),d=QS(e,r.colheaders,i,s,s,-wn(a,"columnHeader"),iU,1,o,"y1",0,1,s,g)),r.rowfooters&&(g=wn(n.footerBand,rd,null),f=QS(e,r.rowfooters,i,s,l,wn(a,"rowFooter"),oU,0,o,"x2",s-1,s,1,g)),r.colfooters&&(g=wn(n.footerBand,nd,null),h=QS(e,r.colfooters,i,s,s,wn(a,"columnFooter"),oU,1,o,"y2",u-s,1,s,g)),r.rowtitle&&(m=wn(n.titleAnchor,rd),y=wn(a,"rowTitle"),y=m===ki?f+y:c-y,g=wn(n.titleBand,rd,.5),sU(e,r.rowtitle,y,0,v,g)),r.coltitle&&(m=wn(n.titleAnchor,nd),y=wn(a,"columnTitle"),y=m===ki?h+y:d-y,g=wn(n.titleBand,nd,.5),sU(e,r.coltitle,y,1,v,g))}function NAe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function FAe(e,t){return e.bounds[t]}function QS(e,t,n,r,i,o,a,s,l,u,c,d,f,h){var m=n.length,g=0,y=0,v,w,Z,k,_,R,I,E,X;if(!m)return g;for(v=c;v<m;v+=d)n[v]&&(g=a(g,l(n[v],u)));if(!t.length)return g;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),g+=o,w=0,k=t.length;w<k;++w)e.dirty(t[w]),t[w].mark.bounds.clear();for(v=c,w=0,k=t.length;w<k;++w,v+=d){for(R=t[w],_=R.mark.bounds,Z=v;Z>=0&&(I=n[Z])==null;Z-=f);s?(E=h==null?I.x:Math.round(I.bounds.x1+h*I.bounds.width()),X=g):(E=g,X=h==null?I.y:Math.round(I.bounds.y1+h*I.bounds.height())),_.union(R.bounds.translate(E-(R.x||0),X-(R.y||0))),R.x=E,R.y=X,e.dirty(R),y=a(y,_[u])}return y}function sU(e,t,n,r,i,o){if(t){e.dirty(t);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function MAe(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function OAe(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function zAe(e,t,n,r,i,o,a){const s=MAe(n,t),l=OAe(e,s("offset",0)),u=s("anchor",wj),c=u===ki?1:u===aT?.5:0,d={align:sT,bounds:s("bounds",Gj),columns:s("direction")==="vertical"?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case rs:d.anchor={x:Math.floor(r.x1)-l,column:ki,y:c*(a||r.height()+2*r.y1),row:u};break;case ss:d.anchor={x:Math.ceil(r.x2)+l,y:c*(a||r.height()+2*r.y1),row:u};break;case Sg:d.anchor={y:Math.floor(i.y1)-l,row:ki,x:c*(o||i.width()+2*i.x1),column:u};break;case Hd:d.anchor={y:Math.ceil(i.y2)+l,x:c*(o||i.width()+2*i.x1),column:u};break;case pAe:d.anchor={x:l,y:l};break;case hAe:d.anchor={x:o-l,y:l,column:ki};break;case mAe:d.anchor={x:l,y:a-l,row:ki};break;case gAe:d.anchor={x:o-l,y:a-l,column:ki,row:ki};break}return d}function PAe(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,a=n.x,s=n.y,l,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),HAe(e,n,n.items[0].items[0]),o=jAe(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),r.type===ZAe&&JAe(n.items[0].items[0].items[0].items),i!==_j&&(n.x=a=0,n.y=s=0),n.width=l,n.height=u,fc(o.set(a,s,a+l,s+u),n),n.mark.bounds.clear().union(o),n}function jAe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function HAe(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&Vy(e,n,i,o);else{var a=t.items[1].items[0],s=a.anchor,l=t.titlePadding||0,u=r-a.x,c=r-a.y;switch(a.orient){case rs:i+=Math.ceil(a.bounds.width())+l;break;case ss:case Hd:break;default:o+=a.bounds.height()+l}switch((i||o)&&Vy(e,n,i,o),a.orient){case rs:c+=dm(t,n,a,s,1,1);break;case ss:u+=dm(t,n,a,ki,0,0)+l,c+=dm(t,n,a,s,1,1);break;case Hd:u+=dm(t,n,a,s,0,0),c+=dm(t,n,a,ki,-1,0,1)+l;break;default:u+=dm(t,n,a,s,0,0)}(u||c)&&Vy(e,a,u,c),(u=Math.round(a.bounds.x1-r))<0&&(Vy(e,n,-u,0),Vy(e,a,-u,0))}}function dm(e,t,n,r,i,o,a){const s=e.datum.type!=="symbol",l=n.datum.vgrad,u=s&&(o||!l)&&!a?t.items[0]:t,c=u.bounds[i?"y2":"x2"]-e.padding,d=l&&o?c:0,f=l&&o?0:c,h=i<=0?0:sj(n);return Math.round(r===wj?d:r===ki?f-h:.5*(c-h))}function Vy(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function JAe(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function BAe(e,t,n,r,i){var o=t.items[0],a=o.frame,s=o.orient,l=o.anchor,u=o.offset,c=o.padding,d=o.items[0].items[0],f=o.items[1]&&o.items[1].items[0],h=s===rs||s===ss?r:n,m=0,g=0,y=0,v=0,w=0,Z;if(a!==W1?s===rs?(m=i.y2,h=i.y1):s===ss?(m=i.y1,h=i.y2):(m=i.x1,h=i.x2):s===rs&&(m=r,h=0),Z=l===wj?m:l===ki?h:(m+h)/2,f&&f.text){switch(s){case Sg:case Hd:w=d.bounds.height()+c;break;case rs:v=d.bounds.width()+c;break;case ss:v=-d.bounds.width()-c;break}qr.clear().union(f.bounds),qr.translate(v-(f.x||0),w-(f.y||0)),c0(f,"x",v)|c0(f,"y",w)&&(e.dirty(f),f.bounds.clear().union(qr),f.mark.bounds.clear().union(qr),e.dirty(f)),qr.clear().union(f.bounds)}else qr.clear();switch(qr.union(d.bounds),s){case Sg:g=Z,y=i.y1-qr.height()-u;break;case rs:g=i.x1-qr.width()-u,y=Z;break;case ss:g=i.x2+qr.width()+u,y=Z;break;case Hd:g=Z,y=i.y2+u;break;default:g=o.x,y=o.y}return c0(o,"x",g)|c0(o,"y",y)&&(qr.translate(g,y),e.dirty(o),o.bounds.clear().union(qr),t.bounds.clear().union(qr),e.dirty(o)),o.bounds}function Hpe(e){ae.call(this,null,e)}Se(Hpe,ae,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&TAe(n,r,e.layout),DAe(n,r,e)}),KAe(e.mark.group)?t.reflow():t}});function KAe(e){return e&&e.mark.role!=="legend-entry"}function DAe(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),a=new tr().set(0,0,i,o),s=a.clone(),l=a.clone(),u=[],c,d,f,h,m,g;for(m=0,g=r.length;m<g;++m)switch(d=r[m],d.role){case Zj:h=XAe(d)?s:l,h.union(RAe(e,d,i,o));break;case Sj:c=d;break;case kj:u.push(PAe(e,d));break;case vAe:case xAe:case Lpe:case Rpe:case Cpe:case Vpe:case Ype:case Tpe:s.union(d.bounds),l.union(d.bounds);break;default:a.union(d.bounds)}if(u.length){const y={};u.forEach(v=>{f=v.orient||ss,f!==_j&&(y[f]||(y[f]=[])).push(v)});for(const v in y){const w=y[v];jpe(e,w,zAe(w,v,n.legends,s,l,i,o))}u.forEach(v=>{const w=v.bounds;if(w.equals(v._bounds)||(v.bounds=v._bounds,e.dirty(v),v.bounds=w,e.dirty(v)),n.autosize&&n.autosize.type===Npe)switch(v.orient){case rs:case ss:a.add(w.x1,0).add(w.x2,0);break;case Sg:case Hd:a.add(0,w.y1).add(0,w.y2)}else a.union(w)})}a.union(s).union(l),c&&a.union(BAe(e,c,i,o,a)),t.clip&&a.set(0,0,t.width||0,t.height||0),AAe(e,t,a,n)}function AAe(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1));const f=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===wAe){const m=e.padding();a-=m.left+m.right,s-=m.top+m.bottom}o===_j?(u=0,d=0,l=a,c=s):o===Npe?(l=Math.max(0,a-u-f),c=Math.max(0,s-d-h)):o===SAe?(l=Math.max(0,a-u-f),s=c+d+h):o===kAe?(a=l+u+f,c=Math.max(0,s-d-h)):o===_Ae&&(a=l+u+f,s=c+d+h),e._resizeView(a,s,l,c,[u,d],i.resize)}const UAe=Object.freeze(Object.defineProperty({__proto__:null,bound:Fpe,identifier:Ij,mark:Mpe,overlap:Ope,render:Ppe,viewlayout:Hpe},Symbol.toStringTag,{value:"Module"}));function Jpe(e){ae.call(this,null,e)}Se(Jpe,ae,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,a=e.count==null?e.values?e.values.length:10:e.count,s=PP(o,a,e.minstep),l=e.format||Ife(n,o,s,e.formatSpecifier,e.formatType,!!e.values),u=e.values?Gfe(o,e.values,s):jP(o,s);return i&&(r.rem=i),i=u.map((c,d)=>Nt({index:d/(u.length-1||1),value:c,label:l(c)})),e.extra&&i.length&&i.push(Nt({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function Bpe(e){ae.call(this,null,e)}function $Ae(){return Nt({})}function QAe(e){const t=hb().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Se(Bpe,ae,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||$Ae,o=e.key||He,a=this.value;return ce(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(o))&&le("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=QAe(o)),t.visit(t.ADD,s=>{const l=o(s);let u=a.get(l);u?u.exit?(a.empty--,r.add.push(u)):r.mod.push(u):(u=i(s),a.set(l,u),r.add.push(u)),u.datum=s,u.exit=!1}),t.visit(t.MOD,s=>{const l=o(s),u=a.get(l);u&&(u.datum=s,r.mod.push(u))}),t.visit(t.REM,s=>{const l=o(s),u=a.get(l);s===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}});function Kpe(e){ae.call(this,null,e)}Se(Kpe,ae,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(ce(o))if(n.changed()||o.every(d=>i[d]))o=o[0],n.encode=null;else return t.StopPropagation;var a=o==="enter",s=i.update||Vc,l=i.enter||Vc,u=i.exit||Vc,c=(o&&!a?i[o]:s)||Vc;if(t.changed(t.ADD)&&(t.visit(t.ADD,d=>{l(d,e),s(d,e)}),n.modifies(l.output),n.modifies(s.output),c!==Vc&&c!==s&&(t.visit(t.ADD,d=>{c(d,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==Vc&&(t.visit(t.REM,d=>{u(d,e)}),n.modifies(u.output)),a||c!==Vc){const d=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(d,f=>{const h=l(f,e)||r;(c(f,e)||h)&&n.mod.push(f)}),n.mod.length&&n.modifies(l.output)):t.visit(d,f=>{(c(f,e)||r)&&n.mod.push(f)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function Dpe(e){ae.call(this,[],e)}Se(Dpe,ae,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||K_,a=e.scale,s=+e.limit,l=PP(a,e.count==null?5:e.count,e.minstep),u=!!e.values||o===K_,c=e.format||Lfe(n,a,l,o,e.formatSpecifier,e.formatType,u),d=e.values||Xfe(a,l),f,h,m,g,y;return i&&(r.rem=i),o===K_?(s&&d.length>s?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=d.slice(0,s-1),y=!0):i=d,dt(m=e.size)?(!e.values&&a(i[0])===0&&(i=i.slice(1)),g=i.reduce((v,w)=>Math.max(v,m(w,e)),0)):m=hi(g=m||8),i=i.map((v,w)=>Nt({index:w,label:c(v,w,i),value:v,offset:g,size:m(v,e)})),y&&(y=d[i.length],i.push(Nt({index:i.length,label:"".concat(d.length-i.length," entries"),value:y,offset:g,size:m(y,e)})))):o===kBe?(f=a.domain(),h=Sfe(a,f[0],Zt(f)),d.length<3&&!e.values&&f[0]!==Zt(f)&&(d=[f[0],Zt(f)]),i=d.map((v,w)=>Nt({index:w,label:c(v,w,d),value:v,perc:h(v)}))):(m=d.length-1,h=YBe(a),i=d.map((v,w)=>Nt({index:w,label:c(v,w,d),value:v,perc:w?h(v):0,perc2:w===m?1:h(d[w+1])}))),r.source=i,r.add=i,this.value=i,r}});const qAe=e=>e.source.x,e7e=e=>e.source.y,t7e=e=>e.target.x,n7e=e=>e.target.y;function Wj(e){ae.call(this,{},e)}Wj.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Se(Wj,ae,{transform(e,t){var n=e.sourceX||qAe,r=e.sourceY||e7e,i=e.targetX||t7e,o=e.targetY||n7e,a=e.as||"path",s=e.orient||"vertical",l=e.shape||"line",u=lU.get(l+"-"+s)||lU.get(l);return u||le("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[a]=u(n(c),r(c),i(c),o(c))}),t.reflow(e.modified()).modifies(a)}});const Ape=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,r7e=(e,t,n,r)=>Ape(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Upe=(e,t,n,r)=>{var i=n-e,o=r-t,a=Math.sqrt(i*i+o*o)/2,s=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+a+","+a+" "+s+" 0 1 "+n+","+r},i7e=(e,t,n,r)=>Upe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),$pe=(e,t,n,r)=>{const i=n-e,o=r-t,a=.2*(i+o),s=.2*(o-i);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(r-a)+" "+n+","+r},o7e=(e,t,n,r)=>$pe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),a7e=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,s7e=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,l7e=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s},u7e=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},c7e=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},d7e=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*o+"C"+l*i+","+l*o+" "+l*a+","+l*s+" "+r*a+","+r*s},lU=hb({line:Ape,"line-radial":r7e,arc:Upe,"arc-radial":i7e,curve:$pe,"curve-radial":o7e,"orthogonal-horizontal":a7e,"orthogonal-vertical":s7e,"orthogonal-radial":l7e,"diagonal-horizontal":u7e,"diagonal-vertical":c7e,"diagonal-radial":d7e});function Ej(e){ae.call(this,null,e)}Ej.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Se(Ej,ae,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||db,a=e.startAngle||0,s=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(o),c=u.length,d=a,f=(s-a)/Yle(u),h=Eo(c),m,g,y;for(e.sort&&h.sort((v,w)=>u[v]-u[w]),m=0;m<c;++m)y=u[h[m]],g=l[h[m]],g[r]=d,g[i]=d+=y*f;return this.value=u,t.reflow(e.modified()).modifies(n)}});const f7e=5;function p7e(e){const t=e.type;return!e.bins&&(t===gg||t===R5||t===C5)}function Qpe(e){return MP(e)&&e!==El}const h7e=ks(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function qpe(e){ae.call(this,null,e),this.modified(!0)}Se(qpe,ae,{transform(e,t){var n=t.dataflow,r=this.value,i=m7e(e);(!r||i!==r.type)&&(this.value=r=Vt(i)());for(i in e)if(!h7e[i]){if(i==="padding"&&Qpe(r.type))continue;dt(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return w7e(r,e,x7e(r,e,b7e(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function m7e(e){var t=e.type,n="",r;return t===El?El+"-"+gg:(g7e(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?El+"-":r===3?yb+"-":""),(n+t||gg).toLowerCase())}function g7e(e){const t=e.type;return MP(t)&&t!==Ap&&t!==Up&&(e.scheme||e.range&&e.range.length&&e.range.every(We))}function b7e(e,t,n){const r=y7e(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,a=t.zero||t.zero===void 0&&p7e(e),s,l;if(!i)return 0;if(Qpe(o)&&t.padding&&i[0]!==Zt(i)&&(i=v7e(o,i,t.range,t.padding,t.exponent,t.constant)),(a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(s=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[s]<0&&(i[s]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[s]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[s]?s+1:l<i[0]?0:s;u!==s&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return e.domain(ehe(o,i,n)),o===YP&&e.unknown(t.domainImplicit?vY:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&PP(e,t.nice)||null),i.length}function y7e(e,t,n){return t?(e.domain(ehe(e.type,t,n)),t.length):-1}function v7e(e,t,n,r,i,o){var a=Math.abs(Zt(n)-n[0]),s=a/(a-2*r),l=e===ic?Sz(t,null,s):e===C5?TG(t,null,s,.5):e===R5?TG(t,null,s,i||1):e===p1?kz(t,null,s,o||1):Zz(t,null,s);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function ehe(e,t,n){if(yfe(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+ke(t))}return t}function x7e(e,t,n){let r=t.bins;if(r&&!ce(r)){const i=e.domain(),o=i[0],a=Zt(i),s=r.step;let l=r.start==null?o:r.start,u=r.stop==null?a:r.stop;s||le("Scale bins parameter missing step property."),l<o&&(l=s*Math.ceil(o/s)),u>a&&(u=s*Math.floor(a/s)),r=Eo(l,u+s/2,s)}return r?e.bins=r:e.bins&&delete e.bins,e.type===TP&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function w7e(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=Z7e(r,t,n);else if(t.scheme&&(o=S7e(r,t,n),dt(o))){if(e.interpolator)return e.interpolator(o);le("Scale type ".concat(r," does not support interpolating color schemes."))}if(o&&vfe(r))return e.interpolator(g1(lT(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(OP(t.interpolate,t.interpolateGamma)):dt(e.round)?e.round(i):dt(e.rangeRound)&&e.interpolate(i?k5:pf),o&&e.range(lT(o,t.reverse))}function Z7e(e,t,n){e!==hfe&&e!==KY&&le("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===KY?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*VP(n,i,r)]}function S7e(e,t,n){var r=t.schemeExtent,i,o;return ce(t.scheme)?o=g1(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=zP(i),o||le("Unrecognized scheme name: ".concat(t.scheme))),n=e===m1?n+1:e===TP?n-1:e===bg||e===h1?+t.schemeCount||f7e:n,vfe(e)?uU(o,r,t.reverse):dt(o)?Zfe(uU(o,r),n):e===YP?o:o.slice(0,n)}function uU(e,t,n){return dt(e)&&(t||n)?wfe(e,lT(t||[0,1],n)):e}function lT(e,t){return t?e.slice().reverse():e}function the(e){ae.call(this,null,e)}Se(the,ae,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(_h(e.sort)),this.modified(n),t}});const cU="zero",nhe="center",rhe="normalize",ihe=["y0","y1"];function Xj(e){ae.call(this,null,e)}Xj.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:cU,values:[cU,nhe,rhe]},{name:"as",type:"string",array:!0,length:2,default:ihe}]};Se(Xj,ae,{transform(e,t){var n=e.as||ihe,r=n[0],i=n[1],o=_h(e.sort),a=e.field||db,s=e.offset===nhe?k7e:e.offset===rhe?_7e:G7e,l,u,c,d;for(l=I7e(t.source,e.groupby,o,a),u=0,c=l.length,d=l.max;u<c;++u)s(l[u],d,a,r,i);return t.reflow(e.modified()).modifies(n)}});function k7e(e,t,n,r,i){for(var o=(t-e.sum)/2,a=e.length,s=0,l;s<a;++s)l=e[s],l[r]=o,l[i]=o+=Math.abs(n(l))}function _7e(e,t,n,r,i){for(var o=1/e.sum,a=0,s=e.length,l=0,u=0,c;l<s;++l)c=e[l],c[r]=a,c[i]=a=o*(u+=Math.abs(n(c)))}function G7e(e,t,n,r,i){for(var o=0,a=0,s=e.length,l=0,u,c;l<s;++l)c=e[l],u=+n(c),u<0?(c[r]=a,c[i]=a+=u):(c[r]=o,c[i]=o+=u)}function I7e(e,t,n,r){var i=[],o=g=>g(c),a,s,l,u,c,d,f,h,m;if(t==null)i.push(e.slice());else for(a={},s=0,l=e.length;s<l;++s)c=e[s],d=t.map(o),f=a[d],f||(a[d]=f=[],i.push(f)),f.push(c);for(d=0,m=0,u=i.length;d<u;++d){for(f=i[d],s=0,h=0,l=f.length;s<l;++s)h+=Math.abs(r(f[s]));f.sum=h,h>m&&(m=h),n&&f.sort(n)}return i.max=m,i}const W7e=Object.freeze(Object.defineProperty({__proto__:null,axisticks:Jpe,datajoin:Bpe,encode:Kpe,legendentries:Dpe,linkpath:Wj,pie:Ej,scale:qpe,sortitems:the,stack:Xj},Symbol.toStringTag,{value:"Module"}));var Ke=1e-6,tI=1e-12,gt=Math.PI,Fn=gt/2,nI=gt/4,Vi=gt*2,Hn=180/gt,ht=gt/180,wt=Math.abs,xb=Math.atan,Ga=Math.atan2,De=Math.cos,qS=Math.ceil,ohe=Math.exp,uT=Math.hypot,rI=Math.log,vR=Math.pow,Be=Math.sin,pa=Math.sign||function(e){return e>0?1:e<0?-1:0},Yi=Math.sqrt,Lj=Math.tan;function ahe(e){return e>1?0:e<-1?gt:Math.acos(e)}function fo(e){return e>1?Fn:e<-1?-Fn:Math.asin(e)}function Mr(){}function iI(e,t){e&&fU.hasOwnProperty(e.type)&&fU[e.type](e,t)}var dU={Feature:function(e,t){iI(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)iI(n[r].geometry,t)}},fU={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){cT(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)cT(n[r],t,0)},Polygon:function(e,t){pU(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)pU(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)iI(n[r],t)}};function cT(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function pU(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)cT(e[n],t,1);t.polygonEnd()}function Eu(e,t){e&&dU.hasOwnProperty(e.type)?dU[e.type](e,t):iI(e,t)}var oI=new Ri,aI=new Ri,she,lhe,dT,fT,pT,jl={point:Mr,lineStart:Mr,lineEnd:Mr,polygonStart:function(){oI=new Ri,jl.lineStart=E7e,jl.lineEnd=X7e},polygonEnd:function(){var e=+oI;aI.add(e<0?Vi+e:e),this.lineStart=this.lineEnd=this.point=Mr},sphere:function(){aI.add(Vi)}};function E7e(){jl.point=L7e}function X7e(){uhe(she,lhe)}function L7e(e,t){jl.point=uhe,she=e,lhe=t,e*=ht,t*=ht,dT=e,fT=De(t=t/2+nI),pT=Be(t)}function uhe(e,t){e*=ht,t*=ht,t=t/2+nI;var n=e-dT,r=n>=0?1:-1,i=r*n,o=De(t),a=Be(t),s=pT*a,l=fT*o+s*De(i),u=s*r*Be(i);oI.add(Ga(u,l)),dT=e,fT=o,pT=a}function R7e(e){return aI=new Ri,Eu(e,jl),aI*2}function sI(e){return[Ga(e[1],e[0]),fo(e[2])]}function $p(e){var t=e[0],n=e[1],r=De(n);return[r*De(t),r*Be(t),Be(n)]}function ek(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function kg(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function xR(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function tk(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function lI(e){var t=Yi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var En,Bi,Yn,_o,ep,che,dhe,I0,lx,zc,oc,_u={point:hT,lineStart:hU,lineEnd:mU,polygonStart:function(){_u.point=phe,_u.lineStart=C7e,_u.lineEnd=V7e,lx=new Ri,jl.polygonStart()},polygonEnd:function(){jl.polygonEnd(),_u.point=hT,_u.lineStart=hU,_u.lineEnd=mU,oI<0?(En=-(Yn=180),Bi=-(_o=90)):lx>Ke?_o=90:lx<-Ke&&(Bi=-90),oc[0]=En,oc[1]=Yn},sphere:function(){En=-(Yn=180),Bi=-(_o=90)}};function hT(e,t){zc.push(oc=[En=e,Yn=e]),t<Bi&&(Bi=t),t>_o&&(_o=t)}function fhe(e,t){var n=$p([e*ht,t*ht]);if(I0){var r=kg(I0,n),i=[r[1],-r[0],0],o=kg(i,r);lI(o),o=sI(o);var a=e-ep,s=a>0?1:-1,l=o[0]*Hn*s,u,c=wt(a)>180;c^(s*ep<l&&l<s*e)?(u=o[1]*Hn,u>_o&&(_o=u)):(l=(l+360)%360-180,c^(s*ep<l&&l<s*e)?(u=-o[1]*Hn,u<Bi&&(Bi=u)):(t<Bi&&(Bi=t),t>_o&&(_o=t))),c?e<ep?ko(En,e)>ko(En,Yn)&&(Yn=e):ko(e,Yn)>ko(En,Yn)&&(En=e):Yn>=En?(e<En&&(En=e),e>Yn&&(Yn=e)):e>ep?ko(En,e)>ko(En,Yn)&&(Yn=e):ko(e,Yn)>ko(En,Yn)&&(En=e)}else zc.push(oc=[En=e,Yn=e]);t<Bi&&(Bi=t),t>_o&&(_o=t),I0=n,ep=e}function hU(){_u.point=fhe}function mU(){oc[0]=En,oc[1]=Yn,_u.point=hT,I0=null}function phe(e,t){if(I0){var n=e-ep;lx.add(wt(n)>180?n+(n>0?360:-360):n)}else che=e,dhe=t;jl.point(e,t),fhe(e,t)}function C7e(){jl.lineStart()}function V7e(){phe(che,dhe),jl.lineEnd(),wt(lx)>Ke&&(En=-(Yn=180)),oc[0]=En,oc[1]=Yn,I0=null}function ko(e,t){return(t-=e)<0?t+360:t}function Y7e(e,t){return e[0]-t[0]}function gU(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function T7e(e){var t,n,r,i,o,a,s;if(_o=Yn=-(En=Bi=1/0),zc=[],Eu(e,_u),n=zc.length){for(zc.sort(Y7e),t=1,r=zc[0],o=[r];t<n;++t)i=zc[t],gU(r,i[0])||gU(r,i[1])?(ko(r[0],i[1])>ko(r[0],r[1])&&(r[1]=i[1]),ko(i[0],r[1])>ko(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(s=ko(r[1],i[0]))>a&&(a=s,En=i[0],Yn=r[1])}return zc=oc=null,En===1/0||Bi===1/0?[[NaN,NaN],[NaN,NaN]]:[[En,Bi],[Yn,_o]]}var Gv,uI,cI,dI,fI,pI,hI,mI,mT,gT,bT,hhe,mhe,_i,Gi,Ii,ls={sphere:Mr,point:Rj,lineStart:bU,lineEnd:yU,polygonStart:function(){ls.lineStart=M7e,ls.lineEnd=O7e},polygonEnd:function(){ls.lineStart=bU,ls.lineEnd=yU}};function Rj(e,t){e*=ht,t*=ht;var n=De(t);H5(n*De(e),n*Be(e),Be(t))}function H5(e,t,n){++Gv,cI+=(e-cI)/Gv,dI+=(t-dI)/Gv,fI+=(n-fI)/Gv}function bU(){ls.point=N7e}function N7e(e,t){e*=ht,t*=ht;var n=De(t);_i=n*De(e),Gi=n*Be(e),Ii=Be(t),ls.point=F7e,H5(_i,Gi,Ii)}function F7e(e,t){e*=ht,t*=ht;var n=De(t),r=n*De(e),i=n*Be(e),o=Be(t),a=Ga(Yi((a=Gi*o-Ii*i)*a+(a=Ii*r-_i*o)*a+(a=_i*i-Gi*r)*a),_i*r+Gi*i+Ii*o);uI+=a,pI+=a*(_i+(_i=r)),hI+=a*(Gi+(Gi=i)),mI+=a*(Ii+(Ii=o)),H5(_i,Gi,Ii)}function yU(){ls.point=Rj}function M7e(){ls.point=z7e}function O7e(){ghe(hhe,mhe),ls.point=Rj}function z7e(e,t){hhe=e,mhe=t,e*=ht,t*=ht,ls.point=ghe;var n=De(t);_i=n*De(e),Gi=n*Be(e),Ii=Be(t),H5(_i,Gi,Ii)}function ghe(e,t){e*=ht,t*=ht;var n=De(t),r=n*De(e),i=n*Be(e),o=Be(t),a=Gi*o-Ii*i,s=Ii*r-_i*o,l=_i*i-Gi*r,u=uT(a,s,l),c=fo(u),d=u&&-c/u;mT.add(d*a),gT.add(d*s),bT.add(d*l),uI+=c,pI+=c*(_i+(_i=r)),hI+=c*(Gi+(Gi=i)),mI+=c*(Ii+(Ii=o)),H5(_i,Gi,Ii)}function P7e(e){Gv=uI=cI=dI=fI=pI=hI=mI=0,mT=new Ri,gT=new Ri,bT=new Ri,Eu(e,ls);var t=+mT,n=+gT,r=+bT,i=uT(t,n,r);return i<tI&&(t=pI,n=hI,r=mI,uI<Ke&&(t=cI,n=dI,r=fI),i=uT(t,n,r),i<tI)?[NaN,NaN]:[Ga(n,t)*Hn,fo(r/i)*Hn]}function yT(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function vT(e,t){return wt(e)>gt&&(e-=Math.round(e/Vi)*Vi),[e,t]}vT.invert=vT;function bhe(e,t,n){return(e%=Vi)?t||n?yT(xU(e),wU(t,n)):xU(e):t||n?wU(t,n):vT}function vU(e){return function(t,n){return t+=e,wt(t)>gt&&(t-=Math.round(t/Vi)*Vi),[t,n]}}function xU(e){var t=vU(e);return t.invert=vU(-e),t}function wU(e,t){var n=De(e),r=Be(e),i=De(t),o=Be(t);function a(s,l){var u=De(l),c=De(s)*u,d=Be(s)*u,f=Be(l),h=f*n+c*r;return[Ga(d*i-h*o,c*n-f*r),fo(h*i+d*o)]}return a.invert=function(s,l){var u=De(l),c=De(s)*u,d=Be(s)*u,f=Be(l),h=f*i-d*o;return[Ga(d*i+f*o,c*n+h*r),fo(h*n-c*r)]},a}function j7e(e){e=bhe(e[0]*ht,e[1]*ht,e.length>2?e[2]*ht:0);function t(n){return n=e(n[0]*ht,n[1]*ht),n[0]*=Hn,n[1]*=Hn,n}return t.invert=function(n){return n=e.invert(n[0]*ht,n[1]*ht),n[0]*=Hn,n[1]*=Hn,n},t}function H7e(e,t,n,r,i,o){if(n){var a=De(t),s=Be(t),l=r*n;i==null?(i=t+r*Vi,o=t-l/2):(i=ZU(a,i),o=ZU(a,o),(r>0?i<o:i>o)&&(i+=r*Vi));for(var u,c=i;r>0?c>o:c<o;c-=l)u=sI([a,-s*De(c),-s*Be(c)]),e.point(u[0],u[1])}}function ZU(e,t){t=$p(t),t[0]-=e,lI(t);var n=ahe(-t[1]);return((-t[2]<0?-n:n)+Vi-Ke)%Vi}function yhe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Mr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function t9(e,t){return wt(e[0]-t[0])<Ke&&wt(e[1]-t[1])<Ke}function nk(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function vhe(e,t,n,r,i){var o=[],a=[],s,l;if(e.forEach(function(m){if(!((g=m.length-1)<=0)){var g,y=m[0],v=m[g],w;if(t9(y,v)){if(!y[2]&&!v[2]){for(i.lineStart(),s=0;s<g;++s)i.point((y=m[s])[0],y[1]);i.lineEnd();return}v[0]+=2*Ke}o.push(w=new nk(y,m,null,!0)),a.push(w.o=new nk(y,null,w,!1)),o.push(w=new nk(v,m,null,!1)),a.push(w.o=new nk(v,null,w,!0))}}),!!o.length){for(a.sort(t),SU(o),SU(a),s=0,l=a.length;s<l;++s)a[s].e=n=!n;for(var u=o[0],c,d;;){for(var f=u,h=!0;f.v;)if((f=f.n)===u)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(s=0,l=c.length;s<l;++s)i.point((d=c[s])[0],d[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(h)for(c=f.p.z,s=c.length-1;s>=0;--s)i.point((d=c[s])[0],d[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,c=f.z,h=!h}while(!f.v);i.lineEnd()}}}function SU(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function wR(e){return wt(e[0])<=gt?e[0]:pa(e[0])*((wt(e[0])+gt)%Vi-gt)}function J7e(e,t){var n=wR(t),r=t[1],i=Be(r),o=[Be(n),-De(n),0],a=0,s=0,l=new Ri;i===1?r=Fn+Ke:i===-1&&(r=-Fn-Ke);for(var u=0,c=e.length;u<c;++u)if(f=(d=e[u]).length)for(var d,f,h=d[f-1],m=wR(h),g=h[1]/2+nI,y=Be(g),v=De(g),w=0;w<f;++w,m=k,y=R,v=I,h=Z){var Z=d[w],k=wR(Z),_=Z[1]/2+nI,R=Be(_),I=De(_),E=k-m,X=E>=0?1:-1,Y=X*E,C=Y>gt,N=y*R;if(l.add(Ga(N*X*Be(Y),v*I+N*De(Y))),a+=C?E+X*Vi:E,C^m>=n^k>=n){var V=kg($p(h),$p(Z));lI(V);var F=kg(o,V);lI(F);var O=(C^E>=0?-1:1)*fo(F[2]);(r>O||r===O&&(V[0]||V[1]))&&(s+=C^E>=0?1:-1)}}return(a<-Ke||a<Ke&&l<-tI)^s&1}function xhe(e,t,n,r){return function(i){var o=t(i),a=yhe(),s=t(a),l=!1,u,c,d,f={point:h,lineStart:g,lineEnd:y,polygonStart:function(){f.point=v,f.lineStart=w,f.lineEnd=Z,c=[],u=[]},polygonEnd:function(){f.point=h,f.lineStart=g,f.lineEnd=y,c=Vle(c);var k=J7e(u,r);c.length?(l||(i.polygonStart(),l=!0),vhe(c,K7e,k,n,i)):k&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(k,_){e(k,_)&&i.point(k,_)}function m(k,_){o.point(k,_)}function g(){f.point=m,o.lineStart()}function y(){f.point=h,o.lineEnd()}function v(k,_){d.push([k,_]),s.point(k,_)}function w(){s.lineStart(),d=[]}function Z(){v(d[0][0],d[0][1]),s.lineEnd();var k=s.clean(),_=a.result(),R,I=_.length,E,X,Y;if(d.pop(),u.push(d),d=null,!!I){if(k&1){if(X=_[0],(E=X.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),R=0;R<E;++R)i.point((Y=X[R])[0],Y[1]);i.lineEnd()}return}I>1&&k&2&&_.push(_.pop().concat(_.shift())),c.push(_.filter(B7e))}}return f}}function B7e(e){return e.length>1}function K7e(e,t){return((e=e.x)[0]<0?e[1]-Fn-Ke:Fn-e[1])-((t=t.x)[0]<0?t[1]-Fn-Ke:Fn-t[1])}const kU=xhe(function(){return!0},D7e,U7e,[-gt,-Fn]);function D7e(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,a){var s=o>0?gt:-gt,l=wt(o-t);wt(l-gt)<Ke?(e.point(t,n=(n+a)/2>0?Fn:-Fn),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),i=0):r!==s&&l>=gt&&(wt(t-r)<Ke&&(t-=r*Ke),wt(o-s)<Ke&&(o-=s*Ke),n=A7e(t,n,o,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=o,n=a),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function A7e(e,t,n,r){var i,o,a=Be(e-n);return wt(a)>Ke?xb((Be(t)*(o=De(r))*Be(n)-Be(r)*(i=De(t))*Be(e))/(i*o*a)):(t+r)/2}function U7e(e,t,n,r){var i;if(e==null)i=n*Fn,r.point(-gt,i),r.point(0,i),r.point(gt,i),r.point(gt,0),r.point(gt,-i),r.point(0,-i),r.point(-gt,-i),r.point(-gt,0),r.point(-gt,i);else if(wt(e[0]-t[0])>Ke){var o=e[0]<t[0]?gt:-gt;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function $7e(e){var t=De(e),n=6*ht,r=t>0,i=wt(t)>Ke;function o(c,d,f,h){H7e(h,e,n,f,c,d)}function a(c,d){return De(c)*De(d)>t}function s(c){var d,f,h,m,g;return{lineStart:function(){m=h=!1,g=1},point:function(y,v){var w=[y,v],Z,k=a(y,v),_=r?k?0:u(y,v):k?u(y+(y<0?gt:-gt),v):0;if(!d&&(m=h=k)&&c.lineStart(),k!==h&&(Z=l(d,w),(!Z||t9(d,Z)||t9(w,Z))&&(w[2]=1)),k!==h)g=0,k?(c.lineStart(),Z=l(w,d),c.point(Z[0],Z[1])):(Z=l(d,w),c.point(Z[0],Z[1],2),c.lineEnd()),d=Z;else if(i&&d&&r^k){var R;!(_&f)&&(R=l(w,d,!0))&&(g=0,r?(c.lineStart(),c.point(R[0][0],R[0][1]),c.point(R[1][0],R[1][1]),c.lineEnd()):(c.point(R[1][0],R[1][1]),c.lineEnd(),c.lineStart(),c.point(R[0][0],R[0][1],3)))}k&&(!d||!t9(d,w))&&c.point(w[0],w[1]),d=w,h=k,f=_},lineEnd:function(){h&&c.lineEnd(),d=null},clean:function(){return g|(m&&h)<<1}}}function l(c,d,f){var h=$p(c),m=$p(d),g=[1,0,0],y=kg(h,m),v=ek(y,y),w=y[0],Z=v-w*w;if(!Z)return!f&&c;var k=t*v/Z,_=-t*w/Z,R=kg(g,y),I=tk(g,k),E=tk(y,_);xR(I,E);var X=R,Y=ek(I,X),C=ek(X,X),N=Y*Y-C*(ek(I,I)-1);if(!(N<0)){var V=Yi(N),F=tk(X,(-Y-V)/C);if(xR(F,I),F=sI(F),!f)return F;var O=c[0],P=d[0],H=c[1],M=d[1],j;P<O&&(j=O,O=P,P=j);var J=P-O,q=wt(J-gt)<Ke,K=q||J<Ke;if(!q&&M<H&&(j=H,H=M,M=j),K?q?H+M>0^F[1]<(wt(F[0]-O)<Ke?H:M):H<=F[1]&&F[1]<=M:J>gt^(O<=F[0]&&F[0]<=P)){var D=tk(X,(-Y+V)/C);return xR(D,I),[F,sI(D)]}}}function u(c,d){var f=r?e:gt-e,h=0;return c<-f?h|=1:c>f&&(h|=2),d<-f?h|=4:d>f&&(h|=8),h}return xhe(a,s,o,r?[0,-e]:[-gt,e-gt])}function Q7e(e,t,n,r,i,o){var a=e[0],s=e[1],l=t[0],u=t[1],c=0,d=1,f=l-a,h=u-s,m;if(m=n-a,!(!f&&m>0)){if(m/=f,f<0){if(m<c)return;m<d&&(d=m)}else if(f>0){if(m>d)return;m>c&&(c=m)}if(m=i-a,!(!f&&m<0)){if(m/=f,f<0){if(m>d)return;m>c&&(c=m)}else if(f>0){if(m<c)return;m<d&&(d=m)}if(m=r-s,!(!h&&m>0)){if(m/=h,h<0){if(m<c)return;m<d&&(d=m)}else if(h>0){if(m>d)return;m>c&&(c=m)}if(m=o-s,!(!h&&m<0)){if(m/=h,h<0){if(m>d)return;m>c&&(c=m)}else if(h>0){if(m<c)return;m<d&&(d=m)}return c>0&&(e[0]=a+c*f,e[1]=s+c*h),d<1&&(t[0]=a+d*f,t[1]=s+d*h),!0}}}}}var Iv=1e9,rk=-Iv;function whe(e,t,n,r){function i(u,c){return e<=u&&u<=n&&t<=c&&c<=r}function o(u,c,d,f){var h=0,m=0;if(u==null||(h=a(u,d))!==(m=a(c,d))||l(u,c)<0^d>0)do f.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+d+4)%4)!==m);else f.point(c[0],c[1])}function a(u,c){return wt(u[0]-e)<Ke?c>0?0:3:wt(u[0]-n)<Ke?c>0?2:1:wt(u[1]-t)<Ke?c>0?1:0:c>0?3:2}function s(u,c){return l(u.x,c.x)}function l(u,c){var d=a(u,1),f=a(c,1);return d!==f?d-f:d===0?c[1]-u[1]:d===1?u[0]-c[0]:d===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,d=yhe(),f,h,m,g,y,v,w,Z,k,_,R,I={point:E,lineStart:N,lineEnd:V,polygonStart:Y,polygonEnd:C};function E(O,P){i(O,P)&&c.point(O,P)}function X(){for(var O=0,P=0,H=h.length;P<H;++P)for(var M=h[P],j=1,J=M.length,q=M[0],K,D,$=q[0],Q=q[1];j<J;++j)K=$,D=Q,q=M[j],$=q[0],Q=q[1],D<=r?Q>r&&($-K)*(r-D)>(Q-D)*(e-K)&&++O:Q<=r&&($-K)*(r-D)<(Q-D)*(e-K)&&--O;return O}function Y(){c=d,f=[],h=[],R=!0}function C(){var O=X(),P=R&&O,H=(f=Vle(f)).length;(P||H)&&(u.polygonStart(),P&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),H&&vhe(f,s,O,o,u),u.polygonEnd()),c=u,f=h=m=null}function N(){I.point=F,h&&h.push(m=[]),_=!0,k=!1,w=Z=NaN}function V(){f&&(F(g,y),v&&k&&d.rejoin(),f.push(d.result())),I.point=E,k&&c.lineEnd()}function F(O,P){var H=i(O,P);if(h&&m.push([O,P]),_)g=O,y=P,v=H,_=!1,H&&(c.lineStart(),c.point(O,P));else if(H&&k)c.point(O,P);else{var M=[w=Math.max(rk,Math.min(Iv,w)),Z=Math.max(rk,Math.min(Iv,Z))],j=[O=Math.max(rk,Math.min(Iv,O)),P=Math.max(rk,Math.min(Iv,P))];Q7e(M,j,e,t,n,r)?(k||(c.lineStart(),c.point(M[0],M[1])),c.point(j[0],j[1]),H||c.lineEnd(),R=!1):H&&(c.lineStart(),c.point(O,P),R=!1)}w=O,Z=P,k=H}return I}}function _U(e,t,n){var r=Eo(e,t-Ke,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function GU(e,t,n){var r=Eo(e,t-Ke,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function q7e(){var e,t,n,r,i,o,a,s,l=10,u=l,c=90,d=360,f,h,m,g,y=2.5;function v(){return{type:"MultiLineString",coordinates:w()}}function w(){return Eo(qS(r/c)*c,n,c).map(m).concat(Eo(qS(s/d)*d,a,d).map(g)).concat(Eo(qS(t/l)*l,e,l).filter(function(Z){return wt(Z%c)>Ke}).map(f)).concat(Eo(qS(o/u)*u,i,u).filter(function(Z){return wt(Z%d)>Ke}).map(h))}return v.lines=function(){return w().map(function(Z){return{type:"LineString",coordinates:Z}})},v.outline=function(){return{type:"Polygon",coordinates:[m(r).concat(g(a).slice(1),m(n).reverse().slice(1),g(s).reverse().slice(1))]}},v.extent=function(Z){return arguments.length?v.extentMajor(Z).extentMinor(Z):v.extentMinor()},v.extentMajor=function(Z){return arguments.length?(r=+Z[0][0],n=+Z[1][0],s=+Z[0][1],a=+Z[1][1],r>n&&(Z=r,r=n,n=Z),s>a&&(Z=s,s=a,a=Z),v.precision(y)):[[r,s],[n,a]]},v.extentMinor=function(Z){return arguments.length?(t=+Z[0][0],e=+Z[1][0],o=+Z[0][1],i=+Z[1][1],t>e&&(Z=t,t=e,e=Z),o>i&&(Z=o,o=i,i=Z),v.precision(y)):[[t,o],[e,i]]},v.step=function(Z){return arguments.length?v.stepMajor(Z).stepMinor(Z):v.stepMinor()},v.stepMajor=function(Z){return arguments.length?(c=+Z[0],d=+Z[1],v):[c,d]},v.stepMinor=function(Z){return arguments.length?(l=+Z[0],u=+Z[1],v):[l,u]},v.precision=function(Z){return arguments.length?(y=+Z,f=_U(o,i,90),h=GU(t,e,y),m=_U(s,a,90),g=GU(r,n,y),v):y},v.extentMajor([[-180,-90+Ke],[180,90-Ke]]).extentMinor([[-180,-80-Ke],[180,80+Ke]])}const bw=e=>e;var ZR=new Ri,xT=new Ri,Zhe,She,wT,ZT,Kc={point:Mr,lineStart:Mr,lineEnd:Mr,polygonStart:function(){Kc.lineStart=e6e,Kc.lineEnd=n6e},polygonEnd:function(){Kc.lineStart=Kc.lineEnd=Kc.point=Mr,ZR.add(wt(xT)),xT=new Ri},result:function(){var e=ZR/2;return ZR=new Ri,e}};function e6e(){Kc.point=t6e}function t6e(e,t){Kc.point=khe,Zhe=wT=e,She=ZT=t}function khe(e,t){xT.add(ZT*e-wT*t),wT=e,ZT=t}function n6e(){khe(Zhe,She)}const IU=Kc;var _g=1/0,gI=_g,yw=-_g,bI=yw,r6e={point:i6e,lineStart:Mr,lineEnd:Mr,polygonStart:Mr,polygonEnd:Mr,result:function(){var e=[[_g,gI],[yw,bI]];return yw=bI=-(gI=_g=1/0),e}};function i6e(e,t){e<_g&&(_g=e),e>yw&&(yw=e),t<gI&&(gI=t),t>bI&&(bI=t)}const yI=r6e;var ST=0,kT=0,Wv=0,vI=0,xI=0,d0=0,_T=0,GT=0,Ev=0,_he,Ghe,cl,dl,is={point:Qp,lineStart:WU,lineEnd:EU,polygonStart:function(){is.lineStart=s6e,is.lineEnd=l6e},polygonEnd:function(){is.point=Qp,is.lineStart=WU,is.lineEnd=EU},result:function(){var e=Ev?[_T/Ev,GT/Ev]:d0?[vI/d0,xI/d0]:Wv?[ST/Wv,kT/Wv]:[NaN,NaN];return ST=kT=Wv=vI=xI=d0=_T=GT=Ev=0,e}};function Qp(e,t){ST+=e,kT+=t,++Wv}function WU(){is.point=o6e}function o6e(e,t){is.point=a6e,Qp(cl=e,dl=t)}function a6e(e,t){var n=e-cl,r=t-dl,i=Yi(n*n+r*r);vI+=i*(cl+e)/2,xI+=i*(dl+t)/2,d0+=i,Qp(cl=e,dl=t)}function EU(){is.point=Qp}function s6e(){is.point=u6e}function l6e(){Ihe(_he,Ghe)}function u6e(e,t){is.point=Ihe,Qp(_he=cl=e,Ghe=dl=t)}function Ihe(e,t){var n=e-cl,r=t-dl,i=Yi(n*n+r*r);vI+=i*(cl+e)/2,xI+=i*(dl+t)/2,d0+=i,i=dl*e-cl*t,_T+=i*(cl+e),GT+=i*(dl+t),Ev+=i*3,Qp(cl=e,dl=t)}const XU=is;function Whe(e){this._context=e}Whe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Vi);break}}},result:Mr};var IT=new Ri,SR,Ehe,Xhe,Xv,Lv,wI={point:Mr,lineStart:function(){wI.point=c6e},lineEnd:function(){SR&&Lhe(Ehe,Xhe),wI.point=Mr},polygonStart:function(){SR=!0},polygonEnd:function(){SR=null},result:function(){var e=+IT;return IT=new Ri,e}};function c6e(e,t){wI.point=Lhe,Ehe=Xv=e,Xhe=Lv=t}function Lhe(e,t){Xv-=e,Lv-=t,IT.add(Yi(Xv*Xv+Lv*Lv)),Xv=e,Lv=t}const LU=wI;let RU,ZI,CU,VU;class YU{constructor(t){this._append=t==null?Rhe:d6e(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==CU||this._append!==ZI){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,CU=r,ZI=this._append,VU=this._,this._=i}this._+=VU;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Rhe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function d6e(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Rhe;if(t!==RU){const n=10**t;RU=t,ZI=function(r){let i=1;this._+=r[0];for(const o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}return ZI}function Che(e,t){let n=3,r=4.5,i,o;function a(s){return s&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Eu(s,i(o))),o.result()}return a.area=function(s){return Eu(s,i(IU)),IU.result()},a.measure=function(s){return Eu(s,i(LU)),LU.result()},a.bounds=function(s){return Eu(s,i(yI)),yI.result()},a.centroid=function(s){return Eu(s,i(XU)),XU.result()},a.projection=function(s){return arguments.length?(i=s==null?(e=null,bw):(e=s).stream,a):e},a.context=function(s){return arguments.length?(o=s==null?(t=null,new YU(n)):new Whe(t=s),typeof r!="function"&&o.pointRadius(r),a):t},a.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(o.pointRadius(+s),+s),a):r},a.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const l=Math.floor(s);if(!(l>=0))throw new RangeError(`invalid digits: ${s}`);n=l}return t===null&&(o=new YU(n)),a},a.projection(e).digits(n).context(t)}function E1(e){return function(t){var n=new WT;for(var r in e)n[r]=e[r];return n.stream=t,n}}function WT(){}WT.prototype={constructor:WT,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Cj(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Eu(n,e.stream(yI)),t(yI.result()),r!=null&&e.clipExtent(r),e}function X1(e,t,n){return Cj(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([s,l])},n)}function Vj(e,t,n){return X1(e,[[0,0],t],n)}function Yj(e,t,n){return Cj(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];e.scale(150*o).translate([a,s])},n)}function Tj(e,t,n){return Cj(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,s])},n)}var TU=16,f6e=De(30*ht);function NU(e,t){return+t?h6e(e,t):p6e(e)}function p6e(e){return E1({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function h6e(e,t){function n(r,i,o,a,s,l,u,c,d,f,h,m,g,y){var v=u-r,w=c-i,Z=v*v+w*w;if(Z>4*t&&g--){var k=a+f,_=s+h,R=l+m,I=Yi(k*k+_*_+R*R),E=fo(R/=I),X=wt(wt(R)-1)<Ke||wt(o-d)<Ke?(o+d)/2:Ga(_,k),Y=e(X,E),C=Y[0],N=Y[1],V=C-r,F=N-i,O=w*V-v*F;(O*O/Z>t||wt((v*V+w*F)/Z-.5)>.3||a*f+s*h+l*m<f6e)&&(n(r,i,o,a,s,l,C,N,X,k/=I,_/=I,R,g,y),y.point(C,N),n(C,N,X,k,_,R,u,c,d,f,h,m,g,y))}}return function(r){var i,o,a,s,l,u,c,d,f,h,m,g,y={point:v,lineStart:w,lineEnd:k,polygonStart:function(){r.polygonStart(),y.lineStart=_},polygonEnd:function(){r.polygonEnd(),y.lineStart=w}};function v(E,X){E=e(E,X),r.point(E[0],E[1])}function w(){d=NaN,y.point=Z,r.lineStart()}function Z(E,X){var Y=$p([E,X]),C=e(E,X);n(d,f,c,h,m,g,d=C[0],f=C[1],c=E,h=Y[0],m=Y[1],g=Y[2],TU,r),r.point(d,f)}function k(){y.point=v,r.lineEnd()}function _(){w(),y.point=R,y.lineEnd=I}function R(E,X){Z(i=E,X),o=d,a=f,s=h,l=m,u=g,y.point=Z}function I(){n(d,f,c,h,m,g,o,a,i,s,l,u,TU,r),y.lineEnd=k,k()}return y}}var m6e=E1({point:function(e,t){this.stream.point(e*ht,t*ht)}});function g6e(e){return E1({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function b6e(e,t,n,r,i){function o(a,s){return a*=r,s*=i,[t+e*a,n-e*s]}return o.invert=function(a,s){return[(a-t)/e*r,(n-s)/e*i]},o}function FU(e,t,n,r,i,o){if(!o)return b6e(e,t,n,r,i);var a=De(o),s=Be(o),l=a*e,u=s*e,c=a/e,d=s/e,f=(s*n-a*t)/e,h=(s*t+a*n)/e;function m(g,y){return g*=r,y*=i,[l*g-u*y+t,n-u*g-l*y]}return m.invert=function(g,y){return[r*(c*g-d*y+f),i*(h-d*g-c*y)]},m}function eu(e){return Vhe(function(){return e})()}function Vhe(e){var t,n=150,r=480,i=250,o=0,a=0,s=0,l=0,u=0,c,d=0,f=1,h=1,m=null,g=kU,y=null,v,w,Z,k=bw,_=.5,R,I,E,X,Y;function C(O){return E(O[0]*ht,O[1]*ht)}function N(O){return O=E.invert(O[0],O[1]),O&&[O[0]*Hn,O[1]*Hn]}C.stream=function(O){return X&&Y===O?X:X=m6e(g6e(c)(g(R(k(Y=O)))))},C.preclip=function(O){return arguments.length?(g=O,m=void 0,F()):g},C.postclip=function(O){return arguments.length?(k=O,y=v=w=Z=null,F()):k},C.clipAngle=function(O){return arguments.length?(g=+O?$7e(m=O*ht):(m=null,kU),F()):m*Hn},C.clipExtent=function(O){return arguments.length?(k=O==null?(y=v=w=Z=null,bw):whe(y=+O[0][0],v=+O[0][1],w=+O[1][0],Z=+O[1][1]),F()):y==null?null:[[y,v],[w,Z]]},C.scale=function(O){return arguments.length?(n=+O,V()):n},C.translate=function(O){return arguments.length?(r=+O[0],i=+O[1],V()):[r,i]},C.center=function(O){return arguments.length?(o=O[0]%360*ht,a=O[1]%360*ht,V()):[o*Hn,a*Hn]},C.rotate=function(O){return arguments.length?(s=O[0]%360*ht,l=O[1]%360*ht,u=O.length>2?O[2]%360*ht:0,V()):[s*Hn,l*Hn,u*Hn]},C.angle=function(O){return arguments.length?(d=O%360*ht,V()):d*Hn},C.reflectX=function(O){return arguments.length?(f=O?-1:1,V()):f<0},C.reflectY=function(O){return arguments.length?(h=O?-1:1,V()):h<0},C.precision=function(O){return arguments.length?(R=NU(I,_=O*O),F()):Yi(_)},C.fitExtent=function(O,P){return X1(C,O,P)},C.fitSize=function(O,P){return Vj(C,O,P)},C.fitWidth=function(O,P){return Yj(C,O,P)},C.fitHeight=function(O,P){return Tj(C,O,P)};function V(){var O=FU(n,0,0,f,h,d).apply(null,t(o,a)),P=FU(n,r-O[0],i-O[1],f,h,d);return c=bhe(s,l,u),I=yT(t,P),E=yT(c,I),R=NU(I,_),F()}function F(){return X=Y=null,C}return function(){return t=e.apply(this,arguments),C.invert=t.invert&&N,V()}}function Nj(e){var t=0,n=gt/3,r=Vhe(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*ht,n=o[1]*ht):[t*Hn,n*Hn]},i}function y6e(e){var t=De(e);function n(r,i){return[r*t,Be(i)/t]}return n.invert=function(r,i){return[r/t,fo(i*t)]},n}function v6e(e,t){var n=Be(e),r=(n+Be(t))/2;if(wt(r)<Ke)return y6e(e);var i=1+n*(2*r-n),o=Yi(i)/r;function a(s,l){var u=Yi(i-2*r*Be(l))/r;return[u*Be(s*=r),o-u*De(s)]}return a.invert=function(s,l){var u=o-l,c=Ga(s,wt(u))*pa(u);return u*r<0&&(c-=gt*pa(s)*pa(u)),[c/r,fo((i-(s*s+u*u)*r*r)/(2*r))]},a}function SI(){return Nj(v6e).scale(155.424).center([0,33.6442])}function Yhe(){return SI().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function x6e(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function w6e(){var e,t,n=Yhe(),r,i=SI().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=SI().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,u={point:function(f,h){l=[f,h]}};function c(f){var h=f[0],m=f[1];return l=null,r.point(h,m),l||(o.point(h,m),l)||(s.point(h,m),l)}c.invert=function(f){var h=n.scale(),m=n.translate(),g=(f[0]-m[0])/h,y=(f[1]-m[1])/h;return(y>=.12&&y<.234&&g>=-.425&&g<-.214?i:y>=.166&&y<.234&&g>=-.214&&g<-.115?a:n).invert(f)},c.stream=function(f){return e&&t===f?e:e=x6e([n.stream(t=f),i.stream(f),a.stream(f)])},c.precision=function(f){return arguments.length?(n.precision(f),i.precision(f),a.precision(f),d()):n.precision()},c.scale=function(f){return arguments.length?(n.scale(f),i.scale(f*.35),a.scale(f),c.translate(n.translate())):n.scale()},c.translate=function(f){if(!arguments.length)return n.translate();var h=n.scale(),m=+f[0],g=+f[1];return r=n.translate(f).clipExtent([[m-.455*h,g-.238*h],[m+.455*h,g+.238*h]]).stream(u),o=i.translate([m-.307*h,g+.201*h]).clipExtent([[m-.425*h+Ke,g+.12*h+Ke],[m-.214*h-Ke,g+.234*h-Ke]]).stream(u),s=a.translate([m-.205*h,g+.212*h]).clipExtent([[m-.214*h+Ke,g+.166*h+Ke],[m-.115*h-Ke,g+.234*h-Ke]]).stream(u),d()},c.fitExtent=function(f,h){return X1(c,f,h)},c.fitSize=function(f,h){return Vj(c,f,h)},c.fitWidth=function(f,h){return Yj(c,f,h)},c.fitHeight=function(f,h){return Tj(c,f,h)};function d(){return e=t=null,c}return c.scale(1070)}function The(e){return function(t,n){var r=De(t),i=De(n),o=e(r*i);return o===1/0?[2,0]:[o*i*Be(t),o*Be(n)]}}function J5(e){return function(t,n){var r=Yi(t*t+n*n),i=e(r),o=Be(i),a=De(i);return[Ga(t*o,r*a),fo(r&&n*o/r)]}}var Nhe=The(function(e){return Yi(2/(1+e))});Nhe.invert=J5(function(e){return 2*fo(e/2)});function Z6e(){return eu(Nhe).scale(124.75).clipAngle(180-.001)}var Fhe=The(function(e){return(e=ahe(e))&&e/Be(e)});Fhe.invert=J5(function(e){return e});function S6e(){return eu(Fhe).scale(79.4188).clipAngle(180-.001)}function L1(e,t){return[e,rI(Lj((Fn+t)/2))]}L1.invert=function(e,t){return[e,2*xb(ohe(t))-Fn]};function k6e(){return Mhe(L1).scale(961/Vi)}function Mhe(e){var t=eu(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,a=null,s,l,u;t.scale=function(d){return arguments.length?(r(d),c()):r()},t.translate=function(d){return arguments.length?(i(d),c()):i()},t.center=function(d){return arguments.length?(n(d),c()):n()},t.clipExtent=function(d){return arguments.length?(d==null?a=s=l=u=null:(a=+d[0][0],s=+d[0][1],l=+d[1][0],u=+d[1][1]),c()):a==null?null:[[a,s],[l,u]]};function c(){var d=gt*r(),f=t(j7e(t.rotate()).invert([0,0]));return o(a==null?[[f[0]-d,f[1]-d],[f[0]+d,f[1]+d]]:e===L1?[[Math.max(f[0]-d,a),s],[Math.min(f[0]+d,l),u]]:[[a,Math.max(f[1]-d,s)],[l,Math.min(f[1]+d,u)]])}return c()}function ik(e){return Lj((Fn+e)/2)}function _6e(e,t){var n=De(e),r=e===t?Be(e):rI(n/De(t))/rI(ik(t)/ik(e)),i=n*vR(ik(e),r)/r;if(!r)return L1;function o(a,s){i>0?s<-Fn+Ke&&(s=-Fn+Ke):s>Fn-Ke&&(s=Fn-Ke);var l=i/vR(ik(s),r);return[l*Be(r*a),i-l*De(r*a)]}return o.invert=function(a,s){var l=i-s,u=pa(r)*Yi(a*a+l*l),c=Ga(a,wt(l))*pa(l);return l*r<0&&(c-=gt*pa(a)*pa(l)),[c/r,2*xb(vR(i/u,1/r))-Fn]},o}function G6e(){return Nj(_6e).scale(109.5).parallels([30,30])}function kI(e,t){return[e,t]}kI.invert=kI;function I6e(){return eu(kI).scale(152.63)}function W6e(e,t){var n=De(e),r=e===t?Be(e):(n-De(t))/(t-e),i=n/r+e;if(wt(r)<Ke)return kI;function o(a,s){var l=i-s,u=r*a;return[l*Be(u),i-l*De(u)]}return o.invert=function(a,s){var l=i-s,u=Ga(a,wt(l))*pa(l);return l*r<0&&(u-=gt*pa(a)*pa(l)),[u/r,i-pa(r)*Yi(a*a+l*l)]},o}function E6e(){return Nj(W6e).scale(131.154).center([0,13.9389])}var ux=1.340264,cx=-.081106,dx=893e-6,fx=.003796,_I=Yi(3)/2,X6e=12;function Ohe(e,t){var n=fo(_I*Be(t)),r=n*n,i=r*r*r;return[e*De(n)/(_I*(ux+3*cx*r+i*(7*dx+9*fx*r))),n*(ux+cx*r+i*(dx+fx*r))]}Ohe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,a,s,l;o<X6e&&(s=n*(ux+cx*r+i*(dx+fx*r))-t,l=ux+3*cx*r+i*(7*dx+9*fx*r),n-=a=s/l,r=n*n,i=r*r*r,!(wt(a)<tI));++o);return[_I*e*(ux+3*cx*r+i*(7*dx+9*fx*r))/De(n),fo(Be(n)/_I)]};function L6e(){return eu(Ohe).scale(177.158)}function zhe(e,t){var n=De(t),r=De(e)*n;return[n*Be(e)/r,Be(t)/r]}zhe.invert=J5(xb);function R6e(){return eu(zhe).scale(144.049).clipAngle(60)}function C6e(){var e=1,t=0,n=0,r=1,i=1,o=0,a,s,l=null,u,c,d,f=1,h=1,m=E1({point:function(k,_){var R=Z([k,_]);this.stream.point(R[0],R[1])}}),g=bw,y,v;function w(){return f=e*r,h=e*i,y=v=null,Z}function Z(k){var _=k[0]*f,R=k[1]*h;if(o){var I=R*a-_*s;_=_*a+R*s,R=I}return[_+t,R+n]}return Z.invert=function(k){var _=k[0]-t,R=k[1]-n;if(o){var I=R*a+_*s;_=_*a-R*s,R=I}return[_/f,R/h]},Z.stream=function(k){return y&&v===k?y:y=m(g(v=k))},Z.postclip=function(k){return arguments.length?(g=k,l=u=c=d=null,w()):g},Z.clipExtent=function(k){return arguments.length?(g=k==null?(l=u=c=d=null,bw):whe(l=+k[0][0],u=+k[0][1],c=+k[1][0],d=+k[1][1]),w()):l==null?null:[[l,u],[c,d]]},Z.scale=function(k){return arguments.length?(e=+k,w()):e},Z.translate=function(k){return arguments.length?(t=+k[0],n=+k[1],w()):[t,n]},Z.angle=function(k){return arguments.length?(o=k%360*ht,s=Be(o),a=De(o),w()):o*Hn},Z.reflectX=function(k){return arguments.length?(r=k?-1:1,w()):r<0},Z.reflectY=function(k){return arguments.length?(i=k?-1:1,w()):i<0},Z.fitExtent=function(k,_){return X1(Z,k,_)},Z.fitSize=function(k,_){return Vj(Z,k,_)},Z.fitWidth=function(k,_){return Yj(Z,k,_)},Z.fitHeight=function(k,_){return Tj(Z,k,_)},Z}function Phe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}Phe.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,a=o*o;n-=i=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(wt(i)>Ke&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function V6e(){return eu(Phe).scale(175.295)}function jhe(e,t){return[De(t)*Be(e),Be(t)]}jhe.invert=J5(fo);function Y6e(){return eu(jhe).scale(249.5).clipAngle(90+Ke)}function Hhe(e,t){var n=De(t),r=1+De(e)*n;return[n*Be(e)/r,Be(t)/r]}Hhe.invert=J5(function(e){return 2*xb(e)});function T6e(){return eu(Hhe).scale(250).clipAngle(142)}function Jhe(e,t){return[rI(Lj((Fn+t)/2)),-e]}Jhe.invert=function(e,t){return[-t,2*xb(ohe(e))-Fn]};function N6e(){var e=Mhe(Jhe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var F6e=Math.abs,ET=Math.cos,GI=Math.sin,M6e=1e-6,Bhe=Math.PI,XT=Bhe/2,MU=O6e(2);function OU(e){return e>1?XT:e<-1?-XT:Math.asin(e)}function O6e(e){return Math.sqrt(e)}function z6e(e,t){var n=e*GI(t),r=30,i;do t-=i=(t+GI(t)-n)/(1+ET(t));while(F6e(i)>M6e&&--r>0);return t/2}function P6e(e,t,n){function r(i,o){return[e*i*ET(o=z6e(n,o)),t*GI(o)]}return r.invert=function(i,o){return o=OU(o/t),[i/(e*ET(o)),OU((2*o+GI(2*o))/n)]},r}var j6e=P6e(MU/XT,MU,Bhe);function H6e(){return eu(j6e).scale(169.529)}const J6e=Che(),LT=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function B6e(e,t){return function n(){const r=t();return r.type=e,r.path=Che().projection(r),r.copy=r.copy||function(){const i=n();return LT.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},r}}function Fj(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(II[e]=B6e(e,t),this):II[e]||null}function Khe(e){return e&&e.path||J6e}const II={albers:Yhe,albersusa:w6e,azimuthalequalarea:Z6e,azimuthalequidistant:S6e,conicconformal:G6e,conicequalarea:SI,conicequidistant:E6e,equalEarth:L6e,equirectangular:I6e,gnomonic:R6e,identity:C6e,mercator:k6e,mollweide:H6e,naturalEarth1:V6e,orthographic:Y6e,stereographic:T6e,transversemercator:N6e};for(const e in II)Fj(e,II[e]);function K6e(){}const bu=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Dhe(){var e=1,t=1,n=s;function r(l,u){return u.map(c=>i(l,c))}function i(l,u){var c=[],d=[];return o(l,u,f=>{n(f,l,u),D6e(f)>0?c.push([f]):d.push(f)}),d.forEach(f=>{for(var h=0,m=c.length,g;h<m;++h)if(A6e((g=c[h])[0],f)!==-1){g.push(f);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function o(l,u,c){var d=new Array,f=new Array,h,m,g,y,v,w;for(h=m=-1,y=l[0]>=u,bu[y<<1].forEach(Z);++h<e-1;)g=y,y=l[h+1]>=u,bu[g|y<<1].forEach(Z);for(bu[y<<0].forEach(Z);++m<t-1;){for(h=-1,y=l[m*e+e]>=u,v=l[m*e]>=u,bu[y<<1|v<<2].forEach(Z);++h<e-1;)g=y,y=l[m*e+e+h+1]>=u,w=v,v=l[m*e+h+1]>=u,bu[g|y<<1|v<<2|w<<3].forEach(Z);bu[y|v<<3].forEach(Z)}for(h=-1,v=l[m*e]>=u,bu[v<<2].forEach(Z);++h<e-1;)w=v,v=l[m*e+h+1]>=u,bu[v<<2|w<<3].forEach(Z);bu[v<<3].forEach(Z);function Z(k){var _=[k[0][0]+h,k[0][1]+m],R=[k[1][0]+h,k[1][1]+m],I=a(_),E=a(R),X,Y;(X=f[I])?(Y=d[E])?(delete f[X.end],delete d[Y.start],X===Y?(X.ring.push(R),c(X.ring)):d[X.start]=f[Y.end]={start:X.start,end:Y.end,ring:X.ring.concat(Y.ring)}):(delete f[X.end],X.ring.push(R),f[X.end=E]=X):(X=d[E])?(Y=f[I])?(delete d[X.start],delete f[Y.end],X===Y?(X.ring.push(R),c(X.ring)):d[Y.start]=f[X.end]={start:Y.start,end:X.end,ring:Y.ring.concat(X.ring)}):(delete d[X.start],X.ring.unshift(_),d[X.start=I]=X):d[I]=f[E]={start:I,end:E,ring:[_,R]}}}function a(l){return l[0]*2+l[1]*(e+1)*4}function s(l,u,c){l.forEach(d=>{var f=d[0],h=d[1],m=f|0,g=h|0,y,v=u[g*e+m];f>0&&f<e&&m===f&&(y=u[g*e+m-1],d[0]=f+(c-y)/(v-y)-.5),h>0&&h<t&&g===h&&(y=u[(g-1)*e+m],d[1]=h+(c-y)/(v-y)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||le("invalid size"),e=u,t=c,r},r.smooth=function(l){return arguments.length?(n=l?s:K6e,r):n===s},r}function D6e(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function A6e(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=U6e(e,t[n]))return i;return 0}function U6e(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var l=e[o],u=l[0],c=l[1],d=e[s],f=d[0],h=d[1];if($6e(l,d,t))return 0;c>r!=h>r&&n<(f-u)*(r-c)/(h-c)+u&&(i=-i)}return i}function $6e(e,t,n){var r;return Q6e(e,t,n)&&q6e(e[r=+(e[0]===t[0])],n[r],t[r])}function Q6e(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function q6e(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function Ahe(e,t,n){return function(r){var i=zl(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,l=t?Td(o,a,e):s/(e+1);return Eo(o+l,a,l)}}function Mj(e){ae.call(this,null,e)}Mj.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Se(Mj,ae,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||pi,o=Dhe().smooth(e.smooth!==!1),a=e.thresholds||e8e(r,i,e),s=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const c=i(u),d=o.size([c.width,c.height])(c.values,ce(a)?a:a(c.values));t8e(d,c,u,e),d.forEach(f=>{l.push(e1(u,Nt(s!=null?{[s]:f}:f)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function e8e(e,t,n){const r=Ahe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>_p(t(i).values)))}function t8e(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(dt(i)&&(i=i(n,r)),dt(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const a=(At(i)?i:i[0])||1,s=(At(i)?i:i[1])||1,l=o&&o[0]||0,u=o&&o[1]||0;e.forEach(Uhe(t,a,s,l,u))}function Uhe(e,t,n,r,i){const o=e.x1||0,a=e.y1||0,s=t*n<0;function l(d){d.forEach(u)}function u(d){s&&d.reverse(),d.forEach(c)}function c(d){d[0]=(d[0]-o)*t+r,d[1]=(d[1]-a)*n+i}return function(d){return d.coordinates.forEach(l),d}}function zU(e,t,n){const r=e>=0?e:jz(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function kR(e){return dt(e)?e:hi(+e)}function $he(){var e=l=>l[0],t=l=>l[1],n=db,r=[-1,-1],i=960,o=500,a=2;function s(l,u){const c=zU(r[0],l,e)>>a,d=zU(r[1],l,t)>>a,f=c?c+2:0,h=d?d+2:0,m=2*f+(i>>a),g=2*h+(o>>a),y=new Float32Array(m*g),v=new Float32Array(m*g);let w=y;l.forEach(k=>{const _=f+(+e(k)>>a),R=h+(+t(k)>>a);_>=0&&_<m&&R>=0&&R<g&&(y[_+R*m]+=+n(k))}),c>0&&d>0?(fm(m,g,y,v,c),pm(m,g,v,y,d),fm(m,g,y,v,c),pm(m,g,v,y,d),fm(m,g,y,v,c),pm(m,g,v,y,d)):c>0?(fm(m,g,y,v,c),fm(m,g,v,y,c),fm(m,g,y,v,c),w=v):d>0&&(pm(m,g,y,v,d),pm(m,g,v,y,d),pm(m,g,y,v,d),w=v);const Z=u?Math.pow(2,-2*a):1/Yle(w);for(let k=0,_=m*g;k<_;++k)w[k]*=Z;return{values:w,scale:1<<a,width:m,height:g,x1:f,y1:h,x2:f+(i>>a),y2:h+(o>>a)}}return s.x=function(l){return arguments.length?(e=kR(l),s):e},s.y=function(l){return arguments.length?(t=kR(l),s):t},s.weight=function(l){return arguments.length?(n=kR(l),s):n},s.size=function(l){if(!arguments.length)return[i,o];var u=+l[0],c=+l[1];return u>=0&&c>=0||le("invalid size"),i=u,o=c,s},s.cellSize=function(l){return arguments.length?((l=+l)>=1||le("invalid cell size"),a=Math.floor(Math.log(l)/Math.LN2),s):1<<a},s.bandwidth=function(l){return arguments.length?(l=Ee(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&le("invalid bandwidth"),r=l,s):r},s}function fm(e,t,n,r,i){const o=(i<<1)+1;for(let a=0;a<t;++a)for(let s=0,l=0;s<e+i;++s)s<e&&(l+=n[s+a*e]),s>=i&&(s>=o&&(l-=n[s-o+a*e]),r[s-i+a*e]=l/Math.min(s+1,e-1+o-s,o))}function pm(e,t,n,r,i){const o=(i<<1)+1;for(let a=0;a<e;++a)for(let s=0,l=0;s<t+i;++s)s<t&&(l+=n[a+s*e]),s>=i&&(s>=o&&(l-=n[a+(s-o)*e]),r[a+(s-i)*e]=l/Math.min(s+1,t-1+o-s,o))}function Oj(e){ae.call(this,null,e)}Oj.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const n8e=["x","y","weight","size","cellSize","bandwidth"];function Qhe(e,t){return n8e.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Se(Oj,ae,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=r8e(r,e.groupby),o=(e.groupby||[]).map(On),a=Qhe($he(),e),s=e.as||"grid",l=[];function u(c,d){for(let f=0;f<o.length;++f)c[o[f]]=d[f];return c}return l=i.map(c=>Nt(u({[s]:a(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function r8e(e,t){var n=[],r=c=>c(s),i,o,a,s,l,u;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(s);return n}function zj(e){ae.call(this,null,e)}zj.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Se(zj,ae,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=Dhe().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||Ahe(e.count||10,e.nice,!!i),a=e.size,s,l;return i||(i=t.materialize(t.SOURCE).source,s=Qhe($he(),e)(i,!0),l=Uhe(s,s.scale||1,s.scale||1,0,0),a=[s.width,s.height],i=s.values),o=ce(o)?o:o(i),i=r.size(a)(i,o),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Nt),n}});const RT="Feature",Pj="FeatureCollection",i8e="MultiPoint";function jj(e){ae.call(this,null,e)}jj.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Se(jj,ae,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],a=i&&i[1],s=e.geojson||!i&&pi,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(si(s))||o&&t.modified(si(o))||a&&t.modified(si(a)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),s&&t.visit(l,c=>n.push(s(c))),o&&a&&(t.visit(l,c=>{var d=o(c),f=a(c);d!=null&&f!=null&&(d=+d)===d&&(f=+f)===f&&r.push([d,f])}),n=n.concat({type:RT,geometry:{type:i8e,coordinates:r}})),this.value={type:Pj,features:n}}});function Hj(e){ae.call(this,null,e)}Hj.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Se(Hj,ae,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||pi,o=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=Khe(e.projection),n.materialize().reflow()):a=i===pi||t.modified(i.fields)?n.ADD_MOD:n.ADD;const s=o8e(r,e.pointRadius);return n.visit(a,l=>l[o]=r(i(l))),r.pointRadius(s),n.modifies(o)}});function o8e(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Jj(e){ae.call(this,null,e)}Jj.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Se(Jj,ae,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],a=o[0],s=o[1],l;function u(c){const d=n([r(c),i(c)]);d?(c[a]=d[0],c[s]=d[1]):(c[a]=void 0,c[s]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}});function Bj(e){ae.call(this,null,e)}Bj.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Se(Bj,ae,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=a8e(Khe(e.projection),e.field||lo("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,a=>a[i]=r),n.modifies(i)}});function a8e(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),a=e.pointRadius(n)(t(i));return e.pointRadius(o),a};return r.context=i=>(e.context(i),r),r}function Kj(e){ae.call(this,[],e),this.generator=q7e()}Kj.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Se(Kj,ae,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)dt(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(ide(n[0],i)):t.add.push(Nt(i)),n[0]=i,t}});function Dj(e){ae.call(this,null,e)}Dj.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Se(Dj,ae,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||pi,o=l8e(e.opacity,e),a=s8e(e.color,e),s=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?_p(n.map(u=>_p(i(u).values))):0};return n.forEach(u=>{const c=i(u),d=ct({},u,l);r||(d.$max=_p(c.values||[])),u[s]=u8e(c,d,a.dep?a:hi(a(d)),o.dep?o:hi(o(d)))}),t.reflow(!0).modifies(s)}});function s8e(e,t){let n;return dt(e)?(n=r=>Nd(e(r,t)),n.dep=qhe(e)):n=hi(Nd(e||"#888")),n}function l8e(e,t){let n;return dt(e)?(n=r=>e(r,t),n.dep=qhe(e)):e?n=hi(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function qhe(e){if(!dt(e))return!1;const t=ks(si(e));return t.$x||t.$y||t.$value||t.$max}function u8e(e,t,n,r){const i=e.width,o=e.height,a=e.x1||0,s=e.y1||0,l=e.x2||i,u=e.y2||o,c=e.values,d=c?y=>c[y]:Bc,f=_d(l-a,u-s),h=f.getContext("2d"),m=h.getImageData(0,0,l-a,u-s),g=m.data;for(let y=s,v=0;y<u;++y){t.$y=y-s;for(let w=a,Z=y*i;w<l;++w,v+=4){t.$x=w-a,t.$value=d(w+Z);const k=n(t);g[v+0]=k.r,g[v+1]=k.g,g[v+2]=k.b,g[v+3]=~~(255*r(t))}}return h.putImageData(m,0,0),f}function eme(e){ae.call(this,null,e),this.modified(!0)}Se(eme,ae,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=d8e(e.type),LT.forEach(r=>{e[r]!=null&&PU(n,r,e[r])})):LT.forEach(r=>{e.modified(r)&&PU(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&c8e(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function c8e(e,t){const n=f8e(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function d8e(e){const t=Fj((e||"mercator").toLowerCase());return t||le("Unrecognized projection type: "+e),t()}function PU(e,t,n){dt(e[t])&&e[t](n)}function f8e(e){return e=Ee(e),e.length===1?e[0]:{type:Pj,features:e.reduce((t,n)=>t.concat(p8e(n)),[])}}function p8e(e){return e.type===Pj?e.features:Ee(e).filter(t=>t!=null).map(t=>t.type===RT?t:{type:RT,geometry:t})}const h8e=Object.freeze(Object.defineProperty({__proto__:null,contour:zj,geojson:jj,geopath:Hj,geopoint:Jj,geoshape:Bj,graticule:Kj,heatmap:Dj,isocontour:Mj,kde2d:Oj,projection:eme},Symbol.toStringTag,{value:"Module"}));function m8e(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,a=n.length,s,l=0,u=0;for(o=0;o<a;++o)s=n[o],l+=s.x,u+=s.y;for(l=(l/a-e)*r,u=(u/a-t)*r,o=0;o<a;++o)s=n[o],s.x-=l,s.y-=u}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function g8e(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return tme(this.cover(t,n),t,n,e)}function tme(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,a={data:r},s=e._x0,l=e._y0,u=e._x1,c=e._y1,d,f,h,m,g,y,v,w;if(!o)return e._root=a,e;for(;o.length;)if((g=t>=(d=(s+u)/2))?s=d:u=d,(y=n>=(f=(l+c)/2))?l=f:c=f,i=o,!(o=o[v=y<<1|g]))return i[v]=a,e;if(h=+e._x.call(null,o.data),m=+e._y.call(null,o.data),t===h&&n===m)return a.next=o,i?i[v]=a:e._root=a,e;do i=i?i[v]=new Array(4):e._root=new Array(4),(g=t>=(d=(s+u)/2))?s=d:u=d,(y=n>=(f=(l+c)/2))?l=f:c=f;while((v=y<<1|g)===(w=(m>=f)<<1|h>=d));return i[w]=o,i[v]=a,e}function b8e(e){var t,n,r=e.length,i,o,a=new Array(r),s=new Array(r),l=1/0,u=1/0,c=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(a[n]=i,s[n]=o,i<l&&(l=i),i>c&&(c=i),o<u&&(u=o),o>d&&(d=o));if(l>c||u>d)return this;for(this.cover(l,u).cover(c,d),n=0;n<r;++n)tme(this,a[n],s[n],e[n]);return this}function y8e(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a=i-n||1,s=this._root,l,u;n>e||e>=i||r>t||t>=o;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=s,s=l,a*=2,u){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function v8e(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function x8e(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Wi(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function w8e(e,t,n){var r,i=this._x0,o=this._y0,a,s,l,u,c=this._x1,d=this._y1,f=[],h=this._root,m,g;for(h&&f.push(new Wi(h,i,o,c,d)),n==null?n=1/0:(i=e-n,o=t-n,c=e+n,d=t+n,n*=n);m=f.pop();)if(!(!(h=m.node)||(a=m.x0)>c||(s=m.y0)>d||(l=m.x1)<i||(u=m.y1)<o))if(h.length){var y=(a+l)/2,v=(s+u)/2;f.push(new Wi(h[3],y,v,l,u),new Wi(h[2],a,v,y,u),new Wi(h[1],y,s,l,v),new Wi(h[0],a,s,y,v)),(g=(t>=v)<<1|e>=y)&&(m=f[f.length-1],f[f.length-1]=f[f.length-1-g],f[f.length-1-g]=m)}else{var w=e-+this._x.call(null,h.data),Z=t-+this._y.call(null,h.data),k=w*w+Z*Z;if(k<n){var _=Math.sqrt(n=k);i=e-_,o=t-_,c=e+_,d=t+_,r=h.data}}return r}function Z8e(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,a=this._x0,s=this._y0,l=this._x1,u=this._y1,c,d,f,h,m,g,y,v;if(!n)return this;if(n.length)for(;;){if((m=c>=(f=(a+l)/2))?a=f:l=f,(g=d>=(h=(s+u)/2))?s=h:u=h,t=n,!(n=n[y=g<<1|m]))return this;if(!n.length)break;(t[y+1&3]||t[y+2&3]||t[y+3&3])&&(r=t,v=y)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[y]=o:delete t[y],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[v]=n:this._root=n),this):(this._root=o,this)}function S8e(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function k8e(){return this._root}function _8e(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function G8e(e){var t=[],n,r=this._root,i,o,a,s,l;for(r&&t.push(new Wi(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,a=n.y0,s=n.x1,l=n.y1)&&r.length){var u=(o+s)/2,c=(a+l)/2;(i=r[3])&&t.push(new Wi(i,u,c,s,l)),(i=r[2])&&t.push(new Wi(i,o,c,u,l)),(i=r[1])&&t.push(new Wi(i,u,a,s,c)),(i=r[0])&&t.push(new Wi(i,o,a,u,c))}return this}function I8e(e){var t=[],n=[],r;for(this._root&&t.push(new Wi(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,l=r.x1,u=r.y1,c=(a+l)/2,d=(s+u)/2;(o=i[0])&&t.push(new Wi(o,a,s,c,d)),(o=i[1])&&t.push(new Wi(o,c,s,l,d)),(o=i[2])&&t.push(new Wi(o,a,d,c,u)),(o=i[3])&&t.push(new Wi(o,c,d,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function W8e(e){return e[0]}function E8e(e){return arguments.length?(this._x=e,this):this._x}function X8e(e){return e[1]}function L8e(e){return arguments.length?(this._y=e,this):this._y}function Aj(e,t,n){var r=new Uj(t!=null?t:W8e,n!=null?n:X8e,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Uj(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function jU(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Fi=Aj.prototype=Uj.prototype;Fi.copy=function(){var e=new Uj(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=jU(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=jU(r));return e};Fi.add=g8e;Fi.addAll=b8e;Fi.cover=y8e;Fi.data=v8e;Fi.extent=x8e;Fi.find=w8e;Fi.remove=Z8e;Fi.removeAll=S8e;Fi.root=k8e;Fi.size=_8e;Fi.visit=G8e;Fi.visitAfter=I8e;Fi.x=E8e;Fi.y=L8e;function Xi(e){return function(){return e}}function id(e){return(e()-.5)*1e-6}function R8e(e){return e.x+e.vx}function C8e(e){return e.y+e.vy}function V8e(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=Xi(e==null?1:+e));function a(){for(var u,c=t.length,d,f,h,m,g,y,v=0;v<o;++v)for(d=Aj(t,R8e,C8e).visitAfter(s),u=0;u<c;++u)f=t[u],g=n[f.index],y=g*g,h=f.x+f.vx,m=f.y+f.vy,d.visit(w);function w(Z,k,_,R,I){var E=Z.data,X=Z.r,Y=g+X;if(E){if(E.index>f.index){var C=h-E.x-E.vx,N=m-E.y-E.vy,V=C*C+N*N;V<Y*Y&&(C===0&&(C=id(r),V+=C*C),N===0&&(N=id(r),V+=N*N),V=(Y-(V=Math.sqrt(V)))/V*i,f.vx+=(C*=V)*(Y=(X*=X)/(y+X)),f.vy+=(N*=V)*Y,E.vx-=C*(Y=1-Y),E.vy-=N*Y)}return}return k>h+Y||R<h-Y||_>m+Y||I<m-Y}}function s(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,c=t.length,d;for(n=new Array(c),u=0;u<c;++u)d=t[u],n[d.index]=+e(d,u,t)}}return a.initialize=function(u,c){t=u,r=c,l()},a.iterations=function(u){return arguments.length?(o=+u,a):o},a.strength=function(u){return arguments.length?(i=+u,a):i},a.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Xi(+u),l(),a):e},a}function Y8e(e){return e.index}function HU(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function T8e(e){var t=Y8e,n=d,r,i=Xi(30),o,a,s,l,u,c=1;e==null&&(e=[]);function d(y){return 1/Math.min(s[y.source.index],s[y.target.index])}function f(y){for(var v=0,w=e.length;v<c;++v)for(var Z=0,k,_,R,I,E,X,Y;Z<w;++Z)k=e[Z],_=k.source,R=k.target,I=R.x+R.vx-_.x-_.vx||id(u),E=R.y+R.vy-_.y-_.vy||id(u),X=Math.sqrt(I*I+E*E),X=(X-o[Z])/X*y*r[Z],I*=X,E*=X,R.vx-=I*(Y=l[Z]),R.vy-=E*Y,_.vx+=I*(Y=1-Y),_.vy+=E*Y}function h(){if(a){var y,v=a.length,w=e.length,Z=new Map(a.map((_,R)=>[t(_,R,a),_])),k;for(y=0,s=new Array(v);y<w;++y)k=e[y],k.index=y,typeof k.source!="object"&&(k.source=HU(Z,k.source)),typeof k.target!="object"&&(k.target=HU(Z,k.target)),s[k.source.index]=(s[k.source.index]||0)+1,s[k.target.index]=(s[k.target.index]||0)+1;for(y=0,l=new Array(w);y<w;++y)k=e[y],l[y]=s[k.source.index]/(s[k.source.index]+s[k.target.index]);r=new Array(w),m(),o=new Array(w),g()}}function m(){if(a)for(var y=0,v=e.length;y<v;++y)r[y]=+n(e[y],y,e)}function g(){if(a)for(var y=0,v=e.length;y<v;++y)o[y]=+i(e[y],y,e)}return f.initialize=function(y,v){a=y,u=v,h()},f.links=function(y){return arguments.length?(e=y,h(),f):e},f.id=function(y){return arguments.length?(t=y,f):t},f.iterations=function(y){return arguments.length?(c=+y,f):c},f.strength=function(y){return arguments.length?(n=typeof y=="function"?y:Xi(+y),m(),f):n},f.distance=function(y){return arguments.length?(i=typeof y=="function"?y:Xi(+y),g(),f):i},f}var N8e={value:()=>{}};function nme(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new n9(n)}function n9(e){this._=e}function F8e(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}n9.prototype=nme.prototype={constructor:n9,on:function(e,t){var n=this._,r=F8e(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=M8e(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=JU(n[i],e.name,t);else if(t==null)for(i in n)n[i]=JU(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new n9(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function M8e(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function JU(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=N8e,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Gg=0,Rv=0,Yy=0,rme=1e3,WI,Cv,EI=0,qp=0,R1=0,vw=typeof performance=="object"&&performance.now?performance:Date,ime=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function $j(){return qp||(ime(O8e),qp=vw.now()+R1)}function O8e(){qp=0}function XI(){this._call=this._time=this._next=null}XI.prototype=ome.prototype={constructor:XI,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?$j():+n)+(t==null?0:+t),!this._next&&Cv!==this&&(Cv?Cv._next=this:WI=this,Cv=this),this._call=e,this._time=n,CT()},stop:function(){this._call&&(this._call=null,this._time=1/0,CT())}};function ome(e,t,n){var r=new XI;return r.restart(e,t,n),r}function z8e(){$j(),++Gg;for(var e=WI,t;e;)(t=qp-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Gg}function BU(){qp=(EI=vw.now())+R1,Gg=Rv=0;try{z8e()}finally{Gg=0,j8e(),qp=0}}function P8e(){var e=vw.now(),t=e-EI;t>rme&&(R1-=t,EI=e)}function j8e(){for(var e,t=WI,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:WI=n);Cv=e,CT(r)}function CT(e){if(!Gg){Rv&&(Rv=clearTimeout(Rv));var t=e-qp;t>24?(e<1/0&&(Rv=setTimeout(BU,e-vw.now()-R1)),Yy&&(Yy=clearInterval(Yy))):(Yy||(EI=vw.now(),Yy=setInterval(P8e,rme)),Gg=1,ime(BU))}}function H8e(e,t,n){var r=new XI,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,a,s){a=+a,s=s==null?$j():+s,r._restart(function l(u){u+=i,r._restart(l,i+=a,s),o(u)},a,s)},r.restart(e,t,n),r)}const J8e=1664525,B8e=1013904223,KU=4294967296;function K8e(){let e=1;return()=>(e=(J8e*e+B8e)%KU)/KU}function D8e(e){return e.x}function A8e(e){return e.y}var U8e=10,$8e=Math.PI*(3-Math.sqrt(5));function Q8e(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,l=ome(d),u=nme("tick","end"),c=K8e();e==null&&(e=[]);function d(){f(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function f(g){var y,v=e.length,w;g===void 0&&(g=1);for(var Z=0;Z<g;++Z)for(n+=(o-n)*i,s.forEach(function(k){k(n)}),y=0;y<v;++y)w=e[y],w.fx==null?w.x+=w.vx*=a:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=a:(w.y=w.fy,w.vy=0);return t}function h(){for(var g=0,y=e.length,v;g<y;++g){if(v=e[g],v.index=g,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var w=U8e*Math.sqrt(.5+g),Z=g*$8e;v.x=w*Math.cos(Z),v.y=w*Math.sin(Z)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function m(g){return g.initialize&&g.initialize(e,c),g}return h(),t={tick:f,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),s.forEach(m),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(i=+g,t):+i},alphaTarget:function(g){return arguments.length?(o=+g,t):o},velocityDecay:function(g){return arguments.length?(a=1-g,t):1-a},randomSource:function(g){return arguments.length?(c=g,s.forEach(m),t):c},force:function(g,y){return arguments.length>1?(y==null?s.delete(g):s.set(g,m(y)),t):s.get(g)},find:function(g,y,v){var w=0,Z=e.length,k,_,R,I,E;for(v==null?v=1/0:v*=v,w=0;w<Z;++w)I=e[w],k=g-I.x,_=y-I.y,R=k*k+_*_,R<v&&(E=I,v=R);return E},on:function(g,y){return arguments.length>1?(u.on(g,y),t):u.on(g)}}}function q8e(){var e,t,n,r,i=Xi(-30),o,a=1,s=1/0,l=.81;function u(h){var m,g=e.length,y=Aj(e,D8e,A8e).visitAfter(d);for(r=h,m=0;m<g;++m)t=e[m],y.visit(f)}function c(){if(e){var h,m=e.length,g;for(o=new Array(m),h=0;h<m;++h)g=e[h],o[g.index]=+i(g,h,e)}}function d(h){var m=0,g,y,v=0,w,Z,k;if(h.length){for(w=Z=k=0;k<4;++k)(g=h[k])&&(y=Math.abs(g.value))&&(m+=g.value,v+=y,w+=y*g.x,Z+=y*g.y);h.x=w/v,h.y=Z/v}else{g=h,g.x=g.data.x,g.y=g.data.y;do m+=o[g.data.index];while(g=g.next)}h.value=m}function f(h,m,g,y){if(!h.value)return!0;var v=h.x-t.x,w=h.y-t.y,Z=y-m,k=v*v+w*w;if(Z*Z/l<k)return k<s&&(v===0&&(v=id(n),k+=v*v),w===0&&(w=id(n),k+=w*w),k<a&&(k=Math.sqrt(a*k)),t.vx+=v*h.value*r/k,t.vy+=w*h.value*r/k),!0;if(!(h.length||k>=s)){(h.data!==t||h.next)&&(v===0&&(v=id(n),k+=v*v),w===0&&(w=id(n),k+=w*w),k<a&&(k=Math.sqrt(a*k)));do h.data!==t&&(Z=o[h.data.index]*r/k,t.vx+=v*Z,t.vy+=w*Z);while(h=h.next)}}return u.initialize=function(h,m){e=h,n=m,c()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Xi(+h),c(),u):i},u.distanceMin=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.distanceMax=function(h){return arguments.length?(s=h*h,u):Math.sqrt(s)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function eUe(e){var t=Xi(.1),n,r,i;typeof e!="function"&&(e=Xi(e==null?0:+e));function o(s){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(i[l]-c.x)*r[l]*s}function a(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:Xi(+s),a(),o):t},o.x=function(s){return arguments.length?(e=typeof s=="function"?s:Xi(+s),a(),o):e},o}function tUe(e){var t=Xi(.1),n,r,i;typeof e!="function"&&(e=Xi(e==null?0:+e));function o(s){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(i[l]-c.y)*r[l]*s}function a(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:Xi(+s),a(),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:Xi(+s),a(),o):e},o}const DU={center:m8e,collide:V8e,nbody:q8e,link:T8e,x:eUe,y:tUe},Vv="forces",VT=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],nUe=["static","iterations"],ame=["x","y","vx","vy"];function Qj(e){ae.call(this,null,e)}Qj.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:ame}]};Se(Qj,ae,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(VT),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&sme(n,e,0,t)):(this.value=n=iUe(t.source,e),n.on("tick",rUe(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(nUe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let s=this._argops,l=0,u=s.length,c;l<u;++l)if(c=s[l],!(c.name!==Vv||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,o=r.length,a;i<o;++i)if(r[i].name==="links"&&(a=r[i].op.source)){n.pulse(a,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(ame)}});function rUe(e,t){return()=>e.touch(t).run()}function iUe(e,t){const n=Q8e(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),sme(n,t,!0).on("end",()=>o=!0)}function sme(e,t,n,r){var i=Ee(t.forces),o,a,s,l;for(o=0,a=VT.length;o<a;++o)s=VT[o],s!==Vv&&t.modified(s)&&e[s](t[s]);for(o=0,a=i.length;o<a;++o)l=Vv+o,s=n||t.modified(Vv,o)?aUe(i[o]):r&&oUe(i[o],r)?e.force(l):null,s&&e.force(l,s);for(a=e.numForces||0;o<a;++o)e.force(Vv+o,null);return e.numForces=i.length,e}function oUe(e,t){var n,r;for(n in e)if(dt(r=e[n])&&t.modified(si(r)))return 1;return 0}function aUe(e){var t,n;ze(DU,e.force)||le("Unrecognized force: "+e.force),t=DU[e.force]();for(n in e)dt(t[n])&&sUe(t[n],e[n],e);return t}function sUe(e,t,n){e(dt(t)?r=>t(r,n):t)}const lUe=Object.freeze(Object.defineProperty({__proto__:null,force:Qj},Symbol.toStringTag,{value:"Module"}));function uUe(e,t){return e.parent===t.parent?1:2}function cUe(e){return e.reduce(dUe,0)/e.length}function dUe(e,t){return e+t.x}function fUe(e){return 1+e.reduce(pUe,0)}function pUe(e,t){return Math.max(e,t.y)}function hUe(e){for(var t;t=e.children;)e=t[0];return e}function mUe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function gUe(){var e=uUe,t=1,n=1,r=!1;function i(o){var a,s=0;o.eachAfter(function(f){var h=f.children;h?(f.x=cUe(h),f.y=fUe(h)):(f.x=a?s+=e(f,a):0,f.y=0,a=f)});var l=hUe(o),u=mUe(o),c=l.x-e(l,u)/2,d=u.x+e(u,l)/2;return o.eachAfter(r?function(f){f.x=(f.x-o.x)*t,f.y=(o.y-f.y)*n}:function(f){f.x=(f.x-c)/(d-c)*t,f.y=(1-(o.y?f.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function bUe(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function yUe(){return this.eachAfter(bUe)}function vUe(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function xUe(e,t){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function wUe(e,t){for(var n=this,r=[n],i=[],o,a,s,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function ZUe(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function SUe(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function kUe(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function _Ue(e){for(var t=this,n=GUe(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function GUe(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function IUe(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function WUe(){return Array.from(this)}function EUe(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function XUe(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*LUe(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function qj(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=VUe)):t===void 0&&(t=CUe);for(var n=new Ig(e),r,i=[n],o,a,s,l;r=i.pop();)if((a=t(r.data))&&(l=(a=Array.from(a)).length))for(r.children=a,s=l-1;s>=0;--s)i.push(o=a[s]=new Ig(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(lme)}function RUe(){return qj(this).eachBefore(YUe)}function CUe(e){return e.children}function VUe(e){return Array.isArray(e)?e[1]:null}function YUe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function lme(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Ig(e){this.data=e,this.depth=this.height=0,this.parent=null}Ig.prototype=qj.prototype={constructor:Ig,count:yUe,each:vUe,eachAfter:wUe,eachBefore:xUe,find:ZUe,sum:SUe,sort:kUe,path:_Ue,ancestors:IUe,descendants:WUe,leaves:EUe,links:XUe,copy:RUe,[Symbol.iterator]:LUe};function r9(e){return e==null?null:ume(e)}function ume(e){if(typeof e!="function")throw new Error;return e}function sp(){return 0}function km(e){return function(){return e}}const TUe=1664525,NUe=1013904223,AU=4294967296;function FUe(){let e=1;return()=>(e=(TUe*e+NUe)%AU)/AU}function MUe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function OUe(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function zUe(e,t){for(var n=0,r=(e=OUe(Array.from(e),t)).length,i=[],o,a;n<r;)o=e[n],a&&cme(a,o)?++n:(a=jUe(i=PUe(i,o)),n=0);return a}function PUe(e,t){var n,r;if(_R(t,e))return[t];for(n=0;n<e.length;++n)if(ok(t,e[n])&&_R(Yv(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(ok(Yv(e[n],e[r]),t)&&ok(Yv(e[n],t),e[r])&&ok(Yv(e[r],t),e[n])&&_R(dme(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function ok(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function cme(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function _R(e,t){for(var n=0;n<t.length;++n)if(!cme(e,t[n]))return!1;return!0}function jUe(e){switch(e.length){case 1:return HUe(e[0]);case 2:return Yv(e[0],e[1]);case 3:return dme(e[0],e[1],e[2])}}function HUe(e){return{x:e.x,y:e.y,r:e.r}}function Yv(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,l=o-n,u=a-r,c=s-i,d=Math.sqrt(l*l+u*u);return{x:(n+o+l/d*c)/2,y:(r+a+u/d*c)/2,r:(d+i+s)/2}}function dme(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,l=t.r,u=n.x,c=n.y,d=n.r,f=r-a,h=r-u,m=i-s,g=i-c,y=l-o,v=d-o,w=r*r+i*i-o*o,Z=w-a*a-s*s+l*l,k=w-u*u-c*c+d*d,_=h*m-f*g,R=(m*k-g*Z)/(_*2)-r,I=(g*y-m*v)/_,E=(h*Z-f*k)/(_*2)-i,X=(f*v-h*y)/_,Y=I*I+X*X-1,C=2*(o+R*I+E*X),N=R*R+E*E-o*o,V=-(Math.abs(Y)>1e-6?(C+Math.sqrt(C*C-4*Y*N))/(2*Y):N/C);return{x:r+R+I*V,y:i+E+X*V,r:V}}function UU(e,t,n){var r=e.x-t.x,i,o,a=e.y-t.y,s,l,u=r*r+a*a;u?(o=t.r+n.r,o*=o,l=e.r+n.r,l*=l,o>l?(i=(u+l-o)/(2*u),s=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-s*a,n.y=e.y-i*a+s*r):(i=(u+o-l)/(2*u),s=Math.sqrt(Math.max(0,o/u-i*i)),n.x=t.x+i*r-s*a,n.y=t.y+i*a+s*r)):(n.x=t.x+n.r,n.y=t.y)}function $U(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function QU(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function ak(e){this._=e,this.next=null,this.previous=null}function JUe(e,t){if(!(o=(e=MUe(e)).length))return 0;var n,r,i,o,a,s,l,u,c,d,f;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;UU(r,n,i=e[2]),n=new ak(n),r=new ak(r),i=new ak(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<o;++l){UU(n._,r._,i=e[l]),i=new ak(i),u=r.next,c=n.previous,d=r._.r,f=n._.r;do if(d<=f){if($U(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}d+=u._.r,u=u.next}else{if($U(c._,i._)){n=c,n.next=r,r.previous=n,--l;continue e}f+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=QU(n);(i=i.next)!==r;)(s=QU(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=zUe(n,t),l=0;l<o;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function BUe(e){return Math.sqrt(e.value)}function KUe(){var e=null,t=1,n=1,r=sp;function i(o){const a=FUe();return o.x=t/2,o.y=n/2,e?o.eachBefore(qU(e)).eachAfter(GR(r,.5,a)).eachBefore(e2(1)):o.eachBefore(qU(BUe)).eachAfter(GR(sp,1,a)).eachAfter(GR(r,o.r/Math.min(t,n),a)).eachBefore(e2(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=r9(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:km(+o),i):r},i}function qU(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function GR(e,t,n){return function(r){if(i=r.children){var i,o,a=i.length,s=e(r)*t||0,l;if(s)for(o=0;o<a;++o)i[o].r+=s;if(l=JUe(i,n),s)for(o=0;o<a;++o)i[o].r-=s;r.r=l+s}}}function e2(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function fme(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function B5(e,t,n,r,i){for(var o=e.children,a,s=-1,l=o.length,u=e.value&&(r-t)/e.value;++s<l;)a=o[s],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*u}function DUe(){var e=1,t=1,n=0,r=!1;function i(a){var s=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/s,a.eachBefore(o(t,s)),r&&a.eachBefore(fme),a}function o(a,s){return function(l){l.children&&B5(l,l.x0,a*(l.depth+1)/s,l.x1,a*(l.depth+2)/s);var u=l.x0,c=l.y0,d=l.x1-n,f=l.y1-n;d<u&&(u=d=(u+d)/2),f<c&&(c=f=(c+f)/2),l.x0=u,l.y0=c,l.x1=d,l.y1=f}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var AUe={depth:-1},t2={},IR={};function UUe(e){return e.id}function $Ue(e){return e.parentId}function n2(){var e=UUe,t=$Ue,n;function r(i){var o=Array.from(i),a=e,s=t,l,u,c,d,f,h,m,g,y=new Map;if(n!=null){const v=o.map((k,_)=>QUe(n(k,_,i))),w=v.map(r2),Z=new Set(v).add("");for(const k of w)Z.has(k)||(Z.add(k),v.push(k),w.push(r2(k)),o.push(IR));a=(k,_)=>v[_],s=(k,_)=>w[_]}for(c=0,l=o.length;c<l;++c)u=o[c],h=o[c]=new Ig(u),(m=a(u,c,i))!=null&&(m+="")&&(g=h.id=m,y.set(g,y.has(g)?t2:h)),(m=s(u,c,i))!=null&&(m+="")&&(h.parent=m);for(c=0;c<l;++c)if(h=o[c],m=h.parent){if(f=y.get(m),!f)throw new Error("missing: "+m);if(f===t2)throw new Error("ambiguous: "+m);f.children?f.children.push(h):f.children=[h],h.parent=f}else{if(d)throw new Error("multiple roots");d=h}if(!d)throw new Error("no root");if(n!=null){for(;d.data===IR&&d.children.length===1;)d=d.children[0],--l;for(let v=o.length-1;v>=0&&(h=o[v],h.data===IR);--v)h.data=null}if(d.parent=AUe,d.eachBefore(function(v){v.depth=v.parent.depth+1,--l}).eachBefore(lme),d.parent=null,l>0)throw new Error("cycle");return d}return r.id=function(i){return arguments.length?(e=r9(i),r):e},r.parentId=function(i){return arguments.length?(t=r9(i),r):t},r.path=function(i){return arguments.length?(n=r9(i),r):n},r}function QUe(e){e=`${e}`;let t=e.length;return YT(e,t-1)&&!YT(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function r2(e){let t=e.length;if(t<2)return"";for(;--t>1&&!YT(e,t););return e.slice(0,t)}function YT(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function qUe(e,t){return e.parent===t.parent?1:2}function WR(e){var t=e.children;return t?t[0]:e.t}function ER(e){var t=e.children;return t?t[t.length-1]:e.t}function e2e(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function t2e(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function n2e(e,t,n){return e.a.parent===t.parent?e.a:n}function i9(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}i9.prototype=Object.create(Ig.prototype);function r2e(e){for(var t=new i9(e,0),n,r=[t],i,o,a,s;n=r.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)r.push(i=n.children[a]=new i9(o[a],a)),i.parent=n;return(t.parent=new i9(null,0)).children=[t],t}function i2e(){var e=qUe,t=1,n=1,r=null;function i(u){var c=r2e(u);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(a),r)u.eachBefore(l);else{var d=u,f=u,h=u;u.eachBefore(function(w){w.x<d.x&&(d=w),w.x>f.x&&(f=w),w.depth>h.depth&&(h=w)});var m=d===f?1:e(d,f)/2,g=m-d.x,y=t/(f.x+m+g),v=n/(h.depth||1);u.eachBefore(function(w){w.x=(w.x+g)*y,w.y=w.depth*v})}return u}function o(u){var c=u.children,d=u.parent.children,f=u.i?d[u.i-1]:null;if(c){t2e(u);var h=(c[0].z+c[c.length-1].z)/2;f?(u.z=f.z+e(u._,f._),u.m=u.z-h):u.z=h}else f&&(u.z=f.z+e(u._,f._));u.parent.A=s(u,f,u.parent.A||d[0])}function a(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,c,d){if(c){for(var f=u,h=u,m=c,g=f.parent.children[0],y=f.m,v=h.m,w=m.m,Z=g.m,k;m=ER(m),f=WR(f),m&&f;)g=WR(g),h=ER(h),h.a=u,k=m.z+w-f.z-y+e(m._,f._),k>0&&(e2e(n2e(m,u,d),u,k),y+=k,v+=k),w+=m.m,y+=f.m,Z+=g.m,v+=h.m;m&&!ER(h)&&(h.t=m,h.m+=w-v),f&&!WR(g)&&(g.t=f,g.m+=y-Z,d=u)}return d}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function C1(e,t,n,r,i){for(var o=e.children,a,s=-1,l=o.length,u=e.value&&(i-n)/e.value;++s<l;)a=o[s],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*u}var pme=(1+Math.sqrt(5))/2;function hme(e,t,n,r,i,o){for(var a=[],s=t.children,l,u,c=0,d=0,f=s.length,h,m,g=t.value,y,v,w,Z,k,_,R;c<f;){h=i-n,m=o-r;do y=s[d++].value;while(!y&&d<f);for(v=w=y,_=Math.max(m/h,h/m)/(g*e),R=y*y*_,k=Math.max(w/R,R/v);d<f;++d){if(y+=u=s[d].value,u<v&&(v=u),u>w&&(w=u),R=y*y*_,Z=Math.max(w/R,R/v),Z>k){y-=u;break}k=Z}a.push(l={value:y,dice:h<m,children:s.slice(c,d)}),l.dice?B5(l,n,r,i,g?r+=m*y/g:o):C1(l,n,r,g?n+=h*y/g:i,o),g-=y,c=d}return a}const mme=function e(t){function n(r,i,o,a,s){hme(t,r,i,o,a,s)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(pme);function o2e(){var e=mme,t=!1,n=1,r=1,i=[0],o=sp,a=sp,s=sp,l=sp,u=sp;function c(f){return f.x0=f.y0=0,f.x1=n,f.y1=r,f.eachBefore(d),i=[0],t&&f.eachBefore(fme),f}function d(f){var h=i[f.depth],m=f.x0+h,g=f.y0+h,y=f.x1-h,v=f.y1-h;y<m&&(m=y=(m+y)/2),v<g&&(g=v=(g+v)/2),f.x0=m,f.y0=g,f.x1=y,f.y1=v,f.children&&(h=i[f.depth+1]=o(f)/2,m+=u(f)-h,g+=a(f)-h,y-=s(f)-h,v-=l(f)-h,y<m&&(m=y=(m+y)/2),v<g&&(g=v=(g+v)/2),e(f,m,g,y,v))}return c.round=function(f){return arguments.length?(t=!!f,c):t},c.size=function(f){return arguments.length?(n=+f[0],r=+f[1],c):[n,r]},c.tile=function(f){return arguments.length?(e=ume(f),c):e},c.padding=function(f){return arguments.length?c.paddingInner(f).paddingOuter(f):c.paddingInner()},c.paddingInner=function(f){return arguments.length?(o=typeof f=="function"?f:km(+f),c):o},c.paddingOuter=function(f){return arguments.length?c.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):c.paddingTop()},c.paddingTop=function(f){return arguments.length?(a=typeof f=="function"?f:km(+f),c):a},c.paddingRight=function(f){return arguments.length?(s=typeof f=="function"?f:km(+f),c):s},c.paddingBottom=function(f){return arguments.length?(l=typeof f=="function"?f:km(+f),c):l},c.paddingLeft=function(f){return arguments.length?(u=typeof f=="function"?f:km(+f),c):u},c}function a2e(e,t,n,r,i){var o=e.children,a,s=o.length,l,u=new Array(s+1);for(u[0]=l=a=0;a<s;++a)u[a+1]=l+=o[a].value;c(0,s,e.value,t,n,r,i);function c(d,f,h,m,g,y,v){if(d>=f-1){var w=o[d];w.x0=m,w.y0=g,w.x1=y,w.y1=v;return}for(var Z=u[d],k=h/2+Z,_=d+1,R=f-1;_<R;){var I=_+R>>>1;u[I]<k?_=I+1:R=I}k-u[_-1]<u[_]-k&&d+1<_&&--_;var E=u[_]-Z,X=h-E;if(y-m>v-g){var Y=h?(m*X+y*E)/h:y;c(d,_,E,m,g,Y,v),c(_,f,X,Y,g,y,v)}else{var C=h?(g*X+v*E)/h:v;c(d,_,E,m,g,y,C),c(_,f,X,m,C,y,v)}}}function s2e(e,t,n,r,i){(e.depth&1?C1:B5)(e,t,n,r,i)}const l2e=function e(t){function n(r,i,o,a,s){if((l=r._squarify)&&l.ratio===t)for(var l,u,c,d,f=-1,h,m=l.length,g=r.value;++f<m;){for(u=l[f],c=u.children,d=u.value=0,h=c.length;d<h;++d)u.value+=c[d].value;u.dice?B5(u,i,o,a,g?o+=(s-o)*u.value/g:s):C1(u,i,o,g?i+=(a-i)*u.value/g:a,s),g-=u.value}else r._squarify=l=hme(t,r,i,o,a,s),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(pme);function TT(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function e4(e){ae.call(this,null,e)}e4.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const u2e=e=>e.values;Se(e4,ae,{transform(e,t){t.source||le("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(a=>{a.children&&q3(a.data)&&i.rem.push(a.data)}),this.value=o=qj({values:Ee(e.keys).reduce((a,s)=>(a.key(s),a),c2e()).entries(i.source)},u2e),n&&o.each(a=>{a.children&&(a=Nt(a.data),i.add.push(a),i.source.push(a))}),TT(o,He,He)),i.source.root=o,i}});function c2e(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const a=i.length,s=e[o++],l={},u={};let c=-1,d,f,h;for(;++c<a;)d=s(f=i[c])+"",(h=l[d])?h.push(f):l[d]=[f];for(d in l)u[d]=n(l[d],o);return u}function r(i,o){if(++o>e.length)return i;const a=[];for(const s in i)a.push({key:s,values:r(i[s],o)});return a}return t}function pc(e){ae.call(this,null,e)}const d2e=(e,t)=>e.parent===t.parent?1:2;Se(pc,ae,{transform(e,t){(!t.source||!t.source.root)&&le(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(_h(e.sort,a=>a.data)),f2e(n,this.params,e),n.separation&&n.separation(e.separation!==!1?d2e:db);try{this.value=n(i)}catch(a){le(a)}return i.each(a=>p2e(a,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function f2e(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function p2e(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const NT=["x","y","r","depth","children"];function t4(e){pc.call(this,e)}t4.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:NT.length,default:NT}]};Se(t4,pc,{layout:KUe,params:["radius","size","padding"],fields:NT});const FT=["x0","y0","x1","y1","depth","children"];function n4(e){pc.call(this,e)}n4.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:FT.length,default:FT}]};Se(n4,pc,{layout:DUe,params:["size","round","padding"],fields:FT});function r4(e){ae.call(this,null,e)}r4.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Se(r4,ae,{transform(e,t){t.source||le("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?TT(n2().id(e.key).parentId(e.parentKey)(i.source),e.key,Sa):TT(n2()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const i2={tidy:i2e,cluster:gUe},MT=["x","y","depth","children"];function i4(e){pc.call(this,e)}i4.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:MT.length,default:MT}]};Se(i4,pc,{layout(e){const t=e||"tidy";if(ze(i2,t))return i2[t]();le("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:MT});function o4(e){ae.call(this,[],e)}o4.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Se(o4,ae,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||le("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,a=>o[He(a)]=1),r.each(a=>{const s=a.data,l=a.parent&&a.parent.data;l&&o[He(s)]&&o[He(l)]&&i.add.push(Nt({source:l,target:s}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,a=>o[He(a)]=1),n.forEach(a=>{(o[He(a.source)]||o[He(a.target)])&&i.mod.push(a)})),i}});const o2={binary:a2e,dice:B5,slice:C1,slicedice:s2e,squarify:mme,resquarify:l2e},OT=["x0","y0","x1","y1","depth","children"];function a4(e){pc.call(this,e)}a4.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:OT.length,default:OT}]};Se(a4,pc,{layout(){const e=o2e();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{ze(o2,t)?e.tile(o2[t]):le("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:OT});const h2e=Object.freeze(Object.defineProperty({__proto__:null,nest:e4,pack:t4,partition:n4,stratify:r4,tree:i4,treelinks:o4,treemap:a4},Symbol.toStringTag,{value:"Module"})),XR=4278190080;function m2e(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function g2e(e,t,n,r,i){const o=e.width,a=e.height,s=r||i,l=_d(o,a).getContext("2d"),u=_d(o,a).getContext("2d"),c=s&&_d(o,a).getContext("2d");n.forEach(E=>o9(l,E,!1)),o9(u,t,!1),s&&o9(c,t,!0);const d=LR(l,o,a),f=LR(u,o,a),h=s&&LR(c,o,a),m=e.bitmap(),g=s&&e.bitmap();let y,v,w,Z,k,_,R,I;for(v=0;v<a;++v)for(y=0;y<o;++y)k=v*o+y,_=d[k]&XR,I=f[k]&XR,R=s&&h[k]&XR,(_||R||I)&&(w=e(y),Z=e(v),!i&&(_||I)&&m.set(w,Z),s&&(_||R)&&g.set(w,Z));return[m,g]}function LR(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function o9(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>o9(e,o.items,n))}):jo[r].draw(e,{items:n?t.map(b2e):t})}function b2e(e){const t=e1(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const yu=5,xi=31,xw=32,Pc=new Uint32Array(xw+1),qa=new Uint32Array(xw+1);qa[0]=0;Pc[0]=~qa[0];for(let e=1;e<=xw;++e)qa[e]=qa[e-1]<<1|1,Pc[e]=~qa[e];function y2e(e,t){const n=new Uint32Array(~~((e*t+xw)/xw));function r(o,a){n[o]|=a}function i(o,a){n[o]&=a}return{array:n,get:(o,a)=>{const s=a*e+o;return n[s>>>yu]&1<<(s&xi)},set:(o,a)=>{const s=a*e+o;r(s>>>yu,1<<(s&xi))},clear:(o,a)=>{const s=a*e+o;i(s>>>yu,~(1<<(s&xi)))},getRange:(o,a,s,l)=>{let u=l,c,d,f,h;for(;u>=a;--u)if(c=u*e+o,d=u*e+s,f=c>>>yu,h=d>>>yu,f===h){if(n[f]&Pc[c&xi]&qa[(d&xi)+1])return!0}else{if(n[f]&Pc[c&xi]||n[h]&qa[(d&xi)+1])return!0;for(let m=f+1;m<h;++m)if(n[m])return!0}return!1},setRange:(o,a,s,l)=>{let u,c,d,f,h;for(;a<=l;++a)if(u=a*e+o,c=a*e+s,d=u>>>yu,f=c>>>yu,d===f)r(d,Pc[u&xi]&qa[(c&xi)+1]);else for(r(d,Pc[u&xi]),r(f,qa[(c&xi)+1]),h=d+1;h<f;++h)r(h,4294967295)},clearRange:(o,a,s,l)=>{let u,c,d,f,h;for(;a<=l;++a)if(u=a*e+o,c=a*e+s,d=u>>>yu,f=c>>>yu,d===f)i(d,qa[u&xi]|Pc[(c&xi)+1]);else for(i(d,qa[u&xi]),i(f,Pc[(c&xi)+1]),h=d+1;h<f;++h)i(h,0)},outOfBounds:(o,a,s,l)=>o<0||a<0||l>=t||s>=e}}function v2e(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),a=s=>~~((s+n)/r);return a.invert=s=>s*r-n,a.bitmap=()=>y2e(i,o),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function x2e(e,t,n,r){const i=e.width,o=e.height;return function(a){const s=a.datum.datum.items[r].items,l=s.length,u=a.datum.fontSize,c=bs.width(a.datum,a.datum.text);let d=0,f,h,m,g,y,v,w;for(let Z=0;Z<l;++Z)f=s[Z].x,m=s[Z].y,h=s[Z].x2===void 0?f:s[Z].x2,g=s[Z].y2===void 0?m:s[Z].y2,y=(f+h)/2,v=(m+g)/2,w=Math.abs(h-f+g-m),w>=d&&(d=w,a.x=y,a.y=v);return y=c/2,v=u/2,f=a.x-y,h=a.x+y,m=a.y-v,g=a.y+v,a.align="center",f<0&&h<=i?a.align="left":0<=f&&i<h&&(a.align="right"),a.baseline="middle",m<0&&g<=o?a.baseline="top":0<=m&&o<g&&(a.baseline="bottom"),!0}}function LI(e,t,n,r,i,o){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>o}function od(e,t,n,r,i,o,a,s){const l=i*o/(r*2),u=e(t-l),c=e(t+l),d=e(n-(o=o/2)),f=e(n+o);return a.outOfBounds(u,d,c,f)||a.getRange(u,d,c,f)||s&&s.getRange(u,d,c,f)}function w2e(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1];function l(u,c,d,f,h){const m=e.invert(u),g=e.invert(c);let y=d,v=o,w;if(!LI(m,g,f,h,i,o)&&!od(e,m,g,h,f,y,a,s)&&!od(e,m,g,h,f,h,a,null)){for(;v-y>=1;)w=(y+v)/2,od(e,m,g,h,f,w,a,s)?v=w:y=w;if(y>d)return[m,g,y,!0]}}return function(u){const c=u.datum.datum.items[r].items,d=c.length,f=u.datum.fontSize,h=bs.width(u.datum,u.datum.text);let m=n?f:0,g=!1,y=!1,v=0,w,Z,k,_,R,I,E,X,Y,C,N,V,F,O,P,H,M;for(let j=0;j<d;++j){for(w=c[j].x,k=c[j].y,Z=c[j].x2===void 0?w:c[j].x2,_=c[j].y2===void 0?k:c[j].y2,w>Z&&(M=w,w=Z,Z=M),k>_&&(M=k,k=_,_=M),Y=e(w),N=e(Z),C=~~((Y+N)/2),V=e(k),O=e(_),F=~~((V+O)/2),E=C;E>=Y;--E)for(X=F;X>=V;--X)H=l(E,X,m,h,f),H&&([u.x,u.y,m,g]=H);for(E=C;E<=N;++E)for(X=F;X<=O;++X)H=l(E,X,m,h,f),H&&([u.x,u.y,m,g]=H);!g&&!n&&(P=Math.abs(Z-w+_-k),R=(w+Z)/2,I=(k+_)/2,P>=v&&!LI(R,I,h,f,i,o)&&!od(e,R,I,f,h,f,a,null)&&(v=P,u.x=R,u.y=I,y=!0))}return g||y?(R=h/2,I=f/2,a.setRange(e(u.x-R),e(u.y-I),e(u.x+R),e(u.y+I)),u.align="center",u.baseline="middle",!0):!1}}const Z2e=[-1,-1,1,1],S2e=[-1,1,-1,1];function k2e(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[r].items,d=c.length,f=u.datum.fontSize,h=bs.width(u.datum,u.datum.text),m=[];let g=n?f:0,y=!1,v=!1,w=0,Z,k,_,R,I,E,X,Y,C,N,V,F;for(let O=0;O<d;++O){for(Z=c[O].x,_=c[O].y,k=c[O].x2===void 0?Z:c[O].x2,R=c[O].y2===void 0?_:c[O].y2,m.push([e((Z+k)/2),e((_+R)/2)]);m.length;)if([X,Y]=m.pop(),!(a.get(X,Y)||s.get(X,Y)||l.get(X,Y))){l.set(X,Y);for(let P=0;P<4;++P)I=X+Z2e[P],E=Y+S2e[P],l.outOfBounds(I,E,I,E)||m.push([I,E]);if(I=e.invert(X),E=e.invert(Y),C=g,N=o,!LI(I,E,h,f,i,o)&&!od(e,I,E,f,h,C,a,s)&&!od(e,I,E,f,h,f,a,null)){for(;N-C>=1;)V=(C+N)/2,od(e,I,E,f,h,V,a,s)?N=V:C=V;C>g&&(u.x=I,u.y=E,g=C,y=!0)}}!y&&!n&&(F=Math.abs(k-Z+R-_),I=(Z+k)/2,E=(_+R)/2,F>=w&&!LI(I,E,h,f,i,o)&&!od(e,I,E,f,h,f,a,null)&&(w=F,u.x=I,u.y=E,v=!0))}return y||v?(I=h/2,E=f/2,a.setRange(e(u.x-I),e(u.y-E),e(u.x+I),e(u.y+E)),u.align="center",u.baseline="middle",!0):!1}}const _2e=["right","center","left"],G2e=["bottom","middle","top"];function I2e(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1],l=r.length;return function(u){var c;const d=u.boundary,f=u.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>i||d[3]>o)return!1;let h=(c=u.textWidth)!==null&&c!==void 0?c:0,m,g,y,v,w,Z,k,_,R,I,E,X,Y,C,N;for(let V=0;V<l;++V){if(m=(n[V]&3)-1,g=(n[V]>>>2&3)-1,y=m===0&&g===0||r[V]<0,v=m&&g?Math.SQRT1_2:1,w=r[V]<0?-1:1,Z=d[1+m]+r[V]*m*v,E=d[4+g]+w*f*g/2+r[V]*g*v,_=E-f/2,R=E+f/2,X=e(Z),C=e(_),N=e(R),!h)if(a2(X,X,C,N,a,s,Z,Z,_,R,d,y))h=bs.width(u.datum,u.datum.text);else continue;if(I=Z+w*h*m/2,Z=I-h/2,k=I+h/2,X=e(Z),Y=e(k),a2(X,Y,C,N,a,s,Z,k,_,R,d,y))return u.x=m?m*w<0?k:Z:I,u.y=g?g*w<0?R:_:E,u.align=_2e[m*w+1],u.baseline=G2e[g*w+1],a.setRange(X,C,Y,N),!0}return!1}}function a2(e,t,n,r,i,o,a,s,l,u,c,d){return!(i.outOfBounds(e,n,t,r)||(d&&o||i).getRange(e,n,t,r))}const RR=0,CR=4,VR=8,YR=0,TR=1,NR=2,W2e={"top-left":RR+YR,top:RR+TR,"top-right":RR+NR,left:CR+YR,middle:CR+TR,right:CR+NR,"bottom-left":VR+YR,bottom:VR+TR,"bottom-right":VR+NR},E2e={naive:x2e,"reduced-search":w2e,floodfill:k2e};function X2e(e,t,n,r,i,o,a,s,l,u,c){if(!e.length)return e;const d=Math.max(r.length,i.length),f=L2e(r,d),h=R2e(i,d),m=C2e(e[0].datum),g=m==="group"&&e[0].datum.items[l].marktype,y=g==="area",v=V2e(m,g,s,l),w=u===null||u===1/0,Z=y&&c==="naive";let k=-1,_=-1;const R=e.map(Y=>{const C=w?bs.width(Y,Y.text):void 0;return k=Math.max(k,C),_=Math.max(_,Y.fontSize),{datum:Y,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(Y),textWidth:C}});u=u===null||u===1/0?Math.max(k,_)+Math.max(...r):u;const I=v2e(t[0],t[1],u);let E;if(!Z){n&&R.sort((N,V)=>n(N.datum,V.datum));let Y=!1;for(let N=0;N<h.length&&!Y;++N)Y=h[N]===5||f[N]<0;const C=(m&&a||y)&&e.map(N=>N.datum);E=o.length||C?g2e(I,C||[],o,Y,y):m2e(I,a&&R)}const X=y?E2e[c](I,E,a,l):I2e(I,E,h,f);return R.forEach(Y=>Y.opacity=+X(Y)),R}function L2e(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function R2e(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=W2e[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function C2e(e){return e&&e.mark&&e.mark.marktype}function V2e(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const a=o.datum.items[r].items;return i(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:o=>{const a=o.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:i}const zT=["x","y","opacity","align","baseline"],gme=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function s4(e){ae.call(this,null,e)}s4.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:gme},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:zT.length,default:zT}]};Se(s4,ae,{transform(e,t){function n(o){const a=e[o];return dt(a)&&t.modified(a.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&le("Size parameter should be specified as a [width, height] array.");const i=e.as||zT;return X2e(t.materialize(t.SOURCE).source||[],e.size,e.sort,Ee(e.offset==null?1:e.offset),Ee(e.anchor||gme),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const a=o.datum;a[i[0]]=o.x,a[i[1]]=o.y,a[i[2]]=o.opacity,a[i[3]]=o.align,a[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const Y2e=Object.freeze(Object.defineProperty({__proto__:null,label:s4},Symbol.toStringTag,{value:"Module"}));function bme(e,t){var n=[],r=function(c){return c(s)},i,o,a,s,l,u;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(s);return n}function l4(e){ae.call(this,null,e)}l4.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Se(l4,ae,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=bme(r,e.groupby),o=(e.groupby||[]).map(On),a=o.length,s=e.as||[On(e.x),On(e.y)],l=[];i.forEach(u=>{Zde(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const d={};for(let f=0;f<a;++f)d[o[f]]=u.dims[f];d[s[0]]=c[0],d[s[1]]=c[1],l.push(Nt(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const PT={linear:tP,log:yde,exp:vde,pow:xde,quad:nP,poly:wde},T2e=(e,t)=>e==="poly"?t:e==="quad"?2:1;function u4(e){ae.call(this,null,e)}u4.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(PT)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Se(u4,ae,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=bme(r,e.groupby),o=(e.groupby||[]).map(On),a=e.method||"linear",s=e.order||3,l=T2e(a,s),u=e.as||[On(e.x),On(e.y)],c=PT[a],d=[];let f=e.extent;ze(PT,a)||le("Invalid regression method: "+a),f!=null&&a==="log"&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),i.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,s);if(e.params){d.push(Nt({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=f||zl(h,e.x),y=v=>{const w={};for(let Z=0;Z<o.length;++Z)w[o[Z]]=h.dims[Z];w[u[0]]=v[0],w[u[1]]=v[1],d.push(Nt(w))};a==="linear"?g.forEach(v=>y([v,m.predict(v)])):s1(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}});const N2e=Object.freeze(Object.defineProperty({__proto__:null,loess:l4,regression:u4},Symbol.toStringTag,{value:"Module"})),Ju=11102230246251565e-32,$r=134217729,F2e=(3+8*Ju)*Ju;function FR(e,t,n,r,i){let o,a,s,l,u=t[0],c=r[0],d=0,f=0;c>u==c>-u?(o=u,u=t[++d]):(o=c,c=r[++f]);let h=0;if(d<e&&f<n)for(c>u==c>-u?(a=u+o,s=o-(a-u),u=t[++d]):(a=c+o,s=o-(a-c),c=r[++f]),o=a,s!==0&&(i[h++]=s);d<e&&f<n;)c>u==c>-u?(a=o+u,l=a-o,s=o-(a-l)+(u-l),u=t[++d]):(a=o+c,l=a-o,s=o-(a-l)+(c-l),c=r[++f]),o=a,s!==0&&(i[h++]=s);for(;d<e;)a=o+u,l=a-o,s=o-(a-l)+(u-l),u=t[++d],o=a,s!==0&&(i[h++]=s);for(;f<n;)a=o+c,l=a-o,s=o-(a-l)+(c-l),c=r[++f],o=a,s!==0&&(i[h++]=s);return(o!==0||h===0)&&(i[h++]=o),h}function M2e(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function K5(e){return new Float64Array(e)}const O2e=(3+16*Ju)*Ju,z2e=(2+12*Ju)*Ju,P2e=(9+64*Ju)*Ju*Ju,hm=K5(4),s2=K5(8),l2=K5(12),u2=K5(16),wi=K5(4);function j2e(e,t,n,r,i,o,a){let s,l,u,c,d,f,h,m,g,y,v,w,Z,k,_,R,I,E;const X=e-i,Y=n-i,C=t-o,N=r-o;k=X*N,f=$r*X,h=f-(f-X),m=X-h,f=$r*N,g=f-(f-N),y=N-g,_=m*y-(k-h*g-m*g-h*y),R=C*Y,f=$r*C,h=f-(f-C),m=C-h,f=$r*Y,g=f-(f-Y),y=Y-g,I=m*y-(R-h*g-m*g-h*y),v=_-I,d=_-v,hm[0]=_-(v+d)+(d-I),w=k+v,d=w-k,Z=k-(w-d)+(v-d),v=Z-R,d=Z-v,hm[1]=Z-(v+d)+(d-R),E=w+v,d=E-w,hm[2]=w-(E-d)+(v-d),hm[3]=E;let V=M2e(4,hm),F=z2e*a;if(V>=F||-V>=F||(d=e-X,s=e-(X+d)+(d-i),d=n-Y,u=n-(Y+d)+(d-i),d=t-C,l=t-(C+d)+(d-o),d=r-N,c=r-(N+d)+(d-o),s===0&&l===0&&u===0&&c===0)||(F=P2e*a+F2e*Math.abs(V),V+=X*c+N*s-(C*u+Y*l),V>=F||-V>=F))return V;k=s*N,f=$r*s,h=f-(f-s),m=s-h,f=$r*N,g=f-(f-N),y=N-g,_=m*y-(k-h*g-m*g-h*y),R=l*Y,f=$r*l,h=f-(f-l),m=l-h,f=$r*Y,g=f-(f-Y),y=Y-g,I=m*y-(R-h*g-m*g-h*y),v=_-I,d=_-v,wi[0]=_-(v+d)+(d-I),w=k+v,d=w-k,Z=k-(w-d)+(v-d),v=Z-R,d=Z-v,wi[1]=Z-(v+d)+(d-R),E=w+v,d=E-w,wi[2]=w-(E-d)+(v-d),wi[3]=E;const O=FR(4,hm,4,wi,s2);k=X*c,f=$r*X,h=f-(f-X),m=X-h,f=$r*c,g=f-(f-c),y=c-g,_=m*y-(k-h*g-m*g-h*y),R=C*u,f=$r*C,h=f-(f-C),m=C-h,f=$r*u,g=f-(f-u),y=u-g,I=m*y-(R-h*g-m*g-h*y),v=_-I,d=_-v,wi[0]=_-(v+d)+(d-I),w=k+v,d=w-k,Z=k-(w-d)+(v-d),v=Z-R,d=Z-v,wi[1]=Z-(v+d)+(d-R),E=w+v,d=E-w,wi[2]=w-(E-d)+(v-d),wi[3]=E;const P=FR(O,s2,4,wi,l2);k=s*c,f=$r*s,h=f-(f-s),m=s-h,f=$r*c,g=f-(f-c),y=c-g,_=m*y-(k-h*g-m*g-h*y),R=l*u,f=$r*l,h=f-(f-l),m=l-h,f=$r*u,g=f-(f-u),y=u-g,I=m*y-(R-h*g-m*g-h*y),v=_-I,d=_-v,wi[0]=_-(v+d)+(d-I),w=k+v,d=w-k,Z=k-(w-d)+(v-d),v=Z-R,d=Z-v,wi[1]=Z-(v+d)+(d-R),E=w+v,d=E-w,wi[2]=w-(E-d)+(v-d),wi[3]=E;const H=FR(P,l2,4,wi,u2);return u2[H-1]}function sk(e,t,n,r,i,o){const a=(t-o)*(n-i),s=(e-i)*(r-o),l=a-s;if(a===0||s===0||a>0!=s>0)return l;const u=Math.abs(a+s);return Math.abs(l)>=O2e*u?l:-j2e(e,t,n,r,i,o,u)}const c2=Math.pow(2,-52),lk=new Uint32Array(512);class RI{static from(t,n=D2e,r=A2e){const i=t.length,o=new Float64Array(i*2);for(let a=0;a<i;a++){const s=t[a];o[2*a]=n(s),o[2*a+1]=r(s)}return new RI(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,a=t.length>>1;let s=1/0,l=1/0,u=-1/0,c=-1/0;for(let Y=0;Y<a;Y++){const C=t[2*Y],N=t[2*Y+1];C<s&&(s=C),N<l&&(l=N),C>u&&(u=C),N>c&&(c=N),this._ids[Y]=Y}const d=(s+u)/2,f=(l+c)/2;let h=1/0,m,g,y;for(let Y=0;Y<a;Y++){const C=MR(d,f,t[2*Y],t[2*Y+1]);C<h&&(m=Y,h=C)}const v=t[2*m],w=t[2*m+1];h=1/0;for(let Y=0;Y<a;Y++){if(Y===m)continue;const C=MR(v,w,t[2*Y],t[2*Y+1]);C<h&&C>0&&(g=Y,h=C)}let Z=t[2*g],k=t[2*g+1],_=1/0;for(let Y=0;Y<a;Y++){if(Y===m||Y===g)continue;const C=B2e(v,w,Z,k,t[2*Y],t[2*Y+1]);C<_&&(y=Y,_=C)}let R=t[2*y],I=t[2*y+1];if(_===1/0){for(let N=0;N<a;N++)this._dists[N]=t[2*N]-t[0]||t[2*N+1]-t[1];f0(this._ids,this._dists,0,a-1);const Y=new Uint32Array(a);let C=0;for(let N=0,V=-1/0;N<a;N++){const F=this._ids[N];this._dists[F]>V&&(Y[C++]=F,V=this._dists[F])}this.hull=Y.subarray(0,C),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(sk(v,w,Z,k,R,I)<0){const Y=g,C=Z,N=k;g=y,Z=R,k=I,y=Y,R=C,I=N}const E=K2e(v,w,Z,k,R,I);this._cx=E.x,this._cy=E.y;for(let Y=0;Y<a;Y++)this._dists[Y]=MR(t[2*Y],t[2*Y+1],E.x,E.y);f0(this._ids,this._dists,0,a-1),this._hullStart=m;let X=3;r[m]=n[y]=g,r[g]=n[m]=y,r[y]=n[g]=m,i[m]=0,i[g]=1,i[y]=2,o.fill(-1),o[this._hashKey(v,w)]=m,o[this._hashKey(Z,k)]=g,o[this._hashKey(R,I)]=y,this.trianglesLen=0,this._addTriangle(m,g,y,-1,-1,-1);for(let Y=0,C,N;Y<this._ids.length;Y++){const V=this._ids[Y],F=t[2*V],O=t[2*V+1];if(Y>0&&Math.abs(F-C)<=c2&&Math.abs(O-N)<=c2||(C=F,N=O,V===m||V===g||V===y))continue;let P=0;for(let q=0,K=this._hashKey(F,O);q<this._hashSize&&(P=o[(K+q)%this._hashSize],!(P!==-1&&P!==r[P]));q++);P=n[P];let H=P,M;for(;M=r[H],sk(F,O,t[2*H],t[2*H+1],t[2*M],t[2*M+1])>=0;)if(H=M,H===P){H=-1;break}if(H===-1)continue;let j=this._addTriangle(H,V,r[H],-1,-1,i[H]);i[V]=this._legalize(j+2),i[H]=j,X++;let J=r[H];for(;M=r[J],sk(F,O,t[2*J],t[2*J+1],t[2*M],t[2*M+1])<0;)j=this._addTriangle(J,V,M,i[V],-1,i[J]),i[V]=this._legalize(j+2),r[J]=J,X--,J=M;if(H===P)for(;M=n[H],sk(F,O,t[2*M],t[2*M+1],t[2*H],t[2*H+1])<0;)j=this._addTriangle(M,V,H,-1,i[H],i[M]),this._legalize(j+2),i[M]=j,r[H]=H,X--,H=M;this._hullStart=n[V]=H,r[H]=n[J]=V,r[V]=J,o[this._hashKey(F,O)]=V,o[this._hashKey(t[2*H],t[2*H+1])]=H}this.hull=new Uint32Array(X);for(let Y=0,C=this._hullStart;Y<X;Y++)this.hull[Y]=C,C=r[C];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(H2e(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,a=0;for(;;){const s=r[t],l=t-t%3;if(a=l+(t+2)%3,s===-1){if(o===0)break;t=lk[--o];continue}const u=s-s%3,c=l+(t+1)%3,d=u+(s+2)%3,f=n[a],h=n[t],m=n[c],g=n[d];if(J2e(i[2*f],i[2*f+1],i[2*h],i[2*h+1],i[2*m],i[2*m+1],i[2*g],i[2*g+1])){n[t]=g,n[s]=f;const y=r[d];if(y===-1){let w=this._hullStart;do{if(this._hullTri[w]===d){this._hullTri[w]=t;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(t,y),this._link(s,r[a]),this._link(a,d);const v=u+(s+1)%3;o<lk.length&&(lk[o++]=v)}else{if(o===0)break;t=lk[--o]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,a){const s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=n,this._triangles[s+2]=r,this._link(s,i),this._link(s+1,o),this._link(s+2,a),this.trianglesLen+=3,s}}function H2e(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function MR(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function J2e(e,t,n,r,i,o,a,s){const l=e-a,u=t-s,c=n-a,d=r-s,f=i-a,h=o-s,m=l*l+u*u,g=c*c+d*d,y=f*f+h*h;return l*(d*y-g*h)-u*(c*y-g*f)+m*(c*h-d*f)<0}function B2e(e,t,n,r,i,o){const a=n-e,s=r-t,l=i-e,u=o-t,c=a*a+s*s,d=l*l+u*u,f=.5/(a*u-s*l),h=(u*c-s*d)*f,m=(a*d-l*c)*f;return h*h+m*m}function K2e(e,t,n,r,i,o){const a=n-e,s=r-t,l=i-e,u=o-t,c=a*a+s*s,d=l*l+u*u,f=.5/(a*u-s*l),h=e+(u*c-s*d)*f,m=t+(a*d-l*c)*f;return{x:h,y:m}}function f0(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],a=t[o];let s=i-1;for(;s>=n&&t[e[s]]>a;)e[s+1]=e[s--];e[s+1]=o}else{const i=n+r>>1;let o=n+1,a=r;Ty(e,i,o),t[e[n]]>t[e[r]]&&Ty(e,n,r),t[e[o]]>t[e[r]]&&Ty(e,o,r),t[e[n]]>t[e[o]]&&Ty(e,n,o);const s=e[o],l=t[s];for(;;){do o++;while(t[e[o]]<l);do a--;while(t[e[a]]>l);if(a<o)break;Ty(e,o,a)}e[n+1]=e[a],e[a]=s,r-o+1>=a-n?(f0(e,t,o,r),f0(e,t,n,a-1)):(f0(e,t,n,a-1),f0(e,t,o,r))}}function Ty(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function D2e(e){return e[0]}function A2e(e){return e[1]}const d2=1e-6;class bp{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>d2||Math.abs(this._y1-o)>d2)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class jT{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let U2e=class{constructor(e,[t,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(t=+t))||!((i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=r,this.xmin=t,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let f=0,h=0,m=n.length,g,y;f<m;f+=3,h+=2){const v=n[f]*2,w=n[f+1]*2,Z=n[f+2]*2,k=e[v],_=e[v+1],R=e[w],I=e[w+1],E=e[Z],X=e[Z+1],Y=R-k,C=I-_,N=E-k,V=X-_,F=(Y*V-C*N)*2;if(Math.abs(F)<1e-9){let O=1e9;const P=n[0]*2;O*=Math.sign((e[P]-k)*V-(e[P+1]-_)*N),g=(k+E)/2-O*V,y=(_+X)/2+O*N}else{const O=1/F,P=Y*Y+C*C,H=N*N+V*V;g=k+(V*P-C*H)*O,y=_+(Y*H-N*P)*O}i[h]=g,i[h+1]=y}let o=t[t.length-1],a,s=o*4,l,u=e[2*o],c,d=e[2*o+1];r.fill(0);for(let f=0;f<t.length;++f)o=t[f],a=s,l=u,c=d,s=o*4,u=e[2*o],d=e[2*o+1],r[a+2]=r[s]=c-d,r[a+3]=r[s+1]=u-l}render(e){const t=e==null?e=new bp:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let u=0,c=n.length;u<c;++u){const d=n[u];if(d<u)continue;const f=Math.floor(u/3)*2,h=Math.floor(d/3)*2,m=o[f],g=o[f+1],y=o[h],v=o[h+1];this._renderSegment(m,g,y,v,e)}let s,l=i[i.length-1];for(let u=0;u<i.length;++u){s=l,l=i[u];const c=Math.floor(r[l]/3)*2,d=o[c],f=o[c+1],h=s*4,m=this._project(d,f,a[h+2],a[h+3]);m&&this._renderSegment(d,f,m[0],m[1],e)}return t&&t.value()}renderBounds(e){const t=e==null?e=new bp:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=t==null?t=new bp:void 0,r=this._clip(e);if(r===null||!r.length)return;t.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let o=2;o<i;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&t.lineTo(r[o],r[o+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const r=this.cellPolygon(t);r&&(r.index=t,yield r)}}cellPolygon(e){const t=new jT;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,r,i){let o;const a=this._regioncode(e,t),s=this._regioncode(n,r);a===0&&s===0?(i.moveTo(e,t),i.lineTo(n,r)):(o=this._clipSegment(e,t,n,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(e,t,n){return t=+t,t!==t||(n=+n,n!==n)?!1:this.delaunay._step(e,t,n)===e}*neighbors(e){const t=this._clip(e);if(t)for(const n of this.delaunay.neighbors(e)){const r=this._clip(n);if(r){e:for(let i=0,o=t.length;i<o;i+=2)for(let a=0,s=r.length;a<s;a+=2)if(t[i]==r[a]&&t[i+1]==r[a+1]&&t[(i+2)%o]==r[(a+s-2)%s]&&t[(i+3)%o]==r[(a+s-1)%s]){yield n;break e}}}}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[e];if(o===-1)return null;const a=[];let s=o;do{const l=Math.floor(s/3);if(a.push(t[l*2],t[l*2+1]),s=s%3===2?s-2:s+1,i[s]!==e)break;s=r[s]}while(s!==o&&s!==-1);return a}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(t===null)return null;const{vectors:n}=this,r=e*4;return n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t)}_clipFinite(e,t){const n=t.length;let r=null,i,o,a=t[n-2],s=t[n-1],l,u=this._regioncode(a,s),c,d=0;for(let f=0;f<n;f+=2)if(i=a,o=s,a=t[f],s=t[f+1],l=u,u=this._regioncode(a,s),l===0&&u===0)c=d,d=0,r?r.push(a,s):r=[a,s];else{let h,m,g,y,v;if(l===0){if((h=this._clipSegment(i,o,a,s,l,u))===null)continue;[m,g,y,v]=h}else{if((h=this._clipSegment(a,s,i,o,u,l))===null)continue;[y,v,m,g]=h,c=d,d=this._edgecode(m,g),c&&d&&this._edge(e,c,d,r,r.length),r?r.push(m,g):r=[m,g]}c=d,d=this._edgecode(y,v),c&&d&&this._edge(e,c,d,r,r.length),r?r.push(y,v):r=[y,v]}if(r)c=d,d=this._edgecode(r[0],r[1]),c&&d&&this._edge(e,c,d,r,r.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(e,t,n,r,i,o){for(;;){if(i===0&&o===0)return[e,t,n,r];if(i&o)return null;let a,s,l=i||o;l&8?(a=e+(n-e)*(this.ymax-t)/(r-t),s=this.ymax):l&4?(a=e+(n-e)*(this.ymin-t)/(r-t),s=this.ymin):l&2?(s=t+(r-t)*(this.xmax-e)/(n-e),a=this.xmax):(s=t+(r-t)*(this.xmin-e)/(n-e),a=this.xmin),i?(e=a,t=s,i=this._regioncode(e,t)):(n=a,r=s,o=this._regioncode(n,r))}}_clipInfinite(e,t,n,r,i,o){let a=Array.from(t),s;if((s=this._project(a[0],a[1],n,r))&&a.unshift(s[0],s[1]),(s=this._project(a[a.length-2],a[a.length-1],i,o))&&a.push(s[0],s[1]),a=this._clipFinite(e,a))for(let l=0,u=a.length,c,d=this._edgecode(a[u-2],a[u-1]);l<u;l+=2)c=d,d=this._edgecode(a[l],a[l+1]),c&&d&&(l=this._edge(e,c,d,a,l),u=a.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(e,t,n,r,i){for(;t!==n;){let o,a;switch(t){case 5:t=4;continue;case 4:t=6,o=this.xmax,a=this.ymin;break;case 6:t=2;continue;case 2:t=10,o=this.xmax,a=this.ymax;break;case 10:t=8;continue;case 8:t=9,o=this.xmin,a=this.ymax;break;case 9:t=1;continue;case 1:t=5,o=this.xmin,a=this.ymin;break}(r[i]!==o||r[i+1]!==a)&&this.contains(e,o,a)&&(r.splice(i,0,o,a),i+=2)}if(r.length>4)for(let o=0;o<r.length;o+=2){const a=(o+2)%r.length,s=(o+4)%r.length;(r[o]===r[a]&&r[a]===r[s]||r[o+1]===r[a+1]&&r[a+1]===r[s+1])&&(r.splice(a,2),o-=2)}return i}_project(e,t,n,r){let i=1/0,o,a,s;if(r<0){if(t<=this.ymin)return null;(o=(this.ymin-t)/r)<i&&(s=this.ymin,a=e+(i=o)*n)}else if(r>0){if(t>=this.ymax)return null;(o=(this.ymax-t)/r)<i&&(s=this.ymax,a=e+(i=o)*n)}if(n>0){if(e>=this.xmax)return null;(o=(this.xmax-e)/n)<i&&(a=this.xmax,s=t+(i=o)*r)}else if(n<0){if(e<=this.xmin)return null;(o=(this.xmin-e)/n)<i&&(a=this.xmin,s=t+(i=o)*r)}return[a,s]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}};const $2e=2*Math.PI,mm=Math.pow;function Q2e(e){return e[0]}function q2e(e){return e[1]}function e$e(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],a=2*t[r+2];if((n[a]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function t$e(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class c4{static from(t,n=Q2e,r=q2e,i){return new c4("length"in t?n$e(t,n,r,i):Float64Array.from(r$e(t,n,r,i)))}constructor(t){this._delaunator=new RI(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&e$e(t)){this.collinear=Int32Array.from({length:n.length/2},(f,h)=>h).sort((f,h)=>n[2*f]-n[2*h]||n[2*f+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],d=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let f=0,h=n.length/2;f<h;++f){const m=t$e(n[2*f],n[2*f+1],d);n[2*f]=m[0],n[2*f+1]=m[1]}this._delaunator=new RI(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const c=o[l%3===2?l-2:l+1];(r[l]===-1||a[c]===-1)&&(a[c]=l)}for(let l=0,u=i.length;l<u;++l)s[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],a[i[0]]=1,i.length===2&&(a[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new U2e(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:a,collinear:s}=this;if(s){const d=s.indexOf(t);d>0&&(yield s[d-1]),d<s.length-1&&(yield s[d+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=a[u],u=u%3===2?u-2:u+1,a[u]!==t)return;if(u=o[u],u===-1){const d=r[(i[t]+1)%r.length];d!==c&&(yield d);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:a,halfedges:s,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,d=mm(n-u[t*2],2)+mm(r-u[t*2+1],2);const f=i[t];let h=f;do{let m=l[h];const g=mm(n-u[m*2],2)+mm(r-u[m*2+1],2);if(g<d&&(d=g,c=m),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=s[h],h===-1){if(h=o[(a[t]+1)%o.length],h!==m&&mm(n-u[h*2],2)+mm(r-u[h*2+1],2)<d)return h;break}}while(h!==f);return c}render(t){const n=t==null?t=new bp:void 0,{points:r,halfedges:i,triangles:o}=this;for(let a=0,s=i.length;a<s;++a){const l=i[a];if(l<a)continue;const u=o[a]*2,c=o[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new bp:void 0,{points:i}=this;for(let o=0,a=i.length;o<a;o+=2){const s=i[o],l=i[o+1];t.moveTo(s+n,l),t.arc(s,l,n,0,$2e)}return r&&r.value()}renderHull(t){const n=t==null?t=new bp:void 0,{hull:r,points:i}=this,o=r[0]*2,a=r.length;t.moveTo(i[o],i[o+1]);for(let s=1;s<a;++s){const l=2*r[s];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new jT;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new bp:void 0,{points:i,triangles:o}=this,a=o[t*=3]*2,s=o[t+1]*2,l=o[t+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[s],i[s+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new jT;return this.renderTriangle(t,n),n.value()}}function n$e(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let a=0;a<i;++a){const s=e[a];o[a*2]=t.call(r,s,a,e),o[a*2+1]=n.call(r,s,a,e)}return o}function*r$e(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function d4(e){ae.call(this,null,e)}d4.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const i$e=[-1e5,-1e5,1e5,1e5];Se(d4,ae,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:i$e;const o=this.value=c4.from(r,e.x,e.y).voronoi(i);for(let a=0,s=r.length;a<s;++a){const l=o.cellPolygon(a);r[a][n]=l?o$e(l):null}return t.reflow(e.modified()).modifies(n)}});function o$e(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}const a$e=Object.freeze(Object.defineProperty({__proto__:null,voronoi:d4},Symbol.toStringTag,{value:"Module"}));var OR=Math.PI/180,Tv=64,a9=2048;function s$e(){var e=[256,256],t,n,r,i,o,a,s,l=yme,u=[],c=Math.random,d={};d.layout=function(){for(var m=f(_d()),g=p$e((e[0]>>5)*e[1]),y=null,v=u.length,w=-1,Z=[],k=u.map(R=>({text:t(R),font:n(R),style:i(R),weight:o(R),rotate:a(R),size:~~(r(R)+1e-14),padding:s(R),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:R})).sort((R,I)=>I.size-R.size);++w<v;){var _=k[w];_.x=e[0]*(c()+.5)>>1,_.y=e[1]*(c()+.5)>>1,l$e(m,_,k,w),_.hasText&&h(g,_,y)&&(Z.push(_),y?c$e(y,_):y=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=e[0]>>1,_.y-=e[1]>>1)}return Z};function f(m){m.width=m.height=1;var g=Math.sqrt(m.getContext("2d").getImageData(0,0,1,1).data.length>>2);m.width=(Tv<<5)/g,m.height=a9/g;var y=m.getContext("2d");return y.fillStyle=y.strokeStyle="red",y.textAlign="center",{context:y,ratio:g}}function h(m,g,y){for(var v=g.x,w=g.y,Z=Math.sqrt(e[0]*e[0]+e[1]*e[1]),k=l(e),_=c()<.5?1:-1,R=-_,I,E,X;(I=k(R+=_))&&(E=~~I[0],X=~~I[1],!(Math.min(Math.abs(E),Math.abs(X))>=Z));)if(g.x=v+E,g.y=w+X,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!y||!u$e(g,m,e[0]))&&(!y||d$e(g,y))){for(var Y=g.sprite,C=g.width>>5,N=e[0]>>5,V=g.x-(C<<4),F=V&127,O=32-F,P=g.y1-g.y0,H=(g.y+g.y0)*N+(V>>5),M,j=0;j<P;j++){M=0;for(var J=0;J<=C;J++)m[H+J]|=M<<O|(J<C?(M=Y[j*C+J])>>>F:0);H+=N}return g.sprite=null,!0}return!1}return d.words=function(m){return arguments.length?(u=m,d):u},d.size=function(m){return arguments.length?(e=[+m[0],+m[1]],d):e},d.font=function(m){return arguments.length?(n=Ff(m),d):n},d.fontStyle=function(m){return arguments.length?(i=Ff(m),d):i},d.fontWeight=function(m){return arguments.length?(o=Ff(m),d):o},d.rotate=function(m){return arguments.length?(a=Ff(m),d):a},d.text=function(m){return arguments.length?(t=Ff(m),d):t},d.spiral=function(m){return arguments.length?(l=h$e[m]||m,d):l},d.fontSize=function(m){return arguments.length?(r=Ff(m),d):r},d.padding=function(m){return arguments.length?(s=Ff(m),d):s},d.random=function(m){return arguments.length?(c=m,d):c},d}function l$e(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(Tv<<5)/o,a9/o);var a=0,s=0,l=0,u=n.length,c,d,f,h,m;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=i.measureText(t.text+"m").width*o,f=t.size<<1,t.rotate){var g=Math.sin(t.rotate*OR),y=Math.cos(t.rotate*OR),v=c*y,w=c*g,Z=f*y,k=f*g;c=Math.max(Math.abs(v+k),Math.abs(v-k))+31>>5<<5,f=~~Math.max(Math.abs(w+Z),Math.abs(w-Z))}else c=c+31>>5<<5;if(f>l&&(l=f),a+c>=Tv<<5&&(a=0,s+=l,l=0),s+f>=a9)break;i.translate((a+(c>>1))/o,(s+(f>>1))/o),t.rotate&&i.rotate(t.rotate*OR),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=f,t.xoff=a,t.yoff=s,t.x1=c>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=c}for(var _=i.getImageData(0,0,(Tv<<5)/o,a9/o).data,R=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,d=c>>5,f=t.y1-t.y0,h=0;h<f*d;h++)R[h]=0;if(a=t.xoff,a==null)return;s=t.yoff;var I=0,E=-1;for(m=0;m<f;m++){for(h=0;h<c;h++){var X=d*m+(h>>5),Y=_[(s+m)*(Tv<<5)+(a+h)<<2]?1<<31-h%32:0;R[X]|=Y,I|=Y}I?E=m:(t.y0++,f--,m--,s++)}t.y1=t.y0+E,t.sprite=R.slice(0,(t.y1-t.y0)*d)}}}function u$e(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),a=o&127,s=32-a,l=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),c,d=0;d<l;d++){c=0;for(var f=0;f<=i;f++)if((c<<s|(f<i?(c=r[d*i+f])>>>a:0))&t[u+f])return!0;u+=n}return!1}function c$e(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function d$e(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function yme(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function f$e(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var a=o<0?-1:1;switch(Math.sqrt(1+4*a*o)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function p$e(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Ff(e){return typeof e=="function"?e:function(){return e}}var h$e={archimedean:yme,rectangular:f$e};const vme=["x","y","font","fontSize","fontStyle","fontWeight","angle"],m$e=["text","font","rotate","fontSize","fontStyle","fontWeight"];function f4(e){ae.call(this,s$e(),e)}f4.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:vme}]};Se(f4,ae,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&le("Wordcloud size dimensions must be non-zero.");function n(m){const g=e[m];return dt(g)&&t.modified(g.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||m$e.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,a=e.as||vme;let s=e.fontSize||14,l;if(dt(s)?l=e.fontSizeRange:s=hi(s),l){const m=s,g=Vt("sqrt")().domain(zl(i,m)).range(l);s=y=>g(m(y))}i.forEach(m=>{m[a[0]]=NaN,m[a[1]]=NaN,m[a[3]]=0});const u=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(_a).layout(),c=o.size(),d=c[0]>>1,f=c[1]>>1,h=u.length;for(let m=0,g,y;m<h;++m)g=u[m],y=g.datum,y[a[0]]=g.x+d,y[a[1]]=g.y+f,y[a[2]]=g.font,y[a[3]]=g.size,y[a[4]]=g.style,y[a[5]]=g.weight,y[a[6]]=g.rotate;return t.reflow(r).modifies(a)}});const g$e=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:f4},Symbol.toStringTag,{value:"Module"})),b$e=e=>new Uint8Array(e),y$e=e=>new Uint16Array(e),px=e=>new Uint32Array(e);function v$e(){let e=8,t=[],n=px(0),r=uk(0,e),i=uk(0,e);return{data:()=>t,seen:()=>n=x$e(n,t.length),add(o){for(let a=0,s=t.length,l=o.length,u;a<l;++a)u=o[a],u._index=s++,t.push(u)},remove(o,a){const s=t.length,l=Array(s-o),u=t;let c,d,f;for(d=0;!a[d]&&d<s;++d)l[d]=t[d],u[d]=d;for(f=d;d<s;++d)c=t[d],a[d]?u[d]=-1:(u[d]=f,r[f]=r[d],i[f]=i[d],l[f]=c,c._index=f++),r[d]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,a){r[o]|=a},clear(o,a){r[o]&=~a},resize(o,a){const s=r.length;(o>s||a>e)&&(e=Math.max(a,e),r=uk(o,e,r),i=uk(o,e))}}}function x$e(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function uk(e,t,n){const r=(t<257?b$e:t<65537?y$e:px)(e);return n&&r.set(n),r}function f2(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const a=this,s=a.bisect(a.range,i.value),l=i.index,u=s[0],c=s[1],d=l.length;let f;for(f=0;f<u;++f)o[l[f]]|=r;for(f=c;f<d;++f)o[l[f]]|=r;return a}}}function p2(){let e=px(0),t=[],n=0;function r(s,l,u){if(!l.length)return[];const c=n,d=l.length,f=px(d);let h=Array(d),m,g,y;for(y=0;y<d;++y)h[y]=s(l[y]),f[y]=y;if(h=w$e(h,f),c)m=t,g=e,t=Array(c+d),e=px(c+d),Z$e(u,m,g,c,h,f,d,t,e);else{if(u>0)for(y=0;y<d;++y)f[y]+=u;t=h,e=f}return n=c+d,{index:f,value:h}}function i(s,l){const u=n;let c,d,f;for(d=0;!l[e[d]]&&d<u;++d);for(f=d;d<u;++d)l[c=e[d]]||(e[f]=c,t[f]=t[d],++f);n=u-s}function o(s){for(let l=0,u=n;l<u;++l)e[l]=s[e[l]]}function a(s,l){let u;return l?u=l.length:(l=t,u=n),[COe(l,s[0],0,u),wG(l,s[1],0,u)]}return{insert:r,remove:i,bisect:a,reindex:o,index:()=>e,size:()=>n}}function w$e(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),TOe(e,t)}function Z$e(e,t,n,r,i,o,a,s,l){let u=0,c=0,d;for(d=0;u<r&&c<a;++d)t[u]<i[c]?(s[d]=t[u],l[d]=n[u++]):(s[d]=i[c],l[d]=o[c++]+e);for(;u<r;++u,++d)s[d]=t[u],l[d]=n[u];for(;c<a;++c,++d)s[d]=i[c],l[d]=o[c]+e}function p4(e){ae.call(this,v$e(),e),this._indices=null,this._dims=null}p4.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Se(p4,ae,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],a=r.length;let s=0,l,u;for(;s<a;++s)l=n[s].fname,u=i[l]||(i[l]=p2()),o.push(f2(u,s,r[s]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,a=this._dims,s=this.value,l=s.curr(),u=s.prev(),c=s.all(),d=n.rem=n.add,f=n.mod,h=i.length,m={};let g,y,v,w,Z,k,_,R,I;if(u.set(l),t.rem.length&&(Z=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(k={},w=t.mod,_=0,R=w.length;_<R;++_)k[w[_]._index]=1;for(_=0;_<h;++_)I=r[_],(!a[_]||e.modified("fields",_)||t.modified(I.fields))&&(v=I.fname,(g=m[v])||(o[v]=y=p2(),m[v]=g=y.insert(I,t.source,0)),a[_]=f2(y,_,i[_]).onAdd(g,l));for(_=0,R=s.data().length;_<R;++_)Z[_]||(u[_]!==l[_]?d.push(_):k[_]&&l[_]!==c&&f.push(_));return s.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,a=this._indices,s=e.fields,l={},u=n.add,c=i.size()+r.length,d=o.length;let f=i.size(),h,m,g;i.resize(c,d),i.add(r);const y=i.curr(),v=i.prev(),w=i.all();for(h=0;h<d;++h)m=s[h].fname,g=l[m]||(l[m]=a[m].insert(s[h],r,f)),o[h].onAdd(g,y);for(;f<c;++f)v[f]=w,y[f]!==w&&u.push(f)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),a=e.mod;let s,l,u;for(s=0,l=a.length;s<l;++s)u=a[s]._index,i[u]!==o&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),a=i.prev(),s=i.all(),l={},u=n.rem,c=t.rem;let d,f,h,m;for(d=0,f=c.length;d<f;++d)h=c[d]._index,l[h]=1,a[h]=m=o[h],o[h]=s,m!==s&&u.push(h);for(h in r)r[h].remove(f,l);return this.reindex(t,f,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const a in r)r[a].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,a=r.length;let s=0,l,u;for(n.filters=0,u=0;u<a;++u)e.modified("query",u)&&(l=u,++s);if(s===1)s=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,s=0;u<a;++u)e.modified("query",u)&&(s|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return s},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),a=i.curr(),s=i.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),d=c[0],f=c[1],h=u[0],m=u[1],g=e.one;let y,v,w;if(d<h)for(y=d,v=Math.min(h,f);y<v;++y)w=l[y],o[w]!==n&&(s[w]=a[w],o[w]=n,r.push(w)),a[w]^=g;else if(d>h)for(y=h,v=Math.min(d,m);y<v;++y)w=l[y],o[w]!==n&&(s[w]=a[w],o[w]=n,r.push(w)),a[w]^=g;if(f>m)for(y=Math.max(d,m),v=f;y<v;++y)w=l[y],o[w]!==n&&(s[w]=a[w],o[w]=n,r.push(w)),a[w]^=g;else if(f<m)for(y=Math.max(h,f),v=m;y<v;++y)w=l[y],o[w]!==n&&(s[w]=a[w],o[w]=n,r.push(w)),a[w]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),a=e.index(),s=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],d=s[0],f=s[1],h=e.one;let m,g,y;if(u<d)for(m=u,g=Math.min(d,c);m<g;++m)y=a[m],o[y]^=h,n.push(y);else if(u>d)for(m=d,g=Math.min(u,f);m<g;++m)y=a[m],o[y]^=h,r.push(y);if(c>f)for(m=Math.max(u,f),g=c;m<g;++m)y=a[m],o[y]^=h,n.push(y);else if(c<f)for(m=Math.max(d,c),g=f;m<g;++m)y=a[m],o[y]^=h,r.push(y);e.range=t.slice()}});function h4(e){ae.call(this,null,e)}h4.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Se(h4,ae,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const o=t.fork(t.ALL),a=r.data(),s=r.curr(),l=r.prev(),u=c=>s[c]&n?null:a[c];return o.filter(o.MOD,u),i&i-1?(o.filter(o.ADD,c=>{const d=s[c]&n;return!d&&d^l[c]&n?a[c]:null}),o.filter(o.REM,c=>{const d=s[c]&n;return d&&!(d^(d^l[c]&n))?a[c]:null})):(o.filter(o.ADD,u),o.filter(o.REM,c=>(s[c]&n)===i?a[c]:null)),o.filter(o.SOURCE,c=>u(c._index))}});const S$e=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:p4,resolvefilter:h4},Symbol.toStringTag,{value:"Module"})),k$e="RawCode",eh="Literal",_$e="Property",G$e="Identifier",I$e="ArrayExpression",W$e="BinaryExpression",xme="CallExpression",E$e="ConditionalExpression",X$e="LogicalExpression",L$e="MemberExpression",R$e="ObjectExpression",C$e="UnaryExpression";function Rs(e){this.type=e}Rs.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=V$e(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function V$e(e){switch(e.type){case I$e:return e.elements;case W$e:case X$e:return[e.left,e.right];case xme:return[e.callee].concat(e.arguments);case E$e:return[e.test,e.consequent,e.alternate];case L$e:return[e.object,e.property];case R$e:return e.properties;case _$e:return[e.key,e.value];case C$e:return[e.argument];case G$e:case eh:case k$e:default:return[]}}var tu,Te,se,ui,jt,V1=1,D5=2,th=3,gf=4,Y1=5,Wh=6,Hi=7,A5=8,Y$e=9;tu={};tu[V1]="Boolean";tu[D5]="<end>";tu[th]="Identifier";tu[gf]="Keyword";tu[Y1]="Null";tu[Wh]="Numeric";tu[Hi]="Punctuator";tu[A5]="String";tu[Y$e]="RegularExpression";var T$e="ArrayExpression",N$e="BinaryExpression",F$e="CallExpression",M$e="ConditionalExpression",wme="Identifier",O$e="Literal",z$e="LogicalExpression",P$e="MemberExpression",j$e="ObjectExpression",H$e="Property",J$e="UnaryExpression",Sr="Unexpected token %0",B$e="Unexpected number",K$e="Unexpected string",D$e="Unexpected identifier",A$e="Unexpected reserved word",U$e="Unexpected end of input",HT="Invalid regular expression",zR="Invalid regular expression: missing /",Zme="Octal literals are not allowed in strict mode.",$$e="Duplicate data property in object literal not allowed in strict mode",Or="ILLEGAL",ww="Disabled.",Q$e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),q$e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function T1(e,t){if(!e)throw new Error("ASSERT: "+t)}function Gu(e){return e>=48&&e<=57}function m4(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function hx(e){return"01234567".indexOf(e)>=0}function eQe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Zw(e){return e===10||e===13||e===8232||e===8233}function U5(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Q$e.test(String.fromCharCode(e))}function CI(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&q$e.test(String.fromCharCode(e))}const tQe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Sme(){for(;se<ui;){const e=Te.charCodeAt(se);if(eQe(e)||Zw(e))++se;else break}}function JT(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)se<ui&&m4(Te[se])?(r=Te[se++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Rt({},Sr,Or);return String.fromCharCode(i)}function nQe(){var e,t,n,r;for(e=Te[se],t=0,e==="}"&&Rt({},Sr,Or);se<ui&&(e=Te[se++],!!m4(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Rt({},Sr,Or),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function kme(){var e,t;for(e=Te.charCodeAt(se++),t=String.fromCharCode(e),e===92&&(Te.charCodeAt(se)!==117&&Rt({},Sr,Or),++se,e=JT("u"),(!e||e==="\\"||!U5(e.charCodeAt(0)))&&Rt({},Sr,Or),t=e);se<ui&&(e=Te.charCodeAt(se),!!CI(e));)++se,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Te.charCodeAt(se)!==117&&Rt({},Sr,Or),++se,e=JT("u"),(!e||e==="\\"||!CI(e.charCodeAt(0)))&&Rt({},Sr,Or),t+=e);return t}function rQe(){var e,t;for(e=se++;se<ui;){if(t=Te.charCodeAt(se),t===92)return se=e,kme();if(CI(t))++se;else break}return Te.slice(e,se)}function iQe(){var e,t,n;return e=se,t=Te.charCodeAt(se)===92?kme():rQe(),t.length===1?n=th:tQe.hasOwnProperty(t)?n=gf:t==="null"?n=Y1:t==="true"||t==="false"?n=V1:n=th,{type:n,value:t,start:e,end:se}}function PR(){var e=se,t=Te.charCodeAt(se),n,r=Te[se],i,o,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++se,{type:Hi,value:String.fromCharCode(t),start:e,end:se};default:if(n=Te.charCodeAt(se+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return se+=2,{type:Hi,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:se};case 33:case 61:return se+=2,Te.charCodeAt(se)===61&&++se,{type:Hi,value:Te.slice(e,se),start:e,end:se}}}if(a=Te.substr(se,4),a===">>>=")return se+=4,{type:Hi,value:a,start:e,end:se};if(o=a.substr(0,3),o===">>>"||o==="<<="||o===">>=")return se+=3,{type:Hi,value:o,start:e,end:se};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return se+=2,{type:Hi,value:i,start:e,end:se};if(i==="//"&&Rt({},Sr,Or),"<>=!+-*%&|^/".indexOf(r)>=0)return++se,{type:Hi,value:r,start:e,end:se};Rt({},Sr,Or)}function oQe(e){let t="";for(;se<ui&&m4(Te[se]);)t+=Te[se++];return t.length===0&&Rt({},Sr,Or),U5(Te.charCodeAt(se))&&Rt({},Sr,Or),{type:Wh,value:parseInt("0x"+t,16),start:e,end:se}}function aQe(e){let t="0"+Te[se++];for(;se<ui&&hx(Te[se]);)t+=Te[se++];return(U5(Te.charCodeAt(se))||Gu(Te.charCodeAt(se)))&&Rt({},Sr,Or),{type:Wh,value:parseInt(t,8),octal:!0,start:e,end:se}}function h2(){var e,t,n;if(n=Te[se],T1(Gu(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=se,e="",n!=="."){if(e=Te[se++],n=Te[se],e==="0"){if(n==="x"||n==="X")return++se,oQe(t);if(hx(n))return aQe(t);n&&Gu(n.charCodeAt(0))&&Rt({},Sr,Or)}for(;Gu(Te.charCodeAt(se));)e+=Te[se++];n=Te[se]}if(n==="."){for(e+=Te[se++];Gu(Te.charCodeAt(se));)e+=Te[se++];n=Te[se]}if(n==="e"||n==="E")if(e+=Te[se++],n=Te[se],(n==="+"||n==="-")&&(e+=Te[se++]),Gu(Te.charCodeAt(se)))for(;Gu(Te.charCodeAt(se));)e+=Te[se++];else Rt({},Sr,Or);return U5(Te.charCodeAt(se))&&Rt({},Sr,Or),{type:Wh,value:parseFloat(e),start:t,end:se}}function sQe(){var e="",t,n,r,i,o=!1;for(t=Te[se],T1(t==="'"||t==='"',"String literal must starts with a quote"),n=se,++se;se<ui;)if(r=Te[se++],r===t){t="";break}else if(r==="\\")if(r=Te[se++],!r||!Zw(r.charCodeAt(0)))switch(r){case"u":case"x":Te[se]==="{"?(++se,e+=nQe()):e+=JT(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:hx(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),se<ui&&hx(Te[se])&&(o=!0,i=i*8+"01234567".indexOf(Te[se++]),"0123".indexOf(r)>=0&&se<ui&&hx(Te[se])&&(i=i*8+"01234567".indexOf(Te[se++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Te[se]===`
`&&++se;else{if(Zw(r.charCodeAt(0)))break;e+=r}return t!==""&&Rt({},Sr,Or),{type:A5,value:e,octal:o,start:n,end:se}}function lQe(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Rt({},HT)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){Rt({},HT)}try{return new RegExp(e,t)}catch(r){return null}}function uQe(){var e,t,n,r,i;for(e=Te[se],T1(e==="/","Regular expression literal must start with a slash"),t=Te[se++],n=!1,r=!1;se<ui;)if(e=Te[se++],t+=e,e==="\\")e=Te[se++],Zw(e.charCodeAt(0))&&Rt({},zR),t+=e;else if(Zw(e.charCodeAt(0)))Rt({},zR);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Rt({},zR),i=t.substr(1,t.length-2),{value:i,literal:t}}function cQe(){var e,t,n;for(t="",n="";se<ui&&(e=Te[se],!!CI(e.charCodeAt(0)));)++se,e==="\\"&&se<ui?Rt({},Sr,Or):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Rt({},HT,n),{value:n,literal:t}}function dQe(){var e,t,n,r;return jt=null,Sme(),e=se,t=uQe(),n=cQe(),r=lQe(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:se}}function fQe(e){return e.type===th||e.type===gf||e.type===V1||e.type===Y1}function _me(){if(Sme(),se>=ui)return{type:D5,start:se,end:se};const e=Te.charCodeAt(se);return U5(e)?iQe():e===40||e===41||e===59?PR():e===39||e===34?sQe():e===46?Gu(Te.charCodeAt(se+1))?h2():PR():Gu(e)?h2():PR()}function Ai(){const e=jt;return se=e.end,jt=_me(),se=e.end,e}function Gme(){const e=se;jt=_me(),se=e}function pQe(e){const t=new Rs(T$e);return t.elements=e,t}function m2(e,t,n){const r=new Rs(e==="||"||e==="&&"?z$e:N$e);return r.operator=e,r.left=t,r.right=n,r}function hQe(e,t){const n=new Rs(F$e);return n.callee=e,n.arguments=t,n}function mQe(e,t,n){const r=new Rs(M$e);return r.test=e,r.consequent=t,r.alternate=n,r}function g4(e){const t=new Rs(wme);return t.name=e,t}function Nv(e){const t=new Rs(O$e);return t.value=e.value,t.raw=Te.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function g2(e,t,n){const r=new Rs(P$e);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function gQe(e){const t=new Rs(j$e);return t.properties=e,t}function b2(e,t,n){const r=new Rs(H$e);return r.key=t,r.value=n,r.kind=e,r}function bQe(e,t){const n=new Rs(J$e);return n.operator=e,n.argument=t,n.prefix=!0,n}function Rt(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,a)=>(T1(a<r.length,"Message reference must be in range"),r[a]));throw n=new Error(i),n.index=se,n.description=i,n}function N1(e){e.type===D5&&Rt(e,U$e),e.type===Wh&&Rt(e,B$e),e.type===A5&&Rt(e,K$e),e.type===th&&Rt(e,D$e),e.type===gf&&Rt(e,A$e),Rt(e,Sr,e.value)}function ci(e){const t=Ai();(t.type!==Hi||t.value!==e)&&N1(t)}function mn(e){return jt.type===Hi&&jt.value===e}function jR(e){return jt.type===gf&&jt.value===e}function yQe(){const e=[];for(se=jt.start,ci("[");!mn("]");)mn(",")?(Ai(),e.push(null)):(e.push(nh()),mn("]")||ci(","));return Ai(),pQe(e)}function y2(){se=jt.start;const e=Ai();return e.type===A5||e.type===Wh?(e.octal&&Rt(e,Zme),Nv(e)):g4(e.value)}function vQe(){var e,t,n,r;if(se=jt.start,e=jt,e.type===th)return n=y2(),ci(":"),r=nh(),b2("init",n,r);if(e.type===D5||e.type===Hi)N1(e);else return t=y2(),ci(":"),r=nh(),b2("init",t,r)}function xQe(){var e=[],t,n,r,i={},o=String;for(se=jt.start,ci("{");!mn("}");)t=vQe(),t.key.type===wme?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Rt({},$$e):i[r]=!0,e.push(t),mn("}")||ci(",");return ci("}"),gQe(e)}function wQe(){ci("(");const e=b4();return ci(")"),e}const ZQe={if:1};function SQe(){var e,t,n;if(mn("("))return wQe();if(mn("["))return yQe();if(mn("{"))return xQe();if(e=jt.type,se=jt.start,e===th||ZQe[jt.value])n=g4(Ai().value);else if(e===A5||e===Wh)jt.octal&&Rt(jt,Zme),n=Nv(Ai());else{if(e===gf)throw new Error(ww);e===V1?(t=Ai(),t.value=t.value==="true",n=Nv(t)):e===Y1?(t=Ai(),t.value=null,n=Nv(t)):mn("/")||mn("/=")?(n=Nv(dQe()),Gme()):N1(Ai())}return n}function kQe(){const e=[];if(ci("("),!mn(")"))for(;se<ui&&(e.push(nh()),!mn(")"));)ci(",");return ci(")"),e}function _Qe(){se=jt.start;const e=Ai();return fQe(e)||N1(e),g4(e.value)}function GQe(){return ci("."),_Qe()}function IQe(){ci("[");const e=b4();return ci("]"),e}function WQe(){var e,t,n;for(e=SQe();;)if(mn("."))n=GQe(),e=g2(".",e,n);else if(mn("("))t=kQe(),e=hQe(e,t);else if(mn("["))n=IQe(),e=g2("[",e,n);else break;return e}function v2(){const e=WQe();if(jt.type===Hi&&(mn("++")||mn("--")))throw new Error(ww);return e}function s9(){var e,t;if(jt.type!==Hi&&jt.type!==gf)t=v2();else{if(mn("++")||mn("--"))throw new Error(ww);if(mn("+")||mn("-")||mn("~")||mn("!"))e=Ai(),t=s9(),t=bQe(e.value,t);else{if(jR("delete")||jR("void")||jR("typeof"))throw new Error(ww);t=v2()}}return t}function x2(e){let t=0;if(e.type!==Hi&&e.type!==gf)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function EQe(){var e,t,n,r,i,o,a,s,l,u;if(e=jt,l=s9(),r=jt,i=x2(r),i===0)return l;for(r.prec=i,Ai(),t=[e,jt],a=s9(),o=[l,r,a];(i=x2(jt))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,l=o.pop(),t.pop(),n=m2(s,l,a),o.push(n);r=Ai(),r.prec=i,o.push(r),t.push(jt),n=s9(),o.push(n)}for(u=o.length-1,n=o[u],t.pop();u>1;)t.pop(),n=m2(o[u-1].value,o[u-2],n),u-=2;return n}function nh(){var e,t,n;return e=EQe(),mn("?")&&(Ai(),t=nh(),ci(":"),n=nh(),e=mQe(e,t,n)),e}function b4(){const e=nh();if(mn(","))throw new Error(ww);return e}function y4(e){Te=e,se=0,ui=Te.length,jt=null,Gme();const t=b4();if(jt.type!==D5)throw new Error("Unexpect token after expression.");return t}var Ime={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Wme(e){function t(a,s,l,u){let c=e(s[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+a+(u<0?"":u===0?"()":"("+s.slice(1).map(e).join(",")+")")}function n(a,s,l){return u=>t(a,u,s,l)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&le("Missing arguments to clamp function."),a.length>3&&le("Too many arguments to clamp function.");const s=a.map(e);return"Math.max("+s[1]+", Math.min("+s[2]+","+s[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(a){a.length<3&&le("Missing arguments to if function."),a.length>3&&le("Too many arguments to if function.");const s=a.map(e);return"("+s[0]+"?"+s[1]+":"+s[2]+")"}}}function XQe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function Eme(e){e=e||{};const t=e.allowed?ks(e.allowed):{},n=e.forbidden?ks(e.forbidden):{},r=e.constants||Ime,i=(e.functions||Wme)(d),o=e.globalvar,a=e.fieldvar,s=dt(o)?o:m=>`${o}["${m}"]`;let l={},u={},c=0;function d(m){if(We(m))return m;const g=f[m.type];return g==null&&le("Unsupported type: "+m.type),g(m)}const f={Literal:m=>m.raw,Identifier:m=>{const g=m.name;return c>0?g:ze(n,g)?le("Illegal identifier: "+g):ze(r,g)?r[g]:ze(t,g)?g:(l[g]=1,s(g))},MemberExpression:m=>{const g=!m.computed,y=d(m.object);g&&(c+=1);const v=d(m.property);return y===a&&(u[XQe(v)]=1),g&&(c-=1),y+(g?"."+v:"["+v+"]")},CallExpression:m=>{m.callee.type!=="Identifier"&&le("Illegal callee type: "+m.callee.type);const g=m.callee.name,y=m.arguments,v=ze(i,g)&&i[g];return v||le("Unrecognized function: "+g),dt(v)?v(y):v+"("+y.map(d).join(",")+")"},ArrayExpression:m=>"["+m.elements.map(d).join(",")+"]",BinaryExpression:m=>"("+d(m.left)+" "+m.operator+" "+d(m.right)+")",UnaryExpression:m=>"("+m.operator+d(m.argument)+")",ConditionalExpression:m=>"("+d(m.test)+"?"+d(m.consequent)+":"+d(m.alternate)+")",LogicalExpression:m=>"("+d(m.left)+m.operator+d(m.right)+")",ObjectExpression:m=>"{"+m.properties.map(d).join(",")+"}",Property:m=>{c+=1;const g=d(m.key);return c-=1,g+":"+d(m.value)}};function h(m){const g={code:d(m),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return h.functions=i,h.constants=r,h}function w2(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function LQe(e){let t=e,n=e,r=e;e.length!==2&&(t=(s,l)=>e(s)-l,n=w2,r=(s,l)=>w2(e(s),l));function i(s,l,u=0,c=s.length){if(u<c){if(n(l,l)!==0)return c;do{const d=u+c>>>1;r(s[d],l)<0?u=d+1:c=d}while(u<c)}return u}function o(s,l,u=0,c=s.length){if(u<c){if(n(l,l)!==0)return c;do{const d=u+c>>>1;r(s[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function a(s,l,u=0,c=s.length){const d=i(s,l,u,c-1);return d>u&&t(s[d-1],l)>-t(s[d],l)?d-1:d}return{left:i,center:a,right:o}}function RQe(e,...t){e=new ZG(e),t=t.map(CQe);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function CQe(e){return e instanceof ZG?e:new ZG(e)}function VQe(...e){const t=new ZG;for(const n of e)for(const r of n)t.add(r);return t}const v4="intersect",Z2="union",YQe="vlMulti",TQe="vlPoint",S2="or",NQe="and",sl="_vgsid_",Sw=lo(sl),FQe="E",MQe="R",OQe="R-E",zQe="R-LE",PQe="R-RE",VI="index:unit";function k2(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,a,s;o<i;++o)if(s=n[o],s.getter=lo.getter||lo(s.field),a=s.getter(e),Sd(a)&&(a=ri(a)),Sd(r[o])&&(r[o]=ri(r[o])),Sd(r[o][0])&&(r[o]=r[o].map(ri)),s.type===FQe){if(ce(r[o])?r[o].indexOf(a)<0:a!==r[o])return!1}else if(s.type===MQe){if(!l0(a,r[o]))return!1}else if(s.type===PQe){if(!l0(a,r[o],!0,!1))return!1}else if(s.type===OQe){if(!l0(a,r[o],!1,!1))return!1}else if(s.type===zQe&&!l0(a,r[o],!1,!0))return!1;return!0}function jQe(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[VI]&&r[VI].value:void 0,a=n===v4,s=i.length,l=0,u,c,d,f,h;l<s;++l)if(u=i[l],o&&a){if(c=c||{},d=c[f=u.unit]||0,d===-1)continue;if(h=k2(t,u),c[f]=h?-1:++d,h&&o.size===1)return!0;if(!h&&d===o.get(f).count)return!1}else if(h=k2(t,u),a^h)return h;return s&&a}const Xme=LQe(Sw),HQe=Xme.left,JQe=Xme.right;function BQe(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[VI]&&r[VI].value:void 0,a=n===v4,s=Sw(t),l=HQe(i,s);if(l===i.length||Sw(i[l])!==s)return!1;if(o&&a){if(o.size===1)return!0;if(JQe(i,s)-l<o.size)return!1}return!0}function KQe(e,t){return e.map(n=>ct(t.fields?{values:t.fields.map(r=>(r.getter||(r.getter=lo(r.field)))(n.datum))}:{[sl]:Sw(n.datum)},t))}function DQe(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],a={},s={},l={},u,c,d,f,h,m,g,y,v,w,Z=o.length,k=0,_,R;k<Z;++k)if(u=o[k],f=u.unit,c=u.fields,d=u.values,c&&d){for(_=0,R=c.length;_<R;++_)h=c[_],g=a[h.field]||(a[h.field]={}),y=g[f]||(g[f]=[]),l[h.field]=v=h.type.charAt(0),w=HR["".concat(v,"_union")],g[f]=w(y,Ee(d[_]));n&&(y=s[f]||(s[f]=[]),y.push(Ee(d).reduce((I,E,X)=>(I[c[X].field]=E,I),{})))}else h=sl,m=Sw(u),g=a[h]||(a[h]={}),y=g[f]||(g[f]=[]),y.push(m),n&&(y=s[f]||(s[f]=[]),y.push({[sl]:m}));if(t=t||Z2,a[sl]?a[sl]=HR["".concat(sl,"_").concat(t)](...Object.values(a[sl])):Object.keys(a).forEach(I=>{a[I]=Object.keys(a[I]).map(E=>a[I][E]).reduce((E,X)=>E===void 0?X:HR["".concat(l[I],"_").concat(t)](E,X))}),o=Object.keys(s),n&&o.length){const I=r?TQe:YQe;a[I]=t===Z2?{[S2]:o.reduce((E,X)=>(E.push(...s[X]),E),[])}:{[NQe]:o.map(E=>({[S2]:s[E]}))}}return a}var HR={["".concat(sl,"_union")]:VQe,["".concat(sl,"_intersect")]:RQe,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ri(t[0]),r=ri(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ri(t[0]),r=ri(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const AQe=":",UQe="@";function x4(e,t,n,r){t[0].type!==eh&&le("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&Zt(t).value,a="unit",s=UQe+a,l=AQe+i;o===v4&&!ze(r,s)&&(r[s]=n.getData(i).indataRef(n,a)),ze(r,l)||(r[l]=n.getData(i).tuplesRef())}function Lme(e){const t=this.context.data[e];return t?t.values.value:[]}function $Qe(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function QQe(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Sa).insert(t)),1}function qQe(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const $5=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},eqe=$5("format"),Rme=$5("timeFormat"),tqe=$5("utcFormat"),nqe=$5("timeParse"),rqe=$5("utcParse"),ck=new Date(2e3,0,1);function F1(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(ck.setYear(2e3),ck.setMonth(e),ck.setDate(t),Rme.call(this,ck,n))}function iqe(e){return F1.call(this,e,1,"%B")}function oqe(e){return F1.call(this,e,1,"%b")}function aqe(e){return F1.call(this,0,2+e,"%A")}function sqe(e){return F1.call(this,0,2+e,"%a")}const lqe=":",uqe="@",BT="%",Cme="$";function w4(e,t,n,r){t[0].type!==eh&&le("First argument to data functions must be a string literal.");const i=t[0].value,o=lqe+i;if(!ze(o,r))try{r[o]=n.getData(i).tuplesRef()}catch(a){}}function cqe(e,t,n,r){t[0].type!==eh&&le("First argument to indata must be a string literal."),t[1].type!==eh&&le("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,a=uqe+o;ze(a,r)||(r[a]=n.getData(i).indataRef(n,o))}function io(e,t,n,r){if(t[0].type===eh)_2(n,r,t[0].value);else for(e in n.scales)_2(n,r,e)}function _2(e,t,n){const r=BT+n;if(!ze(t,r))try{t[r]=e.scaleRef(n)}catch(i){}}function hc(e,t){let n;return dt(e)?e:We(e)?(n=t.scales[e])&&n.value:void 0}function dqe(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=io,n._range=io,n._scale=io;const r=i=>"_["+(i.type===eh?ke(BT+i.value):ke(BT)+"+"+e(i))+"]";return{_bandwidth:i=>"this.__bandwidth(".concat(r(i[0]),")"),_range:i=>"".concat(r(i[0]),".range()"),_scale:i=>"".concat(r(i[0]),"(").concat(e(i[1]),")")}}function Z4(e,t){return function(n,r,i){if(n){const o=hc(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const fqe=Z4("area",R7e),pqe=Z4("bounds",T7e),hqe=Z4("centroid",P7e);function mqe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function S4(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function gqe(){return S4(this.context.dataflow,"warn",arguments)}function bqe(){return S4(this.context.dataflow,"info",arguments)}function yqe(){return S4(this.context.dataflow,"debug",arguments)}function JR(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function KT(e){const t=Nd(e),n=JR(t.r),r=JR(t.g),i=JR(t.b);return .2126*n+.7152*r+.0722*i}function vqe(e,t){const n=KT(e),r=KT(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function xqe(){const e=[].slice.call(arguments);return e.unshift({}),ct(...e)}function Vme(e,t){return e===t||e!==e&&t!==t?!0:ce(e)?ce(t)&&e.length===t.length?wqe(e,t):!1:Le(e)&&Le(t)?Yme(e,t):!1}function wqe(e,t){for(let n=0,r=e.length;n<r;++n)if(!Vme(e[n],t[n]))return!1;return!0}function Yme(e,t){for(const n in e)if(!Vme(e[n],t[n]))return!1;return!0}function G2(e){return t=>Yme(e,t)}function Zqe(e,t,n,r,i,o){const a=this.context.dataflow,s=this.context.data[e],l=s.input,u=a.stamp();let c=s.changes,d,f;if(a._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<u)&&(s.changes=c=a.changeset(),c.stamp=u,a.runAfter(()=>{s.modified=!0,a.pulse(l,c).run()},!0,1)),n&&(d=n===!0?Sa:ce(n)||q3(n)?n:G2(n),c.remove(d)),t&&c.insert(t),r&&(d=G2(r),l.value.some(d)?c.remove(d):c.insert(r)),i)for(f in o)c.modify(i,f,o[f]);return 1}function Sqe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)}function kqe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const I2={};function _qe(e,t){const n=I2[t]||(I2[t]=lo(t));return ce(e)?e.map(n):n(e)}function k4(e){return ce(e)||ArrayBuffer.isView(e)?e:null}function _4(e){return k4(e)||(We(e)?e:null)}function Gqe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return k4(e).join(...n)}function Iqe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _4(e).indexOf(...n)}function Wqe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _4(e).lastIndexOf(...n)}function Eqe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _4(e).slice(...n)}function Xqe(e,t,n){return dt(n)&&le("Function argument passed to replace."),String(e).replace(t,n)}function Lqe(e){return k4(e).slice().reverse()}function Rqe(e,t,n){return VP(e||0,t||0,n||0)}function Cqe(e,t){const n=hc(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Vqe(e,t){const n=hc(e,(t||this).context);return n?n.copy():void 0}function Yqe(e,t){const n=hc(e,(t||this).context);return n?n.domain():[]}function Tqe(e,t,n){const r=hc(e,(n||this).context);return r?ce(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Nqe(e,t){const n=hc(e,(t||this).context);return n&&n.range?n.range():[]}function Fqe(e,t,n){const r=hc(e,(n||this).context);return r?r(t):void 0}function Mqe(e,t,n,r,i){e=hc(e,(i||this).context);const o=Yfe(t,n);let a=e.domain(),s=a[0],l=Zt(a),u=pi;return l-s?u=Sfe(e,s,l):e=(e.interpolator?Vt("sequential")().interpolator(e.interpolator()):Vt("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,l=1]),e.ticks&&(a=e.ticks(+r||15),s!==a[0]&&a.unshift(s),l!==Zt(a)&&a.push(l)),a.forEach(c=>o.stop(u(c),e(c))),o}function Oqe(e,t,n){const r=hc(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function zqe(e){let t=null;return function(n){return n?pw(n,t=t||vg(e)):e}}const Tme=e=>e.data;function Nme(e,t){const n=Lme.call(t,e);return n.root&&n.root.lookup||{}}function Pqe(e,t,n){const r=Nme(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(Tme):void 0}function jqe(e,t){const n=Nme(e,this)[t];return n?n.ancestors().map(Tme):void 0}const Fme=()=>typeof window<"u"&&window||null;function Hqe(){const e=Fme();return e?e.screen:{}}function Jqe(){const e=Fme();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Bqe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function Mme(e,t,n){if(!e)return[];const[r,i]=e,o=new tr().set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return _pe(a,o,Kqe(t))}function Kqe(e){let t=null;if(e){const n=Ee(e.marktype),r=Ee(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function Dqe(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;const i=e[e.length-1];return i===void 0||Math.sqrt((i[0]-t)**2+(i[1]-n)**2)>r?(e.push([t,n]),[...e]):e}function Aqe(e){return(e!=null?e:[]).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?"M ".concat(i,",").concat(o," "):r===e.length-1?" Z":"L ".concat(i,",").concat(o," ")},"")}function Uqe(e,t,n){const{x:r,y:i,mark:o}=n,a=new tr().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[s,l]of t)s<a.x1&&(a.x1=s),s>a.x2&&(a.x2=s),l<a.y1&&(a.y1=l),l>a.y2&&(a.y2=l);return a.translate(r,i),Mme([[a.x1,a.y1],[a.x2,a.y2]],e,o).filter(s=>$qe(s.x,s.y,t))}function $qe(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[a,s]=n[o],[l,u]=n[i];u>t!=s>t&&e<(a-l)*(t-u)/(s-u)+l&&r++}return r&1}const kw={random(){return _a()},cumulativeNormal:i1,cumulativeLogNormal:Az,cumulativeUniform:qz,densityNormal:Hz,densityLogNormal:Dz,densityUniform:Qz,quantileNormal:o1,quantileLogNormal:Uz,quantileUniform:eP,sampleNormal:r1,sampleLogNormal:Kz,sampleUniform:$z,isArray:ce,isBoolean:mf,isDate:Sd,isDefined(e){return e!==void 0},isNumber:At,isObject:Le,isRegExp:bce,isString:We,isTuple:q3,isValid(e){return e!=null&&e===e},toBoolean:Wz,toDate(e){return Ez(e)},toNumber:ri,toString:Xz,indexof:Iqe,join:Gqe,lastindexof:Wqe,replace:Xqe,reverse:Lqe,slice:Eqe,flush:mce,lerp:yce,merge:xqe,pad:wce,peek:Zt,pluck:_qe,span:W5,inrange:l0,truncate:Zce,rgb:Nd,lab:IG,hcl:WG,hsl:_G,luminance:KT,contrast:vqe,sequence:Eo,format:eqe,utcFormat:tqe,utcParse:rqe,utcOffset:Tce,utcSequence:Mce,timeFormat:Rme,timeParse:nqe,timeOffset:Yce,timeSequence:Fce,timeUnitSpecifier:kce,monthFormat:iqe,monthAbbrevFormat:oqe,dayFormat:aqe,dayAbbrevFormat:sqe,quarter:dce,utcquarter:fce,week:Gce,utcweek:Ece,dayofyear:_ce,utcdayofyear:Wce,warn:gqe,info:bqe,debug:yqe,extent(e){return zl(e)},inScope:mqe,intersect:Mme,clampRange:pce,pinchDistance:Sqe,pinchAngle:kqe,screen:Hqe,containerSize:Bqe,windowSize:Jqe,bandspace:Rqe,setdata:QQe,pathShape:zqe,panLinear:sce,panLog:lce,panPow:uce,panSymlog:cce,zoomLinear:Zz,zoomLog:Sz,zoomPow:TG,zoomSymlog:kz,encode:qQe,modify:Zqe,lassoAppend:Dqe,lassoPath:Aqe,intersectLasso:Uqe},Qqe=["view","item","group","xy","x","y"],qqe="event.vega.",Ome="this.",G4={},zme={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>"_[".concat(ke(Cme+e),"]"),functions:eet,constants:Ime,visitors:G4},DT=Eme(zme);function eet(e){const t=Wme(e);Qqe.forEach(n=>t[n]=qqe+n);for(const n in kw)t[n]=Ome+n;return ct(t,dqe(e,kw,G4)),t}function rr(e,t,n){return arguments.length===1?kw[e]:(kw[e]=t,n&&(G4[e]=n),DT&&(DT.functions[e]=Ome+e),this)}rr("bandwidth",Cqe,io);rr("copy",Vqe,io);rr("domain",Yqe,io);rr("range",Nqe,io);rr("invert",Tqe,io);rr("scale",Fqe,io);rr("gradient",Mqe,io);rr("geoArea",fqe,io);rr("geoBounds",pqe,io);rr("geoCentroid",hqe,io);rr("geoShape",Oqe,io);rr("indata",$Qe,cqe);rr("data",Lme,w4);rr("treePath",Pqe,w4);rr("treeAncestors",jqe,w4);rr("vlSelectionTest",jQe,x4);rr("vlSelectionIdTest",BQe,x4);rr("vlSelectionResolve",DQe,x4);rr("vlSelectionTuples",KQe);function Hl(e,t){const n={};let r;try{e=We(e)?e:ke(e)+"",r=y4(e)}catch(o){le("Expression parse error: "+e)}r.visit(o=>{if(o.type!==xme)return;const a=o.callee.name,s=zme.visitors[a];s&&s(a,o.arguments,t,n)});const i=DT(r);return i.globals.forEach(o=>{const a=Cme+o;!ze(n,a)&&t.getSignal(o)&&(n[a]=t.signalRef(o))}),{$expr:ct({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function tet(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const net=ks(["rule"]),W2=ks(["group","image","rect"]);function ret(e,t){let n="";return net[t]||(e.x2&&(e.x?(W2[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(W2[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function I4(e){return(e+"").toLowerCase()}function iet(e){return I4(e)==="operator"}function oet(e){return I4(e)==="collect"}function Ny(e,t,n){n[n.length-1]!==";"&&(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function aet(e,t,n,r){return"((u = ".concat(e,") < (v = ").concat(t,") || u == null) && v != null ? ").concat(n,`
  : (u > v || v == null) && u != null ? `).concat(r,`
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? `).concat(n,`
  : v !== v && u === u ? `).concat(r," : ")}var set={operator:(e,t)=>Ny(e,["_"],t.code),parameter:(e,t)=>Ny(e,["datum","_"],t.code),event:(e,t)=>Ny(e,["event"],t.code),handler:(e,t)=>{const n="var datum=event.item&&event.item.datum;return ".concat(t.code,";");return Ny(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const a="o["+ke(o)+"]";i+="$=".concat(r[o].code,";if(").concat(a,"!==$)").concat(a,"=$,m=1;")}return i+=ret(r,n),i+="return m;",Ny(e,["item","_"],i)},codegen:{get(e){const t="[".concat(e.map(ke).join("]["),"]"),n=Function("_","return _".concat(t,";"));return n.path=t,n},comparator(e,t){let n;const r=(o,a)=>{const s=t[a];let l,u;return o.path?(l="a".concat(o.path),u="b".concat(o.path)):((n=n||{})["f"+a]=o,l="this.f".concat(a,"(a)"),u="this.f".concat(a,"(b)")),aet(l,u,-s,s)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function uet(e){const t=this;iet(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function cet(e){const t=this;if(e.params){const n=t.get(e.id);n||le("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function det(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=ce(i)?i.map(o=>E2(o,n,t)):E2(i,n,t)}return t}function E2(e,t,n){if(!e||!Le(e))return e;for(let r=0,i=X2.length,o;r<i;++r)if(o=X2[r],ze(e,o.key))return o.parse(e,t,n);return e}var X2=[{key:"$ref",parse:fet},{key:"$key",parse:het},{key:"$expr",parse:pet},{key:"$field",parse:met},{key:"$encode",parse:bet},{key:"$compare",parse:get},{key:"$context",parse:yet},{key:"$subflow",parse:vet},{key:"$tupleid",parse:xet}];function fet(e,t){return t.get(e.$ref)||le("Operator not defined: "+e.$ref)}function pet(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code+"_"+e.$name;return t.fn[r]||(t.fn[r]=bo(t.parameterExpression(e.$expr),e.$fields,e.$name))}function het(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Iz(e.$key,e.$flat,t.expr.codegen))}function met(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=lo(e.$field,e.$name,t.expr.codegen))}function get(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Ee(e.$compare).map(i=>i&&i.$tupleid?He:i);return t.fn[n]||(t.fn[n]=_z(r,e.$order,t.expr.codegen))}function bet(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=bo(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function yet(e,t){return t}function vet(e,t){const n=e.$subflow;return function(r,i,o){const a=t.fork().parse(n),s=a.get(n.operators[0].id),l=a.signals.parent;return l&&l.set(o),s.detachSubflow=()=>t.detach(a),s}}function xet(){return He}function wet(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&le("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Zet(e){var t=this,n=Le(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,a=void 0;r||le("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(a=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,a)}const ket={skip:!0};function _et(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const a=t.signals[o];e.signals(o,a)&&(r[o]=a.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const a=t.data[o];e.data(o,a)&&(i[o]=a.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function Get(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],ket)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(Sa).insert(r[o]))}),(e.subcontext||[]).forEach((o,a)=>{const s=t.subcontext[a];s&&s.setState(o)})}function Pme(e,t,n,r){return new jme(e,t,n,r)}function jme(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||set,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function L2(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}jme.prototype=L2.prototype={fork(){const e=new L2(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),oet(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const a=n.data[o]||(n.data[o]={});e.data[o].forEach(s=>a[s]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[I4(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:tet,parseOperator:uet,parseOperatorParameters:cet,parseParameters:det,parseStream:wet,parseUpdate:Zet,getState:_et,setState:Get};function Iet(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Hme(t,e.description()))}function Hme(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Wet(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const BR="default";function Eet(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:BR,item:null}));e.on(e.events("view","mousemove"),t,(n,r)=>{const i=t.value,o=i?We(i)?i:i.user:BR,a=r.item&&r.item.cursor||null;return i&&o===i.user&&a==i.item?i:{user:o,item:a}}),e.add(null,function(n){let r=n.cursor,i=this.value;return We(r)||(i=r.item,r=r.user),AT(e,r&&r!==BR?r:i||r),i},{cursor:t})}function AT(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function YI(e,t){var n=e._runtime.data;return ze(n,t)||le("Unrecognized data set: "+t),n[t]}function Xet(e,t){return arguments.length<2?YI(this,e).values.value:M1.call(this,e,Gh().remove(Sa).insert(t))}function M1(e,t){ode(t)||le("Second argument to changes must be a changeset.");const n=YI(this,e);return n.modified=!0,this.pulse(n.input,t)}function Let(e,t){return M1.call(this,e,Gh().insert(t))}function Ret(e,t){return M1.call(this,e,Gh().remove(t))}function Jme(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Bme(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function O1(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Cet(e){var t=O1(e),n=Jme(e),r=Bme(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function Vet(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,a,s;return i&&(s=O1(e),a=t.changedTouches?t.changedTouches[0]:t,o=G1(a,i),o[0]-=s[0],o[1]-=s[1]),t.dataflow=e,t.item=n,t.vega=Yet(e,n,o),t}function Yet(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(a){var s=r,l;if(a){for(l=t;l;l=l.mark.group)if(l.mark.name===a){s=l;break}}return s&&s.mark&&s.mark.interactive?s:{}}function o(a){if(!a)return n;We(a)&&(a=i(a));const s=n.slice();for(;a;)s[0]-=a.x||0,s[1]-=a.y||0,a=a.mark&&a.mark.group;return s}return{view:hi(e),item:hi(t||{}),group:i,xy:o,x:a=>o(a)[0],y:a=>o(a)[1]}}const R2="view",Tet="timer",Net="window",Fet={trap:!1};function Met(e){const t=ct({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{ce(r[o])&&(r[o]=ks(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function Kme(e,t,n,r){e._eventListeners.push({type:n,sources:Ee(t),handler:r})}function Oet(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function dk(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||Le(r)&&!r[n]?(e.warn("Blocked ".concat(t," ").concat(n," event listener.")),!1):!0}function zet(e,t,n){var r=this,i=new n1(n),o=function(u,c){r.runAsync(null,()=>{e===R2&&Oet(r,t)&&u.preventDefault(),i.receive(Vet(r,u,c))})},a;if(e===Tet)dk(r,"timer",t)&&r.timer(o,t);else if(e===R2)dk(r,"view",t)&&r.addEventListener(t,o,Fet);else if(e===Net?dk(r,"window",t)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&dk(r,"selector",t)&&(a=document.querySelectorAll(e)),!a)r.warn("Can not resolve event source: "+e);else{for(var s=0,l=a.length;s<l;++s)a[s].addEventListener(t,o);Kme(r,a,t,o)}return i}function C2(e){return e.item}function V2(e){return e.item.mark.source}function Y2(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Pet(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","mouseover",C2),V2,Y2(e)),this.on(this.events("view","mouseout",C2),V2,Y2(t)),this}function jet(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,o;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(o=n[r],i=o.sources.length;--i>=0;)o.sources[i].removeEventListener(o.type,o.handler);return e&&e.call(this,this._handler,null,null,null),this}function No(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const Het="vega-bind",Jet="vega-bind-name",Bet="vega-bind-radio";function Ket(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=Gz(r.debounce,i.update))),(r.input==null&&r.element?Det:Uet)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function Det(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),Kme(r,t,i,o),e.set=a=>{t.value=a,t.dispatchEvent(Aet(i))}}function Aet(e){return typeof Event<"u"?new Event(e):{type:e}}function Uet(e,t,n,r){const i=r.signal(n.signal),o=No("div",{class:Het}),a=n.input==="radio"?o:o.appendChild(No("label"));a.appendChild(No("span",{class:Jet},n.name||n.signal)),t.appendChild(o);let s=$et;switch(n.input){case"checkbox":s=Qet;break;case"select":s=qet;break;case"radio":s=ett;break;case"range":s=ttt;break}s(e,a,n,i)}function $et(e,t,n,r){const i=No("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function Qet(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=No("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=a=>o.checked=!!a||null}function qet(e,t,n,r){const i=No("select",{name:n.signal}),o=n.labels||[];n.options.forEach((a,s)=>{const l={value:a};TI(a,r)&&(l.selected=!0),i.appendChild(No("option",l,(o[s]||a)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=a=>{for(let s=0,l=n.options.length;s<l;++s)if(TI(n.options[s],a)){i.selectedIndex=s;return}}}function ett(e,t,n,r){const i=No("span",{class:Bet}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((a,s)=>{const l={type:"radio",name:n.signal,value:a};TI(a,r)&&(l.checked=!0);const u=No("input",l);u.addEventListener("change",()=>e.update(a));const c=No("label",{},(o[s]||a)+"");return c.prepend(u),i.appendChild(c),u}),e.set=a=>{const s=e.elements,l=s.length;for(let u=0;u<l;++u)TI(s[u].value,a)&&(s[u].checked=!0)}}function ttt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||Td(o,i,100),s=No("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;const l=No("span",{},+r);t.appendChild(s),t.appendChild(l);const u=()=>{l.textContent=s.value,e.update(+s.value)};s.addEventListener("input",u),s.addEventListener("change",u),e.elements=[s],e.set=c=>{s.value=c,l.textContent=c}}function TI(e,t){return e===t||e+""==t+""}function Dme(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,Jme(e),Bme(e),O1(e),i,o).background(e.background())}function W4(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function ntt(e,t,n,r){const i=new r(e.loader(),W4(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,O1(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function rtt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=I1(r);e=n._el=e?KR(n,e,!0):null,Iet(n),o||n.error("Unrecognized renderer type: "+r);const a=o.handler||j5,s=e?o.renderer:o.headless;return n._renderer=s?Dme(n,n._renderer,e,s):null,n._handler=ntt(n,n._handler,e,a),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=KR(n,t,!0):e.appendChild(No("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=KR(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{Ket(n,l.element||t,l)})),n}function KR(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const Fy=e=>+e||0,itt=e=>({top:e,bottom:e,left:e,right:e});function T2(e){return Le(e)?{top:Fy(e.top),bottom:Fy(e.bottom),left:Fy(e.left),right:Fy(e.right)}:itt(Fy(e))}async function E4(e,t,n,r){const i=I1(t),o=i&&i.headless;return o||le("Unrecognized renderer type: "+t),await e.runAsync(),Dme(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function ott(e,t){e!==td.Canvas&&e!==td.SVG&&e!==td.PNG&&le("Unrecognized image type: "+e);const n=await E4(this,e,t);return e===td.SVG?att(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function att(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function stt(e,t){return(await E4(this,td.Canvas,e,t)).canvas()}async function ltt(e){return(await E4(this,td.SVG,e)).svg()}function utt(e,t,n){return Pme(e,hg,kw,n).parse(t)}function ctt(e){var t=this._runtime.scales;return ze(t,e)||le("Unrecognized scale or projection: "+e),t[e].value}var Ame="width",Ume="height",X4="padding",N2={skip:!0};function $me(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===X4?r.left+r.right:0)}function Qme(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===X4?r.top+r.bottom:0)}function dtt(e){var t=e._signals,n=t[Ame],r=t[Ume],i=t[X4];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,s=>{e._width=s.size,e._viewWidth=$me(e,s.size),o()},{size:n}),e._resizeHeight=e.add(null,s=>{e._height=s.size,e._viewHeight=Qme(e,s.size),o()},{size:r});const a=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}function ftt(e,t,n,r,i,o){this.runAfter(a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(Ame,n,N2),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(Ume,r,N2),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter(l=>l.resize())},!1,1)}function ptt(e){return this._runtime.getState(e||{data:htt,signals:mtt,recurse:!0})}function htt(e,t){return t.modified&&ce(t.input.value)&&e.indexOf("_:vega:_")}function mtt(e,t){return!(e==="parent"||t instanceof hg.proxy)}function gtt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function btt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(H8e(n,t))}function ytt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",vtt(r))}function vtt(e){return e==null?"":ce(e)?qme(e):Le(e)&&!Sd(e)?xtt(e):e+""}function xtt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(ce(n)?qme(n):e0e(n))}).join(`
`)}function qme(e){return"["+e.map(e0e).join(", ")+"]"}function e0e(e){return ce(e)?"[]":Le(e)&&!Sd(e)?"{}":e}function t0e(e,t){const n=this;if(t=t||{},G0.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=ct({},e.locale,t.locale);n.locale(Ace(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||td.Canvas,n._scenegraph=new cj;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||ytt,n._redraw=!0,n._handler=new j5().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Met(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=utt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:ct({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=$me(n,n._width),n._viewHeight=Qme(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,dtt(n),Wet(n),Eet(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function fk(e,t){return ze(e._signals,t)?e._signals[t]:le("Unrecognized signal name: "+ke(t))}function n0e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function F2(e,t,n,r){let i=n0e(n,r);return i||(i=W4(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function M2(e,t,n){const r=n0e(t,n);return r&&t._targets.remove(r),e}Se(t0e,G0,{async evaluate(e,t,n){if(await G0.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Cet(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&J_(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&Hme(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=fk(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",T2(e)):T2(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(I1(e)||le("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(G0.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(fk(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:ftt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=W4(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return F2(this,e,fk(this,e),t)},removeSignalListener(e,t){return M2(this,fk(this,e),t)},addDataListener(e,t){return F2(this,e,YI(this,e).values,t)},removeDataListener(e,t){return M2(this,YI(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=AT(this,null);this._globalCursor=!!e,t&&AT(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:btt,events:zet,finalize:jet,hover:Pet,data:Xet,change:M1,insert:Let,remove:Ret,scale:ctt,initialize:rtt,toImageURL:ott,toCanvas:stt,toSVG:ltt,getState:ptt,setState:gtt});const wtt="view",NI="[",FI="]",r0e="{",i0e="}",Ztt=":",o0e=",",Stt="@",ktt=">",_tt=/[[\]{}]/,Gtt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let a0e,s0e;function bf(e,t,n){return a0e=t||wtt,s0e=n||Gtt,l0e(e.trim()).map(UT)}function Itt(e){return s0e[e]}function mx(e,t,n,r,i){const o=e.length;let a=0,s;for(;t<o;++t){if(s=e[t],!a&&s===n)return t;i&&i.indexOf(s)>=0?--a:r&&r.indexOf(s)>=0&&++a}return t}function l0e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=mx(e,i,o0e,NI+r0e,FI+i0e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function UT(e){return e[0]==="["?Wtt(e):Ett(e)}function Wtt(e){const t=e.length;let n=1,r;if(n=mx(e,n,FI,NI,FI),n===t)throw"Empty between selector: "+e;if(r=l0e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==ktt)throw"Expected '>' after between selector: "+e;r=r.map(UT);const i=UT(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Ett(e){const t={source:a0e},n=[];let r=[0,0],i=0,o=0,a=e.length,s=0,l,u;if(e[a-1]===i0e){if(s=e.lastIndexOf(r0e),s>=0){try{r=Xtt(e.substring(s+1,a-1))}catch(c){throw"Invalid throttle specification: "+e}e=e.slice(0,s).trim(),a=e.length}else throw"Unmatched right brace: "+e;s=0}if(!a)throw e;if(e[0]===Stt&&(i=++s),l=mx(e,s,Ztt),l<a&&(n.push(e.substring(o,l).trim()),o=s=++l),s=mx(e,s,NI),s===a)n.push(e.substring(o,a).trim());else if(n.push(e.substring(o,s).trim()),u=[],o=++s,o===a)throw"Unmatched left bracket: "+e;for(;s<a;){if(s=mx(e,s,FI),s===a)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,s).trim()),s<a-1&&e[++s]!==NI)throw"Expected left bracket: "+e;o=++s}if(!(a=n.length)||_tt.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],i?t.markname=n[0].slice(1):Itt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Xtt(e){const t=e.split(o0e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function Ltt(e){return Le(e)?e:{type:e||"pad"}}const My=e=>+e||0,Rtt=e=>({top:e,bottom:e,left:e,right:e});function Ctt(e){return Le(e)?e.signal?e:{top:My(e.top),bottom:My(e.bottom),left:My(e.left),right:My(e.right)}:Rtt(My(e))}const kr=e=>Le(e)&&!ce(e)?ct({},e):{value:e};function O2(e,t,n,r){return n!=null?(Le(n)&&!ce(n)||ce(n)&&n.length&&Le(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Hr(e,t,n){for(const r in t)O2(e,r,t[r]);for(const r in n)O2(e,r,n[r],"update")}function wb(e,t,n){for(const r in t)n&&ze(n,r)||(e[r]=ct(e[r]||{},t[r]));return e}function _m(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const L4="mark",R4="frame",C4="scope",Vtt="axis",Ytt="axis-domain",Ttt="axis-grid",Ntt="axis-label",Ftt="axis-tick",Mtt="axis-title",Ott="legend",ztt="legend-band",Ptt="legend-entry",jtt="legend-gradient",u0e="legend-label",Htt="legend-symbol",Jtt="legend-title",Btt="title",Ktt="title-text",Dtt="title-subtitle";function Att(e,t,n,r,i){const o={},a={};let s,l,u,c;l="lineBreak",t==="text"&&i[l]!=null&&!_m(l,e)&&DR(o,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===R4?i.group:n===L4?ct({},i.mark,i[t]):null;for(l in c)u=_m(l,e)||(l==="fill"||l==="stroke")&&(_m("fill",e)||_m("stroke",e)),u||DR(o,l,c[l]);Ee(r).forEach(d=>{const f=i.style&&i.style[d];for(const h in f)_m(h,e)||DR(o,h,f[h])}),e=ct({},e);for(l in o)c=o[l],c.signal?(s=s||{})[l]=c:a[l]=c;return e.enter=ct(a,e.enter),s&&(e.update=ct(s,e.update)),e}function DR(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const c0e=e=>We(e)?ke(e):e.signal?`(${e.signal})`:d0e(e);function z1(e){if(e.gradient!=null)return $tt(e);let t=e.signal?`(${e.signal})`:e.color?Utt(e.color):e.field!=null?d0e(e.field):e.value!==void 0?ke(e.value):void 0;return e.scale!=null&&(t=Qtt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${l9(e.exponent)})`),e.mult!=null&&(t+=`*${l9(e.mult)}`),e.offset!=null&&(t+=`+${l9(e.offset)}`),e.round&&(t=`round(${t})`),t}const pk=(e,t,n,r)=>`(${e}(${[t,n,r].map(z1).join(",")})+'')`;function Utt(e){return e.c?pk("hcl",e.h,e.c,e.l):e.h||e.s?pk("hsl",e.h,e.s,e.l):e.l||e.a?pk("lab",e.l,e.a,e.b):e.r||e.g||e.b?pk("rgb",e.r,e.g,e.b):null}function $tt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ke(n));for(;t.length&&Zt(t)==null;)t.pop();return t.unshift(c0e(e.gradient)),`gradient(${t.join(",")})`}function l9(e){return Le(e)?"("+z1(e)+")":e}function d0e(e){return f0e(Le(e)?e:{datum:e})}function f0e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):le("Invalid field reference: "+ke(e));return e.signal||(r=We(r)?$l(r).map(ke).join("]["):f0e(r)),t+"["+r+"]"}function Qtt(e,t){const n=c0e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+l9(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function qtt(e){let t="";return e.forEach(n=>{const r=z1(n);t+=n.test?`(${n.test})?${r}:`:r}),Zt(t)===":"&&(t+="null"),t}function p0e(e,t,n,r,i,o){const a={};o=o||{},o.encoders={$encode:a},e=Att(e,t,n,r,i.config);for(const s in e)a[s]=ent(e[s],t,o,i);return o}function ent(e,t,n,r){const i={},o={};for(const a in e)e[a]!=null&&(i[a]=nnt(tnt(e[a]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function tnt(e){return ce(e)?qtt(e):z1(e)}function nnt(e,t,n,r){const i=Hl(e,t);return i.$fields.forEach(o=>r[o]=1),ct(n,i.$params),i.$expr}const rnt="outer",int=["value","update","init","react","bind"];function z2(e,t){le(e+' for "outer" push: '+ke(t))}function h0e(e,t){const n=e.name;if(e.push===rnt)t.signals[n]||z2("No prior signal definition",n),int.forEach(r=>{e[r]!==void 0&&z2("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function $T(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function P1(e,t,n,r){return new $T(e,t,n,r)}function MI(e,t){return P1("operator",e,t)}function je(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function _w(e,t){return t?{$field:e,$name:t}:{$field:e}}const QT=_w("key");function P2(e,t){return{$compare:e,$order:t}}function ont(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const ant="ascending",snt="descending";function lnt(e){return Le(e)?(e.order===snt?"-":"+")+j1(e.op,e.field):""}function j1(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const V4="scope",qT="view";function ur(e){return e&&e.signal}function unt(e){return e&&e.expr}function u9(e){if(ur(e))return!0;if(Le(e)){for(const t in e)if(u9(e[t]))return!0}return!1}function Ua(e,t){return e!=null?e:t}function Xp(e){return e&&e.signal||e}const j2="timer";function Gw(e,t){return(e.merge?dnt:e.stream?fnt:e.type?pnt:le("Invalid stream specification: "+ke(e)))(e,t)}function cnt(e){return e===V4?qT:e||qT}function dnt(e,t){const n=e.merge.map(i=>Gw(i,t)),r=Y4({merge:n},e,t);return t.addStream(r).id}function fnt(e,t){const n=Gw(e.stream,t),r=Y4({stream:n},e,t);return t.addStream(r).id}function pnt(e,t){let n;e.type===j2?(n=t.event(j2,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(cnt(e.source),e.type);const r=Y4({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Y4(e,t,n){let r=t.between;return r&&(r.length!==2&&le('Stream "between" parameter must have 2 entries: '+ke(t)),e.between=[Gw(r[0],n),Gw(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(hnt(t.marktype,t.markname,t.markrole)),t.source===V4&&r.push("inScope(event.item)"),r.length&&(e.filter=Hl("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function hnt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const mnt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function gnt(e,t,n){const r=e.encode,i={target:n};let o=e.events,a=e.update,s=[];o||le("Signal update missing events specification."),We(o)&&(o=bf(o,t.isSubscope()?V4:qT)),o=Ee(o).filter(l=>l.signal||l.scale?(s.push(l),0):1),s.length>1&&(s=[ynt(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),r!=null&&(a&&le("Signal encode and update are mutually exclusive."),a="encode(item(),"+ke(r)+")"),i.update=We(a)?Hl(a,t):a.expr!=null?Hl(a.expr,t):a.value!=null?a.value:a.signal!=null?{$expr:mnt,$params:{$value:t.signalRef(a.signal)}}:le("Invalid signal update specification."),e.force&&(i.options={force:!0}),s.forEach(l=>t.addUpdate(ct(bnt(l,t),i)))}function bnt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Gw(e,t)}}function ynt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function vnt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?le("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Hl(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>gnt(i,t,n.id))}const Ut=e=>(t,n,r)=>P1(e,n,t||void 0,r),m0e=Ut("aggregate"),xnt=Ut("axisticks"),g0e=Ut("bound"),Cs=Ut("collect"),H2=Ut("compare"),wnt=Ut("datajoin"),b0e=Ut("encode"),Znt=Ut("expression"),Snt=Ut("facet"),knt=Ut("field"),_nt=Ut("key"),Gnt=Ut("legendentries"),Int=Ut("load"),Wnt=Ut("mark"),Ent=Ut("multiextent"),Xnt=Ut("multivalues"),Lnt=Ut("overlap"),Rnt=Ut("params"),y0e=Ut("prefacet"),Cnt=Ut("projection"),Vnt=Ut("proxy"),Ynt=Ut("relay"),v0e=Ut("render"),Tnt=Ut("scale"),Eh=Ut("sieve"),Nnt=Ut("sortitems"),x0e=Ut("viewlayout"),Fnt=Ut("values");let Mnt=0;const w0e={min:"min",max:"max",count:"sum"};function Ont(e,t){const n=e.type||"linear";bfe(n)||le("Unrecognized scale type: "+ke(n)),t.addScale(e.name,{type:n,domain:void 0})}function znt(e,t){const n=t.getScale(e.name).params;let r;n.domain=Z0e(e.domain,e,t),e.range!=null&&(n.range=k0e(e,t,n)),e.interpolate!=null&&$nt(e.interpolate,n),e.nice!=null&&(n.nice=Unt(e.nice)),e.bins!=null&&(n.bins=Ant(e.bins,t));for(r in e)ze(n,r)||r==="name"||(n[r]=ha(e[r],t))}function ha(e,t){return Le(e)?e.signal?t.signalRef(e.signal):le("Unsupported object: "+ke(e)):e}function c9(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>ha(n,t))}function H1(e){le("Can not find data set: "+ke(e))}function Z0e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&le("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(ce(e)?Pnt:e.fields?Hnt:jnt)(e,t,n)}function Pnt(e,t,n){return e.map(r=>ha(r,n))}function jnt(e,t,n){const r=n.getData(e.data);return r||H1(e.data),yg(t.type)?r.valuesRef(n,e.field,S0e(e.sort,!1)):xfe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function Hnt(e,t,n){const r=e.data,i=e.fields.reduce((o,a)=>(a=We(a)?{data:r,field:a}:ce(a)||a.signal?Jnt(a,n):a,o.push(a),o),[]);return(yg(t.type)?Bnt:xfe(t.type)?Knt:Dnt)(e,n,i)}function Jnt(e,t){const n="_:vega:_"+Mnt++,r=Cs({});if(ce(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+ke(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Eh({})]),{data:n,field:"data"}}function Bnt(e,t,n){const r=S0e(e.sort,!0);let i,o;const a=n.map(u=>{const c=t.getData(u.data);return c||H1(u.data),c.countsRef(t,u.field,r)}),s={groupby:QT,pulse:a};r&&(i=r.op||"count",o=r.field?j1(i,r.field):"count",s.ops=[w0e[i]],s.fields=[t.fieldRef(o)],s.as=[o]),i=t.add(m0e(s));const l=t.add(Cs({pulse:je(i)}));return o=t.add(Fnt({field:QT,sort:t.sortRef(r),pulse:je(l)})),je(o)}function S0e(e,t){return e&&(!e.field&&!e.op?Le(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?le("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!w0e[e.op]&&le("Multiple domain scales can not be sorted using "+e.op)),e}function Knt(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||H1(i.data),o.domainRef(t,i.field)});return je(t.add(Xnt({values:r})))}function Dnt(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||H1(i.data),o.extentRef(t,i.field)});return je(t.add(Ent({extents:r})))}function Ant(e,t){return e.signal||ce(e)?c9(e,t):t.objectProperty(e)}function Unt(e){return Le(e)?{interval:ha(e.interval),step:ha(e.step)}:ha(e)}function $nt(e,t){t.interpolate=ha(e.type||e),e.gamma!=null&&(t.interpolateGamma=ha(e.gamma))}function k0e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(We(i)){if(r&&ze(r,i))return e=ct({},e,{range:r[i]}),k0e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=yg(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:le("Unrecognized scale range value: "+ke(i))}else if(i.scheme){n.scheme=ce(i.scheme)?c9(i.scheme,t):ha(i.scheme,t),i.extent&&(n.schemeExtent=c9(i.extent,t)),i.count&&(n.schemeCount=ha(i.count,t));return}else if(i.step){n.rangeStep=ha(i.step,t);return}else{if(yg(e.type)&&!ce(i))return Z0e(i,e,t);ce(i)||le("Unsupported range type: "+ke(i))}return i.map(o=>(ce(o)?c9:ha)(o,t))}function Qnt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=eN(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=eN(n[i],i,t));t.addProjection(e.name,r)}function eN(e,t,n){return ce(e)?e.map(r=>eN(r,t,n)):Le(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:le("Unsupported parameter object: "+ke(e)):e}const Vs="top",Zb="left",Sb="right",Jd="bottom",_0e="center",qnt="vertical",ert="start",trt="middle",nrt="end",tN="index",T4="label",rrt="offset",Wg="perc",irt="perc2",ya="value",Q5="guide-label",N4="guide-title",ort="group-title",art="group-subtitle",J2="symbol",d9="gradient",nN="discrete",rN="size",srt="shape",lrt="fill",urt="stroke",crt="strokeWidth",drt="strokeDash",frt="opacity",F4=[rN,srt,lrt,urt,crt,drt,frt],q5={name:1,style:1,interactive:1},Gt={value:0},va={value:1},J1="group",G0e="rect",M4="rule",prt="symbol",Xh="text";function Iw(e){return e.type=J1,e.interactive=e.interactive||!1,e}function yo(e,t){const n=(r,i)=>Ua(e[r],Ua(t[r],i));return n.isVertical=r=>qnt===Ua(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Ua(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Ua(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Ua(e.columns,Ua(t.columns,+n.isVertical(!0))),n}function I0e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function hrt(e,t,n){const r=t.config.style[n];return r&&r[e]}function B1(e,t,n){return`item.anchor === '${ert}' ? ${e} : item.anchor === '${nrt}' ? ${t} : ${n}`}const O4=B1(ke(Zb),ke(Sb),ke(_0e));function mrt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},Le(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function W0e(e,t){return t?e?Le(e)?Object.assign({},e,{offset:W0e(e.offset,t)}):{value:e,offset:t}:t:e}function Ho(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=wb(e.encode,t,q5)):e.interactive=!1,e}function grt(e,t,n,r){const i=yo(e,n),o=i.isVertical(),a=i.gradientThickness(),s=i.gradientLength();let l,u,c,d,f;o?(u=[0,1],c=[0,0],d=a,f=s):(u=[0,0],c=[1,0],d=s,f=a);const h={enter:l={opacity:Gt,x:Gt,y:Gt,width:kr(d),height:kr(f)},update:ct({},l,{opacity:va,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:Gt}};return Hr(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Ho({type:G0e,role:jtt,encode:h},r)}function brt(e,t,n,r,i){const o=yo(e,n),a=o.isVertical(),s=o.gradientThickness(),l=o.gradientLength();let u,c,d,f,h="";a?(u="y",d="y2",c="x",f="width",h="1-"):(u="x",d="x2",c="y",f="height");const m={opacity:Gt,fill:{scale:t,field:ya}};m[u]={signal:h+"datum."+Wg,mult:l},m[c]=Gt,m[d]={signal:h+"datum."+irt,mult:l},m[f]=kr(s);const g={enter:m,update:ct({},m,{opacity:va}),exit:{opacity:Gt}};return Hr(g,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),Ho({type:G0e,role:ztt,key:ya,from:i,encode:g},r)}const yrt=`datum.${Wg}<=0?"${Zb}":datum.${Wg}>=1?"${Sb}":"${_0e}"`,vrt=`datum.${Wg}<=0?"${Jd}":datum.${Wg}>=1?"${Vs}":"${trt}"`;function B2(e,t,n,r){const i=yo(e,t),o=i.isVertical(),a=kr(i.gradientThickness()),s=i.gradientLength();let l=i("labelOverlap"),u,c,d,f,h="";const m={enter:u={opacity:Gt},update:c={opacity:va,text:{field:T4}},exit:{opacity:Gt}};return Hr(m,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Ua(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=c.baseline={signal:vrt},d="y",f="x",h="1-"):(u.align=c.align={signal:yrt},u.baseline={value:"top"},d="x",f="y"),u[d]=c[d]={signal:h+"datum."+Wg,mult:s},u[f]=c[f]=a,a.offset=Ua(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+tN}:void 0,Ho({type:Xh,role:u0e,style:Q5,key:ya,from:r,encode:m,overlap:l},n)}function xrt(e,t,n,r,i){const o=yo(e,t),a=n.entries,s=!!(a&&a.interactive),l=a?a.name:void 0,u=o("clipHeight"),c=o("symbolOffset"),d={data:"value"},f=`(${i}) ? datum.${rrt} : datum.${rN}`,h=u?kr(u):{field:rN},m=`datum.${tN}`,g=`max(1, ${i})`;let y,v,w,Z,k;h.mult=.5,y={enter:v={opacity:Gt,x:{signal:f,mult:.5,offset:c},y:h},update:w={opacity:va,x:v.x,y:v.y},exit:{opacity:Gt}};let _=null,R=null;e.fill||(_=t.symbolBaseFillColor,R=t.symbolBaseStrokeColor),Hr(y,{fill:o("symbolFillColor",_),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",R),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),F4.forEach(Y=>{e[Y]&&(w[Y]=v[Y]={scale:e[Y],field:ya})});const I=Ho({type:prt,role:Htt,key:ya,from:d,clip:u?!0:void 0,encode:y},n.symbols),E=kr(c);E.offset=o("labelOffset"),y={enter:v={opacity:Gt,x:{signal:f,offset:E},y:h},update:w={opacity:va,text:{field:T4},x:v.x,y:v.y},exit:{opacity:Gt}},Hr(y,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const X=Ho({type:Xh,role:u0e,style:Q5,key:ya,from:d,encode:y},n.labels);return y={enter:{noBound:{value:!u},width:Gt,height:u?kr(u):Gt,opacity:Gt},exit:{opacity:Gt},update:w={opacity:va,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(Z=`ceil(item.mark.items.length / ${g})`,w.row.signal=`${m}%${Z}`,w.column.signal=`floor(${m} / ${Z})`,k={field:["row",m]}):(w.row.signal=`floor(${m} / ${g})`,w.column.signal=`${m} % ${g}`,k={field:m}),w.column.signal=`(${i})?${w.column.signal}:${m}`,r={facet:{data:r,name:"value",groupby:tN}},Iw({role:C4,from:r,encode:wb(y,a,q5),marks:[I,X],name:l,interactive:s,sort:k})}function wrt(e,t){const n=yo(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const z4='item.orient === "left"',P4='item.orient === "right"',K1=`(${z4} || ${P4})`,Zrt=`datum.vgrad && ${K1}`,Srt=B1('"top"','"bottom"','"middle"'),krt=B1('"right"','"left"','"center"'),_rt=`datum.vgrad && ${P4} ? (${krt}) : (${K1} && !(datum.vgrad && ${z4})) ? "left" : ${O4}`,Grt=`item._anchor || (${K1} ? "middle" : "start")`,Irt=`${Zrt} ? (${z4} ? -90 : 90) : 0`,Wrt=`${K1} ? (datum.vgrad ? (${P4} ? "bottom" : "top") : ${Srt}) : "top"`;function Ert(e,t,n,r){const i=yo(e,t),o={enter:{opacity:Gt},update:{opacity:va,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Gt}};return Hr(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Grt},angle:{signal:Irt},align:{signal:_rt},baseline:{signal:Wrt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Ho({type:Xh,role:Jtt,style:N4,from:r,encode:o},n)}function Xrt(e,t){let n;return Le(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+K2(e.path)+")":e.sphere&&(n="geoShape("+K2(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function K2(e){return Le(e)&&e.signal?e.signal:ke(e)}function E0e(e){const t=e.role||"";return!t.indexOf("axis")||!t.indexOf("legend")||!t.indexOf("title")?t:e.type===J1?C4:t||L4}function Lrt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||E0e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Rrt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function j4(e,t){const n=lde(e.type);n||le("Unrecognized transform type: "+ke(e.type));const r=P1(n.type.toLowerCase(),null,X0e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function X0e(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const a=e.params[o];r[a.name]=Crt(a,t,n)}return r}function Crt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return Vrt(e,t,n);if(i===void 0){e.required&&le("Missing required "+ke(t.type)+" parameter: "+ke(e.name));return}else{if(r==="param")return Yrt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!ur(i)?i.map(o=>D2(e,o,n)):D2(e,i,n)}function D2(e,t,n){const r=e.type;if(ur(t))return U2(r)?le("Expression references can not be signals."):AR(r)?n.fieldRef(t):$2(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||AR(r);return i&&Trt(t)?n.exprRef(t.expr,t.as):i&&Nrt(t)?_w(t.field,t.as):U2(r)?Hl(t,n):Frt(r)?je(n.getData(t).values):AR(r)?_w(t):$2(r)?n.compareRef(t):t}}function Vrt(e,t,n){return We(t.from)||le('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function Yrt(e,t,n){const r=t[e.name];return e.array?(ce(r)||le("Expected an array of sub-parameters. Instead: "+ke(r)),r.map(i=>A2(e,i,n))):A2(e,r,n)}function A2(e,t,n){const r=e.params.length;let i;for(let a=0;a<r;++a){i=e.params[a];for(const s in i.key)if(i.key[s]!==t[s]){i=null;break}if(i)break}i||le("Unsupported parameter: "+ke(t));const o=ct(X0e(i,t,n),i.key);return je(n.add(Rnt(o)))}const Trt=e=>e&&e.expr,Nrt=e=>e&&e.field,Frt=e=>e==="data",U2=e=>e==="expr",AR=e=>e==="field",$2=e=>e==="compare";function Mrt(e,t,n){let r,i,o,a,s;return e?(r=e.facet)&&(t||le("Only group marks can be faceted."),r.field!=null?a=s=f9(r,n):(e.data?s=je(n.getData(e.data).aggregate):(o=j4(ct({type:"aggregate",groupby:Ee(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=f9(r,n),a=s=je(n.add(o))),i=n.keyRef(r.groupby,!0))):a=je(n.add(Cs(null,[{}]))),a||(a=f9(e,n)),{key:i,pulse:a,parent:s}}function f9(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:je(t.getData(e.data).output)}function rh(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}rh.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],a=null,s=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=je(t[s-1]),e.add(t[s]),t[s].type==="aggregate"&&(a=t[s]);return new rh(e,o,i,r,a)};function L0e(e){return We(e)?e:null}function Q2(e,t,n){const r=j1(n.op,n.field);let i;if(t.ops){for(let o=0,a=t.as.length;o<a;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function Oy(e,t,n,r,i,o,a){const s=t[n]||(t[n]={}),l=lnt(o);let u=L0e(i),c,d;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=s[u]),!c){const f=o?{field:QT,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:je(t.output)};l&&(f.sort=e.sortRef(o)),d=e.add(P1(r,void 0,f)),a&&(t.index[i]=d),c=je(d),u!=null&&(s[u]=c)}return c}rh.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=L0e(t);let a,s,l;return o!=null&&(e=r.scope,a=i[o]),a?n&&n.field&&Q2(e,a.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:je(r.output)},n&&n.field&&Q2(e,l,n),s=e.add(m0e(l)),a=e.add(Cs({pulse:je(s)})),a={agg:s,ref:je(a)},o!=null&&(i[o]=a)),a.ref},tuplesRef(){return je(this.values)},extentRef(e,t){return Oy(e,this,"extent","extent",t,!1)},domainRef(e,t){return Oy(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Oy(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Oy(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Oy(e,this,"indata","tupleindex",t,!0,!0)}};function Ort(e,t,n){const r=e.from.facet,i=r.name,o=f9(r,t);let a;r.name||le("Facet must have a name: "+ke(r)),r.data||le("Facet must reference a data set: "+ke(r)),r.field?a=t.add(y0e({field:t.fieldRef(r.field),pulse:o})):r.groupby?a=t.add(Snt({key:t.keyRef(r.groupby),group:je(t.proxy(n.parent)),pulse:o})):le("Facet must specify groupby or field: "+ke(r));const s=t.fork(),l=s.add(Cs()),u=s.add(Eh({pulse:je(l)}));s.addData(i,new rh(s,l,l,u)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}function zrt(e,t,n){const r=t.add(y0e({pulse:n.pulse})),i=t.fork();i.add(Eh()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function R0e(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,a=e.modify,s=e.values,l=t.add(MI()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,o,a,s].map(d=>d!=null?d:"null").join(",")+"),0)",c=Hl(u,t);l.update=c.$expr,l.params=c.$params}function D1(e,t){const n=E0e(e),r=e.type===J1,i=e.from&&e.from.facet,o=e.overlap;let a=e.layout||n===C4||n===R4,s,l,u,c,d,f,h;const m=n===L4||a||i,g=Mrt(e.from,r,t);l=t.add(wnt({key:g.key||(e.key?_w(e.key):void 0),pulse:g.pulse,clean:!r}));const y=je(l);l=u=t.add(Cs({pulse:y})),l=t.add(Wnt({markdef:Lrt(e),interactive:Rrt(e.interactive,t),clip:Xrt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:je(l)}));const v=je(l);l=c=t.add(b0e(p0e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:v}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(R=>{const I=j4(R,t),E=I.metadata;(E.generates||E.changes)&&le("Mark transforms should not generate new data."),E.nomod||(c.params.mod=!0),I.params.pulse=je(l),t.add(l=I)}),e.sort&&(l=t.add(Nnt({sort:t.compareRef(e.sort),pulse:je(l)})));const w=je(l);(i||a)&&(a=t.add(x0e({layout:t.objectProperty(e.layout),legends:t.legends,mark:v,pulse:w})),f=je(a));const Z=t.add(g0e({mark:v,pulse:f||w}));h=je(Z),r&&(m&&(s=t.operators,s.pop(),a&&s.pop()),t.pushState(w,f||h,y),i?Ort(e,t,g):m?zrt(e,t,g):t.parse(e),t.popState(),m&&(a&&s.push(a),s.push(Z))),o&&(h=Prt(o,h,t));const k=t.add(v0e({pulse:h})),_=t.add(Eh({pulse:je(k)},void 0,t.parent()));e.name!=null&&(d=e.name,t.addData(d,new rh(t,u,k,_)),e.on&&e.on.forEach(R=>{(R.insert||R.remove||R.toggle)&&le("Marks only support modify triggers."),R0e(R,t,d)}))}function Prt(e,t,n){const r=e.method,i=e.bound,o=e.separation,a={separation:ur(o)?n.signalRef(o.signal):o,method:ur(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),i){const s=i.tolerance;a.boundTolerance=ur(s)?n.signalRef(s.signal):+s,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return je(n.add(Lnt(a)))}function jrt(e,t){const n=t.config.legend,r=e.encode||{},i=yo(e,n),o=r.legend||{},a=o.name||void 0,s=o.interactive,l=o.style,u={};let c=0,d,f,h;F4.forEach(Z=>e[Z]?(u[Z]=e[Z],c=c||e[Z]):0),c||le("Missing valid scale for legend.");const m=Hrt(e,t.scaleType(c)),g={title:e.title!=null,scales:u,type:m,vgrad:m!=="symbol"&&i.isVertical()},y=je(t.add(Cs(null,[g]))),v={enter:{x:{value:0},y:{value:0}}},w=je(t.add(Gnt(f={type:m,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return m===d9?(h=[grt(e,c,n,r.gradient),B2(e,n,r.labels,w)],f.count=f.count||t.signalRef(`max(2,2*floor((${Xp(i.gradientLength())})/100))`)):m===nN?h=[brt(e,c,n,r.gradient,w),B2(e,n,r.labels,w)]:(d=wrt(e,n),h=[xrt(e,n,r,w,Xp(d.columns))],f.size=Krt(e,t,h[0].marks)),h=[Iw({role:Ptt,from:y,encode:v,marks:h,layout:d,interactive:s})],g.title&&h.push(Ert(e,n,r.title,y)),D1(Iw({role:Ott,from:y,encode:wb(Brt(i,e,n),o,q5),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:s,style:l}),t)}function Hrt(e,t){let n=e.type||J2;return!e.type&&Jrt(e)===1&&(e.fill||e.stroke)&&(n=MP(t)?d9:DY(t)?nN:J2),n!==d9?n:DY(t)?nN:d9}function Jrt(e){return F4.reduce((t,n)=>t+(e[n]?1:0),0)}function Brt(e,t,n){const r={enter:{},update:{}};return Hr(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function Krt(e,t,n){const r=Xp(q2("size",e,n)),i=Xp(q2("strokeWidth",e,n)),o=Xp(Drt(n[1].encode,t,Q5));return Hl(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function q2(e,t,n){return t[e]?`scale("${t[e]}",datum)`:I0e(e,n[0].encode)}function Drt(e,t,n){return I0e("fontSize",e)||hrt("fontSize",t,n)}const Art=`item.orient==="${Zb}"?-90:item.orient==="${Sb}"?90:0`;function Urt(e,t){e=We(e)?{text:e}:e;const n=yo(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,a=i.interactive,s=i.style,l=[],u={},c=je(t.add(Cs(null,[u])));return l.push(qrt(e,n,$rt(e),c)),e.subtitle&&l.push(eit(e,n,r.subtitle,c)),D1(Iw({role:Btt,from:c,encode:Qrt(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function $rt(e){const t=e.encode;return t&&t.title||ct({name:e.name,interactive:e.interactive,style:e.style},t)}function Qrt(e,t){const n={enter:{},update:{}};return Hr(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:O4},angle:{signal:Art},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),wb(n,t,q5)}function qrt(e,t,n,r){const i={value:0},o=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Hr(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Ho({type:Xh,role:Ktt,style:ort,from:r,encode:a},n)}function eit(e,t,n,r){const i={value:0},o=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Hr(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Ho({type:Xh,role:Dtt,style:art,from:r,encode:a},n)}function tit(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(j4(r,t))}),e.on&&e.on.forEach(r=>{R0e(r,t,e.name)}),t.addDataPipeline(e.name,nit(e,t,n))}function nit(e,t,n){const r=[];let i=null,o=!1,a=!1,s,l,u,c,d;for(e.values?ur(e.values)||u9(e.format)?(r.push(e$(t,e)),r.push(i=Mf())):r.push(i=Mf({$ingest:e.values,$format:e.format})):e.url?u9(e.url)||u9(e.format)?(r.push(e$(t,e)),r.push(i=Mf())):r.push(i=Mf({$request:e.url,$format:e.format})):e.source&&(i=s=Ee(e.source).map(f=>je(t.getData(f).output)),r.push(null)),l=0,u=n.length;l<u;++l)c=n[l],d=c.metadata,!i&&!d.source&&r.push(i=Mf()),r.push(c),d.generates&&(a=!0),d.modifies&&!a&&(o=!0),d.source?i=c:d.changes&&(i=null);return s&&(u=s.length-1,r[0]=Ynt({derive:o,pulse:u?s:s[0]}),(o||u)&&r.splice(1,0,Mf())),i||r.push(Mf()),r.push(Eh({})),r}function Mf(e){const t=Cs({},e);return t.metadata={source:!0},t}function e$(e,t){return Int({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const C0e=e=>e===Jd||e===Vs,A1=(e,t,n)=>ur(e)?ait(e.signal,t,n):e===Zb||e===Vs?t:n,_r=(e,t,n)=>ur(e)?iit(e.signal,t,n):C0e(e)?t:n,ys=(e,t,n)=>ur(e)?oit(e.signal,t,n):C0e(e)?n:t,V0e=(e,t,n)=>ur(e)?sit(e.signal,t,n):e===Vs?{value:t}:{value:n},rit=(e,t,n)=>ur(e)?lit(e.signal,t,n):e===Sb?{value:t}:{value:n},iit=(e,t,n)=>Y0e(`${e} === '${Vs}' || ${e} === '${Jd}'`,t,n),oit=(e,t,n)=>Y0e(`${e} !== '${Vs}' && ${e} !== '${Jd}'`,t,n),ait=(e,t,n)=>H4(`${e} === '${Zb}' || ${e} === '${Vs}'`,t,n),sit=(e,t,n)=>H4(`${e} === '${Vs}'`,t,n),lit=(e,t,n)=>H4(`${e} === '${Sb}'`,t,n),Y0e=(e,t,n)=>(t=t!=null?kr(t):t,n=n!=null?kr(n):n,t$(t)&&t$(n)?(t=t?t.signal||ke(t.value):null,n=n?n.signal||ke(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[ct({test:e},t)].concat(n||[])),t$=e=>e==null||Object.keys(e).length===1,H4=(e,t,n)=>({signal:`${e} ? (${p0(t)}) : (${p0(n)})`}),uit=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${Zb}' ? (${p0(r)}) : `:"")+(n!=null?`${e} === '${Jd}' ? (${p0(n)}) : `:"")+(i!=null?`${e} === '${Sb}' ? (${p0(i)}) : `:"")+(t!=null?`${e} === '${Vs}' ? (${p0(t)}) : `:"")+"(null)"}),p0=e=>ur(e)?e.signal:e==null?null:ke(e),cit=(e,t)=>t===0?0:ur(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},W0=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function gm(e,t,n,r){let i;if(t&&ze(t,e))return t[e];if(ze(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[N4][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Q5][i]}return null}function n$(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function dit(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,a=e.orient,s,l,u;if(ur(a)){const c=n$([n.axisX,n.axisY]),d=n$([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);s={};for(u of c)s[u]=_r(a,gm(u,n.axisX,i,r),gm(u,n.axisY,i,r));l={};for(u of d)l[u]=uit(a.signal,gm(u,n.axisTop,i,r),gm(u,n.axisBottom,i,r),gm(u,n.axisLeft,i,r),gm(u,n.axisRight,i,r))}else s=a===Vs||a===Jd?n.axisX:n.axisY,l=n["axis"+a[0].toUpperCase()+a.slice(1)];return s||l||o?ct({},i,s,l,o):i}function fit(e,t,n,r){const i=yo(e,t),o=e.orient;let a,s;const l={enter:a={opacity:Gt},update:s={opacity:va},exit:{opacity:Gt}};Hr(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=r$(e,0),c=r$(e,1);return a.x=s.x=_r(o,u,Gt),a.x2=s.x2=_r(o,c),a.y=s.y=ys(o,u,Gt),a.y2=s.y2=ys(o,c),Ho({type:M4,role:Ytt,from:r,encode:l},n)}function r$(e,t){return{scale:e.scale,range:t}}function pit(e,t,n,r,i){const o=yo(e,t),a=e.orient,s=e.gridScale,l=A1(a,1,-1),u=hit(e.offset,l);let c,d,f;const h={enter:c={opacity:Gt},update:f={opacity:va},exit:d={opacity:Gt}};Hr(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const m={scale:e.scale,field:ya,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},g=_r(a,{signal:"height"},{signal:"width"}),y=s?{scale:s,range:0,mult:l,offset:u}:{value:0,offset:u},v=s?{scale:s,range:1,mult:l,offset:u}:ct(g,{mult:l,offset:u});return c.x=f.x=_r(a,m,y),c.y=f.y=ys(a,m,y),c.x2=f.x2=ys(a,v),c.y2=f.y2=_r(a,v),d.x=_r(a,m),d.y=ys(a,m),Ho({type:M4,role:Ttt,key:ya,from:r,encode:h},n)}function hit(e,t){if(t!==1)if(!Le(e))e=ur(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=ct({},e);for(;n.mult!=null;)if(Le(n.mult))n=n.mult=ct({},n.mult);else return n.mult=ur(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function mit(e,t,n,r,i,o){const a=yo(e,t),s=e.orient,l=A1(s,-1,1);let u,c,d;const f={enter:u={opacity:Gt},update:d={opacity:va},exit:c={opacity:Gt}};Hr(f,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const h=kr(i);h.mult=l;const m={scale:e.scale,field:ya,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return d.y=u.y=_r(s,Gt,m),d.y2=u.y2=_r(s,h),c.x=_r(s,m),d.x=u.x=ys(s,Gt,m),d.x2=u.x2=ys(s,h),c.y=ys(s,m),Ho({type:M4,role:Ftt,key:ya,from:r,encode:f},n)}function UR(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function git(e,t,n,r,i,o){const a=yo(e,t),s=e.orient,l=e.scale,u=A1(s,-1,1),c=Xp(a("labelFlush")),d=Xp(a("labelFlushOffset")),f=a("labelAlign"),h=a("labelBaseline");let m=c===0||!!c,g;const y=kr(i);y.mult=u,y.offset=kr(a("labelPadding")||0),y.offset.mult=u;const v={scale:l,field:ya,band:.5,offset:W0e(o.offset,a("labelOffset"))},w=_r(s,m?UR(l,c,'"left"','"right"','"center"'):{value:"center"},rit(s,"left","right")),Z=_r(s,V0e(s,"bottom","top"),m?UR(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),k=UR(l,c,`-(${d})`,d,0);m=m&&d;const _={opacity:Gt,x:_r(s,v,y),y:ys(s,v,y)},R={enter:_,update:g={opacity:va,text:{field:T4},x:_.x,y:_.y,align:w,baseline:Z},exit:{opacity:Gt,x:_.x,y:_.y}};Hr(R,{dx:!f&&m?_r(s,k):null,dy:!h&&m?ys(s,k):null}),Hr(R,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:f,baseline:h});const I=a("labelBound");let E=a("labelOverlap");return E=E||I?{separation:a("labelSeparation"),method:E,order:"datum.index",bound:I?{scale:l,orient:s,tolerance:I}:null}:void 0,g.align!==w&&(g.align=W0(g.align,w)),g.baseline!==Z&&(g.baseline=W0(g.baseline,Z)),Ho({type:Xh,role:Ntt,style:Q5,key:ya,from:r,encode:R,overlap:E},n)}function bit(e,t,n,r){const i=yo(e,t),o=e.orient,a=A1(o,-1,1);let s,l;const u={enter:s={opacity:Gt,anchor:kr(i("titleAnchor",null)),align:{signal:O4}},update:l=ct({},s,{opacity:va,text:kr(e.title)}),exit:{opacity:Gt}},c={signal:`lerp(range("${e.scale}"), ${B1(0,1,.5)})`};return l.x=_r(o,c),l.y=ys(o,c),s.angle=_r(o,Gt,cit(a,90)),s.baseline=_r(o,V0e(o,Jd,Vs),{value:Jd}),l.angle=s.angle,l.baseline=s.baseline,Hr(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),yit(i,o,u,n),u.update.align=W0(u.update.align,s.align),u.update.angle=W0(u.update.angle,s.angle),u.update.baseline=W0(u.update.baseline,s.baseline),Ho({type:Xh,role:Mtt,style:N4,from:r,encode:u},n)}function yit(e,t,n,r){const i=(s,l)=>s!=null?(n.update[l]=W0(kr(s),n.update[l]),!1):!_m(l,r),o=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===o?kr(a):_r(t,kr(a),kr(o))}function vit(e,t){const n=dit(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,a=i.interactive,s=i.style,l=yo(e,n),u=mrt(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},d=je(t.add(Cs({},[c]))),f=je(t.add(xnt({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let m;return c.grid&&h.push(pit(e,n,r.grid,f,u)),c.ticks&&(m=l("tickSize"),h.push(mit(e,n,r.ticks,f,m,u))),c.labels&&(m=c.ticks?m:0,h.push(git(e,n,r.labels,f,m,u))),c.domain&&h.push(fit(e,n,r.domain,d)),c.title&&h.push(bit(e,n,r.title,d)),D1(Iw({role:Vtt,from:d,encode:wb(xit(l,e),i,q5),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:a,style:s}),t)}function xit(e,t){const n={enter:{},update:{}};return Hr(n,{orient:e("orient"),offset:e("offset")||0,position:Ua(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function T0e(e,t,n){const r=Ee(e.signals),i=Ee(e.scales);return n||r.forEach(o=>h0e(o,t)),Ee(e.projections).forEach(o=>Qnt(o,t)),i.forEach(o=>Ont(o,t)),Ee(e.data).forEach(o=>tit(o,t)),i.forEach(o=>znt(o,t)),(n||r).forEach(o=>vnt(o,t)),Ee(e.axes).forEach(o=>vit(o,t)),Ee(e.marks).forEach(o=>D1(o,t)),Ee(e.legends).forEach(o=>jrt(o,t)),e.title&&Urt(e.title,t),t.parseLambdas(),t}const wit=e=>wb({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Zit(e,t){const n=t.config,r=je(t.root=t.add(MI())),i=Sit(e,n);i.forEach(u=>h0e(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(Cs()),a=t.add(b0e(p0e(wit(e.encode),J1,R4,e.style,t,{pulse:je(o)}))),s=t.add(x0e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:je(a)}));t.operators.pop(),t.pushState(je(a),je(s),null),T0e(e,t,i),t.operators.push(s);let l=t.add(g0e({mark:r,pulse:je(s)}));return l=t.add(v0e({pulse:je(l)})),l=t.add(Eh({pulse:je(l)})),t.addData("root",new rh(t,o,o,l)),t}function zy(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Sit(e,t){const n=a=>Ua(e[a],t[a]),r=[zy("background",n("background")),zy("autosize",Ltt(n("autosize"))),zy("padding",Ctt(n("padding"))),zy("width",n("width")||0),zy("height",n("height")||0)],i=r.reduce((a,s)=>(a[s.name]=s,a),{}),o={};return Ee(e.signals).forEach(a=>{ze(i,a.name)?a=ct(i[a.name],a):r.push(a),o[a.name]=a}),Ee(t.signals).forEach(a=>{!ze(o,a.name)&&!ze(i,a.name)&&r.push(a)}),r}function N0e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function i$(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}N0e.prototype=i$.prototype={parse(e){return T0e(e,this)},fork(){return new i$(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof $T?je(e):e;return this.add(Vnt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let a,s;r&&(a=r.data||(r.data={}),s=a[i]||(a[i]=[]),s.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(je(this.add(Eh({pulse:e})))),this._parent.push(t),this._lookup.push(n?je(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Zt(this._parent)},encode(){return Zt(this._encode)},lookup(){return Zt(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(We(e))return _w(e,t);e.signal||le("Unsupported field reference: "+ke(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=je(this.add(knt(i)))}return r},compareRef(e){let t=!1;const n=o=>ur(o)?(t=!0,this.signalRef(o.signal)):unt(o)?(t=!0,this.exprRef(o.expr)):o,r=Ee(e.field).map(n),i=Ee(e.order).map(n);return t?je(this.add(H2({fields:r,orders:i}))):P2(r,i)},keyRef(e,t){let n=!1;const r=o=>ur(o)?(n=!0,je(i[o.signal])):o,i=this.signals;return e=Ee(e).map(r),n?je(this.add(_nt({fields:e,flat:t}))):ont(e,t)},sortRef(e){if(!e)return e;const t=j1(e.op,e.field),n=e.order||ant;return n.signal?je(this.add(H2({fields:t,orders:this.signalRef(n.signal)}))):P2(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return ze(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&le("Duplicate signal name: "+ke(e));const n=t instanceof $T?t:this.add(MI(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||le("Unrecognized signal name: "+ke(e)),this.signals[e]},signalRef(e){return this.signals[e]?je(this.signals[e]):(ze(this.lambdas,e)||(this.lambdas[e]=this.add(MI(null))),je(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Hl(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Le(e)?e:this.signalRef(e.signal||J4(e))},exprRef(e,t){const n={expr:Hl(e,this)};return t&&(n.expr.$name=t),je(this.add(Znt(n)))},addBinding(e,t){this.bindings||le("Nested signals do not support binding: "+ke(e)),this.bindings.push(ct({signal:e},t))},addScaleProj(e,t){ze(this.scales,e)&&le("Duplicate scale or projection name: "+ke(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Tnt(t))},addProjection(e,t){this.addScaleProj(e,Cnt(t))},getScale(e){return this.scales[e]||le("Unrecognized scale name: "+ke(e)),this.scales[e]},scaleRef(e){return je(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return ze(this.data,e)&&le("Duplicate data set name: "+ke(e)),this.data[e]=t},getData(e){return this.data[e]||le("Undefined data set name: "+ke(e)),this.data[e]},addDataPipeline(e,t){return ze(this.data,e)&&le("Duplicate data set name: "+ke(e)),this.addData(e,rh.fromEntries(this,t))}};function J4(e){return(ce(e)?kit:_it)(e)}function kit(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(Le(i)?i.signal||J4(i):ke(i))}return n+"]"}function _it(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+ke(r)+":"+(Le(i)?i.signal||J4(i):ke(i));return t+"}"}function Git(){const e="sans-serif",t="#4c78a8",n="#000",r="#888",i="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:t},area:{fill:t},image:null,line:{stroke:t,strokeWidth:2},path:{stroke:t},rect:{fill:t},rule:{stroke:n},shape:{stroke:t},symbol:{fill:t,size:64},text:{fill:n,font:e,fontSize:11},trail:{fill:t,size:2},style:{"guide-label":{fill:n,font:e,fontSize:10},"guide-title":{fill:n,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:n,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:n,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:i}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:r,grid:!1,gridWidth:1,gridColor:i,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:r,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:i,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:r,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Iit(e,t,n){return Le(e)||le("Input Vega specification must be an object."),t=fb(Git(),t,e.config),Zit(e,new N0e(t,n)).toRuntime()}var Wit="5.22.1";ct(hg,RJe,UAe,W7e,h8e,lUe,Y2e,h2e,N2e,a$e,g$e,S$e);const Eit=Object.freeze(Object.defineProperty({__proto__:null,Bounds:tr,CanvasHandler:j5,CanvasRenderer:QG,DATE:co,DAY:ni,DAYOFYEAR:Pl,Dataflow:G0,Debug:nce,Error:vz,EventStream:n1,Gradient:Yfe,GroupItem:v1,HOURS:zo,Handler:jd,Info:tce,Item:y1,MILLISECONDS:_s,MINUTES:Po,MONTH:li,Marks:jo,MultiPulse:Mz,None:ece,Operator:qt,Parameters:t1,Pulse:kd,QUARTER:uo,RenderType:td,Renderer:ql,ResourceLoader:DP,SECONDS:ka,SVGHandler:fj,SVGRenderer:yj,SVGStringRenderer:vj,Scenegraph:cj,TIME_UNITS:Lz,Transform:ae,View:t0e,WEEK:sr,Warn:xz,YEAR:Pr,accessor:bo,accessorFields:si,accessorName:On,array:Ee,ascending:A3,bandwidthNRD:jz,bin:dde,bootstrapCI:fde,boundClip:Epe,boundContext:M5,boundItem:tT,boundMark:epe,boundStroke:fc,changeset:Gh,clampRange:pce,codegenExpression:Eme,compare:_z,constant:hi,cumulativeLogNormal:Az,cumulativeNormal:i1,cumulativeUniform:qz,dayofyear:_ce,debounce:Gz,defaultLocale:Vz,definition:lde,densityLogNormal:Dz,densityNormal:Hz,densityUniform:Qz,domChild:Di,domClear:ns,domCreate:qc,domFind:dj,dotbin:pde,error:le,expressionFunction:rr,extend:ct,extent:zl,extentIndex:hce,falsy:Vc,fastmap:hb,field:lo,flush:mce,font:k1,fontFamily:P5,fontSize:Ql,format:H_,formatLocale:NG,formats:Nz,hasOwnProperty:ze,id:I5,identity:pi,inferType:$ce,inferTypes:Qce,ingest:Nt,inherits:Se,inrange:l0,interpolate:OP,interpolateColors:g1,interpolateRange:wfe,intersect:_pe,intersectBoxLine:u0,intersectPath:AP,intersectPoint:UP,intersectRule:jfe,isArray:ce,isBoolean:mf,isDate:Sd,isFunction:dt,isIterable:gce,isNumber:At,isObject:Le,isRegExp:bce,isString:We,isTuple:q3,key:Iz,lerp:yce,lineHeight:zd,loader:$3,locale:Ace,logger:wz,lruCache:vce,markup:bj,merge:xce,mergeConfig:fb,multiLineOffset:sj,one:db,pad:wce,panLinear:sce,panLog:lce,panPow:uce,panSymlog:cce,parse:Iit,parseExpression:y4,parseSelector:bf,path:u1,pathCurves:JP,pathEqual:Xpe,pathParse:vg,pathRectangle:Ffe,pathRender:pw,pathSymbols:Nfe,pathTrail:Mfe,peek:Zt,point:G1,projection:Fj,quantileLogNormal:Uz,quantileNormal:o1,quantileUniform:eP,quantiles:zz,quantizeInterpolator:Zfe,quarter:dce,quartiles:Pz,get random(){return _a},randomInteger:THe,randomKDE:Bz,randomLCG:YHe,randomLogNormal:mde,randomMixture:gde,randomNormal:Jz,randomUniform:bde,read:tde,regressionExp:vde,regressionLinear:tP,regressionLoess:Zde,regressionLog:yde,regressionPoly:wde,regressionPow:xde,regressionQuad:nP,renderModule:I1,repeat:yv,resetDefaultLocale:R4e,resetSVGClipId:zfe,resetSVGDefIds:fAe,responseType:ede,runtimeContext:Pme,sampleCurve:s1,sampleLogNormal:Kz,sampleNormal:r1,sampleUniform:$z,scale:Vt,sceneEqual:xj,sceneFromJSON:npe,scenePickVisit:BG,sceneToJSON:tpe,sceneVisit:Gs,sceneZOrder:$P,scheme:zP,serializeXML:bpe,setRandom:CHe,span:W5,splitAccessPath:$l,stringValue:ke,textMetrics:bs,timeBin:Pce,timeFloor:Rce,timeFormatLocale:cw,timeInterval:mb,timeOffset:Yce,timeSequence:Fce,timeUnitSpecifier:kce,timeUnits:Rz,toBoolean:Wz,toDate:Ez,toNumber:ri,toSet:ks,toString:Xz,transform:ude,transforms:hg,truncate:Zce,truthy:Sa,tupleid:He,typeParsers:jY,utcFloor:Cce,utcInterval:gb,utcOffset:Tce,utcSequence:Mce,utcdayofyear:Wce,utcquarter:fce,utcweek:Ece,version:Wit,visitArray:Mc,week:Gce,writeConfig:pb,zero:Bc,zoomLinear:Zz,zoomLog:Sz,zoomPow:TG,zoomSymlog:kz},Symbol.toStringTag,{value:"Module"}));function Xit(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Lit={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Rit={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},Cit={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const Vit=Array.prototype.slice,Of=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,Vit.call(t,1))},Yit=(e,t,n,r,i,o,a)=>new Date(e,t||0,n!=null?n:1,r||0,i||0,o||0,a||0);var Tit={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:Yit,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Of("join",arguments)},indexof:function(){return Of("indexOf",arguments)},lastindexof:function(){return Of("lastIndexOf",arguments)},slice:function(){return Of("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Of("substring",arguments,String)},split:function(){return Of("split",arguments,String)},replace:function(){return Of("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const Nit=["view","item","group","xy","x","y"],Fit={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Lit[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);return n&&(e.memberDepth-=1),r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||Tit[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>Rit[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>Cit[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,n[i]=e(r.value),n},{})};function Py(e,t,n,r,i,o){const a=s=>Fit[s.type](a,s);return a.memberDepth=0,a.fn=Object.create(t),a.params=n,a.datum=r,a.event=i,a.item=o,Nit.forEach(s=>a.fn[s]=(...l)=>i.vega[s](...l)),a(e)}var Mit={operator(e,t){const n=t.ast,r=e.functions;return i=>Py(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>Py(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>Py(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const a=o.item&&o.item.datum;return Py(n,r,i,a,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(a,s)=>{const l=a.datum;let u=0,c;for(const d in r)c=Py(r[d].ast,i,s,l,void 0,a),a[d]!==c&&(a[d]=c,u=1);return n!=="rule"&&Xit(a,r,o),u}}};const Oit="5.6.1",zit={version:Oit};var iN={},Pit={get exports(){return iN},set exports(e){iN=e}};(function(e){var t=function(){function n(f,h){return h!=null&&f instanceof h}var r;try{r=Map}catch(f){r=function(){}}var i;try{i=Set}catch(f){i=function(){}}var o;try{o=Promise}catch(f){o=function(){}}function a(f,h,m,g,y){typeof h=="object"&&(m=h.depth,g=h.prototype,y=h.includeNonEnumerable,h=h.circular);var v=[],w=[],Z=typeof Buffer<"u";typeof h>"u"&&(h=!0),typeof m>"u"&&(m=1/0);function k(_,R){if(_===null)return null;if(R===0)return _;var I,E;if(typeof _!="object")return _;if(n(_,r))I=new r;else if(n(_,i))I=new i;else if(n(_,o))I=new o(function(H,M){_.then(function(j){H(k(j,R-1))},function(j){M(k(j,R-1))})});else if(a.__isArray(_))I=[];else if(a.__isRegExp(_))I=new RegExp(_.source,d(_)),_.lastIndex&&(I.lastIndex=_.lastIndex);else if(a.__isDate(_))I=new Date(_.getTime());else{if(Z&&Buffer.isBuffer(_))return Buffer.allocUnsafe?I=Buffer.allocUnsafe(_.length):I=new Buffer(_.length),_.copy(I),I;n(_,Error)?I=Object.create(_):typeof g>"u"?(E=Object.getPrototypeOf(_),I=Object.create(E)):(I=Object.create(g),E=g)}if(h){var X=v.indexOf(_);if(X!=-1)return w[X];v.push(_),w.push(I)}n(_,r)&&_.forEach(function(H,M){var j=k(M,R-1),J=k(H,R-1);I.set(j,J)}),n(_,i)&&_.forEach(function(H){var M=k(H,R-1);I.add(M)});for(var Y in _){var C;E&&(C=Object.getOwnPropertyDescriptor(E,Y)),!(C&&C.set==null)&&(I[Y]=k(_[Y],R-1))}if(Object.getOwnPropertySymbols)for(var N=Object.getOwnPropertySymbols(_),Y=0;Y<N.length;Y++){var V=N[Y],F=Object.getOwnPropertyDescriptor(_,V);F&&!F.enumerable&&!y||(I[V]=k(_[V],R-1),F.enumerable||Object.defineProperty(I,V,{enumerable:!1}))}if(y)for(var O=Object.getOwnPropertyNames(_),Y=0;Y<O.length;Y++){var P=O[Y],F=Object.getOwnPropertyDescriptor(_,P);F&&F.enumerable||(I[P]=k(_[P],R-1),Object.defineProperty(I,P,{enumerable:!1}))}return I}return k(f,m)}a.clonePrototype=function(f){if(f===null)return null;var h=function(){};return h.prototype=f,new h};function s(f){return Object.prototype.toString.call(f)}a.__objToStr=s;function l(f){return typeof f=="object"&&s(f)==="[object Date]"}a.__isDate=l;function u(f){return typeof f=="object"&&s(f)==="[object Array]"}a.__isArray=u;function c(f){return typeof f=="object"&&s(f)==="[object RegExp]"}a.__isRegExp=c;function d(f){var h="";return f.global&&(h+="g"),f.ignoreCase&&(h+="i"),f.multiline&&(h+="m"),h}return a.__getRegExpFlags=d,a}();e.exports&&(e.exports=t)})(Pit);const jit=iN;var Hit=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n},B4=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var n=typeof t.cycles=="boolean"?t.cycles:!1,r=t.cmp&&function(o){return function(a){return function(s,l){var u={key:s,value:a[s]},c={key:l,value:a[l]};return o(u,c)}}}(t.cmp),i=[];return function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var s,l;if(Array.isArray(a)){for(l="[",s=0;s<a.length;s++)s&&(l+=","),l+=o(a[s])||"null";return l+"]"}if(a===null)return"null";if(i.indexOf(a)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=i.push(a)-1,c=Object.keys(a).sort(r&&r(a));for(l="",s=0;s<c.length;s++){var d=c[s],f=o(a[d]);f&&(l&&(l+=","),l+=JSON.stringify(d)+":"+f)}return i.splice(u,1),"{"+l+"}"}}(e)};function K4(e){return!!e.or}function D4(e){return!!e.and}function A4(e){return!!e.not}function p9(e,t){if(A4(e))p9(e.not,t);else if(D4(e))for(const n of e.and)p9(n,t);else if(K4(e))for(const n of e.or)p9(n,t);else t(e)}function E0(e,t){return A4(e)?{not:E0(e.not,t)}:D4(e)?{and:e.and.map(n=>E0(n,t))}:K4(e)?{or:e.or.map(n=>E0(n,t))}:t(e)}const gl=Hit,st=jit;function F0e(e){throw new Error(e)}function Eg(e,t){const n={};for(const r of t)ze(e,r)&&(n[r]=e[r]);return n}function oo(e,t){const n=Object.assign({},e);for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>B4(e)).join(",")})`};const sn=B4;function St(e){if(At(e))return e;const t=We(e)?e:B4(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function oN(e){return e===!1||e===null}function yt(e,t){return e.includes(t)}function ih(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function U4(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function M0e(e,...t){for(const n of t)Jit(e,n!=null?n:{});return e}function Jit(e,t){for(const n of ge(t))pb(e,n,t[n],!0)}function bl(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function Bit(e,t){const n=ge(e),r=ge(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function O0e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function $4(e,t){for(const n of e)if(t.has(n))return!0;return!1}function aN(e){const t=new Set;for(const n of e){const r=$l(n).map((o,a)=>a===0?o:`[${o}]`),i=r.map((o,a)=>r.slice(0,a+1).join(""));for(const o of i)t.add(o)}return t}function Q4(e,t){return e===void 0||t===void 0?!0:$4(aN(e),aN(t))}function Dt(e){return ge(e).length===0}const ge=Object.keys,di=Object.values,Bd=Object.entries;function Ww(e){return e===!0||e===!1}function _n(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function gx(e,t){return A4(e)?`!(${gx(e.not,t)})`:D4(e)?`(${e.and.map(n=>gx(n,t)).join(") && (")})`:K4(e)?`(${e.or.map(n=>gx(n,t)).join(") || (")})`:t(e)}function OI(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&OI(e[n],t)&&delete e[n],Dt(e)}function eZ(e){return e.charAt(0).toUpperCase()+e.substr(1)}function q4(e,t="datum"){const n=$l(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(ke).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function z0e(e,t="datum"){return`${t}[${ke($l(e).join("."))}]`}function Kit(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Ia(e){return`${$l(e).map(Kit).join("\\.")}`}function oh(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function eH(e){return`${$l(e).join(".")}`}function Xg(e){return e?$l(e).length:0}function nr(...e){for(const t of e)if(t!==void 0)return t}let P0e=42;function j0e(e){const t=++P0e;return e?String(e)+t:t}function Dit(){P0e=42}function H0e(e){return J0e(e)?e:`__${e}`}function J0e(e){return e.startsWith("__")}function Ew(e){if(e!==void 0)return(e%360+360)%360}function U1(e){return At(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}var tZ=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Bu="row",Ku="column",$1="facet",Vn="x",Xr="y",Ys="x2",nu="y2",yf="xOffset",kb="yOffset",Ts="radius",mc="radius2",Ya="theta",gc="theta2",ru="latitude",iu="longitude",Ns="latitude2",Wa="longitude2",po="color",ou="fill",au="stroke",ho="shape",bc="size",Lh="angle",yc="opacity",vf="fillOpacity",xf="strokeOpacity",wf="strokeWidth",Zf="strokeDash",nZ="text",rZ="order",iZ="detail",Q1="key",ah="tooltip",q1="href",eE="url",tE="description",Ait={x:1,y:1,x2:1,y2:1},B0e={theta:1,theta2:1,radius:1,radius2:1};function K0e(e){return e in B0e}const tH={longitude:1,longitude2:1,latitude:1,latitude2:1};function Uit(e){switch(e){case ru:return"y";case Ns:return"y2";case iu:return"x";case Wa:return"x2"}}function $it(e){return e in tH}const Qit=ge(tH),nH=Object.assign(Object.assign(Object.assign(Object.assign({},Ait),B0e),tH),{xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function X0(e){return e===po||e===ou||e===au}const D0e={row:1,column:1,facet:1},ma=ge(D0e),rH=Object.assign(Object.assign({},nH),D0e),qit=ge(rH),eot=tZ(rH,["order","detail","tooltip"]),tot=tZ(eot,["row","column","facet"]);function not(e){return!!tot[e]}function A0e(e){return!!rH[e]}const rot=[Ys,nu,Ns,Wa,gc,mc];function U0e(e){return Rh(e)!==e}function Rh(e){switch(e){case Ys:return Vn;case nu:return Xr;case Ns:return ru;case Wa:return iu;case gc:return Ya;case mc:return Ts}return e}function Kd(e){if(K0e(e))switch(e){case Ya:return"startAngle";case gc:return"endAngle";case Ts:return"outerRadius";case mc:return"innerRadius"}return e}function su(e){switch(e){case Vn:return Ys;case Xr:return nu;case ru:return Ns;case iu:return Wa;case Ya:return gc;case Ts:return mc}}function mo(e){switch(e){case Vn:case Ys:return"width";case Xr:case nu:return"height"}}function iot(e){switch(e){case Vn:return"xOffset";case Xr:return"yOffset";case Ys:return"x2Offset";case nu:return"y2Offset";case Ya:return"thetaOffset";case Ts:return"radiusOffset";case gc:return"theta2Offset";case mc:return"radius2Offset"}}function $0e(e){switch(e){case Vn:return"xOffset";case Xr:return"yOffset"}}function Q0e(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const oot=ge(nH),iH=tZ(nH,["x","y","x2","y2","xOffset","yOffset","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),aot=ge(iH),oH={x:1,y:1},lu=ge(oH);function Lr(e){return e in oH}const aH={theta:1,radius:1},sot=ge(aH);function nE(e){return e==="width"?Vn:Xr}const q0e={xOffset:1,yOffset:1};function _b(e){return e in q0e}const ege=tZ(iH,["text","tooltip","href","url","description","detail","key","order"]),lot=ge(ege);function uot(e){return!!iH[e]}function cot(e){switch(e){case po:case ou:case au:case bc:case ho:case yc:case wf:case Zf:return!0;case vf:case xf:case Lh:return!1}}const tge=Object.assign(Object.assign(Object.assign(Object.assign({},oH),aH),q0e),ege),rE=ge(tge);function Sf(e){return!!tge[e]}function dot(e,t){return pot(e)[t]}const nge={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},fot=tZ(nge,["geoshape"]);function pot(e){switch(e){case po:case ou:case au:case tE:case iZ:case Q1:case ah:case q1:case rZ:case yc:case vf:case xf:case wf:case $1:case Bu:case Ku:return nge;case Vn:case Xr:case yf:case kb:case ru:case iu:return fot;case Ys:case nu:case Ns:case Wa:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case bc:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Zf:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ho:return{point:"always",geoshape:"always"};case nZ:return{text:"always"};case Lh:return{point:"always",square:"always",text:"always"};case eE:return{image:"always"};case Ya:return{text:"always",arc:"always"};case Ts:return{text:"always",arc:"always"};case gc:case mc:return{arc:"always"}}}function $R(e){switch(e){case Vn:case Xr:case Ya:case Ts:case yf:case kb:case bc:case Lh:case wf:case yc:case vf:case xf:case Ys:case nu:case gc:case mc:return;case $1:case Bu:case Ku:case ho:case Zf:case nZ:case ah:case q1:case eE:case tE:return"discrete";case po:case ou:case au:return"flexible";case ru:case iu:case Ns:case Wa:case iZ:case Q1:case rZ:return}}const hot={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},mot={count:1,min:1,max:1};function ac(e){return!!e&&!!e.argmin}function kf(e){return!!e&&!!e.argmax}function sH(e){return We(e)&&!!hot[e]}const got=new Set(["count","valid","missing","distinct"]);function rge(e){return We(e)&&got.has(e)}function bot(e){return We(e)&&yt(["min","max"],e)}const yot=new Set(["count","sum","distinct","valid","missing"]),vot=new Set(["mean","average","median","q1","q3","min","max"]);function ige(e){return mf(e)&&(e=hE(e,void 0)),"bin"+ge(e).map(t=>iE(e[t])?_n(`_${t}_${Bd(e[t])}`):_n(`_${t}_${e[t]}`)).join("")}function un(e){return e===!0||Ch(e)&&!e.binned}function Nr(e){return e==="binned"||Ch(e)&&e.binned===!0}function Ch(e){return Le(e)}function iE(e){return e==null?void 0:e.param}function o$(e){switch(e){case Bu:case Ku:case bc:case po:case ou:case au:case wf:case yc:case vf:case xf:case ho:return 6;case Zf:return 4;default:return 10}}function oZ(e){return!!(e!=null&&e.expr)}function Ki(e){const t=ge(e||{}),n={};for(const r of t)n[r]=Go(e[r]);return n}var xot=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function oge(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:a,color:s,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:d,subtitleFontWeight:f,subtitleLineHeight:h,subtitlePadding:m}=e,g=xot(e,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),y=Object.assign(Object.assign({},g),s?{fill:s}:{}),v=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),o!==void 0?{angle:o}:{}),a!==void 0?{limit:a}:{}),w=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l?{subtitleColor:l}:{}),u?{subtitleFont:u}:{}),c?{subtitleFontSize:c}:{}),d?{subtitleFontStyle:d}:{}),f?{subtitleFontWeight:f}:{}),h?{subtitleLineHeight:h}:{}),m?{subtitlePadding:m}:{}),Z=Eg(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:y,subtitleMarkConfig:Z,nonMarkTitleProperties:v,subtitle:w}}function jc(e){return We(e)||ce(e)&&We(e[0])}function Oe(e){return!!(e!=null&&e.signal)}function _f(e){return!!e.step}function wot(e){return ce(e)?!1:"fields"in e&&!("data"in e)}function Zot(e){return ce(e)?!1:"fields"in e&&"data"in e}function Ou(e){return ce(e)?!1:"field"in e&&"data"in e}const Sot={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},kot=ge(Sot),_ot={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},sN=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];var lH=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function age(e){const t=ce(e.condition)?e.condition.map(a$):a$(e.condition);return Object.assign(Object.assign({},Go(e)),{condition:t})}function Go(e){if(oZ(e)){const{expr:t}=e,n=lH(e,["expr"]);return Object.assign({signal:t},n)}return e}function a$(e){if(oZ(e)){const{expr:t}=e,n=lH(e,["expr"]);return Object.assign({signal:t},n)}return e}function gn(e){if(oZ(e)){const{expr:t}=e,n=lH(e,["expr"]);return Object.assign({signal:t},n)}return Oe(e)?e:e!==void 0?{value:e}:void 0}function Got(e){return Oe(e)?e.signal:ke(e)}function s$(e){return Oe(e)?e.signal:ke(e.value)}function Du(e){return Oe(e)?e.signal:e==null?null:ke(e)}function Iot(e,t,n){for(const r of n){const i=sh(r,t.markDef,t.config);i!==void 0&&(e[r]=gn(i))}return e}function sge(e){var t;return[].concat(e.type,(t=e.style)!==null&&t!==void 0?t:[])}function Mt(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:sh(e,t,n,r)}function sh(e,t,n,{vgChannel:r}={}){return nr(r?zI(e,t,n.style):void 0,zI(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function zI(e,t,n){return lge(e,sge(t),n)}function lge(e,t,n){t=Ee(t);let r;for(const i of t){const o=n[i];o&&o[e]!==void 0&&(r=o[e])}return r}function uge(e,t){return Ee(e).reduce((n,r)=>{var i;return n.field.push(_e(r,t)),n.order.push((i=r.sort)!==null&&i!==void 0?i:"ascending"),n},{field:[],order:[]})}function cge(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(gl(i,r))return;n.push(r)}),n}function dge(e,t){return gl(e,t)||!t?e:e?[...Ee(e),...Ee(t)].join(", "):t}function fge(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((jc(n)||Oe(n))&&(jc(r)||Oe(r)))return{explicit:e.explicit,value:dge(n,r)};if(jc(n)||Oe(n))return{explicit:e.explicit,value:n};if(jc(r)||Oe(r))return{explicit:e.explicit,value:r};if(!jc(n)&&!Oe(n)&&!jc(r)&&!Oe(r))return{explicit:e.explicit,value:cge(n,r)};throw new Error("It should never reach here")}function uH(e){return`Invalid specification ${sn(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Wot='Autosize "fit" only works for single views and layered views.';function l$(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function u$(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function c$(e){return e?`Dropping "fit-${e}" because spec has discrete ${mo(e)}.`:'Dropping "fit" because spec has discrete size.'}function cH(e){return`Unknown field for ${e}. Cannot calculate view size.`}function d$(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Eot(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Xot(e){return`The "nearest" transform is not supported for ${e} marks.`}function pge(e){return`Selection not supported for ${e} yet.`}function Lot(e){return`Cannot find a selection named "${e}".`}const Rot="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Cot="Legend bindings are only supported for selections over an individual field or encoding channel.";function Vot(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Yot(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Tot="The same selection must be used to override scale domains in a layered view.",Not='Interval selections should be initialized using "x" and/or "y" keys.';function Fot(e){return`Unknown repeated value "${e}".`}function f$(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Mot="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Oot(e){return`Unrecognized parse "${e}".`}function p$(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const zot="Attempt to add the same child twice.";function Pot(e){return`Ignoring an invalid transform: ${sn(e)}.`}const jot='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function h$(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Hot(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${sn(t)} is overridden by a child projection ${sn(n)}.`}const Jot="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Bot(e){return`${e}Offset dropped because ${e} is continuous`}function Kot(e){return`There is no ${e} encoding. Replacing ${e}Offset encoding as ${e}.`}function Dot(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${sn(n)}}.`}function hge(e){return`Invalid field type "${e}".`}function Aot(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Uot(e){return`Invalid aggregation operator "${e}".`}function mge(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function $ot(e){return`Position range does not support relative band size for ${e}.`}function lN(e,t){return`Dropping ${sn(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Qot="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function oE(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function qot(e){return`${e} encoding has no scale, so specified scale is ignored.`}function eat(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function tat(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function nat(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function rat(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function QR(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function iat(e){return`The ${e} for range marks cannot be an expression`}function oat(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function aat(e,t){return`Specified orient "${e}" overridden with "${t}".`}function sat(e){return`Cannot use the scale property "${e}" with non-color channel.`}function lat(e){return`Cannot use the relative band size with ${e} scale.`}function uat(e){return`Using unaggregated domain with raw field has no effect (${sn(e)}).`}function cat(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function dat(e){return`Unaggregated domain is currently unsupported for log scale (${sn(e)}).`}function fat(e){return`Cannot apply size to non-oriented mark "${e}".`}function pat(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function hat(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function gge(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function bge(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function mat(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${sn(n)} and ${sn(r)}). Using ${sn(n)}.`}function gat(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${sn(n)} and ${sn(r)}). Using the union of the two domains.`}function bat(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function yat(e){return`Dropping sort property ${sn(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const m$="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",vat="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",xat="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",wat="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Zat(e){return`Cannot stack "${e}" if there is already "${e}2".`}function Sat(e){return`Cannot stack non-linear scale (${e}).`}function kat(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function PI(e,t){return`Invalid ${e}: ${sn(t)}.`}function _at(e){return`Dropping day from datetime ${sn(e)} as day cannot be combined with other units.`}function Gat(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Iat(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Wat(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function g$(e){return`1D error band does not support ${e}.`}function yge(e){return`Channel ${e} is required for "binned" bin.`}function Eat(e){return`Channel ${e} should not be used with "binned" bin.`}function Xat(e){return`Domain for ${e} is required for threshold scale.`}const vge=wz(xz);let Lg=vge;function Lat(e){return Lg=e,Lg}function Rat(){return Lg=vge,Lg}function ve(...e){Lg.warn(...e)}function Cat(...e){Lg.debug(...e)}function Vh(e){if(e&&Le(e)){for(const t of fH)if(t in e)return!0}return!1}const xge=["january","february","march","april","may","june","july","august","september","october","november","december"],Vat=xge.map(e=>e.substr(0,3)),wge=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Yat=wge.map(e=>e.substr(0,3));function Tat(e){if(U1(e)&&(e=+e),At(e))return e>4&&ve(PI("quarter",e)),e-1;throw new Error(PI("quarter",e))}function Nat(e){if(U1(e)&&(e=+e),At(e))return e-1;{const t=e.toLowerCase(),n=xge.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Vat.indexOf(r);if(i!==-1)return i;throw new Error(PI("month",e))}}function Fat(e){if(U1(e)&&(e=+e),At(e))return e%7;{const t=e.toLowerCase(),n=wge.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Yat.indexOf(r);if(i!==-1)return i;throw new Error(PI("day",e))}}function dH(e,t){const n=[];if(t&&e.day!==void 0&&ge(e).length>1&&(ve(_at(e)),e=st(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?Nat(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Tat(e.quarter):e.quarter;n.push(At(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?Fat(e.day):e.day;n.push(At(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Xw(e){const t=dH(e,!0).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}function Mat(e){const t=dH(e,!1).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}function Oat(e){const t=dH(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}var zat=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Zge={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},fH=ge(Zge);function Pat(e){return!!Zge[e]}function pH(e){return e.startsWith("utc")}function jat(e){return e.substr(3)}const Hat={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function hH(e){return fH.filter(t=>Sge(e,t))}function Sge(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Jat(e,t,{end:n}={end:!1}){const r=q4(t),i=pH(e)?"utc":"";function o(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let a;const s={};for(const l of fH)Sge(e,l)&&(s[l]=o(l),a=l);return n&&(s[a]+="+1"),Mat(s)}function kge(e){if(!e)return;const t=hH(e);return`timeUnitSpecifier(${sn(t)}, ${sn(Hat)})`}function Bat(e,t,n){if(!e)return;const r=kge(e);return`${n||pH(e)?"utc":"time"}Format(${t}, ${r})`}function mi(e){if(!e)return;let t;return We(e)?t={unit:e}:Le(e)&&(t=Object.assign(Object.assign({},e),e.unit?{unit:e.unit}:{})),pH(t.unit)&&(t.utc=!0,t.unit=jat(t.unit)),t}function Kat(e){const t=mi(e),{utc:n}=t,r=zat(t,["utc"]);return r.unit?(n?"utc":"")+ge(r).map(i=>_n(`${i==="unit"?"":`_${i}_`}${r[i]}`)).join(""):(n?"utc":"")+"timeunit"+ge(r).map(i=>_n(`_${i}_${r[i]}`)).join("")}function Dat(e){return e==null?void 0:e.param}function mH(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function gH(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function bH(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function yH(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function vH(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function xH(e){return!!(e!=null&&e.field&&(ce(e.range)&&e.range.length===2||Oe(e.range)))}function wH(e){return!!(e!=null&&e.field)&&(ce(e.oneOf)||ce(e.in))}function Aat(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function _ge(e){return wH(e)||mH(e)||xH(e)||gH(e)||yH(e)||bH(e)||vH(e)}function qs(e,t){return mE(e,{timeUnit:t,wrapTime:!0})}function Uat(e,t){return e.map(n=>qs(n,t))}function Gge(e,t=!0){var n;const{field:r}=e,i=(n=mi(e.timeUnit))===null||n===void 0?void 0:n.unit,o=i?`time(${Jat(i,r)})`:_e(e,{expr:"datum"});if(mH(e))return`${o}===${qs(e.equal,i)}`;if(gH(e)){const a=e.lt;return`${o}<${qs(a,i)}`}else if(yH(e)){const a=e.gt;return`${o}>${qs(a,i)}`}else if(bH(e)){const a=e.lte;return`${o}<=${qs(a,i)}`}else if(vH(e)){const a=e.gte;return`${o}>=${qs(a,i)}`}else{if(wH(e))return`indexof([${Uat(e.oneOf,i).join(",")}], ${o}) !== -1`;if(Aat(e))return ZH(o,e.valid);if(xH(e)){const{range:a}=e,s=Oe(a)?{signal:`${a.signal}[0]`}:a[0],l=Oe(a)?{signal:`${a.signal}[1]`}:a[1];if(s!==null&&l!==null&&t)return"inrange("+o+", ["+qs(s,i)+", "+qs(l,i)+"])";const u=[];return s!==null&&u.push(`${o} >= ${qs(s,i)}`),l!==null&&u.push(`${o} <= ${qs(l,i)}`),u.length>0?u.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${sn(e)}`)}function ZH(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function $at(e){var t;return _ge(e)&&e.timeUnit?Object.assign(Object.assign({},e),{timeUnit:(t=mi(e.timeUnit))===null||t===void 0?void 0:t.unit}):e}const aZ={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Qat(e){return e==="quantitative"||e==="temporal"}function Ige(e){return e==="ordinal"||e==="nominal"}const lh=aZ.quantitative,SH=aZ.ordinal,Rg=aZ.temporal,kH=aZ.nominal,Gb=aZ.geojson;function qat(e){if(e)switch(e=e.toLowerCase(),e){case"q":case lh:return"quantitative";case"t":case Rg:return"temporal";case"o":case SH:return"ordinal";case"n":case kH:return"nominal";case Gb:return"geojson"}}var est=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ao={LINEAR:"linear",LOG:"log",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},uN={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function tst(e,t){const n=uN[e],r=uN[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const nst={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function b$(e){return nst[e]}const Wge=new Set(["linear","log","pow","sqrt","symlog"]),Ege=new Set([...Wge,"time","utc"]);function Xge(e){return Wge.has(e)}const Lge=new Set(["quantile","quantize","threshold"]),rst=new Set([...Ege,...Lge,"sequential","identity"]),ist=new Set(["ordinal","bin-ordinal","point","band"]);function Rr(e){return ist.has(e)}function Jo(e){return rst.has(e)}function us(e){return Ege.has(e)}function Cg(e){return Lge.has(e)}const ost={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function ast(e){return!We(e)&&!!e.name}function Rge(e){return e==null?void 0:e.param}function sst(e){return e==null?void 0:e.unionWith}function lst(e){return Le(e)&&"field"in e}const ust={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},cst=est(ust,["type","domain","range","rangeMax","rangeMin","scheme"]),dst=ge(cst);function cN(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return us(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return us(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"clamp":return us(e);case"nice":return us(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Jo(e)&&!yt(["log","time","utc","threshold","quantile"],e)}}function Cge(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return X0(e)?void 0:sat(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function fst(e,t){return yt([SH,kH],t)?e===void 0||Rr(e):t===Rg?yt([ao.TIME,ao.UTC,void 0],e):t===lh?Xge(e)||Cg(e)||e===void 0:!0}function pst(e,t,n=!1){if(!Sf(e))return!1;switch(e){case Vn:case Xr:case yf:case kb:case Ya:case Ts:return us(t)||t==="band"?!0:t==="point"?!n:!1;case bc:case wf:case yc:case vf:case xf:case Lh:return us(t)||Cg(t)||yt(["band","point","ordinal"],t);case po:case ou:case au:return t!=="band";case Zf:case ho:return t==="ordinal"||Cg(t)}}const Mi={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Vge=Mi.arc,aE=Mi.area,sE=Mi.bar,hst=Mi.image,lE=Mi.line,uE=Mi.point,mst=Mi.rect,jI=Mi.rule,Yge=Mi.text,_H=Mi.tick,gst=Mi.trail,GH=Mi.circle,IH=Mi.square,Tge=Mi.geoshape;function Gf(e){return["line","area","trail"].includes(e)}function Nge(e){return["rect","bar","image","arc"].includes(e)}const bst=new Set(ge(Mi));function Jl(e){return e.type}const yst=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],vst=["fill","fillOpacity"],xst=[...yst,...vst],wst={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},y$=ge(wst),Zst={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},Sst={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},kst={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},Fge=ge(kst);function uh(e){return e&&e.band!=null}const _st={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Mge=5,Gst={binSpacing:1,continuousBandSize:Mge,timeUnitBandPosition:.5},Ist={binSpacing:0,continuousBandSize:Mge,timeUnitBandPosition:.5},Wst={thickness:1};function Est(e){return Jl(e)?e.type:e}function WH(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,a=XH(e);return Ze(n)&&!rge(n.aggregate)&&i&&us(i.get("type"))?Xst({fieldDef:n,channel:t,markDef:r,ref:a,config:o}):a}function Xst({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Gf(n.type)?r:Mt("invalid",n,i)===null?[Lst(e,t),r]:r}function Lst(e,t){const n=EH(e,!0),r=Rh(t)==="y"?{field:{group:"height"}}:{value:0};return Object.assign({test:n},r)}function EH(e,t=!0){return ZH(We(e)?e:_e(e,{expr:"datum"}),!t)}function Rst(e){const{datum:t}=e;return Vh(t)?Xw(t):`${sn(t)}`}function Lp(e,t,n,r){const i={};if(t&&(i.scale=t),uu(e)){const{datum:o}=e;Vh(o)?i.signal=Xw(o):Oe(o)?i.signal=o.signal:oZ(o)?i.signal=o.expr:i.value=o}else i.field=_e(e,n);if(r){const{offset:o,band:a}=r;o&&(i.offset=o),a&&(i.band=a)}return i}function HI({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,bandPosition:o=.5}){const a=0<o&&o<1?"datum":void 0,s=_e(t,{expr:a,suffix:i}),l=n!==void 0?_e(n,{expr:a}):_e(t,{suffix:"end",expr:a}),u={};if(o===0||o===1){u.scale=e;const c=o===0?s:l;u.field=c}else{const c=Oe(o)?`${o.signal} * ${s} + (1-${o.signal}) * ${l}`:`${o} * ${s} + ${1-o} * ${l}`;u.signal=`scale("${e}", ${c})`}return r&&(u.offset=r),u}function XH({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:l,defaultRef:u,bandPosition:c}){var d;if(t){if(rt(t)){const f=a==null?void 0:a.get("type");if(Ea(t)){c!=null||(c=Kge({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:h,timeUnit:m,type:g}=t;if(un(h)||c&&m&&g===Rg)return s!=null&&s.impute?Lp(t,o,{binSuffix:"mid"},{offset:l}):c&&!Rr(f)?HI({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:l}):Lp(t,o,cZ(t,e)?{binSuffix:"range"}:{},{offset:l});if(Nr(h)){if(Ze(n))return HI({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});ve(yge(e===Vn?Ys:nu))}}return Lp(t,o,Rr(f)?{binSuffix:"range"}:{},{offset:l,band:f==="band"?(d=c!=null?c:t.bandPosition)!==null&&d!==void 0?d:.5:void 0})}else if(Is(t)){const f=t.value,h=l?{offset:l}:{};return Object.assign(Object.assign({},bx(e,f)),h)}}return dt(u)&&(u=u()),u&&Object.assign(Object.assign({},u),l?{offset:l}:{})}function bx(e,t){return yt(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:yt(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:gn(t)}function ch(e){return e&&e!=="number"&&e!=="time"}function Oge(e,t,n){return`${e}(${t}${n?`, ${sn(n)}`:""})`}const Cst="  ";function LH({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var a,s;if(ch(n))return cs({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const l=zge(e,r,i),u=Vg(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(u==="quantitative"){if(i&&o.normalizedNumberFormatType)return cs({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return cs({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(u==="temporal"&&o.timeFormatType&&Ze(e)&&e.timeUnit===void 0)return cs({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(Tg(e)){const c=Yst({field:l,timeUnit:Ze(e)?(a=mi(e.timeUnit))===null||a===void 0?void 0:a.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:Yh(e)&&((s=e.scale)===null||s===void 0?void 0:s.type)===ao.UTC});return c?{signal:c}:void 0}if(t=dN({type:u,specifiedFormat:t,config:o,normalizeStack:i}),Ze(e)&&un(e.bin)){const c=_e(e,{expr:r,binSuffix:"end"});return{signal:sZ(l,c,t,n,o)}}else return t||Vg(e)==="quantitative"?{signal:`${Hge(l,t)}`}:{signal:`isValid(${l}) ? ${l} : ""+${l}`}}function zge(e,t,n){return Ze(e)?n?`${_e(e,{expr:t,suffix:"end"})}-${_e(e,{expr:t,suffix:"start"})}`:_e(e,{expr:t}):Rst(e)}function cs({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(a!=null||(a=zge(e,r,i)),a!=="datum.value"&&Ze(e)&&un(e.bin)){const s=_e(e,{expr:r,binSuffix:"end"});return{signal:sZ(a,s,t,n,o)}}return{signal:Oge(n,a,t)}}function Pge(e,t,n,r,i,o){var a;if(!ch(r)&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Vg(e)==="quantitative"&&(i.normalizedNumberFormatType&&Yg(e)&&e.stack==="normalize"||i.numberFormatType))){if(Yg(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return dN({type:"quantitative",config:i,normalizeStack:!0});if(Tg(e)){const s=Ze(e)?(a=mi(e.timeUnit))===null||a===void 0?void 0:a.unit:void 0;return s===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:Vst({specifiedFormat:n,timeUnit:s,config:i,omitTimeFormatConfig:o})}return dN({type:t,specifiedFormat:n,config:i})}}function jge(e,t,n){var r;if(e&&(Oe(e)||e==="number"||e==="time"))return e;if(Tg(t)&&n!=="time"&&n!=="utc")return Ze(t)&&!((r=mi(t==null?void 0:t.timeUnit))===null||r===void 0)&&r.utc?"utc":"time"}function dN({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(We(t))return t;if(e===lh)return r?n.normalizedNumberFormat:n.numberFormat}function Vst({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:kge(t)}:r?void 0:n.timeFormat)}function Hge(e,t){return`format(${e}, "${t||""}")`}function v$(e,t,n,r){var i;return ch(n)?Oge(n,e,t):Hge(e,(i=We(t)?t:void 0)!==null&&i!==void 0?i:r.numberFormat)}function sZ(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return sZ(e,t,i.numberFormat,i.numberFormatType,i);const o=v$(e,n,r,i),a=v$(t,n,r,i);return`${ZH(e,!1)} ? "null" : ${o} + "${Cst}" + ${a}`}function Yst({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=We(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):Bat(t,e,o)}const cE="min",Tst={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function x$(e){return e in Tst}function Jge(e){return!!(e!=null&&e.encoding)}function Xl(e){return e&&(e.op==="count"||!!e.field)}function Bge(e){return e&&ce(e)}function lZ(e){return"row"in e||"column"in e}function RH(e){return!!e&&"header"in e}function dE(e){return"facet"in e}var fN=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Nst(e){return e.param}function Fst(e){return e&&!We(e)&&"repeat"in e}function w$(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:t})}function CH(e){return"sort"in e}function Kge({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(rt(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Ze(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return Nge(n.type)?0:sh("timeUnitBandPosition",n,r);if(un(o))return .5}}function Dge({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:a}){var s,l,u;const c=mo(e),d=Mt(a?"size":c,r,i,{vgChannel:c});if(d!==void 0)return d;if(Ze(t)){const{timeUnit:f,bin:h}=t;if(f&&!n)return{band:sh("timeUnitBandSize",r,i)};if(un(h)&&!Rr(o))return{band:1}}if(Nge(r.type))return o?Rr(o)?((s=i[r.type])===null||s===void 0?void 0:s.discreteBandSize)||{band:1}:(l=i[r.type])===null||l===void 0?void 0:l.continuousBandSize:(u=i[r.type])===null||u===void 0?void 0:u.discreteBandSize}function Age(e,t,n,r){return un(e.bin)||e.timeUnit&&Ea(e)&&e.type==="temporal"?Kge({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function fE(e){return e&&"condition"in e}function pE(e){const t=e==null?void 0:e.condition;return!!t&&!ce(t)&&Ze(t)}function uZ(e){const t=e==null?void 0:e.condition;return!!t&&!ce(t)&&rt(t)}function Mst(e){const t=e==null?void 0:e.condition;return!!t&&(ce(t)||Is(t))}function Ze(e){return e&&(!!e.field||e.aggregate==="count")}function Vg(e){return e==null?void 0:e.type}function uu(e){return e&&"datum"in e}function yl(e){return Ea(e)&&!JI(e)||pN(e)}function pN(e){return uu(e)&&At(e.datum)}function rt(e){return Ze(e)||uu(e)}function Ea(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Is(e){return e&&"value"in e&&"value"in e}function Yh(e){return e&&("scale"in e||"sort"in e)}function Yg(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function Uge(e){return e&&"legend"in e}function $ge(e){return e&&("format"in e||"formatType"in e)}function Ost(e){return oo(e,["legend","axis","header","scale"])}function zst(e){return"op"in e}function _e(e,t={}){var n,r,i;let o=e.field;const a=t.prefix;let s=t.suffix,l="";if(jst(e))o=H0e("count");else{let u;if(!t.nofn)if(zst(e))u=e.op;else{const{bin:c,aggregate:d,timeUnit:f}=e;un(c)?(u=ige(c),s=((n=t.binSuffix)!==null&&n!==void 0?n:"")+((r=t.suffix)!==null&&r!==void 0?r:"")):d?kf(d)?(l=`["${o}"]`,o=`argmax_${d.argmax}`):ac(d)?(l=`["${o}"]`,o=`argmin_${d.argmin}`):u=String(d):f&&(u=Kat(f),s=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+((i=t.suffix)!==null&&i!==void 0?i:""))}u&&(o=o?`${u}_${o}`:u)}return s&&(o=`${o}_${s}`),a&&(o=`${a}_${o}`),t.forAs?eH(o):t.expr?z0e(o,t.expr)+l:Ia(o)+l}function JI(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ze(e)&&!!e.bin;case"temporal":return!1}throw new Error(hge(e.type))}function Pst(e){var t;return Yh(e)&&Cg((t=e.scale)===null||t===void 0?void 0:t.type)}function jst(e){return e.aggregate==="count"}function Hst(e,t){var n;const{field:r,bin:i,timeUnit:o,aggregate:a}=e;if(a==="count")return t.countTitle;if(un(i))return`${r} (binned)`;if(o){const s=(n=mi(o))===null||n===void 0?void 0:n.unit;if(s)return`${r} (${hH(s).join("-")})`}else if(a)return kf(a)?`${r} for max ${a.argmax}`:ac(a)?`${r} for min ${a.argmin}`:`${eZ(a)} of ${r}`;return r}function Jst(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(kf(t))return`${i} for argmax(${t.argmax})`;if(ac(t))return`${i} for argmin(${t.argmin})`;const o=mi(r),a=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||un(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}const Qge=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Jst(e);default:return Hst(e,t)}};let qge=Qge;function ebe(e){qge=e}function Bst(){ebe(Qge)}function L0(e,t,{allowDisabling:n,includeDefault:r=!0}){var i,o;const a=(i=VH(e))===null||i===void 0?void 0:i.title;if(!Ze(e))return a!=null?a:e.title;const s=e,l=r?YH(s,t):void 0;return n?nr(a,s.title,l):(o=a!=null?a:s.title)!==null&&o!==void 0?o:l}function VH(e){if(Yg(e)&&e.axis)return e.axis;if(Uge(e)&&e.legend)return e.legend;if(RH(e)&&e.header)return e.header}function YH(e,t){return qge(e,t)}function BI(e){var t;if($ge(e)){const{format:n,formatType:r}=e;return{format:n,formatType:r}}else{const n=(t=VH(e))!==null&&t!==void 0?t:{},{format:r,formatType:i}=n;return{format:r,formatType:i}}}function Kst(e,t){var n;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(CH(e)&&ce(e.sort))return"ordinal";const{aggregate:r,bin:i,timeUnit:o}=e;if(o)return"temporal";if(i||r&&!kf(r)&&!ac(r))return"quantitative";if(Yh(e)&&!((n=e.scale)===null||n===void 0)&&n.type)switch(uN[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Bl(e){if(Ze(e))return e;if(pE(e))return e.condition}function lr(e){if(rt(e))return e;if(uZ(e))return e.condition}function tbe(e,t,n,r={}){if(We(e)||At(e)||mf(e)){const i=We(e)?"string":At(e)?"number":"boolean";return ve(Dot(t,i,e)),{value:e}}return rt(e)?KI(e,t,n,r):uZ(e)?Object.assign(Object.assign({},e),{condition:KI(e.condition,t,n,r)}):e}function KI(e,t,n,r){if($ge(e)){const{format:i,formatType:o}=e,a=fN(e,["format","formatType"]);if(ch(o)&&!n.customFormatTypes)return ve(h$(t)),KI(a,t,n,r)}else{const i=Yg(e)?"axis":Uge(e)?"legend":RH(e)?"header":null;if(i&&e[i]){const o=e[i],{format:a,formatType:s}=o,l=fN(o,["format","formatType"]);if(ch(s)&&!n.customFormatTypes)return ve(h$(t)),KI(Object.assign(Object.assign({},e),{[i]:l}),t,n,r)}}return Ze(e)?TH(e,t,r):Dst(e)}function Dst(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=At(n)?"quantitative":We(n)?"nominal":Vh(n)?"temporal":void 0,Object.assign(Object.assign({},e),{type:t})}function TH(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:a}=e,s=Object.assign({},e);if(!n&&r&&!sH(r)&&!kf(r)&&!ac(r)&&(ve(Uot(r)),delete s.aggregate),i&&(s.timeUnit=mi(i)),a&&(s.field=`${a}`),un(o)&&(s.bin=hE(o,t)),Nr(o)&&!Lr(t)&&ve(Eat(t)),Ea(s)){const{type:l}=s,u=qat(l);l!==u&&(s.type=u),l!=="quantitative"&&rge(r)&&(ve(Aot(l,r)),s.type="quantitative")}else if(!U0e(t)){const l=Kst(s,t);s.type=l}if(Ea(s)){const{compatible:l,warning:u}=Ast(s,t)||{};l===!1&&ve(u)}if(CH(s)&&We(s.sort)){const{sort:l}=s;if(x$(l))return Object.assign(Object.assign({},s),{sort:{encoding:l}});const u=l.substr(1);if(l.charAt(0)==="-"&&x$(u))return Object.assign(Object.assign({},s),{sort:{encoding:u,order:"descending"}})}if(RH(s)){const{header:l}=s;if(l){const{orient:u}=l,c=fN(l,["orient"]);if(u)return Object.assign(Object.assign({},s),{header:Object.assign(Object.assign({},c),{labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u})})}}return s}function hE(e,t){return mf(e)?{maxbins:o$(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?Object.assign(Object.assign({},e),{maxbins:o$(t)}):e}const bm={compatible:!0};function Ast(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Bu:case Ku:case $1:return JI(e)?bm:{compatible:!1,warning:tat(t)};case Vn:case Xr:case yf:case kb:case po:case ou:case au:case nZ:case iZ:case Q1:case ah:case q1:case eE:case Lh:case Ya:case Ts:case tE:return bm;case iu:case Wa:case ru:case Ns:return n!==lh?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:bm;case yc:case vf:case xf:case wf:case bc:case gc:case mc:case Ys:case nu:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:bm;case ho:case Zf:return!JI(e)&&!Pst(e)?{compatible:!1,warning:nat(t)}:bm;case rZ:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:bm}}function Tg(e){const{formatType:t}=BI(e);return t==="time"||!t&&Ust(e)}function Ust(e){return e&&(e.type==="temporal"||Ze(e)&&!!e.timeUnit)}function mE(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var o;const a=t&&((o=mi(t))===null||o===void 0?void 0:o.unit);let s=a||n==="temporal",l;return oZ(e)?l=e.expr:Oe(e)?l=e.signal:Vh(e)?(s=!0,l=Xw(e)):(We(e)||At(e))&&s&&(l=`datetime(${sn(e)})`,Pat(a)&&(At(e)&&e<1e4||We(e)&&isNaN(Date.parse(e)))&&(l=Xw({[a]:e}))),l?r&&s?`time(${l})`:l:i?void 0:sn(e)}function nbe(e,t){const{type:n}=e;return t.map(r=>{const i=mE(r,{timeUnit:Ze(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return i!==void 0?{signal:i}:r})}function cZ(e,t){return un(e.bin)?Sf(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Z$={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function dZ(e){return e==null?void 0:e.condition}const rbe=["domain","grid","labels","ticks","title"],$st={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},ibe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Qst=Object.assign(Object.assign({},ibe),{style:1,labelExpr:1,encoding:1});function S$(e){return!!Qst[e]}const qst={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},obe=ge(qst);function vc(e){return"mark"in e}class gE{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return vc(t)?Est(t.mark)===this.name:!1}}var elt=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Rp(e,t){const n=e&&e[t];return n?ce(n)?ih(n,r=>!!r.field):Ze(n)||pE(n):!1}function abe(e,t){const n=e&&e[t];return n?ce(n)?ih(n,r=>!!r.field):Ze(n)||uu(n)||uZ(n):!1}function hN(e,t){if(Lr(t)){const n=e[t];if((Ze(n)||uu(n))&&Ige(n.type)){const r=$0e(t);return abe(e,r)}}return!1}function NH(e){return ih(qit,t=>{if(Rp(e,t)){const n=e[t];if(ce(n))return ih(n,r=>!!r.aggregate);{const r=Bl(n);return r&&!!r.aggregate}}return!1})}function sbe(e,t){const n=[],r=[],i=[],o=[],a={};return FH(e,(s,l)=>{if(Ze(s)){const{field:u,aggregate:c,bin:d,timeUnit:f}=s,h=elt(s,["field","aggregate","bin","timeUnit"]);if(c||f||d){const m=VH(s),g=m==null?void 0:m.title;let y=_e(s,{forAs:!0});const v=Object.assign(Object.assign(Object.assign({},g?[]:{title:L0(s,t,{allowDisabling:!0})}),h),{field:y});if(c){let w;if(kf(c)?(w="argmax",y=_e({op:"argmax",field:c.argmax},{forAs:!0}),v.field=`${y}.${u}`):ac(c)?(w="argmin",y=_e({op:"argmin",field:c.argmin},{forAs:!0}),v.field=`${y}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(w=c),w){const Z={op:w,as:y};u&&(Z.field=u),o.push(Z)}}else if(n.push(y),Ea(s)&&un(d)){if(r.push({bin:d,field:u,as:y}),n.push(_e(s,{binSuffix:"end"})),cZ(s,l)&&n.push(_e(s,{binSuffix:"range"})),Lr(l)){const w={field:`${y}_end`};a[`${l}2`]=w}v.bin="binned",U0e(l)||(v.type=lh)}else if(f){i.push({timeUnit:f,field:u,as:y});const w=Ea(s)&&s.type!==Rg&&"time";w&&(l===nZ||l===ah?v.formatType=w:uot(l)?v.legend=Object.assign({formatType:w},v.legend):Lr(l)&&(v.axis=Object.assign({formatType:w},v.axis)))}a[l]=v}else n.push(u),a[l]=e[l]}else a[l]=e[l]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function tlt(e,t,n){const r=dot(t,n);if(r){if(r==="binned"){const i=e[t===Ys?Vn:Xr];return!!(Ze(i)&&Ze(e[t])&&Nr(i.bin))}}else return!1;return!0}function nlt(e,t,n,r){const i={};for(const o of ge(e))A0e(o)||ve(eat(o));for(let o of oot){if(!e[o])continue;const a=e[o];if(_b(o)){const s=Q0e(o),l=i[s];if(Ze(l)){if(Qat(l.type)&&Ze(a)){ve(Bot(s));continue}}else o=s,ve(Kot(s))}if(o==="angle"&&t==="arc"&&!e.theta&&(ve(Jot),o=Ya),!tlt(e,o,t)){ve(oE(o,t));continue}if(o===bc&&t==="line"){const s=Bl(e[o]);if(s!=null&&s.aggregate){ve(Qot);continue}}if(o===po&&(n?"fill"in e:"stroke"in e)){ve(mge("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===iZ||o===rZ&&!ce(a)&&!Is(a)||o===ah&&ce(a))a&&(i[o]=Ee(a).reduce((s,l)=>(Ze(l)?s.push(TH(l,o)):ve(lN(l,o)),s),[]));else{if(o===ah&&a===null)i[o]=null;else if(!Ze(a)&&!uu(a)&&!Is(a)&&!fE(a)&&!Oe(a)){ve(lN(a,o));continue}i[o]=tbe(a,o,r)}}return i}function bE(e,t){const n={};for(const r of ge(e)){const i=tbe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function rlt(e){const t=[];for(const n of ge(e))if(Rp(e,n)){const r=e[n],i=Ee(r);for(const o of i)Ze(o)?t.push(o):pE(o)&&t.push(o.condition)}return t}function FH(e,t,n){if(e)for(const r of ge(e)){const i=e[r];if(ce(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function ilt(e,t,n,r){return e?ge(e).reduce((i,o)=>{const a=e[o];return ce(a)?a.reduce((s,l)=>t.call(r,s,l,o),i):t.call(r,i,a,o)},n):n}function lbe(e,t){return ge(t).reduce((n,r)=>{switch(r){case Vn:case Xr:case q1:case tE:case eE:case Ys:case nu:case yf:case kb:case Ya:case gc:case Ts:case mc:case ru:case iu:case Ns:case Wa:case nZ:case ho:case Lh:case ah:return n;case rZ:if(e==="line"||e==="trail")return n;case iZ:case Q1:{const i=t[r];if(ce(i)||Ze(i))for(const o of Ee(i))o.aggregate||n.push(_e(o,{}));return n}case bc:if(e==="trail")return n;case po:case ou:case au:case yc:case vf:case xf:case Zf:case wf:{const i=Bl(t[r]);return i&&!i.aggregate&&n.push(_e(i,{})),n}}},[])}var ube=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function olt(e){const{tooltip:t}=e,n=ube(e,["tooltip"]);if(!t)return{filteredEncoding:n};let r,i;if(ce(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return ce(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function mN(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:a,titlePrefix:s})=>{const l=r?` of ${MH(t)}`:"";return{field:a+t.field,type:t.type,title:Oe(s)?{signal:`${s}"${escape(l)}"`}:s+l}}),o=rlt(n).map(Ost);return{tooltip:[...i,...bl(o,St)]}}function MH(e){const{title:t,field:n}=e;return nr(t,n)}function OH(e,t,n,r,i){const{scale:o,axis:a}=n;return({partName:s,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:d={}})=>{const f=MH(n);return cbe(e,s,i,{mark:l,encoding:Object.assign(Object.assign(Object.assign({[t]:Object.assign(Object.assign(Object.assign({field:`${u}_${n.field}`,type:n.type},f!==void 0?{title:f}:{}),o!==void 0?{scale:o}:{}),a!==void 0?{axis:a}:{})},We(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{}),r),d)})}}function cbe(e,t,n,r){const{clip:i,color:o,opacity:a}=e,s=e.type;return e[t]||e[t]===void 0&&n[t]?[Object.assign(Object.assign({},r),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[t]),i?{clip:i}:{}),o?{color:o}:{}),a?{opacity:a}:{}),Jl(r.mark)?r.mark:{type:r.mark}),{style:`${s}-${String(t)}`}),mf(e[t])?{}:e[t])})]:[]}function dbe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],a=r[`${i}2`],s=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:hk(o,n),continuousAxisChannelDef2:hk(a,n),continuousAxisChannelDefError:hk(s,n),continuousAxisChannelDefError2:hk(l,n),continuousAxis:i}}function hk(e,t){if(e!=null&&e.aggregate){const{aggregate:n}=e,r=ube(e,["aggregate"]);return n!==t&&ve(Wat(n,t)),r}else return e}function fbe(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(Jl(n)&&n.orient)return n.orient;if(yl(i)){if(yl(o)){const a=Ze(i)&&i.aggregate,s=Ze(o)&&o.aggregate;if(!a&&s===t)return"vertical";if(!s&&a===t)return"horizontal";if(a===t&&s===t)throw new Error("Both x and y cannot have aggregate");return Tg(o)&&!Tg(i)?"horizontal":"vertical"}return"horizontal"}else{if(yl(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}var h9=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const DI="boxplot",alt=["box","median","outliers","rule","ticks"],slt=new gE(DI,hbe);function pbe(e){return At(e)?"tukey":e}function hbe(e,{config:t}){var n,r;e=Object.assign(Object.assign({},e),{encoding:bE(e.encoding,t)});const{mark:i,encoding:o,params:a,projection:s}=e,l=h9(e,["mark","encoding","params","projection"]),u=Jl(i)?i:{type:i};a&&ve(pge("boxplot"));const c=(n=u.extent)!==null&&n!==void 0?n:t.boxplot.extent,d=Mt("size",u,t),f=u.invalid,h=pbe(c),{bins:m,timeUnits:g,transform:y,continuousAxisChannelDef:v,continuousAxis:w,groupby:Z,aggregate:k,encodingWithoutContinuousAxis:_,ticksOrient:R,boxOrient:I,customTooltipWithoutAggregatedField:E}=llt(e,c,t),{color:X,size:Y}=_,C=h9(_,["color","size"]),N=Ce=>OH(u,w,v,Ce,t.boxplot),V=N(C),F=N(_),O=N(Object.assign(Object.assign({},C),Y?{size:Y}:{})),P=mN([{fieldPrefix:h==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:h==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],v,_),H={type:"tick",color:"black",opacity:1,orient:R,invalid:f,aria:!1},M=h==="min-max"?P:mN([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],v,_),j=[...V({partName:"rule",mark:{type:"rule",invalid:f,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:M}),...V({partName:"rule",mark:{type:"rule",invalid:f,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:M}),...V({partName:"ticks",mark:H,positionPrefix:"lower_whisker",extraEncoding:M}),...V({partName:"ticks",mark:H,positionPrefix:"upper_whisker",extraEncoding:M})],J=[...h!=="tukey"?j:[],...F({partName:"box",mark:Object.assign(Object.assign({type:"bar"},d?{size:d}:{}),{orient:I,invalid:f,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:P}),...O({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:f},Le(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),d?{size:d}:{}),{orient:R,aria:!1}),positionPrefix:"mid_box",extraEncoding:P})];if(h==="min-max")return Object.assign(Object.assign({},l),{transform:((r=l.transform)!==null&&r!==void 0?r:[]).concat(y),layer:J});const q=`datum["lower_box_${v.field}"]`,K=`datum["upper_box_${v.field}"]`,D=`(${K} - ${q})`,$=`${q} - ${c} * ${D}`,Q=`${K} + ${c} * ${D}`,B=`datum["${v.field}"]`,pe={joinaggregate:mbe(v.field),groupby:Z},re={transform:[{filter:`(${$} <= ${B}) && (${B} <= ${Q})`},{aggregate:[{op:"min",field:v.field,as:`lower_whisker_${v.field}`},{op:"max",field:v.field,as:`upper_whisker_${v.field}`},{op:"min",field:`lower_box_${v.field}`,as:`lower_box_${v.field}`},{op:"max",field:`upper_box_${v.field}`,as:`upper_box_${v.field}`},...k],groupby:Z}],layer:j},ee=h9(C,["tooltip"]),{scale:oe,axis:ue}=v,U=MH(v),de=oo(ue,["title"]),be=cbe(u,"outliers",t.boxplot,{transform:[{filter:`(${B} < ${$}) || (${B} > ${Q})`}],mark:"point",encoding:Object.assign(Object.assign(Object.assign({[w]:Object.assign(Object.assign(Object.assign({field:v.field,type:v.type},U!==void 0?{title:U}:{}),oe!==void 0?{scale:oe}:{}),Dt(de)?{}:{axis:de})},ee),X?{color:X}:{}),E?{tooltip:E}:{})})[0];let xe;const me=[...m,...g,pe];return be?xe={transform:me,layer:[be,re]}:(xe=re,xe.transform.unshift(...me)),Object.assign(Object.assign({},l),{layer:[xe,{transform:y,layer:J}]})}function mbe(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function llt(e,t,n){const r=fbe(e,DI),{continuousAxisChannelDef:i,continuousAxis:o}=dbe(e,r,DI),a=i.field,s=pbe(t),l=[...mbe(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:(s==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(s==="min-max"?"upper_whisker_":"max_")+a}],u=s==="min-max"||s==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],c=e.encoding,d=o;c[d];const f=h9(c,[typeof d=="symbol"?d:d+""]),{customTooltipWithoutAggregatedField:h,filteredEncoding:m}=olt(f),{bins:g,timeUnits:y,aggregate:v,groupby:w,encoding:Z}=sbe(m,n),k=r==="vertical"?"horizontal":"vertical",_=r,R=[...g,...y,{aggregate:[...v,...l],groupby:w},...u];return{bins:g,timeUnits:y,transform:R,groupby:w,aggregate:v,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:Z,ticksOrient:k,boxOrient:_,customTooltipWithoutAggregatedField:h}}var k$=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const zH="errorbar",ult=["ticks","rule"],clt=new gE(zH,gbe);function gbe(e,{config:t}){e=Object.assign(Object.assign({},e),{encoding:bE(e.encoding,t)});const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:l,tooltipEncoding:u}=bbe(e,zH,t);delete o.size;const c=OH(s,i,r,o,t.errorbar),d=s.thickness,f=s.size,h=Object.assign(Object.assign({type:"tick",orient:a,aria:!1},d!==void 0?{thickness:d}:{}),f!==void 0?{size:f}:{}),m=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:Object.assign({type:"rule",ariaRoleDescription:"errorbar"},d!==void 0?{size:d}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return Object.assign(Object.assign(Object.assign({},l),{transform:n}),m.length>1?{layer:m}:Object.assign({},m[0]))}function dlt(e,t){const{encoding:n}=e;if(flt(n))return{orient:fbe(e,t),inputType:"raw"};const r=plt(n),i=hlt(n),o=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const s=n.x2,l=n.y2;if(rt(s)&&rt(l))throw new Error(`${t} cannot have both x2 and y2`);if(rt(s)){if(yl(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(rt(l)){if(yl(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const s=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(rt(l)&&!rt(s))throw new Error(`${t} cannot have xError2 without xError`);if(rt(c)&&!rt(u))throw new Error(`${t} cannot have yError2 without yError`);if(rt(s)&&rt(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(rt(s)){if(yl(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(rt(u)){if(yl(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function flt(e){return(rt(e.x)||rt(e.y))&&!rt(e.x2)&&!rt(e.y2)&&!rt(e.xError)&&!rt(e.xError2)&&!rt(e.yError)&&!rt(e.yError2)}function plt(e){return rt(e.x2)||rt(e.y2)}function hlt(e){return rt(e.xError)||rt(e.xError2)||rt(e.yError)||rt(e.yError2)}function bbe(e,t,n){var r;const{mark:i,encoding:o,params:a,projection:s}=e,l=k$(e,["mark","encoding","params","projection"]),u=Jl(i)?i:{type:i};a&&ve(pge(t));const{orient:c,inputType:d}=dlt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:h,continuousAxisChannelDefError:m,continuousAxisChannelDefError2:g,continuousAxis:y}=dbe(e,c,t),{errorBarSpecificAggregate:v,postAggregateCalculates:w,tooltipSummary:Z,tooltipTitleWithFieldName:k}=mlt(u,f,h,m,g,d,t,n),_=o,R=y;_[R];const I=y==="x"?"x2":"y2";_[I];const E=y==="x"?"xError":"yError";_[E];const X=y==="x"?"xError2":"yError2";_[X];const Y=k$(_,[typeof R=="symbol"?R:R+"",typeof I=="symbol"?I:I+"",typeof E=="symbol"?E:E+"",typeof X=="symbol"?X:X+""]),{bins:C,timeUnits:N,aggregate:V,groupby:F,encoding:O}=sbe(Y,n),P=[...V,...v],H=d!=="raw"?[]:F,M=mN(Z,f,O,k);return{transform:[...(r=l.transform)!==null&&r!==void 0?r:[],...C,...N,...P.length===0?[]:[{aggregate:P,groupby:H}],...w],groupby:H,continuousAxisChannelDef:f,continuousAxis:y,encodingWithoutContinuousAxis:O,ticksOrient:c==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:l,tooltipEncoding:M}}function mlt(e,t,n,r,i,o,a,s){let l=[],u=[];const c=t.field;let d,f=!1;if(o==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":s.errorbar.center,m=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(m==="iqr")&&ve(Iat(h,m,a)),m==="stderr"||m==="stdev")l=[{op:m,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],d=[{fieldPrefix:"center_",titlePrefix:eZ(h)},{fieldPrefix:"upper_",titlePrefix:_$(h,m,"+")},{fieldPrefix:"lower_",titlePrefix:_$(h,m,"-")}],f=!0;else{let g,y,v;m==="ci"?(g="mean",y="ci0",v="ci1"):(g="median",y="q1",v="q3"),l=[{op:y,field:c,as:`lower_${c}`},{op:v,field:c,as:`upper_${c}`},{op:g,field:c,as:`center_${c}`}],d=[{fieldPrefix:"upper_",titlePrefix:L0({field:c,aggregate:v,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:L0({field:c,aggregate:y,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:L0({field:c,aggregate:g,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&ve(Gat(e.center,e.extent)),o==="aggregated-upper-lower"?(d=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):o==="aggregated-error"&&(d=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?u.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):u.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of u)d.push({fieldPrefix:h.as.substring(0,6),titlePrefix:oh(oh(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:f}}function _$(e,t,n){return`${eZ(e)} ${n} ${t}`}const PH="errorband",glt=["band","borders"],blt=new gE(PH,ybe);function ybe(e,{config:t}){e=Object.assign(Object.assign({},e),{encoding:bE(e.encoding,t)});const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:l}=bbe(e,PH,t),u=a,c=OH(u,i,r,o,t.errorband),d=e.encoding.x!==void 0&&e.encoding.y!==void 0;let f={type:d?"area":"rect"},h={type:d?"line":"rule"};const m=Object.assign(Object.assign({},u.interpolate?{interpolate:u.interpolate}:{}),u.tension&&u.interpolate?{tension:u.tension}:{});return d?(f=Object.assign(Object.assign(Object.assign({},f),m),{ariaRoleDescription:"errorband"}),h=Object.assign(Object.assign(Object.assign({},h),m),{aria:!1})):u.interpolate?ve(g$("interpolate")):u.tension&&ve(g$("tension")),Object.assign(Object.assign({},s),{transform:n,layer:[...c({partName:"band",mark:f,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]})}const vbe={};function jH(e,t,n){const r=new gE(e,t);vbe[e]={normalizer:r,parts:n}}function ylt(){return ge(vbe)}jH(DI,hbe,alt);jH(zH,gbe,ult);jH(PH,ybe,glt);const vlt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],xbe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},wbe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},xlt=ge(xbe),wlt=ge(wbe),Zlt={header:1,headerRow:1,headerColumn:1,headerFacet:1},Zbe=ge(Zlt),Sbe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Slt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},klt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Kl="_vgsid_",_lt={point:{on:"click",fields:[Kl],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function HH(e){return e==="legend"||!!(e!=null&&e.legend)}function qR(e){return HH(e)&&Le(e)}function JH(e){return!!(e!=null&&e.select)}var Glt=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function kbe(e){const t=[];for(const n of e||[]){if(JH(n))continue;const{expr:r,bind:i}=n,o=Glt(n,["expr","bind"]);if(i&&r){const a=Object.assign(Object.assign({},o),{bind:i,init:r});t.push(a)}else{const a=Object.assign(Object.assign(Object.assign({},o),r?{update:r}:{}),i?{bind:i}:{});t.push(a)}}return t}function Ilt(e){return yE(e)||KH(e)||BH(e)}function BH(e){return"concat"in e}function yE(e){return"vconcat"in e}function KH(e){return"hconcat"in e}function _be({step:e,offsetIsDiscrete:t}){var n;return t?(n=e.for)!==null&&n!==void 0?n:"offset":"position"}function Dl(e){return Le(e)&&e.step!==void 0}function G$(e){return e.view||e.width||e.height}const I$=20,Wlt={align:1,bounds:1,center:1,columns:1,spacing:1},Elt=ge(Wlt);function Xlt(e,t,n){var r,i;const o=n[t],a={},{spacing:s,columns:l}=o;s!==void 0&&(a.spacing=s),l!==void 0&&(dE(e)&&!lZ(e.facet)||BH(e))&&(a.columns=l),yE(e)&&(a.columns=1);for(const u of Elt)if(e[u]!==void 0)if(u==="spacing"){const c=e[u];a[u]=At(c)?c:{row:(r=c.row)!==null&&r!==void 0?r:s,column:(i=c.column)!==null&&i!==void 0?i:s}}else a[u]=e[u];return a}var Llt=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function gN(e,t){var n;return(n=e[t])!==null&&n!==void 0?n:e[t==="width"?"continuousWidth":"continuousHeight"]}function AI(e,t){const n=UI(e,t);return Dl(n)?n.step:Gbe}function UI(e,t){var n;const r=(n=e[t])!==null&&n!==void 0?n:e[t==="width"?"discreteWidth":"discreteHeight"];return nr(r,{step:e.step})}const Gbe=20,Rlt={continuousWidth:200,continuousHeight:200,step:Gbe},Clt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Rlt,mark:Sst,arc:{},area:{},bar:Gst,circle:{},geoshape:{},image:{},line:{},point:{},rect:Ist,rule:{color:"black"},square:{},text:{color:"black"},tick:Wst,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:ost,projection:{},legend:Slt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:_lt,style:{},title:{},facet:{spacing:I$},concat:{spacing:I$},normalizedNumberFormat:".0%"},vu=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],W$={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},E$={blue:vu[0],orange:vu[1],red:vu[2],teal:vu[3],green:vu[4],yellow:vu[5],purple:vu[6],pink:vu[7],brown:vu[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Vlt(e={}){return{signals:[{name:"color",value:Le(e)?Object.assign(Object.assign({},E$),e):E$}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Ylt(e){return{signals:[{name:"fontSize",value:Le(e)?Object.assign(Object.assign({},W$),e):W$}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Tlt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function Ibe(e){const t=ge(e||{}),n={};for(const r of t){const i=e[r];n[r]=dZ(i)?age(i):Go(i)}return n}function Nlt(e){const t=ge(e),n={};for(const r of t)n[r]=Ibe(e[r]);return n}const Flt=[...Fge,...obe,...Zbe,"background","padding","legend","lineBreak","scale","style","title","view"];function Wbe(e={}){const{color:t,font:n,fontSize:r,selection:i}=e,o=Llt(e,["color","font","fontSize","selection"]),a=fb({},st(Clt),n?Tlt(n):{},t?Vlt(t):{},r?Ylt(r):{},o||{});i&&pb(a,"selection",i,!0);const s=oo(a,Flt);for(const l of["background","lineBreak","padding"])a[l]&&(s[l]=Go(a[l]));for(const l of Fge)a[l]&&(s[l]=Ki(a[l]));for(const l of obe)a[l]&&(s[l]=Ibe(a[l]));for(const l of Zbe)a[l]&&(s[l]=Ki(a[l]));return a.legend&&(s.legend=Ki(a.legend)),a.scale&&(s.scale=Ki(a.scale)),a.style&&(s.style=Nlt(a.style)),a.title&&(s.title=Ki(a.title)),a.view&&(s.view=Ki(a.view)),s}const Mlt=new Set(["view",...bst]),Olt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],zlt=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},Zst);function Plt(e){e=st(e);for(const t of Olt)delete e[t];if(e.axis)for(const t in e.axis)dZ(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of vlt)delete e.legend[t];if(e.mark){for(const t of y$)delete e.mark[t];e.mark.tooltip&&Le(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(kbe(e.params)),delete e.params);for(const t of Mlt){for(const r of y$)delete e[t][r];const n=zlt[t];if(n)for(const r of n)delete e[t][r];Hlt(e,t)}for(const t of ylt())delete e[t];jlt(e);for(const t in e)Le(e[t])&&Dt(e[t])&&delete e[t];return Dt(e)?void 0:e}function jlt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=oge(e.title);Dt(t)||(e.style["group-title"]=Object.assign(Object.assign({},e.style["group-title"]),t)),Dt(n)||(e.style["group-subtitle"]=Object.assign(Object.assign({},e.style["group-subtitle"]),n)),Dt(r)?delete e.title:e.title=r}function Hlt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const o=Object.assign(Object.assign({},i),e.style[n!=null?n:t]);Dt(o)||(e.style[n!=null?n:t]=o),delete e[t]}function vE(e){return"layer"in e}function Jlt(e){return"repeat"in e}function Blt(e){return!ce(e.repeat)&&e.repeat.layer}var Klt=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class DH{map(t,n){return dE(t)?this.mapFacet(t,n):Jlt(t)?this.mapRepeat(t,n):KH(t)?this.mapHConcat(t,n):yE(t)?this.mapVConcat(t,n):BH(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(vE(t))return this.mapLayer(t,n);if(vc(t))return this.mapUnit(t,n);throw new Error(uH(t))}mapLayer(t,n){return Object.assign(Object.assign({},t),{layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))})}mapHConcat(t,n){return Object.assign(Object.assign({},t),{hconcat:t.hconcat.map(r=>this.map(r,n))})}mapVConcat(t,n){return Object.assign(Object.assign({},t),{vconcat:t.vconcat.map(r=>this.map(r,n))})}mapConcat(t,n){const{concat:r}=t,i=Klt(t,["concat"]);return Object.assign(Object.assign({},i),{concat:r.map(o=>this.map(o,n))})}mapFacet(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}mapRepeat(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}}const Dlt={zero:1,center:1,normalize:1};function Alt(e){return e in Dlt}const Ult=new Set([Vge,sE,aE,jI,uE,GH,IH,lE,Yge,_H]),$lt=new Set([sE,aE,Vge]);function ym(e){return Ze(e)&&Vg(e)==="quantitative"&&!e.bin}function X$(e,t){var n,r;const i=t==="x"?"y":"radius",o=e[t],a=e[i];if(Ze(o)&&Ze(a))if(ym(o)&&ym(a)){if(o.stack)return t;if(a.stack)return i;const s=Ze(o)&&!!o.aggregate,l=Ze(a)&&!!a.aggregate;if(s!==l)return s?t:i;{const u=(n=o.scale)===null||n===void 0?void 0:n.type,c=(r=a.scale)===null||r===void 0?void 0:r.type;if(u&&u!=="linear")return i;if(c&&c!=="linear")return t}}else{if(ym(o))return t;if(ym(a))return i}else{if(ym(o))return t;if(ym(a))return i}}function Qlt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function Ebe(e,t){var n,r;const i=Jl(e)?e.type:e;if(!Ult.has(i))return null;const o=X$(t,"x")||X$(t,"theta");if(!o)return null;const a=t[o],s=Ze(a)?_e(a,{}):void 0,l=Qlt(o),u=[],c=new Set;if(t[l]){const h=t[l],m=Ze(h)?_e(h,{}):void 0;m&&m!==s&&(u.push(l),c.add(m));const g=l==="x"?"xOffset":"yOffset",y=t[g],v=Ze(y)?_e(y,{}):void 0;v&&v!==s&&(u.push(g),c.add(v))}const d=aot.reduce((h,m)=>{if(m!=="tooltip"&&Rp(t,m)){const g=t[m];for(const y of Ee(g)){const v=Bl(y);if(v.aggregate)continue;const w=_e(v,{});(!w||!c.has(w))&&h.push({channel:m,fieldDef:v})}}return h},[]);let f;return a.stack!==void 0?mf(a.stack)?f=a.stack?"zero":null:f=a.stack:$lt.has(i)&&(f="zero"),!f||!Alt(f)||NH(t)&&d.length===0?null:!((n=a==null?void 0:a.scale)===null||n===void 0)&&n.type&&((r=a==null?void 0:a.scale)===null||r===void 0?void 0:r.type)!==ao.LINEAR?(ve(Sat(a.scale.type)),null):rt(t[su(o)])?(a.stack!==void 0&&ve(Zat(o)),null):(Ze(a)&&a.aggregate&&!yot.has(a.aggregate)&&ve(kat(a.aggregate)),{groupbyChannels:u,groupbyFields:c,fieldChannel:o,impute:a.impute===null?!1:Gf(i),stackBy:d,offset:f})}var Xbe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function qlt(e){const t=Xbe(e,["point","line"]);return ge(t).length>1?t:t.type}function eut(e){for(const t of["line","area","rule","trail"])e[t]&&(e=Object.assign(Object.assign({},e),{[t]:oo(e[t],["point","line"])}));return e}function eC(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Le(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Le(t.point)?t.point:{}:void 0}function L$(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class tut{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(vc(t)){const{mark:r,encoding:i}=t,o=Jl(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!eC(o,n[o.type],i);case"area":return!!eC(o,n[o.type],i)||!!L$(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:a,mark:s,encoding:l}=t,u=Xbe(t,["params","projection","mark","encoding"]),c=bE(l,i),d=Jl(s)?s:{type:s},f=eC(d,i[d.type],c),h=d.type==="area"&&L$(d,i[d.type]),m=[Object.assign(Object.assign({},o?{params:o}:{}),{mark:qlt(Object.assign(Object.assign({},d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{}),d)),encoding:oo(c,["shape"])})],g=Ebe(d,c);let y=c;if(g){const{fieldChannel:v,offset:w}=g;y=Object.assign(Object.assign({},c),{[v]:Object.assign(Object.assign({},c[v]),w?{stack:w}:{})})}return y=oo(y,["y2","x2"]),h&&m.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"line"},Eg(d,["clip","interpolate","tension","tooltip"])),h),encoding:y})),f&&m.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},Eg(d,["clip","tooltip"])),f),encoding:y})),r(Object.assign(Object.assign({},u),{layer:m}),Object.assign(Object.assign({},n),{config:eut(i)}))}}var nut=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function rut(e,t){return t?lZ(e)?Rbe(e,t):Lbe(e,t):e}function tC(e,t){return t?Rbe(e,t):e}function bN(e,t,n){const r=t[e];if(Fst(r)){if(r.repeat in n)return Object.assign(Object.assign({},t),{[e]:n[r.repeat]});ve(Fot(r.repeat));return}return t}function Lbe(e,t){if(e=bN("field",e,t),e!==void 0){if(e===null)return null;if(CH(e)&&Xl(e.sort)){const n=bN("field",e.sort,t);e=Object.assign(Object.assign({},e),n?{sort:n}:{})}return e}}function R$(e,t){if(Ze(e))return Lbe(e,t);{const n=bN("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function C$(e,t){if(rt(e)){const n=R$(e,t);if(n)return n;if(fE(e))return{condition:e.condition}}else{if(uZ(e)){const n=R$(e.condition,t);return n?Object.assign(Object.assign({},e),{condition:n}):nut(e,["condition"])}return e}}function Rbe(e,t){const n={};for(const r in e)if(ze(e,r)){const i=e[r];if(ce(i))n[r]=i.map(o=>C$(o,t)).filter(o=>o);else{const o=C$(i,t);o!==void 0&&(n[r]=o)}}return n}class iut{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(vc(t)){const{encoding:n,mark:r}=t;if(r==="line"||Jl(r)&&r.type==="line")for(const i of rot){const o=Rh(i),a=n[o];if(n[i]&&(Ze(a)&&!Nr(a.bin)||uu(a)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return ve(oat(!!i.x2,!!i.y2)),r(Object.assign(Object.assign({},t),{mark:Le(o)?Object.assign(Object.assign({},o),{type:"rule"}):"rule"}),n)}}var Cc=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class out extends DH{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[slt,clt,blt,new tut,new iut]}map(t,n){if(vc(t)){const r=Rp(t.encoding,Bu),i=Rp(t.encoding,Ku),o=Rp(t.encoding,$1);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,o=tC(t.encoding,n.repeater),a=Object.assign(Object.assign({},t),o?{encoding:o}:{});if(r||i)return this.mapUnitWithParentEncodingOrProjection(a,n);const s=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(a,n.config))return l.run(a,n,s);return a}mapRepeat(t,n){return Blt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i}=t,o=Cc(t,["repeat","spec"]),{row:a,column:s,layer:l}=r,{repeater:u={},repeaterPrefix:c=""}=n;return a||s?this.mapRepeat(Object.assign(Object.assign({},t),{repeat:Object.assign(Object.assign({},a?{row:a}:{}),s?{column:s}:{}),spec:{repeat:{layer:l},spec:i}}),n):Object.assign(Object.assign({},o),{layer:l.map(d=>{const f=Object.assign(Object.assign({},u),{layer:d}),h=`${(i.name||"")+c}child__layer_${_n(d)}`,m=this.mapLayerOrUnit(i,Object.assign(Object.assign({},n),{repeater:f,repeaterPrefix:h}));return m.name=h,m})})}mapNonLayerRepeat(t,n){var r;const{repeat:i,spec:o,data:a}=t,s=Cc(t,["repeat","spec","data"]);!ce(i)&&t.columns&&(t=oo(t,["columns"]),ve(f$("repeat")));const l=[],{repeater:u={},repeaterPrefix:c=""}=n,d=!ce(i)&&i.row||[u?u.row:null],f=!ce(i)&&i.column||[u?u.column:null],h=ce(i)&&i||[u?u.repeat:null];for(const g of h)for(const y of d)for(const v of f){const w={repeat:g,row:y,column:v,layer:u.layer},Z=(o.name||"")+c+"child__"+(ce(i)?`${_n(g)}`:(i.row?`row_${_n(y)}`:"")+(i.column?`column_${_n(v)}`:"")),k=this.map(o,Object.assign(Object.assign({},n),{repeater:w,repeaterPrefix:Z}));k.name=Z,l.push(oo(k,["data"]))}const m=ce(i)?t.columns:i.column?i.column.length:1;return Object.assign(Object.assign({data:(r=o.data)!==null&&r!==void 0?r:a,align:"all"},s),{columns:m,concat:l})}mapFacet(t,n){const{facet:r}=t;return lZ(r)&&t.columns&&(t=oo(t,["columns"]),ve(f$("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:a,config:s}=n,l=Y$({parentProjection:a,projection:i}),u=V$({parentEncoding:o,encoding:tC(r,n.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},t),l?{projection:l}:{}),u?{encoding:u}:{}),{config:s})}mapFacetedUnit(t,n){const r=t.encoding,{row:i,column:o,facet:a}=r,s=Cc(r,["row","column","facet"]),{mark:l,width:u,projection:c,height:d,view:f,params:h,encoding:m}=t,g=Cc(t,["mark","width","projection","height","view","params","encoding"]),{facetMapping:y,layout:v}=this.getFacetMappingAndLayout({row:i,column:o,facet:a},n),w=tC(s,n.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},g),v),{facet:y,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u?{width:u}:{}),d?{height:d}:{}),f?{view:f}:{}),c?{projection:c}:{}),{mark:l,encoding:w}),h?{params:h}:{})}),n)}getFacetMappingAndLayout(t,n){var r;const{row:i,column:o,facet:a}=t;if(i||o){a&&ve(rat([...i?[Bu]:[],...o?[Ku]:[]]));const s={},l={};for(const u of[Bu,Ku]){const c=t[u];if(c){const d=Cc(c,["align","center","spacing","columns"]);s[u]=d;for(const f of["align","center","spacing"])c[f]!==void 0&&((r=l[f])!==null&&r!==void 0||(l[f]={}),l[f][u]=c[f])}}return{facetMapping:s,layout:l}}else{const{align:s,center:l,spacing:u,columns:c}=a,d=Cc(a,["align","center","spacing","columns"]);return{facetMapping:rut(d,n.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},s?{align:s}:{}),l?{center:l}:{}),u?{spacing:u}:{}),c?{columns:c}:{})}}}mapLayer(t,n){var{parentEncoding:r,parentProjection:i}=n,o=Cc(n,["parentEncoding","parentProjection"]);const{encoding:a,projection:s}=t,l=Cc(t,["encoding","projection"]),u=Object.assign(Object.assign({},o),{parentEncoding:V$({parentEncoding:r,encoding:a,layer:!0}),parentProjection:Y$({parentProjection:i,projection:s})});return super.mapLayer(l,u)}}function V$({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...ge(e),...ge(t)]);for(const o of i){const a=t[o],s=e[o];if(rt(a)){const l=Object.assign(Object.assign({},s),a);r[o]=l}else uZ(a)?r[o]=Object.assign(Object.assign({},a),{condition:Object.assign(Object.assign({},s),a.condition)}):a||a===null?r[o]=a:(n||Is(s)||Oe(s)||rt(s)||ce(s))&&(r[o]=s)}}else r=t;return!r||Dt(r)?void 0:r}function Y$(e){const{parentProjection:t,projection:n}=e;return t&&n&&ve(Hot({parentProjection:t,projection:n})),n!=null?n:t}function AH(e){return"filter"in e}function aut(e){return(e==null?void 0:e.stop)!==void 0}function Cbe(e){return"lookup"in e}function sut(e){return"data"in e}function lut(e){return"param"in e}function uut(e){return"pivot"in e}function cut(e){return"density"in e}function dut(e){return"quantile"in e}function fut(e){return"regression"in e}function put(e){return"loess"in e}function hut(e){return"sample"in e}function mut(e){return"window"in e}function gut(e){return"joinaggregate"in e}function but(e){return"flatten"in e}function yut(e){return"calculate"in e}function Vbe(e){return"bin"in e}function vut(e){return"impute"in e}function xut(e){return"timeUnit"in e}function wut(e){return"aggregate"in e}function Zut(e){return"stack"in e}function Sut(e){return"fold"in e}function kut(e){return e.map(t=>AH(t)?{filter:E0(t.filter,$at)}:t)}var Id=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class _ut extends DH{map(t,n){var r,i;return(r=n.emptySelections)!==null&&r!==void 0||(n.emptySelections={}),(i=n.selectionPredicates)!==null&&i!==void 0||(n.selectionPredicates={}),t=T$(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=T$(t,n),t.encoding){const r={};for(const[i,o]of Bd(t.encoding))r[i]=Ybe(o,n);t=Object.assign(Object.assign({},t),{encoding:r})}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const r=t,{selection:i}=r,o=Id(r,["selection"]);return i?Object.assign(Object.assign({},o),{params:Bd(i).map(([a,s])=>{var l;const u=s,{init:c,bind:d,empty:f}=u,h=Id(u,["init","bind","empty"]);h.type==="single"?(h.type="point",h.toggle=!1):h.type==="multi"&&(h.type="point"),n.emptySelections[a]=f!=="none";for(const m of di((l=n.selectionPredicates[a])!==null&&l!==void 0?l:{}))m.empty=f!=="none";return{name:a,value:c,select:h,bind:d}})}):t}}function T$(e,t){const{transform:n}=e,r=Id(e,["transform"]);if(n){const i=n.map(o=>{if(AH(o))return{filter:yN(o,t)};if(Vbe(o)&&Ch(o.bin))return Object.assign(Object.assign({},o),{bin:Tbe(o.bin)});if(Cbe(o)){const a=o.from,{selection:s}=a,l=Id(a,["selection"]);return s?Object.assign(Object.assign({},o),{from:Object.assign({param:s},l)}):o}return o});return Object.assign(Object.assign({},r),{transform:i})}return e}function Ybe(e,t){var n,r;const i=st(e);if(Ze(i)&&Ch(i.bin)&&(i.bin=Tbe(i.bin)),Yh(i)&&!((r=(n=i.scale)===null||n===void 0?void 0:n.domain)===null||r===void 0)&&r.selection){const o=i.scale.domain,{selection:a}=o,s=Id(o,["selection"]);i.scale.domain=Object.assign(Object.assign({},s),a?{param:a}:{})}if(fE(i))if(ce(i.condition))i.condition=i.condition.map(o=>{const{selection:a,param:s,test:l}=o,u=Id(o,["selection","param","test"]);return s?o:Object.assign(Object.assign({},u),{test:yN(o,t)})});else{const o=Ybe(i.condition,t),{selection:a,param:s,test:l}=o,u=Id(o,["selection","param","test"]);i.condition=s?i.condition:Object.assign(Object.assign({},u),{test:yN(i.condition,t)})}return i}function Tbe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n}=t,r=Id(t,["selection"]);return Object.assign(Object.assign({},e),{extent:Object.assign(Object.assign({},r),{param:n})})}return e}function yN(e,t){const n=r=>E0(r,i=>{var o,a,s;const l=(o=t.emptySelections[i])!==null&&o!==void 0?o:!0,u={param:i,empty:l};return(a=(s=t.selectionPredicates)[i])!==null&&a!==void 0||(s[i]=[]),t.selectionPredicates[i].push(u),u});return e.selection?n(e.selection):E0(e.test||e.filter,r=>r.selection?n(r.selection):r)}class vN extends DH{map(t,n){var r;const i=(r=n.selections)!==null&&r!==void 0?r:[];if(t.params&&!vc(t)){const o=[];for(const a of t.params)JH(a)?i.push(a):o.push(a);t.params=o}return n.selections=i,super.map(t,Nbe(t,n))}mapUnit(t,n){var r;const i=n.selections;if(!i||!i.length)return t;const o=((r=n.path)!==null&&r!==void 0?r:[]).concat(t.name),a=[];for(const s of i)if(!s.views||!s.views.length)a.push(s);else for(const l of s.views)(We(l)&&(l===t.name||o.indexOf(l)>=0)||ce(l)&&l.map(u=>o.indexOf(u)).every((u,c,d)=>u!==-1&&(c===0||u>d[c-1])))&&a.push(s);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=vN.prototype[e];vN.prototype[e]=function(n,r){return t.call(this,n,Nbe(n,r))}}function Nbe(e,t){var n;return e.name?Object.assign(Object.assign({},t),{path:((n=t.path)!==null&&n!==void 0?n:[]).concat(e.name)}):t}function Fbe(e,t){t===void 0&&(t=Wbe(e.config));const n=Eut(e,t),{width:r,height:i}=e,o=Xut(n,{width:r,height:i,autosize:e.autosize},t);return Object.assign(Object.assign({},n),o?{autosize:o}:{})}const Gut=new out,Iut=new _ut,Wut=new vN;function Eut(e,t={}){const n={config:t};return Wut.map(Gut.map(Iut.map(e,n),n),n)}function N$(e){return We(e)?{type:e}:e!=null?e:{}}function Xut(e,t,n){let{width:r,height:i}=t;const o=vc(e)||vE(e),a={};o?r=="container"&&i=="container"?(a.type="fit",a.contains="padding"):r=="container"?(a.type="fit-x",a.contains="padding"):i=="container"&&(a.type="fit-y",a.contains="padding"):(r=="container"&&(ve(l$("width")),r=void 0),i=="container"&&(ve(l$("height")),i=void 0));const s=Object.assign(Object.assign(Object.assign({type:"pad"},a),n?N$(n.autosize):{}),N$(e.autosize));if(s.type==="fit"&&!o&&(ve(Wot),s.type="pad"),r=="container"&&!(s.type=="fit"||s.type=="fit-x")&&ve(u$("width")),i=="container"&&!(s.type=="fit"||s.type=="fit-y")&&ve(u$("height")),!gl(s,{type:"pad"}))return s}function Lut(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function Rut(e){return e?`fit-${nE(e)}`:"fit"}const Cut=["background","padding"];function F$(e,t){const n={};for(const r of Cut)e&&e[r]!==void 0&&(n[r]=Go(e[r]));return t&&(n.params=e.params),n}class xc{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new xc(st(this.explicit),st(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(t){return nr(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of ge(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function ol(e){return{explicit:!0,value:e}}function Ba(e){return{explicit:!1,value:e}}function Mbe(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:xE(t,n,r,i)}}function xE(e,t,n,r){return e.explicit&&t.explicit&&ve(mat(n,r,e.value,t.value)),e}function Dd(e,t,n,r,i=xE){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:gl(e.value,t.value)?e:i(e,t,n,r)}class Vut extends xc{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Ng(e){return"url"in e}function Lw(e){return"values"in e}function Obe(e){return"name"in e&&!Ng(e)&&!Lw(e)&&!Wd(e)}function Wd(e){return e&&(zbe(e)||Pbe(e)||UH(e))}function zbe(e){return"sequence"in e}function Pbe(e){return"sphere"in e}function UH(e){return"graticule"in e}var on;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(on||(on={}));var Yut=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function dh(e,t=!0,n=pi){if(ce(e)){const r=e.map(i=>dh(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Vh(e))return n(t?Xw(e):Oat(e));return t?n(sn(e)):e}function Tut(e,t){var n;for(const r of di((n=e.component.selection)!==null&&n!==void 0?n:{})){const i=r.name;let o=`${i}${$d}, ${r.resolve==="global"?"true":`{unit: ${Fg(e)}}`}`;for(const a of ZE)a.defined(r)&&(a.signals&&(t=a.signals(e,r,t)),a.modifyExpr&&(o=a.modifyExpr(e,r,o)));t.push({name:i+mct,on:[{events:{signal:r.name+$d},update:`modify(${ke(r.name+fh)}, ${o})`}]})}return $H(t)}function Nut(e,t){if(e.component.selection&&ge(e.component.selection).length){const n=ke(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:bf("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return $H(t)}function Fut(e,t){var n;let r=!1;for(const i of di((n=e.component.selection)!==null&&n!==void 0?n:{})){const o=i.name,a=ke(o+fh);if(t.filter(s=>s.name===o).length===0){const s=i.resolve==="global"?"union":i.resolve,l=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${iye}(${a}, ${ke(s)}${l}`})}r=!0;for(const s of ZE)s.defined(i)&&s.topLevelSignals&&(t=s.topLevelSignals(e,i,t))}return r&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),$H(t)}function Mut(e,t){var n;const r=[...t],i=Fg(e,{escape:!1});for(const o of di((n=e.component.selection)!==null&&n!==void 0?n:{})){const a={name:o.name+fh};if(o.project.hasSelectionId&&(a.transform=[{type:"collect",sort:{field:Kl}}]),o.init){const s=o.project.items.map(l=>Yut(l,["signals"]));a.values=o.project.hasSelectionId?o.init.map(l=>({unit:i,[Kl]:dh(l,!1)[0]})):o.init.map(l=>({unit:i,fields:s,values:dh(l,!1)}))}r.filter(s=>s.name===o.name+fh).length||r.push(a)}return r}function jbe(e,t){var n;for(const r of di((n=e.component.selection)!==null&&n!==void 0?n:{}))for(const i of ZE)i.defined(r)&&i.marks&&(t=i.marks(e,r,t));return t}function Out(e,t){for(const n of e.children)$n(n)&&(t=jbe(n,t));return t}function zut(e,t,n,r){const i=uye(e,t.param,t);return{signal:Jo(n.get("type"))&&ce(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function $H(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class $t{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){ve(zot);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Ci extends $t{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${j0e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}var M$=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class Ll extends $t{clone(){return new Ll(null,st(this.formula))}constructor(t,n){super(t),this.formula=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o)=>{const{field:a,timeUnit:s}=o;if(s){const l=_e(o,{forAs:!0});i[St({as:l,field:a,timeUnit:s})]={as:l,field:a,timeUnit:s}}return i},{});return Dt(r)?null:new Ll(t,r)}static makeFromTransform(t,n){const r=Object.assign({},n),{timeUnit:i}=r,o=M$(r,["timeUnit"]),a=mi(i),s=Object.assign(Object.assign({},o),{timeUnit:a});return new Ll(t,{[St(s)]:s})}merge(t){this.formula=Object.assign({},this.formula);for(const n in t.formula)this.formula[n]||(this.formula[n]=t.formula[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Bd(this.formula))t.has(i.as)||(n[r]=i);this.formula=n}producedFields(){return new Set(di(this.formula).map(t=>t.as))}dependentFields(){return new Set(di(this.formula).map(t=>t.field))}hash(){return`TimeUnit ${St(this.formula)}`}assemble(){const t=[];for(const n of di(this.formula)){const{field:r,as:i,timeUnit:o}=n,a=mi(o),{unit:s,utc:l}=a,u=M$(a,["unit","utc"]);t.push(Object.assign(Object.assign(Object.assign(Object.assign({field:Ia(r),type:"timeunit"},s?{units:hH(s)}:{}),l?{timezone:"utc"}:{}),u),{as:[i,`${i}_end`]}))}return t}}var Put=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const fZ="_tuple_fields";class jut{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Hut={defined:()=>!0,parse:(e,t,n)=>{var r;const i=t.name,o=(r=t.project)!==null&&r!==void 0?r:t.project=new jut,a={},s={},l=new Set,u=(g,y)=>{const v=y==="visual"?g.channel:g.field;let w=_n(`${i}_${v}`);for(let Z=1;l.has(w);Z++)w=_n(`${i}_${v}_${Z}`);return l.add(w),{[y]:w}},c=t.type,d=e.config.selection[c],f=n.value!==void 0?Ee(n.value):null;let{fields:h,encodings:m}=Le(n.select)?n.select:{};if(!h&&!m&&f){for(const g of f)if(Le(g))for(const y of ge(g))not(y)?(m||(m=[])).push(y):c==="interval"?(ve(Not),m=d.encodings):(h||(h=[])).push(y)}!h&&!m&&(m=d.encodings,"fields"in d&&(h=d.fields));for(const g of m!=null?m:[]){const y=e.fieldDef(g);if(y){let v=y.field;if(y.aggregate){ve(Eot(g,y.aggregate));continue}else if(!v){ve(d$(g));continue}if(y.timeUnit){v=e.vgField(g);const w={timeUnit:y.timeUnit,as:v,field:y.field};s[St(w)]=w}if(!a[v]){let w="E";if(c==="interval"){const k=e.getScaleComponent(g).get("type");Jo(k)&&(w="R")}else y.bin&&(w="R-RE");const Z={field:v,channel:g,type:w};Z.signals=Object.assign(Object.assign({},u(Z,"data")),u(Z,"visual")),o.items.push(a[v]=Z),o.hasField[v]=o.hasChannel[g]=a[v],o.hasSelectionId=o.hasSelectionId||v===Kl}}else ve(d$(g))}for(const g of h!=null?h:[]){if(o.hasField[g])continue;const y={type:"E",field:g};y.signals=Object.assign({},u(y,"data")),o.items.push(y),o.hasField[g]=y,o.hasSelectionId=o.hasSelectionId||g===Kl}f&&(t.init=f.map(g=>o.items.map(y=>Le(g)?g[y.channel]!==void 0?g[y.channel]:g[y.field]:g))),Dt(s)||(o.timeUnit=new Ll(null,s))},signals:(e,t,n)=>{const r=t.name+fZ;return n.filter(i=>i.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(i=>{const o=Put(i,["signals","hasLegend"]);return o.field=Ia(o.field),o})})}},Ad={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Sf(i))continue;const o=e.getScaleComponent(i),a=o?o.get("type"):void 0;if(!o||!Jo(a)){ve(Rot);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(a=>n.filter(s=>s.name===a.signals.data).length===0);if(!e.parent||wN(e)||r.length===0)return n;const i=n.filter(a=>a.name===t.name)[0];let o=i.update;if(o.indexOf(iye)>=0)i.update=`{${r.map(a=>`${ke(Ia(a.field))}: ${a.signals.data}`).join(", ")}}`;else{for(const a of r){const s=`${ke(Ia(a.field))}: ${a.signals.data}`;o.includes(s)||(o=`${o.substring(0,o.length-1)}, ${s}}`)}i.update=o}return n.concat(r.map(a=>({name:a.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!wN(e))for(const r of t.scales){const i=n.filter(o=>o.name===r.signals.data)[0];i.push="outer",delete i.value,delete i.update}return n}};function xN(e,t){return`domain(${ke(e.scaleName(t))})`}function wN(e){var t;return e.parent&&Lb(e.parent)&&((t=!e.parent.parent)!==null&&t!==void 0?t:wN(e.parent.parent))}var Jut=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const R0="_brush",ZN="_scale_trigger",But={defined:e=>e.type==="interval",signals:(e,t,n)=>{const r=t.name,i=r+fZ,o=Ad.defined(t),a=t.init?t.init[0]:null,s=[],l=[];if(t.translate&&!o){const c=`!event.item || event.item.mark.name !== ${ke(r+R0)}`;Hbe(t,(d,f)=>{var h,m;const g=Ee((h=(m=f.between[0]).filter)!==null&&h!==void 0?h:m.filter=[]);return g.includes(c)||g.push(c),d})}t.project.items.forEach((c,d)=>{const f=c.channel;if(f!==Vn&&f!==Xr){ve("Interval selections only support x and y encoding channels.");return}const h=a?a[d]:null,m=Kut(e,t,c,h),g=c.signals.data,y=c.signals.visual,v=ke(e.scaleName(f)),w=e.getScaleComponent(f).get("type"),Z=Jo(w)?"+":"";n.push(...m),s.push(g),l.push({scaleName:e.scaleName(f),expr:`(!isArray(${g}) || (${Z}invert(${v}, ${y})[0] === ${Z}${g}[0] && ${Z}invert(${v}, ${y})[1] === ${Z}${g}[1]))`})}),!o&&l.length&&n.push({name:r+ZN,value:{},on:[{events:l.map(c=>({scale:c.scaleName})),update:`${l.map(c=>c.expr).join(" && ")} ? ${r+ZN} : {}`}]});const u=`unit: ${Fg(e)}, fields: ${i}, values`;return n.concat(Object.assign(Object.assign({name:r+$d},a?{init:`{${u}: ${dh(a)}}`}:{}),s.length?{on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${u}: [${s}]} : null`}]}:{}))},marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,a=i==null?void 0:i.signals.visual,s=o==null?void 0:o.signals.visual,l=`data(${ke(t.name+fh)})`;if(Ad.defined(t)||!i&&!o)return n;const u={x:i!==void 0?{signal:`${a}[0]`}:{value:0},y:o!==void 0?{signal:`${s}[0]`}:{value:0},x2:i!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${s}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const y of ge(u))u[y]=[Object.assign({test:`${l}.length && ${l}[0].unit === ${Fg(e)}`},u[y]),{value:0}];const c=t.mark,{fill:d,fillOpacity:f,cursor:h}=c,m=Jut(c,["fill","fillOpacity","cursor"]),g=ge(m).reduce((y,v)=>(y[v]=[{test:[i!==void 0&&`${a}[0] !== ${a}[1]`,o!==void 0&&`${s}[0] !== ${s}[1]`].filter(w=>w).join(" && "),value:m[v]},{value:null}],y),{});return[{name:`${r+R0}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:f}},update:u}},...n,{name:r+R0,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},h?{cursor:{value:h}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},u),g)}}]}};function Kut(e,t,n,r){const i=n.channel,o=n.signals.visual,a=n.signals.data,s=Ad.defined(t),l=ke(e.scaleName(i)),u=e.getScaleComponent(i),c=u?u.get("type"):void 0,d=g=>`scale(${l}, ${g})`,f=e.getSizeSignalRef(i===Vn?"width":"height").signal,h=`${i}(unit)`,m=Hbe(t,(g,y)=>[...g,{events:y.between[0],update:`[${h}, ${h}]`},{events:y,update:`[${o}[0], clamp(${h}, 0, ${f})]`}]);return m.push({events:{signal:t.name+ZN},update:Jo(c)?`[${d(`${a}[0]`)}, ${d(`${a}[1]`)}]`:"[0, 0]"}),s?[{name:a,on:[]}]:[Object.assign(Object.assign({name:o},r?{init:dh(r,!0,d)}:{value:[]}),{on:m}),Object.assign(Object.assign({name:a},r?{init:dh(r)}:{}),{on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${l}, ${o})`}]})]}function Hbe(e,t){return e.events.reduce((n,r)=>r.between?t(n,r):(ve(`${r} is not an ordered event stream for interval selections.`),n),[])}const Dut={defined:e=>e.type==="point",signals:(e,t,n)=>{var r;const i=t.name,o=i+fZ,a=t.project,s="(item().isVoronoi ? datum.datum : datum)",l=di((r=e.component.selection)!==null&&r!==void 0?r:{}).reduce((f,h)=>h.type==="interval"?f.concat(h.name+R0):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${l?` && ${l}`:""}`;let c=`unit: ${Fg(e)}, `;if(t.project.hasSelectionId)c+=`${Kl}: ${s}[${ke(Kl)}]`;else{const f=a.items.map(h=>{const m=e.fieldDef(h.channel);return m!=null&&m.bin?`[${s}[${ke(e.vgField(h.channel,{}))}], ${s}[${ke(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${s}[${ke(h.field)}]`}).join(", ");c+=`fields: ${o}, values: [${f}]`}const d=t.events;return n.concat([{name:i+$d,on:d?[{events:d,update:`${u} ? {${c}} : null`,force:!0}]:[]}])}};function Ib(e,t,n,r){const i=fE(t)&&t.condition,o=r(t);if(i){const a=Ee(i).map(s=>{const l=r(s);if(Nst(s)){const{param:u,empty:c}=s,d=lye(e,{param:u,empty:c});return Object.assign({test:d},l)}else{const u=qI(e,s.test);return Object.assign({test:u},l)}});return{[n]:[...a,...o!==void 0?[o]:[]]}}else return o!==void 0?{[n]:o}:{}}function QH(e,t="text"){const n=e.encoding[t];return Ib(e,n,t,r=>wE(r,e.config))}function wE(e,t,n="datum"){if(e){if(Is(e))return gn(e.value);if(rt(e)){const{format:r,formatType:i}=BI(e);return LH({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Jbe(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,a=n.tooltip;if(ce(a))return{tooltip:O$({tooltip:a},o,i,t)};{const s=t.reactiveGeom?"datum.datum":"datum";return Ib(e,a,"tooltip",l=>{const u=wE(l,i,s);if(u)return u;if(l===null)return;let c=Mt("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),We(c))return{value:c};if(Le(c))return Oe(c)?c:c.content==="encoding"?O$(n,o,i,t):{signal:s}})}}function Bbe(e,t,n,{reactiveGeom:r}={}){const i={},o=r?"datum.datum":"datum",a=[];function s(u,c){const d=Rh(c),f=Ea(u)?u:Object.assign(Object.assign({},u),{type:e[d].type}),h=f.title||YH(f,n),m=Ee(h).join(", ");let g;if(Lr(c)){const y=c==="x"?"x2":"y2",v=Bl(e[y]);if(Nr(f.bin)&&v){const w=_e(f,{expr:o}),Z=_e(v,{expr:o}),{format:k,formatType:_}=BI(f);g=sZ(w,Z,k,_,n),i[y]=!0}}if((Lr(c)||c===Ya||c===Ts)&&t&&t.fieldChannel===c&&t.offset==="normalize"){const{format:y,formatType:v}=BI(f);g=LH({fieldOrDatumDef:f,format:y,formatType:v,expr:o,config:n,normalizeStack:!0}).signal}g!=null||(g=wE(f,n,o).signal),a.push({channel:c,key:m,value:g})}FH(e,(u,c)=>{Ze(u)?s(u,c):pE(u)&&s(u.condition,c)});const l={};for(const{channel:u,key:c,value:d}of a)!i[u]&&!l[c]&&(l[c]=d);return l}function O$(e,t,n,{reactiveGeom:r}={}){const i=Bbe(e,t,n,{reactiveGeom:r}),o=Bd(i).map(([a,s])=>`"${a}": ${s}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function Aut(e){const{markDef:t,config:n}=e,r=Mt("aria",t,n);return r===!1?{}:Object.assign(Object.assign(Object.assign({},r?{aria:r}:{}),Uut(e)),$ut(e))}function Uut(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Mt("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in _ot?{}:{ariaRoleDescription:{value:t}}}function $ut(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return Ib(e,o,"description",l=>wE(l,e.config));const a=Mt("description",n,r);if(a!=null)return{description:gn(a)};if(r.aria===!1)return{};const s=Bbe(t,i,r);if(!Dt(s))return{description:{signal:Bd(s).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function yr(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:a}=n;let{defaultRef:s,defaultValue:l}=n;s===void 0&&(l!=null||(l=Mt(e,r,o,{vgChannel:a,ignoreVgConfig:!0})),l!==void 0&&(s=gn(l)));const u=i[e];return Ib(t,u,a!=null?a:e,c=>XH({channel:e,channelDef:c,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s}))}function Kbe(e,t={filled:void 0}){var n,r,i,o;const{markDef:a,encoding:s,config:l}=e,{type:u}=a,c=(n=t.filled)!==null&&n!==void 0?n:Mt("filled",a,l),d=yt(["bar","point","circle","square","geoshape"],u)?"transparent":void 0,f=(i=(r=Mt(c===!0?"color":void 0,a,l,{vgChannel:"fill"}))!==null&&r!==void 0?r:l.mark[c===!0&&"color"])!==null&&i!==void 0?i:d,h=(o=Mt(c===!1?"color":void 0,a,l,{vgChannel:"stroke"}))!==null&&o!==void 0?o:l.mark[c===!1&&"color"],m=c?"fill":"stroke",g=Object.assign(Object.assign({},f?{fill:gn(f)}:{}),h?{stroke:gn(h)}:{});return a.color&&(c?a.fill:a.stroke)&&ve(mge("property",{fill:"fill"in a,stroke:"stroke"in a})),Object.assign(Object.assign(Object.assign(Object.assign({},g),yr("color",e,{vgChannel:m,defaultValue:c?f:h})),yr("fill",e,{defaultValue:s.fill?f:void 0})),yr("stroke",e,{defaultValue:s.stroke?h:void 0}))}function Qut(e){const{encoding:t,mark:n}=e,r=t.order;return!Gf(n)&&Is(r)?Ib(e,r,"zindex",i=>gn(i.value)):{}}function Rw({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,a=t[o],s=n[o];if((o==="xOffset"||o==="yOffset")&&s)return{offsetType:"encoding",offset:XH({channel:o,channelDef:s,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:gn(a),bandPosition:i})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function ii(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:a,stack:s}=t,l=i[e],u=i[su(e)],c=t.scaleName(e),d=t.getScaleComponent(e),{offset:f,offsetType:h}=Rw({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),m=qH({model:t,defaultPos:n,channel:e,scaleName:c,scale:d}),g=!l&&Lr(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:qut({channel:e,channelDef:l,channel2Def:u,markDef:o,config:a,scaleName:c,scale:d,stack:s,offset:f,defaultRef:m,bandPosition:h==="encoding"?0:void 0});return g?{[r||e]:g}:void 0}function qut(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:a}=e;if(rt(n)&&i&&t===i.fieldChannel){if(Ze(n)){let s=n.bandPosition;if(s===void 0&&a.type==="text"&&(t==="radius"||t==="theta")&&(s=.5),s!==void 0)return HI({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:s,offset:o})}return Lp(n,r,{suffix:"end"},{offset:o})}return WH(e)}function qH({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:a}=e;return()=>{const s=Rh(n),l=Kd(n),u=Mt(n,o,a,{vgChannel:l});if(u!==void 0)return bx(n,u);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!yt([ao.LOG,ao.TIME,ao.UTC],c)&&i.domainDefinitelyIncludesZero())return{scale:r,value:0}}if(t==="zeroOrMin")return s==="y"?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const c=e[mo(n)];return Object.assign(Object.assign({},c),{mult:.5})}}}}const ect={left:"x",center:"xc",right:"x2"},tct={top:"y",middle:"yc",bottom:"y2"};function Dbe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Kd(e);const i=e==="x"?"align":"baseline",o=Mt(i,t,n);let a;return Oe(o)?(ve(iat(i)),a=void 0):a=o,e==="x"?ect[a||(r==="top"?"left":"center")]:tct[a||r]}function $I(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Abe(e,t,{defaultPos:n,defaultPos2:r}):ii(e,t,{defaultPos:n})}function Abe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,a=su(e),s=mo(e),l=nct(t,r,a),u=l[s]?Dbe(e,i,o):Kd(e);return Object.assign(Object.assign({},ii(e,t,{defaultPos:n,vgChannel:u})),l)}function nct(e,t,n){const{encoding:r,mark:i,markDef:o,stack:a,config:s}=e,l=Rh(n),u=mo(n),c=Kd(n),d=r[l],f=e.scaleName(l),h=e.getScaleComponent(l),{offset:m}=n in r||n in o?Rw({channel:n,markDef:o,encoding:r,model:e}):Rw({channel:l,markDef:o,encoding:r,model:e});if(!d&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const y=mo(n),v=e.markDef[y];return v!=null?{[y]:{value:v}}:{[c]:{field:e.getName(n)}}}const g=rct({channel:n,channelDef:d,channel2Def:r[n],markDef:o,config:s,scaleName:f,scale:h,stack:a,offset:m,defaultRef:void 0});return g!==void 0?{[c]:g}:mk(n,o)||mk(n,{[n]:zI(n,o,s.style),[u]:zI(u,o,s.style)})||mk(n,s[i])||mk(n,s.mark)||{[c]:qH({model:e,defaultPos:t,channel:n,scaleName:f,scale:h})()}}function rct({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:l,defaultRef:u}){return rt(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?Lp(t,o,{suffix:"start"},{offset:l}):WH({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:l,defaultRef:u})}function mk(e,t){const n=mo(e),r=Kd(e);if(t[r]!==void 0)return{[r]:bx(e,t[r])};if(t[e]!==void 0)return{[r]:bx(e,t[e])};if(t[n]){const i=t[n];if(uh(i))ve($ot(n));else return{[n]:bx(e,i)}}}function Ud(e,t){var n,r;const{config:i,encoding:o,markDef:a}=e,s=a.type,l=su(t),u=mo(t),c=o[t],d=o[l],f=e.getScaleComponent(t),h=f?f.get("type"):void 0,m=a.orient,g=(r=(n=o[u])!==null&&n!==void 0?n:o.size)!==null&&r!==void 0?r:Mt("size",a,i,{vgChannel:u}),y=s==="bar"&&(t==="x"?m==="vertical":m==="horizontal");return Ze(c)&&(un(c.bin)||Nr(c.bin)||c.timeUnit&&!d)&&!(g&&!uh(g))&&!Rr(h)?act({fieldDef:c,fieldDef2:d,channel:t,model:e}):(rt(c)&&Rr(h)||y)&&!d?oct(c,t,e):Abe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function ict(e,t,n,r,i){if(uh(i))if(n){const o=n.get("type");if(o==="band"){let a=`bandwidth('${t}')`;return i.band!==1&&(a=`${i.band} * ${a}`),{signal:`max(0.25, ${a})`}}else i.band!==1&&(ve(lat(o)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Oe(i))return i;if(i)return{value:i}}if(n){const o=n.get("range");if(_f(o)&&At(o.step))return{value:o.step-2}}return{value:AI(r.view,e)-2}}function oct(e,t,n){const{markDef:r,encoding:i,config:o,stack:a}=n,s=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=mo(t),d=su(t),f=iot(t),h=n.scaleName(f),m=s==="horizontal"&&t==="y"||s==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=yr("size",n,{vgChannel:c,defaultRef:gn(r.size)}):ve(fat(r.type)));const y=!!g,v=Dge({channel:t,fieldDef:e,markDef:r,config:o,scaleType:u==null?void 0:u.get("type"),useVlSizeChannel:m});g=g||{[c]:ict(c,h||l,u,o,v)};const w=(u==null?void 0:u.get("type"))==="band"&&uh(v)&&!y?"top":"middle",Z=Dbe(t,r,o,w),k=Z==="xc"||Z==="yc",{offset:_,offsetType:R}=Rw({channel:t,markDef:r,encoding:i,model:n,bandPosition:k?.5:0}),I=WH({channel:t,channelDef:e,markDef:r,config:o,scaleName:l,scale:u,stack:a,offset:_,defaultRef:qH({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:k?R==="encoding"?0:.5:Oe(v)?{signal:`(1-${v})/2`}:uh(v)?(1-v.band)/2:0});if(c)return Object.assign({[Z]:I},g);{const E=Kd(d),X=g[c],Y=_?Object.assign(Object.assign({},X),{offset:_}):X;return{[Z]:I,[E]:ce(I)?[I[0],Object.assign(Object.assign({},I[1]),{offset:Y})]:Object.assign(Object.assign({},I),{offset:Y})}}}function jy(e,t,n,r,i){if(K0e(e))return 0;const o=e==="x"||e==="y2"?-t/2:t/2;if(Oe(n)||Oe(i)||Oe(r)){const a=Du(n),s=Du(i),l=Du(r),u=l?`${l} + `:"",c=a?`(${a} ? -1 : 1) * `:"",d=s?`(${s} + ${o})`:o;return{signal:u+c+d}}else return i=i||0,r+(n?-i-o:+i+o)}function act({fieldDef:e,fieldDef2:t,channel:n,model:r}){var i,o,a;const{config:s,markDef:l,encoding:u}=r,c=r.getScaleComponent(n),d=r.scaleName(n),f=c?c.get("type"):void 0,h=c.get("reverse"),m=Dge({channel:n,fieldDef:e,markDef:l,config:s,scaleType:f}),g=(i=r.component.axes[n])===null||i===void 0?void 0:i[0],y=(o=g==null?void 0:g.get("translate"))!==null&&o!==void 0?o:.5,v=Lr(n)&&(a=Mt("binSpacing",l,s))!==null&&a!==void 0?a:0,w=su(n),Z=Kd(n),k=Kd(w),{offset:_}=Rw({channel:n,markDef:l,encoding:u,model:r,bandPosition:0}),R=Oe(m)?{signal:`(1-${m.signal})/2`}:uh(m)?(1-m.band)/2:.5;if(un(e.bin)||e.timeUnit)return{[k]:z$({fieldDef:e,scaleName:d,bandPosition:R,offset:jy(w,v,h,y,_)}),[Z]:z$({fieldDef:e,scaleName:d,bandPosition:Oe(R)?{signal:`1-${R.signal}`}:1-R,offset:jy(n,v,h,y,_)})};if(Nr(e.bin)){const I=Lp(e,d,{},{offset:jy(w,v,h,y,_)});if(Ze(t))return{[k]:I,[Z]:Lp(t,d,{},{offset:jy(n,v,h,y,_)})};if(Ch(e.bin)&&e.bin.step)return{[k]:I,[Z]:{signal:`scale("${d}", ${_e(e,{expr:"datum"})} + ${e.bin.step})`,offset:jy(n,v,h,y,_)}}}ve(yge(w))}function z$({fieldDef:e,scaleName:t,bandPosition:n,offset:r}){return HI({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r})}const sct=new Set(["aria","width","height"]);function Ta(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?Kbe(e):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},lct(e.markDef,t)),P$(e,"fill",n)),P$(e,"stroke",r)),yr("opacity",e)),yr("fillOpacity",e)),yr("strokeOpacity",e)),yr("strokeWidth",e)),yr("strokeDash",e)),Qut(e)),Jbe(e)),QH(e,"href")),Aut(e))}function P$(e,t,n){const{config:r,mark:i,markDef:o}=e;if(Mt("invalid",o,r)==="hide"&&n&&!Gf(i)){const a=uct(e,{invalid:!0,channels:rE});if(a)return{[t]:[{test:a,value:null},...Ee(n)]}}return n?{[t]:n}:{}}function lct(e,t){return kot.reduce((n,r)=>(!sct.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=gn(e[r])),n),{})}function uct(e,{invalid:t=!1,channels:n}){const r=n.reduce((o,a)=>{const s=e.getScaleComponent(a);if(s){const l=s.get("type"),u=e.vgField(a,{expr:"datum"});u&&Jo(l)&&(o[u]=!0)}return o},{}),i=ge(r);if(i.length>0){const o=t?"||":"&&";return i.map(a=>EH(a,t)).join(` ${o} `)}}function eJ(e){const{config:t,markDef:n}=e;if(Mt("invalid",n,t)){const r=cct(e,{channels:lu});if(r)return{defined:{signal:r}}}return{}}function cct(e,{invalid:t=!1,channels:n}){const r=n.reduce((o,a)=>{var s;const l=e.getScaleComponent(a);if(l){const u=l.get("type"),c=e.vgField(a,{expr:"datum",binSuffix:!((s=e.stack)===null||s===void 0)&&s.impute?"mid":void 0});c&&Jo(u)&&(o[c]=!0)}return o},{}),i=ge(r);if(i.length>0){const o=t?"||":"&&";return i.map(a=>EH(a,t)).join(` ${o} `)}}function j$(e,t){if(t!==void 0)return{[e]:gn(t)}}const nC="voronoi",Ube={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(nC)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Gf(o))return ve(Xot(o)),n;const a={name:e.getName(nC),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},Jbe(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let s=0,l=!1;return n.forEach((u,c)=>{var d;const f=(d=u.name)!==null&&d!==void 0?d:"";f===e.component.mark[0].name?s=c:f.indexOf(nC)>=0&&(l=!0)}),l||n.splice(s+1,0,a),n}},$be={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!HH(e.bind),parse:(e,t,n)=>oye(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,a=t.init&&t.init[0],s=Ube.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{var c,d;const f=_n(`${r}_${l.field}`);n.filter(h=>h.name===f).length||n.unshift(Object.assign(Object.assign({name:f},a?{init:dh(a[u])}:{value:null}),{on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${ke(l.field)}] : null`}]:[],bind:(d=(c=o[l.field])!==null&&c!==void 0?c:o[l.channel])!==null&&d!==void 0?d:o}))}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.filter(u=>u.name===r+$d)[0],a=r+fZ,s=i.items.map(u=>_n(`${r}_${u.field}`)),l=s.map(u=>`${u} !== null`).join(" && ");return s.length&&(o.update=`${l} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},QI="_toggle",Qbe={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+QI,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+$d,r=t.name+QI;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Fg(e)}}, `)+`${r} ? ${n} : null`}},dct={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=We(t.clear)?bf(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if($be.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===_n(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(a=>a.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const a=n.findIndex(s=>s.name===i.signals.data);r(a,"null")}}else{let i=n.findIndex(o=>o.name===t.name+$d);r(i,"null"),Qbe.defined(t)&&(i=n.findIndex(o=>o.name===t.name+QI),r(i,"false"))}return n}},qbe={defined:e=>{const t=e.resolve==="global"&&e.bind&&HH(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Kl;return t&&!n&&ve(Cot),t&&n},parse:(e,t,n)=>{var r;const i=st(n);if(i.select=We(i.select)?{type:i.select,toggle:t.toggle}:Object.assign(Object.assign({},i.select),{toggle:t.toggle}),oye(t,i),Le(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const l of t.events)l.filter=Ee((r=l.filter)!==null&&r!==void 0?r:[]),l.filter.includes(s)||l.filter.push(s)}const o=qR(t.bind)?t.bind.legend:"click",a=We(o)?bf(o,"view"):Ee(o);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=qR(t.bind)&&t.bind.legend,o=a=>s=>{const l=st(s);return l.markname=a,l};for(const a of t.project.items){if(!a.hasLegend)continue;const s=`${_n(a.field)}_legend`,l=`${r}_${s}`;if(n.filter(u=>u.name===l).length===0){const u=i.merge.map(o(`${s}_symbols`)).concat(i.merge.map(o(`${s}_labels`))).concat(i.merge.map(o(`${s}_entries`)));n.unshift(Object.assign(Object.assign({name:l},t.init?{}:{value:null}),{on:[{events:u,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]}))}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(d=>d.name===r+$d),a=r+fZ,s=i.items.filter(d=>d.hasLegend).map(d=>_n(`${r}_${_n(d.field)}_legend`)),l=`${s.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map(d=>({signal:d})),update:l}):s.length>0&&(o.update=l,delete o.value,delete o.on);const u=n.find(d=>d.name===r+QI),c=qR(t.bind)&&t.bind.legend;return u&&(t.events?u.on.push(Object.assign(Object.assign({},u.on[0]),{events:c})):u.on[0].events=c),n}};function fct(e,t,n){var r,i,o,a;const s=(r=e.fieldDef(t))===null||r===void 0?void 0:r.field;for(const l of di((i=e.component.selection)!==null&&i!==void 0?i:{})){const u=(o=l.project.hasField[s])!==null&&o!==void 0?o:l.project.hasChannel[t];if(u&&qbe.defined(l)){const c=(a=n.get("selections"))!==null&&a!==void 0?a:[];c.push(l.name),n.set("selections",c,!1),u.hasLegend=!0}}}const eye="_translate_anchor",tye="_translate_delta",pct={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Ad.defined(t),o=r+eye,{x:a,y:s}=t.project.hasChannel;let l=bf(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+R0,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?`, extent_x: ${i?xN(e,Vn):`slice(${a.signals.visual})`}`:"")+(s!==void 0?`, extent_y: ${i?xN(e,Xr):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:r+tye,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),a!==void 0&&H$(e,t,a,"width",n),s!==void 0&&H$(e,t,s,"height",n),n}};function H$(e,t,n,r,i){var o,a;const s=t.name,l=s+eye,u=s+tye,c=n.channel,d=Ad.defined(t),f=i.filter(I=>I.name===n.signals[d?"data":"visual"])[0],h=e.getSizeSignalRef(r).signal,m=e.getScaleComponent(c),g=m.get("type"),y=m.get("reverse"),v=d?c===Vn?y?"":"-":y?"-":"":"",w=`${l}.extent_${c}`,Z=`${v}${u}.${c} / ${d?`${h}`:`span(${w})`}`,k=d?g==="log"?"panLog":g==="symlog"?"panSymlog":g==="pow"?"panPow":"panLinear":"panLinear",_=d?g==="pow"?`, ${(o=m.get("exponent"))!==null&&o!==void 0?o:1}`:g==="symlog"?`, ${(a=m.get("constant"))!==null&&a!==void 0?a:1}`:"":"",R=`${k}(${w}, ${Z}${_})`;f.on.push({events:{signal:u},update:d?R:`clampRange(${R}, 0, ${h})`})}const nye="_zoom_anchor",rye="_zoom_delta",hct={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Ad.defined(t),o=r+rye,{x:a,y:s}=t.project.hasChannel,l=ke(e.scaleName(Vn)),u=ke(e.scaleName(Xr));let c=bf(t.zoom,"scope");return i||(c=c.map(d=>(d.markname=r+R0,d))),n.push({name:r+nye,on:[{events:c,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(d=>!!d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&J$(e,t,a,"width",n),s!==void 0&&J$(e,t,s,"height",n),n}};function J$(e,t,n,r,i){var o,a;const s=t.name,l=n.channel,u=Ad.defined(t),c=i.filter(k=>k.name===n.signals[u?"data":"visual"])[0],d=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(l),h=f.get("type"),m=u?xN(e,l):c.name,g=s+rye,y=`${s}${nye}.${l}`,v=u?h==="log"?"zoomLog":h==="symlog"?"zoomSymlog":h==="pow"?"zoomPow":"zoomLinear":"zoomLinear",w=u?h==="pow"?`, ${(o=f.get("exponent"))!==null&&o!==void 0?o:1}`:h==="symlog"?`, ${(a=f.get("constant"))!==null&&a!==void 0?a:1}`:"":"",Z=`${v}(${m}, ${y}, ${g}${w})`;c.on.push({events:{signal:g},update:u?Z:`clampRange(${Z}, 0, ${d})`})}const fh="_store",$d="_tuple",mct="_modify",iye="vlSelectionResolve",ZE=[Dut,But,Hut,Qbe,$be,Ad,qbe,dct,pct,hct,Ube];function gct(e){let t=e.parent;for(;t&&!xs(t);)t=t.parent;return t}function Fg(e,{escape:t}={escape:!0}){let n=t?ke(e.name):e.name;const r=gct(e);if(r){const{facet:i}=r;for(const o of ma)i[o]&&(n+=` + '__facet_${o}_' + (facet[${ke(r.vgField(o))}])`)}return n}function tJ(e){var t;return di((t=e.component.selection)!==null&&t!==void 0?t:{}).reduce((n,r)=>n||r.project.hasSelectionId,!1)}function oye(e,t){(We(t.select)||!t.select.on)&&delete e.events,(We(t.select)||!t.select.clear)&&delete e.clear,(We(t.select)||!t.select.toggle)&&delete e.toggle}function SN(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...SN(e.object)),t.push(...SN(e.property))),t)}function aye(e){return e.object.type==="MemberExpression"?aye(e.object):e.object.name==="datum"}function sye(e){const t=y4(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&aye(r)&&n.add(SN(r).slice(1).join("."))}),n}class Wb extends $t{clone(){return new Wb(null,this.model,st(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=qI(this.model,this.filter,this),this._dependentFields=sye(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function bct(e,t){var n;const r={},i=e.config.selection;if(!t||!t.length)return r;for(const o of t){const a=_n(o.name),s=o.select,l=We(s)?s:s.type,u=Le(s)?st(s):{type:l},c=i[l];for(const f in c)f==="fields"||f==="encodings"||(f==="mark"&&(u[f]=Object.assign(Object.assign({},c[f]),u[f])),(u[f]===void 0||u[f]===!0)&&(u[f]=(n=c[f])!==null&&n!==void 0?n:u[f]));const d=r[a]=Object.assign(Object.assign({},u),{name:a,type:l,init:o.value,bind:o.bind,events:We(u.on)?bf(u.on,"scope"):Ee(st(u.on))});for(const f of ZE)f.defined(d)&&f.parse&&f.parse(e,d,o)}return r}function lye(e,t,n,r="datum"){const i=We(t)?t:t.param,o=_n(i),a=ke(o+fh);let s;try{s=e.getSelectionComponent(o,i)}catch(f){return`!!${o}`}if(s.project.timeUnit){const f=n!=null?n:e.component.data.raw,h=s.project.timeUnit.clone();f.parent?h.insertAsParentOf(f):f.parent=h}const l=s.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=s.resolve==="global"?")":`, ${ke(s.resolve)})`,c=`${l}${a}, ${r}${u}`,d=`length(data(${a}))`;return t.empty===!1?`${d} && ${c}`:`!${d} || ${c}`}function uye(e,t,n){const r=_n(t),i=n.encoding;let o=n.field,a;try{a=e.getSelectionComponent(r,t)}catch(s){return r}if(!i&&!o)o=a.project.items[0].field,a.project.items.length>1&&ve(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ke(o)}.`);else if(i&&!o){const s=a.project.items.filter(l=>l.channel===i);!s.length||s.length>1?(o=a.project.items[0].field,ve((s.length?"Multiple ":"No ")+`matching ${ke(i)} encoding found for selection ${ke(n.param)}. Using "field": ${ke(o)}.`)):o=s[0].field}return`${a.name}[${ke(Ia(o))}]`}function yct(e,t){var n;for(const[r,i]of Bd((n=e.component.selection)!==null&&n!==void 0?n:{})){const o=e.getName(`lookup_${r}`);e.component.data.outputNodes[o]=i.materialized=new Ci(new Wb(t,e,{param:r}),o,on.Lookup,e.component.data.outputNodeRefCounts)}}function qI(e,t,n){return gx(t,r=>We(r)?r:Dat(r)?lye(e,r,n):Gge(r))}var gk=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function vct(e,t){if(e)return ce(e)&&!jc(e)?e.map(n=>YH(n,t)).join(", "):e}function rC(e,t,n,r){var i,o,a,s,l;(i=e.encode)!==null&&i!==void 0||(e.encode={}),(o=(s=e.encode)[t])!==null&&o!==void 0||(s[t]={}),(a=(l=e.encode[t]).update)!==null&&a!==void 0||(l.update={}),e.encode[t].update[n]=r}function Fv(e,t,n,r={header:!1}){var i,o;const a=e.combine(),{disable:s,orient:l,scale:u,labelExpr:c,title:d,zindex:f}=a,h=gk(a,["disable","orient","scale","labelExpr","title","zindex"]);if(!s){for(const m in h){const g=$st[m],y=h[m];if(g&&g!==t&&g!=="both")delete h[m];else if(dZ(y)){const{condition:v}=y,w=gk(y,["condition"]),Z=Ee(v),k=Z$[m];if(k){const{vgProp:_,part:R}=k,I=[...Z.map(E=>{const{test:X}=E,Y=gk(E,["test"]);return Object.assign({test:qI(null,X)},Y)}),w];rC(h,R,_,I),delete h[m]}else if(k===null){const _={signal:Z.map(R=>{const{test:I}=R,E=gk(R,["test"]);return`${qI(null,I)} ? ${s$(E)} : `}).join("")+s$(w)};h[m]=_}}else if(Oe(y)){const v=Z$[m];if(v){const{vgProp:w,part:Z}=v;rC(h,Z,w,y),delete h[m]}}yt(["labelAlign","labelBaseline"],m)&&h[m]===null&&delete h[m]}if(t==="grid"){if(!h.grid)return;if(h.encode){const{grid:m}=h.encode;h.encode=Object.assign({},m?{grid:m}:{}),Dt(h.encode)&&delete h.encode}return Object.assign(Object.assign({scale:u,orient:l},h),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:nr(f,0)})}else{if(!r.header&&e.mainExtracted)return;if(c!==void 0){let g=c;!((o=(i=h.encode)===null||i===void 0?void 0:i.labels)===null||o===void 0)&&o.update&&Oe(h.encode.labels.update.text)&&(g=oh(c,"datum.label",h.encode.labels.update.text.signal)),rC(h,"labels","text",{signal:g})}if(h.labelAlign===null&&delete h.labelAlign,h.encode){for(const g of rbe)e.hasAxisPart(g)||delete h.encode[g];Dt(h.encode)&&delete h.encode}const m=vct(d,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:u,orient:l,grid:!1},m?{title:m}:{}),h),n.aria===!1?{aria:!1}:{}),{zindex:nr(f,0)})}}}function cye(e){const{axes:t}=e.component,n=[];for(const r of lu)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",a=e.getSizeSignalRef(o).signal;o!==a&&n.push({name:o,update:a})}}return n}function xct(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>Fv(i,"grid",t)),...r.map(i=>Fv(i,"grid",t)),...n.map(i=>Fv(i,"main",t)),...r.map(i=>Fv(i,"main",t))].filter(i=>i)}function B$(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",a=t[n==="x"?"axisBottom":"axisLeft"]||{},s=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...ge(a),...ge(s)]),u={};for(const c of l.values())u[c]={signal:`${r.signal} === "${o}" ? ${Du(a[c])} : ${Du(s[c])}`};return u}return t[i]})])}function wct(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:Xge(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",a=Oe(n)?"axisOrient":`axis${eZ(n)}`,s=[...i,...i.map(u=>o+u.substr(4))],l=["axis",a,o];return{vlOnlyAxisConfig:B$(s,r,e,n),vgAxisConfig:B$(l,r,e,n),axisConfigStyle:Zct([...l,...s],r)}}function Zct(e,t){var n;const r=[{}];for(const i of e){let o=(n=t[i])===null||n===void 0?void 0:n.style;if(o){o=Ee(o);for(const a of o)r.push(t.style[a])}}return Object.assign.apply(null,r)}function kN(e,t,n,r={}){var i;const o=lge(e,n,t);if(o!==void 0)return{configFrom:"style",configValue:o};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((i=r[a])===null||i===void 0?void 0:i[e])!==void 0)return{configFrom:a,configValue:r[a][e]};return{}}const K$={scale:({model:e,channel:t})=>e.scaleName(t),format:({fieldOrDatumDef:e,config:t,axis:n})=>{const{format:r,formatType:i}=n;return Pge(e,e.type,r,i,t,!0)},formatType:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return jge(r,t,n)},grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>{var r;return(r=t.grid)!==null&&r!==void 0?r:Sct(n,e)},gridScale:({model:e,channel:t})=>kct(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||fye(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||dye(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>{var r;return(r=e.labelFlush)!==null&&r!==void 0?r:Gct(t.type,n)},labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{var r;return(r=e.labelOverlap)!==null&&r!==void 0?r:Ict(t.type,n,Ze(t)&&!!t.timeUnit,Ze(t)?t.sort:void 0)},orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{var o;const a=e==="x"?"width":e==="y"?"height":void 0,s=a?t.getSizeSignalRef(a):void 0;return(o=n.tickCount)!==null&&o!==void 0?o:Ect({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=pye(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",a=t.fieldDef(o);return cge(i?[w$(i)]:[],Ze(a)?[w$(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Xct(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>{var r;return(r=e.zindex)!==null&&r!==void 0?r:Lct(n,t)}};function Sct(e,t){return!Rr(e)&&Ze(t)&&!un(t==null?void 0:t.bin)&&!Nr(t==null?void 0:t.bin)}function kct(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function _ct(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return Oe(o)?o:Ew(o);{const{configValue:a}=kN("labelAngle",r,t==null?void 0:t.style,i);return a!==void 0?Ew(a):n===Vn&&yt([kH,SH],e.type)&&!(Ze(e)&&e.timeUnit)?270:void 0}}function _N(e){return`(((${e.signal} % 360) + 360) % 360)`}function dye(e,t,n,r){if(e!==void 0)if(n==="x"){if(Oe(e)){const i=_N(e),o=Oe(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Oe(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Oe(e)){const i=_N(e),o=Oe(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Oe(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function fye(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(Oe(e)){const a=_N(e),s=Oe(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${a} + 90)`:a} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${a} && ${a} < ${180+i}) === ${s} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Oe(t)){const a=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${a} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function Gct(e,t){if(t==="x"&&yt(["quantitative","temporal"],e))return!0}function Ict(e,t,n,r){if(n&&!Le(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Wct(e){return e==="x"?"bottom":"left"}function Ect({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Rr(t)&&t!=="log"){if(Ze(e)){if(un(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&yt(["month","hours","day","quarter"],(i=mi(e.timeUnit))===null||i===void 0?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function pye(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;if(o&&a)return dge(o,a);if(o)return o;if(a)return a;if(o!==void 0)return o;if(a!==void 0)return a}function Xct(e,t){const n=e.values;if(ce(n))return nbe(t,n);if(Oe(n))return n}function Lct(e,t){return e==="rect"&&JI(t)?1:0}class Mg extends $t{clone(){return new Mg(null,st(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=sye(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(Yh(r)&&Bge(r.sort)){const{field:o,timeUnit:a}=r,s=r.sort,l=s.map((u,c)=>`${Gge({field:o,timeUnit:a,equal:u})} ? ${c} : `).join("")+s.length;t=new Mg(t,{calculate:l,as:Og(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${St(this.transform)}`}}function Og(e,t,n){return _e(e,Object.assign({prefix:t,suffix:"sort_index"},n!=null?n:{}))}function SE(e,t){return yt(["top","bottom"],t)?"column":yt(["left","right"],t)||e==="row"?"row":"column"}function zg(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return nr((t||{})[e],i[e],n.header[e])}function kE(e,t,n,r){const i={};for(const o of e){const a=zg(o,t||{},n,r);a!==void 0&&(i[o]=a)}return i}const nJ=["row","column"],rJ=["header","footer"];function Rct(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=kE(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=SE(t,s),u=Ew(a);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},t==="row"?{orient:"left"}:{}),{style:"guide-title"}),mye(u,l)),hye(l,u,o)),gye(r,i,t,xlt,xbe))}}function hye(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=fye(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function mye(e,t){const n=dye(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Cct(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of rJ)if(n[i])for(const o of n[i]){const a=Yct(e,t,i,n,o);a!=null&&r.push(a)}return r}function Vct(e,t){var n;const{sort:r}=e;return Xl(r)?{field:_e(r,{expr:"datum"}),order:(n=r.order)!==null&&n!==void 0?n:"ascending"}:ce(r)?{field:Og(e,t,{expr:"datum"}),order:"ascending"}:{field:_e(e,{expr:"datum"}),order:r!=null?r:"ascending"}}function GN(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:l}=kE(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=LH({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=SE(t,s);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:l?oh(oh(l,"datum.label",u),"datum.value",_e(e,{expr:"parent"})):u}},t==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),mye(o,c)),hye(c,o,a)),gye(n,e,t,wlt,wbe))}function Yct(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:a}=r,s=e.config?e.config:void 0;if(a&&i.labels){const{labelOrient:d}=kE(["labelOrient"],a.header,s,t);(t==="row"&&!yt(["top","bottom"],d)||t==="column"&&!yt(["left","right"],d))&&(o=GN(a,t,s))}const l=xs(e)&&!lZ(e.facet),u=i.axes,c=(u==null?void 0:u.length)>0;if(o||c){const d=t==="row"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`},r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Vct(a,t)}:{}),c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{}),o?{title:o}:{}),i.sizeSignal?{encode:{update:{[d]:i.sizeSignal}}}:{}),c?{axes:u}:{})}}return null}const Tct={column:{start:0,end:1},row:{start:1,end:0}};function Nct(e,t){return Tct[t][e]}function Fct(e,t){const n={};for(const r of ma){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:a}=kE(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),s=SE(r,a),l=Nct(o,s);l!==void 0&&(n[s]=l)}}return Dt(n)?void 0:n}function gye(e,t,n,r,i){const o={};for(const a of r){if(!i[a])continue;const s=zg(a,t==null?void 0:t.header,e,n);s!==void 0&&(o[i[a]]=s)}return o}function iJ(e){return[...bk(e,"width"),...bk(e,"height"),...bk(e,"childWidth"),...bk(e,"childHeight")]}function bk(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const a=o.get("type"),s=o.get("range");if(Rr(a)&&_f(s)){const l=e.scaleName(n);return xs(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[D$(l,s)]:[D$(l,s),{name:i,update:bye(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),a=o?"containerSize()[0]":"containerSize()[1]",s=gN(e.config.view,o?"width":"height"),l=`isFinite(${a}) ? ${a} : ${s}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function D$(e,t){const n=`${e}_step`;return Oe(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function bye(e,t,n){const r=t.get("type"),i=t.get("padding"),o=nr(t.get("paddingOuter"),i);let a=t.get("paddingInner");return a=r==="band"?a!==void 0?a:i:1,`bandspace(${n}, ${Du(a)}, ${Du(o)}) * ${e}_step`}function yye(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function vye(e,t){return ge(e).reduce((n,r)=>{const i=e[r];return Object.assign(Object.assign({},n),Ib(t,i,r,o=>gn(o.value)))},{})}function xye(e,t){if(xs(t))return e==="theta"?"independent":"shared";if(Lb(t))return"shared";if(dJ(t))return Lr(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function oJ(e,t){const n=e.scale[t],r=Lr(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&ve(bat(t)),"independent"):e[r][t]||"shared"}const Mct=Object.assign(Object.assign({},klt),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),wye=ge(Mct);class Oct extends xc{}const A$={symbols:zct,gradient:Pct,labels:jct,entries:Hct};function zct(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){var a,s,l,u,c,d,f,h;if(o!=="symbol")return;const{markDef:m,encoding:g,config:y,mark:v}=n,w=m.filled&&v!=="trail";let Z=Object.assign(Object.assign({},Iot({},n,xst)),Kbe(n,{filled:w}));const k=(a=i.get("symbolOpacity"))!==null&&a!==void 0?a:y.legend.symbolOpacity,_=(s=i.get("symbolFillColor"))!==null&&s!==void 0?s:y.legend.symbolFillColor,R=(l=i.get("symbolStrokeColor"))!==null&&l!==void 0?l:y.legend.symbolStrokeColor,I=k===void 0?(u=Zye(g.opacity))!==null&&u!==void 0?u:m.opacity:void 0;if(Z.fill){if(r==="fill"||w&&r===po)delete Z.fill;else if(Z.fill.field)_?delete Z.fill:(Z.fill=gn((c=y.legend.symbolBaseFillColor)!==null&&c!==void 0?c:"black"),Z.fillOpacity=gn(I!=null?I:1));else if(ce(Z.fill)){const E=(h=(f=IN((d=g.fill)!==null&&d!==void 0?d:g.color))!==null&&f!==void 0?f:m.fill)!==null&&h!==void 0?h:w&&m.color;E&&(Z.fill=gn(E))}}if(Z.stroke){if(r==="stroke"||!w&&r===po)delete Z.stroke;else if(Z.stroke.field||R)delete Z.stroke;else if(ce(Z.stroke)){const E=nr(IN(g.stroke||g.color),m.stroke,w?m.color:void 0);E&&(Z.stroke={value:E})}}if(r!==yc){const E=Ze(t)&&kye(n,i,t);E?Z.opacity=[Object.assign({test:E},gn(I!=null?I:1)),gn(y.legend.unselectedOpacity)]:I&&(Z.opacity=gn(I))}return Z=Object.assign(Object.assign({},Z),e),Dt(Z)?void 0:Z}function Pct(e,{model:t,legendType:n,legendCmpt:r}){var i;if(n!=="gradient")return;const{config:o,markDef:a,encoding:s}=t;let l={};const u=((i=r.get("gradientOpacity"))!==null&&i!==void 0?i:o.legend.gradientOpacity)===void 0?Zye(s.opacity)||a.opacity:void 0;return u&&(l.opacity=gn(u)),l=Object.assign(Object.assign({},l),e),Dt(l)?void 0:l}function jct(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},a=n.config,s=Ze(t)?kye(n,i,t):void 0,l=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=o;let d;ch(c)?d=cs({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:a}):u===void 0&&c===void 0&&a.customFormatTypes&&(t.type==="quantitative"&&a.numberFormatType?d=cs({fieldOrDatumDef:t,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a}):t.type==="temporal"&&a.timeFormatType&&Ze(t)&&t.timeUnit===void 0&&(d=cs({fieldOrDatumDef:t,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})));const f=Object.assign(Object.assign(Object.assign({},l?{opacity:l}:{}),d?{text:d}:{}),e);return Dt(f)?void 0:f}function Hct(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?Object.assign(Object.assign({},e),{fill:{value:"transparent"}}):e}function Zye(e){return Sye(e,(t,n)=>Math.max(t,n.value))}function IN(e){return Sye(e,(t,n)=>nr(t,n.value))}function Sye(e,t){if(Mst(e))return Ee(e.condition).reduce(t,e.value);if(Is(e))return e.value}function kye(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=ke(n.field);return r.map(o=>`(!length(data(${ke(_n(o)+fh)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const U$={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return Pge(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return jge(r,t,n)},gradientLength:e=>{var t,n;const{legend:r,legendConfig:i}=e;return(n=(t=r.gradientLength)!==null&&t!==void 0?t:i.gradientLength)!==null&&n!==void 0?n:$ct(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>{var r,i;return(i=(r=e.labelOverlap)!==null&&r!==void 0?r:t.labelOverlap)!==null&&i!==void 0?i:Qct(n)},symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>{var i;return(i=e.symbolType)!==null&&i!==void 0?i:Bct(t.type,n,r.shape,t.shape)},title:({fieldOrDatumDef:e,config:t})=>L0(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(X0(n)&&us(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Jct(t,e)};function Jct(e,t){const n=e.values;if(ce(n))return nbe(t,n);if(Oe(n))return n}function Bct(e,t,n,r){var i;if(t!=="shape"){const o=(i=IN(n))!==null&&i!==void 0?i:r;if(o)return o}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Kct(e){const{legend:t}=e;return nr(t.type,Dct(e))}function Dct({channel:e,timeUnit:t,scaleType:n}){if(X0(e)){if(yt(["quarter","month","day"],t))return"symbol";if(us(n))return"gradient"}return"symbol"}function Act({legendConfig:e,legendType:t,orient:n,legend:r}){var i,o;return(o=(i=r.direction)!==null&&i!==void 0?i:e[t?"gradientDirection":"symbolDirection"])!==null&&o!==void 0?o:Uct(n,t)}function Uct(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function $ct({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:l}=e;if(us(i))return n==="horizontal"?r==="top"||r==="bottom"?$$(t,"width",a,o):a:$$(t,"height",l,s)}function $$(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Qct(e){if(yt(["quantile","threshold","log","symlog"],e))return"greedy"}function _ye(e){const t=$n(e)?qct(e):rdt(e);return e.component.legends=t,t}function qct(e){const{encoding:t}=e,n={};for(const r of[po,...Sbe]){const i=lr(t[r]);!i||!e.getScaleComponent(r)||r===ho&&Ze(i)&&i.type===Gb||(n[r]=ndt(e,r))}return n}function edt(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function tdt(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function ndt(e,t){var n,r,i;let o=e.legend(t);const{markDef:a,encoding:s,config:l}=e,u=l.legend,c=new Oct({},edt(e,t));fct(e,t,c);const d=o!==void 0?!o:u.disable;if(c.set("disable",d,o!==void 0),d)return c;o=o||{};const f=e.getScaleComponent(t).get("type"),h=lr(s[t]),m=Ze(h)?(n=mi(h.timeUnit))===null||n===void 0?void 0:n.unit:void 0,g=o.orient||l.legend.orient||"right",y=Kct({legend:o,channel:t,timeUnit:m,scaleType:f}),v=Act({legend:o,legendType:y,orient:g,legendConfig:u}),w={legend:o,channel:t,model:e,markDef:a,encoding:s,fieldOrDatumDef:h,legendConfig:u,config:l,scaleType:f,orient:g,legendType:y,direction:v};for(const I of wye){if(y==="gradient"&&I.startsWith("symbol")||y==="symbol"&&I.startsWith("gradient"))continue;const E=I in U$?U$[I](w):o[I];if(E!==void 0){const X=tdt(E,I,o,e.fieldDef(t));(X||l.legend[I]===void 0)&&c.set(I,E,X)}}const Z=(r=o==null?void 0:o.encoding)!==null&&r!==void 0?r:{},k=c.get("selections"),_={},R={fieldOrDatumDef:h,model:e,channel:t,legendCmpt:c,legendType:y};for(const I of["labels","legend","title","symbols","gradient","entries"]){const E=vye((i=Z[I])!==null&&i!==void 0?i:{},e),X=I in A$?A$[I](E,R):E;X!==void 0&&!Dt(X)&&(_[I]=Object.assign(Object.assign(Object.assign({},k!=null&&k.length&&Ze(h)?{name:`${_n(h.field)}_legend_${I}`}:{}),k!=null&&k.length?{interactive:!!k}:{}),{update:X}))}return Dt(_)||c.set("encode",_,!!(o!=null&&o.encoding)),c}function rdt(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){_ye(r);for(const i of ge(r.component.legends))n.legend[i]=oJ(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=Gye(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of ge(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function Gye(e,t){var n,r,i,o;if(!e)return t.clone();const a=e.getWithExplicit("orient"),s=t.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;let l=!1;for(const u of wye){const c=Dd(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(d,f)=>{switch(u){case"symbolType":return idt(d,f);case"title":return fge(d,f);case"type":return l=!0,Ba("symbol")}return xE(d,f,u,"legend")});e.setWithExplicit(u,c)}return l&&(!((r=(n=e.implicit)===null||n===void 0?void 0:n.encode)===null||r===void 0)&&r.gradient&&OI(e.implicit,["encode","gradient"]),!((o=(i=e.explicit)===null||i===void 0?void 0:i.encode)===null||o===void 0)&&o.gradient&&OI(e.explicit,["encode","gradient"])),e}function idt(e,t){return t.value==="circle"?t:e}var odt=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function adt(e,t,n,r){var i,o,a,s,l;(i=e.encode)!==null&&i!==void 0||(e.encode={}),(o=(s=e.encode)[t])!==null&&o!==void 0||(s[t]={}),(a=(l=e.encode[t]).update)!==null&&a!==void 0||(l.update={}),e.encode[t].update[n]=r}function Iye(e){const t=e.component.legends,n={};for(const r of ge(t)){const i=e.getScaleComponent(r),o=sn(i.get("domains"));if(n[o])for(const a of n[o])Gye(a,t[r])||n[o].push(t[r]);else n[o]=[t[r].clone()]}return di(n).flat().map(r=>sdt(r,e.config)).filter(r=>r!==void 0)}function sdt(e,t){var n,r,i;const o=e.combine(),{disable:a,labelExpr:s,selections:l}=o,u=odt(o,["disable","labelExpr","selections"]);if(!a){if(t.aria===!1&&u.aria==null&&(u.aria=!1),!((n=u.encode)===null||n===void 0)&&n.symbols){const c=u.encode.symbols.update;c.fill&&c.fill.value!=="transparent"&&!c.stroke&&!u.stroke&&(c.stroke={value:"transparent"});for(const d of Sbe)u[d]&&delete c[d]}if(u.title||delete u.title,s!==void 0){let c=s;!((i=(r=u.encode)===null||r===void 0?void 0:r.labels)===null||i===void 0)&&i.update&&Oe(u.encode.labels.update.text)&&(c=oh(s,"datum.label",u.encode.labels.update.text.signal)),adt(u,"labels","text",{signal:c})}return u}}function ldt(e){return Lb(e)||dJ(e)?udt(e):Wye(e)}function udt(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Wye(e))}function Wye(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(a=>a.signal).join(", ")}]`},o=t.data.reduce((a,s)=>{const l=Oe(s)?s.signal:`data('${e.lookupDataSource(s)}')`;return yt(a,l)||a.push(l),a},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]}},n)]}else return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),n)]}const cdt=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Eye extends xc{constructor(t,n,r,i){super(Object.assign({},n),{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function Xye(e){e.component.projection=$n(e)?ddt(e):hdt(e)}function ddt(e){var t;if(e.hasProjection){const n=Ki(e.specifiedProjection),r=!(n&&(n.scale!=null||n.translate!=null)),i=r?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,o=r?fdt(e):void 0,a=new Eye(e.projectionName(!0),Object.assign(Object.assign({},(t=Ki(e.config.projection))!==null&&t!==void 0?t:{}),n!=null?n:{}),i,o);return a.get("type")||a.set("type","equalEarth",!1),a}}function fdt(e){const t=[],{encoding:n}=e;for(const r of[[iu,ru],[Wa,Ns]])(lr(n[r[0]])||lr(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ho)&&e.typedFieldDef(ho).type===Gb&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(on.Main)),t}function pdt(e,t){const n=U4(cdt,r=>!!(!ze(e.explicit,r)&&!ze(t.explicit,r)||ze(e.explicit,r)&&ze(t.explicit,r)&&gl(e.get(r),t.get(r))));if(gl(e.size,t.size)){if(n)return e;if(gl(e.explicit,{}))return t;if(gl(t.explicit,{}))return e}return null}function hdt(e){if(e.children.length===0)return;let t;for(const r of e.children)Xye(r);const n=U4(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=pdt(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new Eye(r,t.specifiedProjection,t.size,st(t.data));for(const o of e.children){const a=o.component.projection;a&&(a.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(a.get("name"),r),a.merged=!0)}return i}}var mdt=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function gdt(e,t,n,r){var i,o;if(cZ(t,n)){const a=$n(e)?(o=(i=e.axis(n))!==null&&i!==void 0?i:e.legend(n))!==null&&o!==void 0?o:{}:{},s=_e(t,{expr:"datum"}),l=_e(t,{expr:"datum",binSuffix:"end"});return{formulaAs:_e(t,{binSuffix:"range",forAs:!0}),formula:sZ(s,l,a.format,a.formatType,r)}}return{}}function Lye(e,t){return`${ige(e)}_${t}`}function bdt(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function aJ(e,t,n){var r;const i=(r=hE(n,void 0))!==null&&r!==void 0?r:{},o=Lye(i,t);return e.getName(`${o}_bins`)}function ydt(e){return"as"in e}function Q$(e,t,n){let r,i;ydt(e)?r=We(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[_e(e,{forAs:!0}),_e(e,{binSuffix:"end",forAs:!0})];const o=Object.assign({},hE(t,void 0)),a=Lye(o,e.field),{signal:s,extentSignal:l}=bdt(n,a);if(iE(o.extent)){const c=o.extent;i=uye(n,c.param,c),delete o.extent}const u=Object.assign(Object.assign(Object.assign({bin:o,field:e.field,as:[r]},s?{signal:s}:{}),l?{extentSignal:l}:{}),i?{span:i}:{});return{key:a,binComponent:u}}class Rl extends $t{clone(){return new Rl(null,st(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,a)=>{if(Ea(o)&&un(o.bin)){const{key:s,binComponent:l}=Q$(o,o.bin,n);i[s]=Object.assign(Object.assign(Object.assign({},l),i[s]),gdt(n,o,a,n.config))}return i},{});return Dt(r)?null:new Rl(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:o}=Q$(n,n.bin,r);return new Rl(t,{[i]:o})}merge(t,n){for(const r of ge(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=bl([...this.bins[r].as,...t.bins[r].as],St)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(di(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(di(this.bins).map(t=>t.field))}hash(){return`Bin ${St(this.bins)}`}assemble(){return di(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,o=t.bin,{extent:a}=o,s=mdt(o,["extent"]),l=Object.assign(Object.assign(Object.assign({type:"bin",field:Ia(t.field),as:r,signal:t.signal},iE(a)?{extent:null}:{extent:a}),t.span?{span:{signal:`span(${t.span})`}}:{}),s);!a&&t.extentSignal&&(n.push({type:"extent",field:Ia(t.field),signal:t.extentSignal}),l.extent={signal:t.extentSignal}),n.push(l);for(const u of i)for(let c=0;c<2;c++)n.push({type:"formula",expr:_e({field:r[c]},{expr:"datum"}),as:u[c]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function vdt(e,t,n,r){var i;const o=$n(r)?r.encoding[su(t)]:void 0;if(Ea(n)&&$n(r)&&Age(n,o,r.markDef,r.config))e.add(_e(n,{})),e.add(_e(n,{suffix:"end"})),n.bin&&cZ(n,t)&&e.add(_e(n,{binSuffix:"range"}));else if($it(t)){const a=Uit(t);e.add(r.getName(a))}else e.add(_e(n));return Yh(n)&&lst((i=n.scale)===null||i===void 0?void 0:i.range)&&e.add(n.scale.range.field),e}function xdt(e,t){var n;for(const r of ge(t)){const i=t[r];for(const o of ge(i))r in e?e[r][o]=new Set([...(n=e[r][o])!==null&&n!==void 0?n:[],...i[o]]):e[r]={[o]:i[o]}}}class vs extends $t{clone(){return new vs(null,new Set(this.dimensions),st(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(a=>{a.aggregate&&(r=!0)});const i={},o=new Set;return!r||(n.forEachFieldDef((a,s)=>{var l,u,c,d;const{aggregate:f,field:h}=a;if(f)if(f==="count")(l=i["*"])!==null&&l!==void 0||(i["*"]={}),i["*"].count=new Set([_e(a,{forAs:!0})]);else{if(ac(f)||kf(f)){const m=ac(f)?"argmin":"argmax",g=f[m];(u=i[g])!==null&&u!==void 0||(i[g]={}),i[g][m]=new Set([_e({op:m,field:g},{forAs:!0})])}else(c=i[h])!==null&&c!==void 0||(i[h]={}),i[h][f]=new Set([_e(a,{forAs:!0})]);Sf(s)&&n.scaleDomain(s)==="unaggregated"&&((d=i[h])!==null&&d!==void 0||(i[h]={}),i[h].min=new Set([_e({field:h,aggregate:"min"},{forAs:!0})]),i[h].max=new Set([_e({field:h,aggregate:"max"},{forAs:!0})]))}else vdt(o,s,a,n)}),o.size+ge(i).length===0)?null:new vs(t,o,i)}static makeFromTransform(t,n){var r,i,o;const a=new Set,s={};for(const l of n.aggregate){const{op:u,field:c,as:d}=l;u&&(u==="count"?((r=s["*"])!==null&&r!==void 0||(s["*"]={}),s["*"].count=new Set([d||_e(l,{forAs:!0})])):((i=s[c])!==null&&i!==void 0||(s[c]={}),s[c][u]=new Set([d||_e(l,{forAs:!0})])))}for(const l of(o=n.groupby)!==null&&o!==void 0?o:[])a.add(l);return a.size+ge(s).length===0?null:new vs(t,a,s)}merge(t){return O0e(this.dimensions,t.dimensions)?(xdt(this.measures,t.measures),!0):(Cat("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ge(this.measures)])}producedFields(){const t=new Set;for(const n of ge(this.measures))for(const r of ge(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${St({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const i of ge(this.measures))for(const o of ge(this.measures[i]))for(const a of this.measures[i][o])r.push(a),t.push(o),n.push(i==="*"?null:Ia(i));return{type:"aggregate",groupby:[...this.dimensions].map(Ia),ops:t,fields:n,as:r}}}class Eb extends $t{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const o of ma){const a=n.facet[o];if(a){const{bin:s,sort:l}=a;this[o]=Object.assign({name:n.getName(`${o}_domain`),fields:[_e(a),...un(s)?[_e(a,{binSuffix:"end"})]:[]]},Xl(l)?{sortField:l}:ce(l)?{sortIndexField:Og(a,o)}:{})}}this.childModel=n.child}hash(){let t="Facet";for(const n of ma)this[n]&&(t+=` ${n.charAt(0)}:${St(this[n])}`);return t}get fields(){var t;const n=[];for(const r of ma)!((t=this[r])===null||t===void 0)&&t.fields&&n.push(...this[r].fields);return n}dependentFields(){const t=new Set(this.fields);for(const n of ma)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of lu){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),o=r.get("range");if(Rr(i)&&_f(o)){const a=_E(this.childModel,n),s=cJ(a);s?t[n]=s:ve(cH(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],o=[],a=[],s=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),a.push("max")):(o.push(r[i]),a.push("distinct")),s.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=cE,field:d}=l;o.push(d),a.push(c),s.push(_e(l,{forAs:!0}))}else u&&(o.push(u),a.push("max"),s.push(u));return{name:this[t].name,source:n!=null?n:this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},o.length?{fields:o,ops:a,as:s}:{})]}}assembleFacetHeaderData(t){var n,r;const{columns:i}=this.model.layout,{layoutHeaders:o}=this.model.component,a=[],s={};for(const c of nJ){for(const d of rJ){const f=(n=o[c]&&o[c][d])!==null&&n!==void 0?n:[];for(const h of f)if(((r=h.axes)===null||r===void 0?void 0:r.length)>0){s[c]=!0;break}}if(s[c]){const d=`length(data("${this.facet.name}"))`,f=c==="row"?i?{signal:`ceil(${d} / ${i})`}:1:i?{signal:`min(${d}, ${i})`}:{signal:d};a.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:l,column:u}=s;return(l||u)&&a.unshift(this.assembleRowColumnHeaderData("facet",null,t)),a}assemble(){var t,n;const r=[];let i=null;const o=this.getChildIndependentFieldsWithStep(),{column:a,row:s,facet:l}=this;if(a&&s&&(o.x||o.y)){i=`cross_${this.column.name}_${this.row.name}`;const u=[].concat((t=o.x)!==null&&t!==void 0?t:[],(n=o.y)!==null&&n!==void 0?n:[]),c=u.map(()=>"distinct");r.push({name:i,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:u,ops:c}]})}for(const u of[Ku,Bu])this[u]&&r.push(this.assembleRowColumnHeaderData(u,i,o));if(l){const u=this.assembleFacetHeaderData(o);u&&r.push(...u)}return r}}function q$(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function wdt(e,t){const n=q4(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=q$(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=q$(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return ve(Oot(t)),null}function Zdt(e){const t={};return p9(e.filter,n=>{var r;if(_ge(n)){let i=null;mH(n)?i=Go(n.equal):bH(n)?i=Go(n.lte):gH(n)?i=Go(n.lt):yH(n)?i=Go(n.gt):vH(n)?i=Go(n.gte):xH(n)?i=n.range[0]:wH(n)&&(i=((r=n.oneOf)!==null&&r!==void 0?r:n.in)[0]),i&&(Vh(i)?t[n.field]="date":At(i)?t[n.field]="number":We(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Sdt(e){const t={};function n(r){Tg(r)?t[r.field]="date":r.type==="quantitative"&&bot(r.aggregate)?t[r.field]="number":Xg(r.field)>1?r.field in t||(t[r.field]="flatten"):Yh(r)&&Xl(r.sort)&&Xg(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if(($n(e)||xs(e))&&e.forEachFieldDef((r,i)=>{if(Ea(r))n(r);else{const o=Rh(i),a=e.fieldDef(o);n(Object.assign(Object.assign({},r),{type:a.type}))}}),$n(e)){const{mark:r,markDef:i,encoding:o}=e;if(Gf(r)&&!e.encoding.order){const a=i.orient==="horizontal"?"y":"x",s=o[a];Ze(s)&&s.type==="quantitative"&&!(s.field in t)&&(t[s.field]="number")}}return t}function kdt(e){const t={};if($n(e)&&e.component.selection)for(const n of ge(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Xg(i.field)>1&&(t[i.field]="flatten")}return t}class oi extends $t{clone(){return new oi(null,st(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${St(this._parse)}`}static makeExplicit(t,n,r){var i;let o={};const a=n.data;return!Wd(a)&&!((i=a==null?void 0:a.format)===null||i===void 0)&&i.parse&&(o=a.format.parse),this.makeWithAncestors(t,o,{},r)}static makeWithAncestors(t,n,r,i){for(const s of ge(r)){const l=i.getWithExplicit(s);l.value!==void 0&&(l.explicit||l.value===r[s]||l.value==="derived"||r[s]==="flatten"?delete r[s]:ve(p$(s,r[s],l.value)))}for(const s of ge(n)){const l=i.get(s);l!==void 0&&(l===n[s]?delete n[s]:ve(p$(s,n[s],l)))}const o=new xc(n,r);i.copyAll(o);const a={};for(const s of ge(o.combine())){const l=o.get(s);l!==null&&(a[s]=l)}return ge(a).length===0||i.parseNothing?null:new oi(t,a)}get parse(){return this._parse}merge(t){this._parse=Object.assign(Object.assign({},this._parse),t.parse),t.remove()}assembleFormatParse(){const t={};for(const n of ge(this._parse)){const r=this._parse[n];Xg(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(ge(this._parse))}dependentFields(){return new Set(ge(this._parse))}assembleTransforms(t=!1){return ge(this._parse).filter(n=>t?Xg(n)>1:!0).map(n=>{const r=wdt(n,this._parse[n]);return r?{type:"formula",expr:r,as:eH(n)}:null}).filter(n=>n!==null)}}class Qd extends $t{clone(){return new Qd(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Kl])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Kl}}}class pZ extends $t{clone(){return new pZ(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${St(this.params)}`}assemble(){return Object.assign({type:"graticule"},this.params===!0?{}:this.params)}}class hZ extends $t{clone(){return new hZ(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){var t;return new Set([(t=this.params.as)!==null&&t!==void 0?t:"data"])}hash(){return`Hash ${St(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}class ph extends $t{constructor(t){super(null),t!=null||(t={name:"source"});let n;if(Wd(t)||(n=t.format?Object.assign({},oo(t.format,["parse"])):{}),Lw(t))this._data={values:t.values};else if(Ng(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];yt(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else Pbe(t)?this._data={values:[{type:"Sphere"}]}:(Obe(t)||Wd(t))&&(this._data={});this._generator=Wd(t),t.name&&(this._name=t.name),n&&!Dt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}var eQ=globalThis&&globalThis.__classPrivateFieldSet||function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},_dt=globalThis&&globalThis.__classPrivateFieldGet||function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Mv;function sJ(e){return e instanceof ph||e instanceof pZ||e instanceof hZ}class lJ{constructor(){Mv.set(this,void 0),eQ(this,Mv,!1,"f")}setModified(){eQ(this,Mv,!0,"f")}get modifiedFlag(){return _dt(this,Mv,"f")}}Mv=new WeakMap;class Th extends lJ{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const n=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,i)=>i[1]-r[1]);for(const r of n)this.run(r[0]);return this.modifiedFlag}}class uJ extends lJ{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Gdt extends uJ{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of ge(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Idt extends uJ{constructor(t){super(),this.requiresSelectionId=t&&tJ(t)}run(t){t instanceof Qd&&(this.requiresSelectionId&&(sJ(t.parent)||t.parent instanceof vs||t.parent instanceof oi)||(this.setModified(),t.remove()))}}class Wdt extends lJ{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Ll&&(r=t.producedFields(),$4(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Edt extends uJ{constructor(){super()}run(t){t instanceof Ci&&!t.isRequired()&&(this.setModified(),t.remove())}}class Xdt extends Th{run(t){if(!sJ(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof oi)if(t instanceof oi)this.setModified(),t.merge(n);else{if(Q4(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Ldt extends Th{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof oi);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const a of r){const s=a.parse;for(const l of ge(s))l in i?i[l]!==s[l]&&o.add(l):i[l]=s[l]}for(const a of o)delete i[a];if(!Dt(i)){this.setModified();const a=new oi(t,i);for(const s of n){if(s instanceof oi)for(const l of ge(i))delete s.parse[l];t.removeChild(s),s.parent=a,s instanceof oi&&ge(s.parse).length===0&&s.remove()}}}}}class Rdt extends Th{run(t){t instanceof Ci||t.numChildren()>0||t instanceof Eb||t instanceof ph||(this.setModified(),t.remove())}}class Cdt extends Th{run(t){const n=t.children.filter(i=>i instanceof Ll),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Vdt extends Th{run(t){const n=t.children.filter(i=>i instanceof vs),r={};for(const i of n){const o=St(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of ge(r)){const o=r[i];if(o.length>1){const a=o.pop();for(const s of o)a.merge(s)&&(t.removeChild(s),s.parent=a,s.remove(),this.setModified())}}}}class Ydt extends Th{constructor(t){super(),this.model=t}run(t){const n=!(sJ(t)||t instanceof Wb||t instanceof oi||t instanceof Qd),r=[],i=[];for(const o of t.children)o instanceof Rl&&(n&&!Q4(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){const o=r.pop();for(const a of r)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Rl?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){const o=i.pop();for(const a of i)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}}class Tdt extends Th{run(t){const n=[...t.children];if(!ih(n,o=>o instanceof Ci)||t.numChildren()<=1)return;const r=[];let i;for(const o of n)if(o instanceof Ci){let a=o;for(;a.numChildren()===1;){const[s]=a.children;if(s instanceof Ci)a=s;else break}r.push(...a.children),i?(t.removeChild(o),o.parent=i.parent,i.parent.removeChild(i),i.parent=a,this.setModified()):i=a}else r.push(o);if(r.length){this.setModified();for(const o of r)o.parent.removeChild(o),o.parent=i}}}class Nh extends $t{clone(){return new Nh(null,st(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=bl(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){var n;return(n=t.as)!==null&&n!==void 0?n:_e(t)}hash(){return`JoinAggregateTransform ${St(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const i=this.transform.groupby;return Object.assign({type:"joinaggregate",as:r,ops:n,fields:t},i!==void 0?{groupby:i}:{})}}function Ndt(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=_e(r);return i&&t.push(i),t},[])}function Fdt(e){return ce(e)&&e.every(t=>We(t))&&e.length>1}class Au extends $t{clone(){return new Au(null,st(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:o,offset:a="zero"}=n,s=[],l=[];if(n.sort!==void 0)for(const d of n.sort)s.push(d.field),l.push(nr(d.order,"ascending"));const u={field:s,order:l};let c;return Fdt(o)?c=o:We(o)?c=[o,`${o}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Au(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:a,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:o,fieldChannel:a,offset:s,impute:l}=r,u=o.map(h=>{const m=i[h];return Bl(m)}).filter(h=>!!h),c=Ndt(n),d=n.encoding.order;let f;return ce(d)||Ze(d)?f=uge(d):f=c.reduce((h,m)=>(h.field.push(m),h.order.push(a==="y"?"descending":"ascending"),h),{field:[],order:[]}),new Au(t,{dimensionFieldDefs:u,stackField:n.vgField(a),facetby:[],stackby:c,sort:f,offset:s,impute:l,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${St(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[_e(i,{binSuffix:"mid"})]:[_e(i,{}),_e(i,{binSuffix:"end"})]:[_e(i)]).flat():r!=null?r:[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:a,offset:s,impute:l,as:u}=this._stack;if(l)for(const c of r){const{bandPosition:d=.5,bin:f}=c;if(f){const h=_e(c,{expr:"datum"}),m=_e(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${d}*${h}+${1-d}*${m}`,as:_e(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:_e(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:u,offset:s}),t}}class Xb extends $t{clone(){return new Xb(null,st(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=bl(this.transform.groupby.concat(t),n=>n)}dependentFields(){var t,n;const r=new Set;return((t=this.transform.groupby)!==null&&t!==void 0?t:[]).forEach(r.add,r),((n=this.transform.sort)!==null&&n!==void 0?n:[]).forEach(i=>r.add(i.field)),this.transform.window.map(i=>i.field).filter(i=>i!==void 0).forEach(r.add,r),r}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){var n;return(n=t.as)!==null&&n!==void 0?n:_e(t)}hash(){return`WindowTransform ${St(this.transform)}`}assemble(){var t;const n=[],r=[],i=[],o=[];for(const f of this.transform.window)r.push(f.op),i.push(this.getDefaultName(f)),o.push(f.param===void 0?null:f.param),n.push(f.field===void 0?null:f.field);const a=this.transform.frame,s=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&r.every(f=>sH(f)))return Object.assign({type:"joinaggregate",as:i,ops:r,fields:n},s!==void 0?{groupby:s}:{});const l=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)l.push(f.field),u.push((t=f.order)!==null&&t!==void 0?t:"ascending");const c={field:l,order:u},d=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:o,as:i,ops:r,fields:n,sort:c},d!==void 0?{ignorePeers:d}:{}),s!==void 0?{groupby:s}:{}),a!==void 0?{frame:a}:{})}}function Mdt(e){function t(n){if(!(n instanceof Eb)){const r=n.clone();if(r instanceof Ci){const i=EN+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof vs||r instanceof Au||r instanceof Xb||r instanceof Nh)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function WN(e){if(e instanceof Eb)if(e.numChildren()===1&&!(e.children[0]instanceof Ci)){const t=e.children[0];(t instanceof vs||t instanceof Au||t instanceof Xb||t instanceof Nh)&&t.addDimensions(e.fields),t.swapWithParent(),WN(e)}else{const t=e.model.component.data.main;Rye(t);const n=Mdt(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(WN)}function Rye(e){if(e instanceof Ci&&e.type===on.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Eb||(t.swapWithParent(),Rye(e))}}const EN="scale_",yk=5;function XN(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!XN(t.children))return!1}return!0}function Pa(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function tQ(e,t,n){let r=e.sources,i=!1;return i=Pa(new Edt,r)||i,i=Pa(new Idt(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=Pa(new Rdt,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=Pa(new Xdt,r)||i,i=Pa(new Ydt(t),r)||i,i=Pa(new Wdt,r)||i,i=Pa(new Ldt,r)||i,i=Pa(new Vdt,r)||i,i=Pa(new Cdt,r)||i,i=Pa(new Gdt,r)||i,i=Pa(new Tdt,r)||i),e.sources=r,i}function Odt(e,t){XN(e.sources);let n=0,r=0;for(let i=0;i<yk&&tQ(e,t,!0);i++)n++;e.sources.map(WN);for(let i=0;i<yk&&tQ(e,t,!1);i++)r++;XN(e.sources),Math.max(n,r)===yk&&ve(`Maximum optimization runs(${yk}) reached.`)}class so{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new so(()=>t(n))}}var zdt=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Cye(e){$n(e)?Pdt(e):jdt(e)}function Pdt(e){const t=e.component.scales;for(const n of ge(t)){const r=Jdt(e,n);if(t[n].setWithExplicit("domains",r),Kdt(e,n),e.component.data.isFaceted){let i=e;for(;!xs(i)&&i.parent;)i=i.parent;if(i.component.resolve.scale[n]==="shared")for(const o of r.value)Ou(o)&&(o.data=EN+o.data.replace(EN,""))}}}function jdt(e){for(const n of e.children)Cye(n);const t=e.component.scales;for(const n of ge(t)){let r,i=null;for(const o of e.children){const a=o.component.scales[n];if(a){r===void 0?r=a.getWithExplicit("domains"):r=Dd(r,a.getWithExplicit("domains"),"domains","scale",LN);const s=a.get("selectionExtent");i&&s&&i.param!==s.param&&ve(Tot),i=s}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Hdt(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=nQ(t,n);if(!i){ve(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=nQ(t,n);if(i)return"unaggregated"}return e}function Jdt(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Hdt(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]=Object.assign(Object.assign({},e.specifiedScales[t]),{domain:i})),t==="x"&&lr(r.x2)?lr(r.x)?Dd(Tc(n,i,e,"x"),Tc(n,i,e,"x2"),"domain","scale",LN):Tc(n,i,e,"x2"):t==="y"&&lr(r.y2)?lr(r.y)?Dd(Tc(n,i,e,"y"),Tc(n,i,e,"y2"),"domain","scale",LN):Tc(n,i,e,"y2"):Tc(n,i,e,t)}function Bdt(e,t,n){return e.map(r=>({signal:`{data: ${mE(r,{timeUnit:n,type:t})}}`}))}function iC(e,t,n){var r;const i=(r=mi(n))===null||r===void 0?void 0:r.unit;return t==="temporal"||i?Bdt(e,t,i):[e]}function Tc(e,t,n,r){const{encoding:i}=n,o=lr(i[r]),{type:a}=o,s=o.timeUnit;if(sst(t)){const d=Tc(e,void 0,n,r),f=iC(t.unionWith,a,s);return ol([...f,...d.value])}else{if(Oe(t))return ol([t]);if(t&&t!=="unaggregated"&&!Rge(t))return ol(iC(t,a,s))}const l=n.stack;if(l&&r===l.fieldChannel){if(l.offset==="normalize")return Ba([[0,1]]);const d=n.requestDataName(on.Main);return Ba([{data:d,field:n.vgField(r,{suffix:"start"})},{data:d,field:n.vgField(r,{suffix:"end"})}])}const u=Sf(r)&&Ze(o)?Ddt(n,r,e):void 0;if(uu(o)){const d=iC([o.datum],a,s);return Ba(d)}const c=o;if(t==="unaggregated"){const d=n.requestDataName(on.Main),{field:f}=o;return Ba([{data:d,field:_e({field:f,aggregate:"min"})},{data:d,field:_e({field:f,aggregate:"max"})}])}else if(un(c.bin)){if(Rr(e))return Ba(e==="bin-ordinal"?[]:[{data:Ww(u)?n.requestDataName(on.Main):n.requestDataName(on.Raw),field:n.vgField(r,cZ(c,r)?{binSuffix:"range"}:{}),sort:u===!0||!Le(u)?{field:n.vgField(r,{}),op:"min"}:u}]);{const{bin:d}=c;if(un(d)){const f=aJ(n,c.field,d);return Ba([new so(()=>{const h=n.getSignalName(f);return`[${h}.start, ${h}.stop]`})])}else return Ba([{data:n.requestDataName(on.Main),field:n.vgField(r,{})}])}}else if(c.timeUnit&&yt(["time","utc"],e)&&Age(c,$n(n)?n.encoding[su(r)]:void 0,n.markDef,n.config)){const d=n.requestDataName(on.Main);return Ba([{data:d,field:n.vgField(r)},{data:d,field:n.vgField(r,{suffix:"end"})}])}else return Ba(u?[{data:Ww(u)?n.requestDataName(on.Main):n.requestDataName(on.Raw),field:n.vgField(r),sort:u}]:[{data:n.requestDataName(on.Main),field:n.vgField(r)}])}function oC(e,t){const{op:n,field:r,order:i}=e;return Object.assign(Object.assign({op:n!=null?n:t?"sum":cE},r?{field:Ia(r)}:{}),i?{order:i}:{})}function Kdt(e,t){var n;const r=e.component.scales[t],i=e.specifiedScales[t].domain,o=(n=e.fieldDef(t))===null||n===void 0?void 0:n.bin,a=Rge(i)&&i,s=Ch(o)&&iE(o.extent)&&o.extent;(a||s)&&r.set("selectionExtent",a!=null?a:s,!0)}function Ddt(e,t,n){if(!Rr(n))return;const r=e.fieldDef(t),i=r.sort;if(Bge(i))return{op:"min",field:Og(r,t),order:"ascending"};const{stack:o}=e,a=o?new Set([...o.groupbyFields,...o.stackBy.map(s=>s.fieldDef.field)]):void 0;if(Xl(i)){const s=o&&!a.has(i.field);return oC(i,s)}else if(Jge(i)){const{encoding:s,order:l}=i,u=e.fieldDef(s),{aggregate:c,field:d}=u,f=o&&!a.has(d);if(ac(c)||kf(c))return oC({field:_e(u),order:l},f);if(sH(c)||!c)return oC({op:c,field:d,order:l},f)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(yt(["ascending",void 0],i))return!0}}function nQ(e,t){const{aggregate:n,type:r}=e;return n?We(n)&&!vot.has(n)?{valid:!1,reason:cat(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:dat(e)}:{valid:!0}:{valid:!1,reason:uat(e)}}function LN(e,t,n,r){return e.explicit&&t.explicit&&ve(gat(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Adt(e){const t=bl(e.map(a=>Ou(a)?zdt(a,["sort"]):a),St),n=bl(e.map(a=>{if(Ou(a)){const s=a.sort;return s!==void 0&&!Ww(s)&&("op"in s&&s.op==="count"&&delete s.field,s.order==="ascending"&&delete s.order),s}}).filter(a=>a!==void 0),St);if(t.length===0)return;if(t.length===1){const a=e[0];if(Ou(a)&&n.length>0){let s=n[0];if(n.length>1)ve(m$),s=!0;else if(Le(s)&&"field"in s){const l=s.field;a.field===l&&(s=s.order?{order:s.order}:!0)}return Object.assign(Object.assign({},a),{sort:s})}return a}const r=bl(n.map(a=>Ww(a)||!("op"in a)||We(a.op)&&a.op in mot?a:(ve(yat(a)),!0)),St);let i;r.length===1?i=r[0]:r.length>1&&(ve(m$),i=!0);const o=bl(e.map(a=>Ou(a)?a.data:null),a=>a);return o.length===1&&o[0]!==null?Object.assign({data:o[0],fields:t.map(a=>a.field)},i?{sort:i}:{}):Object.assign({fields:t},i?{sort:i}:{})}function cJ(e){if(Ou(e)&&We(e.field))return e.field;if(wot(e)){let t;for(const n of e.fields)if(Ou(n)&&We(n.field)){if(!t)t=n.field;else if(t!==n.field)return ve(vat),t}return ve(xat),t}else if(Zot(e)){ve(wat);const t=e.fields[0];return We(t)?t:void 0}}function _E(e,t){const n=e.component.scales[t].get("domains").map(r=>(Ou(r)&&(r.data=e.lookupDataSource(r.data)),r));return Adt(n)}var Udt=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Vye(e){return Lb(e)||dJ(e)?e.children.reduce((t,n)=>t.concat(Vye(n)),rQ(e)):rQ(e)}function rQ(e){return ge(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:a,selectionExtent:s,domains:l,range:u,reverse:c}=i,d=Udt(i,["name","type","selectionExtent","domains","range","reverse"]),f=$dt(i.range,o,n,e),h=_E(e,n),m=s?zut(e,s,r,h):null;return t.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:o,type:a},h?{domain:h}:{}),m?{domainRaw:m}:{}),{range:f}),c!==void 0?{reverse:c}:{}),d)),t},[])}function $dt(e,t,n,r){if(Lr(n)){if(_f(e))return{step:{signal:`${t}_step`}}}else if(Le(e)&&Ou(e))return Object.assign(Object.assign({},e),{data:r.lookupDataSource(e.data)});return e}class Yye extends xc{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:ih(this.get("domains"),t=>ce(t)&&t.length===2&&t[0]<=0&&t[1]>=0)}}const Qdt=["range","scheme"];function qdt(e){const t=e.component.scales;for(const n of rE){const r=t[n];if(!r)continue;const i=eft(n,e);r.setWithExplicit("range",i)}}function iQ(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=mo(t),a=e.getName(o);if(Le(r)&&r.binned&&r.step!==void 0)return new so(()=>{const s=e.scaleName(t),l=`(domain("${s}")[1] - domain("${s}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${l})`});if(un(r)){const s=aJ(e,i,r);return new so(()=>{const l=e.getSignalName(s),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(a)} / (${u})`})}}}function eft(e,t){const n=t.specifiedScales[e],{size:r}=t,i=t.getScaleComponent(e).get("type");for(const c of Qdt)if(n[c]!==void 0){const d=cN(i,c),f=Cge(e,c);if(!d)ve(gge(i,c,e));else if(f)ve(f);else switch(c){case"range":{const h=n.range;if(ce(h)){if(Lr(e))return ol(h.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return so.fromName(y,g)}return m}))}else if(Le(h))return ol({data:t.requestDataName(on.Main),field:h.field,sort:{op:"min",field:t.vgField(e)}});return ol(h)}case"scheme":return ol(tft(n[c]))}}const o=e===Vn||e==="xOffset"?"width":"height",a=r[o];if(Dl(a)){if(Lr(e))if(Rr(i)){const c=Tye(a,t,e);if(c)return ol({step:c})}else ve(bge(o));else if(_b(e)){const c=e===yf?"x":"y";if(t.getScaleComponent(c).get("type")==="band"){const d=Nye(a,i);if(d)return ol(d)}}}const{rangeMin:s,rangeMax:l}=n,u=nft(e,t);return(s!==void 0||l!==void 0)&&cN(i,"rangeMin")&&ce(u)&&u.length===2?ol([s!=null?s:u[0],l!=null?l:u[1]]):Ba(u)}function tft(e){return ast(e)?Object.assign({scheme:e.name},oo(e,["name"])):{scheme:e}}function nft(e,t){const{size:n,config:r,mark:i,encoding:o}=t,a=t.getSignalName.bind(t),{type:s}=lr(o[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case Vn:case Xr:{if(yt(["point","band"],l)){const h=Fye(e,n,r.view);if(Dl(h))return{step:Tye(h,t,e)}}const d=mo(e),f=t.getName(d);return e===Xr&&Jo(l)?[so.fromName(a,f),0]:[0,so.fromName(a,f)]}case yf:case kb:return rft(e,t,l);case bc:{const d=t.component.scales[e].get("zero"),f=Mye(i,d,r),h=aft(i,n,t,r);return Cg(l)?oft(f,h,ift(l,r,u,e)):[f,h]}case Ya:return[0,Math.PI*2];case Lh:return[0,360];case Ts:return[0,new so(()=>{const d=t.getSignalName("width"),f=t.getSignalName("height");return`min(${d},${f})/2`})];case wf:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Zf:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ho:return"symbol";case po:case ou:case au:return l==="ordinal"?s==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case yc:case vf:case xf:return[r.scale.minOpacity,r.scale.maxOpacity]}}function Tye(e,t,n){var r,i,o,a,s;const{encoding:l}=t,u=t.getScaleComponent(n),c=$0e(n),d=l[c];if(_be({step:e,offsetIsDiscrete:rt(d)&&Ige(d.type)})==="offset"&&abe(l,c)){const f=t.getScaleComponent(c);let h=`domain('${t.scaleName(c)}').length`;if(f.get("type")==="band"){const g=(i=(r=f.get("paddingInner"))!==null&&r!==void 0?r:f.get("padding"))!==null&&i!==void 0?i:0,y=(a=(o=f.get("paddingOuter"))!==null&&o!==void 0?o:f.get("padding"))!==null&&a!==void 0?a:0;h=`bandspace(${h}, ${g}, ${y})`}const m=(s=u.get("paddingInner"))!==null&&s!==void 0?s:u.get("padding");return{signal:`${e.step} * ${h} / (1-${Got(m)})`}}else return e.step}function Nye(e,t){if(_be({step:e,offsetIsDiscrete:Rr(t)})==="offset")return{step:e.step}}function rft(e,t,n){const r=e===yf?"x":"y",i=t.getScaleComponent(r).get("type"),o=t.scaleName(r);if(i==="band"){const a=Fye(r,t.size,t.config.view);if(Dl(a)){const s=Nye(a,n);if(s)return s}return[0,{signal:`bandwidth('${o}')`}]}else return F0e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}function Fye(e,t,n){const r=e===Vn?"width":"height";return t[r]||UI(n,r)}function ift(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&ce(n)?n.length+1:(ve(Xat(r)),3)}}function oft(e,t,n){const r=()=>{const i=Du(t),o=Du(e),a=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${a}, ${a})`};return Oe(t)?new so(r):{signal:r()}}function Mye(e,t,n){if(t)return Oe(t)?{signal:`${t.signal} ? 0 : ${Mye(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(oE("size",e))}const oQ=.95;function aft(e,t,n,r){const i={x:iQ(n,"x"),y:iQ(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=aQ(t,i,r.view);return At(o)?o-1:new so(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=aQ(t,i,r.view);return At(o)?Math.pow(oQ*o,2):new so(()=>`pow(${oQ} * ${o.signal}, 2)`)}}throw new Error(oE("size",e))}function aQ(e,t,n){const r=Dl(e.width)?e.width.step:AI(n,"width"),i=Dl(e.height)?e.height.step:AI(n,"height");return t.x||t.y?new so(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function Oye(e,t){$n(e)?sft(e,t):Pye(e,t)}function sft(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:a}=e;for(const s of ge(n)){const l=a[s],u=n[s],c=e.getScaleComponent(s),d=lr(i[s]),f=l[t],h=c.get("type"),m=c.get("padding"),g=c.get("paddingInner"),y=cN(h,t),v=Cge(s,t);if(f!==void 0&&(y?v&&ve(v):ve(gge(h,t,s))),y&&v===void 0)if(f!==void 0){const w=d.timeUnit,Z=d.type;switch(t){case"domainMax":case"domainMin":Vh(l[t])||Z==="temporal"||w?u.set(t,{signal:mE(l[t],{type:Z,timeUnit:w})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const w=t in sQ?sQ[t]({model:e,channel:s,fieldOrDatumDef:d,scaleType:h,scalePadding:m,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:r,hasNestedOffsetScale:hN(i,s),hasSecondaryRangeChannel:!!i[su(s)]}):r.scale[t];w!==void 0&&u.set(t,w,!1)}}}const sQ={bins:({model:e,fieldOrDatumDef:t})=>Ze(t)?lft(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>uft(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>cft(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>dft(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>fft(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>pft(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Ze(e)?e.sort:void 0;return hft(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:a})=>mft(e,t,n,r,i,o.scale,a)};function zye(e){$n(e)?qdt(e):Pye(e,"range")}function Pye(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?zye(r):Oye(r,t);for(const r of ge(n)){let i;for(const o of e.children){const a=o.component.scales[r];if(a){const s=a.getWithExplicit(t);i=Dd(i,s,t,"scale",Mbe((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function lft(e,t){const n=t.bin;if(un(n)){const r=aJ(e,t.field,n);return new so(()=>e.getSignalName(r))}else if(Nr(n)&&Ch(n)&&n.step!==void 0)return{step:n.step}}function uft(e,t){if(yt([po,ou,au],e)&&t!=="nominal")return"hcl"}function cft(e,t,n,r,i,o){var a;if(!(!((a=Bl(o))===null||a===void 0)&&a.bin||ce(n)||i!=null||r!=null||yt([ao.TIME,ao.UTC],e)))return Lr(t)?!0:void 0}function dft(e,t,n,r,i,o){if(Lr(e)){if(us(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:a,orient:s}=i;if(a==="bar"&&!(Ze(r)&&(r.bin||r.timeUnit))&&(s==="vertical"&&e==="x"||s==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===ao.POINT)return n.pointPadding}}function fft(e,t,n,r,i,o=!1){if(e===void 0){if(Lr(t)){const{bandPaddingInner:a,barBandPaddingInner:s,rectBandPaddingInner:l,bandWithNestedOffsetPaddingInner:u}=i;return o?u:nr(a,n==="bar"?s:l)}else if(_b(t)&&r===ao.BAND)return i.offsetBandPaddingInner}}function pft(e,t,n,r,i,o=!1){if(e===void 0){if(Lr(t)){const{bandPaddingOuter:a,bandWithNestedOffsetPaddingOuter:s}=i;if(o)return s;if(n===ao.BAND)return nr(a,Oe(r)?{signal:`${r.signal}/2`}:r/2)}else if(_b(t)){if(n===ao.POINT)return .5;if(n===ao.BAND)return i.offsetBandPaddingOuter}}}function hft(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Jo(e)&&t==="descending"?Oe(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Jo(e)&&t==="descending")return!0}function mft(e,t,n,r,i,o,a){if(n&&n!=="unaggregated"&&Jo(i)){if(ce(n)){const s=n[0],l=n[n.length-1];if(s<=0&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Cg(i))return!0;if(!(Ze(t)&&t.bin)&&yt([...lu,...sot],e)){const{orient:s,type:l}=r;return yt(["bar","area","line","trail"],l)&&(s==="horizontal"&&e==="y"||s==="vertical"&&e==="x")?!1:yt(["bar","area"],l)&&!a?!0:o==null?void 0:o.zero}return!1}function gft(e,t,n,r,i=!1){const o=bft(t,n,r,i),{type:a}=e;return Sf(t)?a!==void 0?pst(t,a)?Ze(n)&&!fst(a,n.type)?(ve(hat(a,o)),o):a:(ve(pat(t,a,o)),o):o:null}function bft(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(X0(e)||$R(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&ve(QR(e,"ordinal")),"ordinal";if(Lr(e)||_b(e)){if(yt(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in aH)return"band";const o=n[mo(e)];return uh(o)||Yg(t)&&!((i=t.axis)===null||i===void 0)&&i.tickBand?"band":"point"}case"temporal":return X0(e)?"time":$R(e)==="discrete"?(ve(QR(e,"temporal")),"ordinal"):Ze(t)&&t.timeUnit&&mi(t.timeUnit).utc?"utc":"time";case"quantitative":return X0(e)?Ze(t)&&un(t.bin)?"bin-ordinal":"linear":$R(e)==="discrete"?(ve(QR(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(hge(t.type))}function yft(e,{ignoreRange:t}={}){jye(e),Cye(e);for(const n of dst)Oye(e,n);t||zye(e)}function jye(e){$n(e)?e.component.scales=vft(e):e.component.scales=wft(e)}function vft(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of rE){const a=lr(t[o]);if(a&&n===Tge&&o===ho&&a.type===Gb)continue;let s=a&&a.scale;if(_b(o)){const l=Q0e(o);if(!hN(t,l)){s&&ve(qot(o));continue}}if(a&&s!==null&&s!==!1){s!=null||(s={});const l=hN(t,o),u=gft(s,o,a,r,l);i[o]=new Yye(e.scaleName(`${o}`,!0),{value:u,explicit:s.type===u})}}return i}const xft=Mbe((e,t)=>b$(e)-b$(t));function wft(e){var t,n;const r=e.component.scales={},i={},o=e.component.resolve;for(const a of e.children){jye(a);for(const s of ge(a.component.scales))if((t=(n=o.scale)[s])!==null&&t!==void 0||(n[s]=xye(s,e)),o.scale[s]==="shared"){const l=i[s],u=a.component.scales[s].getWithExplicit("type");l?tst(l.value,u.value)?i[s]=Dd(l,u,"type","scale",xft):(o.scale[s]="independent",delete i[s]):i[s]=u}}for(const a of ge(i)){const s=e.scaleName(a,!0),l=i[a];r[a]=new Yye(s,l);for(const u of e.children){const c=u.component.scales[a];c&&(u.renameScale(c.get("name"),s),c.merged=!0)}}return r}var aC=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class sC{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function $n(e){return(e==null?void 0:e.type)==="unit"}function xs(e){return(e==null?void 0:e.type)==="facet"}function dJ(e){return(e==null?void 0:e.type)==="concat"}function Lb(e){return(e==null?void 0:e.type)==="layer"}class fJ{constructor(t,n,r,i,o,a,s){var l,u;this.type=n,this.parent=r,this.config=o,this.correctDataNames=c=>{var d,f,h;return!((d=c.from)===null||d===void 0)&&d.data&&(c.from.data=this.lookupDataSource(c.from.data)),!((h=(f=c.from)===null||f===void 0?void 0:f.facet)===null||h===void 0)&&h.data&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c},this.parent=r,this.config=o,this.view=Ki(s),this.name=(l=t.name)!==null&&l!==void 0?l:i,this.title=jc(t.title)?{text:t.title}:t.title?Ki(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new sC,this.projectionNameMap=r?r.projectionNameMap:new sC,this.signalNameMap=r?r.signalNameMap:new sC,this.data=t.data,this.description=t.description,this.transforms=kut((u=t.transform)!==null&&u!==void 0?u:[]),this.layout=n==="layer"||n==="unit"?{}:Xlt(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:dE(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new xc,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},a?st(a):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){yft(this)}parseProjection(){Xye(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){_ye(this)}assembleEncodeFromView(t){const n=aC(t,["style"]),r={};for(const i of ge(n)){const o=n[i];o!==void 0&&(r[i]=gn(o))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=gn(this.description)),this.type==="unit"||this.type==="layer")?Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n!=null?n:{}):Dt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const t=this.layout,{spacing:n}=t,r=aC(t,["spacing"]),{component:i,config:o}=this,a=Fct(i.layoutHeaders,o);return Object.assign(Object.assign(Object.assign({padding:n},this.assembleDefaultLayout()),r),a?{titleBand:a}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of ma)t[r].title&&n.push(Rct(this,r));for(const r of nJ)n=n.concat(Cct(this,r));return n}assembleAxes(){return xct(this.component.axes,this.config)}assembleLegends(){return Iye(this)}assembleProjections(){return ldt(this)}assembleTitle(){var t,n,r;const i=(t=this.title)!==null&&t!==void 0?t:{},{encoding:o}=i,a=aC(i,["encoding"]),s=Object.assign(Object.assign(Object.assign({},oge(this.config.title).nonMarkTitleProperties),a),o?{encode:{update:o}}:{});if(s.text)return yt(["unit","layer"],this.type)?yt(["middle",void 0],s.anchor)&&((n=s.frame)!==null&&n!==void 0||(s.frame="group")):(r=s.anchor)!==null&&r!==void 0||(s.anchor="start"),Dt(s)?void 0:s}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||xs(this.parent)?Vye(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(t){return _n((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(on[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(xs(this.parent)){const n=yye(t),r=nE(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),a=i.get("range");if(Rr(o)&&_f(a)){const s=i.get("name"),l=_E(this,r),u=cJ(l);if(u){const c=_e({aggregate:"distinct",field:u},{expr:"datum"});return{signal:bye(s,i,c)}}else return ve(cH(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(A0e(t)&&Sf(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(Lot(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)===null||t===void 0?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)===null||n===void 0?void 0:n.some(r=>r.hasOrientSignalRef()))}}class Hye extends fJ{vgField(t,n={}){const r=this.fieldDef(t);if(r)return _e(r,n)}reduceFieldDef(t,n){return ilt(this.getMapping(),(r,i,o)=>{const a=Bl(i);return a?t(r,a,o):r},n)}forEachFieldDef(t,n){FH(this.getMapping(),(r,i)=>{const o=Bl(r);o&&t(o,i)},n)}}var Zft=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class GE extends $t{clone(){return new GE(null,st(this.transform))}constructor(t,n){var r,i,o;super(t),this.transform=n,this.transform=st(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"value",(o=a[1])!==null&&o!==void 0?o:"density"],n.groupby&&n.minsteps==null&&n.maxsteps==null&&n.steps==null&&(this.transform.steps=200)}dependentFields(){var t;return new Set([this.transform.density,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${St(this.transform)}`}assemble(){const t=this.transform,{density:n}=t,r=Zft(t,["density"]);return Object.assign({type:"kde",field:n},r)}}class Cw extends $t{clone(){return new Cw(null,Object.assign({},this.filter))}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:o}=n;if(Mt("invalid",o,r)!=="filter")return null;const a=n.reduceFieldDef((s,l,u)=>{const c=Sf(u)&&n.getScaleComponent(u);if(c){const d=c.get("type");Jo(d)&&l.aggregate!=="count"&&!Gf(i)&&(s[l.field]=l)}return s},{});return ge(a).length?new Cw(t,a):null}dependentFields(){return new Set(ge(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${St(this.filter)}`}assemble(){const t=ge(this.filter).reduce((n,r)=>{const i=this.filter[r],o=_e(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):i.type==="quantitative"&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class IE extends $t{clone(){return new IE(this.parent,st(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=st(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,a)=>{var s;return(s=i[a])!==null&&s!==void 0?s:o})}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${St(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class WE extends $t{clone(){return new WE(null,st(this.transform))}constructor(t,n){var r,i,o;super(t),this.transform=n,this.transform=st(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"key",(o=a[1])!==null&&o!==void 0?o:"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${St(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class C0 extends $t{clone(){return new C0(null,st(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[iu,ru],[Wa,Ns]]){const o=i.map(a=>{const s=lr(n.encoding[a]);return Ze(s)?s.field:uu(s)?{expr:`${s.datum}`}:Is(s)?{expr:`${s.value}`}:void 0});(o[0]||o[1])&&(t=new C0(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(ho)){const i=n.typedFieldDef(ho);i.type===Gb&&(t=new C0(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){var t;const n=((t=this.fields)!==null&&t!==void 0?t:[]).filter(We);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${St(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}}class Vw extends $t{clone(){return new Vw(null,this.projection,st(this.fields),st(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[iu,ru],[Wa,Ns]]){const i=r.map(a=>{const s=lr(n.encoding[a]);return Ze(s)?s.field:uu(s)?{expr:`${s.datum}`}:Is(s)?{expr:`${s.value}`}:void 0}),o=r[0]===Wa?"2":"";(i[0]||i[1])&&(t=new Vw(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(We))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${St(this.fields)} ${St(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Cp extends $t{clone(){return new Cp(null,st(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){var t;return new Set([this.transform.impute,this.transform.key,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Cp(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,o=r.y;if(Ze(i)&&Ze(o)){const a=i.impute?i:o.impute?o:void 0;if(a===void 0)return;const s=i.impute?o:o.impute?i:void 0,{method:l,value:u,frame:c,keyvals:d}=a.impute,f=lbe(n.mark,r);return new Cp(t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:a.field,key:s.field},l?{method:l}:{}),u!==void 0?{value:u}:{}),c?{frame:c}:{}),d!==void 0?{keyvals:d}:{}),f.length?{groupby:f}:{}))}return null}hash(){return`Impute ${St(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:o,value:a,frame:s=[null,null]}=this.transform,l=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:t,key:n},r?{keyvals:aut(r)?this.processSequence(r):r}:{}),{method:"value"}),o?{groupby:o}:{}),{value:!i||i==="value"?a:null});if(i&&i!=="value"){const u=Object.assign({type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:s,ignorePeers:!1},o?{groupby:o}:{}),c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}}var Sft=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class EE extends $t{clone(){return new EE(null,st(this.transform))}constructor(t,n){var r,i,o;super(t),this.transform=n,this.transform=st(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:n.on,(o=a[1])!==null&&o!==void 0?o:n.loess]}dependentFields(){var t;return new Set([this.transform.loess,this.transform.on,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${St(this.transform)}`}assemble(){const t=this.transform,{loess:n,on:r}=t,i=Sft(t,["loess","on"]);return Object.assign({type:"loess",x:r,y:n},i)}}class Yw extends $t{clone(){return new Yw(null,st(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const o=n.component.data.sources,{from:a}=r;let s=null;if(sut(a)){let l=Kye(a.data,o);l||(l=new ph(a.data),o.push(l));const u=n.getName(`lookup_${i}`);s=new Ci(l,u,on.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=s}else if(lut(a)){const l=a.param;r=Object.assign({as:l},r);let u;try{u=n.getSelectionComponent(_n(l),l)}catch(c){throw new Error(Vot(l))}if(s=u.materialized,!s)throw new Error(Yot(l))}return new Yw(t,r,s.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Ee(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${St({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:Ee(this.transform.as)}:{});else{let n=this.transform.as;We(n)||(ve(jot),n="_lookup"),t={as:[n]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}}var kft=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class XE extends $t{clone(){return new XE(null,st(this.transform))}constructor(t,n){var r,i,o;super(t),this.transform=n,this.transform=st(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:"prob",(o=a[1])!==null&&o!==void 0?o:"value"]}dependentFields(){var t;return new Set([this.transform.quantile,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${St(this.transform)}`}assemble(){const t=this.transform,{quantile:n}=t,r=kft(t,["quantile"]);return Object.assign({type:"quantile",field:n},r)}}var _ft=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class LE extends $t{clone(){return new LE(null,st(this.transform))}constructor(t,n){var r,i,o;super(t),this.transform=n,this.transform=st(n);const a=(r=this.transform.as)!==null&&r!==void 0?r:[void 0,void 0];this.transform.as=[(i=a[0])!==null&&i!==void 0?i:n.on,(o=a[1])!==null&&o!==void 0?o:n.regression]}dependentFields(){var t;return new Set([this.transform.regression,this.transform.on,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${St(this.transform)}`}assemble(){const t=this.transform,{regression:n,on:r}=t,i=_ft(t,["regression","on"]);return Object.assign({type:"regression",x:r,y:n},i)}}class RE extends $t{clone(){return new RE(null,st(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){var n;this.transform.groupby=bl(((n=this.transform.groupby)!==null&&n!==void 0?n:[]).concat(t),r=>r)}producedFields(){}dependentFields(){var t;return new Set([this.transform.pivot,this.transform.value,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}hash(){return`PivotTransform ${St(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:t,value:n},i!==void 0?{limit:i}:{}),o!==void 0?{op:o}:{}),r!==void 0?{groupby:r}:{})}}class CE extends $t{clone(){return new CE(null,st(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${St(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Jye(e){let t=0;function n(r,i){var o;if(r instanceof ph&&!r.isGenerator&&!Ng(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof oi&&(r.parent instanceof ph&&!i.source?(i.format=Object.assign(Object.assign({},(o=i.format)!==null&&o!==void 0?o:{}),{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof Eb){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof pZ||r instanceof hZ||r instanceof Cw||r instanceof Wb||r instanceof Mg||r instanceof Vw||r instanceof vs||r instanceof Yw||r instanceof Xb||r instanceof Nh||r instanceof WE||r instanceof IE||r instanceof GE||r instanceof EE||r instanceof XE||r instanceof LE||r instanceof Qd||r instanceof CE||r instanceof RE)&&i.transform.push(r.assemble()),(r instanceof Rl||r instanceof Ll||r instanceof Cp||r instanceof Au||r instanceof C0)&&i.transform.push(...r.assemble()),r instanceof Ci&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Ci?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Ci&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let a=i.name;!i.source||i.transform.length>0?e.push(i):a=i.source;for(const s of r.children)n(s,{name:null,source:a,transform:[]});break}}}return n}function Gft(e){const t=[],n=Jye(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Ift(e,t){var n,r;const i=[],o=Jye(i);let a=0;for(const l of e.sources){l.hasName()||(l.dataName=`source_${a++}`);const u=l.assemble();o(l,u)}for(const l of i)l.transform.length===0&&delete l.transform;let s=0;for(const[l,u]of i.entries())((n=u.transform)!==null&&n!==void 0?n:[]).length===0&&!u.source&&i.splice(s++,0,i.splice(l,1)[0]);for(const l of i)for(const u of(r=l.transform)!==null&&r!==void 0?r:[])u.type==="lookup"&&(u.from=e.outputNodes[u.from].getSource());for(const l of i)l.name in t&&(l.values=t[l.name]);return i}function Wft(e){return e==="top"||e==="left"||Oe(e)?"header":"footer"}function Eft(e){for(const t of ma)Xft(e,t);lQ(e,"x"),lQ(e,"y")}function Xft(e,t){var n;const{facet:r,config:i,child:o,component:a}=e;if(e.channelHasField(t)){const s=r[t],l=zg("title",null,i,t);let u=L0(s,i,{allowDisabling:!0,includeDefault:l===void 0||!!l});o.component.layoutHeaders[t].title&&(u=ce(u)?u.join(", "):u,u+=` / ${o.component.layoutHeaders[t].title}`,o.component.layoutHeaders[t].title=null);const c=zg("labelOrient",s.header,i,t),d=s.header!==null?nr((n=s.header)===null||n===void 0?void 0:n.labels,i.header.labels,!0):!1,f=yt(["bottom","right"],c)?"footer":"header";a.layoutHeaders[t]={title:s.header!==null?u:null,facetFieldDef:s,[f]:t==="facet"?[]:[Bye(e,t,d)]}}}function Bye(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function lQ(e,t){var n;const{child:r}=e;if(r.component.axes[t]){const{layoutHeaders:i,resolve:o}=e.component;if(o.axis[t]=oJ(o,t),o.axis[t]==="shared"){const a=t==="x"?"column":"row",s=i[a];for(const l of r.component.axes[t]){const u=Wft(l.get("orient"));(n=s[u])!==null&&n!==void 0||(s[u]=[Bye(e,a,!1)]);const c=Fv(l,"main",e.config,{header:!0});c&&s[u][0].axes.push(c),l.mainExtracted=!0}}}}function Lft(e){pJ(e),eW(e,"width"),eW(e,"height")}function Rft(e){pJ(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";eW(e,t),eW(e,n)}function pJ(e){for(const t of e.children)t.parseLayoutSize()}function eW(e,t){var n;const r=yye(t),i=nE(r),o=e.component.resolve,a=e.component.layoutSize;let s;for(const l of e.children){const u=l.component.layoutSize.getWithExplicit(r),c=(n=o.scale[i])!==null&&n!==void 0?n:xye(i,e);if(c==="independent"&&u.value==="step"){s=void 0;break}if(s){if(c==="independent"&&s.value!==u.value){s=void 0;break}s=Dd(s,u,r,"")}else s=u}if(s){for(const l of e.children)e.renameSignal(l.getName(r),e.getName(t)),l.component.layoutSize.set(r,"merged",!1);a.setWithExplicit(t,s)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function Cft(e){const{size:t,component:n}=e;for(const r of lu){const i=mo(r);if(t[i]){const o=t[i];n.layoutSize.set(i,Dl(o)?"step":o,!0)}else{const o=Vft(e,i);n.layoutSize.set(i,o,!1)}}}function Vft(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),a=i.get("range");if(Rr(o)){const s=UI(r.view,t);return _f(a)||Dl(s)?"step":s}else return gN(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return gN(r.view,t);{const o=UI(r.view,t);return Dl(o)?o.step:o}}}function RN(e,t,n){return _e(t,Object.assign({suffix:`by_${_e(e)}`},n!=null?n:{}))}class yx extends Hye{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=yJ(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!lZ(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=ge(t),r={};for(const i of n){if(![Bu,Ku].includes(i)){ve(oE(i,"facet"));break}const o=t[i];if(o.field===void 0){ve(lN(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){const r=TH(t,n);return r.header?r.header=Ki(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=VE(this),this.child.parseData()}parseLayoutSize(){pJ(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Eft(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){var t,n,r;const i={};for(const o of ma)for(const a of rJ){const s=this.component.layoutHeaders[o],l=s[a],{facetFieldDef:u}=s;if(u){const c=zg("titleOrient",u.header,this.config,o);if(["right","bottom"].includes(c)){const d=SE(o,c);(t=i.titleAnchor)!==null&&t!==void 0||(i.titleAnchor={}),i.titleAnchor[d]="end"}}if(l!=null&&l[0]){const c=o==="row"?"height":"width",d=a==="header"?"headerBand":"footerBand";o!=="facet"&&!this.child.component.layoutSize.get(c)&&((n=i[d])!==null&&n!==void 0||(i[d]={}),i[d][o]=.5),s.title&&((r=i.offset)!==null&&r!==void 0||(i.offset={}),i.offset[o==="row"?"rowTitle":"columnTitle"]=10)}}return i}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof yx))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof yx?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:_e(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof yx){if(this.child.channelHasField("column")){const i=_e(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of lu){const o=this.child.component.scales[i];if(o&&!o.merged){const a=o.get("type"),s=o.get("range");if(Rr(a)&&_f(s)){const l=_E(this.child,i),u=cJ(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):ve(cH(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:a,as:s}=this.getCardinalityAggregateForChild(),l=[];for(const c of ma){const d=this.facet[c];if(d){l.push(_e(d));const{bin:f,sort:h}=d;if(un(f)&&l.push(_e(d,{binSuffix:"end"})),Xl(h)){const{field:m,op:g=cE}=h,y=RN(d,h);r&&i?(o.push(y),a.push("max"),s.push(y)):(o.push(m),a.push(g),s.push(y))}else if(ce(h)){const m=Og(d,c);o.push(m),a.push("max"),s.push(m)}}}const u=!!r&&!!i;return Object.assign({name:t,data:n,groupby:l},u||o.length>0?{aggregate:Object.assign(Object.assign({},u?{cross:u}:{}),o.length?{fields:o,ops:a,as:s}:{})}:{})}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Xl(r.sort)?[RN(r,r.sort,{expr:"datum"})]:ce(r.sort)?[Og(r,t,{expr:"datum"})]:[_e(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Xl(i)?i.order:!ce(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var t;const{facet:n,config:r}=this;if(n.facet)return GN(n.facet,"facet",r);const i={row:["top","bottom"],column:["left","right"]};for(const o of nJ)if(n[o]){const a=zg("labelOrient",(t=n[o])===null||t===void 0?void 0:t.header,r,o);if(i[o].includes(a))return GN(n[o],o,r)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Gft(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},o?{title:o}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:ma.map(s=>this.facetSortFields(s)).flat(),order:ma.map(s=>this.facetSortOrder(s)).flat()}}),r.length>0?{data:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup(Nut(this,[])))]}getMapping(){return this.facet}}function Yft(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(Xl(o.sort)){const{field:a,op:s=cE}=o.sort;e=i=new Nh(e,{joinaggregate:[{op:s,field:a,as:RN(o,o.sort,{forAs:!0})}],groupby:[_e(o)]})}return i}return null}function Kye(e,t){var n,r,i,o;for(const a of t){const s=a.data;if(e.name&&a.hasName()&&e.name!==a.dataName)continue;const l=(n=e.format)===null||n===void 0?void 0:n.mesh,u=(r=s.format)===null||r===void 0?void 0:r.feature;if(l&&u)continue;const c=(i=e.format)===null||i===void 0?void 0:i.feature;if((c||u)&&c!==u)continue;const d=(o=s.format)===null||o===void 0?void 0:o.mesh;if(!((l||d)&&l!==d)){if(Lw(e)&&Lw(s)){if(gl(e.values,s.values))return a}else if(Ng(e)&&Ng(s)){if(e.url===s.url)return a}else if(Obe(e)&&e.name===a.dataName)return a}}return null}function Tft(e,t){if(e.data||!e.parent){if(e.data===null){const r=new ph({values:[]});return t.push(r),r}const n=Kye(e.data,t);if(n)return Wd(e.data)||(n.data.format=M0e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new ph(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Nft(e,t,n){var r,i;let o=0;for(const a of t.transforms){let s,l;if(yut(a))l=e=new Mg(e,a),s="derived";else if(AH(a)){const u=Zdt(a);l=e=(r=oi.makeWithAncestors(e,{},u,n))!==null&&r!==void 0?r:e,e=new Wb(e,t,a.filter)}else if(Vbe(a))l=e=Rl.makeFromTransform(e,a,t),s="number";else if(xut(a))s="date",n.getWithExplicit(a.field).value===void 0&&(e=new oi(e,{[a.field]:s}),n.set(a.field,s,!1)),l=e=Ll.makeFromTransform(e,a);else if(wut(a))l=e=vs.makeFromTransform(e,a),s="number",tJ(t)&&(e=new Qd(e));else if(Cbe(a))l=e=Yw.make(e,t,a,o++),s="derived";else if(mut(a))l=e=new Xb(e,a),s="number";else if(gut(a))l=e=new Nh(e,a),s="number";else if(Zut(a))l=e=Au.makeFromTransform(e,a),s="derived";else if(Sut(a))l=e=new WE(e,a),s="derived";else if(but(a))l=e=new IE(e,a),s="derived";else if(uut(a))l=e=new RE(e,a),s="derived";else if(hut(a))e=new CE(e,a);else if(vut(a))l=e=Cp.makeFromTransform(e,a),s="derived";else if(cut(a))l=e=new GE(e,a),s="derived";else if(dut(a))l=e=new XE(e,a),s="derived";else if(fut(a))l=e=new LE(e,a),s="derived";else if(put(a))l=e=new EE(e,a),s="derived";else{ve(Pot(a));continue}if(l&&s!==void 0)for(const u of(i=l.producedFields())!==null&&i!==void 0?i:[])n.set(u,s,!1)}return e}function VE(e){var t,n,r,i,o,a,s,l,u,c;let d=Tft(e,e.component.data.sources);const{outputNodes:f,outputNodeRefCounts:h}=e.component.data,m=e.data,g=!(m&&(Wd(m)||Ng(m)||Lw(m)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Vut;Wd(m)?(zbe(m)?d=new hZ(d,m.sequence):UH(m)&&(d=new pZ(d,m.graticule)),g.parseNothing=!0):((t=m==null?void 0:m.format)===null||t===void 0?void 0:t.parse)===null&&(g.parseNothing=!0),d=(n=oi.makeExplicit(d,e,g))!==null&&n!==void 0?n:d,d=new Qd(d);const y=e.parent&&Lb(e.parent);($n(e)||xs(e))&&y&&(d=(r=Rl.makeFromEncoding(d,e))!==null&&r!==void 0?r:d),e.transforms.length>0&&(d=Nft(d,e,g));const v=kdt(e),w=Sdt(e);d=(i=oi.makeWithAncestors(d,{},Object.assign(Object.assign({},v),w),g))!==null&&i!==void 0?i:d,$n(e)&&(d=C0.parseAll(d,e),d=Vw.parseAll(d,e)),($n(e)||xs(e))&&(y||(d=(o=Rl.makeFromEncoding(d,e))!==null&&o!==void 0?o:d),d=(a=Ll.makeFromEncoding(d,e))!==null&&a!==void 0?a:d,d=Mg.parseAllForSortIndex(d,e));const Z=e.getDataName(on.Raw),k=new Ci(d,Z,on.Raw,h);if(f[Z]=k,d=k,$n(e)){const E=vs.makeFromEncoding(d,e);E&&(d=E,tJ(e)&&(d=new Qd(d))),d=(s=Cp.makeFromEncoding(d,e))!==null&&s!==void 0?s:d,d=(l=Au.makeFromEncoding(d,e))!==null&&l!==void 0?l:d}$n(e)&&(d=(u=Cw.make(d,e))!==null&&u!==void 0?u:d);const _=e.getDataName(on.Main),R=new Ci(d,_,on.Main,h);f[_]=R,d=R,$n(e)&&yct(e,R);let I=null;if(xs(e)){const E=e.getName("facet");d=(c=Yft(d,e.facet))!==null&&c!==void 0?c:d,I=new Eb(d,e,E,R.getSource()),f[E]=I}return Object.assign(Object.assign({},e.component.data),{outputNodes:f,outputNodeRefCounts:h,raw:k,main:R,facetRoot:I,ancestorParse:g})}class Fft extends fJ{constructor(t,n,r,i){var o,a,s,l;super(t,"concat",n,r,i,t.resolve),(((a=(o=t.resolve)===null||o===void 0?void 0:o.axis)===null||a===void 0?void 0:a.x)==="shared"||((l=(s=t.resolve)===null||s===void 0?void 0:s.axis)===null||l===void 0?void 0:l.y)==="shared")&&ve(Mot),this.children=this.getChildren(t).map((u,c)=>yJ(u,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=VE(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ge(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return yE(t)?t.vconcat:KH(t)?t.hconcat:t.concat}parseLayoutSize(){Rft(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=iJ(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:t.getName("group")},n?{title:n}:{}),r?{style:r}:{}),i?{encode:{update:i}}:{}),t.assembleGroup())})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return Object.assign(Object.assign({},t!=null?{columns:t}:{}),{bounds:"full",align:"each"})}}function Mft(e){return e===!1||e===null}const Oft=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},ibe),{labelExpr:1,encode:1}),Dye=ge(Oft);class hJ extends xc{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new hJ(st(this.explicit),st(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Mft(this.get(t))}hasOrientSignalRef(){return Oe(this.explicit.orient)}}function zft(e,t,n){var r;const{encoding:i,config:o}=e,a=(r=lr(i[t]))!==null&&r!==void 0?r:lr(i[su(t)]),s=e.axis(t)||{},{format:l,formatType:u}=s;if(ch(u))return Object.assign({text:cs({fieldOrDatumDef:a,field:"datum.value",format:l,formatType:u,config:o})},n);if(l===void 0&&u===void 0&&o.customFormatTypes){if(Vg(a)==="quantitative"){if(Yg(a)&&a.stack==="normalize"&&o.normalizedNumberFormatType)return Object.assign({text:cs({fieldOrDatumDef:a,field:"datum.value",format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,config:o})},n);if(o.numberFormatType)return Object.assign({text:cs({fieldOrDatumDef:a,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o})},n)}if(Vg(a)==="temporal"&&o.timeFormatType&&Ze(a)&&!a.timeUnit)return Object.assign({text:cs({fieldOrDatumDef:a,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})},n)}return n}function Pft(e){return lu.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Aft(n,e)]),t),{})}const jft={bottom:"top",top:"bottom",left:"right",right:"left"};function Hft(e){var t;const{axes:n,resolve:r}=e.component,i={top:0,bottom:0,right:0,left:0};for(const o of e.children){o.parseAxesAndHeaders();for(const a of ge(o.component.axes))r.axis[a]=oJ(e.component.resolve,a),r.axis[a]==="shared"&&(n[a]=Jft(n[a],o.component.axes[a]),n[a]||(r.axis[a]="independent",delete n[a]))}for(const o of lu){for(const a of e.children)if(a.component.axes[o]){if(r.axis[o]==="independent"){n[o]=((t=n[o])!==null&&t!==void 0?t:[]).concat(a.component.axes[o]);for(const s of a.component.axes[o]){const{value:l,explicit:u}=s.getWithExplicit("orient");if(!Oe(l)){if(i[l]>0&&!u){const c=jft[l];i[l]>i[c]&&s.set("orient",c,!1)}i[l]++}}}delete a.component.axes[o]}if(r.axis[o]==="independent"&&n[o]&&n[o].length>1)for(const a of n[o])a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function Jft(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const a=i.getWithExplicit("orient"),s=o.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;e[r]=Bft(i,o)}}}else return t.map(n=>n.clone());return e}function Bft(e,t){for(const n of Dye){const r=Dd(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return fge(i,o);case"gridScale":return{explicit:i.explicit,value:nr(i.value,o.value)}}return xE(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function Kft(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Oe(n.labelAngle)?n.labelAngle:Ew(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===pye(r,i))return!0}return e===n[t]}const Dft=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Aft(e,t){var n,r,i;let o=t.axis(e);const a=new hJ,s=lr(t.encoding[e]),{mark:l,config:u}=t,c=(o==null?void 0:o.orient)||((n=u[e==="x"?"axisX":"axisY"])===null||n===void 0?void 0:n.orient)||((r=u.axis)===null||r===void 0?void 0:r.orient)||Wct(e),d=t.getScaleComponent(e).get("type"),f=wct(e,d,c,t.config),h=o!==void 0?!o:kN("disable",u.style,o==null?void 0:o.style,f).configValue;if(a.set("disable",h,o!==void 0),h)return a;o=o||{};const m=_ct(s,o,e,u.style,f),g={fieldOrDatumDef:s,axis:o,channel:e,model:t,scaleType:d,orient:c,labelAngle:m,mark:l,config:u};for(const w of Dye){const Z=w in K$?K$[w](g):S$(w)?o[w]:void 0,k=Z!==void 0,_=Kft(Z,w,o,t,e);if(k&&_)a.set(w,Z,_);else{const{configValue:R=void 0,configFrom:I=void 0}=S$(w)&&w!=="values"?kN(w,u.style,o.style,f):{},E=R!==void 0;k&&!E?a.set(w,Z,_):(I!=="vgAxisConfig"||Dft.has(w)&&E||dZ(R)||Oe(R))&&a.set(w,R,!1)}}const y=(i=o.encoding)!==null&&i!==void 0?i:{},v=rbe.reduce((w,Z)=>{var k;if(!a.hasAxisPart(Z))return w;const _=vye((k=y[Z])!==null&&k!==void 0?k:{},t),R=Z==="labels"?zft(t,e,_):_;return R!==void 0&&!Dt(R)&&(w[Z]={update:R}),w},{});return Dt(v)||a.set("encode",v,!!o.encoding||o.labelAngle!==void 0),a}function Uft({encoding:e,size:t}){for(const n of lu){const r=mo(n);Dl(t[r])&&yl(e[n])&&(delete t[r],ve(bge(r)))}return t}function $ft(e,t,n){const r=Ki(e),i=Mt("orient",r,n);if(r.orient=tpt(r.type,t,i),i!==void 0&&i!==r.orient&&ve(aat(r.orient,i)),r.type==="bar"&&r.orient){const o=Mt("cornerRadiusEnd",r,n);if(o!==void 0){const a=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:_st[r.orient];for(const s of a)r[s]=o;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}return Mt("opacity",r,n)===void 0&&(r.opacity=qft(r.type,t)),Mt("cursor",r,n)===void 0&&(r.cursor=Qft(r,t,n)),r}function Qft(e,t,n){return t.href||e.href||Mt("href",e,n)?"pointer":e.cursor}function qft(e,t){if(yt([uE,_H,GH,IH],e)&&!NH(t))return .7}function ept(e,t,{graticule:n}){if(n)return!1;const r=sh("filled",e,t),i=e.type;return nr(r,i!==uE&&i!==lE&&i!==jI)}function tpt(e,t,n){switch(e){case uE:case GH:case IH:case Yge:case mst:case hst:return}const{x:r,y:i,x2:o,y2:a}=t;switch(e){case sE:if(Ze(r)&&(Nr(r.bin)||Ze(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ze(i)&&(Nr(i.bin)||Ze(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o)return(Ze(r)&&r.type===lh&&!un(r.bin)||pN(r))&&Ze(i)&&Nr(i.bin)?"horizontal":"vertical";if(!a)return(Ze(i)&&i.type===lh&&!un(i.bin)||pN(i))&&Ze(r)&&Nr(r.bin)?"vertical":"horizontal"}case jI:if(o&&!(Ze(r)&&Nr(r.bin))&&a&&!(Ze(i)&&Nr(i.bin)))return;case aE:if(a)return Ze(i)&&Nr(i.bin)?"horizontal":"vertical";if(o)return Ze(r)&&Nr(r.bin)?"vertical":"horizontal";if(e===jI){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case lE:case _H:{const s=yl(r),l=yl(i);if(n)return n;if(s&&!l)return e!=="tick"?"horizontal":"vertical";if(!s&&l)return e!=="tick"?"vertical":"horizontal";if(s&&l){const u=r,c=i,d=u.type===Rg,f=c.type===Rg;return d&&!f?e!=="tick"?"vertical":"horizontal":!d&&f?e!=="tick"?"horizontal":"vertical":!u.aggregate&&c.aggregate?e!=="tick"?"vertical":"horizontal":u.aggregate&&!c.aggregate&&e!=="tick"?"horizontal":"vertical"}else return}}return"vertical"}const npt={vgMark:"arc",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ta(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),ii("x",e,{defaultPos:"mid"})),ii("y",e,{defaultPos:"mid"})),Ud(e,"radius")),Ud(e,"theta"))},rpt={vgMark:"area",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},Ta(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),$I("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"})),$I("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"})),eJ(e))},ipt={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},Ta(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Ud(e,"x")),Ud(e,"y"))},opt={vgMark:"shape",encodeEntry:e=>Object.assign({},Ta(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[Object.assign({type:"geoshape",projection:e.projectionName()},n&&Ze(n)&&n.type===Gb?{field:_e(n,{expr:"datum"})}:{})]}},apt={vgMark:"image",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},Ta(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),Ud(e,"x")),Ud(e,"y")),QH(e,"url"))},spt={vgMark:"line",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ta(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),ii("x",e,{defaultPos:"mid"})),ii("y",e,{defaultPos:"mid"})),yr("size",e,{vgChannel:"strokeWidth"})),eJ(e))},lpt={vgMark:"trail",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ta(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),ii("x",e,{defaultPos:"mid"})),ii("y",e,{defaultPos:"mid"})),yr("size",e)),eJ(e))};function mJ(e,t){const{config:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ta(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),ii("x",e,{defaultPos:"mid"})),ii("y",e,{defaultPos:"mid"})),yr("size",e)),yr("angle",e)),upt(e,n,t))}function upt(e,t,n){return n?{shape:{value:n}}:yr("shape",e)}const cpt={vgMark:"symbol",encodeEntry:e=>mJ(e)},dpt={vgMark:"symbol",encodeEntry:e=>mJ(e,"circle")},fpt={vgMark:"symbol",encodeEntry:e=>mJ(e,"square")},ppt={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},Ta(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Ud(e,"x")),Ud(e,"y"))},hpt={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:Object.assign(Object.assign(Object.assign(Object.assign({},Ta(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),$I("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),$I("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),yr("size",e,{vgChannel:"strokeWidth"}))}},mpt={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ta(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),ii("x",e,{defaultPos:"mid"})),ii("y",e,{defaultPos:"mid"})),QH(e)),yr("size",e,{vgChannel:"fontSize"})),yr("angle",e)),j$("align",gpt(e.markDef,n,t))),j$("baseline",bpt(e.markDef,n,t))),ii("radius",e,{defaultPos:null})),ii("theta",e,{defaultPos:null}))}};function gpt(e,t,n){if(Mt("align",e,n)===void 0)return"center"}function bpt(e,t,n){if(Mt("baseline",e,n)===void 0)return"middle"}const ypt={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",o=r==="horizontal"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ta(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),ii("x",e,{defaultPos:"mid",vgChannel:"xc"})),ii("y",e,{defaultPos:"mid",vgChannel:"yc"})),yr("size",e,{defaultValue:vpt(e),vgChannel:i})),{[o]:gn(Mt("thickness",n,t))})}};function vpt(e){var t;const{config:n,markDef:r}=e,{orient:i}=r,o=i==="horizontal"?"width":"height",a=e.getScaleComponent(i==="horizontal"?"x":"y"),s=(t=Mt("size",r,n,{vgChannel:o}))!==null&&t!==void 0?t:n.tick.bandSize;if(s!==void 0)return s;{const l=a?a.get("range"):void 0;return l&&_f(l)&&At(l.step)?l.step*3/4:AI(n.view,o)*3/4}}const vk={arc:npt,area:rpt,bar:ipt,circle:dpt,geoshape:opt,image:apt,line:spt,point:cpt,rect:ppt,rule:hpt,square:fpt,text:mpt,tick:ypt,trail:lpt};function xpt(e){if(yt([lE,aE,gst],e.mark)){const t=lbe(e.mark,e.encoding);if(t.length>0)return wpt(e,t)}else if(e.mark===sE){const t=sN.some(n=>Mt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Zpt(e)}return gJ(e)}const uQ="faceted_path_";function wpt(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:uQ+e.requestDataName(on.Main),data:e.requestDataName(on.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:gJ(e,{fromPrefix:uQ})}]}const cQ="stack_group_";function Zpt(e){var t;const[n]=gJ(e,{fromPrefix:cQ}),r=e.scaleName(e.stack.fieldChannel),i=(u={})=>e.vgField(e.stack.fieldChannel,u),o=(u,c)=>{const d=[i({prefix:"min",suffix:"start",expr:c}),i({prefix:"max",suffix:"start",expr:c}),i({prefix:"min",suffix:"end",expr:c}),i({prefix:"max",suffix:"end",expr:c})];return`${u}(${d.map(f=>`scale('${r}',${f})`).join(",")})`};let a,s;e.stack.fieldChannel==="x"?(a=Object.assign(Object.assign({},Eg(n.encode.update,["y","yc","y2","height",...sN])),{x:{signal:o("min","datum")},x2:{signal:o("max","datum")},clip:{value:!0}}),s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update=Object.assign(Object.assign({},oo(n.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(a=Object.assign(Object.assign({},Eg(n.encode.update,["x","xc","x2","width"])),{y:{signal:o("min","datum")},y2:{signal:o("max","datum")},clip:{value:!0}}),s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update=Object.assign(Object.assign({},oo(n.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const u of sN){const c=sh(u,e.markDef,e.config);n.encode.update[u]?(a[u]=n.encode.update[u],delete n.encode.update[u]):c&&(a[u]=gn(c)),c&&(n.encode.update[u]={value:0})}const l=[];if(((t=e.stack.groupbyChannels)===null||t===void 0?void 0:t.length)>0)for(const u of e.stack.groupbyChannels){const c=e.fieldDef(u),d=_e(c);d&&l.push(d),(c!=null&&c.bin||c!=null&&c.timeUnit)&&l.push(_e(c,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((u,c)=>{if(n.encode.update[c])return Object.assign(Object.assign({},u),{[c]:n.encode.update[c]});{const d=sh(c,e.markDef,e.config);return d!==void 0?Object.assign(Object.assign({},u),{[c]:gn(d)}):u}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(on.Main),name:cQ+e.requestDataName(on.Main),groupby:l,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:s},marks:[n]}]}]}function Spt(e){var t;const{encoding:n,stack:r,mark:i,markDef:o,config:a}=e,s=n.order;if(!(!ce(s)&&Is(s)&&oN(s.value)||!s&&oN(Mt("order",o,a)))){if((ce(s)||Ze(s))&&!r)return uge(s,{expr:"datum"});if(Gf(i)){const l=o.orient==="horizontal"?"y":"x",u=n[l];if(Ze(u)){const c=u.sort;if(ce(c))return{field:_e(u,{prefix:l,suffix:"sort_index",expr:"datum"})};if(Xl(c))return{field:_e({aggregate:NH(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(Jge(c)){const d=e.fieldDef(c.encoding);return{field:_e(d,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:_e(u,{binSuffix:!((t=e.stack)===null||t===void 0)&&t.impute?"mid":void 0,expr:"datum"})}}return}}}function gJ(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,a=nr(r.clip,kpt(e),_pt(e)),s=sge(r),l=i.key,u=Spt(e),c=Gpt(e),d=Mt("aria",r,o),f=vk[n].postEncodingTransform?vk[n].postEncodingTransform(e):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("marks"),type:vk[n].vgMark},a?{clip:!0}:{}),s?{style:s}:{}),l?{key:l.field}:{}),u?{sort:u}:{}),c||{}),d===!1?{aria:d}:{}),{from:{data:t.fromPrefix+e.requestDataName(on.Main)},encode:{update:vk[n].encodeEntry(e)}}),f?{transform:f}:{})]}function kpt(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function _pt(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Gpt(e){if(!e.component.selection)return null;const t=ge(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=ge(r.component.selection).length,r=r.parent;return n?{interactive:t>0||!!e.encoding.tooltip}:null}class Aye extends Hye{constructor(t,n,r,i={},o){var a;super(t,"unit",n,r,o,void 0,G$(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const s=Jl(t.mark)?Object.assign({},t.mark):{type:t.mark},l=s.type;s.filled===void 0&&(s.filled=ept(s,o,{graticule:t.data&&UH(t.data)}));const u=this.encoding=nlt(t.encoding||{},l,s.filled,o);this.markDef=$ft(s,u,o),this.size=Uft({encoding:u,size:G$(t)?Object.assign(Object.assign(Object.assign({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):i}),this.stack=Ebe(l,u),this.specifiedScales=this.initScales(l,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=((a=t.params)!==null&&a!==void 0?a:[]).filter(c=>JH(c))}get hasProjection(){const{encoding:t}=this,n=this.mark===Tge,r=t&&Qit.some(i=>rt(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return rE.reduce((r,i)=>{var o;const a=lr(n[i]);return a&&(r[i]=this.initScale((o=a.scale)!==null&&o!==void 0?o:{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Ki(t);return ce(n)&&(i.domain=n.map(Go)),ce(r)&&(i.range=r.map(Go)),i}initAxes(t){return lu.reduce((n,r)=>{const i=t[r];if(rt(i)||r===Vn&&rt(t.x2)||r===Xr&&rt(t.y2)){const o=rt(i)?i.axis:void 0;n[r]=o&&this.initAxis(Object.assign({},o))}return n},{})}initAxis(t){const n=ge(t),r={};for(const i of n){const o=t[i];r[i]=dZ(o)?age(o):Go(o)}return r}initLegends(t){return lot.reduce((n,r)=>{const i=lr(t[r]);if(i&&cot(r)){const o=i.legend;n[r]=o&&Ki(o)}return n},{})}parseData(){this.component.data=VE(this)}parseLayoutSize(){Cft(this)}parseSelections(){this.component.selection=bct(this,this.selection)}parseMarkGroup(){this.component.mark=xpt(this)}parseAxesAndHeaders(){this.component.axes=Pft(this)}assembleSelectionTopLevelSignals(t){return Fut(this,t)}assembleSignals(){return[...cye(this),...Tut(this,[])]}assembleSelectionData(t){return Mut(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return iJ(this)}assembleMarks(){var t;let n=(t=this.component.mark)!==null&&t!==void 0?t:[];return(!this.parent||!Lb(this.parent))&&(n=jbe(this,n)),n.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};if(t!==void 0)return t;if(this.encoding.x||this.encoding.y)return"cell"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Rp(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Bl(n)}typedFieldDef(t){const n=this.fieldDef(t);return Ea(n)?n:null}}class bJ extends fJ{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);const a=Object.assign(Object.assign(Object.assign({},i),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((s,l)=>{if(vE(s))return new bJ(s,this,this.getName(`layer_${l}`),a,o);if(vc(s))return new Aye(s,this,this.getName(`layer_${l}`),a,o);throw new Error(uH(s))})}parseData(){this.component.data=VE(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Lft(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ge(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Hft(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),cye(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),iJ(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Ee(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Out(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),Iye(this))}}function yJ(e,t,n,r,i){if(dE(e))return new yx(e,t,n,i);if(vE(e))return new bJ(e,t,n,r,i);if(vc(e))return new Aye(e,t,n,r,i);if(Ilt(e))return new Fft(e,t,n,i);throw new Error(uH(e))}var Ipt=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Wpt(e,t={}){t.logger&&Lat(t.logger),t.fieldTitle&&ebe(t.fieldTitle);try{const n=Wbe(fb(t.config,e.config)),r=Fbe(e,n),i=yJ(r,null,"",void 0,n);return i.parse(),Odt(i.component.data,i),{spec:Xpt(i,Ept(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&Rat(),t.fieldTitle&&Bst()}}function Ept(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):We(t)&&(t={type:t}),i&&o&&Lut(t.type)){if(i==="step"&&o==="step")ve(c$()),t.type="pad";else if(i==="step"||o==="step"){const a=i==="step"?"width":"height";ve(c$(nE(a)));const s=a==="width"?"height":"width";t.type=Rut(s)}}return Object.assign(Object.assign(Object.assign({},ge(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t}),F$(n,!1)),F$(e,!0))}function Xpt(e,t,n={},r){const i=e.config?Plt(e.config):void 0,o=[].concat(e.assembleSelectionData([]),Ift(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:d}=t,f=Ipt(t,["params"]);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),f),s?{title:s}:{}),l?{style:l}:{}),u?{encode:{update:u}}:{}),{data:o}),a.length>0?{projections:a}:{}),e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...kbe(d)])),i?{config:i}:{}),r?{usermeta:r}:{})}const Lpt=zit.version,Rpt=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Xg,accessPathWithDatum:q4,compile:Wpt,contains:yt,deepEqual:gl,deleteNestedProperty:OI,duplicate:st,entries:Bd,every:U4,fieldIntersection:Q4,flatAccessWithDatum:z0e,getFirstDefined:nr,hasIntersection:$4,hash:St,internalField:H0e,isBoolean:Ww,isEmpty:Dt,isEqual:Bit,isInternalField:J0e,isNullOrFalse:oN,isNumeric:U1,keys:ge,logicalExpr:gx,mergeDeep:M0e,never:F0e,normalize:Fbe,normalizeAngle:Ew,omit:oo,pick:Eg,prefixGenerator:aN,removePathFromField:eH,replaceAll:oh,replacePathInField:Ia,resetIdCounter:Dit,setEqual:O0e,some:ih,stringify:sn,titleCase:eZ,unique:bl,uniqueId:j0e,vals:di,varName:_n,version:Lpt},Symbol.toStringTag,{value:"Module"}));function Uye(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Cpt="2.12.1",Vpt={version:Cpt};const vm="#fff",dQ="#888",Ypt={background:"#333",view:{stroke:dQ},title:{color:vm,subtitleColor:vm},style:{"guide-label":{fill:vm},"guide-title":{fill:vm}},axis:{domainColor:vm,gridColor:dQ,tickColor:vm}},zf="#4572a7",Tpt={background:"#fff",arc:{fill:zf},area:{fill:zf},line:{stroke:zf,strokeWidth:2},path:{stroke:zf},rect:{fill:zf},shape:{stroke:zf},symbol:{fill:zf,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Pf="#30a2da",lC="#cbcbcb",Npt="#999",Fpt="#333",fQ="#f0f0f0",pQ="#333",Mpt={arc:{fill:Pf},area:{fill:Pf},axis:{domainColor:lC,grid:!0,gridColor:lC,gridWidth:1,labelColor:Npt,labelFontSize:10,titleColor:Fpt,tickColor:lC,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:fQ,group:{fill:fQ},legend:{labelColor:pQ,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:pQ,titleFontSize:14,titlePadding:10},line:{stroke:Pf,strokeWidth:2},path:{stroke:Pf,strokeWidth:.5},rect:{fill:Pf},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Pf},bar:{binSpacing:2,fill:Pf,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},jf="#000",Opt={group:{fill:"#e5e5e5"},arc:{fill:jf},area:{fill:jf},line:{stroke:jf},path:{stroke:jf},rect:{fill:jf},shape:{stroke:jf},symbol:{fill:jf,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},zpt=22,Ppt="normal",hQ="Benton Gothic, sans-serif",mQ=11.5,jpt="normal",Hf="#82c6df",uC="Benton Gothic Bold, sans-serif",gQ="normal",bQ=13,Hy={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},Hpt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:uC,fontSize:zpt,fontWeight:Ppt},arc:{fill:Hf},area:{fill:Hf},line:{stroke:Hf,strokeWidth:2},path:{stroke:Hf},rect:{fill:Hf},shape:{stroke:Hf},symbol:{fill:Hf,size:30},axis:{labelFont:hQ,labelFontSize:mQ,labelFontWeight:jpt,titleFont:uC,titleFontSize:bQ,titleFontWeight:gQ},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:hQ,labelFontSize:mQ,symbolType:"square",titleFont:uC,titleFontSize:bQ,titleFontWeight:gQ},range:{category:Hy["category-6"],diverging:Hy["fireandice-6"],heatmap:Hy["fire-7"],ordinal:Hy["fire-7"],ramp:Hy["fire-7"]}},Jf="#ab5787",xk="#979797",Jpt={background:"#f9f9f9",arc:{fill:Jf},area:{fill:Jf},line:{stroke:Jf},path:{stroke:Jf},rect:{fill:Jf},shape:{stroke:Jf},symbol:{fill:Jf,size:30},axis:{domainColor:xk,domainWidth:.5,gridWidth:.2,labelColor:xk,tickColor:xk,tickWidth:.2,titleColor:xk},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Bf="#3e5c69",Bpt={background:"#fff",arc:{fill:Bf},area:{fill:Bf},line:{stroke:Bf},path:{stroke:Bf},rect:{fill:Bf},shape:{stroke:Bf},symbol:{fill:Bf},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},ta="#1696d2",yQ="#000000",Kpt="#FFFFFF",wk="Lato",cC="Lato",Dpt="Lato",Apt="#DEDDDD",Upt=18,Jy={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},$pt={background:Kpt,title:{anchor:"start",fontSize:Upt,font:wk},axisX:{domain:!0,domainColor:yQ,domainWidth:1,grid:!1,labelFontSize:12,labelFont:cC,labelAngle:0,tickColor:yQ,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:wk},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Apt,gridWidth:1,labelFontSize:12,labelFont:cC,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:wk,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:cC,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:wk,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Jy["six-groups-cat-1"],diverging:Jy["diverging-colors"],heatmap:Jy["diverging-colors"],ordinal:Jy["six-groups-seq"],ramp:Jy["shades-blue"]},area:{fill:ta},rect:{fill:ta},line:{color:ta,stroke:ta,strokeWidth:5},trail:{color:ta,stroke:ta,strokeWidth:0,size:1},path:{stroke:ta,strokeWidth:.5},point:{filled:!0},text:{font:Dpt,color:ta,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:ta,stroke:null}},arc:{fill:ta},shape:{stroke:ta},symbol:{fill:ta,size:30}},Kf="#3366CC",vQ="#ccc",Zk="Arial, sans-serif",Qpt={arc:{fill:Kf},area:{fill:Kf},path:{stroke:Kf},rect:{fill:Kf},shape:{stroke:Kf},symbol:{stroke:Kf},circle:{fill:Kf},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Zk,fontSize:12},"guide-title":{font:Zk,fontSize:12},"group-title":{font:Zk,fontSize:12}},title:{font:Zk,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:vQ,tickColor:vQ,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},vJ=e=>e*(1/3+1),xQ=vJ(9),wQ=vJ(10),ZQ=vJ(12),By="Segoe UI",SQ="wf_standard-font, helvetica, arial, sans-serif",kQ="#252423",Ky="#605E5C",_Q="transparent",qpt="#C8C6C4",Ha="#118DFF",eht="#12239E",tht="#E66C37",nht="#6B007B",rht="#E044A7",iht="#744EC2",oht="#D9B300",aht="#D64550",$ye=Ha,Qye="#DEEFFF",GQ=[Qye,$ye],sht=[Qye,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",$ye],lht={view:{stroke:_Q},background:_Q,font:By,header:{titleFont:SQ,titleFontSize:ZQ,titleColor:kQ,labelFont:By,labelFontSize:wQ,labelColor:Ky},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Ky,labelFontSize:xQ,titleFont:SQ,titleColor:kQ,titleFontSize:ZQ,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:qpt,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Ha},line:{stroke:Ha,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:By,fontSize:xQ,fill:Ky},arc:{fill:Ha},area:{fill:Ha,line:!0,opacity:.6},path:{stroke:Ha},rect:{fill:Ha},point:{fill:Ha,filled:!0,size:75},shape:{stroke:Ha},symbol:{fill:Ha,strokeWidth:1.5,size:50},legend:{titleFont:By,titleFontWeight:"bold",titleColor:Ky,labelFont:By,labelFontSize:wQ,labelColor:Ky,symbolType:"circle",symbolSize:75},range:{category:[Ha,eht,tht,nht,rht,iht,oht,aht],diverging:GQ,heatmap:GQ,ordinal:sht}},uht=Vpt.version,cht=Object.freeze(Object.defineProperty({__proto__:null,dark:Ypt,excel:Tpt,fivethirtyeight:Mpt,ggplot2:Opt,googlecharts:Qpt,latimes:Hpt,powerbi:lht,quartz:Jpt,urbaninstitute:$pt,version:uht,vox:Bpt},Symbol.toStringTag,{value:"Module"}));function dht(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function fht(e,t,n){if(ce(e))return`[${e.map(r=>t(We(r)?r:IQ(r,n))).join(", ")}]`;if(Le(e)){let r="";const i=e,{title:o,image:a}=i,s=dht(i,["title","image"]);o&&(r+=`<h2>${t(o)}</h2>`),a&&(r+=`<img src="${t(a)}">`);const l=Object.keys(s);if(l.length>0){r+="<table>";for(const u of l){let c=s[u];c!==void 0&&(Le(c)&&(c=IQ(c,n)),r+=`<tr><td class="key">${t(u)}:</td><td class="value">${t(c)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function pht(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function IQ(e,t){return JSON.stringify(e,pht(t))}var hht=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element img {
  max-width: 200px;
  max-height: 200px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const qye="vg-tooltip-element",mht={offsetX:10,offsetY:10,id:qye,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:ght,maxDepth:2,formatTooltip:fht};function ght(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function bht(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return hht.toString().replace(qye,e)}function yht(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}class vht{constructor(t){this.options=Object.assign(Object.assign({},mht),t);const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=bht(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){var o;if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),((o=document.fullscreenElement)!==null&&o!==void 0?o:document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:s}=yht(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${s}px`,this.el.style.left=`${a}px`}}function Tw(e){return Tw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tw(e)}function xht(e,t){if(Tw(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Tw(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wht(e){var t=xht(e,"string");return Tw(t)==="symbol"?t:String(t)}function Zht(e,t,n){return t=wht(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WQ(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(u){n(u);return}s.done?t(l):Promise.resolve(l).then(r,i)}function tW(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(l){WQ(o,r,i,a,s,"next",l)}function s(l){WQ(o,r,i,a,s,"throw",l)}a(void 0)})}}var eve=Object.prototype,yp=eve.hasOwnProperty,fl,xJ=typeof Symbol=="function"?Symbol:{},YE=xJ.iterator||"@@iterator",Sht=xJ.asyncIterator||"@@asyncIterator",nW=xJ.toStringTag||"@@toStringTag";function tve(e,t,n,r){var i=t&&t.prototype instanceof CN?t:CN,o=Object.create(i.prototype),a=new VN(r||[]);return o._invoke=Wht(e,n,a),o}function wJ(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}var EQ="suspendedStart",kht="suspendedYield",XQ="executing",Sk="completed",os={};function CN(){}function TE(){}function Pg(){}var ZJ={};ZJ[YE]=function(){return this};var dC=Object.getPrototypeOf,kk=dC&&dC(dC(SJ([])));kk&&kk!==eve&&yp.call(kk,YE)&&(ZJ=kk);var Rb=Pg.prototype=CN.prototype=Object.create(ZJ);TE.prototype=Rb.constructor=Pg;Pg.constructor=TE;Pg[nW]=TE.displayName="GeneratorFunction";function nve(e){["next","throw","return"].forEach(function(t){e[t]=function(n){return this._invoke(t,n)}})}function rve(e){var t=typeof e=="function"&&e.constructor;return t?t===TE||(t.displayName||t.name)==="GeneratorFunction":!1}function _ht(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,Pg):(e.__proto__=Pg,nW in e||(e[nW]="GeneratorFunction")),e.prototype=Object.create(Rb),e}function Ght(e){return{__await:e}}function NE(e,t){function n(o,a,s,l){var u=wJ(e[o],e,a);if(u.type==="throw")l(u.arg);else{var c=u.arg,d=c.value;return d&&typeof d=="object"&&yp.call(d,"__await")?t.resolve(d.__await).then(function(f){n("next",f,s,l)},function(f){n("throw",f,s,l)}):t.resolve(d).then(function(f){c.value=f,s(c)},function(f){return n("throw",f,s,l)})}}var r;function i(o,a){function s(){return new t(function(l,u){n(o,a,l,u)})}return r=r?r.then(s,s):s()}this._invoke=i}nve(NE.prototype);NE.prototype[Sht]=function(){return this};function Iht(e,t,n,r,i){i===void 0&&(i=Promise);var o=new NE(tve(e,t,n,r),i);return rve(t)?o:o.next().then(function(a){return a.done?a.value:o.next()})}function Wht(e,t,n){var r=EQ;return function(i,o){if(r===XQ)throw new Error("Generator is already running");if(r===Sk){if(i==="throw")throw o;return ove()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=ive(a,n);if(s){if(s===os)continue;return s}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(r===EQ)throw r=Sk,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);r=XQ;var l=wJ(e,t,n);if(l.type==="normal"){if(r=n.done?Sk:kht,l.arg===os)continue;return{value:l.arg,done:n.done}}else l.type==="throw"&&(r=Sk,n.method="throw",n.arg=l.arg)}}}function ive(e,t){var n=e.iterator[t.method];if(n===fl){if(t.delegate=null,t.method==="throw"){if(e.iterator.return&&(t.method="return",t.arg=fl,ive(e,t),t.method==="throw"))return os;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return os}var r=wJ(n,e.iterator,t.arg);if(r.type==="throw")return t.method="throw",t.arg=r.arg,t.delegate=null,os;var i=r.arg;if(!i)return t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,os;if(i.done)t[e.resultName]=i.value,t.next=e.nextLoc,t.method!=="return"&&(t.method="next",t.arg=fl);else return i;return t.delegate=null,os}nve(Rb);Rb[nW]="Generator";Rb[YE]=function(){return this};Rb.toString=function(){return"[object Generator]"};function Eht(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function fC(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function VN(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(Eht,this),this.reset(!0)}function Xht(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function r(){for(;t.length;){var i=t.pop();if(i in e)return r.value=i,r.done=!1,r}return r.done=!0,r}}function SJ(e){if(e){var t=e[YE];if(t)return t.call(e);if(typeof e.next=="function")return e;if(!isNaN(e.length)){var n=-1,r=function i(){for(;++n<e.length;)if(yp.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=fl,i.done=!0,i};return r.next=r}}return{next:ove}}function ove(){return{value:fl,done:!0}}VN.prototype={constructor:VN,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=fl,this.done=!1,this.delegate=null,this.method="next",this.arg=fl,this.tryEntries.forEach(fC),!e)for(var t in this)t.charAt(0)==="t"&&yp.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=fl)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(l,u){return o.type="throw",o.arg=e,t.next=l,u&&(t.method="next",t.arg=fl),!!u}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if(i.tryLoc==="root")return n("end");if(i.tryLoc<=this.prev){var a=yp.call(i,"catchLoc"),s=yp.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else if(s){if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&yp.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&(e==="break"||e==="continue")&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,os):this.complete(o)},complete:function(e,t){if(e.type==="throw")throw e.arg;return e.type==="break"||e.type==="continue"?this.next=e.arg:e.type==="return"?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):e.type==="normal"&&t&&(this.next=t),os},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),fC(n),os}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if(r.type==="throw"){var i=r.arg;fC(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:SJ(e),resultName:t,nextLoc:n},this.method==="next"&&(this.arg=fl),os}};var oa={wrap:tve,isGeneratorFunction:rve,AsyncIterator:NE,mark:_ht,awrap:Ght,async:Iht,keys:Xht,values:SJ},LQ,RQ;function Lht(){return RQ||(RQ=1,LQ=function(e){e.prototype[Symbol.iterator]=oa.mark(function t(){var n;return oa.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=this.head;case 1:if(!n){r.next=7;break}return r.next=4,n.value;case 4:n=n.next,r.next=1;break;case 7:case"end":return r.stop()}},t,this)})}),LQ}var Rht=Yt;Yt.Node=hh;Yt.create=Yt;function Yt(e){var t=this;if(t instanceof Yt||(t=new Yt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}Yt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Yt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Yt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Yt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Vht(this,arguments[e]);return this.length};Yt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Yht(this,arguments[e]);return this.length};Yt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Yt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Yt.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};Yt.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};Yt.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Yt.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Yt.prototype.map=function(e,t){t=t||this;for(var n=new Yt,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};Yt.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Yt,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};Yt.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};Yt.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};Yt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Yt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Yt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Yt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};Yt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Yt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};Yt.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,r=this.head;r!==null&&n<e;n++)r=r.next;for(var i=[],n=0;r&&n<t;n++)i.push(r.value),r=this.removeNode(r);r===null&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(var n=0;n<(arguments.length<=2?0:arguments.length-2);n++)r=Cht(this,r,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return i};Yt.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Cht(e,t,n){var r=t===e.head?new hh(n,null,t,e):new hh(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function Vht(e,t){e.tail=new hh(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Yht(e,t){e.head=new hh(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function hh(e,t,n,r){if(!(this instanceof hh))return new hh(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Lht()(Yt)}catch(e){}var Tht=Rht,lp=Symbol("max"),Iu=Symbol("length"),xm=Symbol("lengthCalculator"),vx=Symbol("allowStale"),vp=Symbol("maxAge"),Su=Symbol("dispose"),CQ=Symbol("noDisposeOnSet"),gr=Symbol("lruList"),Ka=Symbol("cache"),ave=Symbol("updateAgeOnGet"),pC=()=>1;class Nht{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[lp]=t.max||1/0;var n=t.length||pC;if(this[xm]=typeof n!="function"?pC:n,this[vx]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[vp]=t.maxAge||0,this[Su]=t.dispose,this[CQ]=t.noDisposeOnSet||!1,this[ave]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[lp]=t||1/0,Dy(this)}get max(){return this[lp]}set allowStale(t){this[vx]=!!t}get allowStale(){return this[vx]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[vp]=t,Dy(this)}get maxAge(){return this[vp]}set lengthCalculator(t){typeof t!="function"&&(t=pC),t!==this[xm]&&(this[xm]=t,this[Iu]=0,this[gr].forEach(n=>{n.length=this[xm](n.value,n.key),this[Iu]+=n.length})),Dy(this)}get lengthCalculator(){return this[xm]}get length(){return this[Iu]}get itemCount(){return this[gr].length}rforEach(t,n){n=n||this;for(var r=this[gr].tail;r!==null;){var i=r.prev;VQ(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(var r=this[gr].head;r!==null;){var i=r.next;VQ(this,t,r,n),r=i}}keys(){return this[gr].toArray().map(t=>t.key)}values(){return this[gr].toArray().map(t=>t.value)}reset(){this[Su]&&this[gr]&&this[gr].length&&this[gr].forEach(t=>this[Su](t.key,t.value)),this[Ka]=new Map,this[gr]=new Tht,this[Iu]=0}dump(){return this[gr].map(t=>rW(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[gr]}set(t,n,r){if(r=r||this[vp],r&&typeof r!="number")throw new TypeError("maxAge must be a number");var i=r?Date.now():0,o=this[xm](n,t);if(this[Ka].has(t)){if(o>this[lp])return V0(this,this[Ka].get(t)),!1;var a=this[Ka].get(t),s=a.value;return this[Su]&&(this[CQ]||this[Su](t,s.value)),s.now=i,s.maxAge=r,s.value=n,this[Iu]+=o-s.length,s.length=o,this.get(t),Dy(this),!0}var l=new Fht(t,n,o,i,r);return l.length>this[lp]?(this[Su]&&this[Su](t,n),!1):(this[Iu]+=l.length,this[gr].unshift(l),this[Ka].set(t,this[gr].head),Dy(this),!0)}has(t){if(!this[Ka].has(t))return!1;var n=this[Ka].get(t).value;return!rW(this,n)}get(t){return hC(this,t,!0)}peek(t){return hC(this,t,!1)}pop(){var t=this[gr].tail;return t?(V0(this,t),t.value):null}del(t){V0(this,this[Ka].get(t))}load(t){this.reset();for(var n=Date.now(),r=t.length-1;r>=0;r--){var i=t[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{var a=o-n;a>0&&this.set(i.k,i.v,a)}}}prune(){this[Ka].forEach((t,n)=>hC(this,n,!1))}}var hC=(e,t,n)=>{var r=e[Ka].get(t);if(r){var i=r.value;if(rW(e,i)){if(V0(e,r),!e[vx])return}else n&&(e[ave]&&(r.value.now=Date.now()),e[gr].unshiftNode(r));return i.value}},rW=(e,t)=>{if(!t||!t.maxAge&&!e[vp])return!1;var n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[vp]&&n>e[vp]},Dy=e=>{if(e[Iu]>e[lp])for(var t=e[gr].tail;e[Iu]>e[lp]&&t!==null;){var n=t.prev;V0(e,t),t=n}},V0=(e,t)=>{if(t){var n=t.value;e[Su]&&e[Su](n.key,n.value),e[Iu]-=n.length,e[Ka].delete(n.key),e[gr].removeNode(t)}};class Fht{constructor(t,n,r,i,o){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=o||0}}var VQ=(e,t,n,r)=>{var i=n.value;rW(e,i)&&(V0(e,n),e[vx]||(i=void 0)),i&&t.call(r,i.value,i.key,e)},Mht=Nht,Oht=["includePrerelease","loose","rtl"],zht=e=>e?typeof e!="object"?{loose:!0}:Oht.filter(t=>e[t]).reduce((t,n)=>(t[n]=!0,t),{}):{},kJ=zht,la={},Pht={get exports(){return la},set exports(e){la=e}},jht=256,Hht=Number.MAX_SAFE_INTEGER||9007199254740991,Jht=16,_J={MAX_LENGTH:jht,MAX_SAFE_INTEGER:Hht,MAX_SAFE_COMPONENT_LENGTH:Jht},Bht=typeof process=="object"&&oL&&oL.NODE_DEBUG&&/\bsemver\b/i.test(oL.NODE_DEBUG)?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.error("SEMVER",...t)}:()=>{},FE=Bht;(function(e,t){var n=_J.MAX_SAFE_COMPONENT_LENGTH,r=FE;t=e.exports={};var i=t.re=[],o=t.src=[],a=t.t={},s=0,l=(u,c,d)=>{var f=s++;r(u,f,c),a[u]=f,o[f]=c,i[f]=new RegExp(c,d?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION","(".concat(o[a.NUMERICIDENTIFIER],")\\.")+"(".concat(o[a.NUMERICIDENTIFIER],")\\.")+"(".concat(o[a.NUMERICIDENTIFIER],")")),l("MAINVERSIONLOOSE","(".concat(o[a.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[a.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[a.NUMERICIDENTIFIERLOOSE],")")),l("PRERELEASEIDENTIFIER","(?:".concat(o[a.NUMERICIDENTIFIER],"|").concat(o[a.NONNUMERICIDENTIFIER],")")),l("PRERELEASEIDENTIFIERLOOSE","(?:".concat(o[a.NUMERICIDENTIFIERLOOSE],"|").concat(o[a.NONNUMERICIDENTIFIER],")")),l("PRERELEASE","(?:-(".concat(o[a.PRERELEASEIDENTIFIER],"(?:\\.").concat(o[a.PRERELEASEIDENTIFIER],")*))")),l("PRERELEASELOOSE","(?:-?(".concat(o[a.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(o[a.PRERELEASEIDENTIFIERLOOSE],")*))")),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD","(?:\\+(".concat(o[a.BUILDIDENTIFIER],"(?:\\.").concat(o[a.BUILDIDENTIFIER],")*))")),l("FULLPLAIN","v?".concat(o[a.MAINVERSION]).concat(o[a.PRERELEASE],"?").concat(o[a.BUILD],"?")),l("FULL","^".concat(o[a.FULLPLAIN],"$")),l("LOOSEPLAIN","[v=\\s]*".concat(o[a.MAINVERSIONLOOSE]).concat(o[a.PRERELEASELOOSE],"?").concat(o[a.BUILD],"?")),l("LOOSE","^".concat(o[a.LOOSEPLAIN],"$")),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE","".concat(o[a.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),l("XRANGEIDENTIFIER","".concat(o[a.NUMERICIDENTIFIER],"|x|X|\\*")),l("XRANGEPLAIN","[v=\\s]*(".concat(o[a.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[a.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[a.XRANGEIDENTIFIER],")")+"(?:".concat(o[a.PRERELEASE],")?").concat(o[a.BUILD],"?")+")?)?"),l("XRANGEPLAINLOOSE","[v=\\s]*(".concat(o[a.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[a.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[a.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(o[a.PRERELEASELOOSE],")?").concat(o[a.BUILD],"?")+")?)?"),l("XRANGE","^".concat(o[a.GTLT],"\\s*").concat(o[a.XRANGEPLAIN],"$")),l("XRANGELOOSE","^".concat(o[a.GTLT],"\\s*").concat(o[a.XRANGEPLAINLOOSE],"$")),l("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(n,"})")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:$|[^\\d])"),l("COERCERTL",o[a.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM","(\\s*)".concat(o[a.LONETILDE],"\\s+"),!0),t.tildeTrimReplace="$1~",l("TILDE","^".concat(o[a.LONETILDE]).concat(o[a.XRANGEPLAIN],"$")),l("TILDELOOSE","^".concat(o[a.LONETILDE]).concat(o[a.XRANGEPLAINLOOSE],"$")),l("LONECARET","(?:\\^)"),l("CARETTRIM","(\\s*)".concat(o[a.LONECARET],"\\s+"),!0),t.caretTrimReplace="$1^",l("CARET","^".concat(o[a.LONECARET]).concat(o[a.XRANGEPLAIN],"$")),l("CARETLOOSE","^".concat(o[a.LONECARET]).concat(o[a.XRANGEPLAINLOOSE],"$")),l("COMPARATORLOOSE","^".concat(o[a.GTLT],"\\s*(").concat(o[a.LOOSEPLAIN],")$|^$")),l("COMPARATOR","^".concat(o[a.GTLT],"\\s*(").concat(o[a.FULLPLAIN],")$|^$")),l("COMPARATORTRIM","(\\s*)".concat(o[a.GTLT],"\\s*(").concat(o[a.LOOSEPLAIN],"|").concat(o[a.XRANGEPLAIN],")"),!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE","^\\s*(".concat(o[a.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(o[a.XRANGEPLAIN],")")+"\\s*$"),l("HYPHENRANGELOOSE","^\\s*(".concat(o[a.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(o[a.XRANGEPLAINLOOSE],")")+"\\s*$"),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Pht,la);var YQ=/^[0-9]+$/,Kht=(e,t)=>{var n=YQ.test(e),r=YQ.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Dht={compareIdentifiers:Kht},_k=FE,TQ=_J.MAX_LENGTH,Gk=_J.MAX_SAFE_INTEGER,NQ=la.re,FQ=la.t,Aht=kJ,wm=Dht.compareIdentifiers;let Uht=class el{constructor(t,n){if(n=Aht(n),t instanceof el){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: ".concat(t));if(t.length>TQ)throw new TypeError("version is longer than ".concat(TQ," characters"));_k("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;var r=t.trim().match(n.loose?NQ[FQ.LOOSE]:NQ[FQ.FULL]);if(!r)throw new TypeError("Invalid Version: ".concat(t));if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Gk||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Gk||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Gk||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){var o=+i;if(o>=0&&o<Gk)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(t){if(_k("SemVer.compare",this.version,this.options,t),!(t instanceof el)){if(typeof t=="string"&&t===this.version)return 0;t=new el(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof el||(t=new el(t,this.options)),wm(this.major,t.major)||wm(this.minor,t.minor)||wm(this.patch,t.patch)}comparePre(t){if(t instanceof el||(t=new el(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var n=0;do{var r=this.prerelease[n],i=t.prerelease[n];if(_k("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r!==i)return wm(r,i)}while(++n)}compareBuild(t){t instanceof el||(t=new el(t,this.options));var n=0;do{var r=this.build[n],i=t.build[n];if(_k("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r!==i)return wm(r,i)}while(++n)}inc(t,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n),this.inc("pre",n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}n&&(wm(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error("invalid increment argument: ".concat(t))}return this.format(),this.raw=this.version,this}};var GJ=Uht,MQ=GJ,$ht=(e,t,n)=>new MQ(e,n).compare(new MQ(t,n)),Cb=$ht,Qht=Cb,qht=(e,t,n)=>Qht(e,t,n)===0,emt=qht,tmt=Cb,nmt=(e,t,n)=>tmt(e,t,n)!==0,rmt=nmt,imt=Cb,omt=(e,t,n)=>imt(e,t,n)>0,amt=omt,smt=Cb,lmt=(e,t,n)=>smt(e,t,n)>=0,umt=lmt,cmt=Cb,dmt=(e,t,n)=>cmt(e,t,n)<0,fmt=dmt,pmt=Cb,hmt=(e,t,n)=>pmt(e,t,n)<=0,mmt=hmt,gmt=emt,bmt=rmt,ymt=amt,vmt=umt,xmt=fmt,wmt=mmt,Zmt=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return gmt(e,n,r);case"!=":return bmt(e,n,r);case">":return ymt(e,n,r);case">=":return vmt(e,n,r);case"<":return xmt(e,n,r);case"<=":return wmt(e,n,r);default:throw new TypeError("Invalid operator: ".concat(t))}},Smt=Zmt,mC,OQ;function kmt(){if(OQ)return mC;OQ=1;var e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,d){if(d=n(d),c instanceof t){if(c.loose===!!d.loose)return c;c=c.value}a("comparator",c,d),this.options=d,this.loose=!!d.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(c){var d=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],f=c.match(d);if(!f)throw new TypeError("Invalid comparator: ".concat(c));this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new s(f[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(a("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new s(c,this.options)}catch(d){return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,d){if(!(c instanceof t))throw new TypeError("a Comparator is required");if((!d||typeof d!="object")&&(d={loose:!!d,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new l(c.value,d).test(this.value);if(c.operator==="")return c.value===""?!0:new l(this.value,d).test(c.semver);var f=(this.operator===">="||this.operator===">")&&(c.operator===">="||c.operator===">"),h=(this.operator==="<="||this.operator==="<")&&(c.operator==="<="||c.operator==="<"),m=this.semver.version===c.semver.version,g=(this.operator===">="||this.operator==="<=")&&(c.operator===">="||c.operator==="<="),y=o(this.semver,"<",c.semver,d)&&(this.operator===">="||this.operator===">")&&(c.operator==="<="||c.operator==="<"),v=o(this.semver,">",c.semver,d)&&(this.operator==="<="||this.operator==="<")&&(c.operator===">="||c.operator===">");return f||h||m&&g||y||v}}mC=t;var n=kJ,r=la.re,i=la.t,o=Smt,a=FE,s=GJ,l=sve();return mC}function zQ(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_mt(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,a=!1,s;return{s:function(){n=n.call(e)},n:function(){var l=n.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(a)throw s}}}}function _mt(e,t){if(e){if(typeof e=="string")return PQ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PQ(e,t)}}function PQ(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gC,jQ;function sve(){if(jQ)return gC;jQ=1;class e{constructor(N,V){if(V=r(V),N instanceof e)return N.loose===!!V.loose&&N.includePrerelease===!!V.includePrerelease?N:new e(N.raw,V);if(N instanceof i)return this.raw=N.value,this.set=[[N]],this.format(),this;if(this.options=V,this.loose=!!V.loose,this.includePrerelease=!!V.includePrerelease,this.raw=N,this.set=N.split("||").map(M=>this.parseRange(M.trim())).filter(M=>M.length),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(N));if(this.set.length>1){var F=this.set[0];if(this.set=this.set.filter(M=>!f(M[0])),this.set.length===0)this.set=[F];else if(this.set.length>1){var O=zQ(this.set),P;try{for(O.s();!(P=O.n()).done;){var H=P.value;if(H.length===1&&h(H[0])){this.set=[H];break}}}catch(M){O.e(M)}finally{O.f()}}}this.format()}format(){return this.range=this.set.map(N=>N.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(N){N=N.trim();var V=Object.keys(this.options).join(","),F="parseRange:".concat(V,":").concat(N),O=n.get(F);if(O)return O;var P=this.options.loose,H=P?s[l.HYPHENRANGELOOSE]:s[l.HYPHENRANGE];N=N.replace(H,X(this.options.includePrerelease)),o("hyphen replace",N),N=N.replace(s[l.COMPARATORTRIM],u),o("comparator trim",N),N=N.replace(s[l.TILDETRIM],c),N=N.replace(s[l.CARETTRIM],d),N=N.split(/\s+/).join(" ");var M=N.split(" ").map(Q=>g(Q,this.options)).join(" ").split(/\s+/).map(Q=>E(Q,this.options));P&&(M=M.filter(Q=>(o("loose invalid filter",Q,this.options),!!Q.match(s[l.COMPARATORLOOSE])))),o("range list",M);var j=new Map,J=M.map(Q=>new i(Q,this.options)),q=zQ(J),K;try{for(q.s();!(K=q.n()).done;){var D=K.value;if(f(D))return[D];j.set(D.value,D)}}catch(Q){q.e(Q)}finally{q.f()}j.size>1&&j.has("")&&j.delete("");var $=[...j.values()];return n.set(F,$),$}intersects(N,V){if(!(N instanceof e))throw new TypeError("a Range is required");return this.set.some(F=>m(F,V)&&N.set.some(O=>m(O,V)&&F.every(P=>O.every(H=>P.intersects(H,V)))))}test(N){if(!N)return!1;if(typeof N=="string")try{N=new a(N,this.options)}catch(F){return!1}for(var V=0;V<this.set.length;V++)if(Y(this.set[V],N,this.options))return!0;return!1}}gC=e;var t=Mht,n=new t({max:1e3}),r=kJ,i=kmt(),o=FE,a=GJ,s=la.re,l=la.t,u=la.comparatorTrimReplace,c=la.tildeTrimReplace,d=la.caretTrimReplace,f=C=>C.value==="<0.0.0-0",h=C=>C.value==="",m=(C,N)=>{for(var V=!0,F=C.slice(),O=F.pop();V&&F.length;)V=F.every(P=>O.intersects(P,N)),O=F.pop();return V},g=(C,N)=>(o("comp",C,N),C=Z(C,N),o("caret",C),C=v(C,N),o("tildes",C),C=_(C,N),o("xrange",C),C=I(C,N),o("stars",C),C),y=C=>!C||C.toLowerCase()==="x"||C==="*",v=(C,N)=>C.trim().split(/\s+/).map(V=>w(V,N)).join(" "),w=(C,N)=>{var V=N.loose?s[l.TILDELOOSE]:s[l.TILDE];return C.replace(V,(F,O,P,H,M)=>{o("tilde",C,F,O,P,H,M);var j;return y(O)?j="":y(P)?j=">=".concat(O,".0.0 <").concat(+O+1,".0.0-0"):y(H)?j=">=".concat(O,".").concat(P,".0 <").concat(O,".").concat(+P+1,".0-0"):M?(o("replaceTilde pr",M),j=">=".concat(O,".").concat(P,".").concat(H,"-").concat(M," <").concat(O,".").concat(+P+1,".0-0")):j=">=".concat(O,".").concat(P,".").concat(H," <").concat(O,".").concat(+P+1,".0-0"),o("tilde return",j),j})},Z=(C,N)=>C.trim().split(/\s+/).map(V=>k(V,N)).join(" "),k=(C,N)=>{o("caret",C,N);var V=N.loose?s[l.CARETLOOSE]:s[l.CARET],F=N.includePrerelease?"-0":"";return C.replace(V,(O,P,H,M,j)=>{o("caret",C,O,P,H,M,j);var J;return y(P)?J="":y(H)?J=">=".concat(P,".0.0").concat(F," <").concat(+P+1,".0.0-0"):y(M)?P==="0"?J=">=".concat(P,".").concat(H,".0").concat(F," <").concat(P,".").concat(+H+1,".0-0"):J=">=".concat(P,".").concat(H,".0").concat(F," <").concat(+P+1,".0.0-0"):j?(o("replaceCaret pr",j),P==="0"?H==="0"?J=">=".concat(P,".").concat(H,".").concat(M,"-").concat(j," <").concat(P,".").concat(H,".").concat(+M+1,"-0"):J=">=".concat(P,".").concat(H,".").concat(M,"-").concat(j," <").concat(P,".").concat(+H+1,".0-0"):J=">=".concat(P,".").concat(H,".").concat(M,"-").concat(j," <").concat(+P+1,".0.0-0")):(o("no pr"),P==="0"?H==="0"?J=">=".concat(P,".").concat(H,".").concat(M).concat(F," <").concat(P,".").concat(H,".").concat(+M+1,"-0"):J=">=".concat(P,".").concat(H,".").concat(M).concat(F," <").concat(P,".").concat(+H+1,".0-0"):J=">=".concat(P,".").concat(H,".").concat(M," <").concat(+P+1,".0.0-0")),o("caret return",J),J})},_=(C,N)=>(o("replaceXRanges",C,N),C.split(/\s+/).map(V=>R(V,N)).join(" ")),R=(C,N)=>{C=C.trim();var V=N.loose?s[l.XRANGELOOSE]:s[l.XRANGE];return C.replace(V,(F,O,P,H,M,j)=>{o("xRange",C,F,O,P,H,M,j);var J=y(P),q=J||y(H),K=q||y(M),D=K;return O==="="&&D&&(O=""),j=N.includePrerelease?"-0":"",J?O===">"||O==="<"?F="<0.0.0-0":F="*":O&&D?(q&&(H=0),M=0,O===">"?(O=">=",q?(P=+P+1,H=0,M=0):(H=+H+1,M=0)):O==="<="&&(O="<",q?P=+P+1:H=+H+1),O==="<"&&(j="-0"),F="".concat(O+P,".").concat(H,".").concat(M).concat(j)):q?F=">=".concat(P,".0.0").concat(j," <").concat(+P+1,".0.0-0"):K&&(F=">=".concat(P,".").concat(H,".0").concat(j," <").concat(P,".").concat(+H+1,".0-0")),o("xRange return",F),F})},I=(C,N)=>(o("replaceStars",C,N),C.trim().replace(s[l.STAR],"")),E=(C,N)=>(o("replaceGTE0",C,N),C.trim().replace(s[N.includePrerelease?l.GTE0PRE:l.GTE0],"")),X=C=>(N,V,F,O,P,H,M,j,J,q,K,D,$)=>(y(F)?V="":y(O)?V=">=".concat(F,".0.0").concat(C?"-0":""):y(P)?V=">=".concat(F,".").concat(O,".0").concat(C?"-0":""):H?V=">=".concat(V):V=">=".concat(V).concat(C?"-0":""),y(J)?j="":y(q)?j="<".concat(+J+1,".0.0-0"):y(K)?j="<".concat(J,".").concat(+q+1,".0-0"):D?j="<=".concat(J,".").concat(q,".").concat(K,"-").concat(D):C?j="<".concat(J,".").concat(q,".").concat(+K+1,"-0"):j="<=".concat(j),"".concat(V," ").concat(j).trim()),Y=(C,N,V)=>{for(var F=0;F<C.length;F++)if(!C[F].test(N))return!1;if(N.prerelease.length&&!V.includePrerelease){for(var O=0;O<C.length;O++)if(o(C[O].semver),C[O].semver!==i.ANY&&C[O].semver.prerelease.length>0){var P=C[O].semver;if(P.major===N.major&&P.minor===N.minor&&P.patch===N.patch)return!0}return!1}return!0};return gC}var Gmt=sve(),Imt=(e,t,n)=>{try{t=new Gmt(t,n)}catch(r){return!1}return t.test(e)},lve=Imt;function Wmt(e,t,n){var r=e.open(t),i=250,o=new URL(t),a=o.origin,s=40;function l(c){c.source===r&&(s=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function u(){s<=0||(r.postMessage(n,a),setTimeout(u,i),s-=1)}setTimeout(u,i)}var Emt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});function uve(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];Xmt(e,a)}return e}function Xmt(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];pb(e,i,t[i],!0)}}var bC;function Lmt(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Rmt(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,a=!1,s;return{s:function(){n=n.call(e)},n:function(){var l=n.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(a)throw s}}}}function Rmt(e,t){if(e){if(typeof e=="string")return HQ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HQ(e,t)}}function HQ(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function JQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ed(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JQ(Object(n),!0).forEach(function(r){Zht(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JQ(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var rl=Eit,Nw=Rpt,Ik=typeof window<"u"?window:void 0;Nw===void 0&&Ik!==null&&Ik!==void 0&&(bC=Ik.vl)!==null&&bC!==void 0&&bC.compile&&(Nw=Ik.vl);var Cmt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Vmt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Ov={vega:"Vega","vega-lite":"Vega-Lite"},iW={vega:rl.version,"vega-lite":Nw?Nw.version:"not available"},Ymt={vega:e=>e,"vega-lite":(e,t)=>Nw.compile(e,{config:t}).spec},Tmt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Nmt="chart-wrapper";function Fmt(e){return typeof e=="function"}function BQ(e,t,n,r){var i="<html><head>".concat(t,'</head><body><pre><code class="json">'),o="</code></pre>".concat(n,"</body></html>"),a=window.open("");a.document.write(i+e+o),a.document.title="".concat(Ov[r]," JSON Source")}function Mmt(e,t){if(e.$schema){var n=Uye(e.$schema);if(t&&t!==n.library){var r;console.warn("The given visualization spec is written in ".concat(Ov[n.library],", but mode argument sets ").concat((r=Ov[t])!==null&&r!==void 0?r:t,"."))}var i=n.library;return lve(iW[i],"^".concat(n.version.slice(1)))||console.warn("The input spec uses ".concat(Ov[i]," ").concat(n.version,", but the current version of ").concat(Ov[i]," is v").concat(iW[i],".")),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t!=null?t:"vega"}function Omt(e){return!!(e&&"load"in e)}function KQ(e){return Omt(e)?e:rl.loader(e)}function zmt(e){var t,n,r=(t=(n=e.usermeta)===null||n===void 0?void 0:n.embedOptions)!==null&&t!==void 0?t:{};return We(r.defaultStyle)&&(r.defaultStyle=!1),r}function YN(e,t){return TN.apply(this,arguments)}function TN(){return TN=tW(oa.mark(function e(t,n){var r,i,o,a,s,l,u,c,d,f,h,m=arguments;return oa.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(o=m.length>2&&m[2]!==void 0?m[2]:{},!We(n)){g.next=10;break}return s=KQ(o.loader),g.t0=JSON,g.next=6,s.load(n);case 6:g.t1=g.sent,a=g.t0.parse.call(g.t0,g.t1),g.next=11;break;case 10:a=n;case 11:return l=zmt(a),u=l.loader,(!s||u)&&(s=KQ((c=o.loader)!==null&&c!==void 0?c:u)),g.next=16,DQ(l,s);case 16:return d=g.sent,g.next=19,DQ(o,s);case 19:return f=g.sent,h=Ed(Ed({},uve(f,d)),{},{config:fb((r=f.config)!==null&&r!==void 0?r:{},(i=d.config)!==null&&i!==void 0?i:{})}),g.next=23,jmt(t,a,h,s);case 23:return g.abrupt("return",g.sent);case 24:case"end":return g.stop()}},e)})),TN.apply(this,arguments)}function DQ(e,t){return NN.apply(this,arguments)}function NN(){return NN=tW(oa.mark(function e(t,n){var r,i,o;return oa.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!We(t.config)){a.next=8;break}return a.t1=JSON,a.next=4,n.load(t.config);case 4:a.t2=a.sent,a.t0=a.t1.parse.call(a.t1,a.t2),a.next=9;break;case 8:a.t0=(r=t.config)!==null&&r!==void 0?r:{};case 9:if(i=a.t0,!We(t.patch)){a.next=18;break}return a.t4=JSON,a.next=14,n.load(t.patch);case 14:a.t5=a.sent,a.t3=a.t4.parse.call(a.t4,a.t5),a.next=19;break;case 18:a.t3=t.patch;case 19:return o=a.t3,a.abrupt("return",Ed(Ed(Ed({},t),o?{patch:o}:{}),i?{config:i}:{}));case 21:case"end":return a.stop()}},e)})),NN.apply(this,arguments)}function Pmt(e){var t,n=e.getRootNode?e.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:(t=document.head)!==null&&t!==void 0?t:document.body}}function jmt(e,t){return FN.apply(this,arguments)}function FN(){return FN=tW(oa.mark(function e(t,n){var r,i,o,a,s,l,u,c,d,f,h,m,g,y,v,w,Z,k,_,R,I,E,X,Y,C,N,V,F,O,P,H,M,j,J,q,K,D,$,Q,B,pe,re,ee,oe,ue,U,de,be,xe,me,Ce,Xe=arguments;return oa.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:if(Ce=function(){$&&document.removeEventListener("click",$),M.finalize()},c=Xe.length>2&&Xe[2]!==void 0?Xe[2]:{},d=Xe.length>3?Xe[3]:void 0,f=c.theme?fb(cht[c.theme],(r=c.config)!==null&&r!==void 0?r:{}):c.config,h=mf(c.actions)?c.actions:uve({},Cmt,(i=c.actions)!==null&&i!==void 0?i:{}),m=Ed(Ed({},Vmt),c.i18n),g=(o=c.renderer)!==null&&o!==void 0?o:"canvas",y=(a=c.logLevel)!==null&&a!==void 0?a:rl.Warn,v=(s=c.downloadFileName)!==null&&s!==void 0?s:"visualization",w=typeof t=="string"?document.querySelector(t):t,w){Fe.next=12;break}throw new Error("".concat(t," does not exist"));case 12:if(c.defaultStyle!==!1&&(Z="vega-embed-style",k=Pmt(w),_=k.root,R=k.rootContainer,_.getElementById(Z)||(I=document.createElement("style"),I.id=Z,I.innerHTML=c.defaultStyle===void 0||c.defaultStyle===!0?Emt.toString():c.defaultStyle,R.appendChild(I))),E=Mmt(n,c.mode),X=Ymt[E](n,f),E==="vega-lite"&&X.$schema&&(Y=Uye(X.$schema),lve(iW.vega,"^".concat(Y.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(Y.version,", but current version is v").concat(iW.vega,"."))),w.classList.add("vega-embed"),h&&w.classList.add("has-actions"),w.innerHTML="",C=w,h&&(N=document.createElement("div"),N.classList.add(Nmt),w.appendChild(N),C=N),V=c.patch,V&&(X=V instanceof Function?V(X):B3(X,V,!0,!1).newDocument),c.formatLocale&&rl.formatLocale(c.formatLocale),c.timeFormatLocale&&rl.timeFormatLocale(c.timeFormatLocale),c.expressionFunctions)for(F in c.expressionFunctions)O=c.expressionFunctions[F],"fn"in O?rl.expressionFunction(F,O.fn,O.visitor):O instanceof Function&&rl.expressionFunction(F,O);return P=c.ast,H=rl.parse(X,E==="vega-lite"?{}:f,{ast:P}),M=new(c.viewClass||rl.View)(H,Ed({loader:d,logLevel:y,renderer:g},P?{expr:(l=(u=rl.expressionInterpreter)!==null&&u!==void 0?u:c.expr)!==null&&l!==void 0?l:Mit}:{})),M.addSignalListener("autosize",(Ue,at)=>{var Qe=at.type;Qe=="fit-x"?(C.classList.add("fit-x"),C.classList.remove("fit-y")):Qe=="fit-y"?(C.classList.remove("fit-x"),C.classList.add("fit-y")):Qe=="fit"?C.classList.add("fit-x","fit-y"):C.classList.remove("fit-x","fit-y")}),c.tooltip!==!1&&(j=Fmt(c.tooltip)?c.tooltip:new vht(c.tooltip===!0?{}:c.tooltip).call,M.tooltip(j)),J=c.hover,J===void 0&&(J=E==="vega"),J&&(q=typeof J=="boolean"?{}:J,K=q.hoverSet,D=q.updateSet,M.hover(K,D)),c&&(c.width!=null&&M.width(c.width),c.height!=null&&M.height(c.height),c.padding!=null&&M.padding(c.padding)),Fe.next=37,M.initialize(C,c.bind).runAsync();case 37:if(h===!1){Fe.next=63;break}if(Q=w,c.defaultStyle!==!1&&(B=document.createElement("details"),B.title=m.CLICK_TO_VIEW_ACTIONS,w.append(B),Q=B,pe=document.createElement("summary"),pe.innerHTML=Tmt,B.append(pe),$=Ue=>{B.contains(Ue.target)||B.removeAttribute("open")},document.addEventListener("click",$)),re=document.createElement("div"),Q.append(re),re.classList.add("vega-actions"),!(h===!0||h.export!==!1)){Fe.next=60;break}ee=Lmt(["svg","png"]),Fe.prev=45,ue=oa.mark(function Ue(){var at,Qe,Me,ne;return oa.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:at=oe.value,(h===!0||h.export===!0||h.export[at])&&(Qe=m["".concat(at.toUpperCase(),"_ACTION")],Me=document.createElement("a"),ne=Le(c.scaleFactor)?c.scaleFactor[at]:c.scaleFactor,Me.text=Qe,Me.href="#",Me.target="_blank",Me.download="".concat(v,".").concat(at),Me.addEventListener("mousedown",function(){var nt=tW(oa.mark(function lt(bt){var zn;return oa.wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return bt.preventDefault(),tn.next=3,M.toImageURL(at,ne);case 3:zn=tn.sent,this.href=zn;case 5:case"end":return tn.stop()}},lt,this)}));return function(lt){return nt.apply(this,arguments)}}()),re.append(Me));case 2:case"end":return ye.stop()}},Ue)}),ee.s();case 48:if((oe=ee.n()).done){Fe.next=52;break}return Fe.delegateYield(ue(),"t0",50);case 50:Fe.next=48;break;case 52:Fe.next=57;break;case 54:Fe.prev=54,Fe.t1=Fe.catch(45),ee.e(Fe.t1);case 57:return Fe.prev=57,ee.f(),Fe.finish(57);case 60:(h===!0||h.source!==!1)&&(U=document.createElement("a"),U.text=m.SOURCE_ACTION,U.href="#",U.addEventListener("click",function(Ue){var at,Qe;BQ(nR(n),(at=c.sourceHeader)!==null&&at!==void 0?at:"",(Qe=c.sourceFooter)!==null&&Qe!==void 0?Qe:"",E),Ue.preventDefault()}),re.append(U)),E==="vega-lite"&&(h===!0||h.compiled!==!1)&&(de=document.createElement("a"),de.text=m.COMPILED_ACTION,de.href="#",de.addEventListener("click",function(Ue){var at,Qe;BQ(nR(X),(at=c.sourceHeader)!==null&&at!==void 0?at:"",(Qe=c.sourceFooter)!==null&&Qe!==void 0?Qe:"","vega"),Ue.preventDefault()}),re.append(de)),(h===!0||h.editor!==!1)&&(xe=(be=c.editorUrl)!==null&&be!==void 0?be:"https://vega.github.io/editor/",me=document.createElement("a"),me.text=m.EDITOR_ACTION,me.href="#",me.addEventListener("click",function(Ue){Wmt(window,xe,{config:f,mode:E,renderer:g,spec:nR(n)}),Ue.preventDefault()}),re.append(me));case 63:return Fe.abrupt("return",{view:M,spec:n,vgSpec:X,finalize:Ce,embedOptions:c});case 64:case"end":return Fe.stop()}},e,null,[[45,54,57,60]])})),FN.apply(this,arguments)}var MN=function(e,t){return MN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},MN(e,t)};function If(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");MN(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Hmt(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((r=r.apply(e,[])).next())})}function cve(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function jg(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function sc(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function qd(e,t,n){if(arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function Y0(e){return this instanceof Y0?(this.v=e,this):new Y0(e)}function Jmt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(f){r[f]&&(i[f]=function(h){return new Promise(function(m,g){o.push([f,h,m,g])>1||s(f,h)})})}function s(f,h){try{l(r[f](h))}catch(m){d(o[0][3],m)}}function l(f){f.value instanceof Y0?Promise.resolve(f.value.v).then(u,c):d(o[0][2],f)}function u(f){s("next",f)}function c(f){s("throw",f)}function d(f,h){f(h),o.shift(),o.length&&s(o[0][0],o[0][1])}}function Bmt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof jg=="function"?jg(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(a){return new Promise(function(s,l){a=e[o](a),i(s,l,a.done,a.value)})}}function i(o,a,s,l){Promise.resolve(l).then(function(u){o({value:u,done:s})},a)}}function ln(e){return typeof e=="function"}function dve(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var yC=dve(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,r){return r+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function oW(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var mZ=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=jg(a),l=s.next();!l.done;l=s.next()){var u=l.value;u.remove(this)}}catch(g){t={error:g}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}else a.remove(this);var c=this.initialTeardown;if(ln(c))try{c()}catch(g){o=g instanceof yC?g.errors:[g]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var f=jg(d),h=f.next();!h.done;h=f.next()){var m=h.value;try{AQ(m)}catch(g){o=o!=null?o:[],g instanceof yC?o=qd(qd([],sc(o)),sc(g.errors)):o.push(g)}}}catch(g){r={error:g}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}if(o)throw new yC(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)AQ(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&oW(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&oW(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),fve=mZ.EMPTY;function pve(e){return e instanceof mZ||e&&"closed"in e&&ln(e.remove)&&ln(e.add)&&ln(e.unsubscribe)}function AQ(e){ln(e)?e():e.unsubscribe()}var Kmt={Promise:void 0},Dmt={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,qd([e,t],sc(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function hve(e){Dmt.setTimeout(function(){throw e})}function ON(){}function m9(e){e()}var IJ=function(e){If(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,pve(n)&&n.add(r)):r.destination=$mt,r}return t.create=function(n,r,i){return new zN(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(mZ),Amt=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){Wk(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){Wk(r)}else Wk(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){Wk(n)}},e}(),zN=function(e){If(t,e);function t(n,r,i){var o=e.call(this)||this,a;return ln(n)||!n?a={next:n!=null?n:void 0,error:r!=null?r:void 0,complete:i!=null?i:void 0}:a=n,o.destination=new Amt(a),o}return t}(IJ);function Wk(e){hve(e)}function Umt(e){throw e}var $mt={closed:!0,next:ON,error:Umt,complete:ON},WJ=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function mve(e){return e}function Qmt(e){return e.length===0?mve:e.length===1?e[0]:function(t){return e.reduce(function(n,r){return r(n)},t)}}var Al=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=e0t(t)?t:new zN(t,n,r);return m9(function(){var a=i,s=a.operator,l=a.source;o.add(s?s.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=UQ(n),new n(function(i,o){var a=new zN({next:function(s){try{t(s)}catch(l){o(l),a.unsubscribe()}},error:o,complete:i});r.subscribe(a)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[WJ]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Qmt(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=UQ(t),new t(function(r,i){var o;n.subscribe(function(a){return o=a},function(a){return i(a)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();function UQ(e){var t;return(t=e!=null?e:Kmt.Promise)!==null&&t!==void 0?t:Promise}function qmt(e){return e&&ln(e.next)&&ln(e.error)&&ln(e.complete)}function e0t(e){return e&&e instanceof IJ||qmt(e)&&pve(e)}function t0t(e){return ln(e==null?void 0:e.lift)}function gZ(e){return function(t){if(t0t(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ef(e,t,n,r,i){return new n0t(e,t,n,r,i)}var n0t=function(e){If(t,e);function t(n,r,i,o,a,s){var l=e.call(this,n)||this;return l.onFinalize=a,l.shouldUnsubscribe=s,l._next=r?function(u){try{r(u)}catch(c){n.error(c)}}:e.prototype._next,l._error=o?function(u){try{o(u)}catch(c){n.error(c)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=i?function(){try{i()}catch(u){n.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,l}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(IJ),r0t=dve(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ME=function(e){If(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new $Q(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new r0t},t.prototype.next=function(n){var r=this;m9(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var a=jg(r.currentObservers),s=a.next();!s.done;s=a.next()){var l=s.value;l.next(n)}}catch(u){i={error:u}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;m9(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;m9(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,a=i.isStopped,s=i.observers;return o||a?fve:(this.currentObservers=null,s.push(n),new mZ(function(){r.currentObservers=null,oW(s,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,a=r.isStopped;i?n.error(o):a&&n.complete()},t.prototype.asObservable=function(){var n=new Al;return n.source=this,n},t.create=function(n,r){return new $Q(n,r)},t}(Al),$Q=function(e){If(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:fve},t}(ME),i0t={now:function(){return Date.now()}},o0t=function(e){If(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(mZ),PN={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=PN.delegate;return i!=null&&i.setInterval?i.setInterval.apply(i,qd([e,t],sc(n))):setInterval.apply(void 0,qd([e,t],sc(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},a0t=function(e){If(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var o=this.id,a=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(a,o,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(a,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),PN.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&PN.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,o;try{this.work(n)}catch(a){i=!0,o=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,oW(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(o0t),QQ=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=i0t.now,e}(),s0t=function(e){If(t,e);function t(n,r){r===void 0&&(r=QQ.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(QQ),gve=new s0t(a0t),l0t=gve;function u0t(e){return e&&ln(e.schedule)}function c0t(e){return e[e.length-1]}function d0t(e){return ln(c0t(e))?e.pop():void 0}var bve=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function f0t(e){return ln(e==null?void 0:e.then)}function p0t(e){return ln(e[WJ])}function h0t(e){return Symbol.asyncIterator&&ln(e==null?void 0:e[Symbol.asyncIterator])}function m0t(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function g0t(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var b0t=g0t();function y0t(e){return ln(e==null?void 0:e[b0t])}function v0t(e){return Jmt(this,arguments,function(){var t,n,r,i;return cve(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Y0(t.read())];case 3:return n=o.sent(),r=n.value,i=n.done,i?[4,Y0(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Y0(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function x0t(e){return ln(e==null?void 0:e.getReader)}function bZ(e){if(e instanceof Al)return e;if(e!=null){if(p0t(e))return w0t(e);if(bve(e))return Z0t(e);if(f0t(e))return S0t(e);if(h0t(e))return yve(e);if(y0t(e))return k0t(e);if(x0t(e))return _0t(e)}throw m0t(e)}function w0t(e){return new Al(function(t){var n=e[WJ]();if(ln(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Z0t(e){return new Al(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function S0t(e){return new Al(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,hve)})}function k0t(e){return new Al(function(t){var n,r;try{for(var i=jg(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(t.next(a),t.closed)return}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function yve(e){return new Al(function(t){G0t(e,t).catch(function(n){return t.error(n)})})}function _0t(e){return yve(v0t(e))}function G0t(e,t){var n,r,i,o;return Hmt(this,void 0,void 0,function(){var a,s;return cve(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=Bmt(e),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=l.sent(),i={error:s},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function I0t(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function W0t(e){return e instanceof Date&&!isNaN(e)}function EJ(e,t){return gZ(function(n,r){var i=0;n.subscribe(ef(r,function(o){r.next(e.call(t,o,i++))}))})}var E0t=Array.isArray;function X0t(e,t){return E0t(t)?e.apply(void 0,qd([],sc(t))):e(t)}function L0t(e){return EJ(function(t){return X0t(e,t)})}function R0t(e,t,n,r,i,o,a,s){var l=[],u=0,c=0,d=!1,f=function(){d&&!l.length&&!u&&t.complete()},h=function(g){return u<r?m(g):l.push(g)},m=function(g){u++;var y=!1;bZ(n(g,c++)).subscribe(ef(t,function(v){t.next(v)},function(){y=!0},void 0,function(){if(y)try{u--;for(var v=function(){var w=l.shift();a?I0t(t,a,function(){return m(w)}):m(w)};l.length&&u<r;)v();f()}catch(w){t.error(w)}}))};return e.subscribe(ef(t,h,function(){d=!0,f()})),function(){}}function vve(e,t,n){return n===void 0&&(n=1/0),ln(t)?vve(function(r,i){return EJ(function(o,a){return t(r,o,i,a)})(bZ(e(r,i)))},n):(typeof t=="number"&&(n=t),gZ(function(r,i){return R0t(r,i,e,n)}))}var C0t=["addListener","removeListener"],V0t=["addEventListener","removeEventListener"],Y0t=["on","off"];function jN(e,t,n,r){if(ln(n)&&(r=n,n=void 0),r)return jN(e,t,n).pipe(L0t(r));var i=sc(F0t(e)?V0t.map(function(s){return function(l){return e[s](t,l,n)}}):T0t(e)?C0t.map(qQ(e,t)):N0t(e)?Y0t.map(qQ(e,t)):[],2),o=i[0],a=i[1];if(!o&&bve(e))return vve(function(s){return jN(s,t,n)})(bZ(e));if(!o)throw new TypeError("Invalid event target");return new Al(function(s){var l=function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return s.next(1<u.length?u:u[0])};return o(l),function(){return a(l)}})}function qQ(e,t){return function(n){return function(r){return e[n](t,r)}}}function T0t(e){return ln(e.addListener)&&ln(e.removeListener)}function N0t(e){return ln(e.on)&&ln(e.off)}function F0t(e){return ln(e.addEventListener)&&ln(e.removeEventListener)}function M0t(e,t,n){e===void 0&&(e=0),n===void 0&&(n=l0t);var r=-1;return t!=null&&(u0t(t)?n=t:r=t),new Al(function(i){var o=W0t(e)?+e-n.now():e;o<0&&(o=0);var a=0;return n.schedule(function(){i.closed||(i.next(a++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function xve(e,t){return gZ(function(n,r){var i=0;n.subscribe(ef(r,function(o){return e.call(t,o,i++)&&r.next(o)}))})}var wve={leading:!0,trailing:!1};function O0t(e,t){return t===void 0&&(t=wve),gZ(function(n,r){var i=t.leading,o=t.trailing,a=!1,s=null,l=null,u=!1,c=function(){l==null||l.unsubscribe(),l=null,o&&(h(),u&&r.complete())},d=function(){l=null,u&&r.complete()},f=function(m){return l=bZ(e(m)).subscribe(ef(r,c,d))},h=function(){if(a){a=!1;var m=s;s=null,r.next(m),!u&&f(m)}};n.subscribe(ef(r,function(m){a=!0,s=m,!(l&&!l.closed)&&(i?h():f(m))},function(){u=!0,!(o&&a&&l&&!l.closed)&&r.complete()}))})}function Zve(e,t,n){t===void 0&&(t=gve),n===void 0&&(n=wve);var r=M0t(e,t);return O0t(function(){return r},n)}function z0t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=d0t(e);return gZ(function(r,i){for(var o=e.length,a=new Array(o),s=e.map(function(){return!1}),l=!1,u=function(d){bZ(e[d]).subscribe(ef(i,function(f){a[d]=f,!l&&!s[d]&&(s[d]=!0,(l=s.every(mve))&&(s=null))},ON))},c=0;c<o;c++)u(c);r.subscribe(ef(i,function(d){if(l){var f=qd([d],sc(a));i.next(n?n.apply(void 0,qd([],sc(f))):f)}}))})}const P0t=(e,t,n,r,i)=>{const o={getSVGData(){return Promise.all(t.current.map(s=>s.view.toSVG()))},async getCanvasData(){return(await Promise.all(t.current.map(s=>s.view.toCanvas(2)))).map(s=>s.toDataURL("image/png",1))},async downloadSVG(s=`gw chart ${Date.now()%1e6}`.padStart(6,"0")){const l=await Promise.all(t.current.map(c=>c.view.toSVG())),u=[];for(let c=0;c<l.length;c+=1){const d=l[c],f=new File([d],`${s}${l.length>1?`_${c+1}`:""}.svg`),h=URL.createObjectURL(f),m=document.createElement("a");m.download=f.name,m.href=h,m.click(),requestAnimationFrame(()=>{URL.revokeObjectURL(h)})}return u},async downloadPNG(s=`gw chart ${Date.now()%1e6}`.padStart(6,"0")){const l=(await Promise.all(t.current.map(c=>c.view.toCanvas(2)))).map(c=>c.toDataURL("image/png",1)),u=[];for(let c=0;c<l.length;c+=1){const d=l[c],f=document.createElement("a");f.download=`${s}${l.length>1?`_${c+1}`:""}.png`,f.href=d.replace(/^data:image\/[^;]/,"data:application/octet-stream"),f.click()}return u}};G.useImperativeHandle(n,()=>o);const a=ab();G.useEffect(()=>{const s=a.current;s&&(Promise.all(r.current).then(()=>{if(a.current){const l=a.current;if(l.renderStatus!=="rendering")return;setTimeout(()=>{l.renderStatus==="rendering"&&l.updateRenderStatus("idle")},0)}}).catch(()=>{if(a.current){if(a.current.renderStatus!=="rendering")return;a.current.updateRenderStatus("error")}}),s.exportChart=async(l="svg")=>{if(s.renderStatus==="error")return console.error("exportChart failed because error occurred when rendering chart."),{mode:l,title:"",nCols:0,nRows:0,charts:[],chartType:"vega"};if(s.renderStatus!=="idle"){let c=null;const d=new Promise((f,h)=>{c=s.onRenderStatusChange(m=>{m==="error"?h(new Error("Error occurred when rendering chart")):m==="idle"&&f()}),setTimeout(()=>h(new Error("Timeout")),1e4)});try{await d}catch(f){return console.error("exportChart failed:",`${f}`),{mode:l,title:"",nCols:0,nRows:0,charts:[],chartType:"vega"}}finally{c==null||c()}}const u={mode:l,title:e||"untitled",nCols:t.current.map(c=>c.x).reduce((c,d)=>Math.max(c,d),0)+1,nRows:t.current.map(c=>c.y).reduce((c,d)=>Math.max(c,d),0)+1,charts:t.current.map(c=>({rowIndex:c.y,colIndex:c.x,width:c.w,height:c.h,canvasWidth:c.innerWidth,canvasHeight:c.innerHeight,data:"",canvas(){return c.canvas}})),container(){return i.current},chartType:"vega"};if(l==="data-url"){const c=await o.getCanvasData();if(c)for(let d=0;d<c.length;d+=1)u.charts[d].data=c[d]}else if(l==="svg"){const c=await o.getSVGData();if(c)for(let d=0;d<c.length;d+=1)u.charts[d].data=c[d]}return u},s.exportChartList=async function*(l="svg"){const u=s.chartCount,c=new Array(u).fill(0).map((f,h)=>h),d=s.chartIndex;for await(const f of c){s.openChart(f),await new Promise(m=>setTimeout(m,0));const h=await s.exportChart(l);yield{mode:l,total:u,index:f,data:h,hasNext:f<u-1}}s.openChart(d)})}),G.useEffect(()=>()=>{a.current&&(a.current.updateRenderStatus("idle"),a.current.exportChart=async(s="svg")=>({mode:s,title:"",nCols:0,nRows:0,charts:[],container(){return null}}),a.current.exportChartList=async function*(s="svg"){yield{mode:s,total:1,completed:0,index:0,data:{mode:s,title:"",nCols:0,nRows:0,charts:[],container(){return null}},hasNext:!1}})},[])};function eq(e){switch(e){case"zh-CN":return{dateTime:"%x %A %X",date:"%Y%-m%-d",time:"%H:%M:%S",periods:["",""],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]};case"en-US":default:return{dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}}}/*!
 * canvas-size
 * v1.2.6
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2023 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function j0t(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function tq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Zo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tq(Object(n),!0).forEach(function(r){H0t(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tq(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function H0t(e,t,n){return t=q0t(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J0t(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function B0t(e,t){if(e==null)return{};var n=J0t(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function nq(e,t){return D0t(e)||j0t(e,t)||Sve(e,t)||$0t()}function Ek(e){return K0t(e)||A0t(e)||Sve(e)||U0t()}function K0t(e){if(Array.isArray(e))return HN(e)}function D0t(e){if(Array.isArray(e))return e}function A0t(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Sve(e,t){if(e){if(typeof e=="string")return HN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HN(e,t)}}function HN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U0t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $0t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q0t(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q0t(e){var t=Q0t(e,"string");return typeof t=="symbol"?t:String(t)}function xx(e){var t=e.sizes.shift(),n=Math.max(Math.ceil(t[0]),1),r=Math.max(Math.ceil(t[1]),1),i=[n-1,r-1,1,1],o=Date.now(),a=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,s,l;a?(s=new OffscreenCanvas(1,1),l=new OffscreenCanvas(n,r)):(s=document.createElement("canvas"),s.width=1,s.height=1,l=document.createElement("canvas"),l.width=n,l.height=r);var u=s.getContext("2d"),c=l.getContext("2d");c&&(c.fillRect.apply(c,i),u.drawImage(l,n-1,r-1,1,1,0,0,1,1));var d=u&&u.getImageData(0,0,1,1).data[3]!==0,f=Date.now()-o;return[s,l].forEach(function(h){h.height=0,h.width=0}),a?(postMessage({width:n,height:r,benchmark:f,isTestPass:d}),!d&&e.sizes.length&&xx(e)):d?e.onSuccess(n,r,f):(e.onError(n,r,f),e.sizes.length&&xx(e)),d}var vC={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},egt=["onError","onSuccess"],h0={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},Ay={};function xC(e){var t=e.width===e.height,n=e.height===1,r=e.width===1,i=[];if(!e.width||!e.height)e.sizes.forEach(function(c){var d=t||n?c:1,f=t||r?c:1;i.push([d,f])});else for(var o=e.min||h0.min,a=e.step||h0.step,s=Math.max(e.width,e.height);s>=o;){var l=t||n?s:1,u=t||r?s:1;i.push([l,u]),s-=a}return i}function Xk(e){var t=window&&"HTMLCanvasElement"in window,n=window&&"OffscreenCanvas"in window,r=Date.now(),i=e.onError,o=e.onSuccess,a=B0t(e,egt),s=null;if(!t)return!1;if(e.useWorker&&n){var l=`
            var canvasTest = `.concat(xx.toString(),`;
            onmessage = function(e) {
                canvasTest(e.data);
            };
        `),u=new Blob([l],{type:"application/javascript"}),c=URL.createObjectURL(u);s=new Worker(c),URL.revokeObjectURL(c),s.onmessage=function(d){var f=d.data,h=f.width,m=f.height,g=f.benchmark,y=f.isTestPass;y?(Ay[r].onSuccess(h,m,g),delete Ay[r]):Ay[r].onError(h,m,g)}}if(e.usePromise)return new Promise(function(d,f){var h=Zo(Zo({},e),{},{onError:function(y,v,w){var Z;if(e.sizes.length===0)Z=!0;else{var k=e.sizes.slice(-1),_=nq(k,1),R=nq(_[0],2),I=R[0],E=R[1];Z=y===I&&v===E}i(y,v,w),Z&&f({width:y,height:v,benchmark:w})},onSuccess:function(y,v,w){o(y,v,w),d({width:y,height:v,benchmark:w})}});if(s){var m=h.onError,g=h.onSuccess;Ay[r]={onError:m,onSuccess:g},s.postMessage(a)}else xx(h)});if(s)Ay[r]={onError:i,onSuccess:o},s.postMessage(a);else return xx(e)}var rq={maxArea:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=xC({width:e.max,height:e.max,min:e.min,step:e.step,sizes:Ek(vC.area)}),n=Zo(Zo(Zo({},h0),e),{},{sizes:t});return Xk(n)},maxHeight:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=xC({width:1,height:e.max,min:e.min,step:e.step,sizes:Ek(vC.height)}),n=Zo(Zo(Zo({},h0),e),{},{sizes:t});return Xk(n)},maxWidth:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=xC({width:e.max,height:1,min:e.min,step:e.step,sizes:Ek(vC.width)}),n=Zo(Zo(Zo({},h0),e),{},{sizes:t});return Xk(n)},test:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Zo(Zo({},h0),e);return t.sizes=Ek(t.sizes),t.width&&t.height&&(t.sizes=[[t.width,t.height]]),Xk(t)}};const iq={canvasExceedSize:500},kve=x.createContext({reportError:()=>{}}),tgt=()=>x.useContext(kve),_ve=kve.Provider,ngt=Ae.div`
  display: grid;
  grid-template-columns: repeat(${e=>e.colSize}, 1fr);
  grid-template-rows: repeat(${e=>e.rowSize}, 1fr);
`,wC="geom",JN=new ME,BN=new ME,rgt=BN.pipe(z0t(JN),xve(([e,t])=>Object.keys(e).length>0)),oq="__gw_brush__",aq="__gw_point__",igt=G.forwardRef(function(e,t){const{name:n,dataSource:r=[],rows:i=[],columns:o=[],defaultAggregate:a=!0,stack:s="stack",geomType:l,color:u,opacity:c,size:d,theta:f,radius:h,shape:m,text:g,onGeomClick:y,showActions:v,interactiveScale:w,layoutMode:Z,width:k,height:_,details:R=[],dark:I="media",vegaConfig:E,locale:X="en-US",useSvg:Y,channelScales:C,scale:N}=e,[V,F]=G.useState([]),O=Xs(I),P=G.useMemo(()=>{var de,be;const U=C!=null?C:{};return N!=null&&N.opacity&&(U.opacity={...(de=U.opacity)!=null?de:{},...N.opacity}),N!=null&&N.size&&(U.size={...(be=U.size)!=null?be:{},...N.size}),U},[C,N]);G.useEffect(()=>{const U=rgt.subscribe(([de,be])=>{y&&y(de,be)});return()=>{U.unsubscribe()}},[y]);const H=G.useMemo(()=>i.filter(U=>U.analyticType==="dimension"),[i]),M=G.useMemo(()=>o.filter(U=>U.analyticType==="dimension"),[o]),j=G.useMemo(()=>i.filter(U=>U.analyticType==="measure"),[i]),J=G.useMemo(()=>o.filter(U=>U.analyticType==="measure"),[o]),q=G.useMemo(()=>H.slice(0,-1),[H]),K=G.useMemo(()=>M.slice(0,-1),[M]),D=G.useMemo(()=>j.length===0?H.slice(-1):j,[H,j]),$=G.useMemo(()=>J.length===0?M.slice(-1):J,[M,J]),Q=G.useMemo(()=>[...i,...o,u,c,d].filter(U=>!!U).map(U=>U.fid),[i,o,u,c,d]),{reportError:B}=tgt(),[pe,re]=G.useState(-1);G.useEffect(()=>{re(-1),F(U=>{const de=Math.max(1,D.length*$.length);return new Array(de).fill(null).map((be,xe)=>U[xe]||x.createRef())})},[D,$]);const ee=G.useRef([]),oe=G.useRef([]);G.useEffect(()=>{ee.current=[],oe.current=[];const U=i.length>0?i[i.length-1]:Ot,de=o.length>0?o[o.length-1]:Ot,be=i.slice(0,-1).filter(Fe=>Fe.analyticType==="dimension"),xe=o.slice(0,-1).filter(Fe=>Fe.analyticType==="dimension"),me=be.length>0?be[be.length-1]:Ot,Ce=xe.length>0?xe[xe.length-1]:Ot,Xe={data:{values:r},params:[{name:wC,select:{type:"point",fields:Q}}]};if(w&&Xe.params.push({name:"grid",select:"interval",bind:"scales"}),D.length<=1&&$.length<=1){Z==="fixed"&&(me===Ot&&Ce===Ot&&(Xe.autosize="fit"),Xe.width=k,Xe.height=_);const Fe=q6({x:de,y:U,color:u||Ot,opacity:c||Ot,size:d||Ot,shape:m||Ot,theta:f||Ot,radius:h||Ot,text:g||Ot,row:me,column:Ce,xOffset:Ot,yOffset:Ot,details:R,defaultAggregated:a,stack:s,geomType:l}),Ue=P?e8(P,Fe,r,O):Fe;Xe.mark=Ue.mark,"encoding"in Ue&&(Xe.encoding=Ue.encoding),Xe.resolve||(Xe.resolve={});let at=E.resolve;for(let Qe in at){let Me=at[Qe]?"independent":"shared";Xe.resolve.scale={...Xe.resolve.scale,[Qe]:Me},Kt.POSITION_CHANNEL_CONFIG_LIST.includes(Qe)?Xe.resolve.axis={...Xe.resolve.axis,[Qe]:Me}:Kt.NON_POSITION_CHANNEL_CONFIG_LIST.includes(Qe)&&(Xe.resolve.legend={...Xe.resolve.legend,[Qe]:Me})}if(V.length>0&&V[0].current){const Qe=YN(V[0].current,Xe,{renderer:Y?"svg":"canvas",mode:"vega-lite",actions:v,timeFormatLocale:eq(X),config:E}).then(Me=>{var nt,lt,bt,zn,tn;const ne=Me.view.container(),ye=(nt=ne==null?void 0:ne.querySelector("canvas"))!=null?nt:null;Y||ye&&rq.test({width:ye.width,height:ye.height})||B(ye?"canvas exceed max size":"canvas not found",iq.canvasExceedSize),ee.current=[{w:(lt=ne==null?void 0:ne.clientWidth)!=null?lt:Me.view.width(),h:(bt=ne==null?void 0:ne.clientHeight)!=null?bt:Me.view.height(),innerWidth:(zn=ye==null?void 0:ye.clientWidth)!=null?zn:Me.view.width(),innerHeight:(tn=ye==null?void 0:ye.clientHeight)!=null?tn:Me.view.height(),x:0,y:0,view:Me.view,canvas:ye}];try{Me.view.addEventListener("click",Pn=>{JN.next(Pn)}),Me.view.addSignalListener(wC,(Pn,zs)=>{BN.next(zs)})}catch(Pn){console.warn(Pn)}});oe.current=[Qe]}}else{Z==="fixed"&&(Xe.width=Math.floor(k/$.length)-5,Xe.height=Math.floor(_/D.length)-5,Xe.autosize="fit");const Fe=new ME,Ue=Fe.pipe(Zve(r.length/64*D.length*$.length,void 0,{leading:!1,trailing:!0})),at=[],Qe=ne=>{at.push(Ue.subscribe(ne))};let Me=0;ee.current=new Array(D.length*$.length);for(let ne=0;ne<D.length;ne++)for(let ye=0;ye<$.length;ye++,Me++){const nt=Me,lt=ne===0&&ye===$.length-1,bt=q6({x:$[ye]||Ot,y:D[ne]||Ot,color:u||Ot,opacity:c||Ot,size:d||Ot,shape:m||Ot,theta:f||Ot,radius:h||Ot,row:me,column:Ce,text:g||Ot,xOffset:Ot,yOffset:Ot,details:R,defaultAggregated:a,stack:s,geomType:l,hideLegend:!lt}),zn=P?e8(P,bt,r,O):bt,tn=ne*$.length+ye<V.length?V[ne*$.length+ye].current:null;let Pn={...Xe};const zs={...Pn,...zn};if("params"in Pn&&(zs.params=Pn.params),tn){const _c=Me,Ps=YN(tn,zs,{renderer:Y?"svg":"canvas",mode:"vega-lite",actions:v,timeFormatLocale:eq(X),config:E}).then(Kn=>{var Kb,Db,Ab,WZ,EZ,XZ;var Gc;const Br=Kn.view.container(),gi=(Kb=Br==null?void 0:Br.querySelector("canvas"))!=null?Kb:null;Y||gi&&rq.test({width:gi.width,height:gi.height})||B(gi?"canvas exceed max size":"canvas not found",iq.canvasExceedSize),ee.current[_c]={w:(Db=Br==null?void 0:Br.clientWidth)!=null?Db:Kn.view.width(),h:(Ab=Br==null?void 0:Br.clientHeight)!=null?Ab:Kn.view.height(),innerWidth:(WZ=gi==null?void 0:gi.clientWidth)!=null?WZ:Kn.view.width(),innerHeight:(EZ=gi==null?void 0:gi.clientHeight)!=null?EZ:Kn.view.height(),x:ye,y:ne,view:Kn.view,canvas:gi};const Bb=((XZ=(Gc=Kn.vgSpec.data)==null?void 0:Gc.map(Kr=>Kr.name))!=null?XZ:[]).filter(Kr=>[oq,aq].map(du=>`${du}_store`).includes(Kr)).map(Kr=>Kr.replace(/_store$/,""));try{for(const Kr of Bb){let du=!1;Kn.view.addSignalListener(Kr,js=>{var Jh;if(du){du=!1;return}if([oq,aq].includes(js)){const Ic=(Jh=Kn.view.getState().data)==null?void 0:Jh[`${js}_store`];(!Ic||Array.isArray(Ic)&&Ic.length===0)&&re(-1),Fe.next({signal:js,source:nt,data:Ic!=null?Ic:null})}}),Qe(js=>{js.source===nt||!js.data||(du=!0,Kn.view.setState({data:{[`${js.signal}_store`]:js.data}}))})}}catch(Kr){console.warn("Crossing filter failed",Kr)}try{Kn.view.addEventListener("mouseover",()=>{nt!==pe&&re(nt)}),Kn.view.addEventListener("click",Kr=>{JN.next(Kr)}),Kn.view.addSignalListener(wC,(Kr,du)=>{BN.next(du)})}catch(Kr){console.warn(Kr)}});oe.current.push(Ps)}}return()=>{at.forEach(ne=>ne.unsubscribe())}}return()=>{ee.current=[],oe.current=[]}},[r,Q,i,o,a,l,u,c,d,m,f,h,V,q,K,D,$,s,v,w,Z,k,_,E,R,g,Y,P,O]);const ue=G.useRef(null);return P0t(n,ee,t,oe,ue),x.createElement(ngt,{rowSize:Math.max(D.length,1),colSize:Math.max($.length,1),ref:ue},V.map((U,de)=>x.createElement("div",{key:de,ref:U})))}),Gve=G.forwardRef(function({name:e,layout:t,themeKey:n,dark:r,data:i,loading:o,draggableFieldState:a,visualConfig:s,onGeomClick:l,onChartResize:u,locale:c,themeConfig:d,channelScales:f},h){const{geoms:m,defaultAggregated:g,coordSystem:y}=s,{interactiveScale:v,stack:w,showActions:Z,size:k,format:_,background:R,zeroScale:I,resolve:E,useSvg:X,primaryColor:Y,colorPalette:C,scale:N}=t,V=a.rows,F=a.columns,O=a.color,P=a.opacity,H=a.shape,M=a.theta,j=a.radius,J=a.size,q=a.details,K=a.text,D=_,$=G.useMemo(()=>V.slice(0,-1).filter(de=>de.analyticType==="dimension"),[V]),Q=G.useMemo(()=>F.slice(0,-1).filter(de=>de.analyticType==="dimension"),[F]),B=m[0]==="table",pe=$.length>0||Q.length>0,re=k.mode==="fixed"&&!pe&&!!u,ee=Xs(r),oe=yje({themeKey:n,mediaTheme:ee,themeConfig:d,primaryColor:Y,colorPalette:C}),ue=G.useMemo(()=>{const de={...oe,background:ee==="dark"?"#18181f":"#ffffff"};return D.normalizedNumberFormat&&D.normalizedNumberFormat.length>0&&(de.normalizedNumberFormat=D.normalizedNumberFormat),D.numberFormat&&D.numberFormat.length>0&&(de.numberFormat=D.numberFormat),D.timeFormat&&D.timeFormat.length>0&&(de.timeFormat=D.timeFormat),de.scale||(de.scale={}),de.scale.zero=!!I,de.resolve=E,R&&(de.background=R),de},[oe,ee,I,E,R,D.normalizedNumberFormat,D.numberFormat,D.timeFormat]);if(B)return x.createElement(cOe,{data:i,draggableFieldState:a,visualConfig:s,layout:t,loading:o,themeKey:n,dark:r});const U=y==="geographic";return x.createElement(iOe,{className:re?"border-blue-400 border-2 overflow-hidden inline-block":"inline-block",style:{padding:"12px"},onResizeStop:(de,be,xe,me)=>{u==null||u(k.width+me.width,k.height+me.height)},enable:re?void 0:{top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},size:k.mode==="fixed"?{width:k.width+"px",height:k.height+"px"}:U?{width:EY+"px",height:RG+"px"}:void 0},o&&x.createElement(sb,null),U&&x.createElement(Aue,{name:e,data:i,draggableFieldState:a,visualConfig:s,visualLayout:t,vegaConfig:ue,channelScales:f,scale:N}),U||x.createElement(igt,{name:e,vegaConfig:ue,layoutMode:k.mode,interactiveScale:v,geomType:m[0],defaultAggregate:g,stack:w,dataSource:i,rows:V,columns:F,color:O[0],theta:M[0],radius:j[0],shape:H[0],opacity:P[0],size:J[0],details:q,text:K[0],showActions:Z,width:k.width-12*4,height:k.height-12*4,ref:h,onGeomClick:l,locale:c,useSvg:X,channelScales:f,dark:r,scale:N}))}),Ive=e=>{const{allFields:t,viewDimensions:n,viewMeasures:r,filters:i,defaultAggregated:o,sort:a,limit:s,computationFunction:l,folds:u}=e,[c,d]=G.useState(!1),f=G.useRef(0),h=G.useMemo(()=>eg(i,t,n,r,o,a,u,s>0?s:void 0),[i,t,n,r,o,a,u,s]),[m,g]=G.useState([]),[y,v]=G.useState([]),w=ab();G.useEffect(()=>{var k;const _=++f.current;(k=w.current)==null||k.updateRenderStatus("computing"),d(!0),xG(l,h,s>0?s:void 0).then(R=>gle(R,o,t,r,n,u)).then(R=>{var I;_===f.current&&((I=w.current)==null||I.updateRenderStatus("rendering"),qn.unstable_batchedUpdates(()=>{d(!1),g(R),v(h)}))}).catch(R=>{var I;_===f.current&&((I=w.current)==null||I.updateRenderStatus("error"),console.error(R),qn.unstable_batchedUpdates(()=>{d(!1),g([]),v([])}))})},[l,h]);const Z=G.useMemo(()=>({workflow:y}),[y]);return G.useMemo(()=>({viewData:m,loading:c,parsed:Z}),[m,c])},ogt=e=>{const t=ab();G.useEffect(()=>{t.current&&(t.current.chartCount=e.count,t.current.chartIndex=e.index,t.current.openChart=function(n){n!==this.chartIndex&&(Number.isInteger(n)&&n>=0&&n<this.chartCount?e.onChange(n):console.warn(`Invalid chart index: ${n}`))})}),G.useEffect(()=>()=>{t.current&&(t.current.chartCount=1,t.current.chartIndex=0,t.current.openChart=()=>{})},[])},agt=G.forwardRef(function(e,t){const{themeKey:n,dark:r,computationFunction:i,themeConfig:o,csvRef:a}=e,s=Tt(),{allFields:l,viewFilters:u,viewDimensions:c,viewMeasures:d,config:f,layout:h,currentVis:m,visIndex:g,visLength:y,sort:v,limit:w}=s,Z=m.encodings,{i18n:k}=ot(),[_,R]=G.useState(Vae),[I,E]=G.useState(iO),[X,Y]=G.useState([]),{viewData:C,loading:N}=Ive({allFields:l,viewDimensions:c,viewMeasures:d,filters:u,defaultAggregated:f.defaultAggregated,sort:v,limit:w,folds:f.folds,computationFunction:i});G.useEffect(()=>{a&&(a.current={download(){const M=c.concat(d).map(J=>J.fid===ai?{name:"Count",fid:ai}:_.defaultAggregated&&J.analyticType==="measure"?{fid:cr(J.fid,J.aggName),name:`${J.aggName}(${J.name})`}:{fid:J.fid,name:J.name}),j=`${M.map(J=>J.name).join(",")}
${C.map(J=>M.map(q=>J[q.fid]).join(",")).join(`
`)}`;Yae(j,`${m.name}.csv`,"text/plain")}})},[m.name,a,C,c,d,_.defaultAggregated]);const V=G.useRef({data:C,draggableFieldState:Z,visualConfig:f});V.current={data:C,draggableFieldState:Z,visualConfig:f},G.useEffect(()=>{N===!1&&qn.unstable_batchedUpdates(()=>{Y(V.current.data),E(V.current.draggableFieldState),R(V.current.visualConfig)})},[N,C,s]),ogt({count:y,index:g,onChange:M=>s.selectVisualization(M)});const F=G.useCallback((M,j)=>{if(j.stopPropagation(),Kt.EMBEDED_MENU_LIST.length>0){Aoe(()=>{s.showEmbededMenu([j.clientX,j.clientY]),s.setFilters(M)});const J=M.vlPoint.or[0];s.updateSelectedMarkObject(J)}},[s]),O=G.useCallback((M,j)=>{s.setVisualLayout("size",{mode:"fixed",width:M,height:j})},[s]),P=_.coordSystem==="geographic",H=G.useRef(h.size);return H.current=h.size,G.useEffect(()=>{if(P){const M=H.current;if(H.current.width<EY||H.current.height<RG)return s.setVisualLayout("size",{mode:H.current.mode,width:Math.max(M.width,EY),height:Math.max(M.height,RG)}),()=>{s.setVisualLayout("size",M)}}},[P,s]),x.createElement(Gve,{name:m==null?void 0:m.name,loading:N,data:X,ref:t,themeKey:n,themeConfig:o,dark:r,locale:k.language,draggableFieldState:I,visualConfig:_,onGeomClick:F,onChartResize:O,layout:h,channelScales:e.channelScales})}),sgt=ft(agt),lgt=Ae.div`
    position: fixed;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    backdrop-filter: blur(1px);
    z-index: 25535;
`,ugt=Ae.div`
    width: 98%;
    @media (min-width: 600px) {
        width: 80%;
    }
    @media (min-width: 1100px) {
        width: 880px;
    }
    max-height: calc(min(800px, 90vh));
    overflow: auto;
    > div.container {
        padding: 0.5em 1em 1em 1em;
    }
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    /* box-shadow: 0px 0px 12px 3px rgba(0, 0, 0, 0.19); */
    border-radius: 4px;
    z-index: 999;
`,wc=e=>{const{onClose:t,title:n,show:r}=e,i=G.useRef(0);return x.createElement(lgt,{className:"border border-gray-300 dark:border-gray-600 "+(r?"block":"hidden"),onMouseDown:()=>i.current=Date.now(),onMouseOut:()=>i.current=0,onMouseUp:()=>{Date.now()-i.current<1e3&&(t==null||t())}},x.createElement(ugt,{style:e.containerStyle,role:"dialog",className:"bg-white dark:bg-zinc-900 shadow-lg rounded-md border border-gray-100 dark:border-gray-800",onMouseDown:o=>o.stopPropagation()},x.createElement("div",{className:"absolute top-0 right-0 hidden pt-4 pr-4 sm:block"},x.createElement("button",{type:"button",className:"rounded-md bg-white dark:bg-zinc-900 text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:()=>{t==null||t()}},x.createElement("span",{className:"sr-only"},"Close"),x.createElement(qM,{className:"h-6 w-6","aria-hidden":"true"}))),x.createElement("div",{className:"px-6 pt-4 text-base font-semibold leading-6 text-gray-900 dark:text-gray-50"},n),x.createElement("div",{className:"container"},e.children)))},go=e=>{const{text:t,onClick:n,disabled:r,className:i,icon:o}=e;let a="inline-flex items-center rounded border border-gray-300 bg-white dark:bg-zinc-900 px-2.5 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-200 shadow-sm hover:bg-gray-50 dark:hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50";return i&&(a=a+" "+i),x.createElement("button",{className:a,onClick:n,disabled:r},t,o)},Fs=e=>{const{text:t,onClick:n,disabled:r,className:i}=e;let o="inline-flex items-center rounded border border-transparent bg-indigo-600 px-2.5 py-1.5 text-xs font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50";return i&&(o=o+" "+i),x.createElement("button",{className:o,onClick:n,disabled:r},t)},cgt=ft(function(){const{t:e}=ot(),t=Tt();return x.createElement(wc,{onClose:()=>t.closeRemoveConfirmModal(),show:t.removeConfirmIdx!==null},x.createElement("div",null,x.createElement("span",{className:"block text-sm font-medium leading-6"},e("main.tablist.remove_confirm")),x.createElement("div",{className:"mt-4 flex justify-end"},x.createElement(go,{className:"mr-2",text:e("actions.cancel"),onClick:()=>{t.closeRemoveConfirmModal()}}),x.createElement(Fs,{className:"bg-red-600 hover:bg-red-700",text:e("actions.confirm"),onClick:()=>{t.removeVisualization(t.removeConfirmIdx),t.closeRemoveConfirmModal()}}))))});function dgt(...e){return e.filter(Boolean).join(" ")}const fgt=e=>{const[t,n]=G.useState(0),r=G.useRef(),i=G.useRef(),o=G.useRef(),a=G.useCallback(u=>{var c,d,f;u.preventDefault(),u.stopPropagation();const h=(c=r.current)==null?void 0:c.getBoundingClientRect().width,m=(f=(d=r.current)==null?void 0:d.children[0])==null?void 0:f.getBoundingClientRect().width;return h&&m&&n(g=>Math.min(Math.max(0,m-h),Math.max(0,g+u.deltaY+u.deltaX))),!1},[]),s=G.useCallback(u=>{var c;if((c=i.current)==null||c.call(i),u==null)return;const d=new ResizeObserver(f=>{var h,m;for(const g of f){const y=g.contentRect.width,v=(m=(h=r.current)==null?void 0:h.children[0])==null?void 0:m.getBoundingClientRect().width;y&&v&&n(w=>Math.min(Math.max(0,v-y),w))}});d.observe(u),r.current=u,u.addEventListener("wheel",a,{passive:!1}),i.current=()=>{var f;d.disconnect(),(f=r.current)==null||f.removeEventListener("wheel",a)}},[a]),l=G.useCallback(u=>{var c;if((c=o.current)==null||c.call(o),u===null)return;const d=new ResizeObserver(f=>{var h;for(const m of f){const g=(h=r.current)==null?void 0:h.getBoundingClientRect().width,y=m.contentRect.width;g&&y&&n(v=>Math.min(Math.max(0,y-g),v))}});o.current=()=>{d.disconnect()},d.observe(u)},[]);return x.createElement("div",{style:{overflowX:"clip"},ref:s,onWheel:u=>(u.preventDefault(),u.stopPropagation(),u.nativeEvent.preventDefault(),n(c=>Math.max(0,c+u.deltaY)),!1),className:e.className},x.createElement("div",{ref:l,style:{left:`-${t}px`,width:"min-content",position:"relative"}},e.children))};function pgt(e){const{tabs:t,selectedKey:n,onSelected:r,onEditLabel:i,onRemove:o,onDuplicate:a,showRemove:s}=e,[l,u]=G.useState(-1),[c,d]=G.useState(""),{t:f}=ot();return x.createElement("div",{className:"border-b border-gray-200 dark:border-gray-700 overflow-y-visible"},x.createElement(cgt,null),x.createElement(wc,{show:l>-1,onClose:()=>{u(-1)}},x.createElement("div",null,x.createElement("span",{className:"block text-sm font-medium leading-6"},f("main.tablist.chart_name")),x.createElement("div",{className:"mt-2"},x.createElement("input",{value:c,onChange:h=>{d(h.target.value)},type:"text",name:"text",className:"block w-full rounded-md border-0 px-2 py-1.5 bg-transparent shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})),x.createElement("div",{className:"mt-4 flex justify-end"},x.createElement(go,{className:"mr-2",text:f("actions.cancel"),onClick:()=>{qn.unstable_batchedUpdates(()=>{u(-1),d("")})}}),x.createElement(Fs,{text:f("actions.confirm"),onClick:()=>{qn.unstable_batchedUpdates(()=>{i&&i(c,l),u(-1),d("")})}})))),x.createElement(fgt,null,x.createElement("nav",{className:"-mb-px flex h-8 border-gray-200 dark:border-gray-700",role:"tablist","aria-label":"Tabs"},t.map((h,m)=>x.createElement("span",{role:"tab",tabIndex:0,onClick:()=>{r(h.key,m)},key:h.key,className:dgt(h.key===n?"border":"text-gray-500 dark:text-gray-400 hover:text-gray-700 hover:bg-gray-50 dark:hover:text-gray-200 dark:hover:bg-gray-800","flex whitespace-nowrap rounded-t group border-gray-200 dark:border-gray-700 py-1 px-2 pr-2 text-sm cursor-default dark:text-white")},h.label,h.key===n&&h.editable&&x.createElement(TL,{className:"relative inline-flex"},x.createElement(TL.Button,{className:"inline-flex items-center gap-x-1 text-sm font-semibold leading-6 text-gray-900 dark:text-white"},x.createElement($x,{className:"h-4 w-4","aria-hidden":"true"})),x.createElement(Jp,{as:G.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1"},x.createElement(TL.Panel,{className:"absolute left-1/2 z-10 mt-5 flex w-screen max-w-min -translate-x-1/4 px-2"},x.createElement("div",{className:"shrink rounded p-1 bg-white dark:bg-zinc-900 text-xs font-semibold leading-2 text-gray-900 dark:text-white shadow-lg ring-1 ring-gray-900/5"},x.createElement("button",{onClick:g=>{g.stopPropagation(),qn.unstable_batchedUpdates(()=>{u(m),d(h.label)})},className:"block p-1 w-full hover:bg-gray-200 dark:hover:bg-gray-800 text-left"},"Edit"),x.createElement("button",{onClick:g=>{g.stopPropagation(),a==null||a(m)},className:"block p-1 w-full hover:bg-gray-200 dark:hover:bg-gray-800 text-left"},"Duplicate"),s&&x.createElement("button",{onClick:g=>{g.stopPropagation(),o==null||o(m)},className:"block p-1 w-full hover:bg-gray-200 dark:hover:bg-gray-800 text-red-500 text-left"},"Remove"))))))))))}const sq="_add",hgt=e=>{const t=Tt(),{currentVis:n,visLength:r,vizList:i}=t,{t:o}=ot(),a=i.map(d=>{var f;return{key:d.visId,label:(f=d.name)!=null?f:"vis",editable:!0}});a.push({key:sq,label:o("main.tablist.new")});const s=G.useCallback((d,f)=>{d===sq?t.addVisualization(h=>o("main.tablist.auto_title",{idx:h})):t.selectVisualization(f)},[t,r]),l=G.useCallback((d,f)=>{t.setVisName(f,d)},[t]),u=G.useCallback(d=>{t.openRemoveConfirmModal(d)},[t]),c=G.useCallback(d=>{t.duplicateVisualization(d)},[t]);return x.createElement(pgt,{selectedKey:n.visId,tabs:a,onEditLabel:l,onSelected:s,onDuplicate:c,onRemove:u,showRemove:r>1})},mgt=ft(hgt);var Wve=[],ggt=Wve.forEach,bgt=Wve.slice;function ygt(e){return ggt.call(bgt.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e}var lq=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,vgt=function(e,t,n){var r=n||{};r.path=r.path||"/";var i=encodeURIComponent(t),o="".concat(e,"=").concat(i);if(r.maxAge>0){var a=r.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(r.domain){if(!lq.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(r.domain)}if(r.path){if(!lq.test(r.path))throw new TypeError("option path is invalid");o+="; Path=".concat(r.path)}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires=".concat(r.expires.toUTCString())}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite){var s=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(s){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},uq={create:function(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),r&&(i.domain=r),document.cookie=vgt(e,encodeURIComponent(t),i)},read:function(e){for(var t="".concat(e,"="),n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null},remove:function(e){this.create(e,"",-1)}},xgt={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&typeof document<"u"){var n=uq.read(e.lookupCookie);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&typeof document<"u"&&uq.create(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},wgt={name:"querystring",lookup:function(e){var t;if(typeof window<"u"){var n=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));for(var r=n.substring(1),i=r.split("&"),o=0;o<i.length;o++){var a=i[o].indexOf("=");if(a>0){var s=i[o].substring(0,a);s===e.lookupQuerystring&&(t=i[o].substring(a+1))}}}return t}},Uy=null,cq=function(){if(Uy!==null)return Uy;try{Uy=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(t){Uy=!1}return Uy},Zgt={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&cq()){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&cq()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},$y=null,dq=function(){if($y!==null)return $y;try{$y=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(t){$y=!1}return $y},Sgt={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&dq()){var n=window.sessionStorage.getItem(e.lookupSessionStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&dq()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},kgt={name:"navigator",lookup:function(e){var t=[];if(typeof navigator<"u"){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)t.push(navigator.languages[n]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},_gt={name:"htmlTag",lookup:function(e){var t,n=e.htmlTag||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(t=n.getAttribute("lang")),t}},Ggt={name:"path",lookup:function(e){var t;if(typeof window<"u"){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof n[e.lookupFromPathIndex]!="string")return;t=n[e.lookupFromPathIndex].replace("/","")}else t=n[0].replace("/","")}return t}},Igt={name:"subdomain",lookup:function(e){var t=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,n=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[t]}};function Wgt(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var Eve=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ra(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return Ca(e,[{key:"init",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=ygt(n,this.options||{},Wgt()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(xgt),this.addDetector(wgt),this.addDetector(Zgt),this.addDetector(Sgt),this.addDetector(kgt),this.addDetector(_gt),this.addDetector(Ggt),this.addDetector(Igt)}},{key:"addDetector",value:function(t){this.detectors[t.name]=t}},{key:"detect",value:function(t){var n=this;t||(t=this.options.order);var r=[];return t.forEach(function(i){if(n.detectors[i]){var o=n.detectors[i].lookup(n.options);o&&typeof o=="string"&&(o=[o]),o&&(r=r.concat(o))}}),this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}},{key:"cacheUserLanguage",value:function(t,n){var r=this;n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(function(i){r.detectors[i]&&r.detectors[i].cacheUserLanguage(t,r.options)}))}}]),e}();Eve.type="languageDetector";const Egt={scheme:"Scheme",primary_color:"Primary Color",color_palette:"Color Palette",opacity:"Opacity",default_color_palette:"Default",size:"Size",min_domain:"Domain Min",max_domain:"Domain Max",range:"Range",format:"Format",numberFormat:"Number format",timeFormat:"Time format",normalizedNumberFormat:"Normalized number format",background:"Background",color:"Color",independence:"Independence",x:"x-Axis",y:"y-Axis",zeroScale:"Zero Scale",misc:"Misc",formatGuidesDocs:"Format guides docs",readHere:"read here",svg:"Use SVG"},Xgt={row_count:"Row count",mea_key:"Measure names",mea_val:"Measure values",analytic_type:{dimension:"dimension",measure:"measure"},semantic_type:{nominal:"nominal",ordinal:"ordinal",temporal:"temporal",quantitative:"quantitative"},mark_type:{__enum__:"Mark Type",auto:"Auto",bar:"Bar",line:"Line",area:"Area",trail:"Trail",point:"Scatter",circle:"Circle",tick:"Tick",rect:"Rectangle",arc:"Arc",boxplot:"Box (Box Plot)",table:"Table",text:"Text",poi:"POI",choropleth:"Choropleth"},coord_system:{__enum__:"Coordinate System",generic:"Generic",geographic:"Geographic"},stack_mode:{__enum__:"Stack Mode",none:"None",stack:"Stack",normalize:"Normalize",center:"Center"},layout_type:{__enum__:"Layout Mode",auto:"Auto",fixed:"Fixed"},exploration_mode:{__enum__:"Exploration Mode",none:"Off",brush:"Brush",point:"Point"},brush_mode:{__enum__:"Brush Direction",default:"Both",x:"X-Only",y:"Y-Only"},draggable_key:{fields:"Fields",columns:"X-Axis",rows:"Y-Axis",color:"Color",opacity:"Opacity",size:"Size",shape:"Shape",theta:"Angle",radius:"Radius",filters:"Filters",details:"Details",text:"Text",longitude:"Longitude",latitude:"Latitude",geoId:"Geometry ID"},aggregator:{sum:"Sum",mean:"Mean",count:"Count",median:"Median",min:"Min",max:"Max",q1:"Q1",q3:"Q3",stdev:"Standard Deviation",variance:"Variance"},filter_type:{one_of:"Value set",one_of_desc:"Select values specified",range:"Range",range_desc:"Select values in a range [start, end]",temporal_range:"Date Range",temporal_range_desc:"Select values in a date range [start, end]"}},Lgt={labels:{data_interpretation:"Interpret Data",data_view:"View Data"},segments:{vis:"Visualization",data:"Data"}},Rgt={labels:{cur_dataset:"Current Dataset"},buttons:{create_dataset:"Create Dataset",export_as_file:"Save As File",import_file:"Import Graphic Walker File"},dialog:{create_data_source:"New Data Source",data_types:"DataSource Type",text_file_data:"Local Files",public_data:"Public Datasets",data_source_type:"Data Source Type: {{sourceType}}",file:{open:"Open...",submit:"Submit",dataset_name:"Dataset Name",choose_file:"Choose a Data File",get_start_desc:"Get started by creating a dataset."},public:{submit:"Submit"}}},Cgt={tablist:{new:"+ New",auto_title:"Chart {{idx}}",chart_name:"Chart Name",remove_confirm:"Are you sure you want to remove this chart?"},tabpanel:{menubar:{undo:"Undo",redo:"Redo"},askviz:{placeholder:"What visualization your want to draw from the dataset"},settings:{toggle:{aggregation:"Aggregation",stack:"Stack",axes_resize:"Axes Resizing",debug:"debugging"},sort:"Sorting Order",button:{ascending:"Sort in Ascending Order",descending:"Sort in Descending Order",transpose:"Transpose",config:"Config",export_chart:"Export",export_chart_as:"Export as {{type}}",export_code:"Export Code",geojson:"Geography Configuration"},limit:"Limit",size:"Resize",size_setting:{width:"Width",height:"Height"},table:{summary:"Show summary"},geography:"Geography Configuration",geography_settings:{geoKey:"Feature ID",format:"Format",geojson:"GeoJSON",topojson:"TopoJSON",objectKey:"Extract Feature Key",jsonInputPlaceholder:"Drop {{format}} file here",href:"{{format}} URL",hrefPlaceholder:"Enter {{format}} URL",load:"Load",loading:"Loading Geographic Data..."}},DatasetFields:{field_list:"Field List"}}},Vgt={to_edit:"Edit This Rule",empty_rule:"! (empty rule)",editing:"Filter Rule Settings",form:{name:"Field",aggregation:"Aggregation",rule:"Rule"},header:{visibility:"Visible",value:"Label",count:"Count"},selected_keys:"{{ count }} items selected",btn:{select_all:"Select All",unselect_all:"Unselect All",reverse:"Reverse Selection",confirm:"Confirm",cancel:"Cancel"},range:{start_value:"Start Value",end_value:"End Value"}},Ygt={lg_than:"greater than",sm_than:"less than",expection:"expectation",unrecognized:"Unrecognized",score:"score",contains:"contains",reason:{selection_dim_distribution:"dimensions' clues",selection_mea_distribution:"measures' clues",children_major_factor:"major factor",children_outlier:"outlier"}},Tgt={prev:"Previous",next:"Next",drop_field:"Drop Field Here",confirm:"Confirm",cancel:"Cancel"},Ngt={to_dim:"Move to dimensions",to_mea:"Move to measures",semantic_type:{name:"Change Semantic Type",types:{nominal:"Nominal",ordinal:"Ordinal",quantitative:"Quantitative",temporal:"Temporal"}},new_calc:"New calculation",bin:"Bin",binCount:"Bin Count",log:"Log{{ base }}",binCustom:"Bin(customize)",logCustom:"Log(customize)",drill:{name:"Time Unit",feature_name:"Time feature",levels:{year:"Year",quarter:"Quarter",month:"Month",week:"Week",weekday:"Weekday",day:"Day",hour:"Hour",minute:"Minute",second:"Second"}}},Fgt={bin_panel_title:"Bins",bin_panel_desc:"Set bin config for field",bin_panel_option_widths:"Bin with equal widths",bin_panel_option_counts:"Bin with equal counts",bin_panel_number:"Bin number",log_panel_title:"Logarithm Transformation",log_panel_desc:"Set log config for field",log_panel_number:"Logarithmic base"},fq={config:Egt,constant:Xgt,App:Lgt,DataSource:Rgt,main:Cgt,filters:Vgt,explain:Ygt,actions:Tgt,field_menu:Ngt,calc:Fgt},Mgt={scheme:"",primary_color:"",color_palette:"",opacity:"",default_color_palette:"",size:"",min_domain:"",max_domain:"",range:"",format:"",numberFormat:"",timeFormat:"",normalizedNumberFormat:"",background:"",color:"",independence:"",x:"x",y:"y",zeroScale:"",misc:"",formatGuidesDocs:"",readHere:"",svg:"SVG"},Ogt={row_count:"",dim_key:"",dim_val:"",analytic_type:{dimension:"",measure:""},semantic_type:{nominal:"",ordinal:"",temporal:"",quantitative:""},mark_type:{__enum__:"",auto:"",bar:"",line:"",area:"",trail:"",point:"",circle:"",tick:"",rect:"",arc:"",boxplot:"",table:"",text:"",poi:"POI",choropleth:""},stack_mode:{__enum__:"",none:"",stack:"",normalize:"",center:""},layout_type:{__enum__:"",auto:"",fixed:""},exploration_mode:{__enum__:"",none:"",brush:"",point:""},brush_mode:{__enum__:"",default:"",x:"X",y:"Y"},draggable_key:{fields:"",columns:"X",rows:"Y",color:"",opacity:"",size:"",shape:"",theta:"",radius:"",filters:"",text:"",longitude:"",latitude:"",geoId:"ID"},aggregator:{sum:"",mean:"",count:"",median:"",min:"",max:"",q1:"",q3:"",stdev:"",variance:""},filter_type:{one_of:"",one_of_desc:"",range:"",range_desc:" [, ] ",temporal_range:"",temporal_range_desc:" [, ] "}},zgt={labels:{data_interpretation:"",data_view:""},segments:{vis:"",data:""}},Pgt={labels:{cur_dataset:""},buttons:{create_dataset:"",export_as_file:"",import_file:"Graphic Walker"},dialog:{create_data_source:"",data_types:"",text_file_data:"",public_data:"",data_source_type:"{{sourceType}}",file:{open:"...",submit:"",dataset_name:"",choose_file:"",get_start_desc:""},public:{submit:""}}},jgt={tablist:{new:"+ ",auto_title:" {{idx}}",chart_name:"",remove_confirm:""},askviz:{placeholder:""},tabpanel:{menubar:{undo:"",redo:""},settings:{toggle:{aggregation:"",stack:"",axes_resize:"",debug:""},sort:"",button:{ascending:"",descending:"",transpose:"",config:"",export_chart:"",export_chart_as:"{{type}}",export_code:"",geojson:""},limit:"",size:"",size_setting:{width:"",height:""},table:{summary:""},geography:"",geography_settings:{geoKey:"ID",format:"",geojson:"GeoJSON",topojson:"TopoJSON",objectKey:"Feature ",jsonInputPlaceholder:"{{format}}",href:"{{format}} URL",hrefPlaceholder:"{{format}} URL",load:"",loading:"..."}},DatasetFields:{field_list:""}}},Hgt={to_edit:"",empty_rule:"! ()",editing:"",form:{name:"",aggregation:"",rule:""},header:{visibility:"",value:"",count:""},selected_keys:"{{ count }}",btn:{select_all:"",unselect_all:"",reverse:"",confirm:"",cancel:""},range:{start_value:"",end_value:""}},Jgt={lg_than:"",sm_than:"",expection:"",unrecognized:"",score:"",contains:"",reason:{selection_dim_distribution:"",selection_mea_distribution:"",children_major_factor:"",children_outlier:""}},Bgt={prev:"",next:"",drop_field:"",confirm:"",cancel:""},Kgt={to_dim:"",to_mea:"",new_calc:"",bin:"",binCount:"",log:"({{ base }})",binCustom:"",logCustom:"",semantic_type:{name:"",types:{nominal:"",ordinal:"",quantitative:"",temporal:""}},drill:{name:"",feature_name:"",levels:{year:"",quarter:"",month:"",week:"",weekday:"",day:"",hour:"",minute:"",second:""}}},Dgt={bin_panel_title:"",bin_panel_desc:"",bin_panel_option_widths:"",bin_panel_option_counts:"",bin_panel_number:"",log_panel_title:"",log_panel_desc:"",log_panel_number:""},pq={config:Mgt,constant:Ogt,App:zgt,DataSource:Pgt,main:jgt,filters:Hgt,explain:Jgt,actions:Bgt,field_menu:Kgt,calc:Dgt},Agt={scheme:"",primary_color:"",color_palette:"",opacity:"",default_color_palette:"",size:"",min_domain:"",max_domain:"",range:"",format:"",numberFormat:"",timeFormat:"",normalizedNumberFormat:"",background:"",color:"",independence:"",x:"x",y:"y",zeroScale:"",misc:"",formatGuidesDocs:"",readHere:"",svg:"SVG"},Ugt={row_count:"",mea_key:"",mea_val:"",analytic_type:{dimension:"",measure:""},semantic_type:{nominal:"",ordinal:"",temporal:"",quantitative:""},mark_type:{__enum__:"",auto:"",bar:"",line:"",area:"",trail:"",point:"",circle:"",tick:"",rect:"",arc:"",boxplot:"",table:"",text:"",poi:"",choropleth:""},coord_system:{__enum__:"",generic:"",geographic:""},layout_type:{__enum__:"",auto:"",fixed:""},exploration_mode:{__enum__:"",none:"",brush:"",point:""},brush_mode:{__enum__:"",default:"",x:" X ",y:" Y "},stack_mode:{__enum__:"",none:"",stack:"",normalize:"",center:""},draggable_key:{fields:"",columns:"",rows:"",color:"",opacity:"",size:"",shape:"",theta:"",radius:"",filters:"",details:"",text:"",longitude:"",latitude:"",geoId:" ID"},aggregator:{sum:"",mean:"",count:"",median:"",min:"",max:"",q1:"Q1",q3:"Q3",stdev:"",variance:""},filter_type:{one_of:"",one_of_desc:"",range:"",range_desc:" [, ]",temporal_range:"",temporal_range_desc:" [, ]"}},$gt={labels:{data_interpretation:"",data_view:""},segments:{vis:"",data:""}},Qgt={labels:{cur_dataset:""},buttons:{create_dataset:"",export_as_file:"",import_file:""},dialog:{create_data_source:"",data_types:"",text_file_data:"",public_data:"",data_source_type:"{{sourceType}}",file:{open:"...",submit:"",dataset_name:"",choose_file:"",get_start_desc:""},public:{submit:""}}},qgt={tablist:{new:"+ ",auto_title:" {{idx}}",chart_name:"",remove_confirm:""},askviz:{placeholder:"?"},tabpanel:{menubar:{undo:"",redo:""},settings:{toggle:{aggregation:"",stack:"",axes_resize:"",debug:""},sort:"",button:{ascending:"",descending:"",transpose:"",config:"",export_chart:"",export_chart_as:" {{type}}",export_code:"",geojson:""},limit:"",size:"",size_setting:{width:"",height:""},table:{summary:""},geography:"",geography_settings:{geoKey:" ID",format:"",geojson:"GeoJSON",topojson:"TopoJSON",objectKey:"",jsonInputPlaceholder:"{{format}}",href:"{{format}} URL",hrefPlaceholder:"",load:"",loading:"..."}},DatasetFields:{field_list:""}}},ebt={to_edit:"",empty_rule:"! ()",editing:"",form:{name:"",aggregation:"",rule:""},header:{visibility:"",value:"",count:""},selected_keys:"{{ count }} ",btn:{select_all:"",unselect_all:"",reverse:"",confirm:"",cancel:""},range:{start_value:"",end_value:""}},tbt={lg_than:"",sm_than:"",expection:"",unrecognized:"",score:"",contains:"",reason:{selection_dim_distribution:"",selection_mea_distribution:"",children_major_factor:"",children_outlier:""}},nbt={prev:"",next:"",drop_field:"",confirm:"",cancel:""},rbt={to_dim:"",to_mea:"",new_calc:"",bin:"",binCount:"",log:"{{ base }}",binCustom:"",logCustom:"",semantic_type:{name:"",types:{nominal:"",ordinal:"",quantitative:"",temporal:""}},drill:{name:"",feature_name:"",levels:{year:"",quarter:"",month:"",week:"",weekdat:"",day:"",hour:"",minute:"",second:""}}},ibt={bin_panel_title:"",bin_panel_desc:"",bin_panel_option_widths:"",bin_panel_option_counts:"",bin_panel_number:"",log_panel_title:"",log_panel_desc:"",log_panel_number:""},hq={config:Agt,constant:Ugt,App:$gt,DataSource:Qgt,main:qgt,filters:ebt,explain:tbt,actions:nbt,field_menu:rbt,calc:ibt},obt={en:{translation:fq},"en-US":{translation:fq},zh:{translation:hq},"zh-CN":{translation:hq},ja:{translation:pq},"ja-JP":{translation:pq}};er.use(kEe).use(Eve).init({fallbackLng:"en-US",interpolation:{escapeValue:!1},resources:obt});const mq=[],Xve=e=>{for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){if(mq.includes(t))continue;mq.push(t);const n=e[t];er.addResourceBundle(t,"translation",n,!1,!0)}},Lve=e=>er.changeLanguage(e),abt=Ae.div`
    user-select: none;
    align-items: stretch;
    border-style: solid;
    border-width: 1px;
    box-sizing: border-box;
    cursor: default;
    display: flex;
    flex-direction: column;
    font-size: 12px;
    min-width: 150px;
    overflow-y: hidden;
    padding: 0;

    > * {
        flex-grow: 1;
        padding-block: 0.2em;
        padding-inline: 0.5em;
    }

    > header {
        height: 20px;
        border-bottom-width: 1px;
    }

    > div.output {
        min-height: 20px;

        > span {
            overflow-y: hidden;
            max-height: 4em;
        }

        .icon {
            display: none;

            &:hover {
                display: unset;
            }
        }
    }
`,sbt=ft(e=>{const{provided:t,fIndex:n}=e,r=Tt(),{viewFilters:i}=r,o=i[n],{t:a}=ot("translation",{keyPrefix:"filters"}),s=o.enableAgg?`${o.aggName}(${o.name})`:o.name;return x.createElement(abt,{className:"text-gray-900",ref:Yl(t.innerRef),...t.draggableProps,...t.dragHandleProps},x.createElement("header",{className:"bg-indigo-50"},s),x.createElement("div",{className:"bg-white dark:bg-zinc-900  text-gray-500 hover:bg-gray-100 flex flex-row output",onClick:()=>r.setFilterEditing(n),style:{cursor:"pointer"},title:a("to_edit")},o.rule?x.createElement("span",{className:"flex-1"},o.rule.type==="one of"?`oneOf: [${[...o.rule.value].map(l=>JSON.stringify(l)).join(", ")}]`:o.rule.type==="range"?`range: [${o.rule.value[0]}, ${o.rule.value[1]}]`:o.rule.type==="temporal range"?`range: [${new Date(o.rule.value[0])}, ${new Date(o.rule.value[1])}]`:o.rule.type==="not in"?`notIn: [${[...o.rule.value].map(l=>JSON.stringify(l)).join(", ")}]`:null):x.createElement("span",{className:"text-gray-600 flex-1"},a("empty_rule")),x.createElement(MVe,{className:"icon flex-grow-0 flex-shrink-0 pointer-events-none text-gray-500",role:"presentation","aria-hidden":!0,width:"1.4em",height:"1.4em"})))}),lbt=Ae.div`
    display: flex;
    flex-direction: column;
    align-items: stretch;
    justify-content: stretch;
    overflow: hidden;
    padding-block: 1em;

    > .output {
        display: flex;
        justify-content: space-between;
        margin-top: 1em;

        > output {
            width: 100%;
        }

        > output:first-child {
            margin-right: 0.5em;
        }

        > output:last-child {
            margin-left: 0.5em;
        }
    }
`,ubt=Ae.div`
    margin-inline: 0.5em;
    padding: 1em;
    flex-grow: 1;
    flex-shrink: 1;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: stretch;
`,cbt=Ae.div`
    flex-grow: 1;
    flex-shrink: 1;
    background-color: #ccc;
    height: 5px;
    border-radius: 3px;
    position: relative;
`,gq=Ae.div`
    position: absolute;
    top: 50%;
    cursor: ew-resize;
    background-color: #fff;
    width: 2em;
    height: 2em;
    border-radius: 1em;
    outline: none;
    box-shadow: 0 4px 6px 2px rgba(0, 0, 0, 0.1);

    &:hover {
        background-color: #fff;
    }
`,dbt=Ae.div`
    position: absolute;
    height: 100%;
`,bq=(e,t)=>{var n;const r=(n=/(\.\d*)$/.exec(((e[1]-e[0])/1e3).toString()))==null?void 0:n[0].length;return r===void 0?`${t}`:t.toFixed(r).replace(/\.?0+$/,"")},yq=e=>{const{min:t,max:n,value:r,resetValue:i,onChange:o}=e,a=s=>{!isNaN(s)&&s<=n&&s>=t?o(s):o(i)};return x.createElement("input",{type:"number",min:t,max:n,className:"block w-full rounded-md border-0 py-1 px-2 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 dark:bg-zinc-900 dark:border-gray-700 focus:ring-1 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",value:r,onChange:s=>a(Number(s.target.value))})},fbt=x.memo(function({min:e,max:t,value:n,onChange:r}){const[i,o]=x.useState(null),a=x.useRef(null),s=x.useRef(null),l=[(n[0]-e)/(t-e||1),(n[1]-e)/(t-e||1)],u=x.useRef(0),{t:c}=ot();return G.useEffect(()=>{if(i){const d=h=>{o(null),h==null||h.stopPropagation()},f=jN(document.body,"mousemove").pipe(EJ(h=>{if(!a.current||!i)return null;if(h.buttons!==1)return d(),null;const{x:m,width:g}=a.current.getBoundingClientRect();return Math.min(i==="left"?l[1]:1,Math.max(i==="right"?l[0]:0,(h.clientX-u.current-m)/g))}),Zve(100),xve(h=>h!==null&&h!==l[i==="left"?0:1])).subscribe(h=>{const m=[...l];m[i==="left"?0:1]=h,m[0]=m[0]*(t-e||1)+e,m[1]=m[1]*(t-e||1)+e,r(m)});return document.body.addEventListener("mouseup",d),()=>{document.body.removeEventListener("mouseup",d),f.unsubscribe()}}},[i,l,r,e,t]),x.createElement(lbt,null,x.createElement(ubt,null,x.createElement(cbt,{ref:d=>a.current=d},x.createElement(dbt,{role:"presentation",ref:d=>s.current=d,className:"bg-indigo-600",style:{left:`${l[0]*100}%`,width:`${(l[1]-l[0])*100}%`}}),x.createElement(gq,{role:"slider","aria-label":"minimum",id:"slider:min","aria-valuemin":e,"aria-valuemax":t,"aria-valuenow":n[0],"aria-valuetext":bq([e,t],n[0]),tabIndex:-1,onMouseDown:d=>{d.buttons===1&&(u.current=d.nativeEvent.offsetX-d.target.getBoundingClientRect().width,o("left"))},style:{left:`calc(1em + ${l[0]*100}%)`,transform:"translate(-100%, -50%)"}}),x.createElement(gq,{role:"slider","aria-label":"maximum",id:"slider:max","aria-valuemin":e,"aria-valuemax":t,"aria-valuenow":n[1],"aria-valuetext":bq([e,t],n[1]),tabIndex:-1,onMouseDown:d=>{d.buttons===1&&(u.current=d.nativeEvent.offsetX,o("right"))},style:{left:`calc(${l[1]*100}% - 1em)`,transform:"translate(0, -50%)"}}))),x.createElement("div",{className:"output"},x.createElement("output",{htmlFor:"slider:min"},x.createElement("div",{className:"my-1"},c("filters.range.start_value")),x.createElement(yq,{min:e,max:n[1],value:n[0],resetValue:e,onChange:d=>r([d,n[1]])})),x.createElement("output",{htmlFor:"slider:max"},x.createElement("div",{className:"my-1"},c("filters.range.end_value")),x.createElement(yq,{min:n[0],max:t,value:n[1],resetValue:t,onChange:d=>r([n[0],d])}))))});/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function aW(){return aW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aW.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sW(){return sW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sW.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zm(e,t,n){var r,i=(r=n.initialDeps)!=null?r:[],o;return function(){var a;n.key&&n.debug!=null&&n.debug()&&(a=Date.now());var s=e(),l=s.length!==i.length||s.some(function(m,g){return i[g]!==m});if(!l)return o;i=s;var u;if(n.key&&n.debug!=null&&n.debug()&&(u=Date.now()),o=t.apply(void 0,s),n.key&&n.debug!=null&&n.debug()){var c=Math.round((Date.now()-a)*100)/100,d=Math.round((Date.now()-u)*100)/100,f=d/16,h=function(m,g){for(m=String(m);m.length<g;)m=" "+m;return m};console.info("%c "+h(d,5)+" /"+h(c,5)+" ms",`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(`+Math.max(0,Math.min(120-120*f,120))+"deg 100% 31%);",n==null?void 0:n.key)}return n==null||n.onChange==null||n.onChange(o),o}}function ZC(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}var pbt=function(e,t){return Math.abs(e-t)<1};/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var hbt=function(e){return e},mbt=function(e){for(var t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[],i=t;i<=n;i++)r.push(i);return r},gbt=function(e,t){var n=e.scrollElement;if(n){var r=function(o){var a=o.width,s=o.height;t({width:Math.round(a),height:Math.round(s)})};r(n.getBoundingClientRect());var i=new ResizeObserver(function(o){var a=o[0];if(a!=null&&a.borderBoxSize){var s=a.borderBoxSize[0];if(s){r({width:s.inlineSize,height:s.blockSize});return}}r(n.getBoundingClientRect())});return i.observe(n,{box:"border-box"}),function(){i.unobserve(n)}}},bbt=function(e,t){var n=e.scrollElement;if(n){var r=function(){t(n[e.options.horizontal?"scrollLeft":"scrollTop"])};return r(),n.addEventListener("scroll",r,{passive:!0}),function(){n.removeEventListener("scroll",r)}}},ybt=function(e,t,n){if(t!=null&&t.borderBoxSize){var r=t.borderBoxSize[0];if(r){var i=Math.round(r[n.options.horizontal?"inlineSize":"blockSize"]);return i}}return Math.round(e.getBoundingClientRect()[n.options.horizontal?"width":"height"])},vbt=function(e,t,n){var r,i,o=t.adjustments,a=o===void 0?0:o,s=t.behavior,l=e+a;(r=n.scrollElement)==null||r.scrollTo==null||r.scrollTo((i={},i[n.options.horizontal?"left":"top"]=l,i.behavior=s,i))},xbt=function(e){var t=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=function(){var n=null,r=function(){return n||(typeof ResizeObserver<"u"?n=new ResizeObserver(function(i){i.forEach(function(o){t._measureElement(o.target,o)})}):null)};return{disconnect:function(){var i;return(i=r())==null?void 0:i.disconnect()},observe:function(i){var o;return(o=r())==null?void 0:o.observe(i,{box:"border-box"})},unobserve:function(i){var o;return(o=r())==null?void 0:o.unobserve(i)}}}(),this.range=null,this.setOptions=function(n){Object.entries(n).forEach(function(r){var i=r[0],o=r[1];typeof o>"u"&&delete n[i]}),t.options=sW({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:hbt,rangeExtractor:mbt,onChange:function(){},measureElement:ybt,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},n)},this.notify=function(n){t.options.onChange==null||t.options.onChange(t,n)},this.maybeNotify=Zm(function(){return t.calculateRange(),[t.isScrolling,t.range?t.range.startIndex:null,t.range?t.range.endIndex:null]},function(n){t.notify(n)},{key:!1,debug:function(){return t.options.debug},initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=function(){t.unsubs.filter(Boolean).forEach(function(n){return n()}),t.unsubs=[],t.scrollElement=null},this._didMount=function(){return t.measureElementCache.forEach(t.observer.observe),function(){t.observer.disconnect(),t.cleanup()}},this._willUpdate=function(){var n=t.options.getScrollElement();t.scrollElement!==n&&(t.cleanup(),t.scrollElement=n,t._scrollToOffset(t.scrollOffset,{adjustments:void 0,behavior:void 0}),t.unsubs.push(t.options.observeElementRect(t,function(r){t.scrollRect=r,t.maybeNotify()})),t.unsubs.push(t.options.observeElementOffset(t,function(r){t.scrollAdjustments=0,t.scrollOffset!==r&&(t.isScrollingTimeoutId!==null&&(clearTimeout(t.isScrollingTimeoutId),t.isScrollingTimeoutId=null),t.isScrolling=!0,t.scrollDirection=t.scrollOffset<r?"forward":"backward",t.scrollOffset=r,t.maybeNotify(),t.isScrollingTimeoutId=setTimeout(function(){t.isScrollingTimeoutId=null,t.isScrolling=!1,t.scrollDirection=null,t.maybeNotify()},t.options.scrollingDelay))})))},this.getSize=function(){return t.scrollRect[t.options.horizontal?"width":"height"]},this.memoOptions=Zm(function(){return[t.options.count,t.options.paddingStart,t.options.scrollMargin,t.options.getItemKey]},function(n,r,i,o){return t.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:o}},{key:!1}),this.getFurthestMeasurement=function(n,r){for(var i=new Map,o=new Map,a=r-1;a>=0;a--){var s=n[a];if(!i.has(s.lane)){var l=o.get(s.lane);if(l==null||s.end>l.end?o.set(s.lane,s):s.end<l.end&&i.set(s.lane,!0),i.size===t.options.lanes)break}}return o.size===t.options.lanes?Array.from(o.values()).sort(function(u,c){return u.end-c.end})[0]:void 0},this.getMeasurements=Zm(function(){return[t.memoOptions(),t.itemSizeCache]},function(n,r){var i=n.count,o=n.paddingStart,a=n.scrollMargin,s=n.getItemKey,l=t.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,t.pendingMeasuredCacheIndexes):0;t.pendingMeasuredCacheIndexes=[];for(var u=t.measurementsCache.slice(0,l),c=l;c<i;c++){var d=s(c),f=t.options.lanes===1?u[c-1]:t.getFurthestMeasurement(u,c),h=f?f.end:o+a,m=r.get(d),g=typeof m=="number"?m:t.options.estimateSize(c),y=h+g,v=f?f.lane:c%t.options.lanes;u[c]={index:c,start:h,size:g,end:y,key:d,lane:v}}return t.measurementsCache=u,u},{key:!1,debug:function(){return t.options.debug}}),this.calculateRange=Zm(function(){return[t.getMeasurements(),t.getSize(),t.scrollOffset]},function(n,r,i){return t.range=n.length>0&&r>0?wbt({measurements:n,outerSize:r,scrollOffset:i}):null},{key:!1,debug:function(){return t.options.debug}}),this.getIndexes=Zm(function(){return[t.options.rangeExtractor,t.calculateRange(),t.options.overscan,t.options.count]},function(n,r,i,o){return r===null?[]:n(sW({},r,{overscan:i,count:o}))},{key:!1,debug:function(){return t.options.debug}}),this.indexFromElement=function(n){var r=t.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn("Missing attribute name '"+r+"={index}' on measured element."),-1)},this._measureElement=function(n,r){var i=t.measurementsCache[t.indexFromElement(n)];if(!i||!n.isConnected){t.measureElementCache.forEach(function(s,l){s===n&&(t.observer.unobserve(n),t.measureElementCache.delete(l))});return}var o=t.measureElementCache.get(i.key);o!==n&&(o&&t.observer.unobserve(o),t.observer.observe(n),t.measureElementCache.set(i.key,n));var a=t.options.measureElement(n,r,t);t.resizeItem(i,a)},this.resizeItem=function(n,r){var i,o=(i=t.itemSizeCache.get(n.key))!=null?i:n.size,a=r-o;a!==0&&(n.start<t.scrollOffset&&t._scrollToOffset(t.scrollOffset,{adjustments:t.scrollAdjustments+=a,behavior:void 0}),t.pendingMeasuredCacheIndexes.push(n.index),t.itemSizeCache=new Map(t.itemSizeCache.set(n.key,r)),t.notify(!1))},this.measureElement=function(n){n&&t._measureElement(n,void 0)},this.getVirtualItems=Zm(function(){return[t.getIndexes(),t.getMeasurements()]},function(n,r){for(var i=[],o=0,a=n.length;o<a;o++){var s=n[o],l=r[s];i.push(l)}return i},{key:!1,debug:function(){return t.options.debug}}),this.getVirtualItemForOffset=function(n){var r=t.getMeasurements();return ZC(r[Rve(0,r.length-1,function(i){return ZC(r[i]).start},n)])},this.getOffsetForAlignment=function(n,r){var i=t.getSize();r==="auto"&&(n<=t.scrollOffset?r="start":n>=t.scrollOffset+i?r="end":r="start"),r==="start"?n=n:r==="end"?n=n-i:r==="center"&&(n=n-i/2);var o=t.options.horizontal?"scrollWidth":"scrollHeight",a=t.scrollElement?"document"in t.scrollElement?t.scrollElement.document.documentElement[o]:t.scrollElement[o]:0,s=a-t.getSize();return Math.max(Math.min(s,n),0)},this.getOffsetForIndex=function(n,r){r===void 0&&(r="auto"),n=Math.max(0,Math.min(n,t.options.count-1));var i=ZC(t.getMeasurements()[n]);if(r==="auto")if(i.end>=t.scrollOffset+t.getSize()-t.options.scrollPaddingEnd)r="end";else if(i.start<=t.scrollOffset+t.options.scrollPaddingStart)r="start";else return[t.scrollOffset,r];var o=r==="end"?i.end+t.options.scrollPaddingEnd:i.start-t.options.scrollPaddingStart;return[t.getOffsetForAlignment(o,r),r]},this.isDynamicMode=function(){return t.measureElementCache.size>0},this.cancelScrollToIndex=function(){t.scrollToIndexTimeoutId!==null&&(clearTimeout(t.scrollToIndexTimeoutId),t.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(n,r){var i=r===void 0?{}:r,o=i.align,a=o===void 0?"start":o,s=i.behavior;t.cancelScrollToIndex(),s==="smooth"&&t.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t._scrollToOffset(t.getOffsetForAlignment(n,a),{adjustments:void 0,behavior:s})},this.scrollToIndex=function(n,r){var i=r===void 0?{}:r,o=i.align,a=o===void 0?"auto":o,s=i.behavior;n=Math.max(0,Math.min(n,t.options.count-1)),t.cancelScrollToIndex(),s==="smooth"&&t.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var l=t.getOffsetForIndex(n,a),u=l[0],c=l[1];t._scrollToOffset(u,{adjustments:void 0,behavior:s}),s!=="smooth"&&t.isDynamicMode()&&(t.scrollToIndexTimeoutId=setTimeout(function(){t.scrollToIndexTimeoutId=null;var d=t.measureElementCache.has(t.options.getItemKey(n));if(d){var f=t.getOffsetForIndex(n,c),h=f[0];pbt(h,t.scrollOffset)||t.scrollToIndex(n,{align:c,behavior:s})}else t.scrollToIndex(n,{align:c,behavior:s})}))},this.scrollBy=function(n,r){var i=r===void 0?{}:r,o=i.behavior;t.cancelScrollToIndex(),o==="smooth"&&t.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t._scrollToOffset(t.scrollOffset+n,{adjustments:void 0,behavior:o})},this.getTotalSize=function(){var n;return(((n=t.getMeasurements()[t.options.count-1])==null?void 0:n.end)||t.options.paddingStart)-t.options.scrollMargin+t.options.paddingEnd},this._scrollToOffset=function(n,r){var i=r.adjustments,o=r.behavior;t.options.scrollToFn(n,{behavior:o,adjustments:i},t)},this.measure=function(){t.itemSizeCache=new Map,t.notify(!1)},this.setOptions(e),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(function(n){t.itemSizeCache.set(n.key,n.size)}),this.maybeNotify()},Rve=function(e,t,n,r){for(;e<=t;){var i=(e+t)/2|0,o=n(i);if(o<r)e=i+1;else if(o>r)t=i-1;else return i}return e>0?e-1:0};function wbt(e){for(var t=e.measurements,n=e.outerSize,r=e.scrollOffset,i=t.length-1,o=function(l){return t[l].start},a=Rve(0,i,o,r),s=a;s<i&&t[s].end<r+n;)s++;return{startIndex:a,endIndex:s}}/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Zbt=typeof document<"u"?G.useLayoutEffect:G.useEffect;function Sbt(e){var t=G.useReducer(function(){return{}},{})[1],n=aW({},e,{onChange:function(o,a){a?qn.flushSync(t):t(),e.onChange==null||e.onChange(o,a)}}),r=G.useState(function(){return new xbt(n)}),i=r[0];return i.setOptions(n),G.useEffect(function(){return i._didMount()},[]),Zbt(function(){return i._willUpdate()}),i}function kbt(e){return Sbt(aW({observeElementRect:gbt,observeElementOffset:bbt,scrollToFn:vbt},e))}const XJ=Ae.div`
    margin-block: 1em;

    > .btn-grp {
        display: flex;
        flex-direction: row;
        margin-block: 1em;

        > * {
            margin-inline-start: 0.6em;

            &:first-child {
                margin-inline-start: 0;
            }
        }
    }
`,vq=Ae.button`
    :hover {
        background-color: rgba(243, 244, 246, 0.5);
    }
    color: rgb(55, 65, 81);
    border: 1px solid rgb(226 232 240);
    border-radius: 0.5em;
    padding-block: 0.4em;
    padding-inline: 1em;
    user-select: none;
    font-weight: bold;
    cursor: pointer;
`,SC=Ae.div`
    display: flex;
    flex-direction: column;
    max-height: 30vh;
    overflow-y: scroll;
`,Lk=Ae.div`
    display: flex;
    & > input,
    & > *[for] {
        cursor: pointer;
    }
    & > * {
        padding-block: 0.6em;
        padding-inline: 0.2em;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        user-select: none;
        border-bottom: 0.8px solid rgb(226 232 240);
        flex-shink: 0;
    }
    & > *:first-child {
        width: 4em;
    }
    & > *:last-child {
        width: max-content;
    }
    & > *:first-child + * {
        flex: 1;
    }
`,_bt=Ae.div`
    display: flex;
    flex-direction: column;
    align-items: stretch;
    justify-content: stretch;
`,Gbt=Ae.div`
    display: flex;
    padding-block: 1em;
    width: 100%;

    > .calendar-input {
        width: 100%;
    }

    > .calendar-input:first-child {
        margin-right: 0.5em;
    }

    > .calendar-input:last-child {
        margin-left: 0.5em;
    }
`,Ibt=Ae.div``,Wbt=Ae.div``,Ebt=e=>{const{currentNum:t,totalNum:n,onChange:r}=e,i=G.useRef(null);return x.useEffect(()=>{if(!i.current)return;const o=i.current;t===n?(o.checked=!0,o.indeterminate=!1):t<n&&t>0?o.indeterminate=!0:t===0&&(o.checked=!1,o.indeterminate=!1)},[t,n]),x.createElement("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600",ref:i,onChange:()=>r()})},Cve=(e,t,n,r)=>{const{values:i,range:o,valuesMeta:a,selectedCount:s}=t,[l,u]=x.useState(!0),[c,d]=x.useState(null),f=nO(e);return x.useEffect(()=>{u(!0);let h=!1;return cle(r,e,{values:i,range:o,valuesMeta:a,sortBy:n,selectedCount:s}).then(m=>{h||(d(m),u(!1))}).catch(m=>{console.warn(m),!h&&(d(null),u(!1))}),()=>{h=!0}},[f,r,i,o,a,n,s]),l?null:c},Rk=20,xq=[];function Xbt(e,t,n,r){const i=s=>s.map((l,u)=>{const c=u-n;return c>=0&&c<t.length?t[c]:l}),o=t.length+n;if(e.length>=o)return i(e);const a=e.concat(new Array(o-e.length).fill(r));return i(a)}const Lbt=(e,t,n,r)=>{var i,o,a,s;const l=G.useMemo(()=>{var E,X;return((E=e.rule)==null?void 0:E.type)==="not in"||((X=e.rule)==null?void 0:X.type)==="one of"?e.rule.value:new Set},[e.fid,n]),u=Cve(e,{values:!1,range:!1,selectedCount:l,valuesMeta:!0},"none",n),[c,d]=G.useState(0);G.useEffect(()=>{u&&d(u.selectedCount)},[u]);const[f,h]=G.useState(xq),m=G.useRef(f),g=G.useCallback(E=>{typeof E=="function"?m.current=E(m.current):m.current=E,h(m.current)},[]),y=G.useRef({}),v=G.useCallback(E=>{const X=Math.floor(E/Rk);if((m.current.length<=E||m.current[E]===null)&&y.current[X]===void 0){const Y=cle(n,e,{range:!1,values:!0,valuesMeta:!1,sortBy:t,valuesLimit:Rk,valuesOffset:Rk*X});y.current[X]=Y,Y.then(C=>{if(y.current[X]===Y){const{values:N}=C;g(V=>Xbt(V,N,X*Rk,null))}})}},[n,t]);G.useEffect(()=>{y.current={},g(xq)},[e.fid,n,t]),G.useEffect(()=>{v(0)},[]);const w=G.useMemo(()=>u!=null&&u.valuesMeta.distinctTotal?f.concat(new Array(Math.max(u.valuesMeta.distinctTotal-f.length,0)).fill(null)):[],[f,u==null?void 0:u.valuesMeta.distinctTotal]),Z=((i=e.rule)==null?void 0:i.type)==="one of"?e.rule.value.size:u&&((o=e.rule)==null?void 0:o.type)==="not in"?u.valuesMeta.distinctTotal-e.rule.value.size:0,k=((a=e.rule)==null?void 0:a.type)==="one of"?c:u&&((s=e.rule)==null?void 0:s.type)==="not in"?u.valuesMeta.total-c:0,_=G.useCallback(()=>{!e.rule||e.rule.type!=="one of"&&e.rule.type!=="not in"||!u||(d(0),r({type:k===u.valuesMeta.total?"one of":"not in",value:new Set}))},[e.rule,r,u]),R=G.useCallback(()=>{!e.rule||e.rule.type!=="one of"&&e.rule.type!=="not in"||!u||r({type:e.rule.type==="one of"?"not in":"one of",value:e.rule.value})},[e.rule,r,u]),I=G.useCallback((E,X,Y)=>{if(!e.rule||e.rule.type!=="one of"&&e.rule.type!=="not in")return;const C=new Set(e.rule.value);X===(e.rule.type==="one of")?(d(N=>N+Y),C.add(E)):(d(N=>N-Y),C.delete(E)),r({type:e.rule.type,value:C})},[e.rule,r]);return{total:u==null?void 0:u.valuesMeta.total,distinctTotal:u==null?void 0:u.valuesMeta.distinctTotal,currentCount:Z,currentSum:k,handleToggleFullOrEmptySet:_,handleToggleReverseSet:R,handleSelect:I,data:w,loadData:v,loading:!u}},Rbt=e=>(G.useEffect(()=>{e.effect()},[e.effectId]),null),wq=({active:e,field:t,onChange:n})=>{var r,i;const[o,a]=G.useState({key:"count",ascending:!0}),{t:s}=ot("translation"),l=cc();x.useEffect(()=>{var _,R;e&&((_=t.rule)==null?void 0:_.type)!=="one of"&&((R=t.rule)==null?void 0:R.type)!=="not in"&&n({type:"not in",value:new Set})},[e,n,t]);const{currentCount:u,currentSum:c,data:d,distinctTotal:f,handleSelect:h,handleToggleFullOrEmptySet:m,handleToggleReverseSet:g,loadData:y,loading:v}=Lbt(t,`${o.key}${o.ascending?"":"_dsc"}`,l,n),w=x.useRef(null),Z=kbt({count:f!=null?f:0,getScrollElement:()=>w.current,estimateSize:()=>32,overscan:10});if(v)return x.createElement("div",{className:"h-24 w-full relative"},x.createElement(sb,null));const k=({currentKey:_})=>{const R=o.key===_;return x.createElement("span",{className:`ml-2 flex-none rounded bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer ${R?"text-indigo-600":"text-gray-500"}`,onClick:()=>a({key:_,ascending:R?!o.ascending:!0})},R&&!o.ascending?x.createElement($Le,{className:"h-4 w-4"}):x.createElement(qLe,{className:"h-4 w-4"}))};return((r=t.rule)==null?void 0:r.type)==="one of"||((i=t.rule)==null?void 0:i.type)==="not in"?x.createElement(XJ,null,x.createElement("div",null,s("constant.filter_type.one_of")),x.createElement("div",{className:"text-gray-500 dark:text-gray-300"},s("constant.filter_type.one_of_desc")),x.createElement("div",{className:"btn-grp"},x.createElement(vq,{className:"dark:bg-zinc-900 dark:text-gray-200 dark:hover:bg-gray-800",onClick:()=>m()},s(u===f?"filters.btn.unselect_all":"filters.btn.select_all")),x.createElement(vq,{className:"dark:bg-zinc-900 dark:text-gray-200 dark:hover:bg-gray-800",onClick:()=>g()},s("filters.btn.reverse"))),x.createElement(SC,{className:"bg-slate-50 dark:bg-gray-800"},x.createElement(Lk,null,x.createElement("div",{className:"flex justify-center items-center"},x.createElement(Ebt,{currentNum:u,totalNum:f!=null?f:0,onChange:m})),x.createElement("label",{className:"header text-gray-500 dark:text-gray-300 flex items-center"},s("filters.header.value"),x.createElement(k,{currentKey:"value"})),x.createElement("label",{className:"header text-gray-500 dark:text-gray-300 flex items-center"},s("filters.header.count"),x.createElement(k,{currentKey:"count"})))),x.createElement(SC,{ref:w},x.createElement("div",{style:{paddingBottom:`${Z.getTotalSize()}px`,width:"100%",position:"relative"}},Z.getVirtualItems().map(_=>{var R,I;const E=_.index,X=d==null?void 0:d[E];if(!X)return x.createElement(Lk,{key:E,className:"animate-pulse",style:{height:`${_.size}px`,transform:`translateY(${_.start}px)`,position:"absolute",top:0,left:0,width:"100%"}},x.createElement("div",{className:"flex justify-center items-center"},x.createElement("div",{className:"h-4 w-4 bg-slate-200 rounded"})),x.createElement("div",{className:"flex justify-left items-center"},x.createElement("div",{className:"h-3 w-20 bg-slate-200 rounded"})),x.createElement("div",{className:"flex justify-right items-center"},x.createElement("div",{className:"h-3 w-6 bg-slate-200 rounded"})),x.createElement(Rbt,{effect:()=>y(E),effectId:`${t.fid}_${o.key}${o.ascending?"":"_dsc"}_${E}`}));const{value:Y,count:C}=X,N=`rule_checkbox_${E}`,V=((R=t.rule)==null?void 0:R.type)==="one of"&&t.rule.value.has(Y)||((I=t.rule)==null?void 0:I.type)==="not in"&&!t.rule.value.has(Y);return x.createElement(Lk,{key:E,style:{height:`${_.size}px`,transform:`translateY(${_.start}px)`,position:"absolute",top:0,left:0,width:"100%"}},x.createElement("div",{className:"flex justify-center items-center"},x.createElement("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600",checked:V,id:N,"aria-describedby":`${N}_label`,title:String(Y),onChange:({target:{checked:F}})=>h(Y,F,C)})),x.createElement("label",{id:`${N}_label`,htmlFor:N,title:String(Y)},`${Y}`),x.createElement("label",{htmlFor:N},C))}))),x.createElement(SC,{className:"text-gray-600"},x.createElement(Lk,null,x.createElement("label",null),x.createElement("label",null,s("filters.selected_keys",{count:u})),x.createElement("label",null,c)))):null},Zq=e=>{const{min:t,max:n,value:r,onChange:i}=e,o=s=>{const l=new Date(s);return Number.isNaN(l.getTime())?"":kCe(l)},a=s=>{new Date(s).getTime()<=n&&new Date(s).getTime()>=t&&i(new Date(s).getTime())};return x.createElement("input",{className:"block w-full rounded-md border-0 py-1 px-2 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 dark:bg-zinc-900 dark:border-gray-700 focus:ring-1 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",type:"datetime-local",min:o(t),max:o(n),defaultValue:o(r),onChange:s=>a(s.target.value)})},Cbt=({active:e,field:t,onChange:n})=>{var r;const{t:i}=ot("translation"),o=cc(),[a,s]=G.useState(()=>[0,0,!1]);x.useEffect(()=>{PMe(o,t.fid).then(([f,h])=>s([f,h,!0]))},[t.fid]);const[l,u,c]=a;x.useEffect(()=>{var f;e&&((f=t.rule)==null?void 0:f.type)!=="temporal range"&&c&&n({type:"temporal range",value:[l,u]})},[n,t,l,u,e]);const d=x.useCallback(f=>{n({type:"temporal range",value:f})},[]);return c?((r=t.rule)==null?void 0:r.type)==="temporal range"?x.createElement(XJ,{className:"overflow-visible"},x.createElement("div",null,i("constant.filter_type.temporal_range")),x.createElement("div",{className:"text-gray-500"},i("constant.filter_type.temporal_range_desc")),x.createElement(Gbt,null,x.createElement("div",{className:"calendar-input"},x.createElement("div",{className:"my-1"},i("filters.range.start_value")),x.createElement(Zq,{min:l,max:t.rule.value[1],value:t.rule.value[0],onChange:f=>{var h;return d([f,(h=t.rule)==null?void 0:h.value[1]])}})),x.createElement("div",{className:"calendar-input"},x.createElement("div",{className:"my-1"},i("filters.range.end_value")),x.createElement(Zq,{min:t.rule.value[0],max:u,value:t.rule.value[1],onChange:f=>{var h;return d([(h=t.rule)==null?void 0:h.value[0],f])}})))):null:x.createElement("div",{className:"h-24 w-full relative"},x.createElement(sb,null))},Vbt=({active:e,field:t,onChange:n})=>{var r;const{t:i}=ot("translation",{keyPrefix:"constant.filter_type"}),o=cc(),a=Cve(t,{values:!1,range:!0,valuesMeta:!1},"none",o),s=a==null?void 0:a.range;x.useEffect(()=>{var u;s&&e&&((u=t.rule)==null?void 0:u.type)!=="range"&&n({type:"range",value:s})},[n,t,s,e]);const l=x.useCallback(u=>{n({type:"range",value:u})},[]);return s?((r=t.rule)==null?void 0:r.type)==="range"?x.createElement(XJ,null,x.createElement("div",null,i("range")),x.createElement("div",{className:"text-gray-500"},i("range_desc")),x.createElement(fbt,{min:s[0],max:s[1],value:t.rule.value,onChange:l})):null:x.createElement("div",{className:"h-24 w-full relative"},x.createElement(sb,null))},Ybt={"one of":wq,"not in":wq,range:Vbt,"temporal range":Cbt},Ck={"one of":{key:"one_of",descKey:"one_of_desc"},range:{key:"range",descKey:"range_desc"},"temporal range":{key:"temporal_range",descKey:"temporal_range_desc"}},Tbt=e=>e==="not in"?"one of":e,OE=({rawFields:e,field:t,onChange:n,tabs:r})=>{var l;var i;const{t:o}=ot("translation",{keyPrefix:"constant.filter_type"}),[a,s]=x.useState((l=Tbt((i=t.rule)==null?void 0:i.type))!=null?l:r[0]);return x.useEffect(()=>{r.includes(a)||s(r[0])},[r]),x.createElement(_bt,null,x.createElement("div",null,r.map(u=>x.createElement("div",{className:"flex my-2",key:u},x.createElement("div",{className:"align-top"},x.createElement("input",{type:"radio",className:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600",id:u,checked:u===a,onChange:c=>s(c.target.value),name:"filter_type",value:u})),x.createElement("div",{className:"ml-3"},x.createElement("label",{htmlFor:u},o(Ck[u].key)),x.createElement("div",{className:"text-gray-500"},o(Ck[u].descKey)))))),x.createElement("hr",{className:"my-0.5"}),x.createElement(Ibt,null,r.map((u,c)=>{const d=Ybt[u];return x.createElement(Wbt,{key:c,id:`filter-panel-${Ck[u]}`,"aria-labelledby":`filter-tab-${Ck[u]}`,role:"tabpanel",hidden:a!==u,tabIndex:0},x.createElement(d,{field:t,onChange:n,active:a===u,rawFields:e}))})))},Hg=e=>{const{options:t=[],disable:n,selectedKey:r,onSelect:i,placeholder:o="Select an option",className:a,buttonClassName:s}=e,l=t.find(d=>d.value===r);if(n)return x.createElement(G.Fragment,null,e.children);let u="relative",c="relative cursor-default text-xs rounded-lg bg-white dark:bg-zinc-900 px-2.5 py-1.5 pr-10 text-left border border-gray-200 dark:border-gray-700 focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-orange-300 truncate";return s&&(c=c+" "+s),a&&(u=u+" "+a),x.createElement($c,{value:r,onChange:d=>{i&&i(d)}},x.createElement("div",{className:u},x.createElement($c.Button,{className:c},x.createElement("span",{className:"block truncate dark:text-white"},(l==null?void 0:l.label)||""),l===void 0&&x.createElement("span",{className:"block truncate text-gray-400"},o),x.createElement("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},x.createElement(Ux,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"}))),x.createElement(Jp,{as:G.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0"},x.createElement($c.Options,{className:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white dark:bg-zinc-900  py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},t.map((d,f)=>x.createElement($c.Option,{key:d.value,className:({active:h})=>`relative cursor-default select-none py-2 pl-10 pr-4 ${h?"bg-amber-100 text-amber-900 dark:bg-amber-800 dark:text-amber-50":"text-gray-900 dark:text-gray-50"}`,value:d.value},({selected:h})=>x.createElement(x.Fragment,null,x.createElement("span",{className:`block truncate ${h?"font-medium":"font-normal"}`},d.label),h&&x.createElement("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-amber-600 dark:text-amber-400"},x.createElement(xae,{className:"h-5 w-5","aria-hidden":"true"})))))))))},Nbt=Kt.AGGREGATOR_LIST.map(e=>({label:e,value:e})).concat([{label:"-",value:""}]),Fbt=({rawFields:e,field:t,onChange:n})=>x.createElement(OE,{field:t,onChange:n,tabs:["range","one of"],rawFields:e}),Mbt=({rawFields:e,field:t,onChange:n})=>x.createElement(OE,{field:t,onChange:n,tabs:["one of"],rawFields:e}),Obt=({rawFields:e,field:t,onChange:n})=>x.createElement(OE,{field:t,onChange:n,tabs:["range","one of"],rawFields:e}),zbt=({rawFields:e,field:t,onChange:n})=>x.createElement(OE,{field:t,onChange:n,tabs:["temporal range","one of"],rawFields:e}),Pbt=()=>x.createElement(x.Fragment,null),Vve=e=>{var y;const{editingFilterIdx:t,viewFilters:n,meta:r,options:i,onSelectFilter:o,onWriteFilter:a,onClose:s,onSelectAgg:l}=e,{t:u}=ot("translation",{keyPrefix:"filters"}),c=x.useMemo(()=>t!==null?n[t]:null,[t,n]),[d,f]=bRe(c),h=x.useCallback(v=>{t!==null&&f(w=>({...w,rule:v}))},[t]),m=x.useCallback(()=>{var v;t!==null&&a(t,(v=d==null?void 0:d.rule)!=null?v:null),s()},[t,d==null?void 0:d.rule,a]),g=c?{quantitative:Fbt,nominal:Mbt,ordinal:Obt,temporal:zbt}[c.semanticType]:Pbt;return d?x.createElement(wc,{show:!!d,title:u("editing"),onClose:s},x.createElement("div",{className:"px-4 py-1"},x.createElement("div",{className:"flex space-x-2"},x.createElement("div",null,x.createElement("div",{className:"py-1"},u("form.name")),x.createElement(Hg,{buttonClassName:"w-96",className:"mb-2",options:i,selectedKey:d.fid,onSelect:o})),l&&t!==null&&d.analyticType==="measure"&&x.createElement("div",null,x.createElement("div",{className:"py-1"},u("form.aggregation")),x.createElement(Hg,{buttonClassName:"w-96",className:"mb-2",options:Nbt,selectedKey:d.enableAgg&&(y=d.aggName)!=null?y:"",onSelect:v=>l(t,v===""?null:v)}))),x.createElement(g,{rawFields:r,key:nO(d),field:d,onChange:h}),x.createElement("div",{className:"mt-4"},x.createElement(Fs,{onClick:m,text:u("btn.confirm")}),x.createElement(go,{className:"ml-2",onClick:s,text:u("btn.cancel")})))):null},jbt=ft(()=>{var e,t;const n=Tt(),{editingFilterIdx:r,viewFilters:i,dimensions:o,measures:a,meta:s,allFields:l,viewDimensions:u}=n,c=cc(),d=r!==null&&(e=i[r])!=null&&e.enableAgg?l.find(Z=>Z.fid===i[r].fid):void 0,f=r!==null&&(t=i[r])!=null&&t.enableAgg?i[r].aggName:void 0,h=G.useMemo(()=>{if(d&&u.length>0){const Z=eg([],l,u,[{...d,aggName:f}],!0,"none").map(k=>k.type==="view"?{...k,query:k.query.map(_=>_.op==="aggregate"?{..._,measures:_.measures.map(R=>({...R,asFieldKey:R.field}))}:_)}:k);return k=>c({...k,workflow:Z.concat(k.workflow.filter(_=>_.type!=="transform"))})}else return c},[c,u,d,f]),m=x.useCallback(()=>n.closeFilterEditing(),[n]),g=x.useCallback((Z,k)=>{Z!==null&&n.writeFilter(Z,k!=null?k:null)},[n]),y=Z=>{const k=i.findIndex(_=>_.fid===Z);if(k>=0)n.setFilterEditing(k);else{const _=o.find(I=>I.fid===Z)?"dimensions":"measures",R=_==="dimensions"?o.findIndex(I=>I.fid===Z):a.findIndex(I=>I.fid===Z);r!==null&&n.modFilter(r,_,R)}},v=x.useMemo(()=>l.filter(Z=>![ai,vr,xr].includes(Z.fid)).map(Z=>({label:Z.name,value:Z.fid})),[l]),w=(Z,k)=>{n.setFilterAggregator(Z,k!=null?k:"")};return x.createElement(f5.Provider,{value:h},x.createElement(Vve,{options:v,editingFilterIdx:r,meta:s,onClose:m,onSelectFilter:y,onWriteFilter:g,viewFilters:i,onSelectAgg:w}))}),Hbt=ft(({provided:e})=>{const t=Tt(),{viewFilters:n}=t;return x.createElement(jYe,{...e.droppableProps,ref:Yl(e.innerRef)},n.map((r,i)=>x.createElement(Aw,{key:r.dragId,draggableId:r.dragId,index:i},(o,a)=>x.createElement(sbt,{fIndex:i,provided:o}))),e.placeholder,x.createElement(jbt,null))}),Jbt=()=>x.createElement("div",null,x.createElement(zYe,null,x.createElement(D0,{droppableId:"filters",direction:"vertical"},(e,t)=>x.createElement(Hbt,{provided:e}))));function Bbt(...e){return e.filter(Boolean).join(" ")}function LJ(e){const{tabs:t,selectedKey:n,onSelected:r}=e;return x.createElement("div",{className:"border-b border-gray-200 dark:border-gray-700"},x.createElement("nav",{className:"-mb-px flex space-x-8",role:"tablist","aria-label":"Tabs"},t.map((i,o)=>x.createElement("span",{role:"tab",tabIndex:0,onClick:()=>{!i.disabled&&r(i.key,o)},key:i.key,className:Bbt(i.key===n?"border-indigo-500 text-indigo-600 dark:border-indigo-400 dark:text-indigo-300":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-200 hover:border-gray-300 dark:text-gray-400","whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm cursor-pointer",i.disabled?"opacity-50 cursor-not-allowed":"")},i.label))))}const Kbt=e=>{const t=Tt(),{segmentKey:n}=t,{t:r}=ot(),i=[{key:xd.data,label:x.createElement("div",{className:"flex"},x.createElement(eRe,{className:"w-4 mr-2"})," ",r("App.segments.data"))},{key:xd.vis,label:x.createElement("div",{className:"flex"},x.createElement(ALe,{className:"w-4 mr-2"})," ",r("App.segments.vis"))}],o=G.useCallback((a,s)=>{t.setVisName(s,a)},[t]);return x.createElement(LJ,{selectedKey:n,tabs:i,onEditLabel:o,onSelected:a=>{t.setSegmentKey(a)}})},Dbt=ft(Kbt);function kC(...e){return`rounded-md px-2.5 py-1.5 text-xs font-medium ${e==null?void 0:e.join(" ")}`}const _C="ring-1 ring-inset ring-gray-300 bg-white dark:bg-zinc-900 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800";function Abt(e){const{total:t,onNext:n,onPrev:r,pageIndex:i,onPageChange:o,pageSize:a=100,extendPageNumber:s=1}=e,{t:l}=ot(),u=G.useMemo(()=>{const d=Math.ceil(t/(a!=null?a:1)),f=[{index:0,disabled:!1,type:"page"},...new Array(1+s*2).fill(0).map((g,y)=>({index:i-(s-y),disabled:!1,type:"page"})),{index:d-1,disabled:!1,type:"page"}].filter(g=>g.index>=0&&g.index<d),h=[],m=new Set;for(let g of f)m.has(g.index)||(h.push(g),m.add(g.index));return h},[i,a,s,t,i]),c=d=>x.createElement("button",{key:d,className:kC("inline-block",d===i?"bg-indigo-600 text-white":_C),onClick:()=>{o&&o(d)}},d+1);return u.length>0?x.createElement("div",{className:"flex flex-1 justify-between sm:justify-end gap-2"},x.createElement("button",{onClick:()=>{r()},className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white dark:bg-zinc-900 px-2.5 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800"},l("actions.prev")),c(u[0].index),u.length>2&&u[1].index>u[0].index+1&&x.createElement("div",{className:kC("inline-block",_C),"aria-hidden":!0},"..."),u.slice(1,-1).map(d=>c(d.index)),u.length>2&&u[u.length-1].index>u[u.length-2].index+1&&x.createElement("div",{className:kC("inline-block",_C),"aria-hidden":!0},"..."),u.length>2&&c(u[u.length-1].index),x.createElement("button",{onClick:()=>{n()},className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white dark:bg-zinc-900  px-2.5 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800"},l("actions.next"))):null}const Ubt=Ae.div`
    overflow-x: auto;
    table {
        box-sizing: content-box;
        border-collapse: collapse;
        font-size: 12px;
        tbody {
            td {
            }
            td.number {
                text-align: right;
            }
            td.text {
                text-align: left;
            }
        }
    }
`,$bt=["nominal","ordinal","quantitative","temporal"];function Qbt(e){return e.analyticType==="dimension"?"text":"number"}function qbt(e){return e.analyticType==="dimension"?"border-t-2 border-blue-400":"border-t-2 border-purple-400"}function Sq(e){switch(e.semanticType){case"nominal":return"border border-transparent bg-sky-100 text-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:border-sky-600";case"ordinal":return"border border-transparent bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-100 dark:border-indigo-600";case"quantitative":return"border border-transparent bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-100 dark:border-purple-600";case"temporal":return"border border-transparent bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100 dark:border-yellow-600";default:return"border border-transparent bg-gray-400"}}const eyt=e=>{const t=e.map(i=>{var a;var o;return(a=(o=i.path)==null?void 0:o.length)!=null?a:1}).reduce((i,o)=>Math.max(i,o),0),n=[...Array(t)].map(()=>[]);let r=1;return e.forEach((i,o)=>{var s,l;const a=(l=i.path)!=null?l:[(s=i.name)!=null?s:i.fid];if(a.length>r)for(let u=r-1;u<a.length-1;u++)n[u].push({colSpan:0,rowSpan:1,type:"name",value:a[u]});r=a.length;for(let u=0;u<a.length-1;u++)n[u][n[u].length-1].colSpan++;n[a.length-1].push({type:"field",value:i,colSpan:1,rowSpan:t-a.length+1,fIndex:o})}),n},kq=e=>{var t;return e.type==="name"?e.value:(t=e.value.name)!=null?t:e.value.fid};function tyt(e){const[t,n]=G.useState([]),[r,i]=G.useState(null),o=G.useMemo(()=>e.map(c=>{var d;return{label:(d=c.name)!=null?d:c.fid,value:c.fid}}),[e]),a=G.useCallback(c=>{var f;const d=t.findIndex(h=>h.fid===c);if(d>-1)i(d);else{const h=e.find(g=>g.fid===c);if(!h)return;const m={fid:c,rule:null,analyticType:h.analyticType,dragId:"",name:(f=h.name)!=null?f:h.fid,semanticType:h.semanticType};r===null||!t[r]?(n(t.concat(m)),i(t.length)):n(t.map((g,y)=>y===r?m:g))}},[e,t,r]),s=G.useCallback((c,d)=>{n(f=>f.map((h,m)=>m===c?{...h,rule:d}:h))},[]),l=G.useCallback(c=>{n(d=>d.filter((f,h)=>h!==c))},[]),u=G.useCallback(()=>{i(null)},[]);return{filters:t,options:o,editingFilterIdx:r,onSelectFilter:a,onDeleteFilter:l,onWriteFilter:s,onClose:u}}const zE=e=>{const{size:t=10,onMetaChange:n,metas:r,computation:i,disableFilter:o}=e,[a,s]=G.useState(0),{t:l}=ot(),u=i,c=G.useMemo(()=>$bt.map(H=>({value:H,label:l(`constant.semantic_type.${H}`)})),[]),[d,f]=G.useState([]),[h,m]=G.useState(!1),g=G.useRef(0),[y,v]=G.useState(),{filters:w,editingFilterIdx:Z,onClose:k,onDeleteFilter:_,onSelectFilter:R,onWriteFilter:I,options:E}=tyt(r),[X,Y]=G.useState(0),[C,N]=G.useState(!1);G.useEffect(()=>{const H=w.filter(M=>M.rule).map(M=>({...M,rule:lG(M.rule)}));N(!0),i({workflow:[...!o&&H&&H.length>0?[{type:"filter",filters:H}]:[],{type:"view",query:[{op:"aggregate",groupBy:[],measures:[{field:"*",agg:"count",asFieldKey:"count"}]}]}]}).then(M=>{var J;var j;Y((J=(j=M[0])==null?void 0:j.count)!=null?J:0),N(!1)})},[o,w,i]);const V=a*t,F=Math.min((a+1)*t-1,X-1);G.useEffect(()=>{V>X&&s(0)},[V,X]),G.useEffect(()=>{m(!0);const H=++g.current;return zMe(u,t,a,{sorting:y,filters:w.filter(M=>M.rule).map(M=>({...M,rule:lG(M.rule)}))}).then(M=>{H===g.current&&(m(!1),f(M))}).catch(M=>{H===g.current&&(console.error(M),m(!1),f([]))}),()=>{g.current++}},[u,a,t,y,w]);const O=C||h,P=G.useMemo(()=>eyt(r),[r]);return x.createElement(Ubt,{className:"relative"},!o&&w.length>0&&x.createElement("div",{className:"flex items-center p-2 space-x-2"},x.createElement("span",null,"Filters: "),w.map((H,M)=>x.createElement(nyt,{key:H.fid,name:H.name,onClick:()=>R(H.fid),onRemove:()=>_(M)}))),x.createElement("nav",{className:"flex items-center justify-between bg-white dark:bg-zinc-900 p-2","aria-label":"Pagination"},x.createElement("div",{className:"hidden sm:block"},x.createElement("p",{className:"text-sm text-gray-800 dark:text-gray-100"},"Showing ",x.createElement("span",{className:"font-medium"},V+1)," to ",x.createElement("span",{className:"font-medium"},F+1)," of"," ",x.createElement("span",{className:"font-medium"},X)," results")),x.createElement(Abt,{total:X,pageSize:t,pageIndex:a,onNext:()=>{s(Math.min(Math.ceil(X/t)-1,a+1))},onPrev:()=>{s(Math.max(0,a-1))},onPageChange:H=>{s(Math.max(0,Math.min(Math.ceil(X/t)-1,H)))}})),x.createElement("div",{className:"overflow-y-auto",style:{maxHeight:"600px"}},x.createElement("table",{className:"min-w-full relative border-x border-gray-200 dark:border-gray-700"},x.createElement("thead",{className:""},P.map(H=>x.createElement("tr",{className:"divide-x divide-gray-200 dark:divide-gray-700",key:`row_${kq(H[0])}`},H.map((M,j)=>x.createElement("th",{colSpan:M.colSpan,rowSpan:M.rowSpan,key:kq(M),className:"align-top sticky top-0 bg-white dark:bg-zinc-900 p-0",style:{zIndex:H.length-j}},x.createElement("div",{className:"border-b border-gray-200 dark:border-gray-700"},M.type==="name"&&x.createElement("div",{className:"border-t-4 border-yellow-400 whitespace-nowrap py-3.5 text-left text-xs font-medium text-gray-900 dark:text-gray-50"},x.createElement("b",{className:"sticky inset-x-0 w-fit px-4 sm:pl-6"},M.value)),M.type==="field"&&x.createElement("div",{className:qbt(M.value)+" whitespace-nowrap py-3.5 px-4 text-left text-xs font-medium text-gray-900 dark:text-gray-50 flex items-center gap-1 group"},x.createElement("div",{className:"font-normal inline-block"},!n&&x.createElement("span",{className:"inline-flex p-0.5 text-xs mt-1 rounded "+Sq(M.value)},x.createElement(sg,{dataType:M.value.semanticType,analyticType:M.value.analyticType})),n&&x.createElement(YO,{options:c,onSelect:J=>{n(M.value.fid,M.fIndex,{semanticType:J})}},x.createElement("span",{className:"cursor-pointer inline-flex p-0.5 text-xs mt-1 rounded hover:scale-125 "+Sq(M.value)},x.createElement(sg,{dataType:M.value.semanticType,analyticType:M.value.analyticType})))),x.createElement("b",{className:"inline-block",onClick:()=>v(J=>(J==null?void 0:J.fid)===M.value.fid&&J.sort==="descending"?{fid:M.value.fid,sort:"ascending"}:{fid:M.value.fid,sort:"descending"})},M.value.basename||M.value.name||M.value.fid),(y==null?void 0:y.fid)===M.value.fid&&x.createElement("div",{className:"mx-1"},y.sort==="ascending"&&x.createElement(QM,{className:"w-3"}),y.sort==="descending"&&x.createElement($M,{className:"w-3"})),!o&&x.createElement("div",{className:"cursor-pointer invisible group-hover:visible rounded hover:bg-gray-50 dark:hover:bg-gray-800 p-1",onClick:()=>R(M.value.fid)},x.createElement(iRe,{className:"w-4 inline-block"}))))))))),x.createElement("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700 bg-white dark:bg-zinc-900 font-mono"},d.map((H,M)=>x.createElement("tr",{className:"divide-x divide-gray-200 dark:divide-gray-700",key:M},r.map(j=>x.createElement("td",{key:j.fid+M,className:Qbt(j)+" whitespace-nowrap py-2 px-4 text-xs text-gray-500 dark:text-gray-300"},`${H[j.fid]}`))))))),O&&x.createElement(sb,null),!o&&x.createElement(f5.Provider,{value:i},x.createElement("div",{className:"text-xs"},x.createElement(Vve,{editingFilterIdx:Z,meta:r,onClose:k,onSelectFilter:R,onWriteFilter:I,options:E,viewFilters:w}))))},nyt=e=>x.createElement("span",{onClick:e.onClick,className:"inline-flex items-center gap-x-0.5 rounded-md bg-gray-50 dark:bg-gray-800 px-2 py-1 text-xs font-medium text-gray-600 dark:text-gray-200 ring-1 ring-inset ring-gray-500/10"},e.name,x.createElement("button",{onClick:t=>{var n;t.stopPropagation(),(n=e.onRemove)==null||n.call(e)},type:"button",className:"group relative -mr-1 h-3.5 w-3.5 rounded-sm hover:bg-gray-500/20"},x.createElement("span",{className:"sr-only"},"Remove"),x.createElement("svg",{viewBox:"0 0 14 14",className:"h-3.5 w-3.5 stroke-gray-600/50 group-hover:stroke-gray-600/75 dark:stroke-gray-200/50 dark:group-hover:stroke-gray-200/75"},x.createElement("path",{d:"M4 4l6 6m0-6l-6 6"})),x.createElement("span",{className:"absolute -inset-1"}))),ryt=()=>{const e=Tt(),t=cc(),n=x.useMemo(()=>w0(e.meta),[e.meta]);return x.createElement("div",{className:"relative"},x.createElement(zE,{size:100,metas:n,computation:t,onMetaChange:(r,i,o)=>{e.updateCurrentDatasetMetas(r,o)}}))},iyt=ft(ryt),oyt=e=>(typeof e!="string"&&(e=JSON.stringify(e,void 0,4)),e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/\s/g,"&nbsp;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(t){var n="text-sky-500";return/^"/.test(t)?/:$/.test(t)?n="text-purple-500":n="text-emerald-500":/true|false/.test(t)?n="text-blue-500":/null/.test(t)&&(n="text-sky-500"),'<span class="'+n+'">'+t+"</span>"})),ayt=ft(e=>{const t=Tt(),{showCodeExportPanel:n}=t,{t:r}=ot(),[i,o]=G.useState("graphic-walker"),[a,s]=G.useState(""),l=[{key:"graphic-walker",label:"Graphic-Walker"},{key:"vega-lite",label:"Vega-Lite",disabled:!0}];return G.useEffect(()=>{if(n)if(i==="graphic-walker"){const u=t.exportCode();s(u)}else s("vega code")},[i,n,t]),x.createElement(wc,{show:n,onClose:()=>{t.setShowCodeExportPanel(!1)}},x.createElement("div",null,x.createElement("h1",null,"Code Export"),x.createElement(LJ,{tabs:l,selectedKey:i,onSelected:u=>{o(u)}}),i==="graphic-walker"&&x.createElement("div",{className:"text-sm px-6 max-h-96 overflow-auto"},x.createElement("code",{dangerouslySetInnerHTML:{__html:oyt(a)}})),x.createElement("div",{className:"mt-4 flex justify-start"},x.createElement(Fs,{className:"mr-2 px-6",text:"Copy to Clipboard",onClick:()=>{navigator.clipboard.writeText(JSON.stringify(a)),t.setShowCodeExportPanel(!1)}}),x.createElement(go,{text:r("actions.cancel"),className:"mr-2 px-6",onClick:()=>{t.setShowCodeExportPanel(!1)}}))))});var ua={},yZ={},syt=typeof n0=="object"&&n0&&n0.Object===Object&&n0,Yve=syt,lyt=Yve,uyt=typeof self=="object"&&self&&self.Object===Object&&self,cyt=lyt||uyt||Function("return this")(),cu=cyt,dyt=cu,fyt=dyt.Symbol,vZ=fyt,_q=vZ,Tve=Object.prototype,pyt=Tve.hasOwnProperty,hyt=Tve.toString,Qy=_q?_q.toStringTag:void 0;function myt(e){var t=pyt.call(e,Qy),n=e[Qy];try{e[Qy]=void 0;var r=!0}catch(o){}var i=hyt.call(e);return r&&(t?e[Qy]=n:delete e[Qy]),i}var gyt=myt,byt=Object.prototype,yyt=byt.toString;function vyt(e){return yyt.call(e)}var xyt=vyt,Gq=vZ,wyt=gyt,Zyt=xyt,Syt="[object Null]",kyt="[object Undefined]",Iq=Gq?Gq.toStringTag:void 0;function _yt(e){return e==null?e===void 0?kyt:Syt:Iq&&Iq in Object(e)?wyt(e):Zyt(e)}var Fh=_yt,Gyt=Array.isArray,Ms=Gyt;function Iyt(e){return e!=null&&typeof e=="object"}var Zc=Iyt,Wyt=Fh,Eyt=Ms,Xyt=Zc,Lyt="[object String]";function Ryt(e){return typeof e=="string"||!Eyt(e)&&Xyt(e)&&Wyt(e)==Lyt}var Cyt=Ryt;function Vyt(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(n(o[l],l,o)===!1)break}return t}}var Yyt=Vyt,Tyt=Yyt,Nyt=Tyt(),Fyt=Nyt;function Myt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Oyt=Myt,zyt=Fh,Pyt=Zc,jyt="[object Arguments]";function Hyt(e){return Pyt(e)&&zyt(e)==jyt}var Jyt=Hyt,Wq=Jyt,Byt=Zc,Nve=Object.prototype,Kyt=Nve.hasOwnProperty,Dyt=Nve.propertyIsEnumerable,Ayt=Wq(function(){return arguments}())?Wq:function(e){return Byt(e)&&Kyt.call(e,"callee")&&!Dyt.call(e,"callee")},Fve=Ayt,Jg={},Uyt={get exports(){return Jg},set exports(e){Jg=e}};function $yt(){return!1}var Qyt=$yt;(function(e,t){var n=cu,r=Qyt,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a?n.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||r;e.exports=u})(Uyt,Jg);var qyt=9007199254740991,evt=/^(?:0|[1-9]\d*)$/;function tvt(e,t){var n=typeof e;return t=t!=null?t:qyt,!!t&&(n=="number"||n!="symbol"&&evt.test(e))&&e>-1&&e%1==0&&e<t}var Mve=tvt,nvt=9007199254740991;function rvt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=nvt}var RJ=rvt,ivt=Fh,ovt=RJ,avt=Zc,svt="[object Arguments]",lvt="[object Array]",uvt="[object Boolean]",cvt="[object Date]",dvt="[object Error]",fvt="[object Function]",pvt="[object Map]",hvt="[object Number]",mvt="[object Object]",gvt="[object RegExp]",bvt="[object Set]",yvt="[object String]",vvt="[object WeakMap]",xvt="[object ArrayBuffer]",wvt="[object DataView]",Zvt="[object Float32Array]",Svt="[object Float64Array]",kvt="[object Int8Array]",_vt="[object Int16Array]",Gvt="[object Int32Array]",Ivt="[object Uint8Array]",Wvt="[object Uint8ClampedArray]",Evt="[object Uint16Array]",Xvt="[object Uint32Array]",pn={};pn[Zvt]=pn[Svt]=pn[kvt]=pn[_vt]=pn[Gvt]=pn[Ivt]=pn[Wvt]=pn[Evt]=pn[Xvt]=!0;pn[svt]=pn[lvt]=pn[xvt]=pn[uvt]=pn[wvt]=pn[cvt]=pn[dvt]=pn[fvt]=pn[pvt]=pn[hvt]=pn[mvt]=pn[gvt]=pn[bvt]=pn[yvt]=pn[vvt]=!1;function Lvt(e){return avt(e)&&ovt(e.length)&&!!pn[ivt(e)]}var Rvt=Lvt;function Cvt(e){return function(t){return e(t)}}var CJ=Cvt,Bg={},Vvt={get exports(){return Bg},set exports(e){Bg=e}};(function(e,t){var n=Yve,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,a=o&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch(u){}}();e.exports=s})(Vvt,Bg);var Yvt=Rvt,Tvt=CJ,Eq=Bg,Xq=Eq&&Eq.isTypedArray,Nvt=Xq?Tvt(Xq):Yvt,Ove=Nvt,Fvt=Oyt,Mvt=Fve,Ovt=Ms,zvt=Jg,Pvt=Mve,jvt=Ove,Hvt=Object.prototype,Jvt=Hvt.hasOwnProperty;function Bvt(e,t){var n=Ovt(e),r=!n&&Mvt(e),i=!n&&!r&&zvt(e),o=!n&&!r&&!i&&jvt(e),a=n||r||i||o,s=a?Fvt(e.length,String):[],l=s.length;for(var u in e)(t||Jvt.call(e,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Pvt(u,l)))&&s.push(u);return s}var zve=Bvt,Kvt=Object.prototype;function Dvt(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Kvt;return e===n}var VJ=Dvt;function Avt(e,t){return function(n){return e(t(n))}}var Pve=Avt,Uvt=Pve,$vt=Uvt(Object.keys,Object),Qvt=$vt,qvt=VJ,ext=Qvt,txt=Object.prototype,nxt=txt.hasOwnProperty;function rxt(e){if(!qvt(e))return ext(e);var t=[];for(var n in Object(e))nxt.call(e,n)&&n!="constructor"&&t.push(n);return t}var ixt=rxt;function oxt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Vb=oxt,axt=Fh,sxt=Vb,lxt="[object AsyncFunction]",uxt="[object Function]",cxt="[object GeneratorFunction]",dxt="[object Proxy]";function fxt(e){if(!sxt(e))return!1;var t=axt(e);return t==uxt||t==cxt||t==lxt||t==dxt}var jve=fxt,pxt=jve,hxt=RJ;function mxt(e){return e!=null&&hxt(e.length)&&!pxt(e)}var PE=mxt,gxt=zve,bxt=ixt,yxt=PE;function vxt(e){return yxt(e)?gxt(e):bxt(e)}var xZ=vxt,xxt=Fyt,wxt=xZ;function Zxt(e,t){return e&&xxt(e,t,wxt)}var Hve=Zxt;function Sxt(e){return e}var Jve=Sxt,kxt=Jve;function _xt(e){return typeof e=="function"?e:kxt}var Gxt=_xt,Ixt=Hve,Wxt=Gxt;function Ext(e,t){return e&&Ixt(e,Wxt(t))}var YJ=Ext,Xxt=Pve,Lxt=Xxt(Object.getPrototypeOf,Object),TJ=Lxt,Rxt=Fh,Cxt=TJ,Vxt=Zc,Yxt="[object Object]",Txt=Function.prototype,Nxt=Object.prototype,Bve=Txt.toString,Fxt=Nxt.hasOwnProperty,Mxt=Bve.call(Object);function Oxt(e){if(!Vxt(e)||Rxt(e)!=Yxt)return!1;var t=Cxt(e);if(t===null)return!0;var n=Fxt.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Bve.call(n)==Mxt}var zxt=Oxt;function Pxt(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var Kve=Pxt;function jxt(){this.__data__=[],this.size=0}var Hxt=jxt;function Jxt(e,t){return e===t||e!==e&&t!==t}var NJ=Jxt,Bxt=NJ;function Kxt(e,t){for(var n=e.length;n--;)if(Bxt(e[n][0],t))return n;return-1}var jE=Kxt,Dxt=jE,Axt=Array.prototype,Uxt=Axt.splice;function $xt(e){var t=this.__data__,n=Dxt(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Uxt.call(t,n,1),--this.size,!0}var Qxt=$xt,qxt=jE;function ewt(e){var t=this.__data__,n=qxt(t,e);return n<0?void 0:t[n][1]}var twt=ewt,nwt=jE;function rwt(e){return nwt(this.__data__,e)>-1}var iwt=rwt,owt=jE;function awt(e,t){var n=this.__data__,r=owt(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var swt=awt,lwt=Hxt,uwt=Qxt,cwt=twt,dwt=iwt,fwt=swt;function Yb(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Yb.prototype.clear=lwt;Yb.prototype.delete=uwt;Yb.prototype.get=cwt;Yb.prototype.has=dwt;Yb.prototype.set=fwt;var HE=Yb,pwt=HE;function hwt(){this.__data__=new pwt,this.size=0}var mwt=hwt;function gwt(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var bwt=gwt;function ywt(e){return this.__data__.get(e)}var vwt=ywt;function xwt(e){return this.__data__.has(e)}var wwt=xwt,Zwt=cu,Swt=Zwt["__core-js_shared__"],kwt=Swt,GC=kwt,Lq=function(){var e=/[^.]+$/.exec(GC&&GC.keys&&GC.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function _wt(e){return!!Lq&&Lq in e}var Gwt=_wt,Iwt=Function.prototype,Wwt=Iwt.toString;function Ewt(e){if(e!=null){try{return Wwt.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var Dve=Ewt,Xwt=jve,Lwt=Gwt,Rwt=Vb,Cwt=Dve,Vwt=/[\\^$.*+?()[\]{}|]/g,Ywt=/^\[object .+?Constructor\]$/,Twt=Function.prototype,Nwt=Object.prototype,Fwt=Twt.toString,Mwt=Nwt.hasOwnProperty,Owt=RegExp("^"+Fwt.call(Mwt).replace(Vwt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function zwt(e){if(!Rwt(e)||Lwt(e))return!1;var t=Xwt(e)?Owt:Ywt;return t.test(Cwt(e))}var Pwt=zwt;function jwt(e,t){return e==null?void 0:e[t]}var Hwt=jwt,Jwt=Pwt,Bwt=Hwt;function Kwt(e,t){var n=Bwt(e,t);return Jwt(n)?n:void 0}var Mh=Kwt,Dwt=Mh,Awt=cu,Uwt=Dwt(Awt,"Map"),FJ=Uwt,$wt=Mh,Qwt=$wt(Object,"create"),JE=Qwt,Rq=JE;function qwt(){this.__data__=Rq?Rq(null):{},this.size=0}var e5t=qwt;function t5t(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var n5t=t5t,r5t=JE,i5t="__lodash_hash_undefined__",o5t=Object.prototype,a5t=o5t.hasOwnProperty;function s5t(e){var t=this.__data__;if(r5t){var n=t[e];return n===i5t?void 0:n}return a5t.call(t,e)?t[e]:void 0}var l5t=s5t,u5t=JE,c5t=Object.prototype,d5t=c5t.hasOwnProperty;function f5t(e){var t=this.__data__;return u5t?t[e]!==void 0:d5t.call(t,e)}var p5t=f5t,h5t=JE,m5t="__lodash_hash_undefined__";function g5t(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=h5t&&t===void 0?m5t:t,this}var b5t=g5t,y5t=e5t,v5t=n5t,x5t=l5t,w5t=p5t,Z5t=b5t;function Tb(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Tb.prototype.clear=y5t;Tb.prototype.delete=v5t;Tb.prototype.get=x5t;Tb.prototype.has=w5t;Tb.prototype.set=Z5t;var S5t=Tb,Cq=S5t,k5t=HE,_5t=FJ;function G5t(){this.size=0,this.__data__={hash:new Cq,map:new(_5t||k5t),string:new Cq}}var I5t=G5t;function W5t(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var E5t=W5t,X5t=E5t;function L5t(e,t){var n=e.__data__;return X5t(t)?n[typeof t=="string"?"string":"hash"]:n.map}var BE=L5t,R5t=BE;function C5t(e){var t=R5t(this,e).delete(e);return this.size-=t?1:0,t}var V5t=C5t,Y5t=BE;function T5t(e){return Y5t(this,e).get(e)}var N5t=T5t,F5t=BE;function M5t(e){return F5t(this,e).has(e)}var O5t=M5t,z5t=BE;function P5t(e,t){var n=z5t(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var j5t=P5t,H5t=I5t,J5t=V5t,B5t=N5t,K5t=O5t,D5t=j5t;function Nb(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Nb.prototype.clear=H5t;Nb.prototype.delete=J5t;Nb.prototype.get=B5t;Nb.prototype.has=K5t;Nb.prototype.set=D5t;var MJ=Nb,A5t=HE,U5t=FJ,$5t=MJ,Q5t=200;function q5t(e,t){var n=this.__data__;if(n instanceof A5t){var r=n.__data__;if(!U5t||r.length<Q5t-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new $5t(r)}return n.set(e,t),this.size=n.size,this}var eZt=q5t,tZt=HE,nZt=mwt,rZt=bwt,iZt=vwt,oZt=wwt,aZt=eZt;function Fb(e){var t=this.__data__=new tZt(e);this.size=t.size}Fb.prototype.clear=nZt;Fb.prototype.delete=rZt;Fb.prototype.get=iZt;Fb.prototype.has=oZt;Fb.prototype.set=aZt;var OJ=Fb,sZt="__lodash_hash_undefined__";function lZt(e){return this.__data__.set(e,sZt),this}var uZt=lZt;function cZt(e){return this.__data__.has(e)}var dZt=cZt,fZt=MJ,pZt=uZt,hZt=dZt;function lW(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new fZt;++t<n;)this.add(e[t])}lW.prototype.add=lW.prototype.push=pZt;lW.prototype.has=hZt;var mZt=lW;function gZt(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var bZt=gZt;function yZt(e,t){return e.has(t)}var vZt=yZt,xZt=mZt,wZt=bZt,ZZt=vZt,SZt=1,kZt=2;function _Zt(e,t,n,r,i,o){var a=n&SZt,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(e),c=o.get(t);if(u&&c)return u==t&&c==e;var d=-1,f=!0,h=n&kZt?new xZt:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var m=e[d],g=t[d];if(r)var y=a?r(g,m,d,t,e,o):r(m,g,d,e,t,o);if(y!==void 0){if(y)continue;f=!1;break}if(h){if(!wZt(t,function(v,w){if(!ZZt(h,w)&&(m===v||i(m,v,n,r,o)))return h.push(w)})){f=!1;break}}else if(!(m===g||i(m,g,n,r,o))){f=!1;break}}return o.delete(e),o.delete(t),f}var Ave=_Zt,GZt=cu,IZt=GZt.Uint8Array,Uve=IZt;function WZt(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var EZt=WZt;function XZt(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var LZt=XZt,Vq=vZ,Yq=Uve,RZt=NJ,CZt=Ave,VZt=EZt,YZt=LZt,TZt=1,NZt=2,FZt="[object Boolean]",MZt="[object Date]",OZt="[object Error]",zZt="[object Map]",PZt="[object Number]",jZt="[object RegExp]",HZt="[object Set]",JZt="[object String]",BZt="[object Symbol]",KZt="[object ArrayBuffer]",DZt="[object DataView]",Tq=Vq?Vq.prototype:void 0,IC=Tq?Tq.valueOf:void 0;function AZt(e,t,n,r,i,o,a){switch(n){case DZt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case KZt:return!(e.byteLength!=t.byteLength||!o(new Yq(e),new Yq(t)));case FZt:case MZt:case PZt:return RZt(+e,+t);case OZt:return e.name==t.name&&e.message==t.message;case jZt:case JZt:return e==t+"";case zZt:var s=VZt;case HZt:var l=r&TZt;if(s||(s=YZt),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=NZt,a.set(e,t);var c=CZt(s(e),s(t),r,i,o,a);return a.delete(e),c;case BZt:if(IC)return IC.call(e)==IC.call(t)}return!1}var UZt=AZt;function $Zt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var $ve=$Zt,QZt=$ve,qZt=Ms;function eSt(e,t,n){var r=t(e);return qZt(e)?r:QZt(r,n(e))}var Qve=eSt;function tSt(e,t){for(var n=-1,r=e==null?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}var nSt=tSt;function rSt(){return[]}var qve=rSt,iSt=nSt,oSt=qve,aSt=Object.prototype,sSt=aSt.propertyIsEnumerable,Nq=Object.getOwnPropertySymbols,lSt=Nq?function(e){return e==null?[]:(e=Object(e),iSt(Nq(e),function(t){return sSt.call(e,t)}))}:oSt,zJ=lSt,uSt=Qve,cSt=zJ,dSt=xZ;function fSt(e){return uSt(e,dSt,cSt)}var exe=fSt,Fq=exe,pSt=1,hSt=Object.prototype,mSt=hSt.hasOwnProperty;function gSt(e,t,n,r,i,o){var a=n&pSt,s=Fq(e),l=s.length,u=Fq(t),c=u.length;if(l!=c&&!a)return!1;for(var d=l;d--;){var f=s[d];if(!(a?f in t:mSt.call(t,f)))return!1}var h=o.get(e),m=o.get(t);if(h&&m)return h==t&&m==e;var g=!0;o.set(e,t),o.set(t,e);for(var y=a;++d<l;){f=s[d];var v=e[f],w=t[f];if(r)var Z=a?r(w,v,f,t,e,o):r(v,w,f,e,t,o);if(!(Z===void 0?v===w||i(v,w,n,r,o):Z)){g=!1;break}y||(y=f=="constructor")}if(g&&!y){var k=e.constructor,_=t.constructor;k!=_&&"constructor"in e&&"constructor"in t&&!(typeof k=="function"&&k instanceof k&&typeof _=="function"&&_ instanceof _)&&(g=!1)}return o.delete(e),o.delete(t),g}var bSt=gSt,ySt=Mh,vSt=cu,xSt=ySt(vSt,"DataView"),wSt=xSt,ZSt=Mh,SSt=cu,kSt=ZSt(SSt,"Promise"),_St=kSt,GSt=Mh,ISt=cu,WSt=GSt(ISt,"Set"),ESt=WSt,XSt=Mh,LSt=cu,RSt=XSt(LSt,"WeakMap"),CSt=RSt,KN=wSt,DN=FJ,AN=_St,UN=ESt,$N=CSt,txe=Fh,Mb=Dve,Mq="[object Map]",VSt="[object Object]",Oq="[object Promise]",zq="[object Set]",Pq="[object WeakMap]",jq="[object DataView]",YSt=Mb(KN),TSt=Mb(DN),NSt=Mb(AN),FSt=Mb(UN),MSt=Mb($N),tp=txe;(KN&&tp(new KN(new ArrayBuffer(1)))!=jq||DN&&tp(new DN)!=Mq||AN&&tp(AN.resolve())!=Oq||UN&&tp(new UN)!=zq||$N&&tp(new $N)!=Pq)&&(tp=function(e){var t=txe(e),n=t==VSt?e.constructor:void 0,r=n?Mb(n):"";if(r)switch(r){case YSt:return jq;case TSt:return Mq;case NSt:return Oq;case FSt:return zq;case MSt:return Pq}return t});var KE=tp,WC=OJ,OSt=Ave,zSt=UZt,PSt=bSt,Hq=KE,Jq=Ms,Bq=Jg,jSt=Ove,HSt=1,Kq="[object Arguments]",Dq="[object Array]",Vk="[object Object]",JSt=Object.prototype,Aq=JSt.hasOwnProperty;function BSt(e,t,n,r,i,o){var a=Jq(e),s=Jq(t),l=a?Dq:Hq(e),u=s?Dq:Hq(t);l=l==Kq?Vk:l,u=u==Kq?Vk:u;var c=l==Vk,d=u==Vk,f=l==u;if(f&&Bq(e)){if(!Bq(t))return!1;a=!0,c=!1}if(f&&!c)return o||(o=new WC),a||jSt(e)?OSt(e,t,n,r,i,o):zSt(e,t,l,n,r,i,o);if(!(n&HSt)){var h=c&&Aq.call(e,"__wrapped__"),m=d&&Aq.call(t,"__wrapped__");if(h||m){var g=h?e.value():e,y=m?t.value():t;return o||(o=new WC),i(g,y,n,r,o)}}return f?(o||(o=new WC),PSt(e,t,n,r,i,o)):!1}var KSt=BSt,DSt=KSt,Uq=Zc;function nxe(e,t,n,r,i){return e===t?!0:e==null||t==null||!Uq(e)&&!Uq(t)?e!==e&&t!==t:DSt(e,t,n,r,nxe,i)}var rxe=nxe,ASt=OJ,USt=rxe,$St=1,QSt=2;function qSt(e,t,n,r){var i=n.length,o=i,a=!r;if(e==null)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=n[i];var l=s[0],u=e[l],c=s[1];if(a&&s[2]){if(u===void 0&&!(l in e))return!1}else{var d=new ASt;if(r)var f=r(u,c,l,e,t,d);if(!(f===void 0?USt(c,u,$St|QSt,r,d):f))return!1}}return!0}var ekt=qSt,tkt=Vb;function nkt(e){return e===e&&!tkt(e)}var ixe=nkt,rkt=ixe,ikt=xZ;function okt(e){for(var t=ikt(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,rkt(i)]}return t}var akt=okt;function skt(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var oxe=skt,lkt=ekt,ukt=akt,ckt=oxe;function dkt(e){var t=ukt(e);return t.length==1&&t[0][2]?ckt(t[0][0],t[0][1]):function(n){return n===e||lkt(n,e,t)}}var fkt=dkt,pkt=Fh,hkt=Zc,mkt="[object Symbol]";function gkt(e){return typeof e=="symbol"||hkt(e)&&pkt(e)==mkt}var PJ=gkt,bkt=Ms,ykt=PJ,vkt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xkt=/^\w*$/;function wkt(e,t){if(bkt(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||ykt(e)?!0:xkt.test(e)||!vkt.test(e)||t!=null&&e in Object(t)}var jJ=wkt,axe=MJ,Zkt="Expected a function";function HJ(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Zkt);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(HJ.Cache||axe),n}HJ.Cache=axe;var Skt=HJ,kkt=Skt,_kt=500;function Gkt(e){var t=kkt(e,function(r){return n.size===_kt&&n.clear(),r}),n=t.cache;return t}var Ikt=Gkt,Wkt=Ikt,Ekt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xkt=/\\(\\)?/g,Lkt=Wkt(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Ekt,function(n,r,i,o){t.push(i?o.replace(Xkt,"$1"):r||n)}),t}),Rkt=Lkt,$q=vZ,Ckt=Kve,Vkt=Ms,Ykt=PJ,Qq=$q?$q.prototype:void 0,qq=Qq?Qq.toString:void 0;function sxe(e){if(typeof e=="string")return e;if(Vkt(e))return Ckt(e,sxe)+"";if(Ykt(e))return qq?qq.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Tkt=sxe,Nkt=Tkt;function Fkt(e){return e==null?"":Nkt(e)}var Mkt=Fkt,Okt=Ms,zkt=jJ,Pkt=Rkt,jkt=Mkt;function Hkt(e,t){return Okt(e)?e:zkt(e,t)?[e]:Pkt(jkt(e))}var lxe=Hkt,Jkt=PJ;function Bkt(e){if(typeof e=="string"||Jkt(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var DE=Bkt,Kkt=lxe,Dkt=DE;function Akt(e,t){t=Kkt(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Dkt(t[n++])];return n&&n==r?e:void 0}var uxe=Akt,Ukt=uxe;function $kt(e,t,n){var r=e==null?void 0:Ukt(e,t);return r===void 0?n:r}var Qkt=$kt;function qkt(e,t){return e!=null&&t in Object(e)}var e_t=qkt,t_t=lxe,n_t=Fve,r_t=Ms,i_t=Mve,o_t=RJ,a_t=DE;function s_t(e,t,n){t=t_t(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var a=a_t(t[r]);if(!(o=e!=null&&n(e,a)))break;e=e[a]}return o||++r!=i?o:(i=e==null?0:e.length,!!i&&o_t(i)&&i_t(a,i)&&(r_t(e)||n_t(e)))}var l_t=s_t,u_t=e_t,c_t=l_t;function d_t(e,t){return e!=null&&c_t(e,t,u_t)}var f_t=d_t,p_t=rxe,h_t=Qkt,m_t=f_t,g_t=jJ,b_t=ixe,y_t=oxe,v_t=DE,x_t=1,w_t=2;function Z_t(e,t){return g_t(e)&&b_t(t)?y_t(v_t(e),t):function(n){var r=h_t(n,e);return r===void 0&&r===t?m_t(n,e):p_t(t,r,x_t|w_t)}}var S_t=Z_t;function k_t(e){return function(t){return t==null?void 0:t[e]}}var __t=k_t,G_t=uxe;function I_t(e){return function(t){return G_t(t,e)}}var W_t=I_t,E_t=__t,X_t=W_t,L_t=jJ,R_t=DE;function C_t(e){return L_t(e)?E_t(R_t(e)):X_t(e)}var V_t=C_t,Y_t=fkt,T_t=S_t,N_t=Jve,F_t=Ms,M_t=V_t;function O_t(e){return typeof e=="function"?e:e==null?N_t:typeof e=="object"?F_t(e)?T_t(e[0],e[1]):Y_t(e):M_t(e)}var z_t=O_t,P_t=PE;function j_t(e,t){return function(n,r){if(n==null)return n;if(!P_t(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Object(n);(t?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}var H_t=j_t,J_t=Hve,B_t=H_t,K_t=B_t(J_t),D_t=K_t,A_t=D_t,U_t=PE;function $_t(e,t){var n=-1,r=U_t(e)?Array(e.length):[];return A_t(e,function(i,o,a){r[++n]=t(i,o,a)}),r}var Q_t=$_t,q_t=Kve,e9t=z_t,t9t=Q_t,n9t=Ms;function r9t(e,t){var n=n9t(e)?q_t:t9t;return n(e,e9t(t))}var i9t=r9t;Object.defineProperty(yZ,"__esModule",{value:!0});yZ.flattenNames=void 0;var o9t=Cyt,a9t=AE(o9t),s9t=YJ,l9t=AE(s9t),u9t=zxt,c9t=AE(u9t),d9t=i9t,f9t=AE(d9t);function AE(e){return e&&e.__esModule?e:{default:e}}var p9t=yZ.flattenNames=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[];return(0,f9t.default)(t,function(r){Array.isArray(r)?e(r).map(function(i){return n.push(i)}):(0,c9t.default)(r)?(0,l9t.default)(r,function(i,o){i===!0&&n.push(o),n.push(o+"-"+i)}):(0,a9t.default)(r)&&n.push(r)}),n};yZ.default=p9t;var wZ={};function h9t(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var m9t=h9t,g9t=Mh,b9t=function(){try{var e=g9t(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),y9t=b9t,eee=y9t;function v9t(e,t,n){t=="__proto__"&&eee?eee(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var cxe=v9t,x9t=cxe,w9t=NJ,Z9t=Object.prototype,S9t=Z9t.hasOwnProperty;function k9t(e,t,n){var r=e[t];(!(S9t.call(e,t)&&w9t(r,n))||n===void 0&&!(t in e))&&x9t(e,t,n)}var dxe=k9t,_9t=dxe,G9t=cxe;function I9t(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;l===void 0&&(l=e[s]),i?G9t(n,s,l):_9t(n,s,l)}return n}var UE=I9t,W9t=UE,E9t=xZ;function X9t(e,t){return e&&W9t(t,E9t(t),e)}var L9t=X9t;function R9t(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var C9t=R9t,V9t=Vb,Y9t=VJ,T9t=C9t,N9t=Object.prototype,F9t=N9t.hasOwnProperty;function M9t(e){if(!V9t(e))return T9t(e);var t=Y9t(e),n=[];for(var r in e)r=="constructor"&&(t||!F9t.call(e,r))||n.push(r);return n}var O9t=M9t,z9t=zve,P9t=O9t,j9t=PE;function H9t(e){return j9t(e)?z9t(e,!0):P9t(e)}var JJ=H9t,J9t=UE,B9t=JJ;function K9t(e,t){return e&&J9t(t,B9t(t),e)}var D9t=K9t,uW={},A9t={get exports(){return uW},set exports(e){uW=e}};(function(e,t){var n=cu,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,a=o?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var d=u.length,f=s?s(d):new u.constructor(d);return u.copy(f),f}e.exports=l})(A9t,uW);function U9t(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var $9t=U9t,Q9t=UE,q9t=zJ;function eGt(e,t){return Q9t(e,q9t(e),t)}var tGt=eGt,nGt=$ve,rGt=TJ,iGt=zJ,oGt=qve,aGt=Object.getOwnPropertySymbols,sGt=aGt?function(e){for(var t=[];e;)nGt(t,iGt(e)),e=rGt(e);return t}:oGt,fxe=sGt,lGt=UE,uGt=fxe;function cGt(e,t){return lGt(e,uGt(e),t)}var dGt=cGt,fGt=Qve,pGt=fxe,hGt=JJ;function mGt(e){return fGt(e,hGt,pGt)}var gGt=mGt,bGt=Object.prototype,yGt=bGt.hasOwnProperty;function vGt(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&yGt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var xGt=vGt,tee=Uve;function wGt(e){var t=new e.constructor(e.byteLength);return new tee(t).set(new tee(e)),t}var BJ=wGt,ZGt=BJ;function SGt(e,t){var n=t?ZGt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var kGt=SGt,_Gt=/\w*$/;function GGt(e){var t=new e.constructor(e.source,_Gt.exec(e));return t.lastIndex=e.lastIndex,t}var IGt=GGt,nee=vZ,ree=nee?nee.prototype:void 0,iee=ree?ree.valueOf:void 0;function WGt(e){return iee?Object(iee.call(e)):{}}var EGt=WGt,XGt=BJ;function LGt(e,t){var n=t?XGt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var RGt=LGt,CGt=BJ,VGt=kGt,YGt=IGt,TGt=EGt,NGt=RGt,FGt="[object Boolean]",MGt="[object Date]",OGt="[object Map]",zGt="[object Number]",PGt="[object RegExp]",jGt="[object Set]",HGt="[object String]",JGt="[object Symbol]",BGt="[object ArrayBuffer]",KGt="[object DataView]",DGt="[object Float32Array]",AGt="[object Float64Array]",UGt="[object Int8Array]",$Gt="[object Int16Array]",QGt="[object Int32Array]",qGt="[object Uint8Array]",eIt="[object Uint8ClampedArray]",tIt="[object Uint16Array]",nIt="[object Uint32Array]";function rIt(e,t,n){var r=e.constructor;switch(t){case BGt:return CGt(e);case FGt:case MGt:return new r(+e);case KGt:return VGt(e,n);case DGt:case AGt:case UGt:case $Gt:case QGt:case qGt:case eIt:case tIt:case nIt:return NGt(e,n);case OGt:return new r;case zGt:case HGt:return new r(e);case PGt:return YGt(e);case jGt:return new r;case JGt:return TGt(e)}}var iIt=rIt,oIt=Vb,oee=Object.create,aIt=function(){function e(){}return function(t){if(!oIt(t))return{};if(oee)return oee(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),sIt=aIt,lIt=sIt,uIt=TJ,cIt=VJ;function dIt(e){return typeof e.constructor=="function"&&!cIt(e)?lIt(uIt(e)):{}}var fIt=dIt,pIt=KE,hIt=Zc,mIt="[object Map]";function gIt(e){return hIt(e)&&pIt(e)==mIt}var bIt=gIt,yIt=bIt,vIt=CJ,aee=Bg,see=aee&&aee.isMap,xIt=see?vIt(see):yIt,wIt=xIt,ZIt=KE,SIt=Zc,kIt="[object Set]";function _It(e){return SIt(e)&&ZIt(e)==kIt}var GIt=_It,IIt=GIt,WIt=CJ,lee=Bg,uee=lee&&lee.isSet,EIt=uee?WIt(uee):IIt,XIt=EIt,LIt=OJ,RIt=m9t,CIt=dxe,VIt=L9t,YIt=D9t,TIt=uW,NIt=$9t,FIt=tGt,MIt=dGt,OIt=exe,zIt=gGt,PIt=KE,jIt=xGt,HIt=iIt,JIt=fIt,BIt=Ms,KIt=Jg,DIt=wIt,AIt=Vb,UIt=XIt,$It=xZ,QIt=JJ,qIt=1,eWt=2,tWt=4,pxe="[object Arguments]",nWt="[object Array]",rWt="[object Boolean]",iWt="[object Date]",oWt="[object Error]",hxe="[object Function]",aWt="[object GeneratorFunction]",sWt="[object Map]",lWt="[object Number]",mxe="[object Object]",uWt="[object RegExp]",cWt="[object Set]",dWt="[object String]",fWt="[object Symbol]",pWt="[object WeakMap]",hWt="[object ArrayBuffer]",mWt="[object DataView]",gWt="[object Float32Array]",bWt="[object Float64Array]",yWt="[object Int8Array]",vWt="[object Int16Array]",xWt="[object Int32Array]",wWt="[object Uint8Array]",ZWt="[object Uint8ClampedArray]",SWt="[object Uint16Array]",kWt="[object Uint32Array]",rn={};rn[pxe]=rn[nWt]=rn[hWt]=rn[mWt]=rn[rWt]=rn[iWt]=rn[gWt]=rn[bWt]=rn[yWt]=rn[vWt]=rn[xWt]=rn[sWt]=rn[lWt]=rn[mxe]=rn[uWt]=rn[cWt]=rn[dWt]=rn[fWt]=rn[wWt]=rn[ZWt]=rn[SWt]=rn[kWt]=!0;rn[oWt]=rn[hxe]=rn[pWt]=!1;function g9(e,t,n,r,i,o){var a,s=t&qIt,l=t&eWt,u=t&tWt;if(n&&(a=i?n(e,r,i,o):n(e)),a!==void 0)return a;if(!AIt(e))return e;var c=BIt(e);if(c){if(a=jIt(e),!s)return NIt(e,a)}else{var d=PIt(e),f=d==hxe||d==aWt;if(KIt(e))return TIt(e,s);if(d==mxe||d==pxe||f&&!i){if(a=l||f?{}:JIt(e),!s)return l?MIt(e,YIt(a,e)):FIt(e,VIt(a,e))}else{if(!rn[d])return i?e:{};a=HIt(e,d,s)}}o||(o=new LIt);var h=o.get(e);if(h)return h;o.set(e,a),UIt(e)?e.forEach(function(y){a.add(g9(y,t,n,y,e,o))}):DIt(e)&&e.forEach(function(y,v){a.set(v,g9(y,t,n,v,e,o))});var m=u?l?zIt:OIt:l?QIt:$It,g=c?void 0:m(e);return RIt(g||e,function(y,v){g&&(v=y,y=e[v]),CIt(a,v,g9(y,t,n,v,e,o))}),a}var _Wt=g9,GWt=_Wt,IWt=1,WWt=4;function EWt(e){return GWt(e,IWt|WWt)}var XWt=EWt;Object.defineProperty(wZ,"__esModule",{value:!0});wZ.mergeClasses=void 0;var LWt=YJ,RWt=gxe(LWt),CWt=XWt,VWt=gxe(CWt),YWt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function gxe(e){return e&&e.__esModule?e:{default:e}}var TWt=wZ.mergeClasses=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=e.default&&(0,VWt.default)(e.default)||{};return t.map(function(r){var i=e[r];return i&&(0,RWt.default)(i,function(o,a){n[a]||(n[a]={}),n[a]=YWt({},n[a],i[a])}),r}),n};wZ.default=TWt;var ZZ={};Object.defineProperty(ZZ,"__esModule",{value:!0});ZZ.autoprefix=void 0;var NWt=YJ,cee=MWt(NWt),FWt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function MWt(e){return e&&e.__esModule?e:{default:e}}var OWt={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var n=t[e];return n||{extend:e}}},zWt=ZZ.autoprefix=function(e){var t={};return(0,cee.default)(e,function(n,r){var i={};(0,cee.default)(n,function(o,a){var s=OWt[a];s?i=FWt({},i,s(o)):i[a]=o}),t[r]=i}),t};ZZ.default=zWt;var SZ={};Object.defineProperty(SZ,"__esModule",{value:!0});SZ.hover=void 0;var PWt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jWt=x,EC=HWt(jWt);function HWt(e){return e&&e.__esModule?e:{default:e}}function JWt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dee(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function BWt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var KWt=SZ.hover=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){BWt(r,n);function r(){var i,o,a,s;JWt(this,r);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return s=(o=(a=dee(this,(i=r.__proto__||Object.getPrototypeOf(r)).call.apply(i,[this].concat(u))),a),a.state={hover:!1},a.handleMouseOver=function(){return a.setState({hover:!0})},a.handleMouseOut=function(){return a.setState({hover:!1})},a.render=function(){return EC.default.createElement(t,{onMouseOver:a.handleMouseOver,onMouseOut:a.handleMouseOut},EC.default.createElement(e,PWt({},a.props,a.state)))},o),dee(a,s)}return r}(EC.default.Component)};SZ.default=KWt;var kZ={};Object.defineProperty(kZ,"__esModule",{value:!0});kZ.active=void 0;var DWt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AWt=x,XC=UWt(AWt);function UWt(e){return e&&e.__esModule?e:{default:e}}function $Wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fee(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function QWt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var qWt=kZ.active=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){QWt(r,n);function r(){var i,o,a,s;$Wt(this,r);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return s=(o=(a=fee(this,(i=r.__proto__||Object.getPrototypeOf(r)).call.apply(i,[this].concat(u))),a),a.state={active:!1},a.handleMouseDown=function(){return a.setState({active:!0})},a.handleMouseUp=function(){return a.setState({active:!1})},a.render=function(){return XC.default.createElement(t,{onMouseDown:a.handleMouseDown,onMouseUp:a.handleMouseUp},XC.default.createElement(e,DWt({},a.props,a.state)))},o),fee(a,s)}return r}(XC.default.Component)};kZ.default=qWt;var KJ={};Object.defineProperty(KJ,"__esModule",{value:!0});var e3t=function(e,t){var n={},r=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n[i]=o};return e===0&&r("first-child"),e===t-1&&r("last-child"),(e===0||e%2===0)&&r("even"),Math.abs(e%2)===1&&r("odd"),r("nth-child",e),n};KJ.default=e3t;Object.defineProperty(ua,"__esModule",{value:!0});ua.ReactCSS=ua.loop=ua.handleActive=DJ=ua.handleHover=ua.hover=void 0;var t3t=yZ,n3t=Ob(t3t),r3t=wZ,i3t=Ob(r3t),o3t=ZZ,a3t=Ob(o3t),s3t=SZ,bxe=Ob(s3t),l3t=kZ,u3t=Ob(l3t),c3t=KJ,d3t=Ob(c3t);function Ob(e){return e&&e.__esModule?e:{default:e}}ua.hover=bxe.default;var DJ=ua.handleHover=bxe.default;ua.handleActive=u3t.default;ua.loop=d3t.default;var f3t=ua.ReactCSS=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=(0,n3t.default)(n),o=(0,i3t.default)(e,i);return(0,a3t.default)(o)},tt=ua.default=f3t,p3t=function(e,t,n,r,i){var o=i.clientWidth,a=i.clientHeight,s=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,l=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,u=s-(i.getBoundingClientRect().left+window.pageXOffset),c=l-(i.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var d=void 0;if(c<0?d=0:c>a?d=1:d=Math.round(c*100/a)/100,t.a!==d)return{h:t.h,s:t.s,l:t.l,a:d,source:"rgb"}}else{var f=void 0;if(u<0?f=0:u>o?f=1:f=Math.round(u*100/o)/100,r!==f)return{h:t.h,s:t.s,l:t.l,a:f,source:"rgb"}}return null},LC={},h3t=function(e,t,n,r){if(typeof document>"u"&&!r)return null;var i=r?new r:document.createElement("canvas");i.width=n*2,i.height=n*2;var o=i.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,i.width,i.height),o.fillStyle=t,o.fillRect(0,0,n,n),o.translate(n,n),o.fillRect(0,0,n,n),i.toDataURL()):null},m3t=function(e,t,n,r){var i=e+"-"+t+"-"+n+(r?"-server":"");if(LC[i])return LC[i];var o=h3t(e,t,n,r);return LC[i]=o,o},pee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zb=function(e){var t=e.white,n=e.grey,r=e.size,i=e.renderers,o=e.borderRadius,a=e.boxShadow,s=e.children,l=tt({default:{grid:{borderRadius:o,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+m3t(t,n,r,i.canvas)+") center left"}}});return G.isValidElement(s)?x.cloneElement(s,pee({},s.props,{style:pee({},s.props.style,l.grid)})):x.createElement("div",{style:l.grid})};zb.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var g3t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b3t=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function y3t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hee(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function v3t(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var AJ=function(e){v3t(t,e);function t(){var n,r,i,o;y3t(this,t);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return o=(r=(i=hee(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(s))),i),i.handleChange=function(u){var c=p3t(u,i.props.hsl,i.props.direction,i.props.a,i.container);c&&typeof i.props.onChange=="function"&&i.props.onChange(c,u)},i.handleMouseDown=function(u){i.handleChange(u),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},r),hee(i,o)}return b3t(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var n=this,r=this.props.rgb,i=tt({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+r.r+","+r.g+","+r.b+`, 0) 0%,
           rgba(`+r.r+","+r.g+","+r.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:r.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+r.r+","+r.g+","+r.b+`, 0) 0%,
           rgba(`+r.r+","+r.g+","+r.b+", 1) 100%)"},pointer:{left:0,top:r.a*100+"%"}},overwrite:g3t({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return x.createElement("div",{style:i.alpha},x.createElement("div",{style:i.checkboard},x.createElement(zb,{renderers:this.props.renderers})),x.createElement("div",{style:i.gradient}),x.createElement("div",{style:i.container,ref:function(o){return n.container=o},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},x.createElement("div",{style:i.pointer},this.props.pointer?x.createElement(this.props.pointer,this.props):x.createElement("div",{style:i.slider}))))}}]),t}(G.PureComponent||G.Component),x3t=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function w3t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z3t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S3t(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function k3t(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _3t=1,yxe=38,G3t=40,I3t=[yxe,G3t],W3t=function(e){return I3t.indexOf(e)>-1},E3t=function(e){return Number(String(e).replace(/%/g,""))},X3t=1,xt=function(e){k3t(t,e);function t(n){Z3t(this,t);var r=S3t(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(i){r.setUpdatedValue(i.target.value,i)},r.handleKeyDown=function(i){var o=E3t(i.target.value);if(!isNaN(o)&&W3t(i.keyCode)){var a=r.getArrowOffset(),s=i.keyCode===yxe?o+a:o-a;r.setUpdatedValue(s,i)}},r.handleDrag=function(i){if(r.props.dragLabel){var o=Math.round(r.props.value+i.movementX);o>=0&&o<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(o),i)}},r.handleMouseDown=function(i){r.props.dragLabel&&(i.preventDefault(),r.handleDrag(i),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(n.value).toUpperCase(),blurValue:String(n.value).toUpperCase()},r.inputId="rc-editable-input-"+X3t++,r}return x3t(t,[{key:"componentDidUpdate",value:function(n,r){this.props.value!==this.state.value&&(n.value!==this.props.value||r.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(n){return w3t({},this.props.label,n)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||_3t}},{key:"setUpdatedValue",value:function(n,r){var i=this.props.label?this.getValueObjectWithLabel(n):n;this.props.onChange&&this.props.onChange(i,r),this.setState({value:n})}},{key:"render",value:function(){var n=this,r=tt({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return x.createElement("div",{style:r.wrap},x.createElement("input",{id:this.inputId,style:r.input,ref:function(i){return n.input=i},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?x.createElement("label",{htmlFor:this.inputId,style:r.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(G.PureComponent||G.Component),L3t=function(e,t,n,r){var i=r.clientWidth,o=r.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,s=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,l=a-(r.getBoundingClientRect().left+window.pageXOffset),u=s-(r.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var c=void 0;if(u<0)c=359;else if(u>o)c=0;else{var d=-(u*100/o)+100;c=360*d/100}if(n.h!==c)return{h:c,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var f=void 0;if(l<0)f=0;else if(l>i)f=359;else{var h=l*100/i;f=360*h/100}if(n.h!==f)return{h:f,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},R3t=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function C3t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mee(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function V3t(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Pb=function(e){V3t(t,e);function t(){var n,r,i,o;C3t(this,t);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return o=(r=(i=mee(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(s))),i),i.handleChange=function(u){var c=L3t(u,i.props.direction,i.props.hsl,i.container);c&&typeof i.props.onChange=="function"&&i.props.onChange(c,u)},i.handleMouseDown=function(u){i.handleChange(u),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},r),mee(i,o)}return R3t(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,r=this.props.direction,i=r===void 0?"horizontal":r,o=tt({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:i==="vertical"});return x.createElement("div",{style:o.hue},x.createElement("div",{className:"hue-"+i,style:o.container,ref:function(a){return n.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},x.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),x.createElement("div",{style:o.pointer},this.props.pointer?x.createElement(this.props.pointer,this.props):x.createElement("div",{style:o.slider}))))}}]),t}(G.PureComponent||G.Component);function Y3t(){this.__data__=[],this.size=0}function _Z(e,t){return e===t||e!==e&&t!==t}function $E(e,t){for(var n=e.length;n--;)if(_Z(e[n][0],t))return n;return-1}var T3t=Array.prototype,N3t=T3t.splice;function F3t(e){var t=this.__data__,n=$E(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():N3t.call(t,n,1),--this.size,!0}function M3t(e){var t=this.__data__,n=$E(t,e);return n<0?void 0:t[n][1]}function O3t(e){return $E(this.__data__,e)>-1}function z3t(e,t){var n=this.__data__,r=$E(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function Sc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Sc.prototype.clear=Y3t;Sc.prototype.delete=F3t;Sc.prototype.get=M3t;Sc.prototype.has=O3t;Sc.prototype.set=z3t;function P3t(){this.__data__=new Sc,this.size=0}function j3t(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function H3t(e){return this.__data__.get(e)}function J3t(e){return this.__data__.has(e)}var B3t=typeof global=="object"&&global&&global.Object===Object&&global;const vxe=B3t;var K3t=typeof self=="object"&&self&&self.Object===Object&&self,D3t=vxe||K3t||Function("return this")();const Os=D3t;var A3t=Os.Symbol;const tf=A3t;var xxe=Object.prototype,U3t=xxe.hasOwnProperty,$3t=xxe.toString,qy=tf?tf.toStringTag:void 0;function Q3t(e){var t=U3t.call(e,qy),n=e[qy];try{e[qy]=void 0;var r=!0}catch(o){}var i=$3t.call(e);return r&&(t?e[qy]=n:delete e[qy]),i}var q3t=Object.prototype,e1t=q3t.toString;function t1t(e){return e1t.call(e)}var n1t="[object Null]",r1t="[object Undefined]",gee=tf?tf.toStringTag:void 0;function Oh(e){return e==null?e===void 0?r1t:n1t:gee&&gee in Object(e)?Q3t(e):t1t(e)}function Xa(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var i1t="[object AsyncFunction]",o1t="[object Function]",a1t="[object GeneratorFunction]",s1t="[object Proxy]";function UJ(e){if(!Xa(e))return!1;var t=Oh(e);return t==o1t||t==a1t||t==i1t||t==s1t}var l1t=Os["__core-js_shared__"];const RC=l1t;var bee=function(){var e=/[^.]+$/.exec(RC&&RC.keys&&RC.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function u1t(e){return!!bee&&bee in e}var c1t=Function.prototype,d1t=c1t.toString;function zh(e){if(e!=null){try{return d1t.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var f1t=/[\\^$.*+?()[\]{}|]/g,p1t=/^\[object .+?Constructor\]$/,h1t=Function.prototype,m1t=Object.prototype,g1t=h1t.toString,b1t=m1t.hasOwnProperty,y1t=RegExp("^"+g1t.call(b1t).replace(f1t,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v1t(e){if(!Xa(e)||u1t(e))return!1;var t=UJ(e)?y1t:p1t;return t.test(zh(e))}function x1t(e,t){return e==null?void 0:e[t]}function Ph(e,t){var n=x1t(e,t);return v1t(n)?n:void 0}var w1t=Ph(Os,"Map");const Fw=w1t;var Z1t=Ph(Object,"create");const Mw=Z1t;function S1t(){this.__data__=Mw?Mw(null):{},this.size=0}function k1t(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _1t="__lodash_hash_undefined__",G1t=Object.prototype,I1t=G1t.hasOwnProperty;function W1t(e){var t=this.__data__;if(Mw){var n=t[e];return n===_1t?void 0:n}return I1t.call(t,e)?t[e]:void 0}var E1t=Object.prototype,X1t=E1t.hasOwnProperty;function L1t(e){var t=this.__data__;return Mw?t[e]!==void 0:X1t.call(t,e)}var R1t="__lodash_hash_undefined__";function C1t(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Mw&&t===void 0?R1t:t,this}function mh(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}mh.prototype.clear=S1t;mh.prototype.delete=k1t;mh.prototype.get=W1t;mh.prototype.has=L1t;mh.prototype.set=C1t;function V1t(){this.size=0,this.__data__={hash:new mh,map:new(Fw||Sc),string:new mh}}function Y1t(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function QE(e,t){var n=e.__data__;return Y1t(t)?n[typeof t=="string"?"string":"hash"]:n.map}function T1t(e){var t=QE(this,e).delete(e);return this.size-=t?1:0,t}function N1t(e){return QE(this,e).get(e)}function F1t(e){return QE(this,e).has(e)}function M1t(e,t){var n=QE(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function kc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}kc.prototype.clear=V1t;kc.prototype.delete=T1t;kc.prototype.get=N1t;kc.prototype.has=F1t;kc.prototype.set=M1t;var O1t=200;function z1t(e,t){var n=this.__data__;if(n instanceof Sc){var r=n.__data__;if(!Fw||r.length<O1t-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new kc(r)}return n.set(e,t),this.size=n.size,this}function Cl(e){var t=this.__data__=new Sc(e);this.size=t.size}Cl.prototype.clear=P3t;Cl.prototype.delete=j3t;Cl.prototype.get=H3t;Cl.prototype.has=J3t;Cl.prototype.set=z1t;var P1t=function(){try{var e=Ph(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();const cW=P1t;function $J(e,t,n){t=="__proto__"&&cW?cW(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function QN(e,t,n){(n!==void 0&&!_Z(e[t],n)||n===void 0&&!(t in e))&&$J(e,t,n)}function j1t(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[++i];if(n(o[l],l,o)===!1)break}return t}}var H1t=j1t();const wxe=H1t;var Zxe=typeof Lo=="object"&&Lo&&!Lo.nodeType&&Lo,yee=Zxe&&typeof Ro=="object"&&Ro&&!Ro.nodeType&&Ro,J1t=yee&&yee.exports===Zxe,vee=J1t?Os.Buffer:void 0;vee&&vee.allocUnsafe;function B1t(e,t){return e.slice()}var K1t=Os.Uint8Array;const dW=K1t;function D1t(e){var t=new e.constructor(e.byteLength);return new dW(t).set(new dW(e)),t}function A1t(e,t){var n=D1t(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}function U1t(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var xee=Object.create,$1t=function(){function e(){}return function(t){if(!Xa(t))return{};if(xee)return xee(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const Q1t=$1t;function Sxe(e,t){return function(n){return e(t(n))}}var q1t=Sxe(Object.getPrototypeOf,Object);const kxe=q1t;var eEt=Object.prototype;function QJ(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||eEt;return e===n}function tEt(e){return typeof e.constructor=="function"&&!QJ(e)?Q1t(kxe(e)):{}}function nf(e){return e!=null&&typeof e=="object"}var nEt="[object Arguments]";function wee(e){return nf(e)&&Oh(e)==nEt}var _xe=Object.prototype,rEt=_xe.hasOwnProperty,iEt=_xe.propertyIsEnumerable,oEt=wee(function(){return arguments}())?wee:function(e){return nf(e)&&rEt.call(e,"callee")&&!iEt.call(e,"callee")};const fW=oEt;var aEt=Array.isArray;const Bo=aEt;var sEt=9007199254740991;function qJ(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=sEt}function jb(e){return e!=null&&qJ(e.length)&&!UJ(e)}function lEt(e){return nf(e)&&jb(e)}function uEt(){return!1}var Gxe=typeof Lo=="object"&&Lo&&!Lo.nodeType&&Lo,Zee=Gxe&&typeof Ro=="object"&&Ro&&!Ro.nodeType&&Ro,cEt=Zee&&Zee.exports===Gxe,See=cEt?Os.Buffer:void 0,dEt=See?See.isBuffer:void 0,fEt=dEt||uEt;const pW=fEt;var pEt="[object Object]",hEt=Function.prototype,mEt=Object.prototype,Ixe=hEt.toString,gEt=mEt.hasOwnProperty,bEt=Ixe.call(Object);function yEt(e){if(!nf(e)||Oh(e)!=pEt)return!1;var t=kxe(e);if(t===null)return!0;var n=gEt.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Ixe.call(n)==bEt}var vEt="[object Arguments]",xEt="[object Array]",wEt="[object Boolean]",ZEt="[object Date]",SEt="[object Error]",kEt="[object Function]",_Et="[object Map]",GEt="[object Number]",IEt="[object Object]",WEt="[object RegExp]",EEt="[object Set]",XEt="[object String]",LEt="[object WeakMap]",REt="[object ArrayBuffer]",CEt="[object DataView]",VEt="[object Float32Array]",YEt="[object Float64Array]",TEt="[object Int8Array]",NEt="[object Int16Array]",FEt="[object Int32Array]",MEt="[object Uint8Array]",OEt="[object Uint8ClampedArray]",zEt="[object Uint16Array]",PEt="[object Uint32Array]",hn={};hn[VEt]=hn[YEt]=hn[TEt]=hn[NEt]=hn[FEt]=hn[MEt]=hn[OEt]=hn[zEt]=hn[PEt]=!0;hn[vEt]=hn[xEt]=hn[REt]=hn[wEt]=hn[CEt]=hn[ZEt]=hn[SEt]=hn[kEt]=hn[_Et]=hn[GEt]=hn[IEt]=hn[WEt]=hn[EEt]=hn[XEt]=hn[LEt]=!1;function jEt(e){return nf(e)&&qJ(e.length)&&!!hn[Oh(e)]}function HEt(e){return function(t){return e(t)}}var Wxe=typeof Lo=="object"&&Lo&&!Lo.nodeType&&Lo,wx=Wxe&&typeof Ro=="object"&&Ro&&!Ro.nodeType&&Ro,JEt=wx&&wx.exports===Wxe,CC=JEt&&vxe.process,BEt=function(){try{var e=wx&&wx.require&&wx.require("util").types;return e||CC&&CC.binding&&CC.binding("util")}catch(t){}}();const kee=BEt;var _ee=kee&&kee.isTypedArray,KEt=_ee?HEt(_ee):jEt;const eB=KEt;function qN(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var DEt=Object.prototype,AEt=DEt.hasOwnProperty;function UEt(e,t,n){var r=e[t];(!(AEt.call(e,t)&&_Z(r,n))||n===void 0&&!(t in e))&&$J(e,t,n)}function $Et(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=void 0;l===void 0&&(l=e[s]),i?$J(n,s,l):UEt(n,s,l)}return n}function QEt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var qEt=9007199254740991,eXt=/^(?:0|[1-9]\d*)$/;function tB(e,t){var n=typeof e;return t=t!=null?t:qEt,!!t&&(n=="number"||n!="symbol"&&eXt.test(e))&&e>-1&&e%1==0&&e<t}var tXt=Object.prototype,nXt=tXt.hasOwnProperty;function Exe(e,t){var n=Bo(e),r=!n&&fW(e),i=!n&&!r&&pW(e),o=!n&&!r&&!i&&eB(e),a=n||r||i||o,s=a?QEt(e.length,String):[],l=s.length;for(var u in e)(t||nXt.call(e,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||tB(u,l)))&&s.push(u);return s}function rXt(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var iXt=Object.prototype,oXt=iXt.hasOwnProperty;function aXt(e){if(!Xa(e))return rXt(e);var t=QJ(e),n=[];for(var r in e)r=="constructor"&&(t||!oXt.call(e,r))||n.push(r);return n}function Xxe(e){return jb(e)?Exe(e,!0):aXt(e)}function sXt(e){return $Et(e,Xxe(e))}function lXt(e,t,n,r,i,o,a){var s=qN(e,n),l=qN(t,n),u=a.get(l);if(u){QN(e,n,u);return}var c=o?o(s,l,n+"",e,t,a):void 0,d=c===void 0;if(d){var f=Bo(l),h=!f&&pW(l),m=!f&&!h&&eB(l);c=l,f||h||m?Bo(s)?c=s:lEt(s)?c=U1t(s):h?(d=!1,c=B1t(l)):m?(d=!1,c=A1t(l)):c=[]:yEt(l)||fW(l)?(c=s,fW(s)?c=sXt(s):(!Xa(s)||UJ(s))&&(c=tEt(l))):d=!1}d&&(a.set(l,c),i(c,l,r,o,a),a.delete(l)),QN(e,n,c)}function Lxe(e,t,n,r,i){e!==t&&wxe(t,function(o,a){if(i||(i=new Cl),Xa(o))lXt(e,t,a,n,Lxe,r,i);else{var s=r?r(qN(e,a),o,a+"",e,t,i):void 0;s===void 0&&(s=o),QN(e,a,s)}},Xxe)}function qE(e){return e}function uXt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Gee=Math.max;function cXt(e,t,n){return t=Gee(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Gee(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),uXt(e,this,s)}}function dXt(e){return function(){return e}}var fXt=cW?function(e,t){return cW(e,"toString",{configurable:!0,enumerable:!1,value:dXt(t),writable:!0})}:qE;const pXt=fXt;var hXt=800,mXt=16,gXt=Date.now;function bXt(e){var t=0,n=0;return function(){var r=gXt(),i=mXt-(r-n);if(n=r,i>0){if(++t>=hXt)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var yXt=bXt(pXt);const vXt=yXt;function xXt(e,t){return vXt(cXt(e,t,qE),e+"")}function wXt(e,t,n){if(!Xa(n))return!1;var r=typeof t;return(r=="number"?jb(n)&&tB(t,n.length):r=="string"&&t in n)?_Z(n[t],e):!1}function ZXt(e){return xXt(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,a&&wXt(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t})}var SXt=ZXt(function(e,t,n){Lxe(e,t,n)});const vo=SXt;var GZ=function(e){var t=e.zDepth,n=e.radius,r=e.background,i=e.children,o=e.styles,a=o===void 0?{}:o,s=tt(vo({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+t*4+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":t===1});return x.createElement("div",{style:s.wrap},x.createElement("div",{style:s.bg}),x.createElement("div",{style:s.content},i))};GZ.propTypes={background:fe.string,zDepth:fe.oneOf([0,1,2,3,4,5]),radius:fe.number,styles:fe.object};GZ.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var kXt=function(){return Os.Date.now()};const VC=kXt;var _Xt=/\s/;function GXt(e){for(var t=e.length;t--&&_Xt.test(e.charAt(t)););return t}var IXt=/^\s+/;function WXt(e){return e&&e.slice(0,GXt(e)+1).replace(IXt,"")}var EXt="[object Symbol]";function eX(e){return typeof e=="symbol"||nf(e)&&Oh(e)==EXt}var Iee=NaN,XXt=/^[-+]0x[0-9a-f]+$/i,LXt=/^0b[01]+$/i,RXt=/^0o[0-7]+$/i,CXt=parseInt;function Wee(e){if(typeof e=="number")return e;if(eX(e))return Iee;if(Xa(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Xa(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=WXt(e);var n=LXt.test(e);return n||RXt.test(e)?CXt(e.slice(2),n?2:8):XXt.test(e)?Iee:+e}var VXt="Expected a function",YXt=Math.max,TXt=Math.min;function Rxe(e,t,n){var r,i,o,a,s,l,u=0,c=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(VXt);t=Wee(t)||0,Xa(n)&&(c=!!n.leading,d="maxWait"in n,o=d?YXt(Wee(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f);function h(R){var I=r,E=i;return r=i=void 0,u=R,a=e.apply(E,I),a}function m(R){return u=R,s=setTimeout(v,t),c?h(R):a}function g(R){var I=R-l,E=R-u,X=t-I;return d?TXt(X,o-E):X}function y(R){var I=R-l,E=R-u;return l===void 0||I>=t||I<0||d&&E>=o}function v(){var R=VC();if(y(R))return w(R);s=setTimeout(v,g(R))}function w(R){return s=void 0,f&&r?h(R):(r=i=void 0,a)}function Z(){s!==void 0&&clearTimeout(s),u=0,r=l=i=s=void 0}function k(){return s===void 0?a:w(VC())}function _(){var R=VC(),I=y(R);if(r=arguments,i=this,l=R,I){if(s===void 0)return m(l);if(d)return clearTimeout(s),s=setTimeout(v,t),h(l)}return s===void 0&&(s=setTimeout(v,t)),a}return _.cancel=Z,_.flush=k,_}var NXt="Expected a function";function FXt(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(NXt);return Xa(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Rxe(e,t,{leading:r,maxWait:t,trailing:i})}var MXt=function(e,t,n){var r=n.getBoundingClientRect(),i=r.width,o=r.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,s=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,l=a-(n.getBoundingClientRect().left+window.pageXOffset),u=s-(n.getBoundingClientRect().top+window.pageYOffset);l<0?l=0:l>i&&(l=i),u<0?u=0:u>o&&(u=o);var c=l/i,d=1-u/o;return{h:t.h,s:c,v:d,a:t.a,source:"hsv"}},OXt=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function zXt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PXt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function jXt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var tX=function(e){jXt(t,e);function t(n){zXt(this,t);var r=PXt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r.handleChange=function(i){typeof r.props.onChange=="function"&&r.throttle(r.props.onChange,MXt(i,r.props.hsl,r.container),i)},r.handleMouseDown=function(i){r.handleChange(i);var o=r.getContainerRenderWindow();o.addEventListener("mousemove",r.handleChange),o.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.throttle=FXt(function(i,o,a){i(o,a)},50),r}return OXt(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var n=this.container,r=window;!r.document.contains(n)&&r.parent!==r;)r=r.parent;return r}},{key:"unbindEventListeners",value:function(){var n=this.getContainerRenderWindow();n.removeEventListener("mousemove",this.handleChange),n.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,r=this.props.style||{},i=r.color,o=r.white,a=r.black,s=r.pointer,l=r.circle,u=tt({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:i,white:o,black:a,pointer:s,circle:l}},{custom:!!this.props.style});return x.createElement("div",{style:u.color,ref:function(c){return n.container=c},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},x.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),x.createElement("div",{style:u.white,className:"saturation-white"},x.createElement("div",{style:u.black,className:"saturation-black"}),x.createElement("div",{style:u.pointer},this.props.pointer?x.createElement(this.props.pointer,this.props):x.createElement("div",{style:u.circle}))))}}]),t}(G.PureComponent||G.Component);function HXt(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var JXt=Sxe(Object.keys,Object);const BXt=JXt;var KXt=Object.prototype,DXt=KXt.hasOwnProperty;function AXt(e){if(!QJ(e))return BXt(e);var t=[];for(var n in Object(e))DXt.call(e,n)&&n!="constructor"&&t.push(n);return t}function nB(e){return jb(e)?Exe(e):AXt(e)}function UXt(e,t){return e&&wxe(e,t,nB)}function $Xt(e,t){return function(n,r){if(n==null)return n;if(!jb(n))return e(n,r);for(var i=n.length,o=-1,a=Object(n);++o<i&&r(a[o],o,a)!==!1;);return n}}var QXt=$Xt(UXt);const Cxe=QXt;function qXt(e){return typeof e=="function"?e:qE}function eLt(e,t){var n=Bo(e)?HXt:Cxe;return n(e,qXt(t))}function hW(e){return hW=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hW(e)}var tLt=/^\s+/,nLt=/\s+$/;function Ne(e,t){if(e=e||"",t=t||{},e instanceof Ne)return e;if(!(this instanceof Ne))return new Ne(e,t);var n=rLt(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}Ne.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,n,r,i,o,a;return t=e.r/255,n=e.g/255,r=e.b/255,t<=.03928?i=t/12.92:i=Math.pow((t+.055)/1.055,2.4),n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),.2126*i+.7152*o+.0722*a},setAlpha:function(e){return this._a=Vxe(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=Xee(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=Xee(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),r=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=Eee(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=Eee(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),r=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return Lee(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return sLt(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Zn(this._r,255)*100)+"%",g:Math.round(Zn(this._g,255)*100)+"%",b:Math.round(Zn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Zn(this._r,255)*100)+"%, "+Math.round(Zn(this._g,255)*100)+"%, "+Math.round(Zn(this._b,255)*100)+"%)":"rgba("+Math.round(Zn(this._r,255)*100)+"%, "+Math.round(Zn(this._g,255)*100)+"%, "+Math.round(Zn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:vLt[Lee(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+Ree(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=Ne(e);n="#"+Ree(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0,i=!t&&r&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return i?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return Ne(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(dLt,arguments)},brighten:function(){return this._applyModification(fLt,arguments)},darken:function(){return this._applyModification(pLt,arguments)},desaturate:function(){return this._applyModification(lLt,arguments)},saturate:function(){return this._applyModification(uLt,arguments)},greyscale:function(){return this._applyModification(cLt,arguments)},spin:function(){return this._applyModification(hLt,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(bLt,arguments)},complement:function(){return this._applyCombination(mLt,arguments)},monochromatic:function(){return this._applyCombination(yLt,arguments)},splitcomplement:function(){return this._applyCombination(gLt,arguments)},triad:function(){return this._applyCombination(Cee,[3])},tetrad:function(){return this._applyCombination(Cee,[4])}};Ne.fromRatio=function(e,t){if(hW(e)=="object"){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==="a"?n[r]=e[r]:n[r]=zv(e[r]));e=n}return Ne(e,t)};function rLt(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,a=!1,s=!1;return typeof e=="string"&&(e=SLt(e)),hW(e)=="object"&&(xu(e.r)&&xu(e.g)&&xu(e.b)?(t=iLt(e.r,e.g,e.b),a=!0,s=String(e.r).substr(-1)==="%"?"prgb":"rgb"):xu(e.h)&&xu(e.s)&&xu(e.v)?(r=zv(e.s),i=zv(e.v),t=aLt(e.h,r,i),a=!0,s="hsv"):xu(e.h)&&xu(e.s)&&xu(e.l)&&(r=zv(e.s),o=zv(e.l),t=oLt(e.h,r,o),a=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=Vxe(n),{ok:a,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}function iLt(e,t,n){return{r:Zn(e,255)*255,g:Zn(t,255)*255,b:Zn(n,255)*255}}function Eee(e,t,n){e=Zn(e,255),t=Zn(t,255),n=Zn(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o,a,s=(r+i)/2;if(r==i)o=a=0;else{var l=r-i;switch(a=s>.5?l/(2-r-i):l/(r+i),r){case e:o=(t-n)/l+(t<n?6:0);break;case t:o=(n-e)/l+2;break;case n:o=(e-t)/l+4;break}o/=6}return{h:o,s:a,l:s}}function oLt(e,t,n){var r,i,o;e=Zn(e,360),t=Zn(t,100),n=Zn(n,100);function a(u,c,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?u+(c-u)*6*d:d<1/2?c:d<2/3?u+(c-u)*(2/3-d)*6:u}if(t===0)r=i=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=a(l,s,e+1/3),i=a(l,s,e),o=a(l,s,e-1/3)}return{r:r*255,g:i*255,b:o*255}}function Xee(e,t,n){e=Zn(e,255),t=Zn(t,255),n=Zn(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o,a,s=r,l=r-i;if(a=r===0?0:l/r,r==i)o=0;else{switch(r){case e:o=(t-n)/l+(t<n?6:0);break;case t:o=(n-e)/l+2;break;case n:o=(e-t)/l+4;break}o/=6}return{h:o,s:a,v:s}}function aLt(e,t,n){e=Zn(e,360)*6,t=Zn(t,100),n=Zn(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=r%6,u=[n,a,o,o,s,n][l],c=[s,n,n,a,o,o][l],d=[o,o,s,n,n,a][l];return{r:u*255,g:c*255,b:d*255}}function Lee(e,t,n,r){var i=[ds(Math.round(e).toString(16)),ds(Math.round(t).toString(16)),ds(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function sLt(e,t,n,r,i){var o=[ds(Math.round(e).toString(16)),ds(Math.round(t).toString(16)),ds(Math.round(n).toString(16)),ds(Yxe(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function Ree(e,t,n,r){var i=[ds(Yxe(r)),ds(Math.round(e).toString(16)),ds(Math.round(t).toString(16)),ds(Math.round(n).toString(16))];return i.join("")}Ne.equals=function(e,t){return!e||!t?!1:Ne(e).toRgbString()==Ne(t).toRgbString()};Ne.random=function(){return Ne.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function lLt(e,t){t=t===0?0:t||10;var n=Ne(e).toHsl();return n.s-=t/100,n.s=nX(n.s),Ne(n)}function uLt(e,t){t=t===0?0:t||10;var n=Ne(e).toHsl();return n.s+=t/100,n.s=nX(n.s),Ne(n)}function cLt(e){return Ne(e).desaturate(100)}function dLt(e,t){t=t===0?0:t||10;var n=Ne(e).toHsl();return n.l+=t/100,n.l=nX(n.l),Ne(n)}function fLt(e,t){t=t===0?0:t||10;var n=Ne(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),Ne(n)}function pLt(e,t){t=t===0?0:t||10;var n=Ne(e).toHsl();return n.l-=t/100,n.l=nX(n.l),Ne(n)}function hLt(e,t){var n=Ne(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,Ne(n)}function mLt(e){var t=Ne(e).toHsl();return t.h=(t.h+180)%360,Ne(t)}function Cee(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Ne(e).toHsl(),r=[Ne(e)],i=360/t,o=1;o<t;o++)r.push(Ne({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function gLt(e){var t=Ne(e).toHsl(),n=t.h;return[Ne(e),Ne({h:(n+72)%360,s:t.s,l:t.l}),Ne({h:(n+216)%360,s:t.s,l:t.l})]}function bLt(e,t,n){t=t||6,n=n||30;var r=Ne(e).toHsl(),i=360/n,o=[Ne(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(Ne(r));return o}function yLt(e,t){t=t||6;for(var n=Ne(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(Ne({h:r,s:i,v:o})),o=(o+s)%1;return a}Ne.mix=function(e,t,n){n=n===0?0:n||50;var r=Ne(e).toRgb(),i=Ne(t).toRgb(),o=n/100,a={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return Ne(a)};Ne.readability=function(e,t){var n=Ne(e),r=Ne(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};Ne.isReadable=function(e,t,n){var r=Ne.readability(e,t),i,o;switch(o=!1,i=kLt(n),i.level+i.size){case"AAsmall":case"AAAlarge":o=r>=4.5;break;case"AAlarge":o=r>=3;break;case"AAAsmall":o=r>=7;break}return o};Ne.mostReadable=function(e,t,n){var r=null,i=0,o,a,s,l;n=n||{},a=n.includeFallbackColors,s=n.level,l=n.size;for(var u=0;u<t.length;u++)o=Ne.readability(e,t[u]),o>i&&(i=o,r=Ne(t[u]));return Ne.isReadable(e,r,{level:s,size:l})||!a?r:(n.includeFallbackColors=!1,Ne.mostReadable(e,["#fff","#000"],n))};var eF=Ne.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},vLt=Ne.hexNames=xLt(eF);function xLt(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Vxe(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Zn(e,t){wLt(e)&&(e="100%");var n=ZLt(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function nX(e){return Math.min(1,Math.max(0,e))}function wo(e){return parseInt(e,16)}function wLt(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function ZLt(e){return typeof e=="string"&&e.indexOf("%")!=-1}function ds(e){return e.length==1?"0"+e:""+e}function zv(e){return e<=1&&(e=e*100+"%"),e}function Yxe(e){return Math.round(parseFloat(e)*255).toString(16)}function Vee(e){return wo(e)/255}var Ja=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function xu(e){return!!Ja.CSS_UNIT.exec(e)}function SLt(e){e=e.replace(tLt,"").replace(nLt,"").toLowerCase();var t=!1;if(eF[e])e=eF[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Ja.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=Ja.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Ja.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=Ja.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Ja.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=Ja.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Ja.hex8.exec(e))?{r:wo(n[1]),g:wo(n[2]),b:wo(n[3]),a:Vee(n[4]),format:t?"name":"hex8"}:(n=Ja.hex6.exec(e))?{r:wo(n[1]),g:wo(n[2]),b:wo(n[3]),format:t?"name":"hex"}:(n=Ja.hex4.exec(e))?{r:wo(n[1]+""+n[1]),g:wo(n[2]+""+n[2]),b:wo(n[3]+""+n[3]),a:Vee(n[4]+""+n[4]),format:t?"name":"hex8"}:(n=Ja.hex3.exec(e))?{r:wo(n[1]+""+n[1]),g:wo(n[2]+""+n[2]),b:wo(n[3]+""+n[3]),format:t?"name":"hex"}:!1}function kLt(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:t,size:n}}var Yee=function(e){var t=["r","g","b","a","h","s","l","v"],n=0,r=0;return eLt(t,function(i){if(e[i]&&(n+=1,isNaN(e[i])||(r+=1),i==="s"||i==="l")){var o=/^\d+%$/;o.test(e[i])&&(r+=1)}}),n===r?e:!1},Pv=function(e,t){var n=e.hex?Ne(e.hex):Ne(e),r=n.toHsl(),i=n.toHsv(),o=n.toRgb(),a=n.toHex();r.s===0&&(r.h=t||0,i.h=t||0);var s=a==="000000"&&o.a===0;return{hsl:r,hex:s?"transparent":"#"+a,rgb:o,hsv:i,oldHue:e.h||t||r.h,source:e.source}},Wf=function(e){if(e==="transparent")return!0;var t=String(e).charAt(0)==="#"?1:0;return e.length!==4+t&&e.length<7+t&&Ne(e).isValid()},rB=function(e){if(!e)return"#fff";var t=Pv(e);if(t.hex==="transparent")return"rgba(0,0,0,0.4)";var n=(t.rgb.r*299+t.rgb.g*587+t.rgb.b*114)/1e3;return n>=128?"#000":"#fff"},YC=function(e,t){var n=e.replace("","");return Ne(t+" ("+n+")")._ok},ev=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_Lt=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function GLt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ILt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function WLt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var xo=function(e){var t=function(n){WLt(r,n);function r(i){GLt(this,r);var o=ILt(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return o.handleChange=function(a,s){var l=Yee(a);if(l){var u=Pv(a,a.h||o.state.oldHue);o.setState(u),o.props.onChangeComplete&&o.debounce(o.props.onChangeComplete,u,s),o.props.onChange&&o.props.onChange(u,s)}},o.handleSwatchHover=function(a,s){var l=Yee(a);if(l){var u=Pv(a,a.h||o.state.oldHue);o.props.onSwatchHover&&o.props.onSwatchHover(u,s)}},o.state=ev({},Pv(i.color,0)),o.debounce=Rxe(function(a,s,l){a(s,l)},100),o}return _Lt(r,[{key:"render",value:function(){var i={};return this.props.onSwatchHover&&(i.onSwatchHover=this.handleSwatchHover),x.createElement(e,ev({},this.props,this.state,{onChange:this.handleChange},i))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return ev({},Pv(i.color,o.oldHue))}}]),r}(G.PureComponent||G.Component);return t.propTypes=ev({},e.propTypes),t.defaultProps=ev({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t},ELt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XLt=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function LLt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tee(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function RLt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var CLt=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){RLt(r,n);function r(){var i,o,a,s;LLt(this,r);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return s=(o=(a=Tee(this,(i=r.__proto__||Object.getPrototypeOf(r)).call.apply(i,[this].concat(u))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},o),Tee(a,s)}return XLt(r,[{key:"render",value:function(){return x.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},x.createElement(e,ELt({},this.props,this.state)))}}]),r}(x.Component)},Nee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VLt=13,YLt=function(e){var t=e.color,n=e.style,r=e.onClick,i=r===void 0?function(){}:r,o=e.onHover,a=e.title,s=a===void 0?t:a,l=e.children,u=e.focus,c=e.focusStyle,d=c===void 0?{}:c,f=t==="transparent",h=tt({default:{swatch:Nee({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,u?d:{})}}),m=function(w){return i(t,w)},g=function(w){return w.keyCode===VLt&&i(t,w)},y=function(w){return o(t,w)},v={};return o&&(v.onMouseOver=y),x.createElement("div",Nee({style:h.swatch,onClick:m,title:s,tabIndex:0,onKeyDown:g},v),l,f&&x.createElement(zb,{borderRadius:h.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const jh=CLt(YLt);var TLt=function(e){var t=e.direction,n=tt({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:t==="vertical"});return x.createElement("div",{style:n.picker})},NLt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Txe=function(e){var t=e.rgb,n=e.hsl,r=e.width,i=e.height,o=e.onChange,a=e.direction,s=e.style,l=e.renderers,u=e.pointer,c=e.className,d=c===void 0?"":c,f=tt({default:{picker:{position:"relative",width:r,height:i},alpha:{radius:"2px",style:s}}});return x.createElement("div",{style:f.picker,className:"alpha-picker "+d},x.createElement(AJ,NLt({},f.alpha,{rgb:t,hsl:n,pointer:u,renderers:l,onChange:o,direction:a})))};Txe.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:TLt};xo(Txe);function Nxe(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var FLt="__lodash_hash_undefined__";function MLt(e){return this.__data__.set(e,FLt),this}function OLt(e){return this.__data__.has(e)}function mW(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new kc;++t<n;)this.add(e[t])}mW.prototype.add=mW.prototype.push=MLt;mW.prototype.has=OLt;function zLt(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function PLt(e,t){return e.has(t)}var jLt=1,HLt=2;function Fxe(e,t,n,r,i,o){var a=n&jLt,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(e),c=o.get(t);if(u&&c)return u==t&&c==e;var d=-1,f=!0,h=n&HLt?new mW:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var m=e[d],g=t[d];if(r)var y=a?r(g,m,d,t,e,o):r(m,g,d,e,t,o);if(y!==void 0){if(y)continue;f=!1;break}if(h){if(!zLt(t,function(v,w){if(!PLt(h,w)&&(m===v||i(m,v,n,r,o)))return h.push(w)})){f=!1;break}}else if(!(m===g||i(m,g,n,r,o))){f=!1;break}}return o.delete(e),o.delete(t),f}function JLt(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function BLt(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var KLt=1,DLt=2,ALt="[object Boolean]",ULt="[object Date]",$Lt="[object Error]",QLt="[object Map]",qLt="[object Number]",eRt="[object RegExp]",tRt="[object Set]",nRt="[object String]",rRt="[object Symbol]",iRt="[object ArrayBuffer]",oRt="[object DataView]",Fee=tf?tf.prototype:void 0,TC=Fee?Fee.valueOf:void 0;function aRt(e,t,n,r,i,o,a){switch(n){case oRt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case iRt:return!(e.byteLength!=t.byteLength||!o(new dW(e),new dW(t)));case ALt:case ULt:case qLt:return _Z(+e,+t);case $Lt:return e.name==t.name&&e.message==t.message;case eRt:case nRt:return e==t+"";case QLt:var s=JLt;case tRt:var l=r&KLt;if(s||(s=BLt),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=DLt,a.set(e,t);var c=Fxe(s(e),s(t),r,i,o,a);return a.delete(e),c;case rRt:if(TC)return TC.call(e)==TC.call(t)}return!1}function sRt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function lRt(e,t,n){var r=t(e);return Bo(e)?r:sRt(r,n(e))}function uRt(e,t){for(var n=-1,r=e==null?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function cRt(){return[]}var dRt=Object.prototype,fRt=dRt.propertyIsEnumerable,Mee=Object.getOwnPropertySymbols,pRt=Mee?function(e){return e==null?[]:(e=Object(e),uRt(Mee(e),function(t){return fRt.call(e,t)}))}:cRt;const hRt=pRt;function Oee(e){return lRt(e,nB,hRt)}var mRt=1,gRt=Object.prototype,bRt=gRt.hasOwnProperty;function yRt(e,t,n,r,i,o){var a=n&mRt,s=Oee(e),l=s.length,u=Oee(t),c=u.length;if(l!=c&&!a)return!1;for(var d=l;d--;){var f=s[d];if(!(a?f in t:bRt.call(t,f)))return!1}var h=o.get(e),m=o.get(t);if(h&&m)return h==t&&m==e;var g=!0;o.set(e,t),o.set(t,e);for(var y=a;++d<l;){f=s[d];var v=e[f],w=t[f];if(r)var Z=a?r(w,v,f,t,e,o):r(v,w,f,e,t,o);if(!(Z===void 0?v===w||i(v,w,n,r,o):Z)){g=!1;break}y||(y=f=="constructor")}if(g&&!y){var k=e.constructor,_=t.constructor;k!=_&&"constructor"in e&&"constructor"in t&&!(typeof k=="function"&&k instanceof k&&typeof _=="function"&&_ instanceof _)&&(g=!1)}return o.delete(e),o.delete(t),g}var vRt=Ph(Os,"DataView");const tF=vRt;var xRt=Ph(Os,"Promise");const nF=xRt;var wRt=Ph(Os,"Set");const rF=wRt;var ZRt=Ph(Os,"WeakMap");const iF=ZRt;var zee="[object Map]",SRt="[object Object]",Pee="[object Promise]",jee="[object Set]",Hee="[object WeakMap]",Jee="[object DataView]",kRt=zh(tF),_Rt=zh(Fw),GRt=zh(nF),IRt=zh(rF),WRt=zh(iF),np=Oh;(tF&&np(new tF(new ArrayBuffer(1)))!=Jee||Fw&&np(new Fw)!=zee||nF&&np(nF.resolve())!=Pee||rF&&np(new rF)!=jee||iF&&np(new iF)!=Hee)&&(np=function(e){var t=Oh(e),n=t==SRt?e.constructor:void 0,r=n?zh(n):"";if(r)switch(r){case kRt:return Jee;case _Rt:return zee;case GRt:return Pee;case IRt:return jee;case WRt:return Hee}return t});const Bee=np;var ERt=1,Kee="[object Arguments]",Dee="[object Array]",Yk="[object Object]",XRt=Object.prototype,Aee=XRt.hasOwnProperty;function LRt(e,t,n,r,i,o){var a=Bo(e),s=Bo(t),l=a?Dee:Bee(e),u=s?Dee:Bee(t);l=l==Kee?Yk:l,u=u==Kee?Yk:u;var c=l==Yk,d=u==Yk,f=l==u;if(f&&pW(e)){if(!pW(t))return!1;a=!0,c=!1}if(f&&!c)return o||(o=new Cl),a||eB(e)?Fxe(e,t,n,r,i,o):aRt(e,t,l,n,r,i,o);if(!(n&ERt)){var h=c&&Aee.call(e,"__wrapped__"),m=d&&Aee.call(t,"__wrapped__");if(h||m){var g=h?e.value():e,y=m?t.value():t;return o||(o=new Cl),i(g,y,n,r,o)}}return f?(o||(o=new Cl),yRt(e,t,n,r,i,o)):!1}function iB(e,t,n,r,i){return e===t?!0:e==null||t==null||!nf(e)&&!nf(t)?e!==e&&t!==t:LRt(e,t,n,r,iB,i)}var RRt=1,CRt=2;function VRt(e,t,n,r){var i=n.length,o=i;if(e==null)return!o;for(e=Object(e);i--;){var a=n[i];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){a=n[i];var s=a[0],l=e[s],u=a[1];if(a[2]){if(l===void 0&&!(s in e))return!1}else{var c=new Cl,d;if(!(d===void 0?iB(u,l,RRt|CRt,r,c):d))return!1}}return!0}function Mxe(e){return e===e&&!Xa(e)}function YRt(e){for(var t=nB(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Mxe(i)]}return t}function Oxe(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function TRt(e){var t=YRt(e);return t.length==1&&t[0][2]?Oxe(t[0][0],t[0][1]):function(n){return n===e||VRt(n,e,t)}}var NRt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,FRt=/^\w*$/;function oB(e,t){if(Bo(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||eX(e)?!0:FRt.test(e)||!NRt.test(e)||t!=null&&e in Object(t)}var MRt="Expected a function";function aB(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(MRt);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(aB.Cache||kc),n}aB.Cache=kc;var ORt=500;function zRt(e){var t=aB(e,function(r){return n.size===ORt&&n.clear(),r}),n=t.cache;return t}var PRt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jRt=/\\(\\)?/g,HRt=zRt(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(PRt,function(n,r,i,o){t.push(i?o.replace(jRt,"$1"):r||n)}),t});const JRt=HRt;var Uee=tf?tf.prototype:void 0,$ee=Uee?Uee.toString:void 0;function zxe(e){if(typeof e=="string")return e;if(Bo(e))return Nxe(e,zxe)+"";if(eX(e))return $ee?$ee.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function BRt(e){return e==null?"":zxe(e)}function Pxe(e,t){return Bo(e)?e:oB(e,t)?[e]:JRt(BRt(e))}function rX(e){if(typeof e=="string"||eX(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function jxe(e,t){t=Pxe(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[rX(t[n++])];return n&&n==r?e:void 0}function KRt(e,t,n){var r=e==null?void 0:jxe(e,t);return r===void 0?n:r}function DRt(e,t){return e!=null&&t in Object(e)}function ARt(e,t,n){t=Pxe(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var a=rX(t[r]);if(!(o=e!=null&&n(e,a)))break;e=e[a]}return o||++r!=i?o:(i=e==null?0:e.length,!!i&&qJ(i)&&tB(a,i)&&(Bo(e)||fW(e)))}function URt(e,t){return e!=null&&ARt(e,t,DRt)}var $Rt=1,QRt=2;function qRt(e,t){return oB(e)&&Mxe(t)?Oxe(rX(e),t):function(n){var r=KRt(n,e);return r===void 0&&r===t?URt(n,e):iB(t,r,$Rt|QRt)}}function eCt(e){return function(t){return t==null?void 0:t[e]}}function tCt(e){return function(t){return jxe(t,e)}}function nCt(e){return oB(e)?eCt(rX(e)):tCt(e)}function rCt(e){return typeof e=="function"?e:e==null?qE:typeof e=="object"?Bo(e)?qRt(e[0],e[1]):TRt(e):nCt(e)}function iCt(e,t){var n=-1,r=jb(e)?Array(e.length):[];return Cxe(e,function(i,o,a){r[++n]=t(i,o,a)}),r}function Hh(e,t){var n=Bo(e)?Nxe:iCt;return n(e,rCt(t))}var oCt=function(e){var t=e.colors,n=e.onClick,r=e.onSwatchHover,i=tt({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return x.createElement("div",{style:i.swatches},Hh(t,function(o){return x.createElement(jh,{key:o,color:o,style:i.swatch,onClick:n,onHover:r,focusStyle:{boxShadow:"0 0 4px "+o}})}),x.createElement("div",{style:i.clear}))},sB=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,i=e.colors,o=e.width,a=e.triangle,s=e.styles,l=s===void 0?{}:s,u=e.className,c=u===void 0?"":u,d=r==="transparent",f=function(m,g){Wf(m)&&t({hex:m,source:"hex"},g)},h=tt(vo({default:{card:{width:o,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:rB(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},l),{"hide-triangle":a==="hide"});return x.createElement("div",{style:h.card,className:"block-picker "+c},x.createElement("div",{style:h.triangle}),x.createElement("div",{style:h.head},d&&x.createElement(zb,{borderRadius:"6px 6px 0 0"}),x.createElement("div",{style:h.label},r)),x.createElement("div",{style:h.body},x.createElement(oCt,{colors:i,onClick:f,onSwatchHover:n}),x.createElement(xt,{style:{input:h.input},value:r,onChange:f})))};sB.propTypes={width:fe.oneOfType([fe.string,fe.number]),colors:fe.arrayOf(fe.string),triangle:fe.oneOf(["top","hide"]),styles:fe.object};sB.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};xo(sB);var Gm={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},Im={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},Wm={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},Em={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},Xm={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},Lm={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},Rm={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Cm={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},Vm={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},jv={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},Ym={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},Tm={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},Nm={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},Fm={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},Mm={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},Om={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},zm={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},Pm={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},Hxe=function(e){var t=e.color,n=e.onClick,r=e.onSwatchHover,i=e.hover,o=e.active,a=e.circleSize,s=e.circleSpacing,l=tt({default:{swatch:{width:a,height:a,marginRight:s,marginBottom:s,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:i,active:o});return x.createElement("div",{style:l.swatch},x.createElement(jh,{style:l.Swatch,color:t,onClick:n,onHover:r,focusStyle:{boxShadow:l.Swatch.boxShadow+", 0 0 5px "+t}}))};Hxe.defaultProps={circleSize:28,circleSpacing:14};const aCt=DJ(Hxe);var lB=function(e){var t=e.width,n=e.onChange,r=e.onSwatchHover,i=e.colors,o=e.hex,a=e.circleSize,s=e.styles,l=s===void 0?{}:s,u=e.circleSpacing,c=e.className,d=c===void 0?"":c,f=tt(vo({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-u,marginBottom:-u}}},l)),h=function(m,g){return n({hex:m,source:"hex"},g)};return x.createElement("div",{style:f.card,className:"circle-picker "+d},Hh(i,function(m){return x.createElement(aCt,{key:m,color:m,onClick:h,onSwatchHover:r,active:o===m.toLowerCase(),circleSize:a,circleSpacing:u})}))};lB.propTypes={width:fe.oneOfType([fe.string,fe.number]),circleSize:fe.number,circleSpacing:fe.number,styles:fe.object};lB.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Gm[500],Im[500],Wm[500],Em[500],Xm[500],Lm[500],Rm[500],Cm[500],Vm[500],jv[500],Ym[500],Tm[500],Nm[500],Fm[500],Mm[500],Om[500],zm[500],Pm[500]],styles:{}};xo(lB);function Qee(e){return e===void 0}var Jxe={};Object.defineProperty(Jxe,"__esModule",{value:!0});var qee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sCt=x,ete=lCt(sCt);function lCt(e){return e&&e.__esModule?e:{default:e}}function uCt(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var Tk=24,cCt=Jxe.default=function(e){var t=e.fill,n=t===void 0?"currentColor":t,r=e.width,i=r===void 0?Tk:r,o=e.height,a=o===void 0?Tk:o,s=e.style,l=s===void 0?{}:s,u=uCt(e,["fill","width","height","style"]);return ete.default.createElement("svg",qee({viewBox:"0 0 "+Tk+" "+Tk,style:qee({fill:n,width:i,height:a},l)},u),ete.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},dCt=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function fCt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pCt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function hCt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Bxe=function(e){hCt(t,e);function t(n){fCt(this,t);var r=pCt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.toggleViews=function(){r.state.view==="hex"?r.setState({view:"rgb"}):r.state.view==="rgb"?r.setState({view:"hsl"}):r.state.view==="hsl"&&(r.props.hsl.a===1?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(i,o){i.hex?Wf(i.hex)&&r.props.onChange({hex:i.hex,source:"hex"},o):i.r||i.g||i.b?r.props.onChange({r:i.r||r.props.rgb.r,g:i.g||r.props.rgb.g,b:i.b||r.props.rgb.b,source:"rgb"},o):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},o)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),r.props.onChange({h:i.h||r.props.hsl.h,s:Number(Qee(i.s)?r.props.hsl.s:i.s),l:Number(Qee(i.l)?r.props.hsl.l:i.l),source:"hsl"},o))},r.showHighlight=function(i){i.currentTarget.style.background="#eee"},r.hideHighlight=function(i){i.currentTarget.style.background="transparent"},n.hsl.a!==1&&n.view==="hex"?r.state={view:"rgb"}:r.state={view:n.view},r}return dCt(t,[{key:"render",value:function(){var n=this,r=tt({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),i=void 0;return this.state.view==="hex"?i=x.createElement("div",{style:r.fields,className:"flexbox-fix"},x.createElement("div",{style:r.field},x.createElement(xt,{style:{input:r.input,label:r.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?i=x.createElement("div",{style:r.fields,className:"flexbox-fix"},x.createElement("div",{style:r.field},x.createElement(xt,{style:{input:r.input,label:r.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),x.createElement("div",{style:r.field},x.createElement(xt,{style:{input:r.input,label:r.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),x.createElement("div",{style:r.field},x.createElement(xt,{style:{input:r.input,label:r.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),x.createElement("div",{style:r.alpha},x.createElement(xt,{style:{input:r.input,label:r.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(i=x.createElement("div",{style:r.fields,className:"flexbox-fix"},x.createElement("div",{style:r.field},x.createElement(xt,{style:{input:r.input,label:r.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),x.createElement("div",{style:r.field},x.createElement(xt,{style:{input:r.input,label:r.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),x.createElement("div",{style:r.field},x.createElement(xt,{style:{input:r.input,label:r.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),x.createElement("div",{style:r.alpha},x.createElement(xt,{style:{input:r.input,label:r.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),x.createElement("div",{style:r.wrap,className:"flexbox-fix"},i,x.createElement("div",{style:r.toggle},x.createElement("div",{style:r.icon,onClick:this.toggleViews,ref:function(o){return n.icon=o}},x.createElement(cCt,{style:r.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(n,r){return n.hsl.a!==1&&r.view==="hex"?{view:"rgb"}:null}}]),t}(x.Component);Bxe.defaultProps={view:"hex"};var tte=function(){var e=tt({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return x.createElement("div",{style:e.picker})},mCt=function(){var e=tt({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return x.createElement("div",{style:e.picker})},uB=function(e){var t=e.width,n=e.onChange,r=e.disableAlpha,i=e.rgb,o=e.hsl,a=e.hsv,s=e.hex,l=e.renderers,u=e.styles,c=u===void 0?{}:u,d=e.className,f=d===void 0?"":d,h=e.defaultView,m=tt(vo({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},c),{disableAlpha:r});return x.createElement("div",{style:m.picker,className:"chrome-picker "+f},x.createElement("div",{style:m.saturation},x.createElement(tX,{style:m.Saturation,hsl:o,hsv:a,pointer:mCt,onChange:n})),x.createElement("div",{style:m.body},x.createElement("div",{style:m.controls,className:"flexbox-fix"},x.createElement("div",{style:m.color},x.createElement("div",{style:m.swatch},x.createElement("div",{style:m.active}),x.createElement(zb,{renderers:l}))),x.createElement("div",{style:m.toggles},x.createElement("div",{style:m.hue},x.createElement(Pb,{style:m.Hue,hsl:o,pointer:tte,onChange:n})),x.createElement("div",{style:m.alpha},x.createElement(AJ,{style:m.Alpha,rgb:i,hsl:o,pointer:tte,renderers:l,onChange:n})))),x.createElement(Bxe,{rgb:i,hsl:o,hex:s,view:h,onChange:n,disableAlpha:r})))};uB.propTypes={width:fe.oneOfType([fe.string,fe.number]),disableAlpha:fe.bool,styles:fe.object,defaultView:fe.oneOf(["hex","rgb","hsl"])};uB.defaultProps={width:225,disableAlpha:!1,styles:{}};xo(uB);var gCt=function(e){var t=e.color,n=e.onClick,r=n===void 0?function(){}:n,i=e.onSwatchHover,o=e.active,a=tt({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:rB(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:o,"color-#FFFFFF":t==="#FFFFFF",transparent:t==="transparent"});return x.createElement(jh,{style:a.color,color:t,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},x.createElement("div",{style:a.dot}))},bCt=function(e){var t=e.hex,n=e.rgb,r=e.onChange,i=tt({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),o=function(a,s){a.r||a.g||a.b?r({r:a.r||n.r,g:a.g||n.g,b:a.b||n.b,source:"rgb"},s):r({hex:a.hex,source:"hex"},s)};return x.createElement("div",{style:i.fields,className:"flexbox-fix"},x.createElement("div",{style:i.active}),x.createElement(xt,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"hex",value:t,onChange:o}),x.createElement(xt,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:n.r,onChange:o}),x.createElement(xt,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:n.g,onChange:o}),x.createElement(xt,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:n.b,onChange:o}))},cB=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.colors,i=e.hex,o=e.rgb,a=e.styles,s=a===void 0?{}:a,l=e.className,u=l===void 0?"":l,c=tt(vo({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},s)),d=function(f,h){f.hex?Wf(f.hex)&&t({hex:f.hex,source:"hex"},h):t(f,h)};return x.createElement(GZ,{style:c.Compact,styles:s},x.createElement("div",{style:c.compact,className:"compact-picker "+u},x.createElement("div",null,Hh(r,function(f){return x.createElement(gCt,{key:f,color:f,active:f.toLowerCase()===i,onClick:d,onSwatchHover:n})}),x.createElement("div",{style:c.clear})),x.createElement(bCt,{hex:i,rgb:o,onChange:d})))};cB.propTypes={colors:fe.arrayOf(fe.string),styles:fe.object};cB.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};xo(cB);var yCt=function(e){var t=e.hover,n=e.color,r=e.onClick,i=e.onSwatchHover,o={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=tt({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:o}},{hover:t});return x.createElement("div",{style:a.swatch},x.createElement(jh,{color:n,onClick:r,onHover:i,focusStyle:o}))};const vCt=DJ(yCt);var dB=function(e){var t=e.width,n=e.colors,r=e.onChange,i=e.onSwatchHover,o=e.triangle,a=e.styles,s=a===void 0?{}:a,l=e.className,u=l===void 0?"":l,c=tt(vo({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},s),{"hide-triangle":o==="hide","top-left-triangle":o==="top-left","top-right-triangle":o==="top-right","bottom-left-triangle":o==="bottom-left","bottom-right-triangle":o==="bottom-right"}),d=function(f,h){return r({hex:f,source:"hex"},h)};return x.createElement("div",{style:c.card,className:"github-picker "+u},x.createElement("div",{style:c.triangleShadow}),x.createElement("div",{style:c.triangle}),Hh(n,function(f){return x.createElement(vCt,{color:f,key:f,onClick:d,onSwatchHover:i})}))};dB.propTypes={width:fe.oneOfType([fe.string,fe.number]),colors:fe.arrayOf(fe.string),triangle:fe.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:fe.object};dB.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};xo(dB);var xCt=function(e){var t=e.direction,n=tt({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:t==="vertical"});return x.createElement("div",{style:n.picker})},wCt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fB=function(e){var t=e.width,n=e.height,r=e.onChange,i=e.hsl,o=e.direction,a=e.pointer,s=e.styles,l=s===void 0?{}:s,u=e.className,c=u===void 0?"":u,d=tt(vo({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}},l)),f=function(h){return r({a:1,h:h.h,l:.5,s:1})};return x.createElement("div",{style:d.picker,className:"hue-picker "+c},x.createElement(Pb,wCt({},d.hue,{hsl:i,pointer:a,onChange:f,direction:o})))};fB.propTypes={styles:fe.object};fB.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:xCt,styles:{}};xo(fB);var ZCt=function(e){var t=e.onChange,n=e.hex,r=e.rgb,i=e.styles,o=i===void 0?{}:i,a=e.className,s=a===void 0?"":a,l=tt(vo({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},o)),u=function(c,d){c.hex?Wf(c.hex)&&t({hex:c.hex,source:"hex"},d):(c.r||c.g||c.b)&&t({r:c.r||r.r,g:c.g||r.g,b:c.b||r.b,source:"rgb"},d)};return x.createElement(GZ,{styles:o},x.createElement("div",{style:l.material,className:"material-picker "+s},x.createElement(xt,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"hex",value:n,onChange:u}),x.createElement("div",{style:l.split,className:"flexbox-fix"},x.createElement("div",{style:l.third},x.createElement(xt,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:r.r,onChange:u})),x.createElement("div",{style:l.third},x.createElement(xt,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:r.g,onChange:u})),x.createElement("div",{style:l.third},x.createElement(xt,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:r.b,onChange:u})))))};xo(ZCt);var SCt=function(e){var t=e.onChange,n=e.rgb,r=e.hsv,i=e.hex,o=tt({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(s,l){s["#"]?Wf(s["#"])&&t({hex:s["#"],source:"hex"},l):s.r||s.g||s.b?t({r:s.r||n.r,g:s.g||n.g,b:s.b||n.b,source:"rgb"},l):(s.h||s.s||s.v)&&t({h:s.h||r.h,s:s.s||r.s,v:s.v||r.v,source:"hsv"},l)};return x.createElement("div",{style:o.fields},x.createElement(xt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"h",value:Math.round(r.h),onChange:a}),x.createElement(xt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"s",value:Math.round(r.s*100),onChange:a}),x.createElement(xt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"v",value:Math.round(r.v*100),onChange:a}),x.createElement("div",{style:o.divider}),x.createElement(xt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:n.r,onChange:a}),x.createElement(xt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:n.g,onChange:a}),x.createElement(xt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:n.b,onChange:a}),x.createElement("div",{style:o.divider}),x.createElement(xt,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"#",value:i.replace("#",""),onChange:a}),x.createElement("div",{style:o.fieldSymbols},x.createElement("div",{style:o.symbol},""),x.createElement("div",{style:o.symbol},"%"),x.createElement("div",{style:o.symbol},"%")))},kCt=function(e){var t=e.hsl,n=tt({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return x.createElement("div",{style:n.picker})},_Ct=function(){var e=tt({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return x.createElement("div",{style:e.pointer},x.createElement("div",{style:e.left},x.createElement("div",{style:e.leftInside})),x.createElement("div",{style:e.right},x.createElement("div",{style:e.rightInside})))},nte=function(e){var t=e.onClick,n=e.label,r=e.children,i=e.active,o=tt({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return x.createElement("div",{style:o.button,onClick:t},n||r)},GCt=function(e){var t=e.rgb,n=e.currentColor,r=tt({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return x.createElement("div",null,x.createElement("div",{style:r.label},"new"),x.createElement("div",{style:r.swatches},x.createElement("div",{style:r.new}),x.createElement("div",{style:r.current})),x.createElement("div",{style:r.label},"current"))},ICt=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function WCt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ECt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function XCt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var pB=function(e){XCt(t,e);function t(n){WCt(this,t);var r=ECt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.state={currentColor:n.hex},r}return ICt(t,[{key:"render",value:function(){var n=this.props,r=n.styles,i=r===void 0?{}:r,o=n.className,a=o===void 0?"":o,s=tt(vo({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},i));return x.createElement("div",{style:s.picker,className:"photoshop-picker "+a},x.createElement("div",{style:s.head},this.props.header),x.createElement("div",{style:s.body,className:"flexbox-fix"},x.createElement("div",{style:s.saturation},x.createElement(tX,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:kCt,onChange:this.props.onChange})),x.createElement("div",{style:s.hue},x.createElement(Pb,{direction:"vertical",hsl:this.props.hsl,pointer:_Ct,onChange:this.props.onChange})),x.createElement("div",{style:s.controls},x.createElement("div",{style:s.top,className:"flexbox-fix"},x.createElement("div",{style:s.previews},x.createElement(GCt,{rgb:this.props.rgb,currentColor:this.state.currentColor})),x.createElement("div",{style:s.actions},x.createElement(nte,{label:"OK",onClick:this.props.onAccept,active:!0}),x.createElement(nte,{label:"Cancel",onClick:this.props.onCancel}),x.createElement(SCt,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(x.Component);pB.propTypes={header:fe.string,styles:fe.object};pB.defaultProps={header:"Color Picker",styles:{}};xo(pB);var LCt=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,i=e.hex,o=e.disableAlpha,a=tt({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:o}),s=function(l,u){l.hex?Wf(l.hex)&&t({hex:l.hex,source:"hex"},u):l.r||l.g||l.b?t({r:l.r||n.r,g:l.g||n.g,b:l.b||n.b,a:n.a,source:"rgb"},u):l.a&&(l.a<0?l.a=0:l.a>100&&(l.a=100),l.a/=100,t({h:r.h,s:r.s,l:r.l,a:l.a,source:"rgb"},u))};return x.createElement("div",{style:a.fields,className:"flexbox-fix"},x.createElement("div",{style:a.double},x.createElement(xt,{style:{input:a.input,label:a.label},label:"hex",value:i.replace("#",""),onChange:s})),x.createElement("div",{style:a.single},x.createElement(xt,{style:{input:a.input,label:a.label},label:"r",value:n.r,onChange:s,dragLabel:"true",dragMax:"255"})),x.createElement("div",{style:a.single},x.createElement(xt,{style:{input:a.input,label:a.label},label:"g",value:n.g,onChange:s,dragLabel:"true",dragMax:"255"})),x.createElement("div",{style:a.single},x.createElement(xt,{style:{input:a.input,label:a.label},label:"b",value:n.b,onChange:s,dragLabel:"true",dragMax:"255"})),x.createElement("div",{style:a.alpha},x.createElement(xt,{style:{input:a.input,label:a.label},label:"a",value:Math.round(n.a*100),onChange:s,dragLabel:"true",dragMax:"100"})))},RCt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kxe=function(e){var t=e.colors,n=e.onClick,r=n===void 0?function(){}:n,i=e.onSwatchHover,o=tt({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),a=function(s,l){r({hex:s,source:"hex"},l)};return x.createElement("div",{style:o.colors,className:"flexbox-fix"},t.map(function(s){var l=typeof s=="string"?{color:s}:s,u=""+l.color+(l.title||"");return x.createElement("div",{key:u,style:o.swatchWrap},x.createElement(jh,RCt({},l,{style:o.swatch,onClick:a,onHover:i,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+l.color}})))}))};Kxe.propTypes={colors:fe.arrayOf(fe.oneOfType([fe.string,fe.shape({color:fe.string,title:fe.string})])).isRequired};var CCt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hB=function(e){var t=e.width,n=e.rgb,r=e.hex,i=e.hsv,o=e.hsl,a=e.onChange,s=e.onSwatchHover,l=e.disableAlpha,u=e.presetColors,c=e.renderers,d=e.styles,f=d===void 0?{}:d,h=e.className,m=h===void 0?"":h,g=tt(vo({default:CCt({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},f),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},f),{disableAlpha:l});return x.createElement("div",{style:g.picker,className:"sketch-picker "+m},x.createElement("div",{style:g.saturation},x.createElement(tX,{style:g.Saturation,hsl:o,hsv:i,onChange:a})),x.createElement("div",{style:g.controls,className:"flexbox-fix"},x.createElement("div",{style:g.sliders},x.createElement("div",{style:g.hue},x.createElement(Pb,{style:g.Hue,hsl:o,onChange:a})),x.createElement("div",{style:g.alpha},x.createElement(AJ,{style:g.Alpha,rgb:n,hsl:o,renderers:c,onChange:a}))),x.createElement("div",{style:g.color},x.createElement(zb,null),x.createElement("div",{style:g.activeColor}))),x.createElement(LCt,{rgb:n,hsl:o,hex:r,onChange:a,disableAlpha:l}),x.createElement(Kxe,{colors:u,onClick:a,onSwatchHover:s}))};hB.propTypes={disableAlpha:fe.bool,width:fe.oneOfType([fe.string,fe.number]),styles:fe.object};hB.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};const VCt=xo(hB);var tv=function(e){var t=e.hsl,n=e.offset,r=e.onClick,i=r===void 0?function(){}:r,o=e.active,a=e.first,s=e.last,l=tt({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+n*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:o,first:a,last:s}),u=function(c){return i({h:t.h,s:.5,l:n,source:"hsl"},c)};return x.createElement("div",{style:l.swatch,onClick:u})},YCt=function(e){var t=e.onClick,n=e.hsl,r=tt({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),i=.1;return x.createElement("div",{style:r.swatches},x.createElement("div",{style:r.swatch},x.createElement(tv,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<i&&Math.abs(n.s-.5)<i,onClick:t,first:!0})),x.createElement("div",{style:r.swatch},x.createElement(tv,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<i&&Math.abs(n.s-.5)<i,onClick:t})),x.createElement("div",{style:r.swatch},x.createElement(tv,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<i&&Math.abs(n.s-.5)<i,onClick:t})),x.createElement("div",{style:r.swatch},x.createElement(tv,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<i&&Math.abs(n.s-.5)<i,onClick:t})),x.createElement("div",{style:r.swatch},x.createElement(tv,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<i&&Math.abs(n.s-.5)<i,onClick:t,last:!0})),x.createElement("div",{style:r.clear}))},TCt=function(){var e=tt({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return x.createElement("div",{style:e.picker})},mB=function(e){var t=e.hsl,n=e.onChange,r=e.pointer,i=e.styles,o=i===void 0?{}:i,a=e.className,s=a===void 0?"":a,l=tt(vo({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},o));return x.createElement("div",{style:l.wrap||{},className:"slider-picker "+s},x.createElement("div",{style:l.hue},x.createElement(Pb,{style:l.Hue,hsl:t,pointer:r,onChange:n})),x.createElement("div",{style:l.swatches},x.createElement(YCt,{hsl:t,onClick:n})))};mB.propTypes={styles:fe.object};mB.defaultProps={pointer:TCt,styles:{}};xo(mB);var Dxe={};Object.defineProperty(Dxe,"__esModule",{value:!0});var rte=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NCt=x,ite=FCt(NCt);function FCt(e){return e&&e.__esModule?e:{default:e}}function MCt(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var Nk=24,OCt=Dxe.default=function(e){var t=e.fill,n=t===void 0?"currentColor":t,r=e.width,i=r===void 0?Nk:r,o=e.height,a=o===void 0?Nk:o,s=e.style,l=s===void 0?{}:s,u=MCt(e,["fill","width","height","style"]);return ite.default.createElement("svg",rte({viewBox:"0 0 "+Nk+" "+Nk,style:rte({fill:n,width:i,height:a},l)},u),ite.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},zCt=function(e){var t=e.color,n=e.onClick,r=n===void 0?function(){}:n,i=e.onSwatchHover,o=e.first,a=e.last,s=e.active,l=tt({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:rB(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:o,last:a,active:s,"color-#FFFFFF":t==="#FFFFFF",transparent:t==="transparent"});return x.createElement(jh,{color:t,style:l.color,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},x.createElement("div",{style:l.check},x.createElement(OCt,null)))},PCt=function(e){var t=e.onClick,n=e.onSwatchHover,r=e.group,i=e.active,o=tt({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return x.createElement("div",{style:o.group},Hh(r,function(a,s){return x.createElement(zCt,{key:a,color:a,active:a.toLowerCase()===i,first:s===0,last:s===r.length-1,onClick:t,onSwatchHover:n})}))},gB=function(e){var t=e.width,n=e.height,r=e.onChange,i=e.onSwatchHover,o=e.colors,a=e.hex,s=e.styles,l=s===void 0?{}:s,u=e.className,c=u===void 0?"":u,d=tt(vo({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},l)),f=function(h,m){return r({hex:h,source:"hex"},m)};return x.createElement("div",{style:d.picker,className:"swatches-picker "+c},x.createElement(GZ,null,x.createElement("div",{style:d.overflow},x.createElement("div",{style:d.body},Hh(o,function(h){return x.createElement(PCt,{key:h.toString(),group:h,active:a,onClick:f,onSwatchHover:i})}),x.createElement("div",{style:d.clear})))))};gB.propTypes={width:fe.oneOfType([fe.string,fe.number]),height:fe.oneOfType([fe.string,fe.number]),colors:fe.arrayOf(fe.arrayOf(fe.string)),styles:fe.object};gB.defaultProps={width:320,height:240,colors:[[Gm[900],Gm[700],Gm[500],Gm[300],Gm[100]],[Im[900],Im[700],Im[500],Im[300],Im[100]],[Wm[900],Wm[700],Wm[500],Wm[300],Wm[100]],[Em[900],Em[700],Em[500],Em[300],Em[100]],[Xm[900],Xm[700],Xm[500],Xm[300],Xm[100]],[Lm[900],Lm[700],Lm[500],Lm[300],Lm[100]],[Rm[900],Rm[700],Rm[500],Rm[300],Rm[100]],[Cm[900],Cm[700],Cm[500],Cm[300],Cm[100]],[Vm[900],Vm[700],Vm[500],Vm[300],Vm[100]],["#194D33",jv[700],jv[500],jv[300],jv[100]],[Ym[900],Ym[700],Ym[500],Ym[300],Ym[100]],[Tm[900],Tm[700],Tm[500],Tm[300],Tm[100]],[Nm[900],Nm[700],Nm[500],Nm[300],Nm[100]],[Fm[900],Fm[700],Fm[500],Fm[300],Fm[100]],[Mm[900],Mm[700],Mm[500],Mm[300],Mm[100]],[Om[900],Om[700],Om[500],Om[300],Om[100]],[zm[900],zm[700],zm[500],zm[300],zm[100]],[Pm[900],Pm[700],Pm[500],Pm[300],Pm[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};xo(gB);var bB=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,i=e.colors,o=e.width,a=e.triangle,s=e.styles,l=s===void 0?{}:s,u=e.className,c=u===void 0?"":u,d=tt(vo({default:{card:{width:o,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},l),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right"}),f=function(h,m){Wf(h)&&t({hex:h,source:"hex"},m)};return x.createElement("div",{style:d.card,className:"twitter-picker "+c},x.createElement("div",{style:d.triangleShadow}),x.createElement("div",{style:d.triangle}),x.createElement("div",{style:d.body},Hh(i,function(h,m){return x.createElement(jh,{key:m,color:h,hex:h,style:d.swatch,onClick:f,onHover:n,focusStyle:{boxShadow:"0 0 4px "+h}})}),x.createElement("div",{style:d.hash},"#"),x.createElement(xt,{label:null,style:{input:d.input},value:r.replace("#",""),onChange:f}),x.createElement("div",{style:d.clear})))};bB.propTypes={width:fe.oneOfType([fe.string,fe.number]),triangle:fe.oneOf(["hide","top-left","top-right"]),colors:fe.arrayOf(fe.string),styles:fe.object};bB.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};xo(bB);var yB=function(e){var t=tt({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(e.hsl.s*100)+"%, "+Math.round(e.hsl.l*100)+"%)"}}});return x.createElement("div",{style:t.picker})};yB.propTypes={hsl:fe.shape({h:fe.number,s:fe.number,l:fe.number,a:fe.number})};yB.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var vB=function(e){var t=tt({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return x.createElement("div",{style:t.picker})};vB.propTypes={hsl:fe.shape({h:fe.number,s:fe.number,l:fe.number,a:fe.number})};vB.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var jCt=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,i=e.hex,o=e.hsv,a=function(d,f){if(d.hex)Wf(d.hex)&&t({hex:d.hex,source:"hex"},f);else if(d.rgb){var h=d.rgb.split(",");YC(d.rgb,"rgb")&&t({r:h[0],g:h[1],b:h[2],a:1,source:"rgb"},f)}else if(d.hsv){var m=d.hsv.split(",");YC(d.hsv,"hsv")&&(m[2]=m[2].replace("%",""),m[1]=m[1].replace("%",""),m[0]=m[0].replace("",""),m[1]==1?m[1]=.01:m[2]==1&&(m[2]=.01),t({h:Number(m[0]),s:Number(m[1]),v:Number(m[2]),source:"hsv"},f))}else if(d.hsl){var g=d.hsl.split(",");YC(d.hsl,"hsl")&&(g[2]=g[2].replace("%",""),g[1]=g[1].replace("%",""),g[0]=g[0].replace("",""),c[1]==1?c[1]=.01:c[2]==1&&(c[2]=.01),t({h:Number(g[0]),s:Number(g[1]),v:Number(g[2]),source:"hsl"},f))}},s=tt({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),l=n.r+", "+n.g+", "+n.b,u=Math.round(r.h)+", "+Math.round(r.s*100)+"%, "+Math.round(r.l*100)+"%",c=Math.round(o.h)+", "+Math.round(o.s*100)+"%, "+Math.round(o.v*100)+"%";return x.createElement("div",{style:s.wrap,className:"flexbox-fix"},x.createElement("div",{style:s.fields},x.createElement("div",{style:s.double},x.createElement(xt,{style:{input:s.input,label:s.label},label:"hex",value:i,onChange:a})),x.createElement("div",{style:s.column},x.createElement("div",{style:s.single},x.createElement(xt,{style:{input:s.input2,label:s.label2},label:"rgb",value:l,onChange:a})),x.createElement("div",{style:s.single},x.createElement(xt,{style:{input:s.input2,label:s.label2},label:"hsv",value:c,onChange:a})),x.createElement("div",{style:s.single},x.createElement(xt,{style:{input:s.input2,label:s.label2},label:"hsl",value:u,onChange:a})))))},xB=function(e){var t=e.width,n=e.onChange,r=e.rgb,i=e.hsl,o=e.hsv,a=e.hex,s=e.header,l=e.styles,u=l===void 0?{}:l,c=e.className,d=c===void 0?"":c,f=tt(vo({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+r.r+", "+r.g+", "+r.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},u));return x.createElement("div",{style:f.picker,className:"google-picker "+d},x.createElement("div",{style:f.head},s),x.createElement("div",{style:f.swatch}),x.createElement("div",{style:f.saturation},x.createElement(tX,{hsl:i,hsv:o,pointer:yB,onChange:n})),x.createElement("div",{style:f.body},x.createElement("div",{style:f.controls,className:"flexbox-fix"},x.createElement("div",{style:f.hue},x.createElement(Pb,{style:f.Hue,hsl:i,radius:"4px",pointer:vB,onChange:n}))),x.createElement(jCt,{rgb:r,hsl:i,hex:a,hsv:o,onChange:n})))};xB.propTypes={width:fe.oneOfType([fe.string,fe.number]),styles:fe.object,header:fe.string};xB.defaultProps={width:652,styles:{},header:"Color picker"};xo(xB);function ote(...e){return e.filter(Boolean).join(" ")}function nv(e){const{enabled:t,onChange:n,label:r}=e;return x.createElement(NL.Group,{as:"div",className:"flex items-center"},x.createElement(NL,{checked:t,onChange:n,className:ote(t?"bg-indigo-600":"bg-gray-200 dark:bg-gray-700","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2")},x.createElement("span",{"aria-hidden":"true",className:ote(t?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out")})),x.createElement(NL.Label,{as:"span",className:"ml-3 text-xs"},x.createElement("span",{className:"font-medium"},r)))}const HCt=Ae.div`
    padding-top: 8px;
    .thumb,
    .thumb::-webkit-slider-thumb {
        -webkit-appearance: none;
    }

    .thumb {
        pointer-events: none;
        position: absolute;
        height: 0;
        width: 200px;
        outline: none;
    }

    .thumb--left {
        z-index: 3;
    }

    .thumb--right {
        z-index: 4;
    }

    .thumb::-webkit-slider-thumb {
        background-color: #f1f5f7;
        border: none;
        border-radius: 50%;
        box-shadow: 0 0 1px 1px #ced4da;
        cursor: pointer;
        height: 18px;
        width: 18px;
        margin-top: 4px;
        pointer-events: all;
        position: relative;
    }

    .thumb::-moz-range-thumb {
        background-color: #f1f5f7;
        border: none;
        border-radius: 50%;
        box-shadow: 0 0 1px 1px #ced4da;
        cursor: pointer;
        height: 18px;
        width: 18px;
        margin-top: 4px;
        pointer-events: all;
        position: relative;
    }
`;function NC(e){return x.createElement("div",{className:"flex justify-center items-center space-x-1 text-xs"},x.createElement("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 text-indigo-600 dark:text-indigo-300 focus:ring-0 bg-gray-50 dark:bg-gray-900",checked:e.value,id:`${e.inputKey}`,"aria-describedby":`${e.inputKey}_label`,title:e.title,onChange:({target:{checked:t}})=>e.onChange(t)}),x.createElement("label",{id:`${e.inputKey}_label`,htmlFor:`${e.inputKey}`,title:e.title},e.title))}const JCt=({min:e,max:t,minVal:n,maxVal:r,setMinVal:i,setMaxVal:o,factor:a})=>{const s=G.useRef(n),l=G.useRef(r),u=G.useRef(null),c=G.useCallback(d=>Math.round((d-e)/(t-e)*100),[e,t]);return G.useEffect(()=>{const d=c(n),f=c(l.current);u.current&&(u.current.style.left=`${d}%`,u.current.style.width=`${f-d}%`)},[n,c]),G.useEffect(()=>{const d=c(s.current),f=c(r);u.current&&(u.current.style.width=`${f-d}%`)},[r,c]),x.createElement(HCt,null,x.createElement("input",{type:"range",min:e*a,max:t*a,value:n*a,onChange:d=>{const f=Math.min(Number(d.target.value),r*a-1);i(f/a),s.current=f/a},className:"thumb thumb--left",style:{zIndex:n>t-100?"5":void 0}}),x.createElement("input",{type:"range",min:e*a,max:t*a,value:r*a,onChange:d=>{const f=Math.max(Number(d.target.value),n*a+1);o(f/a),l.current=f/a},className:"thumb thumb--right"}),x.createElement("div",{className:"relative w-48"},x.createElement("div",{className:"absolute rounded h-1 bg-gray-200 dark:bg-gray-700 w-full z-[1]"}),x.createElement("div",{ref:u,className:"absolute rounded h-1 bg-indigo-400 z-[2]"}),x.createElement("div",{className:"text-xs absolute left-1.5 text-gray-900 dark:text-gray-50 mt-3"},n),x.createElement("div",{className:"text-xs absolute -right-1 text-gray-900 dark:text-gray-50 mt-3"},r)))};function ate(e){const{t}=ot();return x.createElement("div",{className:"flex space-x-6 my-2"},x.createElement("div",{className:"flex flex-col space-y-1 items-start"},x.createElement(NC,{inputKey:`min_domain_${e.text}`,value:e.enableMinDomain,title:t("config.min_domain"),onChange:e.setEnableMinDomain}),x.createElement("input",{value:e.domainMin,onChange:n=>{const r=Number(n.target.value);isNaN(r)||e.setDomainMin(r)},type:"number",disabled:!e.enableMinDomain,className:"block w-full rounded-md border-0 py-1 px-2 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:bg-zinc-900 dark:border-gray-700 focus:ring-1 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 disabled:opacity-50"})),x.createElement("div",{className:"flex flex-col space-y-1 items-start"},x.createElement(NC,{inputKey:`max_domain_${e.text}`,value:e.enableMaxDomain,title:t("config.max_domain"),onChange:e.setEnableMaxDomain}),x.createElement("input",{value:e.domainMax,onChange:n=>{const r=Number(n.target.value);isNaN(r)||e.setDomainMax(r)},type:"number",disabled:!e.enableMaxDomain,className:"block w-full rounded-md border-0 py-1 px-2 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 dark:bg-zinc-900 dark:border-gray-700 focus:ring-1 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 disabled:opacity-50"})),x.createElement("div",{className:"flex flex-col space-y-1 items-start w-48"},x.createElement(NC,{inputKey:`range_${e.text}`,value:e.enableRange,title:t("config.range"),onChange:e.setEnableRange}),x.createElement(JCt,{max:e.maxRange,min:e.minRange,maxVal:e.rangeMax,minVal:e.rangeMin,setMaxVal:e.setRangeMax,setMinVal:e.setRangeMin,factor:e.maxRange<2?100:1})))}function rv(e){return x.createElement("div",{className:"border border-gray-200 dark:border-gray-700 p-4 m-4 rounded-lg"},e.children)}function iv(e){return x.createElement("div",{className:"border-t border-gray-200 dark:border-gray-700 mt-4 pt-4"},e.children)}function ov(e){return x.createElement("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium"},e.children)}function av(e){return x.createElement("h2",{className:"text-xl text-gray-800 dark:text-gray-50 font-medium"},e.children)}const BCt=["#5B8FF9","#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"];function ste(e,t,n,r){const[i,o]=G.useState(!1),[a,s]=G.useState(!1),[l,u]=G.useState(!1),[c,d]=G.useState(0),[f,h]=G.useState(100),[m,g]=G.useState(n!=null?n:e),[y,v]=G.useState(r!=null?r:t),w=G.useCallback(Z=>{var k,_,R,I,E,X;s(Z.domainMax!==void 0),o(Z.domainMin!==void 0),u(Z.rangeMax!==void 0||Z.rangeMin!==void 0),d((k=Z.domainMin)!=null?k:0),h((_=Z.domainMax)!=null?_:100),v((I=(R=Z.rangeMax)!=null?R:r)!=null?I:t),g((X=(E=Z.rangeMin)!=null?E:n)!=null?X:e)},[r,n,t,e]);return{value:G.useMemo(()=>({...a?{domainMax:f}:{},...i?{domainMin:c}:{},...l?{rangeMax:y,rangeMin:m}:{}}),[a&&f,i&&c,l&&y,l&&m]),setValue:w,enableMaxDomain:a,enableMinDomain:i,enableRange:l,rangeMax:y,rangeMin:m,domainMax:f,domainMin:c,setEnableMinDomain:o,setEnableMaxDomain:s,setEnableRange:u,setDomainMin:d,setDomainMax:h,setRangeMin:g,setRangeMax:v}}const KCt=()=>{var C,N;const e=Tt(),{layout:t,showVisualConfigPanel:n}=e,{t:r}=ot(),i=["numberFormat","timeFormat","normalizedNumberFormat"],[o,a]=G.useState({numberFormat:t.format.numberFormat,timeFormat:t.format.timeFormat,normalizedNumberFormat:t.format.normalizedNumberFormat}),[s,l]=G.useState({x:t.resolve.x,y:t.resolve.y,color:t.resolve.color,opacity:t.resolve.opacity,shape:t.resolve.shape,size:t.resolve.size}),[u,c]=G.useState(t.zeroScale),[d,f]=G.useState((C=t.useSvg)!=null?C:!1),[h,m]=G.useState((N=t.scaleIncludeUnmatchedChoropleth)!=null?N:!1),[g,y]=G.useState(t.background),[v,w]=G.useState({r:91,g:143,b:249,a:1}),[Z,k]=G.useState(!1),[_,R]=G.useState(!1),[I,E]=G.useState(""),X=ste(0,1,.3,.8),Y=ste(0,100);return G.useEffect(()=>{var O,P,H,M;var V,F;c(t.zeroScale),y(t.background),l(t.resolve),w(gje(t.primaryColor)),k(!1),m((O=t.scaleIncludeUnmatchedChoropleth)!=null?O:!1),a({numberFormat:t.format.numberFormat,timeFormat:t.format.timeFormat,normalizedNumberFormat:t.format.normalizedNumberFormat}),E((P=t.colorPalette)!=null?P:""),X.setValue((H=(V=t.scale)==null?void 0:V.opacity)!=null?H:{}),Y.setValue((M=(F=t.scale)==null?void 0:F.size)!=null?M:{})},[n]),x.createElement(wc,{show:n,onClose:()=>{e.setShowVisualConfigPanel(!1)}},x.createElement("div",{onClick:()=>{R(!1)}},x.createElement(rv,null,x.createElement(ov,null,x.createElement(av,null,"Colors")),x.createElement(iv,null,x.createElement("div",{className:"flex space-x-6"},x.createElement("div",null,x.createElement("label",{className:"block text-xs font-medium leading-6"},r("config.primary_color")),x.createElement("div",{onClick:V=>{V.stopPropagation(),V.preventDefault()}},x.createElement("div",{className:"w-8 h-5 border-2",style:{backgroundColor:`rgba(${v.r},${v.g},${v.b},${v.a})`},onClick:V=>{V.stopPropagation(),V.preventDefault(),R(!0)}}),x.createElement("div",{className:"absolute left-32 top-22 z-40"},_&&x.createElement(VCt,{presetColors:BCt,color:v,onChange:V=>{var F;k(!0),w({...V.rgb,a:(F=V.rgb.a)!=null?F:1})}})))),x.createElement("div",null,x.createElement("label",{className:"block text-xs font-medium leading-6"},r("config.color_palette")),x.createElement(Hg,{buttonClassName:"w-48",selectedKey:I,onSelect:E,options:mje.map(V=>({value:V.name,label:x.createElement(x.Fragment,null,x.createElement("div",{key:V.name,className:"flex flex-col justify-start items-center"},x.createElement("div",{className:"font-light"},V.name),x.createElement("div",{className:"flex w-full"},V.value.map((F,O)=>x.createElement("div",{key:O,className:"w-4 h-4 flex-shrink",style:{backgroundColor:`${F}`}})))))})).concat({value:"",label:x.createElement(x.Fragment,null,r("config.default_color_palette"))})})),x.createElement("div",null,x.createElement("label",{className:"block text-xs font-medium leading-6"},r("config.background")," ",r("config.color")),x.createElement("input",{type:"text",className:"block w-full text-gray-700 dark:text-gray-200 rounded-md border-0 py-1 px-2 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 focus:ring-1 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 dark:bg-zinc-900 ",value:g!=null?g:"",onChange:V=>{y(V.target.value)}}))))),x.createElement(rv,null,x.createElement(ov,null,x.createElement(av,null,"Scale")),x.createElement(iv,null,x.createElement("div",null,x.createElement("label",{className:"block text-xs font-medium leading-6"},r("config.opacity")),x.createElement(ate,{...X,text:"opacity",maxRange:1,minRange:0})),x.createElement("div",null,x.createElement("label",{className:"block text-xs font-medium leading-6"},r("config.size")),x.createElement(ate,{...Y,text:"size",maxRange:100,minRange:0})))),x.createElement(rv,null,x.createElement(ov,null,x.createElement(av,null,r("config.format")),x.createElement("p",{className:"text-xs"},r("config.formatGuidesDocs"),":"," ",x.createElement("a",{target:"_blank",className:"underline text-blue-500",href:"https://github.com/d3/d3-format#locale_format"},r("config.readHere")))),x.createElement(iv,null,x.createElement("div",{className:"flex gap-4"},i.map(V=>{var F;return x.createElement("div",{className:"my-2",key:V},x.createElement("label",{className:"block text-xs font-medium leading-6"},r(`config.${V}`)),x.createElement("div",{className:"mt-1"},x.createElement("input",{type:"text",className:"block w-full text-gray-700 dark:text-gray-200 rounded-md border-0 py-1 px-2 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 focus:ring-1 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 dark:bg-zinc-900 ",value:(F=o[V])!=null?F:"",onChange:O=>{a(P=>({...P,[V]:O.target.value}))}})))})))),x.createElement(rv,null,x.createElement(ov,null,x.createElement(av,null,r("config.independence"))),x.createElement(iv,null,x.createElement("div",{className:"flex space-x-6"},Kt.POSITION_CHANNEL_CONFIG_LIST.map(V=>{var F;return x.createElement(nv,{label:r(`config.${V}`),key:V,enabled:(F=s[V])!=null?F:!1,onChange:O=>{l(P=>({...P,[V]:O}))}})}),Kt.NON_POSITION_CHANNEL_CONFIG_LIST.map(V=>{var F;return x.createElement(nv,{label:r(`constant.draggable_key.${V}`),key:V,enabled:(F=s[V])!=null?F:!1,onChange:O=>{l(P=>({...P,[V]:O}))}})})))),x.createElement(rv,null,x.createElement(ov,null,x.createElement(av,null,r("config.misc"))),x.createElement(iv,null,x.createElement("div",{className:"flex space-x-6"},x.createElement(nv,{label:r("config.zeroScale"),enabled:u,onChange:V=>{c(V)}}),x.createElement(nv,{label:r("config.svg"),enabled:d,onChange:V=>{f(V)}}),x.createElement(nv,{label:"include unmatched choropleth in scale",enabled:h,onChange:V=>{m(V)}})))),x.createElement("div",{className:"m-4"},x.createElement(Fs,{text:r("actions.confirm"),className:"mr-2",onClick:()=>{Aoe(()=>{e.setVisualLayout(["format",o],["zeroScale",u],["scaleIncludeUnmatchedChoropleth",h],["background",g],["resolve",s],["colorPalette",I],["useSvg",d],["scale",{opacity:X.value,size:Y.value}],...Z?[["primaryColor",`rgba(${v.r},${v.g},${v.b},${v.a})`]]:[]),e.setShowVisualConfigPanel(!1)})}}),x.createElement(go,{text:r("actions.cancel"),className:"mr-2",onClick:()=>{e.setShowVisualConfigPanel(!1)}}))))},DCt=ft(KCt);function ACt(e,t,n,r){const i={},o={};n.forEach(l=>{i[l]=0,o[l]=0}),t.forEach(l=>{n.forEach(u=>{i[u]+=Math.abs(l[u])})}),e.forEach(l=>{n.forEach(u=>{o[u]+=Math.abs(l[u])})});const a=[];t.forEach(l=>{const u={...l};n.forEach(c=>{u[c]/=i[c]}),a.push(u)});const s=[];return e.forEach(l=>{const u={...l};n.forEach(c=>{u[c]/=o[c]}),s.push(u)}),{normalizedData:s,normalizedParentData:a}}function UCt(e,t,n,r){let i=0;const o=t.map(()=>!1);for(let s of e){let l=t.findIndex((u,c)=>!o[c]&&n.every(d=>u[d]===s[d]));if(l>-1){o[l]=!0;const u=t[l];let c=s[r],d=u[r];if(c===0||d===0)continue;let f=.5*(c+d);i+=.5*c*Math.log2(c/f)+.5*d*Math.log2(d/f)}}const a=o.filter(s=>s===!0).length/o.length;return i*a}function $Ct(e){return e.all.filter(t=>t.analyticType==="dimension").filter(t=>!e.selection.find(n=>n.fid===t.fid))}const QCt=10;async function qCt(e){var u,c;const{allFields:t,viewFilters:n,viewMeasures:r,viewDimensions:i,predicates:o,computationFunction:a}=e,s=$Ct({all:t.filter(d=>d.analyticType==="dimension"),selection:i}),l=[];for(let d of s){let f=d.fid,h=[];d.semanticType==="quantitative"&&h.push({type:"view",query:[{op:"bin",binBy:d.fid,binSize:QCt,newBinCol:f}]});for(let m of r){const g=eg(n,t,[d],[m],!0,"none"),y=h?[...h,...g]:g,v=await xG(a,y),w=eg(n,t,[...i,d],[m],!0,"none"),Z=h?[...h,...w]:w,k=await xG(a,Z),_=xCe(k,o);let R=ACt(_,v,[cr(m.fid,(u=m.aggName)!=null?u:"sum")]),I=UCt(R.normalizedData,R.normalizedParentData,[d.fid],cr(m.fid,(c=m.aggName)!=null?c:"sum"));l.push({measureField:m,targetField:d,score:I,normalizedData:_,normalizedParentData:v})}}return l.sort((d,f)=>f.score-d.score)}const eVt=Ae.div`
  height: 50vh;
  overflow-y: hidden;
`,tVt=Ae.div`
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: stretch;
  height: 100%;
  overflow-y: scroll;
`,nVt=Ae.div`
  margin-block: 0.2em;
  margin-inline: 0.2em;
  padding: 0.5em;
  border: 2px solid gray;
  cursor: pointer;
`,lte=(e,t)=>{if(t.semanticType==="quantitative"){let n=t.fid;return`${e[n][0].toFixed(2)}-${e[n][1].toFixed(2)}`}else return e[t.fid]},rVt=ft(({dark:e,themeKey:t})=>{const n=Tt(),r=cc(),{allFields:i,viewMeasures:o,viewDimensions:a,viewFilters:s,showInsightBoard:l,selectedMarkObject:u}=n,[c,d]=G.useState([]),[f,h]=G.useState(0),m=G.useRef(null),g=G.useMemo(()=>{var v;return{...(v=Nue[t!=null?t:"vega"])==null?void 0:v[e]}},[t,e]);ot();const y=async v=>{const w=await qCt({predicates:v,viewFilters:s,allFields:i,viewMeasures:o,viewDimensions:a,computationFunction:r});d(w)};return G.useEffect(()=>{if(!l||Object.keys(u).length===0)return;const v=a.map(w=>({key:w.fid,type:"discrete",range:new Set([u[w.fid]])}));y(v)},[o,a,l,u]),G.useEffect(()=>{if(m.current&&c.length>0){const{normalizedData:v,normalizedParentData:w,targetField:Z,measureField:k}=c[f],{semanticType:_,name:R,fid:I}=Z,E=[...v.map(C=>({category:lte(C,Z),...C,type:"child"})),...w.map(C=>({category:lte(C,Z),...C,type:"parent"}))],X={x:{field:"category",type:_==="quantitative"?"ordinal":_,axis:{title:`Distribution of Values for ${R}`}}},Y={data:{values:E},width:320,height:200,encoding:{...X,color:{legend:{orient:"bottom"}}},layer:[{mark:{type:"bar",width:15,opacity:.7},encoding:{y:{field:cr(k.fid,k.aggName),type:"quantitative",title:`${k.aggName} ${k.name} for All Marks`},color:{datum:"All Marks"}},transform:[{filter:"datum.type === 'parent'"}]},{mark:{type:"bar",width:10,opacity:.7},encoding:{y:{field:cr(k.fid,k.aggName),type:"quantitative",title:`${k.aggName} ${k.name} for Selected Mark`},color:{datum:"Selected Mark"}},transform:[{filter:"datum.type === 'child'"}]}],resolve:{scale:{y:"independent"}}};YN(m.current,Y,{mode:"vega-lite",actions:!1,config:g})}},[c,m.current,f,g]),x.createElement(wc,{show:l,onClose:()=>{n.setShowInsightBoard(!1),h(0)}},x.createElement(eVt,{className:"grid grid-cols-4"},x.createElement(tVt,{className:"col-span-1"},c.map((v,w)=>x.createElement(nVt,{key:w,className:`${f===w?"border-indigo-400":""} text-xs`,onClick:()=>h(w)},v.targetField.name," ",v.score.toFixed(2)))),x.createElement("div",{className:"col-span-3 text-center overflow-y-scroll"},x.createElement("div",{ref:m}))))});function Hb(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((r=r.apply(e,[])).next())})}function Jb(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function ute(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function cte(e,t,n){if(arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var iVt=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function IZ(e,t){var n=oVt(e);if(typeof n.path!="string"){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof r=="string"&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function oVt(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var r=t.split(".").pop().toLowerCase(),i=iVt.get(r);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}var aVt=[".DS_Store","Thumbs.db"];function sVt(e){return Hb(this,void 0,void 0,function(){return Jb(this,function(t){return gW(e)&&lVt(e.dataTransfer)?[2,fVt(e.dataTransfer,e.type)]:uVt(e)?[2,cVt(e)]:Array.isArray(e)&&e.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,dVt(e)]:[2,[]]})})}function lVt(e){return gW(e)}function uVt(e){return gW(e)&&gW(e.target)}function gW(e){return typeof e=="object"&&e!==null}function cVt(e){return oF(e.target.files).map(function(t){return IZ(t)})}function dVt(e){return Hb(this,void 0,void 0,function(){var t;return Jb(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(r){return r.getFile()}))];case 1:return t=n.sent(),[2,t.map(function(r){return IZ(r)})]}})})}function fVt(e,t){return Hb(this,void 0,void 0,function(){var n,r;return Jb(this,function(i){switch(i.label){case 0:return e.items?(n=oF(e.items).filter(function(o){return o.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(pVt))]):[3,2];case 1:return r=i.sent(),[2,dte(Axe(r))];case 2:return[2,dte(oF(e.files).map(function(o){return IZ(o)}))]}})})}function dte(e){return e.filter(function(t){return aVt.indexOf(t.name)===-1})}function oF(e){if(e===null)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function pVt(e){if(typeof e.webkitGetAsEntry!="function")return fte(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?Uxe(t):fte(e)}function Axe(e){return e.reduce(function(t,n){return cte(cte([],ute(t),!1),ute(Array.isArray(n)?Axe(n):[n]),!1)},[])}function fte(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var n=IZ(t);return Promise.resolve(n)}function hVt(e){return Hb(this,void 0,void 0,function(){return Jb(this,function(t){return[2,e.isDirectory?Uxe(e):mVt(e)]})})}function Uxe(e){var t=e.createReader();return new Promise(function(n,r){var i=[];function o(){var a=this;t.readEntries(function(s){return Hb(a,void 0,void 0,function(){var l,u,c;return Jb(this,function(d){switch(d.label){case 0:if(s.length)return[3,5];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=d.sent(),n(l),[3,4];case 3:return u=d.sent(),r(u),[3,4];case 4:return[3,6];case 5:c=Promise.all(s.map(hVt)),i.push(c),o(),d.label=6;case 6:return[2]}})})},function(s){r(s)})}o()})}function mVt(e){return Hb(this,void 0,void 0,function(){return Jb(this,function(t){return[2,new Promise(function(n,r){e.file(function(i){var o=IZ(i,e.fullPath);n(o)},function(i){r(i)})})]})})}var gVt=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",i=(e.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return n.some(function(a){var s=a.trim().toLowerCase();return s.charAt(0)==="."?r.toLowerCase().endsWith(s):s.endsWith("/*")?o===s.replace(/\/.*$/,""):i===s})}return!0};function pte(e){return vVt(e)||yVt(e)||Qxe(e)||bVt()}function bVt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yVt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vVt(e){if(Array.isArray(e))return aF(e)}function hte(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mte(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hte(Object(n),!0).forEach(function(r){$xe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hte(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ow(e,t){return ZVt(e)||wVt(e,t)||Qxe(e,t)||xVt()}function xVt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qxe(e,t){if(e){if(typeof e=="string")return aF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aF(e,t)}}function aF(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wVt(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,s;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));i=!0);}catch(l){o=!0,s=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function ZVt(e){if(Array.isArray(e))return e}var SVt="file-invalid-type",kVt="file-too-large",_Vt="file-too-small",GVt="too-many-files",IVt=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:SVt,message:"File type must be ".concat(t)}},gte=function(e){return{code:kVt,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},bte=function(e){return{code:_Vt,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},WVt={code:GVt,message:"Too many files"};function qxe(e,t){var n=e.type==="application/x-moz-file"||gVt(e,t);return[n,n?null:IVt(t)]}function ewe(e,t,n){if(up(e.size))if(up(t)&&up(n)){if(e.size>n)return[!1,gte(n)];if(e.size<t)return[!1,bte(t)]}else{if(up(t)&&e.size<t)return[!1,bte(t)];if(up(n)&&e.size>n)return[!1,gte(n)]}return[!0,null]}function up(e){return e!=null}function EVt(e){var t=e.files,n=e.accept,r=e.minSize,i=e.maxSize,o=e.multiple,a=e.maxFiles,s=e.validator;return!o&&t.length>1||o&&a>=1&&t.length>a?!1:t.every(function(l){var u=qxe(l,n),c=Ow(u,1),d=c[0],f=ewe(l,r,i),h=Ow(f,1),m=h[0],g=s?s(l):null;return d&&m&&!g})}function bW(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function Fk(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function yte(e){e.preventDefault()}function XVt(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function LVt(e){return e.indexOf("Edge/")!==-1}function RVt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return XVt(e)||LVt(e)}function Qs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return t.some(function(s){return!bW(r)&&s&&s.apply(void 0,[r].concat(o)),bW(r)})}}function CVt(){return"showOpenFilePicker"in window}function VVt(e){if(up(e)){var t=Object.entries(e).filter(function(n){var r=Ow(n,2),i=r[0],o=r[1],a=!0;return twe(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),a=!1),(!Array.isArray(o)||!o.every(nwe))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),a=!1),a}).reduce(function(n,r){var i=Ow(r,2),o=i[0],a=i[1];return mte(mte({},n),{},$xe({},o,a))},{});return[{description:"Files",accept:t}]}return e}function YVt(e){if(up(e))return Object.entries(e).reduce(function(t,n){var r=Ow(n,2),i=r[0],o=r[1];return[].concat(pte(t),[i],pte(o))},[]).filter(function(t){return twe(t)||nwe(t)}).join(",")}function TVt(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function NVt(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function twe(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function nwe(e){return/^.*\.[\w]+$/.test(e)}var FVt=["children"],MVt=["open"],OVt=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],zVt=["refKey","onChange","onClick"];function PVt(e){return JVt(e)||HVt(e)||rwe(e)||jVt()}function jVt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HVt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function JVt(e){if(Array.isArray(e))return sF(e)}function FC(e,t){return DVt(e)||KVt(e,t)||rwe(e,t)||BVt()}function BVt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rwe(e,t){if(e){if(typeof e=="string")return sF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sF(e,t)}}function sF(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function KVt(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,s;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));i=!0);}catch(l){o=!0,s=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function DVt(e){if(Array.isArray(e))return e}function vte(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vte(Object(n),!0).forEach(function(r){lF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vte(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yW(e,t){if(e==null)return{};var n=AVt(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function AVt(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var iX=G.forwardRef(function(e,t){var n=e.children,r=yW(e,FVt),i=$Vt(r),o=i.open,a=yW(i,MVt);return G.useImperativeHandle(t,function(){return{open:o}},[o]),x.createElement(G.Fragment,null,n(Wn(Wn({},a),{},{open:o})))});iX.displayName="Dropzone";var iwe={disabled:!1,getFilesFromEvent:sVt,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};iX.defaultProps=iwe;iX.propTypes={children:fe.func,accept:fe.objectOf(fe.arrayOf(fe.string)),multiple:fe.bool,preventDropOnDocument:fe.bool,noClick:fe.bool,noKeyboard:fe.bool,noDrag:fe.bool,noDragEventsBubbling:fe.bool,minSize:fe.number,maxSize:fe.number,maxFiles:fe.number,disabled:fe.bool,getFilesFromEvent:fe.func,onFileDialogCancel:fe.func,onFileDialogOpen:fe.func,useFsAccessApi:fe.bool,autoFocus:fe.bool,onDragEnter:fe.func,onDragLeave:fe.func,onDragOver:fe.func,onDrop:fe.func,onDropAccepted:fe.func,onDropRejected:fe.func,onError:fe.func,validator:fe.func};const UVt=iX;var uF={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function $Vt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Wn(Wn({},iwe),e),n=t.accept,r=t.disabled,i=t.getFilesFromEvent,o=t.maxSize,a=t.minSize,s=t.multiple,l=t.maxFiles,u=t.onDragEnter,c=t.onDragLeave,d=t.onDragOver,f=t.onDrop,h=t.onDropAccepted,m=t.onDropRejected,g=t.onFileDialogCancel,y=t.onFileDialogOpen,v=t.useFsAccessApi,w=t.autoFocus,Z=t.preventDropOnDocument,k=t.noClick,_=t.noKeyboard,R=t.noDrag,I=t.noDragEventsBubbling,E=t.onError,X=t.validator,Y=G.useMemo(function(){return YVt(n)},[n]),C=G.useMemo(function(){return VVt(n)},[n]),N=G.useMemo(function(){return typeof y=="function"?y:xte},[y]),V=G.useMemo(function(){return typeof g=="function"?g:xte},[g]),F=G.useRef(null),O=G.useRef(null),P=G.useReducer(QVt,uF),H=FC(P,2),M=H[0],j=H[1],J=M.isFocused,q=M.isFileDialogActive,K=G.useRef(typeof window<"u"&&window.isSecureContext&&v&&CVt()),D=function(){!K.current&&q&&setTimeout(function(){if(O.current){var ne=O.current.files;ne.length||(j({type:"closeDialog"}),V())}},300)};G.useEffect(function(){return window.addEventListener("focus",D,!1),function(){window.removeEventListener("focus",D,!1)}},[O,q,V,K]);var $=G.useRef([]),Q=function(ne){F.current&&F.current.contains(ne.target)||(ne.preventDefault(),$.current=[])};G.useEffect(function(){return Z&&(document.addEventListener("dragover",yte,!1),document.addEventListener("drop",Q,!1)),function(){Z&&(document.removeEventListener("dragover",yte),document.removeEventListener("drop",Q))}},[F,Z]),G.useEffect(function(){return!r&&w&&F.current&&F.current.focus(),function(){}},[F,w,r]);var B=G.useCallback(function(ne){E?E(ne):console.error(ne)},[E]),pe=G.useCallback(function(ne){ne.preventDefault(),ne.persist(),Ue(ne),$.current=[].concat(PVt($.current),[ne.target]),Fk(ne)&&Promise.resolve(i(ne)).then(function(ye){if(!(bW(ne)&&!I)){var nt=ye.length,lt=nt>0&&EVt({files:ye,accept:Y,minSize:a,maxSize:o,multiple:s,maxFiles:l,validator:X}),bt=nt>0&&!lt;j({isDragAccept:lt,isDragReject:bt,isDragActive:!0,type:"setDraggedFiles"}),u&&u(ne)}}).catch(function(ye){return B(ye)})},[i,u,B,I,Y,a,o,s,l,X]),re=G.useCallback(function(ne){ne.preventDefault(),ne.persist(),Ue(ne);var ye=Fk(ne);if(ye&&ne.dataTransfer)try{ne.dataTransfer.dropEffect="copy"}catch(nt){}return ye&&d&&d(ne),!1},[d,I]),ee=G.useCallback(function(ne){ne.preventDefault(),ne.persist(),Ue(ne);var ye=$.current.filter(function(lt){return F.current&&F.current.contains(lt)}),nt=ye.indexOf(ne.target);nt!==-1&&ye.splice(nt,1),$.current=ye,!(ye.length>0)&&(j({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Fk(ne)&&c&&c(ne))},[F,c,I]),oe=G.useCallback(function(ne,ye){var nt=[],lt=[];ne.forEach(function(bt){var zn=qxe(bt,Y),tn=FC(zn,2),Pn=tn[0],zs=tn[1],_c=ewe(bt,a,o),Ps=FC(_c,2),Kn=Ps[0],Gc=Ps[1],Br=X?X(bt):null;if(Pn&&Kn&&!Br)nt.push(bt);else{var gi=[zs,Gc];Br&&(gi=gi.concat(Br)),lt.push({file:bt,errors:gi.filter(function(Bb){return Bb})})}}),(!s&&nt.length>1||s&&l>=1&&nt.length>l)&&(nt.forEach(function(bt){lt.push({file:bt,errors:[WVt]})}),nt.splice(0)),j({acceptedFiles:nt,fileRejections:lt,type:"setFiles"}),f&&f(nt,lt,ye),lt.length>0&&m&&m(lt,ye),nt.length>0&&h&&h(nt,ye)},[j,s,Y,a,o,l,f,h,m,X]),ue=G.useCallback(function(ne){ne.preventDefault(),ne.persist(),Ue(ne),$.current=[],Fk(ne)&&Promise.resolve(i(ne)).then(function(ye){bW(ne)&&!I||oe(ye,ne)}).catch(function(ye){return B(ye)}),j({type:"reset"})},[i,oe,B,I]),U=G.useCallback(function(){if(K.current){j({type:"openDialog"}),N();var ne={multiple:s,types:C};window.showOpenFilePicker(ne).then(function(ye){return i(ye)}).then(function(ye){oe(ye,null),j({type:"closeDialog"})}).catch(function(ye){TVt(ye)?(V(ye),j({type:"closeDialog"})):NVt(ye)?(K.current=!1,O.current?(O.current.value=null,O.current.click()):B(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):B(ye)});return}O.current&&(j({type:"openDialog"}),N(),O.current.value=null,O.current.click())},[j,N,V,v,oe,B,C,s]),de=G.useCallback(function(ne){!F.current||!F.current.isEqualNode(ne.target)||(ne.key===" "||ne.key==="Enter"||ne.keyCode===32||ne.keyCode===13)&&(ne.preventDefault(),U())},[F,U]),be=G.useCallback(function(){j({type:"focus"})},[]),xe=G.useCallback(function(){j({type:"blur"})},[]),me=G.useCallback(function(){k||(RVt()?setTimeout(U,0):U())},[k,U]),Ce=function(ne){return r?null:ne},Xe=function(ne){return _?null:Ce(ne)},Fe=function(ne){return R?null:Ce(ne)},Ue=function(ne){I&&ne.stopPropagation()},at=G.useMemo(function(){return function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ye=ne.refKey,nt=ye===void 0?"ref":ye,lt=ne.role,bt=ne.onKeyDown,zn=ne.onFocus,tn=ne.onBlur,Pn=ne.onClick,zs=ne.onDragEnter,_c=ne.onDragOver,Ps=ne.onDragLeave,Kn=ne.onDrop,Gc=yW(ne,OVt);return Wn(Wn(lF({onKeyDown:Xe(Qs(bt,de)),onFocus:Xe(Qs(zn,be)),onBlur:Xe(Qs(tn,xe)),onClick:Ce(Qs(Pn,me)),onDragEnter:Fe(Qs(zs,pe)),onDragOver:Fe(Qs(_c,re)),onDragLeave:Fe(Qs(Ps,ee)),onDrop:Fe(Qs(Kn,ue)),role:typeof lt=="string"&&lt!==""?lt:"presentation"},nt,F),!r&&!_?{tabIndex:0}:{}),Gc)}},[F,de,be,xe,me,pe,re,ee,ue,_,R,r]),Qe=G.useCallback(function(ne){ne.stopPropagation()},[]),Me=G.useMemo(function(){return function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ye=ne.refKey,nt=ye===void 0?"ref":ye,lt=ne.onChange,bt=ne.onClick,zn=yW(ne,zVt),tn=lF({accept:Y,multiple:s,type:"file",style:{display:"none"},onChange:Ce(Qs(lt,ue)),onClick:Ce(Qs(bt,Qe)),tabIndex:-1},nt,O);return Wn(Wn({},tn),zn)}},[O,n,s,ue,r]);return Wn(Wn({},M),{},{isFocused:J&&!r,getRootProps:at,getInputProps:Me,rootRef:F,inputRef:O,open:Ce(U)})}function QVt(e,t){switch(t.type){case"focus":return Wn(Wn({},e),{},{isFocused:!0});case"blur":return Wn(Wn({},e),{},{isFocused:!1});case"openDialog":return Wn(Wn({},uF),{},{isFileDialogActive:!0});case"closeDialog":return Wn(Wn({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Wn(Wn({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Wn(Wn({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return Wn({},uF);default:return e}}function xte(){}function qVt(e){const t=G.useMemo(()=>e.data&&e.type?tYt(e.data,e.type):void 0,[e.data,e.type]),n=Kue(t,e.url),[r,i]=G.useState(0);G.useEffect(()=>i(a=>a+1),[n]);const{t:o}=ot("translation",{keyPrefix:"main.tabpanel.settings"});return!t&&!e.url?null:n?x.createElement("div",{className:"w-full flex-1 relative"},x.createElement(eYt,{key:r,data:n})):x.createElement("div",{className:"w-full flex-1 flex items-center justify-center border-l border-gray-500"},o("geography_settings.loading"))}function eYt(e){return x.createElement(UO,{attributionControl:!1,center:[0,0],bounds:[[-180,-90],[180,90]],renderer:Ls.canvas(),zoom:1,style:{width:"100%",height:"100%",zIndex:1}},x.createElement($O,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),x.createElement(AO,{prefix:"Leaflet"}),e.data&&x.createElement(GOe,{data:e.data}))}function tYt(e,t){try{const n=JSON.parse(e),r=t==="GeoJSON"?n:g3(n,Object.keys(n.objects)[0]);if(!("features"in r)){console.error("Invalid GeoJSON: GeoJSON must be a FeatureCollection, but got",r);return}return r}catch(n){console.error(n)}}const nYt=[],rYt=({geoList:e=nYt})=>{var H,M;const t=Tt(),{layout:n,showGeoJSONConfigPanel:r}=t,{geoKey:i,geojson:o,geoUrl:a}=n,{t:s}=ot("translation"),{t:l}=ot("translation",{keyPrefix:"main.tabpanel.settings"}),[u,c]=G.useState((H=a==null?void 0:a.type)!=null?H:"GeoJSON"),[d,f]=G.useState(""),[h,m]=G.useState((M=a==null?void 0:a.url)!=null?M:""),[g,y]=G.useState(""),[v,w]=G.useState(""),[Z,k]=G.useState(""),[_,R]=G.useState(a),[I,E]=G.useState(!1),X=h||o,[Y,C]=G.useState(()=>{const j=e.findIndex(J=>J.url===(a==null?void 0:a.url)&&J.type===(a==null?void 0:a.type));return j===-1&&X?-2:j}),N=G.useMemo(()=>[{label:"Select a Geographic Data",value:"-1"}].concat(e.map((j,J)=>({label:j.name,value:`${J}`}))).concat({label:"Manual Set",value:"-2"}),[e]),V=G.useMemo(()=>j=>C(parseInt(j)),[]),F=(e!=null?e:[]).length===0||Y===-2,O=G.useMemo(()=>{try{const j=JSON.parse(v);return Object.keys(j.objects)[0]||""}catch(j){return""}},[v]);G.useEffect(()=>{f(i||"")},[i]),G.useEffect(()=>{y(o?JSON.stringify(o,null,2):"")},[o]);const P=()=>{if(!F){const j=e[Y];j?t.setVisualLayout("geoUrl",{type:j.type,url:j.url}):t.clearGeographicData(),t.setShowGeoJSONConfigPanel(!1);return}try{if(!(u==="GeoJSON"?g:v)&&_){t.setShowGeoJSONConfigPanel(!1);return}const j=JSON.parse(u==="GeoJSON"?g:v);u==="TopoJSON"?t.setGeographicData({type:"TopoJSON",data:j,objectKey:Z||O},d,(_==null?void 0:_.type)==="TopoJSON"?_:void 0):t.setGeographicData({type:"GeoJSON",data:j},d,(_==null?void 0:_.type)==="GeoJSON"?_:void 0),t.setShowGeoJSONConfigPanel(!1)}catch(j){console.error(j)}};return x.createElement(wc,{containerStyle:{overflow:"visible"},show:r,onClose:()=>{t.setShowGeoJSONConfigPanel(!1)}},x.createElement("div",null,x.createElement("h2",{className:"text-lg mb-4"},l("geography")),x.createElement("div",null,x.createElement("div",{className:"my-2"},x.createElement("label",{className:"block text-xs font-medium leading-6 text-gray-900"},l("geography_settings.geoKey")),x.createElement("div",{className:"mt-1"},x.createElement("input",{type:"text",className:"block w-full rounded-md border-0 py-1 px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-1 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",value:d,onChange:j=>f(j.target.value)}))),e.length>0&&x.createElement("div",{className:"my-2"},x.createElement("label",{className:"block text-xs font-medium leading-6 text-gray-900"},"GeoData"),x.createElement(Hg,{options:N,selectedKey:`${Y}`,onSelect:V})),F&&x.createElement("div",{className:"my-2"},x.createElement("label",{className:"block text-xs font-medium leading-6 text-gray-900"},l(`geography_settings.${u.toLowerCase()}`)),x.createElement("div",{className:"mt-1 flex flex-col space-y-2"},x.createElement("div",{role:"radiogroup"},x.createElement("div",{className:"flex items-center space-x-2"},x.createElement("input",{type:"radio",name:"dataMode",id:"geojson",className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 dark:bg-gray-800 dark:border-gray-600",checked:u==="GeoJSON",onChange:()=>{c("GeoJSON")}}),x.createElement("label",{htmlFor:"geojson",className:"text-xs whitespace-nowrap"},l("geography_settings.geojson")),x.createElement("input",{type:"radio",name:"dataMode",id:"topojson",className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 dark:bg-gray-800 dark:border-gray-600",checked:u==="TopoJSON",onChange:()=>{c("TopoJSON")}}),x.createElement("label",{htmlFor:"topojson",className:"text-xs whitespace-nowrap"},l("geography_settings.topojson")))),x.createElement("div",{className:"flex items-center space-x-2"},x.createElement("label",{className:"text-xs whitespace-nowrap capitalize"},l("geography_settings.href",{format:u.toLowerCase()})),x.createElement("input",{type:"text",className:"block w-full rounded-md border-0 py-1 px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-1 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",value:h,placeholder:l("geography_settings.hrefPlaceholder",{format:u.toLowerCase()}),onChange:j=>{m(j.target.value)}}),x.createElement(go,{text:l("geography_settings.load"),className:"mr-2 flex-shrink-0",disabled:I,icon:I?x.createElement(BO,{className:"text-black"}):void 0,onClick:()=>{h&&(E(!0),fetch(h).then(j=>j.json()).then(j=>{(u==="GeoJSON"?y:w)(JSON.stringify(j,null,2)),R({type:u,url:h}),E(!1)}).catch(()=>{E(!1)}))}})),x.createElement(UVt,{onDrop:j=>{const J=j[0];if(J){const q=new FileReader;q.addEventListener("load",K=>{const D=K.target.result;R(void 0),(u==="GeoJSON"?y:w)(D)}),q.readAsText(J)}},noClick:!0},({getRootProps:j,getInputProps:J,isDragActive:q,open:K})=>x.createElement("div",{className:"relative justify-center flex w-full h-80 rounded ring-gray-300 shadow-sm ring-1 ring-inset",...j()},q&&x.createElement("div",{className:"absolute items-center justify-center left-0 right-0 top-0 bottom-0 z-20 bg-gray-200 opacity-80"}),x.createElement("input",{...J()}),x.createElement("div",{onClick:K,className:"flex h-full items-center justify-center w-48"},l("geography_settings.jsonInputPlaceholder",{format:u.toLowerCase()})),x.createElement(qVt,{data:u==="GeoJSON"?g:v,type:u,url:_}))),u==="TopoJSON"&&x.createElement("div",{className:"flex items-center space-x-2"},x.createElement("label",{className:"text-xs whitespace-nowrap capitalize"},l("geography_settings.objectKey")),x.createElement("input",{type:"text",className:"block w-full rounded-md border-0 py-1 px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-1 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",value:Z,placeholder:O,onChange:j=>{k(j.target.value)}}))))),x.createElement("div",{className:"mt-4"},x.createElement(Fs,{text:s("actions.confirm"),className:"mr-2",onClick:P}),x.createElement(go,{text:s("actions.cancel"),className:"mr-2",onClick:()=>{t.setShowGeoJSONConfigPanel(!1)}}))))},iYt=ft(rYt),oYt="https://enhanceai.kanaries.net/api/vis/text2gw";async function aYt(e,t,n,r){const i=await(await fetch(e,{headers:{"Content-Type":"application/json",...r},credentials:"include",method:"POST",body:JSON.stringify({metas:t,messages:[{role:"user",content:n}]})})).json();if(i.success)return i.data;throw new Error(i.message)}const sYt=e=>{const[t,n]=G.useState(""),[r,i]=G.useState(!1),o=Tt(),{t:a}=ot(),s=o.allFields,l=G.useCallback(()=>{var u,c;i(!0),aYt((u=e.api)!=null?u:oYt,s,t,(c=e.headers)!=null?c:{}).then(d=>{o.appendFromOld(d)}).finally(()=>{i(!1)})},[e.api,e.headers,s,t,o]);return x.createElement("div",{className:"right-0 flex"},x.createElement("input",{type:"text",className:"rounded-l-md px-4 block w-full border-0 py-1.5 text-gray-900 dark:text-gray-50 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 placeholder:text-gray-400 focus:ring-1 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 dark:bg-gray-900",placeholder:a("main.tabpanel.askviz.placeholder"),value:t,onChange:u=>n(u.target.value),onKeyDown:u=>{u.key==="Enter"&&r===!1&&t.length>0&&l()},disabled:r||s.length===0}),x.createElement("button",{type:"button",className:"flex items-center grow-0 rounded-r-md bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 px-4 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed",disabled:r||t.length===0||s.length===0,onClick:l},"Ask",!r&&x.createElement(cRe,{className:"w-4 ml-1"}),r&&x.createElement(BO,null)))},lYt=ft(sYt),uYt=Ae.div`
    position: fixed;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    backdrop-filter: blur(1px);
    z-index: 25535;
`,cYt=Ae.div`
    width: 360px;
    max-height: 800px;
    > div.container {
        padding: 0.5em 1em 1em 1em;
    }
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    /* box-shadow: 0px 0px 12px 3px rgba(0, 0, 0, 0.19); */
    border-radius: 4px;
    z-index: 999;
`,vW=e=>{const{onClose:t,title:n,show:r}=e,i=G.useRef(0);return x.createElement(uYt,{className:"border border-gray-300 dark:border-gray-600 "+(r?"block":"hidden"),onMouseDown:()=>i.current=Date.now(),onMouseOut:()=>i.current=0,onMouseUp:()=>{Date.now()-i.current<1e3&&(t==null||t())}},x.createElement(cYt,{role:"dialog",className:"bg-white dark:bg-zinc-900 shadow-lg rounded-md border border-gray-100 dark:border-gray-800",onMouseDown:o=>o.stopPropagation()},x.createElement("div",{className:"absolute top-0 right-0 hidden pt-4 pr-4 sm:block"},x.createElement("button",{type:"button",className:"rounded-md bg-white dark:bg-zinc-900 text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:()=>{t==null||t()}},x.createElement("span",{className:"sr-only"},"Close"),x.createElement(qM,{className:"h-6 w-6","aria-hidden":"true"}))),x.createElement("div",{className:"px-6 pt-4 text-base font-semibold leading-6 text-gray-900 dark:text-gray-50"},n),x.createElement("div",{className:"container"},e.children)))},dYt=e=>{const t=Tt(),{showLogSettingPanel:n}=t,[r,i]=G.useState(""),{t:o}=ot();return G.useEffect(()=>{i("")},[n]),x.createElement(vW,{show:n,onClose:()=>{t.setShowLogSettingPanel(!1)}},x.createElement("div",{className:"flex flex-col justify-center items-start text-xs"},x.createElement("h2",{className:"text-lg font-medium mb-2"},o("calc.log_panel_title")),x.createElement("p",{className:"font-normal"},o("calc.log_panel_desc")),x.createElement("fieldset",{className:"mt-2 gap-1 flex flex-col justify-center items-start"},x.createElement("div",{className:"flex items-center space-x-2"},x.createElement("label",{className:"text-ml whitespace-nowrap"},o("calc.log_panel_number")),x.createElement("input",{type:"text",value:r,className:"block w-full text-gray-700 dark:text-gray-200 rounded-md border-0 py-1 px-2 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-1 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 dark:bg-zinc-900 ",onChange:a=>{i(a.target.value)}})),x.createElement("div",{className:"mt-2"},x.createElement(Fs,{text:o("actions.confirm"),className:"mr-2 px-2 ",onClick:()=>{const a=t.createField;t.createLogField(a.channel,a.index,"log",Number(r)),t.setShowLogSettingPanel(!1)}}),x.createElement(go,{text:o("actions.cancel"),className:"mr-2 px-2",onClick:()=>{t.setShowLogSettingPanel(!1)}})))))},fYt=ft(dYt),pYt=e=>{const t=Tt(),{showBinSettingPanel:n,setShowBinSettingPanel:r}=t,{t:i}=ot(),[o,a]=G.useState("widths"),[s,l]=G.useState(""),u=["widths","counts"];return G.useEffect(()=>{a("widths"),l("")},[n]),x.createElement(vW,{show:n,onClose:()=>{r(!1)}},x.createElement("div",{className:"flex flex-col justify-center items-start text-xs"},x.createElement("h2",{className:"text-lg font-medium mb-2"},i("calc.bin_panel_title")),x.createElement("p",{className:"font-normal"},i("calc.bin_panel_desc")),x.createElement("fieldset",{className:"mt-2 gap-1 flex flex-col justify-center items-start"},u.map((c,d)=>x.createElement("div",{key:d},x.createElement("div",{className:"flex my-1",key:c},x.createElement("div",{className:"align-top"},x.createElement("input",{type:"radio",className:"h-4 w-4 border-gray-300 text-black focus:ring-black",id:c,checked:c===o,onChange:f=>a(c)})),x.createElement("div",{className:"ml-3"},x.createElement("label",{htmlFor:c},i(`calc.bin_panel_option_${c}`)))),o===c&&x.createElement("div",{className:"flex items-center space-x-2"},x.createElement("label",{className:"text-ml whitespace-nowrap"},i("calc.bin_panel_number")),x.createElement("input",{type:"text",className:"block w-full text-gray-700 dark:text-gray-200 rounded-md border-0 py-1 px-2 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-1 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 dark:bg-zinc-900 ",value:s,onChange:f=>{l(f.target.value)}})))),x.createElement("div",{className:"mt-2"},x.createElement(Fs,{className:"mr-2 px-2 ",text:"Confirm",onClick:()=>{const c=t.createField;t.createBinField(c.channel,c.index,o==="widths"?"bin":"binCount",Number(s)),t.setShowBinSettingPanel(!1)}}),x.createElement(go,{text:i("actions.cancel"),className:"mr-2 px-2",onClick:()=>{t.setShowBinSettingPanel(!1)}})))))},hYt=ft(pYt),mYt=G.createContext(null),MC={didCatch:!1,error:null};class owe extends G.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=MC}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var n,r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:o,reason:"imperative-api"}),this.setState(MC)}}componentDidCatch(t,n){var r,i;(r=(i=this.props).onError)===null||r===void 0||r.call(i,t,n)}componentDidUpdate(t,n){const{didCatch:r}=this.state,{resetKeys:i}=this.props;if(r&&n.error!==null&&gYt(t.resetKeys,i)){var o,a;(o=(a=this.props).onReset)===null||o===void 0||o.call(a,{next:i,prev:t.resetKeys,reason:"keys"}),this.setState(MC)}}render(){const{children:t,fallbackRender:n,FallbackComponent:r,fallback:i}=this.props,{didCatch:o,error:a}=this.state;let s=t;if(o){const l={error:a,resetErrorBoundary:this.resetErrorBoundary};if(G.isValidElement(i))s=i;else if(typeof n=="function")s=n(l);else if(r)s=G.createElement(r,l);else throw a}return G.createElement(mYt.Provider,{value:{didCatch:o,error:a,resetErrorBoundary:this.resetErrorBoundary}},s)}}function gYt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((n,r)=>!Object.is(n,t[r]))}const bYt=ft(function(){const e=Tt();ot();const t=()=>{e.updateShowErrorResolutionPanel(0)};switch(e.showErrorResolutionPanel){case 0:return null;case 500:return x.createElement(vW,{show:!0},x.createElement("div",{className:"flex flex-col justify-center items-start"},x.createElement("h2",{className:"font-medium text-xl my-2"},"Oops!"),x.createElement("p",{className:"font-normal my-2"},"The chart is too large to render. You can try options above:"),x.createElement("p",{className:"font-normal my-2"},"1. Set the chart to a fixed size.",x.createElement("a",{className:"mx-2 cursor-pointer font-semibold text-indigo-600 hover:text-indigo-500",onClick:()=>{e.setVisualLayout("size",{mode:"fixed",width:800,height:600}),t()}},"Set Now")),x.createElement("p",{className:"font-normal my-2"},"2. Change to SVG renderer.",x.createElement("a",{className:"mx-2 cursor-pointer font-semibold text-indigo-600 hover:text-indigo-500",onClick:()=>{e.setVisualLayout("useSvg",!0),t()}},"Set Now")),x.createElement("p",{className:"font-normal my-2"},"3. Close this modal and edit the chart to reduce chart size."),x.createElement("fieldset",{className:"mt-2 gap-1 flex flex-col justify-center items-end w-full"},x.createElement("div",{className:"mt-2"},x.createElement(go,{text:"Close",className:"mr-2 px-2",onClick:t})))));case 501:return x.createElement(vW,{show:!0},x.createElement("div",{className:"flex flex-col justify-center items-start"},x.createElement("h2",{className:"font-medium text-xl my-2"},"Oops!"),x.createElement("p",{className:"font-normal my-2"},"There is some error with Computation service. Here is the Error message:"),x.createElement("p",{className:"font-normal my-2"},e.lastErrorMessage),x.createElement("fieldset",{className:"mt-2 gap-1 flex flex-col justify-center items-end w-full"},x.createElement("div",{className:"mt-2"},x.createElement(go,{text:"Close",className:"mr-2 px-2",onClick:t})))))}return null}),yYt=Ae.div`
    min-width: 100px;
    position: absolute;
    z-index: 99;
    cursor: pointer;
    padding: 4px;
`,vYt=e=>{var u,c;const{x:t,y:n,children:r}=e,[i,o]=G.useState(),a=G.useCallback(d=>{d&&o(d.getBoundingClientRect())},[]),s=t-((u=i==null?void 0:i.left)!=null?u:0),l=n-((c=i==null?void 0:i.top)!=null?c:0);return x.createElement("div",{className:"absolute inset-0",ref:a},x.createElement(yYt,{className:"shadow-lg text-sm bg-white border border-gray-100 dark:bg-black dark:border-gray-700",style:{left:s,top:l}},r))},xYt=ft(function(){const e=Tt(),{t}=ot(),{vizEmbededMenu:n}=e;return n.show?x.createElement(vYt,{x:n.position[0],y:n.position[1]},Kt.EMBEDED_MENU_LIST.map(r=>{switch(r){case"data_interpretation":return x.createElement("div",{key:r,className:"flex items-center whitespace-nowrap py-1 px-4 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer",onClick:()=>{e.closeEmbededMenu(),e.setShowInsightBoard(!0)}},x.createElement("span",{className:"flex-1 pr-2"},t("App.labels.data_interpretation")),x.createElement(Sae,{className:"ml-1 w-3 flex-grow-0 flex-shrink-0"}));case"data_view":return x.createElement("div",{key:r,className:"flex items-center whitespace-nowrap py-1 px-4 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer",onClick:()=>{e.closeEmbededMenu(),e.setShowDataBoard(!0)}},x.createElement("span",{className:"flex-1 pr-2"},t("App.labels.data_view")));default:return console.error("Unknown item",r),null}})):null}),wYt=ft(function(){const e=Tt(),t=cc(),{showDataBoard:n,selectedMarkObject:r,allFields:i}=e,o=G.useMemo(()=>{const u=Object.entries(r).filter(c=>![vr,xr,ai].includes(c[0])&&c[1]!==void 0);return r[vr]!==void 0&&r[xr]!==void 0&&u.push([r[vr],r[xr]]),u.map(([c,d])=>({fid:c,rule:{type:"one of",value:[d]}}))},[r]),a=G.useMemo(()=>i.filter(u=>u.fid!==ai&&u.computed&&u.expression),[i]),s=G.useMemo(()=>u=>t(DCe(ACe(u,o),a.map(c=>({expression:c.expression,key:c.fid})))),[t,o,a]),l=G.useMemo(()=>i.filter(u=>![vr,xr,ai].includes(u.fid)),[i]);return x.createElement(wc,{show:n,onClose:()=>{e.setShowDataBoard(!1)}},x.createElement("div",{className:"mt-4"},x.createElement(zE,{size:100,computation:s,metas:l,disableFilter:!0})))});function wte(e){var u;const t=G.useRef(null),[n,r]=G.useState(!1),[i,o]=G.useState(e.defaultWidth),a=x.useCallback(()=>{r(!0)},[]),s=x.useCallback(()=>{r(!1)},[]),l=x.useCallback(c=>{n&&o(c.clientX-t.current.getBoundingClientRect().left)},[n]);return x.useEffect(()=>(window.addEventListener("mousemove",l),window.addEventListener("mouseup",s),()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",s)}),[l,s]),x.createElement("div",{className:`relative ${e.className}`,style:{width:i},ref:t},e.children,x.createElement("div",{className:`absolute right-0 inset-y-0 cursor-col-resize ${e.handlerClassName}`,style:{width:(u=e.handleWidth)!=null?u:6},onMouseDown:a}))}const awe=ft(function(e){var t;const{computation:n,darkMode:r="light",i18nLang:i="en-US",enhanceAPI:o,i18nResources:a,themeKey:s="vega",themeConfig:l,toolbar:u,geographicData:c,computationTimeout:d=6e4,spec:f,onError:h}=e,{t:m,i18n:g}=ot(),y=g.language;G.useEffect(()=>{a&&Xve(a)},[a]),G.useEffect(()=>{i!==y&&Lve(i)},[i,y]);const v=Tt();G.useEffect(()=>{c&&v.setGeographicData(c,c.key)},[v,c]),G.useEffect(()=>{var E;f&&v.replaceNow($Ce(f,v.meta,(E=v.currentVis.name)!=null?E:"Chart 1",v.currentVis.visId))},[f,v]);const w=G.useRef(null),Z=G.useRef({download(){}}),k=G.useCallback((E,X)=>{const Y=new Error(`Error${X?`(${X})`:""}: ${E}`);console.error(Y),h==null||h(Y),X&&v.updateShowErrorResolutionPanel(X,E)},[v,h]),{segmentKey:_,vizEmbededMenu:R}=v,I=G.useMemo(()=>n?qae(Qae(n,d),E=>k(Rae(E),501)):async()=>[],[k,n,d]);return x.createElement(_ve,{value:{reportError:k}},x.createElement(owe,{fallback:x.createElement("div",null,"Something went wrong"),onError:e.onError},x.createElement(f5.Provider,{value:I},x.createElement("div",{className:`${r==="dark"?"dark":""} App font-sans bg-white dark:bg-zinc-900 dark:text-white m-0 p-0`},x.createElement("div",{className:"bg-white dark:bg-zinc-900 dark:text-white"},e.dataSelection,x.createElement("div",{className:"px-2 mx-2"},x.createElement(Dbt,null)),_===xd.vis&&x.createElement("div",{className:"px-2 mx-2 mt-2"},x.createElement(mgt,null)),_===xd.vis&&x.createElement("div",{style:{marginTop:"0em",borderTop:"none"},className:"m-4 p-4 border border-gray-200 dark:border-gray-700"},((t=o==null?void 0:o.features)==null?void 0:t.askviz)&&x.createElement(lYt,{api:typeof o.features.askviz=="string"?o.features.askviz:"",headers:o==null?void 0:o.header}),x.createElement(FYe,{csvHandler:Z,rendererHandler:w,darkModePreference:r,exclude:u==null?void 0:u.exclude,extra:u==null?void 0:u.extra}),x.createElement(ayt,null),x.createElement(rVt,{themeKey:s,dark:r}),x.createElement(wYt,null),x.createElement(DCt,null),x.createElement(bYt,null),x.createElement(fYt,null),x.createElement(hYt,null),v.showGeoJSONConfigPanel&&x.createElement(iYt,{geoList:e.geoList}),x.createElement("div",{className:"sm:flex"},x.createElement(wte,{defaultWidth:240,handleWidth:4,className:"min-w-[100%] max-w-full sm:min-w-[96px] sm:max-w-[35%] flex-shrink-0",handlerClassName:"hidden sm:block"},x.createElement(AMe,null)),x.createElement(wte,{defaultWidth:180,handleWidth:4,className:"min-w-[100%] max-w-full sm:min-w-[120px] sm:max-w-[30%] flex-shrink-0",handlerClassName:"hidden sm:block"},x.createElement(Jbt,null),x.createElement(LMe,null)),x.createElement("div",{className:"flex-1"},x.createElement("div",null,x.createElement(GMe,null)),x.createElement("div",{className:"m-0.5 p-1 border border-gray-200 dark:border-gray-700",style:{minHeight:"600px",overflow:"auto"},onMouseLeave:()=>{R.show&&v.closeEmbededMenu()},onClick:()=>{R.show&&v.closeEmbededMenu()}},n&&x.createElement(sgt,{csvRef:Z,ref:w,themeKey:s,dark:r,themeConfig:l,computationFunction:I,channelScales:e.channelScales}),x.createElement(xYt,null))))),_===xd.data&&x.createElement("div",{className:"mx-4 p-4 border border-gray-200 dark:border-gray-700",style:{marginTop:"0em",borderTop:"none"}},x.createElement(iyt,null)))))))});function ZYt(e){const{computation:t,safeMetas:n}=G.useMemo(()=>{if(e.dataSource){if(e.fieldKeyGuard){const{safeData:i,safeMetas:o}=eO(e.dataSource,e.rawFields);return{safeMetas:o,computation:zp(i)}}return{safeMetas:e.rawFields,computation:zp(e.dataSource)}}return{safeMetas:e.rawFields,computation:e.computation}},[e.rawFields,e.dataSource?e.dataSource:e.computation,e.fieldKeyGuard]),r=Xs(e.dark);return x.createElement("div",{className:`${r==="dark"?"dark":""} App font-sans bg-white dark:bg-zinc-900 dark:text-white m-0 p-0`},x.createElement($ae,{onMetaChange:e.onMetaChange,meta:n,keepAlive:e.keepAlive,storeRef:e.storeRef},x.createElement(lse,null,x.createElement(awe,{darkMode:r,enhanceAPI:e.enhanceAPI,i18nLang:e.i18nLang,i18nResources:e.i18nResources,themeKey:e.themeKey,toolbar:e.toolbar,computation:t,computationTimeout:e.computationTimeout,channelScales:e.channelScales,geoList:e.geoList,geographicData:e.geographicData,onError:e.onError,spec:e.spec,themeConfig:e.themeConfig}))))}const SYt=e=>{const{dataStore:t}=nb();return x.createElement("input",{style:{display:"none"},type:"file",ref:e.fileRef,onChange:n=>{const r=n.target.files;r!==null&&r[0].text().then(i=>{t.importData(JSON.parse(i))})}})},kYt=ft(SYt);var xW={},_Yt={get exports(){return xW},set exports(e){xW=e}};/* @license
Papa Parse
v5.3.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){(function(n,r){e.exports=r()})(n0,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i=!r.document&&!!r.postMessage,o=i&&/blob:/i.test((r.location||{}).protocol),a={},s=0,l={parse:function(E,X){var Y=(X=X||{}).dynamicTyping||!1;if(I(Y)&&(X.dynamicTypingFunction=Y,Y={}),X.dynamicTyping=Y,X.transform=!!I(X.transform)&&X.transform,X.worker&&l.WORKERS_SUPPORTED){var C=function(){if(!l.WORKERS_SUPPORTED)return!1;var V=(O=r.URL||r.webkitURL||null,P=n.toString(),l.BLOB_URL||(l.BLOB_URL=O.createObjectURL(new Blob(["(",P,")();"],{type:"text/javascript"})))),F=new r.Worker(V),O,P;return F.onmessage=w,F.id=s++,a[F.id]=F}();return C.userStep=X.step,C.userChunk=X.chunk,C.userComplete=X.complete,C.userError=X.error,X.step=I(X.step),X.chunk=I(X.chunk),X.complete=I(X.complete),X.error=I(X.error),delete X.worker,void C.postMessage({input:E,config:X,workerId:C.id})}var N=null;return l.NODE_STREAM_INPUT,typeof E=="string"?N=X.download?new d(X):new h(X):E.readable===!0&&I(E.read)&&I(E.on)?N=new m(X):(r.File&&E instanceof File||E instanceof Object)&&(N=new f(X)),N.stream(E)},unparse:function(E,X){var Y=!1,C=!0,N=",",V=`\r
`,F='"',O=F+F,P=!1,H=null,M=!1;(function(){if(typeof X=="object"){if(typeof X.delimiter!="string"||l.BAD_DELIMITERS.filter(function(K){return X.delimiter.indexOf(K)!==-1}).length||(N=X.delimiter),(typeof X.quotes=="boolean"||typeof X.quotes=="function"||Array.isArray(X.quotes))&&(Y=X.quotes),typeof X.skipEmptyLines!="boolean"&&typeof X.skipEmptyLines!="string"||(P=X.skipEmptyLines),typeof X.newline=="string"&&(V=X.newline),typeof X.quoteChar=="string"&&(F=X.quoteChar),typeof X.header=="boolean"&&(C=X.header),Array.isArray(X.columns)){if(X.columns.length===0)throw new Error("Option columns is empty");H=X.columns}X.escapeChar!==void 0&&(O=X.escapeChar+F),(typeof X.escapeFormulae=="boolean"||X.escapeFormulae instanceof RegExp)&&(M=X.escapeFormulae instanceof RegExp?X.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var j=new RegExp(y(F),"g");if(typeof E=="string"&&(E=JSON.parse(E)),Array.isArray(E)){if(!E.length||Array.isArray(E[0]))return J(null,E,P);if(typeof E[0]=="object")return J(H||Object.keys(E[0]),E,P)}else if(typeof E=="object")return typeof E.data=="string"&&(E.data=JSON.parse(E.data)),Array.isArray(E.data)&&(E.fields||(E.fields=E.meta&&E.meta.fields||H),E.fields||(E.fields=Array.isArray(E.data[0])?E.fields:typeof E.data[0]=="object"?Object.keys(E.data[0]):[]),Array.isArray(E.data[0])||typeof E.data[0]=="object"||(E.data=[E.data])),J(E.fields||[],E.data||[],P);throw new Error("Unable to serialize unrecognized input");function J(K,D,$){var Q="";typeof K=="string"&&(K=JSON.parse(K)),typeof D=="string"&&(D=JSON.parse(D));var B=Array.isArray(K)&&0<K.length,pe=!Array.isArray(D[0]);if(B&&C){for(var re=0;re<K.length;re++)0<re&&(Q+=N),Q+=q(K[re],re);0<D.length&&(Q+=V)}for(var ee=0;ee<D.length;ee++){var oe=B?K.length:D[ee].length,ue=!1,U=B?Object.keys(D[ee]).length===0:D[ee].length===0;if($&&!B&&(ue=$==="greedy"?D[ee].join("").trim()==="":D[ee].length===1&&D[ee][0].length===0),$==="greedy"&&B){for(var de=[],be=0;be<oe;be++){var xe=pe?K[be]:be;de.push(D[ee][xe])}ue=de.join("").trim()===""}if(!ue){for(var me=0;me<oe;me++){0<me&&!U&&(Q+=N);var Ce=B&&pe?K[me]:me;Q+=q(D[ee][Ce],me)}ee<D.length-1&&(!$||0<oe&&!U)&&(Q+=V)}}return Q}function q(K,D){if(K==null)return"";if(K.constructor===Date)return JSON.stringify(K).slice(1,25);var $=!1;M&&typeof K=="string"&&M.test(K)&&(K="'"+K,$=!0);var Q=K.toString().replace(j,O);return($=$||Y===!0||typeof Y=="function"&&Y(K,D)||Array.isArray(Y)&&Y[D]||function(B,pe){for(var re=0;re<pe.length;re++)if(-1<B.indexOf(pe[re]))return!0;return!1}(Q,l.BAD_DELIMITERS)||-1<Q.indexOf(N)||Q.charAt(0)===" "||Q.charAt(Q.length-1)===" ")?F+Q+F:Q}}};if(l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!i&&!!r.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=v,l.ParserHandle=g,l.NetworkStreamer=d,l.FileStreamer=f,l.StringStreamer=h,l.ReadableStreamStreamer=m,r.jQuery){var u=r.jQuery;u.fn.parse=function(E){var X=E.config||{},Y=[];return this.each(function(V){if(!(u(this).prop("tagName").toUpperCase()==="INPUT"&&u(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var F=0;F<this.files.length;F++)Y.push({file:this.files[F],inputElem:this,instanceConfig:u.extend({},X)})}),C(),this;function C(){if(Y.length!==0){var V,F,O,P,H=Y[0];if(I(E.before)){var M=E.before(H.file,H.inputElem);if(typeof M=="object"){if(M.action==="abort")return V="AbortError",F=H.file,O=H.inputElem,P=M.reason,void(I(E.error)&&E.error({name:V},F,O,P));if(M.action==="skip")return void N();typeof M.config=="object"&&(H.instanceConfig=u.extend(H.instanceConfig,M.config))}else if(M==="skip")return void N()}var j=H.instanceConfig.complete;H.instanceConfig.complete=function(J){I(j)&&j(J,H.file,H.inputElem),N()},l.parse(H.file,H.instanceConfig)}else I(E.complete)&&E.complete()}function N(){Y.splice(0,1),C()}}}function c(E){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(X){var Y=_(X);Y.chunkSize=parseInt(Y.chunkSize),X.step||X.chunk||(Y.chunkSize=null),this._handle=new g(Y),(this._handle.streamer=this)._config=Y}.call(this,E),this.parseChunk=function(X,Y){if(this.isFirstChunk&&I(this._config.beforeFirstChunk)){var C=this._config.beforeFirstChunk(X);C!==void 0&&(X=C)}this.isFirstChunk=!1,this._halted=!1;var N=this._partialLine+X;this._partialLine="";var V=this._handle.parse(N,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var F=V.meta.cursor;this._finished||(this._partialLine=N.substring(F-this._baseIndex),this._baseIndex=F),V&&V.data&&(this._rowCount+=V.data.length);var O=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)r.postMessage({results:V,workerId:l.WORKER_ID,finished:O});else if(I(this._config.chunk)&&!Y){if(this._config.chunk(V,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);V=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(V.data),this._completeResults.errors=this._completeResults.errors.concat(V.errors),this._completeResults.meta=V.meta),this._completed||!O||!I(this._config.complete)||V&&V.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),O||V&&V.meta.paused||this._nextChunk(),V}this._halted=!0},this._sendError=function(X){I(this._config.error)?this._config.error(X):o&&this._config.error&&r.postMessage({workerId:l.WORKER_ID,error:X,finished:!1})}}function d(E){var X;(E=E||{}).chunkSize||(E.chunkSize=l.RemoteChunkSize),c.call(this,E),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(Y){this._input=Y,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(X=new XMLHttpRequest,this._config.withCredentials&&(X.withCredentials=this._config.withCredentials),i||(X.onload=R(this._chunkLoaded,this),X.onerror=R(this._chunkError,this)),X.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var Y=this._config.downloadRequestHeaders;for(var C in Y)X.setRequestHeader(C,Y[C])}if(this._config.chunkSize){var N=this._start+this._config.chunkSize-1;X.setRequestHeader("Range","bytes="+this._start+"-"+N)}try{X.send(this._config.downloadRequestBody)}catch(V){this._chunkError(V.message)}i&&X.status===0&&this._chunkError()}},this._chunkLoaded=function(){X.readyState===4&&(X.status<200||400<=X.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:X.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(Y){var C=Y.getResponseHeader("Content-Range");return C===null?-1:parseInt(C.substring(C.lastIndexOf("/")+1))}(X),this.parseChunk(X.responseText)))},this._chunkError=function(Y){var C=X.statusText||Y;this._sendError(new Error(C))}}function f(E){var X,Y;(E=E||{}).chunkSize||(E.chunkSize=l.LocalChunkSize),c.call(this,E);var C=typeof FileReader<"u";this.stream=function(N){this._input=N,Y=N.slice||N.webkitSlice||N.mozSlice,C?((X=new FileReader).onload=R(this._chunkLoaded,this),X.onerror=R(this._chunkError,this)):X=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var N=this._input;if(this._config.chunkSize){var V=Math.min(this._start+this._config.chunkSize,this._input.size);N=Y.call(N,this._start,V)}var F=X.readAsText(N,this._config.encoding);C||this._chunkLoaded({target:{result:F}})},this._chunkLoaded=function(N){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(N.target.result)},this._chunkError=function(){this._sendError(X.error)}}function h(E){var X;c.call(this,E=E||{}),this.stream=function(Y){return X=Y,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var Y,C=this._config.chunkSize;return C?(Y=X.substring(0,C),X=X.substring(C)):(Y=X,X=""),this._finished=!X,this.parseChunk(Y)}}}function m(E){c.call(this,E=E||{});var X=[],Y=!0,C=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(N){this._input=N,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){C&&X.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),X.length?this.parseChunk(X.shift()):Y=!0},this._streamData=R(function(N){try{X.push(typeof N=="string"?N:N.toString(this._config.encoding)),Y&&(Y=!1,this._checkIsFinished(),this.parseChunk(X.shift()))}catch(V){this._streamError(V)}},this),this._streamError=R(function(N){this._streamCleanUp(),this._sendError(N)},this),this._streamEnd=R(function(){this._streamCleanUp(),C=!0,this._streamData("")},this),this._streamCleanUp=R(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(E){var X,Y,C,N=Math.pow(2,53),V=-N,F=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,O=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,P=this,H=0,M=0,j=!1,J=!1,q=[],K={data:[],errors:[],meta:{}};if(I(E.step)){var D=E.step;E.step=function(ee){if(K=ee,B())Q();else{if(Q(),K.data.length===0)return;H+=ee.data.length,E.preview&&H>E.preview?Y.abort():(K.data=K.data[0],D(K,P))}}}function $(ee){return E.skipEmptyLines==="greedy"?ee.join("").trim()==="":ee.length===1&&ee[0].length===0}function Q(){return K&&C&&(re("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),C=!1),E.skipEmptyLines&&(K.data=K.data.filter(function(ee){return!$(ee)})),B()&&function(){if(!K)return;function ee(ue,U){I(E.transformHeader)&&(ue=E.transformHeader(ue,U)),q.push(ue)}if(Array.isArray(K.data[0])){for(var oe=0;B()&&oe<K.data.length;oe++)K.data[oe].forEach(ee);K.data.splice(0,1)}else K.data.forEach(ee)}(),function(){if(!K||!E.header&&!E.dynamicTyping&&!E.transform)return K;function ee(ue,U){var de,be=E.header?{}:[];for(de=0;de<ue.length;de++){var xe=de,me=ue[de];E.header&&(xe=de>=q.length?"__parsed_extra":q[de]),E.transform&&(me=E.transform(me,xe)),me=pe(xe,me),xe==="__parsed_extra"?(be[xe]=be[xe]||[],be[xe].push(me)):be[xe]=me}return E.header&&(de>q.length?re("FieldMismatch","TooManyFields","Too many fields: expected "+q.length+" fields but parsed "+de,M+U):de<q.length&&re("FieldMismatch","TooFewFields","Too few fields: expected "+q.length+" fields but parsed "+de,M+U)),be}var oe=1;return!K.data.length||Array.isArray(K.data[0])?(K.data=K.data.map(ee),oe=K.data.length):K.data=ee(K.data,0),E.header&&K.meta&&(K.meta.fields=q),M+=oe,K}()}function B(){return E.header&&q.length===0}function pe(ee,oe){return ue=ee,E.dynamicTypingFunction&&E.dynamicTyping[ue]===void 0&&(E.dynamicTyping[ue]=E.dynamicTypingFunction(ue)),(E.dynamicTyping[ue]||E.dynamicTyping)===!0?oe==="true"||oe==="TRUE"||oe!=="false"&&oe!=="FALSE"&&(function(U){if(F.test(U)){var de=parseFloat(U);if(V<de&&de<N)return!0}return!1}(oe)?parseFloat(oe):O.test(oe)?new Date(oe):oe===""?null:oe):oe;var ue}function re(ee,oe,ue,U){var de={type:ee,code:oe,message:ue};U!==void 0&&(de.row=U),K.errors.push(de)}this.parse=function(ee,oe,ue){var U=E.quoteChar||'"';if(E.newline||(E.newline=function(xe,me){xe=xe.substring(0,1048576);var Ce=new RegExp(y(me)+"([^]*?)"+y(me),"gm"),Xe=(xe=xe.replace(Ce,"")).split("\r"),Fe=xe.split(`
`),Ue=1<Fe.length&&Fe[0].length<Xe[0].length;if(Xe.length===1||Ue)return`
`;for(var at=0,Qe=0;Qe<Xe.length;Qe++)Xe[Qe][0]===`
`&&at++;return at>=Xe.length/2?`\r
`:"\r"}(ee,U)),C=!1,E.delimiter)I(E.delimiter)&&(E.delimiter=E.delimiter(ee),K.meta.delimiter=E.delimiter);else{var de=function(xe,me,Ce,Xe,Fe){var Ue,at,Qe,Me;Fe=Fe||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var ne=0;ne<Fe.length;ne++){var ye=Fe[ne],nt=0,lt=0,bt=0;Qe=void 0;for(var zn=new v({comments:Xe,delimiter:ye,newline:me,preview:10}).parse(xe),tn=0;tn<zn.data.length;tn++)if(Ce&&$(zn.data[tn]))bt++;else{var Pn=zn.data[tn].length;lt+=Pn,Qe!==void 0?0<Pn&&(nt+=Math.abs(Pn-Qe),Qe=Pn):Qe=Pn}0<zn.data.length&&(lt/=zn.data.length-bt),(at===void 0||nt<=at)&&(Me===void 0||Me<lt)&&1.99<lt&&(at=nt,Ue=ye,Me=lt)}return{successful:!!(E.delimiter=Ue),bestDelimiter:Ue}}(ee,E.newline,E.skipEmptyLines,E.comments,E.delimitersToGuess);de.successful?E.delimiter=de.bestDelimiter:(C=!0,E.delimiter=l.DefaultDelimiter),K.meta.delimiter=E.delimiter}var be=_(E);return E.preview&&E.header&&be.preview++,X=ee,Y=new v(be),K=Y.parse(X,oe,ue),Q(),j?{meta:{paused:!0}}:K||{meta:{paused:!1}}},this.paused=function(){return j},this.pause=function(){j=!0,Y.abort(),X=I(E.chunk)?"":X.substring(Y.getCharIndex())},this.resume=function(){P.streamer._halted?(j=!1,P.streamer.parseChunk(X,!0)):setTimeout(P.resume,3)},this.aborted=function(){return J},this.abort=function(){J=!0,Y.abort(),K.meta.aborted=!0,I(E.complete)&&E.complete(K),X=""}}function y(E){return E.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(E){var X,Y=(E=E||{}).delimiter,C=E.newline,N=E.comments,V=E.step,F=E.preview,O=E.fastMode,P=X=E.quoteChar===void 0||E.quoteChar===null?'"':E.quoteChar;if(E.escapeChar!==void 0&&(P=E.escapeChar),(typeof Y!="string"||-1<l.BAD_DELIMITERS.indexOf(Y))&&(Y=","),N===Y)throw new Error("Comment character same as delimiter");N===!0?N="#":(typeof N!="string"||-1<l.BAD_DELIMITERS.indexOf(N))&&(N=!1),C!==`
`&&C!=="\r"&&C!==`\r
`&&(C=`
`);var H=0,M=!1;this.parse=function(j,J,q){if(typeof j!="string")throw new Error("Input must be a string");var K=j.length,D=Y.length,$=C.length,Q=N.length,B=I(V),pe=[],re=[],ee=[],oe=H=0;if(!j)return Me();if(O||O!==!1&&j.indexOf(X)===-1){for(var ue=j.split(C),U=0;U<ue.length;U++){if(ee=ue[U],H+=ee.length,U!==ue.length-1)H+=C.length;else if(q)return Me();if(!N||ee.substring(0,Q)!==N){if(B){if(pe=[],Fe(ee.split(Y)),ne(),M)return Me()}else Fe(ee.split(Y));if(F&&F<=U)return pe=pe.slice(0,F),Me(!0)}}return Me()}for(var de=j.indexOf(Y,H),be=j.indexOf(C,H),xe=new RegExp(y(P)+y(X),"g"),me=j.indexOf(X,H);;)if(j[H]!==X)if(N&&ee.length===0&&j.substring(H,H+Q)===N){if(be===-1)return Me();H=be+$,be=j.indexOf(C,H),de=j.indexOf(Y,H)}else if(de!==-1&&(de<be||be===-1))ee.push(j.substring(H,de)),H=de+D,de=j.indexOf(Y,H);else{if(be===-1)break;if(ee.push(j.substring(H,be)),Qe(be+$),B&&(ne(),M))return Me();if(F&&pe.length>=F)return Me(!0)}else for(me=H,H++;;){if((me=j.indexOf(X,me+1))===-1)return q||re.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:pe.length,index:H}),at();if(me===K-1)return at(j.substring(H,me).replace(xe,X));if(X!==P||j[me+1]!==P){if(X===P||me===0||j[me-1]!==P){de!==-1&&de<me+1&&(de=j.indexOf(Y,me+1)),be!==-1&&be<me+1&&(be=j.indexOf(C,me+1));var Ce=Ue(be===-1?de:Math.min(de,be));if(j.substr(me+1+Ce,D)===Y){ee.push(j.substring(H,me).replace(xe,X)),j[H=me+1+Ce+D]!==X&&(me=j.indexOf(X,H)),de=j.indexOf(Y,H),be=j.indexOf(C,H);break}var Xe=Ue(be);if(j.substring(me+1+Xe,me+1+Xe+$)===C){if(ee.push(j.substring(H,me).replace(xe,X)),Qe(me+1+Xe+$),de=j.indexOf(Y,H),me=j.indexOf(X,H),B&&(ne(),M))return Me();if(F&&pe.length>=F)return Me(!0);break}re.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:pe.length,index:H}),me++}}else me++}return at();function Fe(ye){pe.push(ye),oe=H}function Ue(ye){var nt=0;if(ye!==-1){var lt=j.substring(me+1,ye);lt&&lt.trim()===""&&(nt=lt.length)}return nt}function at(ye){return q||(ye===void 0&&(ye=j.substring(H)),ee.push(ye),H=K,Fe(ee),B&&ne()),Me()}function Qe(ye){H=ye,Fe(ee),ee=[],be=j.indexOf(C,H)}function Me(ye){return{data:pe,errors:re,meta:{delimiter:Y,linebreak:C,aborted:M,truncated:!!ye,cursor:oe+(J||0)}}}function ne(){V(Me()),pe=[],re=[]}},this.abort=function(){M=!0},this.getCharIndex=function(){return H}}function w(E){var X=E.data,Y=a[X.workerId],C=!1;if(X.error)Y.userError(X.error,X.file);else if(X.results&&X.results.data){var N={abort:function(){C=!0,Z(X.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:k,resume:k};if(I(Y.userStep)){for(var V=0;V<X.results.data.length&&(Y.userStep({data:X.results.data[V],errors:X.results.errors,meta:X.results.meta},N),!C);V++);delete X.results}else I(Y.userChunk)&&(Y.userChunk(X.results,N,X.file),delete X.results)}X.finished&&!C&&Z(X.workerId,X.results)}function Z(E,X){var Y=a[E];I(Y.userComplete)&&Y.userComplete(X),Y.terminate(),delete a[E]}function k(){throw new Error("Not implemented.")}function _(E){if(typeof E!="object"||E===null)return E;var X=Array.isArray(E)?[]:{};for(var Y in E)X[Y]=_(E[Y]);return X}function R(E,X){return function(){E.apply(X,arguments)}}function I(E){return typeof E=="function"}return o&&(r.onmessage=function(E){var X=E.data;if(l.WORKER_ID===void 0&&X&&(l.WORKER_ID=X.workerId),typeof X.input=="string")r.postMessage({workerId:l.WORKER_ID,results:l.parse(X.input,X.config),finished:!0});else if(r.File&&X.input instanceof File||X.input instanceof Object){var Y=l.parse(X.input,X.config);Y&&r.postMessage({workerId:l.WORKER_ID,results:Y,finished:!0})}}),(d.prototype=Object.create(c.prototype)).constructor=d,(f.prototype=Object.create(c.prototype)).constructor=f,(h.prototype=Object.create(h.prototype)).constructor=h,(m.prototype=Object.create(c.prototype)).constructor=m,l})})(_Yt);const swe=1e4;function GYt(e){const{file:t,config:n,onLoading:r,encoding:i="utf-8"}=e;return new Promise((o,a)=>{n?WYt(t,i,n.size,o,a,r):IYt(t,i,o,a,r)})}function IYt(e,t,n,r,i){const o=[];let a=[],s=-1,l=0;xW.parse(e,{worker:!0,encoding:t,step(u){l+=u.data.join(",").length,s===-1?a=u.data:u.data&&u.data.length&&u.data.length===a.length&&o.push(u.data),i&&s%swe===0&&i(l/e.size),s++},complete(){const u=lwe(a,o);i&&i(1),n(u)},error(u){r(u)}})}function WYt(e,t,n,r,i,o){const a=[];let s=[],l=-1,u=0;xW.parse(e,{worker:!0,encoding:t,step(c){if(u+=c.data.join(",").length,l===-1)s=c.data;else if(c.data&&c.data.length&&c.data.length===s.length)if(l<n)a.push(c.data);else{let d=Math.round(Math.random()*l);d<n&&(a[d]=c.data)}o&&l%swe===0&&o(u/e.size),l++},complete(){const c=lwe(s,a);o&&o(1),r(c)},error(c){i(c)}})}function lwe(e,t){const n=[];for(let r=0;r<t.length;r++){let i={};for(let o=0;o<e.length;o++)i[e[o]]=t[r][o];n.push(i)}return n}const EYt=e=>{const{size:t=10}=e,n=nb(),{tmpDSRawFields:r,tmpDataSource:i}=n,o=x.useMemo(()=>w0(r),[r]),a=x.useMemo(()=>zp(i),[i]);return x.createElement("div",{className:"rounded border-gray-200 dark:border-gray-700 border"},x.createElement(zE,{size:t,metas:o,computation:a,onMetaChange:(s,l,u)=>{n.updateTempDatasetMetas(s,u)}}))},uwe=ft(EYt),XYt=[{label:"UTF-8",value:"utf-8"},{label:"GB2312",value:"gb2312"},{label:"US-ASCII",value:"us-ascii"},{label:"Big5",value:"big5"},{label:"Big5-HKSCS",value:"Big5-HKSCS"},{label:"GB18030",value:"GB18030"}],LYt=[{label:"CSV",value:"csv"},{label:"JSON",value:"json"}];function RYt(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{try{const i=JSON.parse(r.result);if(!Array.isArray(i))throw new Error("Invalid JSON file");t(i)}catch(i){n(i)}},r.readAsText(e)})}const CYt=Ae.div`
    overflow-x: auto;
    min-height: 300px;
`,VYt=e=>{const t=G.useRef(null),n=nb(),{tmpDSName:r,tmpDataSource:i,tmpDSRawFields:o}=n,[a,s]=G.useState("utf-8"),[l,u]=G.useState("csv"),c=G.useCallback(()=>{n.commitTempDS()},[n]),{t:d}=ot("translation",{keyPrefix:"DataSource.dialog.file"}),f=i.length>0&&o.length>0,h=G.useCallback(m=>{const g=m.target.files;if(g!==null){const y=g[0];l==="csv"?GYt({file:y,config:{type:"reservoirSampling",size:1/0},onLoading:()=>{},encoding:a}).then(v=>{n.updateTempDS(v)}):RYt(y).then(v=>{n.updateTempDS(v)})}},[n,l,a]);return x.createElement(CYt,null,!f&&x.createElement("div",{className:"text-center"},x.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},x.createElement("path",{vectorEffect:"non-scaling-stroke",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})),x.createElement("h3",{className:"mt-2 text-sm font-semibold text-gray-900 dark:text-gray-50"},d("choose_file")),x.createElement("p",{className:"mt-1 text-sm text-gray-500"},d("get_start_desc"))),x.createElement("input",{style:{display:"none"},type:"file",ref:t,onChange:h}),!f&&x.createElement("div",{className:"my-1"},x.createElement("div",{className:"flex justify-center"},x.createElement(XS,{value:l,onChange:u,className:"mt-2"},x.createElement(XS.Label,{className:"sr-only"}," Choose a memory option "),x.createElement("div",{className:"grid grid-cols-2 gap-3"},LYt.map(m=>x.createElement(XS.Option,{key:m.value,value:m.value,className:({active:g,checked:y})=>SCe(y?"bg-indigo-600 text-white hover:bg-indigo-500":"ring-1 ring-inset ring-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800","flex cursor-pointer items-center justify-center rounded py-1 px-8 text-sm font-semibold uppercase sm:flex-1")},x.createElement(XS.Label,{as:"span"},m.label)))))),x.createElement("div",{className:"my-1 flex justify-center"},x.createElement(go,{className:"mr-2",onClick:()=>{t.current&&t.current.click()},text:d("open")}),x.createElement("div",{className:"inline-block relative"},x.createElement(Hg,{buttonClassName:"w-36",options:XYt,selectedKey:a,onSelect:m=>{s(m)}})))),f&&x.createElement("div",{className:"mb-2 mt-6"},x.createElement("label",{className:"block text-xs text-gray-800 dark:text-gray-200 mb-1 font-bold"},d("dataset_name")),x.createElement("input",{type:"text",placeholder:d("dataset_name"),value:r,onChange:m=>{n.updateTempName(m.target.value)},className:"text-xs mr-2 p-2 rounded border border-gray-200 dark:border-gray-700 outline-none focus:outline-none focus:border-blue-500 placeholder:italic placeholder:text-slate-400 dark:bg-stone-900"}),x.createElement(Fs,{className:"mr-2",text:d("submit"),disabled:i.length===0,onClick:()=>{c()}})),f&&x.createElement(uwe,null))},YYt=ft(VYt),TYt={CARS:"https://pub-2422ed4100b443659f588f2382cfc7b1.r2.dev/datasets/ds-cars-service.json",STUDENTS:"https://pub-2422ed4100b443659f588f2382cfc7b1.r2.dev/datasets/ds-students-service.json",BTC_GOLD:"https://pub-2422ed4100b443659f588f2382cfc7b1.r2.dev/datasets/ds-btcgold-service.json",BIKE_SHARING:"https://pub-2422ed4100b443659f588f2382cfc7b1.r2.dev/datasets/ds-bikesharing-service.json",CAR_SALES:"https://pub-2422ed4100b443659f588f2382cfc7b1.r2.dev/datasets/ds-carsales-service.json",COLLAGE:"https://pub-2422ed4100b443659f588f2382cfc7b1.r2.dev/datasets/ds-collage-service.json",TITANIC:"https://pub-2422ed4100b443659f588f2382cfc7b1.r2.dev/datasets/ds-titanic-service.json",KELPER:"https://pub-2422ed4100b443659f588f2382cfc7b1.r2.dev/datasets/ds-kelper-service.json",EARTHQUAKE:"https://pub-2422ed4100b443659f588f2382cfc7b1.r2.dev/datasets/ds-earthquake-service.json"},NYt=[{key:"CARS",title:"Cars"},{key:"STUDENTS",title:"Students' Performance"},{key:"BIKE_SHARING",title:"Bike Sharing"},{key:"EARTHQUAKE",title:"Earthquakes"},{key:"CAR_SALES",title:"Car Sales"},{key:"COLLAGE",title:"Collage"},{key:"KELPER",title:"NASA Kelper"},{key:"BTC_GOLD",title:"2022MCM Problem C: Trading Strategies"},{key:"TITANIC",title:"Titanic"}],FYt=e=>{const t=nb(),{tmpDataSource:n}=t,{t:r}=ot("translation",{keyPrefix:"DataSource.dialog.public"});return x.createElement("div",null,x.createElement("div",{className:"h-48 overflow-auto mb-1"},NYt.map(i=>x.createElement("div",{key:i.key,onClick:()=>{fetch(TYt[i.key]).then(o=>o.json()).then(o=>{t.updateTempSTDDS({dataSource:o.dataSource,rawFields:o.fields.map(a=>({fid:a.fid,name:a.name,analyticType:a.analyticType,semanticType:a.semanticType,dataType:a.dataType||"?"})),name:i.title})})},className:"border rounded border-gray-300 dark:border-gray-600 p-2 m-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 dark:text-gray-200"},x.createElement("div",null,i.title)))),x.createElement(Fs,{className:"my-1",disabled:n.length===0,onClick:()=>{t.commitTempDS()},text:r("submit")}),x.createElement(uwe,null))},MYt=ft(FYt),OYt=e=>{const[t,n]=G.useState("file"),{t:r}=ot("translation",{keyPrefix:"DataSource"}),i=G.useMemo(()=>[{label:r("dialog.text_file_data"),key:"file"},{label:r("dialog.public_data"),key:"public"}],[]);return x.createElement("div",{className:"text-sm"},x.createElement("div",{className:"px-2"},x.createElement(LJ,{selectedKey:t,tabs:i,onSelected:o=>{n(o)}}),t==="file"&&x.createElement(YYt,null),t==="public"&&x.createElement(MYt,null)))},zYt=e=>{const t=nb(),n=G.useRef(null),{t:r}=ot(),{dataStore:i,showDSPanel:o}=t,{currentDataset:a,dataSources:s}=i;return x.createElement("div",{className:"flex items-center m-4 p-4 border border-gray-200 dark:border-gray-700"},x.createElement(kYt,{fileRef:n}),x.createElement("div",{className:"mr-2"},x.createElement(Hg,{options:s.map(l=>({label:l.name,value:l.id})),selectedKey:a.id,onSelect:l=>{i.useDS(l)},placeholder:r("DataSource.labels.cur_dataset")})),x.createElement(Fs,{className:"mr-2",text:r("DataSource.buttons.create_dataset"),onClick:()=>{t.startDSBuildingTask()}}),x.createElement(go,{className:"mr-2",text:r("DataSource.buttons.export_as_file"),onClick:()=>{const l=JSON.stringify(i.exportData());Yae(l,"graphic-walker-notebook.json","text/plain")}}),x.createElement(go,{className:"mr-2",text:r("DataSource.buttons.import_file"),onClick:()=>{n.current&&n.current.click()}}),x.createElement(wc,{title:r("DataSource.dialog.create_data_source"),onClose:()=>{t.setShowDSPanel(!1)},show:o},x.createElement(OYt,null)))},PYt=ft(zYt),jYt=ft(function(e){const{i18nLang:t="en-US",i18nResources:n,themeKey:r="vega",dark:i="media",themeConfig:o,toolbar:a,enhanceAPI:s,geographicData:l,onError:u,geoList:c,channelScales:d}=e,f=nb(),{dataStore:h}=f,m=Xs(i);return x.createElement(aO.Provider,{value:h.visSpecStore},x.createElement(lse,null,x.createElement("div",{className:`${m==="dark"?"dark":""} App font-sans bg-white dark:bg-zinc-900 dark:text-white m-0 p-0`},x.createElement(awe,{dataSelection:x.createElement(PYt,null),computation:h.computation,darkMode:m,enhanceAPI:s,i18nLang:t,i18nResources:n,themeKey:r,themeConfig:o,toolbar:a,geographicData:l,geoList:c,onError:u,channelScales:d}))))}),HYt=ft(function(e){return x.createElement(mVe,{storeRef:e.storeRef,keepAlive:e.keepAlive},x.createElement(jYt,{...e}))}),JYt=ft(function(e){const{computation:t,darkMode:n="light",i18nLang:r="en-US",i18nResources:i,computationTimeout:o=6e4,onError:a,pageSize:s=20}=e,{i18n:l}=ot(),u=l.language;G.useEffect(()=>{i&&Xve(i)},[i]),G.useEffect(()=>{r!==u&&Lve(r)},[r,u]);const c=Tt(),d=G.useCallback((m,g)=>{const y=new Error(`Error${g?`(${g})`:""}: ${m}`);console.error(y),a==null||a(y),g&&c.updateShowErrorResolutionPanel(g,m)},[c,a]),f=G.useMemo(()=>t?qae(Qae(t,o),m=>d(Rae(m),501)):async()=>[],[d,t,o]),h=x.useMemo(()=>w0(c.meta),[c.meta]);return x.createElement(_ve,{value:{reportError:d}},x.createElement(owe,{fallback:x.createElement("div",null,"Something went wrong"),onError:e.onError},x.createElement(f5.Provider,{value:f},x.createElement("div",{className:`${n==="dark"?"dark":""} App font-sans bg-white dark:bg-zinc-900 dark:text-white m-0 p-0`},x.createElement("div",{className:"bg-white dark:bg-zinc-900 dark:text-white"},x.createElement(zE,{size:s,metas:h,computation:f}))))))});function BYt(e){const{computation:t,safeMetas:n}=G.useMemo(()=>{if(e.dataSource){if(e.fieldKeyGuard){const{safeData:i,safeMetas:o}=eO(e.dataSource,e.rawFields);return{safeMetas:o,computation:zp(i)}}return{safeMetas:e.rawFields,computation:zp(e.dataSource)}}return{safeMetas:e.rawFields,computation:e.computation}},[e.rawFields,e.dataSource?e.dataSource:e.computation,e.fieldKeyGuard]),r=Xs(e.dark);return x.createElement("div",{className:`${r==="dark"?"dark":""} App font-sans bg-white dark:bg-zinc-900 dark:text-white m-0 p-0`},x.createElement($ae,{onMetaChange:e.onMetaChange,meta:n,keepAlive:e.keepAlive,storeRef:e.storeRef},x.createElement(JYt,{darkMode:r,i18nLang:e.i18nLang,i18nResources:e.i18nResources,computation:t,computationTimeout:e.computationTimeout,onError:e.onError})))}const KYt=G.forwardRef(function(e,t){var V,F;const{name:n,className:r,themeKey:i,dark:o,visualState:a,visualConfig:s,visualLayout:l,locale:u,type:c,themeConfig:d,channelScales:f}=e,h=G.useMemo(()=>e.type==="remote"?e.computation:zp(e.rawData),[c,c==="remote"?e.computation:e.rawData]),m=l!=null?l:s,g=rO(a),y=(V=s.limit)!=null?V:-1,v=(F=s==null?void 0:s.defaultAggregated)!=null?F:!1,[w,Z]=G.useState([]),{allFields:k,viewDimensions:_,viewMeasures:R,filters:I}=G.useMemo(()=>{const O=[],P=[],{dimensions:H,measures:M,filters:j,...J}=a,q=[...H,...M],K=Object.keys(J);for(const D of K)for(const $ of J[D])$.analyticType==="dimension"?O.push($):$.analyticType==="measure"&&P.push($);return{allFields:q,viewDimensions:O,viewMeasures:P,filters:j}},[a]),{viewData:E,loading:X}=Ive({allFields:k,viewDimensions:_,viewMeasures:R,filters:I,defaultAggregated:v,sort:g,folds:s.folds,limit:y,computationFunction:h}),Y=G.useRef({data:E});Y.current={data:E},G.useEffect(()=>{X===!1&&qn.unstable_batchedUpdates(()=>{Z(Y.current.data)})},[X]);const{coordSystem:C="generic"}=s,N=C==="geographic";return x.createElement(y3,{className:r},x.createElement("div",{className:"relative"},N&&x.createElement("div",{className:"max-w-full",style:{height:RG,flexGrow:1}},x.createElement(Aue,{data:E,draggableFieldState:a,visualConfig:s,visualLayout:m})),N||x.createElement(Gve,{themeConfig:d,name:n,loading:X,data:w,ref:t,themeKey:i,dark:o,draggableFieldState:a,visualConfig:s,layout:m,locale:u!=null?u:"en-US",channelScales:f})))});ft(oOe(KYt));ft(G.forwardRef((e,t)=>{const[n,r]=G.useState(null),i=a=>{r(a)},o=()=>{r(null)};return x.createElement(L3,{ref:t},x.createElement(y3,{onMount:i,onUnmount:o},x.createElement(xM,{value:{head:n!=null?n:document.head,body:n!=null?n:document.body}},x.createElement(HYt,{...e}))))}));const DYt=ft(G.forwardRef((e,t)=>{const[n,r]=G.useState(null),i=a=>{r(a)},o=()=>{r(null)};return x.createElement(L3,{ref:t},x.createElement(y3,{onMount:i,onUnmount:o},x.createElement(xM,{value:{head:n!=null?n:document.head,body:n!=null?n:document.body}},x.createElement(ZYt,{...e}))))}));ft(G.forwardRef((e,t)=>{const[n,r]=G.useState(null),i=a=>{r(a)},o=()=>{r(null)};return x.createElement(L3,{ref:t},x.createElement(y3,{onMount:i,onUnmount:o},x.createElement(xM,{value:{head:n!=null?n:document.head,body:n!=null?n:document.body}},x.createElement(BYt,{...e}))))}));let ad={theme:"light",locale:"en-US"};function AYt(e,t,n){var r;if(typeof window.grist=="undefined"){console.warn("Grist API not found; running in standalone mode."),e([]),t([]),n(ad);return}grist.ready({allowSelectBy:!1}),grist.onRecords((i,o)=>{e(i||[])}),grist.docApi?grist.docApi.fetchTable((r=grist.getTableId)==null?void 0:r.call(grist)).then(i=>{const o=((i==null?void 0:i.columns)||[]).map(a=>({id:a.id,name:a.label||a.colId||a.name,type:a.type||"Text"}));t(o)}).catch(()=>t([])):t([]),grist.onOptions(i=>{ad={...ad,...i||{}},n(ad)})}function Zte(e){ad={...ad,...e},typeof window.grist!="undefined"&&grist.setOption(ad)}function Ste(){return ad}const UYt=new Set(["Numeric","Int","Decimal","Float"]),$Yt=new Set(["Date","DateTime","Time"]);function QYt(e){const t=(e.type||"").trim();return UYt.has(t)?{name:e.name,semanticType:"quantitative",analyticType:"measure"}:$Yt.has(t)?{name:e.name,semanticType:"temporal",analyticType:"dimension"}:{name:e.name,semanticType:"nominal",analyticType:"dimension"}}function qYt(e){return e.map(QYt)}function eTt(e=[]){return(e||[]).map(t=>{const n={};for(const r of Object.keys(t||{})){const i=t[r];n[r]=i===void 0?null:i}return n})}function tTt(){const[e,t]=G.useState([]),[n,r]=G.useState([]),[i,o]=G.useState(Ste());G.useEffect(()=>{AYt(u=>t(u||[]),u=>r(u||[]),u=>o(u||Ste()))},[]);const a=G.useMemo(()=>eTt(e||[]),[e]),s=G.useMemo(()=>qYt(n||[]),[n]),l=i.locale||"en-US";return console.log("Data length:",a.length,"Fields length:",s.length),x.createElement("div",{className:"app"},x.createElement("div",{className:"toolbar"},x.createElement("span",{className:"badge"},"Grist table rows: ",e.length),x.createElement("label",null,x.createElement("span",{style:{marginRight:6}},"Theme"),x.createElement("select",{className:"select",value:i.theme||"light",onChange:u=>{const c={...i,theme:u.target.value};o(c),Zte(c)}},x.createElement("option",{value:"light"},"Light"),x.createElement("option",{value:"dark"},"Dark"))),x.createElement("label",{style:{marginLeft:12}},x.createElement("span",{style:{marginRight:6}},"Locale"),x.createElement("select",{className:"select",value:l,onChange:u=>{const c={...i,locale:u.target.value};o(c),Zte(c)}},x.createElement("option",{value:"en-US"},"en-US"),x.createElement("option",{value:"fr-FR"},"fr-FR"),x.createElement("option",{value:"de-DE"},"de-DE"),x.createElement("option",{value:"ja-JP"},"ja-JP"),x.createElement("option",{value:"zh-CN"},"zh-CN")))),x.createElement("div",{className:"content"},x.createElement(DYt,{data:a||[],fields:s||[],i18nLang:l,themeKey:i.theme==="dark"?"dark":"light"})))}const nTt=document.getElementById("root"),rTt=Tre(nTt);rTt.render(x.createElement(tTt,null))});export default iTt();
//# sourceMappingURL=index-C4APTU9j.js.map
